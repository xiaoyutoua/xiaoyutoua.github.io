<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>çµç¥åŸºç¡€ç®—æ³•ç²¾è®²ï¼ˆäºŒï¼‰ã€å¦‚ä½•å­¦ä¹ åŠ¨æ€è§„åˆ’ï¼Ÿï¼Ÿï¼Ÿã€‘</title>
      <link href="/2023/07/17/%E7%81%B5%E7%A5%9E%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%E7%B2%BE%E8%AE%B2%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2023/07/17/%E7%81%B5%E7%A5%9E%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%E7%B2%BE%E8%AE%B2%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/28.png" style="border-radius:10px" width="1000px"></img><div class="tag link"><a class="link-card" title="çµèŒ¶å±±è‰¾åºœ" href="https://leetcode.cn/u/endlesscheng/"><div class="left"><img src="https://assets.leetcode.cn/aliyun-lc-upload/users/endlesscheng/avatar_1675227068.png?x-oss-process=image%2Fformat%2Cwebp"/></div><div class="right"><p class="text">çµèŒ¶å±±è‰¾åºœ</p><p class="url">https://leetcode.cn/u/endlesscheng/</p></div></a></div></p><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><div class="note warning flat"><p>ğŸ’­ğŸ’¡ğŸˆä¸»è¦æ˜¯å°†é—®é¢˜è½¬åŒ–ä¸ºæ¨¡å‹çš„æ€è·¯ï¼ï¼ï¼</p></div><h1 id="ä¸€ã€å…¥é—¨"><a href="#ä¸€ã€å…¥é—¨" class="headerlink" title="ä¸€ã€å…¥é—¨"></a>ä¸€ã€å…¥é—¨</h1><p><strong>æ ¸å¿ƒï¼š</strong>çŠ¶æ€å®šä¹‰ã€çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p><p><strong>å¯å‘æ€è·¯ï¼š</strong>é€‰æˆ–ä¸é€‰&#x2F;é€‰å“ªä¸ª</p><p><strong>ä¸‰æ­¥èµ°ï¼š</strong></p><ul><li>æ€è€ƒå›æº¯æ€ä¹ˆå†™<ul><li>å…¥å‚å’Œè¿”å›å€¼</li><li>é€’å½’åˆ°å“ªé‡Œ</li><li>é€’å½’è¾¹ç•Œå’Œå…¥å£</li></ul></li><li>æ”¹æˆè®°å¿†åŒ–æœç´¢</li><li>1:1ç¿»è¯‘æˆé€’æ¨</li></ul><blockquote><p>å½“ç„¶å¦‚æœèƒ½ç›´æ¥å†™å‡ºçŠ¶æ€å®šä¹‰å’Œè½¬ç§»æ–¹ç¨‹å°±ä¸ç”¨è¿™ä¹ˆæ€è€ƒå•¦ğŸ¤£</p></blockquote><p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong></p><p><code>çŠ¶æ€ä¸ªæ•°*å•ä¸ªçŠ¶æ€æ—¶é—´</code></p><p>ä¾‹å¦‚<code>dfs(i,j)</code>é€’å½’å‡½æ•°ä¸­ï¼ŒçŠ¶æ€ä¸ªæ•°å°±æ˜¯<code>(i,j)</code>çš„ä¸ªæ•°ï¼Œ<code>i</code>æœ‰<code>n</code>ä¸ªï¼Œ<code>j</code>æœ‰<code>n</code>ä¸ªï¼Œé‚£ä¹ˆè‚¯å®šæœ‰<code>O(n)</code>æ–¹çš„çŠ¶æ€ï¼Œå¦‚æœæ¯ä¸ªçŠ¶æ€åªè¦ä¸€æ¬¡æ¯”è¾ƒå¤§å°æˆ–è€…æ±‚å’Œç­‰ï¼Œé‚£ä¹ˆå•ä¸ªçŠ¶æ€æ—¶é—´å°±æ˜¯<code>O(1)</code>ï¼Œæ€»çš„å°±æ˜¯<code>O(næ–¹)</code></p><p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong></p><p>çœ‹åˆ©ç”¨çš„æ•°ç»„å¤§å°ç­‰ç­‰</p><h2 id="æ¥ä¸€ä¸ªä¾‹å­"><a href="#æ¥ä¸€ä¸ªä¾‹å­" class="headerlink" title="æ¥ä¸€ä¸ªä¾‹å­"></a>æ¥ä¸€ä¸ªä¾‹å­</h2><details class="folding-tag" blue><summary> å…¥é—¨ä¾‹å­ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/house-robber/">198. æ‰“å®¶åŠ«èˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h4 id="1-é¦–å…ˆçœ‹æˆå›æº¯é—®é¢˜ã€é€’å½’æœç´¢ã€‘"><a href="#1-é¦–å…ˆçœ‹æˆå›æº¯é—®é¢˜ã€é€’å½’æœç´¢ã€‘" class="headerlink" title="1. é¦–å…ˆçœ‹æˆå›æº¯é—®é¢˜ã€é€’å½’æœç´¢ã€‘"></a>1. é¦–å…ˆçœ‹æˆå›æº¯é—®é¢˜ã€é€’å½’æœç´¢ã€‘</h4><p><img src="https://picbed.dai2yutou.space/article_img/ACM/1.png" alt="1"></p><p>ä»ç¬¬ä¸€ä¸ªæˆ¿å­æˆ–è€…ä»æœ€åä¸€ä¸ªæˆ¿å­å¼€å§‹æ€è€ƒï¼Œå› ä¸ºè¿™ä¸¤ä¸ªå—åˆ°çš„çº¦æŸæ˜¯æœ€å°çš„ã€‚</p><p>æ¯”å¦‚è€ƒè™‘<u>æœ€åä¸€ä¸ªæˆ¿å­</u>é€‰è¿˜æ˜¯ä¸é€‰ï¼Œ</p><ul><li>å¦‚æœä¸é€‰ï¼Œé‚£ä¹ˆé—®é¢˜å°±å˜æˆ äº†n-1ä¸ªæˆ¿å­çš„é—®é¢˜</li><li>å¦‚æœé€‰ï¼Œé‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†n-2ä¸ªæˆ¿å­çš„é—®é¢˜</li></ul><p><strong>å›æº¯ä¸‰é—®ï¼š</strong></p><ul><li>å½“å‰æ“ä½œï¼šæšä¸¾<u>ç¬¬</u>iä¸ªæˆ¿å­é€‰&#x2F;ä¸é€‰</li><li>å­é—®é¢˜ï¼šä»<u>å‰i</u>ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼šåˆ†ç±»è®¨è®º<ul><li>ä¸é€‰ï¼šä»<u>å‰</u>i-1ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li><li>é€‰ï¼šä»<u>å‰</u>i-2ä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li></ul></li></ul><p><code>dfs(i)=max(dfs(i-1),dfs(i-2)+nums[i])</code></p><ul><li>é€’å½’çš„å…¥å‚æ˜¯ç´¢å¼•å³ç¬¬å‡ ä¸ªæˆ¿å­</li><li>nums[i]è¡¨ç¤ºç¬¬iä¸ªæˆ¿å­çš„é‡‘é¢</li><li>dfs(i)è¡¨ç¤ºä»å‰iä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li></ul><blockquote><p>åœ¨å®šä¹‰DFSæˆ–è€…DFæ•°ç»„çš„å«ä¹‰æ—¶ï¼Œå®ƒåªèƒ½è¡¨ç¤ºä»ä¸€äº›å…ƒç´ ä¸­ç®—å‡ºçš„ç»“æœï¼Œè€Œä¸æ˜¯ä»ä¸€ä¸ªå…ƒç´ ä¸­ç®—å‡ºçš„ç»“æœã€‚</p><p>è¿™é‡Œæ²¡æœ‰æŠŠå¾—åˆ°çš„é‡‘é¢å’Œä½œä¸ºé€’å½’çš„å…¥å‚ï¼Œè€Œæ˜¯å½“ä½œäº†è¿”å›å€¼ï¼</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i)-&gt;<span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="type">int</span> res = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>),<span class="built_in">dfs</span>(i<span class="number">-2</span>)+nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>)</span><br></pre></td></tr></table></figure><p>å›æº¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§åˆ«ï¼Œè¿™æ ·å†™è‚¯å®šä¼šè¶…æ—¶ï¼</p><h4 id="2-é€’å½’æœç´¢-ä¿å­˜è®¡ç®—ç»“æœ-x3D-è®°å¿†åŒ–æœç´¢"><a href="#2-é€’å½’æœç´¢-ä¿å­˜è®¡ç®—ç»“æœ-x3D-è®°å¿†åŒ–æœç´¢" class="headerlink" title="2. é€’å½’æœç´¢+ä¿å­˜è®¡ç®—ç»“æœ&#x3D;è®°å¿†åŒ–æœç´¢"></a>2. é€’å½’æœç´¢+ä¿å­˜è®¡ç®—ç»“æœ&#x3D;è®°å¿†åŒ–æœç´¢</h4><p><strong>ä¼˜åŒ–ä¸€ä¸‹æ—¶é—´å¤æ‚åº¦ï¼š</strong></p><p>ä»ä¸Šé¢çš„æœç´¢æ ‘ä¸­å¯ä»¥çœ‹å‡ºï¼š</p><ul><li>å½“ä¸¤æ¬¡ä¸é€‰çš„æ—¶å€™ï¼Œä¼šé€’å½’åˆ°dfs(i-2)</li><li>ä¸€æ¬¡é€‰çš„æ—¶å€™ï¼Œä¹Ÿä¼šé€’å½’åˆ°dfs(i-2)</li></ul><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†ç¬¬ä¸€æ¬¡é€’å½’åˆ°dfs(i-2)çš„ç»“æœä¿å­˜ä¸‹æ¥ï¼Œè¿™æ ·å°±ä¸ä¼šé‡å¤è®¡ç®—äº†ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/2.png" alt="2"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ä¼˜åŒ–åçš„æœç´¢æ ‘åªæœ‰O(n)ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¹Ÿä¼˜åŒ–åˆ°äº†O(n)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">cache</span><span class="params">(n, <span class="number">-1</span>)</span></span>;<span class="comment">//æ‰€æœ‰å€¼åˆå§‹åŒ–ä¸º-1ï¼Œå› æ­¤ç­”æ¡ˆä¸å¯èƒ½æ˜¯è´Ÿæ•°</span></span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> (cache[i] != <span class="number">-1</span>) <span class="keyword">return</span> cache[i];<span class="comment">//è¯´æ˜ä¹‹å‰å·²ç»é€’å½’è¿‡äº†</span></span><br><span class="line">            <span class="type">int</span> res = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i - <span class="number">1</span>), <span class="built_in">dfs</span>(i - <span class="number">2</span>) + nums[i]);</span><br><span class="line">            cache[i] = res;<span class="comment">//è®°å½•ä¸‹æ¥</span></span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¤æ‚åº¦åˆ°åº•æ€ä¹ˆç®—ï¼Ÿï¼Ÿï¼Ÿ</p><blockquote><p>æ—¶é—´å¤æ‚åº¦&#x3D;çŠ¶æ€ä¸ªæ•°*å•ä¸ªçŠ¶æ€æ‰€éœ€è¦è®¡ç®—æ—¶é—´</p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€åœ¨è¿™é‡ŒçŠ¶æ€ä¸ªæ•°æ˜¯O(n)çš„ï¼Œå•ä¸ªçŠ¶æ€çš„è®¡ç®—æ—¶é—´æ˜¯O(1)çš„ã€‚ã€‘</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€ä½¿ç”¨äº†ä¸€ä¸ªé¢å¤–çš„æ•°ç»„cacheã€‘</p></blockquote><h4 id="3-1-1ç¿»è¯‘æˆè¿­ä»£ã€é€’æ¨ã€‘"><a href="#3-1-1ç¿»è¯‘æˆè¿­ä»£ã€é€’æ¨ã€‘" class="headerlink" title="3. 1:1ç¿»è¯‘æˆè¿­ä»£ã€é€’æ¨ã€‘"></a>3. 1:1ç¿»è¯‘æˆè¿­ä»£ã€é€’æ¨ã€‘</h4><p>ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºmaxï¼Œå‘ç”Ÿåœ¨é€’å½’è°ƒç”¨ä¹‹åï¼Œä¹Ÿå°±æ˜¯åœ¨é€’å½’çš„ã€å½’ã€‘çš„è¿‡ç¨‹å½“ä¸­ï¼Œæ‰å‘ç”Ÿäº†å®é™…çš„è®¡ç®—ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/2.png" alt="2"></p><p>å¦‚å›¾ï¼Œ0å’Œ1å½’åˆ°äº†2ï¼Œ2å’Œ1å½’åˆ°äº†3ï¼Œ3å’Œ2å½’åˆ°äº†4ï¼Œå› æ­¤æˆ‘ä»¬çŸ¥é“è¦ä»å“ªäº›ç‚¹å½’åˆ°å“ªä¸ªç‚¹çš„ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å»æ‰é€’å½’ä¸­çš„ã€é€’ã€‘ï¼Œåªä¿ç•™ã€å½’ã€‘çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥ä»æœ€ä¸‹é¢å¼€å§‹å¾€ä¸Šè®¡ç®—ã€‚</p><blockquote><p>è‡ªé¡¶å‘ä¸‹ç®—ï¼šè®°å¿†åŒ–æœç´¢ï¼›</p><p>è‡ªåº•å‘ä¸Šç®—ï¼šé€’æ¨ã€‚</p></blockquote><p><strong>é€’å½’â€”&gt;é€’æ¨æ–¹æ³•ï¼š</strong></p><ul><li>dfså‡½æ•°â€”&gt;fæ•°ç»„</li><li>é€’å½’â€”&gt;å¾ªç¯</li><li>é€’å½’è¾¹ç•Œâ€”&gt;æ•°ç»„åˆå§‹å€¼</li></ul><blockquote><p>dfs(i) &#x3D; max(dfs(i-1),dfs(i-2)+nums[i])</p><p>f(i) &#x3D; max(f(i-1),f(i-2)+nums[i])&#x2F;&#x2F;ä¸ºé¿å…è´Ÿæ•°ä¸‹æ ‡ï¼Œå¯ä»¥iä»2å¼€å§‹</p><p>f(i+2) &#x3D; max(f(i+1),f(i)+nums[i])&#x2F;&#x2F;ä¹Ÿå¯ä»¥éƒ½+2</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(n + <span class="number">2</span>)</span></span>;</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ç§</span></span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>,f[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;n+<span class="number">2</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i] = <span class="built_in">max</span>(f[i<span class="number">-1</span>],f[i<span class="number">-2</span>]+nums[i<span class="number">-2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n+<span class="number">1</span>];</span><br><span class="line">        <span class="comment">//ç¬¬äºŒç§</span></span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; n; ++i)</span></span><br><span class="line">        <span class="comment">//    f[i + 2] = max(f[i + 1], f[i] + nums[i]);</span></span><br><span class="line">        <span class="comment">// return f.back();//f(n+1)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€næ˜¯numsæ•°ç»„çš„é•¿åº¦ã€‘</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p></blockquote><h4 id="4-ç©ºé—´ä¼˜åŒ–"><a href="#4-ç©ºé—´ä¼˜åŒ–" class="headerlink" title="4. ç©ºé—´ä¼˜åŒ–"></a>4. ç©ºé—´ä¼˜åŒ–</h4><p><code>f(i) = max(f(i-1),f(i-2)+nums[i])</code></p><p>è§‚å¯Ÿæ­¤å¼ï¼Œå¯ä»¥å‘ç°f(i)çš„ç»“æœæ€»æ˜¯ç”±f(i-1)å’Œf(i-2)å¾—å‡ºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¦è®¡ç®—ä¸€ä¸ªf(i)ï¼Œåªéœ€è¦çŸ¥é“å®ƒçš„ä¸Šä¸€ä¸ªçŠ¶æ€å’Œä¸Šä¸Šä¸€ä¸ªçŠ¶æ€çš„å€¼å°±å¯ä»¥ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªf0è¡¨ç¤ºä¸Šä¸Šä¸€ä¸ªçŠ¶æ€ï¼Œf1è¡¨ç¤ºä¸Šä¸€ä¸ªçŠ¶æ€ï¼Œé‚£ä¹ˆå¯ä»¥æ”¹å†™ä¸Šå¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mewF = <span class="built_in">max</span>(f1,f0+nums[i])</span><br><span class="line">f0 = f1</span><br><span class="line">f1 = newF</span><br></pre></td></tr></table></figure><p>å…·ä½“ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> f0 = <span class="number">0</span>, f1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : nums) &#123;</span><br><span class="line">            <span class="type">int</span> new_f = <span class="built_in">max</span>(f1, f0 + x);</span><br><span class="line">            f0 = f1;</span><br><span class="line">            f1 = new_f;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote>              </div>            </details><h1 id="äºŒã€é€‰å’Œä¸é€‰"><a href="#äºŒã€é€‰å’Œä¸é€‰" class="headerlink" title="äºŒã€é€‰å’Œä¸é€‰"></a>äºŒã€é€‰å’Œä¸é€‰</h1><h2 id="2-1-0-1èƒŒåŒ…"><a href="#2-1-0-1èƒŒåŒ…" class="headerlink" title="2.1 0-1èƒŒåŒ…"></a>2.1 0-1èƒŒåŒ…</h2><h3 id="ä»€ä¹ˆæ˜¯0-1èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯0-1èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯0-1èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯0-1èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ</h3><p>æœ‰<code>n</code>ä¸ªç‰©å“ï¼Œç¬¬iä¸ªç‰©å“çš„ä½“ç§¯ä¸º<code>w[i]</code>ï¼Œä»·å€¼ä¸º<code>v[i]</code>ï¼Œæ¯ä¸ªç‰©å“è‡³å¤šé€‰ä¸€ä¸ªï¼Œæ±‚ä½“ç§¯å’Œä¸è¶…è¿‡<code>capacity</code>æ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚</p><h3 id="å›æº¯ä¸‰é—®-è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ-ï¼š"><a href="#å›æº¯ä¸‰é—®-è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ-ï¼š" class="headerlink" title="å›æº¯ä¸‰é—®[è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ]ï¼š"></a>å›æº¯ä¸‰é—®[è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ]ï¼š</h3><ul><li>å½“å‰æ“ä½œï¼šæšä¸¾ç¬¬iä¸ªç‰©å“é€‰æˆ–ä¸é€‰<ul><li>é€‰ï¼šå‰©ä½™å®¹é‡å‡å°‘<code>w[i]</code></li><li>ä¸é€‰ï¼šå‰©ä½™å®¹é‡ä¸å˜</li></ul></li><li>å­é—®é¢˜ï¼šåœ¨å‰©ä½™å®¹é‡ä¸ºcæ—¶ï¼Œä»å‰iä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼š<ul><li>é€‰ï¼šåœ¨å‰©ä½™å®¹é‡ä¸º<code>c-w[i]</code>æ—¶ï¼Œä»å‰<code>i-1</code>ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li><li>ä¸é€‰ï¼šåœ¨å‰©ä½™å®¹é‡ä¸º<code>c</code>æ—¶ï¼Œä»å‰<code>i-1</code>ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li></ul></li></ul><p><code>dfs(i,c) = max(dfs(i-1,c),dfs(i-1,c-w[i])+v[i])</code></p><p>ä¸‹é¢ç»™ä¸€ä¸ª<strong>0-1èƒŒåŒ…</strong>çš„é€’å½’æ¨¡æ¿ä»£ç ï¼š</p><p>å½“æˆ‘ä»¬é‡åˆ°0-1èƒŒåŒ…é—®é¢˜çš„æ—¶å€™ï¼Œå…ˆæ ¹æ®æ­¤ä»£ç è¿›è¡Œæ€è€ƒï¼Œä¸€æ­¥æ­¥å¾—å‡ºçŠ¶æ€å®šä¹‰æ–¹ç¨‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">n = w.<span class="built_in">size</span>();<span class="comment">//v.size() ç‰©å“ä¸ªæ•°</span></span><br><span class="line"><span class="comment">// å®šä¹‰é€’å½’å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">zero_one_knapsack</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">    <span class="comment">//é€‰è¿˜æ˜¯ä¸é€‰</span></span><br><span class="line">    <span class="keyword">if</span>(c&lt;w[i]) <span class="comment">//è¡¨ç¤ºæ­¤æ—¶èƒŒåŒ…å‰©ä½™å®¹é‡å°äºæ­¤ç‰©å“çš„ä½“ç§¯ï¼Œè¿™é‡Œåªèƒ½ä¸é€‰</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,c),<span class="built_in">dfs</span>(i<span class="number">-1</span>,c-w[i])+v[i])</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">zero_one_knapsack</span>(n<span class="number">-1</span>,capacity)<span class="comment">//ä»æœ€åä¸€ä¸ªç‰©å“å¼€å§‹é€’å½’</span></span><br></pre></td></tr></table></figure><h3 id="æ¥ä¸€ä¸ªä¾‹å­-1"><a href="#æ¥ä¸€ä¸ªä¾‹å­-1" class="headerlink" title="æ¥ä¸€ä¸ªä¾‹å­"></a>æ¥ä¸€ä¸ªä¾‹å­</h3><details class="folding-tag" blue><summary> ç›®æ ‡å’Œ </summary>              <div class='content'>              <p><strong>é¢˜ç›®ï¼š</strong><a href="https://leetcode.cn/problems/target-sum/">494. ç›®æ ‡å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>çµç¥é¢˜è§£ï¼š</strong><a href="https://leetcode.cn/problems/target-sum/solution/jiao-ni-yi-bu-bu-si-kao-dong-tai-gui-hua-s1cx/">æ•™ä½ ä¸€æ­¥æ­¥æ€è€ƒåŠ¨æ€è§„åˆ’ï¼ä¸€ä¸ªè§†é¢‘è®²é€ï¼ï¼ˆPython&#x2F;Java&#x2F;C++&#x2F;Goï¼‰ - ç›®æ ‡å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>æ­¤é¢˜çœ‹ä¸Šå»ä¸0-1èƒŒåŒ…å…³ç³»ä¸å¤§ã€‚</p><p><strong>æ¢ç©¶ï¼š</strong></p><p>å‡è®¾å…¶ä¸­æ·»åŠ æ­£å·çš„æ•°å­—çš„å’Œæˆ‘ä»¬è®¾ç½®ä¸º<code>p</code>ï¼Œé‚£ä¹ˆæ·»åŠ è´Ÿå·çš„ï¼Œå°±æ˜¯æ‰€æœ‰å…ƒç´ çš„å’Œ<code>s</code>å‡å»<code>p</code></p><p>é‚£ä¹ˆ<code>p-(s-p)</code>å°±æ˜¯æˆ‘ä»¬çš„<code>target</code>ï¼ŒåŒ–ç®€ä¸€ä¸‹å³<code>2p=s+target</code>ï¼Œæ‰€æœ‰<code>p=(s+target)/2</code>ï¼Œé‚£ä¹ˆé—®é¢˜å°±å˜æˆä»<code>nums</code>ä¸­é€‰æ‹©ä¸€äº›æ•°å­—ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œæ°å¥½ç­‰äº<code>(s+target)/2</code>çš„æ–¹æ¡ˆæ•°ã€‚</p><p>ç”±äºé—®é¢˜ä¸­<code>nums</code>æ•°ç»„æ˜¯æ•´æ•°æ•°ç»„ï¼Œé‚£ä¹ˆ<code>s+target</code>å¿…é¡»æ˜¯ä¸€ä¸ªå¶æ•°ï¼Œå¦åˆ™<code>/2</code>å¾—åˆ°çš„ç»“æœè‚¯å®šæ˜¯ä¸€ä¸ªå°æ•°ï¼Œè€Œä¸”<code>s+t</code>æ˜¯ä¸å¯èƒ½æ˜¯è´Ÿæ•°çš„ã€‚</p><p>é‚£ä¹ˆæ­¤é¢˜å°±å¯ä»¥è½¬æ¢æˆé€‰ä¸€äº›æ•°ï¼Œè¿™äº›æ•°çš„å’Œæ°å¥½ç­‰äºä¸€ä¸ªæ•°çš„æ–¹æ¡ˆæ•°äº†ï¼Œè¿™æ˜¯0-1èƒŒåŒ…çš„ä¸€ç§å¸¸è§çš„å˜å½¢ï¼ŒæŠŠé€’å½’å…¬å¼çš„æœ€å¤§å€¼æ”¹æˆ<code>+</code>å°±å¥½äº†ã€‚</p><div class="tabs" id="ç›®æ ‡å’Œ"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ç›®æ ‡å’Œ-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#ç›®æ ‡å’Œ-2">é€’æ¨+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#ç›®æ ‡å’Œ-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#ç›®æ ‡å’Œ-4">ç©ºé—´ä¼˜åŒ–:ä¸¤ä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#ç›®æ ‡å’Œ-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ç›®æ ‡å’Œ-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        target += <span class="built_in">accumulate</span>(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">end</span>(),<span class="number">0</span>);    <span class="comment">// è¡¨ç¤ºs+t</span></span><br><span class="line">        <span class="keyword">if</span> (target&lt;<span class="number">0</span> || target%<span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œä¹Ÿä¸èƒ½ä¸ºå¥‡æ•°</span></span><br><span class="line">        target /= <span class="number">2</span>;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> c) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> c==<span class="number">0</span>; <span class="comment">//c==0è¡¨ç¤ºæœ€åæ˜¯å¦æ°å¥½ç­‰äºç›®æ ‡å€¼ï¼Œç­‰äºè¿”å›1ï¼Œè¡¨ç¤ºæœ‰ä¸€ä¸ªæ–¹æ¡ˆï¼Œä¸ç­‰äº0è¿”å›0ï¼Œè¡¨ç¤ºæ­¤æ–¹æ¡ˆè¡Œä¸é€š</span></span><br><span class="line">            <span class="keyword">if</span>(c&lt;nums[i]) <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,c);    <span class="comment">//cå°äºnums[i]ï¼Œè‚¯å®šæ˜¯ä¸èƒ½é€‰nums[i]äº†</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,c)+<span class="built_in">dfs</span>(i<span class="number">-1</span>,c-nums[i]);   <span class="comment">//åŠ å’Œï¼Œå¯¹nums[i]é€‰çš„æ–¹æ¡ˆæ•°å’Œä¸é€‰çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findTargetSumWays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        target += <span class="built_in">sum</span>(nums)</span><br><span class="line">        <span class="keyword">if</span> target &lt; <span class="number">0</span> <span class="keyword">or</span> target % <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        target //= <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i, c</span>):</span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> c == <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> c &lt; nums[i]:</span><br><span class="line">                <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c)</span><br><span class="line">            <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c) + dfs(i - <span class="number">1</span>, c - nums[i])</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="built_in">len</span>(nums) - <span class="number">1</span>, target)</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(2çš„næ¬¡æ–¹*(target+S))ã€æ¯ä¸ªæ•°å­—éƒ½æœ‰é€‰å’Œä¸é€‰,Sä¸ºnumsæ•°ç»„çš„å’Œï¼Œnä¸ºnumsæ•°ç»„çš„é•¿åº¦ã€‘</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*(target+S))</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç›®æ ‡å’Œ-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        target += <span class="built_in">accumulate</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (target &lt; <span class="number">0</span> || target % <span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        target /= <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>(), cache[n][target + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(cache, <span class="number">-1</span>, <span class="built_in">sizeof</span>(cache)); <span class="comment">// -1 è¡¨ç¤ºæ²¡ç”¨è®¿é—®è¿‡</span></span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i, <span class="type">int</span> c) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) <span class="keyword">return</span> c == <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> &amp;res = cache[i][c];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>) <span class="keyword">return</span> res;<span class="function">l</span></span><br><span class="line"><span class="function">            <span class="title">if</span> <span class="params">(c &lt; nums[i])</span> <span class="keyword">return</span> res </span>= <span class="built_in">dfs</span>(i - <span class="number">1</span>, c);</span><br><span class="line">            <span class="keyword">return</span> res = <span class="built_in">dfs</span>(i - <span class="number">1</span>, c) + <span class="built_in">dfs</span>(i - <span class="number">1</span>, c - nums[i]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>, target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findTargetSumWays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        target += <span class="built_in">sum</span>(nums)</span><br><span class="line">        <span class="keyword">if</span> target &lt; <span class="number">0</span> <span class="keyword">or</span> target % <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        target //= <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">        @cache  </span><span class="comment"># è®°å¿†åŒ–æœç´¢</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i, c</span>):</span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> c == <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> c &lt; nums[i]:</span><br><span class="line">                <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c)</span><br><span class="line">            <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c) + dfs(i - <span class="number">1</span>, c - nums[i])</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="built_in">len</span>(nums) - <span class="number">1</span>, target)</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*(target+S))</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*(target+S))</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç›®æ ‡å’Œ-3"><p>å°†dfs()æ”¹æˆfæ•°ç»„ï¼Œå°†é€’å½’æ”¹æˆå¾ªç¯ã€‚</p><p><code>f[i][capacity] = f[i-1][capacity]+f[i-1][capacity-w[i]]</code></p><p><code>f[i+1][capacity] = f[i][capacity]+f[i][capacity-w[i]]</code>ã€ä¸ºé¿å…å‡ºç°è´Ÿæ•°ä¸‹æ ‡ï¼Œå°†i+1ã€‘</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        target += <span class="built_in">accumulate</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (target &lt; <span class="number">0</span> || target % <span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        target /= <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>(), f[n + <span class="number">1</span>][target + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="built_in">sizeof</span>(f));<span class="comment">//åˆå§‹æ¯ä¸€ä¸ªiå’Œcå¯¹åº”çš„féƒ½ä¸º0å³æ–¹æ¡ˆä¹¦ä¸º0</span></span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;<span class="comment">//åˆå§‹åŒ–å½“i=0ï¼Œc=0çš„æ—¶å€™ï¼Œè‚¯å®šæœ‰ä¸€ä¸ªæ–¹æ¡ˆæ•°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt;= target; ++c)</span><br><span class="line">                <span class="keyword">if</span> (c &lt; nums[i]) f[i + <span class="number">1</span>][c] = f[i][c];</span><br><span class="line">                <span class="keyword">else</span> f[i + <span class="number">1</span>][c] = f[i][c] + f[i][c - nums[i]];</span><br><span class="line">        <span class="keyword">return</span> f[n][target];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*(target+S))</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*(target+S))</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç›®æ ‡å’Œ-4"><p>æ ¹æ®ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ¯æ¬¡å¾ªç¯ï¼Œå½“å‰çš„<code>f[i+1]</code>æ€»æ˜¯ç”±ä¸Šä¸€ä¸ª<code>f[i]</code>å¾—åˆ°çš„ï¼Œæ‰€æœ‰æˆ‘ä»¬æ˜¯ä¸æ˜¯åªéœ€è¦ç”¨åˆ°ä¸¤ä¸ªæ•°ç»„å°±å¯ä»¥äº†ã€‚</p><p><code>f[i + 1][c] = f[i][c]---&gt;f[i + 1][c] = f[i][c];f[i + 1][c] = f[i][c]</code></p><p><code>f[i + 1][c] = f[i][c] + f[i][c - nums[i]]---&gt;f[i + 1][c] = f[i][c] + f[i][c - nums[i]];f[i] = f[i+1]</code></p><p>ç®€ä¾¿å†™æ³•ï¼šç›´æ¥<code>f[(i+1)%2]å’Œf[i%2]</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        target += <span class="built_in">accumulate</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (target &lt; <span class="number">0</span> || target % <span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        target /= <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>(), f[<span class="number">2</span>][target + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt;= target; ++c)</span><br><span class="line">                <span class="keyword">if</span> (c &lt; nums[i]) f[(i + <span class="number">1</span>) % <span class="number">2</span>][c] = f[i % <span class="number">2</span>][c];</span><br><span class="line">                <span class="keyword">else</span> f[(i + <span class="number">1</span>) % <span class="number">2</span>][c] = f[i % <span class="number">2</span>][c] + f[i % <span class="number">2</span>][c - nums[i]];</span><br><span class="line">        <span class="keyword">return</span> f[n % <span class="number">2</span>][target];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*(target+S))</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(target+S)</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç›®æ ‡å’Œ-5"><p>å½“<code>w[i]=2</code>çš„æ—¶å€™ï¼Œä¸¾ä¾‹ä¸€ä¸‹</p><p><code>f[i+1][c] = f[i][c]+f[i][c-w[i]]</code></p><p>ç®€åŒ–ï¼š<code>f[c] = f[c]+f[c-w[i]]</code></p><p><code>f[0]=1</code></p><p><code>i:1,2,3,5,6,7,9</code></p><p><code>i+1:1,2,3,5,6,7,9</code></p><blockquote><p><strong>ä»å·¦å¾€å³å¾ªç¯ï¼š</strong></p><p>å‰ä¸¤ä¸ªä¸å˜</p><p>f[3] &#x3D; f[3]+f[1] &#x3D; 3+1 &#x3D; 4</p><p>f[4] &#x3D; f[4]+f[2] &#x3D; 5+2 &#x3D; 7</p><p>f[5] &#x3D; f[5]+f[3] &#x3D; 6+4&#x3D;10ã€å˜äº†ï¼Œä¸æ˜¯ä¹‹å‰çš„3+6&#x3D;9äº†ã€‘</p><p><strong>ä»å³å¾€å·¦å¾ªç¯ï¼š</strong></p><p>f[7] &#x3D; f[7] + f[5] &#x3D; 6+9 &#x3D; 15</p><p>f[6] &#x3D; f[6] + f[4] &#x3D; 7+5 &#x3D; 12</p><p>f[5] &#x3D; f[5]+f[3] &#x3D; 6+3 &#x3D; 9</p><p>æ²¡æœ‰å˜ï¼Œå› ä¸ºæ²¡æœ‰ç”¨åˆ°ä¹‹å‰çš„ç»“æœ</p></blockquote><p>æŠŠç¬¬ä¸€ä¸ªç»´åº¦å»æ‰ï¼Œä»åå¾€å‰æšä¸¾ï¼Œä»targetå¼€å§‹åˆ°x</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        target += <span class="built_in">accumulate</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (target &lt; <span class="number">0</span> || target % <span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        target /= <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> f[target + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : nums)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = target; c &gt;= x; --c)</span><br><span class="line">                f[c] += f[c - x];</span><br><span class="line">        <span class="keyword">return</span> f[target];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*(target+S))</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(target+S)</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h3 id="ç›¸å…³çš„é¢˜ç›®ï¼š"><a href="#ç›¸å…³çš„é¢˜ç›®ï¼š" class="headerlink" title="ç›¸å…³çš„é¢˜ç›®ï¼š"></a>ç›¸å…³çš„é¢˜ç›®ï¼š</h3><p><a href="https://leetcode.cn/problems/partition-equal-subset-sum/">416. åˆ†å‰²ç­‰å’Œå­é›† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h2 id="2-2-å®Œå…¨èƒŒåŒ…"><a href="#2-2-å®Œå…¨èƒŒåŒ…" class="headerlink" title="2.2 å®Œå…¨èƒŒåŒ…"></a>2.2 å®Œå…¨èƒŒåŒ…</h2><h3 id="ä»€ä¹ˆæ˜¯å®Œå…¨èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å®Œå…¨èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å®Œå…¨èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å®Œå…¨èƒŒåŒ…é—®é¢˜å‘¢ï¼Ÿ</h3><p>æœ‰<code>n</code>ç§ç‰©å“ï¼Œç¬¬iä¸ªç‰©å“çš„ä½“ç§¯ä¸º<code>w[i]</code>ï¼Œä»·å€¼ä¸º<code>v[i]</code>ï¼Œæ¯ä¸ªç‰©å“è‡³å¤šé€‰ä¸€ä¸ªï¼Œæ±‚ä½“ç§¯å’Œä¸è¶…è¿‡<code>capacity</code>æ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚</p><p>ä¸0-1èƒŒåŒ…é—®é¢˜çš„åŒºåˆ«ï¼šè¿™é‡Œæ¯ç§ç‰©å“å¯ä»¥é‡å¤é€‰æ‹©ã€‚</p><h3 id="å›æº¯ä¸‰é—®-è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ-ï¼š-1"><a href="#å›æº¯ä¸‰é—®-è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ-ï¼š-1" class="headerlink" title="å›æº¯ä¸‰é—®[è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ]ï¼š"></a>å›æº¯ä¸‰é—®[è¿˜æ˜¯ä»å›æº¯å¼€å§‹æ€è€ƒ]ï¼š</h3><ul><li>å½“å‰æ“ä½œï¼šæšä¸¾ç¬¬iç§ç‰©å“é€‰ä¸€ä¸ªæˆ–ä¸é€‰<ul><li>é€‰ä¸€ä¸ªï¼šå‰©ä½™å®¹é‡å‡å°‘w[i]</li><li>ä¸é€‰ï¼šå‰©ä½™å®¹é‡ä¸å˜</li></ul></li><li>å­é—®é¢˜ï¼šåœ¨å‰©ä½™å®¹é‡ä¸ºcæ—¶ï¼Œä»å‰iç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼š<ul><li>é€‰ä¸€ä¸ªï¼šåœ¨å‰©ä½™å®¹é‡ä¸ºc-w[i]æ—¶ï¼Œä»å‰iç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li><li>ä¸é€‰ï¼šåœ¨å‰©ä½™å®¹é‡ä¸ºcæ—¶ï¼Œä»å‰i-1ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li></ul></li></ul><blockquote><p><strong>å’Œ0-1èƒŒåŒ…é—®é¢˜çš„åŒºåˆ«ï¼š</strong></p><p><strong>åœ¨é€‰æ‹©ä¸€ä¸ªç‰©å“æ—¶ï¼Œiæ˜¯ä¸å˜çš„ï¼Œè¡¨ç¤ºç»§ç»­é€‰ç¬¬iç§ç‰©å“ï¼Œæ‰€ä»¥é€’å½’å°±ä¸æ˜¯åˆ°i-1äº†ï¼Œè€Œæ˜¯åˆ°i</strong></p></blockquote><p><code>dfs(i,c) = max(dfs(i-1,c),dfs(i,c-w[i])+v[i])</code></p><p>ä¸‹é¢ç»™ä¸€ä¸ª<strong>å®Œå…¨èƒŒåŒ…</strong>çš„é€’å½’æ¨¡æ¿ä»£ç ï¼š</p><p>å½“æˆ‘ä»¬é‡åˆ°0-1èƒŒåŒ…é—®é¢˜çš„æ—¶å€™ï¼Œå…ˆæ ¹æ®æ­¤ä»£ç è¿›è¡Œæ€è€ƒï¼Œä¸€æ­¥æ­¥å¾—å‡ºçŠ¶æ€å®šä¹‰æ–¹ç¨‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">n = w.<span class="built_in">size</span>();<span class="comment">//v.size() ç‰©å“ä¸ªæ•°</span></span><br><span class="line"><span class="comment">// å®šä¹‰é€’å½’å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">zero_one_knapsack</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">    <span class="comment">//é€‰è¿˜æ˜¯ä¸é€‰</span></span><br><span class="line">    <span class="keyword">if</span>(c&lt;w[i]) <span class="comment">//è¡¨ç¤ºæ­¤æ—¶èƒŒåŒ…å‰©ä½™å®¹é‡å°äºæ­¤ç‰©å“çš„ä½“ç§¯ï¼Œè¿™é‡Œåªèƒ½ä¸é€‰</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,c),<span class="built_in">dfs</span>(i,c-w[i])+v[i])</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">zero_one_knapsack</span>(n<span class="number">-1</span>,capacity)<span class="comment">//ä»æœ€åä¸€ä¸ªç‰©å“å¼€å§‹é€’å½’</span></span><br></pre></td></tr></table></figure><h3 id="æ¥ä¸€ä¸ªä¾‹å­-2"><a href="#æ¥ä¸€ä¸ªä¾‹å­-2" class="headerlink" title="æ¥ä¸€ä¸ªä¾‹å­"></a>æ¥ä¸€ä¸ªä¾‹å­</h3><details class="folding-tag" blue><summary> é›¶é’±å…‘æ¢ </summary>              <div class='content'>              <p><strong>é¢˜ç›®ï¼š</strong><a href="https://leetcode.cn/problems/coin-change/">322. é›¶é’±å…‘æ¢ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>çµç¥é¢˜è§£ï¼š</strong><a href="https://leetcode.cn/problems/coin-change/solution/jiao-ni-yi-bu-bu-si-kao-dong-tai-gui-hua-21m5/">322. é›¶é’±å…‘æ¢ é¢˜è§£ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>æ¢ç©¶ï¼š</strong></p><p>è¿™é‡Œæ˜¯ä»é›¶é’±ä¸­é€‰æ‹©ä¸€äº›ï¼Œç„¶åæ°å¥½å’Œä¸ºamountï¼Œæ¯ä¸ªé›¶é’±å¯ä»¥é€‰æ‹©å¤šæ¬¡ï¼Œé—®æœ€å°‘éœ€è¦å¤šå°‘ä¸ªæ•°ï¼Œè¿™å…¶å®å°±æ˜¯å®Œå…¨èƒŒåŒ…çš„ä¸€ç§å˜å½¢ã€‚</p><blockquote><p>æŠŠæ¯ä¸ªç‰©å“çš„ä»·å€¼çœ‹æˆä¸º1ã€v[i]&#x3D;1ã€‘ï¼ŒæŠŠæ±‚æœ€å¤§ä»·å€¼å’Œï¼Œæ”¹æˆæ±‚æœ€å°ä»·å€¼å’Œï¼Œå¯uå¾—åˆ°å¦‚ä¸‹çš„çŠ¶æ€è½¬ç§»ï¼š</p><p><code>dfs(i,c) = min(dfs(i-1,c),dfs(i,c-w[i])+v[i])</code></p><p>å°±æ˜¯æœ€ç»ˆçš„ç›®æ ‡æ˜¯æœ‰å¤šå°‘ä¸ªç¡¬å¸ï¼Œdfså‡½æ•°çš„è¿”å›å€¼å°±æ˜¯æœ€ç»ˆç¡¬å¸çš„ä¸ªæ•°ï¼Œæ‰¾åˆ°æœ€å°çš„dfsï¼Œå¤šä¸€ä¸ªç¡¬å¸ï¼Œå¤šä¸€ä¸ª1ï¼Œè¿™é‡Œçš„capacityå°±æ˜¯amountï¼Œæœ€å°çš„capacityã€‚</p></blockquote><div class="tabs" id="é›¶é’±å…‘æ¢"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#é›¶é’±å…‘æ¢-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#é›¶é’±å…‘æ¢-2">é€’æ¨+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#é›¶é’±å…‘æ¢-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#é›¶é’±å…‘æ¢-4">ç©ºé—´ä¼˜åŒ–:ä¸¤ä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#é›¶é’±å…‘æ¢-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="é›¶é’±å…‘æ¢-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>();</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> c) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> c==<span class="number">0</span> ? <span class="number">0</span> : INT_MAX / <span class="number">2</span>; <span class="comment">//c==0è¡¨ç¤ºæœ€åæ˜¯å¦æ°å¥½ç­‰äºç›®æ ‡å€¼ï¼Œç­‰äº0è¿”å›0ï¼Œè¡¨ç¤ºæ­¤æ–¹æ¡ˆæ˜¯æ»¡è¶³å’Œç­‰äºamountçš„ï¼Œè¿”å›åˆå§‹å€¼ï¼Œä¸ç­‰äº0è¡¨ç¤ºæ­¤æ–¹æ¡ˆä¸æ»¡è¶³å’Œç­‰äºamountï¼Œè¿”å›æ— ç©·å¤§ï¼Œæ–¹ä¾¿æœ€ç»ˆç»“æœåˆ¤æ–­æ˜¯å¦è¿”å›-1ï¼Œè¿™é‡ŒINT_MAX/2æ˜¯å› ä¸ºé˜²æ­¢ä¸‹é¢+1æº¢å‡º</span></span><br><span class="line">            <span class="keyword">if</span>(c&lt;coins[i]) <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,c);    <span class="comment">//cå°äºcoins[i]ï¼Œè‚¯å®šæ˜¯ä¸èƒ½é€‰coins[i]äº†</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">min</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,c),<span class="built_in">dfs</span>(i,c-coins[i])+<span class="number">1</span>;</span><br><span class="line">            <span class="comment">//è¿™é‡Œé€‰æ‹©å°±æ˜¯dfs(i,c-coin[i])+1,ä¸é€‰dfs(i-1,c)ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼Œå…ˆé€’å½’ x æ¬¡ dfs(i,c-wã€iã€‘)ï¼Œå†é€’å½’ dfs(i-1,c)ï¼Œå°±å¯ä»¥è¡¨è¾¾å‡ºã€Œé€‰äº† x ä¸ªç‰©å“ i ã€çš„æ„æ€äº†ã€‚</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">int</span> ans = <span class="built_in">dfs</span>(n<span class="number">-1</span>,amount);</span><br><span class="line">        <span class="keyword">return</span> ans &lt; INT_MAX / <span class="number">2</span> ? ans : <span class="number">-1</span>;<span class="comment">//å¦‚æœæœ€ç»ˆç»“æœansæ˜¯å°äºæ— ç©·å¤§/2çš„è¡¨ç¤ºæœ‰æ–¹æ¡ˆæ»¡è¶³ï¼Œåˆ™è¿”å›ç»“æœï¼Œç­‰äºæ— ç©·å¤§/2ï¼Œè¡¨ç¤ºæ²¡æœ‰æ–¹æ¡ˆç¬¦åˆè¦æ±‚ï¼Œè¿”å›-1ã€é¢˜ç›®è¦æ±‚ã€‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">coinChange</span>(<span class="params">self, coins: <span class="type">List</span>[<span class="built_in">int</span>], amount: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i, c</span>):</span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> c == <span class="number">0</span> <span class="keyword">else</span> inf</span><br><span class="line">            <span class="keyword">if</span> c &lt; coins[i]:</span><br><span class="line">                <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">min</span>(dfs(i - <span class="number">1</span>, c), dfs(i, c - coins[i]) + <span class="number">1</span>)</span><br><span class="line">        ans = dfs(<span class="built_in">len</span>(coins) - <span class="number">1</span>, amount)</span><br><span class="line">        <span class="keyword">return</span> ans <span class="keyword">if</span> ans &lt; inf <span class="keyword">else</span> -<span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(2çš„næ¬¡æ–¹*amount)ã€å…¶ä¸­nä¸ºcoinsçš„é•¿åº¦ã€‘</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*amount)</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="é›¶é’±å…‘æ¢-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>(), cache[n][amount + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(cache, <span class="number">-1</span>, <span class="built_in">sizeof</span>(cache)); <span class="comment">// -1 è¡¨ç¤ºæ²¡ç”¨è®¿é—®è¿‡</span></span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i, <span class="type">int</span> c) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) <span class="keyword">return</span> c == <span class="number">0</span> ? <span class="number">0</span> : INT_MAX / <span class="number">2</span>; <span class="comment">// é™¤ 2 æ˜¯é˜²æ­¢ä¸‹é¢ + 1 æº¢å‡º</span></span><br><span class="line">            <span class="type">int</span> &amp;res = cache[i][c];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>) <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">if</span> (c &lt; coins[i]) <span class="keyword">return</span> res = <span class="built_in">dfs</span>(i - <span class="number">1</span>, c);</span><br><span class="line">            <span class="keyword">return</span> res = <span class="built_in">min</span>(<span class="built_in">dfs</span>(i - <span class="number">1</span>, c), <span class="built_in">dfs</span>(i, c - coins[i]) + <span class="number">1</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">int</span> ans = <span class="built_in">dfs</span>(n - <span class="number">1</span>, amount);</span><br><span class="line">        <span class="keyword">return</span> ans &lt; INT_MAX / <span class="number">2</span> ? ans : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">coinChange</span>(<span class="params">self, coins: <span class="type">List</span>[<span class="built_in">int</span>], amount: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i, c</span>):</span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> c == <span class="number">0</span> <span class="keyword">else</span> inf</span><br><span class="line">            <span class="keyword">if</span> c &lt; coins[i]:</span><br><span class="line">                <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">min</span>(dfs(i - <span class="number">1</span>, c), dfs(i, c - coins[i]) + <span class="number">1</span>)</span><br><span class="line">        ans = dfs(<span class="built_in">len</span>(coins) - <span class="number">1</span>, amount)</span><br><span class="line">        <span class="keyword">return</span> ans <span class="keyword">if</span> ans &lt; inf <span class="keyword">else</span> -<span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*amount)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*amount)</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="é›¶é’±å…‘æ¢-3"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>(), f[n + <span class="number">1</span>][amount + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(f));<span class="comment">//åˆå§‹ä¸ºæ— ç©·å¤§</span></span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;<span class="comment">//å½“i=0,c=0æ—¶ï¼Œfæ‰ç­‰äº0ï¼Œåˆå§‹å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt;= amount; ++c)</span><br><span class="line">                <span class="keyword">if</span> (c &lt; coins[i]) f[i + <span class="number">1</span>][c] = f[i][c];</span><br><span class="line">                <span class="keyword">else</span> f[i + <span class="number">1</span>][c] = <span class="built_in">min</span>(f[i][c], f[i + <span class="number">1</span>][c - coins[i]] + <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> ans = f[n][amount];</span><br><span class="line">        <span class="keyword">return</span> ans &lt; <span class="number">0x3f3f3f3f</span> ? ans : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*amount)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*amount)</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="é›¶é’±å…‘æ¢-4"><p>å’Œ0-1èƒŒåŒ…åŸç†ä¸€æ ·ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>(), f[<span class="number">2</span>][amount + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt;= amount; ++c)</span><br><span class="line">                <span class="keyword">if</span> (c &lt; coins[i]) f[(i + <span class="number">1</span>) % <span class="number">2</span>][c] = f[i % <span class="number">2</span>][c];</span><br><span class="line">                <span class="keyword">else</span> f[(i + <span class="number">1</span>) % <span class="number">2</span>][c] = <span class="built_in">min</span>(f[i % <span class="number">2</span>][c], f[(i + <span class="number">1</span>) % <span class="number">2</span>][c - coins[i]] + <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> ans = f[n % <span class="number">2</span>][amount];</span><br><span class="line">        <span class="keyword">return</span> ans &lt; <span class="number">0x3f3f3f3f</span> ? ans : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*amount)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(amount)</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="é›¶é’±å…‘æ¢-5"><p><code>f[i][c] = min(f[i-1][c],f[i][c-w[i]]+v[i])</code></p><p><code>f[i+1][c] = min(f[i][c],f[i+1][c-w[i]]+v[i])</code></p><p><code>f[c] = min(f[c],f[c-w[i]]+v[i])</code></p><p>å½“<code>w[i]=2;v[i]=1</code>,æˆ‘ä»¬ä¸¾ä¾‹ä¸€ä¸‹</p><p><code>i:0,2,2,5,6,6,9</code></p><p><code>i+1:0,2,2,5,6,6,9</code></p><blockquote><p><strong>ä»å·¦å¾€å³ï¼š</strong></p><p>å…¶ä¸­æ­£ç€çš„æ—¶å€™å°±æ˜¯æ»¡è¶³è¦æ±‚çš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è®¡ç®—f[i+1]çš„æ—¶å€™ï¼Œå½“cæ”¹å˜äº†ï¼Œæœ¬æ¥å°±æ˜¯ç”±f[i+1]å¾—åˆ°çš„ï¼Œæ‰€ä»¥å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå½“cä¸æ”¹å˜æ—¶ï¼Œç”±f[i]å¾—åˆ°ï¼Œå› ä¸ºæ­¤æ—¶cä¸æ”¹å˜ï¼Œé‚£ä¹ˆæ›´ä¸ä¼šå½±å“äº†ã€‚</p><p>f[3] &#x3D; min(f[3],f[1]+1) &#x3D; min(2,0+1) &#x3D; 1;</p><p>f[4] &#x3D; min(f[4],f[2]+1) &#x3D; min(5,2+1) &#x3D; 3;</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> f[amount + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : coins)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = x; c &lt;= amount; ++c)</span><br><span class="line">                f[c] = <span class="built_in">min</span>(f[c], f[c - x] + <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> ans = f[amount];</span><br><span class="line">        <span class="keyword">return</span> ans &lt; <span class="number">0x3f3f3f3f</span> ? ans : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*amount)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(amount)</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h4 id="ç›¸å…³çš„é¢˜ç›®"><a href="#ç›¸å…³çš„é¢˜ç›®" class="headerlink" title="ç›¸å…³çš„é¢˜ç›®"></a>ç›¸å…³çš„é¢˜ç›®</h4><p><a href="https://leetcode.cn/problems/coin-change-ii/">518. é›¶é’±å…‘æ¢ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h2 id="2-3-å¸¸è§å˜å½¢"><a href="#2-3-å¸¸è§å˜å½¢" class="headerlink" title="2.3 å¸¸è§å˜å½¢"></a>2.3 å¸¸è§å˜å½¢</h2><ul><li>è‡³å¤šè£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°&#x2F;æœ€å¤§ä»·å€¼å’Œ</li><li>æ°å¥½è£…capacityï¼Œæ±‚æ–¹æ¡ˆä¹¦&#x2F;æœ€å°ä»·å€¼å’Œã€æœ€å¤§ä»·å€¼å’Œ</li><li>è‡³å°‘è£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°&#x2F;æœ€å°ä»·å€¼å’Œ</li></ul><p>å°±æ˜¯è¾¹ç•Œæ¡ä»¶æ”¹å˜äº†ï¼Œåœ¨é€’å½’åˆ°åº•å±‚çš„æ—¶å€™ï¼Œåˆ¤æ–­æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h3 id="è¾¹ç•Œæ¡ä»¶æ€»ç»“"><a href="#è¾¹ç•Œæ¡ä»¶æ€»ç»“" class="headerlink" title="è¾¹ç•Œæ¡ä»¶æ€»ç»“"></a>è¾¹ç•Œæ¡ä»¶æ€»ç»“</h3><ul><li><p>æ±‚max&#x2F;minçš„æ¨¡å‹é‡Œï¼š</p><ul><li>æ±‚ä½“ç§¯<code>æ°å¥½</code>ä¸ºjï¼š</li><li>æ±‚max, f &#x3D; ã€0ã€‘+ã€-infã€‘*t</li><li>æ±‚min, f &#x3D; ã€0ã€‘+ã€infã€‘*t</li><li>æœ€ç»ˆfã€jã€‘ä»£è¡¨ä½“ç§¯æ°å¥½ä¸ºjæ—¶çš„ä»·å€¼æå€¼ã€‚</li></ul><hr><ul><li>æ±‚ä½“ç§¯<code>è‡³å¤š</code>ä¸ºjæ—¶:</li><li>fã€0ã€‘ &#x3D; ã€0ã€‘+ã€0ã€‘*t  (max&#x2F;min)</li><li>æœ€ç»ˆfã€jã€‘ä»£è¡¨ä½“ç§¯<code>è‡³å¤š</code>ä¸ºjæ—¶çš„ä»·å€¼æå€¼</li></ul><hr><ul><li>æ±‚ä½“ç§¯<code>è‡³å°‘</code>ä¸ºjæ—¶:</li><li>fã€0ã€‘ &#x3D; ã€0ã€‘+ã€0ã€‘*t  (max&#x2F;min)</li><li>åŒæ—¶éå†ä½“ç§¯éœ€è¦ä¿®æ”¹å¾ªç¯ä¸‹ç•Œv-&gt;0ã€è½¬ç§»éœ€è¦ä¿®æ”¹ä¸ºä»max(0,j-v),å³<br><code>for j in range(self.vol, -1, -1):fã€jã€‘ = merge(fã€jã€‘, fã€max(j - v,0)ã€‘ + w)  # 01èƒŒåŒ…</code><br><code>for j in range(self.vol+1):fã€jã€‘ = merge(fã€jã€‘, fã€max(j - v,0)ã€‘ + w)  # å®Œå…¨èƒŒåŒ…</code></li><li>æœ€ç»ˆfã€jã€‘ä»£è¡¨ä½“ç§¯<code>è‡³å°‘</code>ä¸ºjæ—¶çš„ä»·å€¼æå€¼</li></ul></li></ul><hr><ul><li><p>æ±‚æ–¹æ¡ˆæ•°çš„æ¨¡å‹é‡Œï¼ˆä¸€èˆ¬è¦å–æ¨¡ï¼‰:</p><ul><li>æ±‚ä½“ç§¯<code>æ°å¥½</code>ä¸ºjï¼š</li><li>æ±‚max, f &#x3D; ã€1ã€‘+ã€0ã€‘*t</li><li>æœ€ç»ˆfã€jã€‘ä»£è¡¨ä½“ç§¯æ°å¥½ä¸ºjæ—¶çš„æ–¹æ¡ˆæ•°ã€‚</li></ul><hr><ul><li>æ±‚ä½“ç§¯<code>è‡³å¤š</code>ä¸ºjæ—¶:</li><li>f &#x3D; ã€1ã€‘+ã€1ã€‘*t</li><li>æœ€ç»ˆfã€jã€‘ä»£è¡¨ä½“ç§¯<code>è‡³å¤š</code>ä¸ºjæ—¶çš„æ–¹æ¡ˆæ•°ã€‚</li></ul><hr><ul><li>æ±‚ä½“ç§¯<code>è‡³å°‘</code>ä¸ºjæ—¶:</li><li>f &#x3D; ã€1ã€‘+ã€0ã€‘*t</li><li>åŒæ—¶éå†ä½“ç§¯éœ€è¦ä¿®æ”¹å¾ªç¯ä¸‹ç•Œv-&gt;0ã€è½¬ç§»éœ€è¦ä¿®æ”¹ä¸ºä»max(0,j-v),å³<br><code>for j in range(self.vol, -1, -1):fã€jã€‘ += fã€max(j - v,0)ã€‘  # 01èƒŒåŒ…</code><br><code>for j in range(self.vol+1):fã€jã€‘ += fã€max(j - v,0)ã€‘  # å®Œå…¨èƒŒåŒ…</code></li><li>æœ€ç»ˆfã€jã€‘ä»£è¡¨ä½“ç§¯<code>è‡³å¤šå°‘</code>ä¸ºjæ—¶çš„æ–¹æ¡ˆæ•°</li></ul></li></ul><h2 id="2-4-ä¸€äº›é¢˜ç›®"><a href="#2-4-ä¸€äº›é¢˜ç›®" class="headerlink" title="2.4 ä¸€äº›é¢˜ç›®"></a>2.4 ä¸€äº›é¢˜ç›®</h2><details class="folding-tag" blue><summary> æœ€é•¿å…¬å…±å­åºåˆ— </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/longest-common-subsequence/">1143. æœ€é•¿å…¬å…±å­åºåˆ—ã€LCSã€‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>ğŸˆ<strong>å¯å‘æ€è·¯ï¼š</strong></p><blockquote><p>så’Œtçš„ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä»ä¸­é€‰å‡ºä¸¤ä¸ªæœ€é•¿çš„å…¬å…±å­åºåˆ—ï¼Œé•¿åº¦åˆ†åˆ«ä¸ºnå’Œm</p><p>xæ˜¯sçš„å­—ç¬¦ï¼Œyæ˜¯tçš„å­—ç¬¦</p></blockquote><p>å­åºåˆ—çš„æœ¬è´¨å°±æ˜¯é€‰æˆ–ä¸é€‰</p><p>è€ƒè™‘æœ€åä¸€å¯¹å­—æ¯</p><ul><li>ä¸é€‰xã€ä¸é€‰y</li><li>ä¸é€‰xã€é€‰y</li><li>é€‰xã€ä¸é€‰y</li><li>é€‰xã€ä¸é€‰y</li></ul><p>ğŸˆ<strong>å›æº¯ä¸‰é—®ï¼š</strong></p><ul><li>å½“å‰æ“ä½œï¼Ÿè€ƒè™‘æ˜¯s[i]å’Œt[j]é€‰æˆ–ä¸é€‰</li><li>å­é—®é¢˜ï¼Ÿsçš„å‰iä¸ªå­—æ¯å’Œtçš„å‰jä¸ªå­—æ¯çš„LCSé•¿åº¦</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿ<ul><li>sçš„å‰i-1ä¸ªå­—æ¯å’Œtçš„å‰j-1ä¸ªå­—æ¯çš„LCSé•¿åº¦ã€éƒ½é€‰æˆ–è€…éƒ½ä¸é€‰ï¼ˆå­é—®é¢˜ä¸€æ ·ï¼‰ã€‘</li><li>sçš„å‰i-1ä¸ªå­—æ¯å’Œtçš„å‰jä¸ªå­—æ¯çš„LCSé•¿åº¦</li><li>sçš„å‰iä¸ªå­—æ¯å’Œtçš„å‰j-1ä¸ªå­—æ¯çš„LCSé•¿åº¦</li></ul></li></ul><p>ğŸˆ<strong>é€’å½’å…¬å¼ï¼š</strong></p><p>è¿™é‡Œdfsæ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå°±æ˜¯LCSé•¿åº¦ï¼ï¼ï¼</p><blockquote><p><code>dfs(i,j) = max( dfs(i-1,j) , dfs(i,j-1) , dfs(i-1,j-1) + 1 ) ?s[i] = s[j]</code></p><p><code>dfs(i,j) = max( dfs(i-1,j) , dfs(i,j-1) , dfs(i-1,j-1) ) ?s[i] != s[j]</code></p></blockquote><blockquote><p><code>dfs(i,j) = max( dfs(i-1,j) , dfs(i,j-1) , dfs(i-1,j-1) + s[i] = s[j] )</code></p></blockquote><p>è¿™é‡Œå…¶å®å½“<code>s[i] = s[j]</code>æ—¶ï¼Œ<code>dfs(i-1,j)</code>å’Œ<code>dfs(i,j-1)</code>è‚¯å®šæ˜¯å°äºç­‰äº<code>dfs(i-1,j-1) + 1</code>çš„ï¼Œå› ä¸º<code>dfs(i-1,j)</code>å†å¾€ä¸‹é€’å½’ï¼Œæœ€å¤§ä¹Ÿæ˜¯<code>dfs(i-1,j-1) + 1</code>ï¼Œæ‰€ä»¥ç›´æ¥ä¸ç”¨è®©<code>dfs(i,j)=dfs(i-1,j-1) + 1</code>å°±è¡Œã€‚</p><p>åŒç†å½“<code>s[i] != s[j]</code>æ—¶ï¼Œ<code>dfs(i-1,j)</code>å’Œ<code>dfs(i,j-1)</code>è‚¯å®šæ˜¯å¤§äºç­‰äº<code>dfs(i-1,j-1)</code>çš„ï¼Œå› ä¸º<code>dfs(i-1,j)</code>å¾€ä¸‹é€’å½’æœ€å°ä¹Ÿæ˜¯<code>dfs(i-1,j-1)</code>ã€‚</p><p>æ‰€ä»¥ç®€åŒ–ä¸Šå¼å¾—åˆ°ï¼š</p><blockquote><p><code>dfs(i,j) = dfs(i-1,j-1) + 1  s[i] = s[j]</code></p><p><code>dfs(i,j) = max( dfs(i-1,j) , dfs(i,j-1) ) s[i] != s[j]</code></p></blockquote><p>ğŸˆ<strong>ä»£ç ï¼š</strong></p><div class="tabs" id="æœ€é•¿å…¬å…±å­åºåˆ—"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æœ€é•¿å…¬å…±å­åºåˆ—-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#æœ€é•¿å…¬å…±å­åºåˆ—-2">é€’å½’+ä¿å­˜è®°å¿†ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#æœ€é•¿å…¬å…±å­åºåˆ—-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#æœ€é•¿å…¬å…±å­åºåˆ—-4">ç©ºé—´ä¼˜åŒ–:äºŒä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#æœ€é•¿å…¬å…±å­åºåˆ—-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æœ€é•¿å…¬å…±å­åºåˆ—-1"><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*m)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*m)s</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string text1, string text2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = text1.<span class="built_in">length</span>(),m = text2.<span class="built_in">length</span>();</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (i&lt;<span class="number">0</span> || j &lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºç©ºï¼Œè‚¯å®šæ²¡æœ‰ç›¸åŒå­—ç¬¦</span></span><br><span class="line">            <span class="keyword">if</span>(text1[i]==text2[j])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>)+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,j),<span class="built_in">dfs</span>(i,j<span class="number">-1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,m<span class="number">-1</span>);<span class="comment">//ä»æœ€åä¸€ä¸ªå­—æ¯å¼€å§‹é€’å½’</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æœ€é•¿å…¬å…±å­åºåˆ—-2"><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*m)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*m)</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string text1, string text2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = text1.<span class="built_in">length</span>(),m = text2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> cache[n+<span class="number">1</span>][m+<span class="number">1</span>];    <span class="comment">//ç”¨æ¥ä¿å­˜ä¹‹å‰é€’å½’å¾—åˆ°çš„ç»“æœ</span></span><br><span class="line">        <span class="built_in">memset</span>(cache,<span class="number">-1</span>,<span class="built_in">sizeof</span>(cache));</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (i&lt;<span class="number">0</span> || j &lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºç©ºï¼Œè‚¯å®šæ²¡æœ‰ç›¸åŒå­—ç¬¦</span></span><br><span class="line">            <span class="type">int</span>&amp; res = cache[i][j];</span><br><span class="line">            <span class="keyword">if</span>(res!=<span class="number">-1</span>) <span class="keyword">return</span> res; <span class="comment">//å¦‚æœä¹‹å‰é€’å½’è¿‡äº†åˆ™ç›´æ¥æ‹¿æ¥ç”¨å³å¯</span></span><br><span class="line">            <span class="keyword">if</span>(text1[i]==text2[j])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> res = <span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>)+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> res = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,j),<span class="built_in">dfs</span>(i,j<span class="number">-1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,m<span class="number">-1</span>);<span class="comment">//ä»æœ€åä¸€ä¸ªå­—æ¯å¼€å§‹é€’å½’</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æœ€é•¿å…¬å…±å­åºåˆ—-3"><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*m)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*m)</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string text1, string text2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = text1.<span class="built_in">length</span>(),m = text2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> f[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(text1[i]==text2[j]) f[i+<span class="number">1</span>][j+<span class="number">1</span>] = f[i][j]+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> f[i+<span class="number">1</span>][j+<span class="number">1</span>] = <span class="built_in">max</span>(f[i+<span class="number">1</span>][j],f[i][j+<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];<span class="comment">//æ³¨æ„æ˜¯nå’Œmï¼Œè€Œä¸æ˜¯n-1å’Œm-1ï¼Œå› ä¸ºè¿™é‡Œä¸ºé¿å…å‡ºç°ä¸‹æ ‡ï¼Œéƒ½å¢åŠ äº†1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æœ€é•¿å…¬å…±å­åºåˆ—-4"><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*m)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(m)</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string text1, string text2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = text1.<span class="built_in">length</span>(),m = text2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> f[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(text1[i]==text2[j]) f[(i+<span class="number">1</span>)%<span class="number">2</span>][j+<span class="number">1</span>] = f[i%<span class="number">2</span>][j]+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> f[(i+<span class="number">1</span>)%<span class="number">2</span>][j+<span class="number">1</span>] = <span class="built_in">max</span>(f[(i+<span class="number">1</span>)%<span class="number">2</span>][j],f[i%<span class="number">2</span>][j+<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n%<span class="number">2</span>][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æœ€é•¿å…¬å…±å­åºåˆ—-5"><p><code>f[i][j] = f[i-1][j-1]+1 s[i]=s[j]</code></p><p><code>f[i][j] = max(f[i-1][j],f[i][j-1])</code></p><p>å¦‚ä¸Šé€’æ¨è¯­å¥ï¼Œ</p><p>æˆ‘ä»¬ç›´æ¥å»æ‰ç¬¬ä¸€ç»´åº¦ä¸ºï¼š</p><p><code>f[j] = f[j-1]+1 s[i]=s[j]</code></p><p><code>f[j] = max(f[j],f[j-1]) s[i]!=s[j]</code></p><p>å‡è®¾ä¸Šä¸€è¡Œä¸ºï¼š0 1 2 2  3 3</p><p>å½“å‰è¡Œï¼š0 1 2 2 3 3</p><p>æ›´æ–°çš„æ—¶å€™,å½“å‰è¡Œçš„å½“å‰çŠ¶æ€çš„ä¸Šä¸€ä¸ªçŠ¶æ€å·²ç»æ›´æ–°ï¼Œè¿™æ ·æ›´æ–°å½“å‰çŠ¶æ€åˆ©ç”¨çš„æ˜¯å·¦è¾¹çš„å€¼ï¼Œè€Œä¸æ˜¯å·¦ä¸Šè§’çš„å€¼äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡ä¿å­˜ä¸€ä¸‹å·¦ä¸Šè§’çš„å€¼ã€‚</p><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*m)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(m)</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string text1, string text2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = text1.<span class="built_in">length</span>(),m = text2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> f[m+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">char</span> x:text1)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> pre = f[<span class="number">0</span>];  <span class="comment">//0</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> tmp = f[j+<span class="number">1</span>];   <span class="comment">//è®°å½•å½“å‰è¦æ›´æ–°çš„å€¼</span></span><br><span class="line">                <span class="keyword">if</span>(x==text2[j]) f[j+<span class="number">1</span>] = pre+<span class="number">1</span>; <span class="comment">//preå°±æ˜¯å·¦ä¸Šè§’çš„å€¼</span></span><br><span class="line">                <span class="keyword">else</span> f[j+<span class="number">1</span>] = <span class="built_in">max</span>(f[j],f[j+<span class="number">1</span>]);</span><br><span class="line">                pre = tmp;  <span class="comment">//è®°å½•ä¸‹ä¸€ä¸ªæ›´æ–°çš„å€¼çš„å·¦ä¸Šè§’çš„å€¼</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> ç¼–è¾‘è·ç¦» </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/edit-distance/">72. ç¼–è¾‘è·ç¦» - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>ğŸˆ<strong>æ€è·¯</strong></p><p>é¢˜ç›®è¦æ±‚å¯¹word1è¿›è¡Œå¢åˆ æ”¹æ“ä½œï¼Œç„¶åè½¬æ¢ä¸ºword2ï¼Œæ±‚æœ€å°‘æ“ä½œæ•°ã€‚</p><p>å› ä¸ºæ¯ä¸€ä¸ªå­—ç¬¦éƒ½è¦åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦è¿›è¡Œæ“ä½œï¼Œä¸å¦¨æˆ‘ä»¬ä»æœ€åä¸€ä¸ªå¼€å§‹ã€‚</p><p>åˆ¤æ–­é€‰è¿˜æ˜¯ä¸é€‰</p><p>ğŸˆ<strong>å›æº¯</strong></p><p>åˆ¤æ–­æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯å¦ç›¸ç­‰</p><blockquote><p>word1æ˜¯è¢«è½¬æ¢çš„å­—ç¬¦ä¸²ï¼Œword2æ˜¯ç›®æ ‡å­—ç¬¦ä¸²</p><p>iæ˜¯word1é€’å½’çš„ä½ç½®ï¼Œjæ˜¯word2é€’å½’çš„ä½ç½®ï¼Œå¼€å§‹éƒ½æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦</p></blockquote><ul><li><code>word1[i]==word2[j] --&gt; dfs(i,j)=dfs(i-1,j-1)</code><ul><li>è§£é‡Šä¸€ä¸‹ï¼š</li><li>æ­¤æ—¶ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦ç›¸ç­‰äº†ï¼Œé‚£ä¹ˆä¸éœ€è¦åšä»»ä½•æ“ä½œï¼Œç›´æ¥å¾€ä¸‹é€’å½’</li></ul></li><li><code>word1[i]!=word2[j] --&gt; dfs(i,j)=min(dfs(i,j-1),dfs(i-1,j),dfs(i-1,j-1))+1</code><ul><li>è§£é‡Šä¸€ä¸‹ï¼š</li><li>æ­¤æ—¶æœ€åä¸€ä¸ªå­—ç¬¦ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‚¯å®šè¦å¯¹åŸå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦åšä¸€æ¬¡æ“ä½œã€+1ã€‘ï¼Œ</li><li>æ’å…¥ï¼šé‚£ä¹ˆæ­¤æ—¶æ’å…¥çš„è‚¯å®šæ˜¯word2çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œword2å¾€ä¸‹é€’å½’ä¸€ä¸ªï¼Œword1è¿˜æ˜¯å½“å‰ä½ç½®ï¼Œå› ä¸ºå®ƒçš„é•¿åº¦å¢åŠ äº† ï¼Œè¿˜éœ€è¦åˆ¤æ–­å½“å‰å­—ç¬¦<code>dfs(i,j-1)</code></li><li>åˆ é™¤ï¼šé‚£ä¹ˆæ­¤æ—¶åˆ é™¤çš„è‚¯å®šæ˜¯word1çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œword2ä¸é€’å½’ï¼Œword1å¾€ä¸‹é€’å½’ä¸€ä¸ªï¼Œ<code>dfs(i-1,j)</code></li><li>æ›¿æ¢ï¼šé‚£ä¹ˆæ­¤æ—¶ä¼šå°†word1çš„æœ€åä¸€ä¸ªå­—ç¬¦æ›¿æ¢ä¸ºword2çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œæ­¤æ—¶å½“å‰çš„ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦è‚¯å®šç›¸ç­‰äº†ï¼Œå¾€ä¸‹é€’å½’<code>dfs(i-1,j-1)</code></li></ul></li></ul><p>ğŸˆ<strong>ä»£ç </strong></p><div class="tabs" id="ç¼–è¾‘è·ç¦»"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ç¼–è¾‘è·ç¦»-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#ç¼–è¾‘è·ç¦»-2">é€’æ¨+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#ç¼–è¾‘è·ç¦»-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#ç¼–è¾‘è·ç¦»-4">ç©ºé—´ä¼˜åŒ–:ä¸¤ä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#ç¼–è¾‘è·ç¦»-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ç¼–è¾‘è·ç¦»-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string word1, string word2)</span> </span>&#123;</span><br><span class="line">         <span class="type">int</span> n = word1.<span class="built_in">length</span>(),m = word2.<span class="built_in">length</span>();</span><br><span class="line">         function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">             <span class="comment">//æ³¨æ„è¿™é‡Œåˆå§‹çš„iå’Œjéƒ½æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦-1</span></span><br><span class="line">             <span class="comment">//æ‰€ä»¥ä¸‹é¢æ˜¯å°äºï¼Œä¸æ˜¯å°äºç­‰äº</span></span><br><span class="line">             <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> j+<span class="number">1</span>;    <span class="comment">//å½“word1é•¿åº¦ä¸º0äº†ï¼Œé‚£ä¹ˆè¿”å›å½“å‰word2çš„é•¿åº¦ï¼Œå› ä¸ºéœ€è¦å¢åŠ mä¸ªå­—ç¬¦ï¼Œå³mæ¬¡æ“ä½œ</span></span><br><span class="line">             <span class="keyword">if</span>(j&lt;<span class="number">0</span>) <span class="keyword">return</span> i+<span class="number">1</span>;   <span class="comment">//å½“word2é•¿åº¦ä¸º0äº†ï¼Œé‚£ä¹ˆè¿”å›å½“å‰word1çš„é•¿åº¦ï¼Œå› ä¸ºéœ€è¦å‡å°‘nä¸ªå­—ç¬¦ï¼Œå³næ¬¡æ“ä½œ</span></span><br><span class="line">             <span class="comment">//å½“æœ€åä¸€ä¸ªå­—ç¬¦ç›¸ç­‰æ—¶ï¼Œå°±ä¸æ“ä½œï¼Œé€’å½’åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">             <span class="keyword">if</span>(word1[i]==word2[j]) <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>);</span><br><span class="line">             <span class="comment">//å½“ä¸ç›¸ç­‰çš„æ—¶å€™åˆ†æƒ…å†µè®¨è®º</span></span><br><span class="line">             <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">min</span>(<span class="built_in">min</span>(<span class="built_in">dfs</span>(i,j<span class="number">-1</span>),<span class="built_in">dfs</span>(i<span class="number">-1</span>,j)),<span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>))+<span class="number">1</span>;</span><br><span class="line">         &#125;;</span><br><span class="line">         <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,m<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–è¾‘è·ç¦»-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>(), m = t.<span class="built_in">length</span>(), memo[n + <span class="number">1</span>][m + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(memo, <span class="number">-1</span>, <span class="built_in">sizeof</span>(memo)); <span class="comment">// -1 è¡¨ç¤ºè¿˜æ²¡æœ‰è®¡ç®—è¿‡</span></span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i, <span class="type">int</span> j) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) <span class="keyword">return</span> j + <span class="number">1</span>;<span class="comment">//ï¼ï¼</span></span><br><span class="line">            <span class="keyword">if</span> (j &lt; <span class="number">0</span>) <span class="keyword">return</span> i + <span class="number">1</span>;<span class="comment">//ï¼ï¼</span></span><br><span class="line">            <span class="type">int</span> &amp;res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>) <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == t[j]) <span class="keyword">return</span> res = <span class="built_in">dfs</span>(i - <span class="number">1</span>, j - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> res = <span class="built_in">min</span>(<span class="built_in">min</span>(<span class="built_in">dfs</span>(i - <span class="number">1</span>, j), <span class="built_in">dfs</span>(i, j - <span class="number">1</span>)), <span class="built_in">dfs</span>(i - <span class="number">1</span>, j - <span class="number">1</span>)) + <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>, m - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–è¾‘è·ç¦»-3"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>(), m = t.<span class="built_in">length</span>(), f[n + <span class="number">1</span>][m + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) f[i][<span class="number">0</span>] = i;<span class="comment">//æ³¨æ„åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= m; ++j) f[<span class="number">0</span>][j] = j;<span class="comment">//æ³¨æ„åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">                f[i + <span class="number">1</span>][j + <span class="number">1</span>] = s[i] == t[j] ? f[i][j] :</span><br><span class="line">                                  <span class="built_in">min</span>(<span class="built_in">min</span>(f[i][j + <span class="number">1</span>], f[i + <span class="number">1</span>][j]), f[i][j]) + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–è¾‘è·ç¦»-4"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>(), m = t.<span class="built_in">length</span>(), f[<span class="number">2</span>][m + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= m; ++j) f[<span class="number">0</span>][j] = j;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[(i + <span class="number">1</span>) % <span class="number">2</span>][<span class="number">0</span>] = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">                f[(i + <span class="number">1</span>) % <span class="number">2</span>][j + <span class="number">1</span>] = s[i] == t[j] ? f[i % <span class="number">2</span>][j] :</span><br><span class="line">                                        <span class="built_in">min</span>(<span class="built_in">min</span>(f[i % <span class="number">2</span>][j + <span class="number">1</span>], f[(i + <span class="number">1</span>) % <span class="number">2</span>][j]), f[i % <span class="number">2</span>][j]) + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n % <span class="number">2</span>][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ç¼–è¾‘è·ç¦»-5"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">length</span>(), f[m + <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">iota</span>(f, f + m + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> x : s) &#123;</span><br><span class="line">            <span class="type">int</span> pre = f[<span class="number">0</span>];</span><br><span class="line">            ++f[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                <span class="type">int</span> tmp = f[j + <span class="number">1</span>];</span><br><span class="line">                f[j + <span class="number">1</span>] = x == t[j] ? pre : <span class="built_in">min</span>(<span class="built_in">min</span>(f[j + <span class="number">1</span>], f[j]), pre) + <span class="number">1</span>;</span><br><span class="line">                pre = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/delete-operation-for-two-strings/">583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">é€’å½’+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">ç©ºé—´ä¼˜åŒ–:ä¸¤ä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string word1, string word2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = word1.<span class="built_in">length</span>(),m = word2.<span class="built_in">length</span>();</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> j+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(j&lt;<span class="number">0</span>) <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(word1[i]==word2[j]) <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">min</span>(<span class="built_in">min</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,j),<span class="built_in">dfs</span>(i,j<span class="number">-1</span>)),<span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>)) + <span class="number">1</span>;</span><br><span class="line">         &#125;;</span><br><span class="line">         <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,m<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string word1, string word2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = word1.<span class="built_in">length</span>(),m = word2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> f[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;i++) f[i][<span class="number">0</span>] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m;j++) f[<span class="number">0</span>][j] = j;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(word1[i]==word2[j]) f[i+<span class="number">1</span>][j+<span class="number">1</span>] = f[i][j];</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    f[i+<span class="number">1</span>][j+<span class="number">1</span>] = <span class="built_in">min</span>(f[i][j+<span class="number">1</span>],f[i+<span class="number">1</span>][j])+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€å°ASCIIåˆ é™¤å’Œ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/minimum-ascii-delete-sum-for-two-strings/">712. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€å°ASCIIåˆ é™¤å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">é€’å½’+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">ç©ºé—´ä¼˜åŒ–:ä¸¤ä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minimumDeleteSum</span><span class="params">(string s1, string s2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s1.<span class="built_in">length</span>(),m = s2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="comment">//dfså‡½æ•°è¿”å›çš„ç»“æœä¸ºåˆ é™¤å­—ç¬¦çš„ASCLLçš„å€¼çš„å’Œ</span></span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>)&#123;    <span class="comment">//ã€è¿™é‡Œå¯ä»¥ç›´æ¥å†™æˆi==-1ã€‘s1å­—ç¬¦ä¸²é•¿åº¦ä¸º0ï¼Œé‚£ä¹ˆéœ€è¦åˆ é™¤æ•´ä¸ªs2</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">char</span> x:s2)&#123;</span><br><span class="line">                    res += <span class="built_in">int</span>(x);</span><br><span class="line">                    <span class="keyword">return</span> res;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j&lt;<span class="number">0</span>)&#123;    <span class="comment">//ã€è¿™é‡Œå¯ä»¥ç›´æ¥å†™æˆj==-1ã€‘s2å­—ç¬¦ä¸²é•¿åº¦ä¸º0ï¼Œé‚£ä¹ˆéœ€è¦åˆ é™¤æ•´ä¸ªs1</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">char</span> x:s1)&#123;</span><br><span class="line">                    res += <span class="built_in">int</span>(x);</span><br><span class="line">                    <span class="keyword">return</span> res;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s1[i]==s2[j]) <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>);   <span class="comment">//æœ€åä¸€ä¸ªå­—ç¬¦ç›¸ç­‰ï¼Œé‚£ä¹ˆç›´æ¥å¾€ä¸‹é€’å½’</span></span><br><span class="line">            <span class="keyword">else</span>&#123;   <span class="comment">//ä¸ç›¸ç­‰ï¼Œåˆ™é€‰æ‹©æœ€å°çš„å­—ç¬¦å»é™¤ï¼Œå¹¶å¾€ä¸‹é€’å½’ï¼Œå½’çš„æ—¶å€™å†é€‰æ‹©æœ€å°çš„dfsè¿”å›</span></span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">min</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,j)+<span class="built_in">int</span>(s1[i]),<span class="built_in">dfs</span>(i,j<span class="number">-1</span>)+<span class="built_in">int</span>(s2[j]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,m<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minimumDeleteSum</span><span class="params">(string s1, string s2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s1.<span class="built_in">length</span>(),m = s2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> f[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i+<span class="number">1</span>][<span class="number">0</span>] = f[i][<span class="number">0</span>]+<span class="built_in">int</span>(s1[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[<span class="number">0</span>][j+<span class="number">1</span>] = f[<span class="number">0</span>][j]+<span class="built_in">int</span>(s2[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(s1[i]==s2[j]) f[i+<span class="number">1</span>][j+<span class="number">1</span>] = f[i][j];</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    f[i+<span class="number">1</span>][j+<span class="number">1</span>] = <span class="built_in">min</span>(f[i][j+<span class="number">1</span>]+<span class="built_in">int</span>(s1[i]),f[i+<span class="number">1</span>][j]+<span class="built_in">int</span>(s2[j]));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> ä¸¤ä¸ªå­åºåˆ—çš„æœ€å¤§ç‚¹ç§¯ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/max-dot-product-of-two-subsequences/">1458. ä¸¤ä¸ªå­åºåˆ—çš„æœ€å¤§ç‚¹ç§¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>ä»æ¯ä¸ªvectorçš„æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å¾€å‰è¿­ä»£ï¼Œåˆ¤æ–­æ˜¯é€‰è¿˜æ˜¯ä¸é€‰æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p><blockquote><p>å¦‚æœä¸¤ä¸ªå…ƒç´ ç›¸ä¹˜çš„ç§¯ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆè‚¯å®šä¸èƒ½åŒæ—¶é€‰ï¼Œå› ä¸ºæˆ‘ä»¬ç›®æ ‡æ˜¯æ±‚ä¹˜ç§¯å’Œçš„æœ€å¤§å€¼ã€‚</p><p>å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾€å‰é€’å½’åˆ¤æ–­æ˜¯é€‰æ‹©å“ªä¸ªæ•°ï¼Œè¿˜æ˜¯éƒ½é€‰ã€‚</p></blockquote><p>æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªæ¡ä»¶æ˜¯ï¼Œé•¿åº¦çš„ç›¸åŒçš„éç©ºå­åºåˆ—ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡ä»¶ï¼Œå½“å‡ºç°ä¸¤ä¸ªåºåˆ—æ˜¯<code>[-1,-1],[1,1]</code>ï¼Œè¿™æ ·çš„æ—¶å€™ï¼Œæœ€ç»ˆç»“æœè‚¯å®šæ˜¯0ï¼Œå› ä¸ºå…¶ä»–çš„æƒ…å†µè‚¯å®šæ˜¯è´Ÿæ•°ï¼Œä½†æ˜¯æœ‰äº†è¿™ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬å°±å¿…é¡»é€‰æ‹©ä¸€ä¸ªæœ€å¤§çš„è´Ÿæ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°è‚¯å®šæ˜¯ç”±æ¯ä¸ªåºåˆ—çš„ä¸€ä¸ªæ•°ç»„æˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨é€’å½’çš„è¿‡ç¨‹ä¸­å°†æ­¤æ•°è®°å½•ä¸‹æ¥ï¼Œåœ¨æœ€ååˆ¤è¯»æ˜¯å¦éœ€è¦ç”¨åˆ°ã€‚</p><div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">é€’å½’+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">ç©ºé—´ä¼˜åŒ–:ä¸¤ä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxDotProduct</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums1, vector&lt;<span class="type">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆæ­¥åˆ¤æ–­å°±æ˜¯é€‰å’Œä¸é€‰å§</span></span><br><span class="line">        <span class="comment">//é€’å½’å‡½æ•°å°±æ˜¯ä¸¤ä¸ªvectorå¯¹åº”å…ƒç´ ä¹˜ç§¯çš„å’Œ</span></span><br><span class="line">        <span class="type">int</span> n = nums1.<span class="built_in">size</span>(),m = nums2.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> max_num = INT_MIN;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span> || j&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;    <span class="comment">//æœ‰ä¸€ä¸ªæ•°ç»„ç©ºäº†ï¼Œé‚£ä¹ˆç›¸ä¹˜çš„å’Œè‚¯å®šæ˜¯0</span></span><br><span class="line">            <span class="type">int</span> k = nums1[i]*nums2[j];</span><br><span class="line">            max_num = <span class="built_in">max</span>(k,max_num);</span><br><span class="line">            <span class="comment">//åˆ¤æ–­é€‰nums1[i]å’Œnums2[j]</span></span><br><span class="line">            <span class="keyword">if</span>(k&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>,j),<span class="built_in">dfs</span>(i,j<span class="number">-1</span>));</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">max</span>( <span class="built_in">dfs</span>(i<span class="number">-1</span>,j<span class="number">-1</span>)+ k , <span class="built_in">dfs</span>(i,j<span class="number">-1</span>)),<span class="built_in">dfs</span>(i<span class="number">-1</span>,j));</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//æ³¨æ„å› ä¸ºé¢˜ç›®è¦æ±‚ä¸¤ä¸ªæ•°ç»„æœ€ç»ˆä¸èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥æœ€åçš„æƒ…å†µä¸æ˜¯0ï¼Œå¯èƒ½ä¸ºè´Ÿæ•°</span></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬åˆ¤æ–­å½“ç»“æœä¸æ˜¯å¤§äº0çš„æ—¶å€™ï¼Œå³ç­‰äº0çš„æ—¶å€™ï¼Œè¯´æ˜æˆ‘ä»¬æœ€ç»ˆä¸€ä¸ªå…ƒç´ æ²¡é€‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœ€å¤§çš„å€¼ï¼Œä¸”è‚¯å®šæ˜¯è´Ÿçš„ï¼Œå› ä¸ºæˆ‘ä»¬å‰é¢çš„é€»è¾‘åˆ¤æ–­æ˜¯ä¸0æ¯”è¾ƒçš„</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,m<span class="number">-1</span>)&gt;<span class="number">0</span> ? <span class="built_in">dfs</span>(n<span class="number">-1</span>,m<span class="number">-1</span>) : max_num;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxDotProduct</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums1, vector&lt;<span class="type">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums1.<span class="built_in">size</span>(),m = nums2.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> max_num = INT_MIN;</span><br><span class="line">        <span class="type">int</span> f[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> k = nums1[i]*nums2[j];</span><br><span class="line">                max_num = <span class="built_in">max</span>(k,max_num);</span><br><span class="line">                <span class="keyword">if</span>(k&lt;<span class="number">0</span>) f[i+<span class="number">1</span>][j+<span class="number">1</span>] = <span class="built_in">max</span>(f[i][j+<span class="number">1</span>],f[i+<span class="number">1</span>][j]);</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    f[i+<span class="number">1</span>][j+<span class="number">1</span>] = <span class="built_in">max</span>(<span class="built_in">max</span>(f[i][j]+k,f[i+<span class="number">1</span>][j]),f[i][j+<span class="number">1</span>]);  </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m] &gt; <span class="number">0</span> ? f[n][m] : max_num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> äº¤é”™å­—ç¬¦ä¸² </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/interleaving-string/">97. äº¤é”™å­—ç¬¦ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">é€’å½’+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">ç©ºé—´ä¼˜åŒ–:ä¸¤ä¸ªæ•°ç»„</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">ç©ºé—´ä¼˜åŒ–:ä¸€ä¸ªæ•°ç»„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isInterleave</span><span class="params">(string s1, string s2, string s3)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//dpæ•°ç»„è¡¨ç¤ºs1å’Œs2çš„ç¬¬iï¼Œjå‰çš„å­—ç¬¦ä¸²æ˜¯å¦2äº¤é”™ç»„æˆäº†s3çš„å‰i+jä¸ªå­—ç¬¦</span></span><br><span class="line">        <span class="type">int</span> n = s1.<span class="built_in">length</span>(),m = s2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">if</span>(n+m !=s3.<span class="built_in">length</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">bool</span> dp[n+<span class="number">1</span>][m+<span class="number">1</span>];  <span class="comment">//é»˜è®¤åˆå§‹åŒ–ç±»å‹ä¸ºfalse</span></span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;    <span class="comment">//å°†0ï¼Œ0çš„åˆå§‹åŒ–ä¸ºtrueï¼Œæ–¹ä¾¿åç»­è®¡ç®—</span></span><br><span class="line">        <span class="comment">//è¡¨ç¤ºs2ä¸ºç©ºçš„æƒ…å†µï¼Œé‚£ä¹ˆç›´æ¥æ¯”è¾ƒs1å’Œs3å…ƒç´ æ˜¯å¦ç›¸ç­‰å³å¯</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) dp[i+<span class="number">1</span>][<span class="number">0</span>] = dp[i][<span class="number">0</span>]&amp;&amp;(s1[i]==s3[i]);</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºs1ä¸ºç©ºçš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++) dp[<span class="number">0</span>][j+<span class="number">1</span>] = dp[<span class="number">0</span>][j]&amp;&amp;(s2[j]==s3[j]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­ç¬¬iï¼Œjä¸ªå­—ç¬¦æ˜¯å¦æœ‰s1çš„ç¬¬iå’Œå­—ç¬¦æˆ–è€…s2çš„ç¬¬jä¸ªå­—ç¬¦ç»„æˆ</span></span><br><span class="line">                dp[i][j] = ( dp[i<span class="number">-1</span>][j] &amp;&amp; s1[i<span class="number">-1</span>]==s3[i<span class="number">-1</span>+j] ) || ( dp[i][j<span class="number">-1</span>] &amp;&amp; s2[j<span class="number">-1</span>]==s3[i<span class="number">-1</span>+j] );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// for(int i=0;i&lt;n;i++)</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     for(int j=0;j&lt;m;j++)</span></span><br><span class="line">        <span class="comment">//     &#123;</span></span><br><span class="line">        <span class="comment">//         dp[i+1][j+1] = ( dp[i][j+1] &amp;&amp; s1[i]==s3[i+j+1] ) || ( dp[i+1][j] &amp;&amp; s2[j]==s3[i+j+1] );</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="keyword">return</span> dp[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h1 id="ä¸‰ã€çŠ¶æ€æœºDP"><a href="#ä¸‰ã€çŠ¶æ€æœºDP" class="headerlink" title="ä¸‰ã€çŠ¶æ€æœºDP"></a>ä¸‰ã€çŠ¶æ€æœºDP</h1><div class="note default flat"><p>ä¸“ä¸šæœ¯è¯­ï¼šçŠ¶æ€æœºæ˜¯æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºçš„ç®€ç§°ï¼Œæ˜¯ç°å®äº‹ç‰©è¿è¡Œè§„åˆ™æŠ½è±¡è€Œæˆçš„ä¸€ä¸ªæ•°å­¦æ¨¡å‹ã€‚</p></div><p>å°±æ˜¯è¡¨ç¤ºä¸€ä¸ªç‰©å“çŠ¶æ€ä¹‹é—´è½¬æ¢å…³ç³»çš„ä¸€ä¸ªæ¨¡å‹ã€‚</p><p>ä¾‹å¦‚ï¼šé—¨çš„æ‰“å¼€ä¸å…³é—­ã€è‚¡ç¥¨çš„ä¹°å…¥å’Œå”®å‡ºç­‰ã€‚</p><details class="folding-tag" blue><summary> ä¹°å–è‚¡ç¥¨ã€æ— é™æ¬¡ã€‘ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</a></p><p>ğŸˆ<strong>å¯å‘æ€è·¯ï¼š</strong></p><p>å»ºè®®ä»æœ€åä¸€å¤©å¼€å§‹æ€è€ƒï¼Œå¾€å‰æ¨ï¼Œå…ˆæƒ³æœ€åä¸€å¤©å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><p>ä»<code>0</code>å¼€å§‹åˆ°ç¬¬<code>n</code>å¤©çš„åˆ©æ¶¦ <code>=</code> ä»<code>0</code>å¼€å§‹åˆ°ç¬¬<code>n-1</code>å¤©çš„åˆ©æ¶¦ <code>+</code> ç¬¬<code>n</code>å¤©çš„åˆ©æ¶¦</p><blockquote><p>ä¾‹å¦‚ <code>prices=[7,1,5,3,6,4]</code></p><p>ç¬¬äº”å¤©çš„è‚¡ç¥¨ä»·æ ¼ä¸º4ï¼Œé‚£ä¹ˆç¬¬äº”å¤©æœ‰ä¸‰ç§æƒ…å†µï¼š</p><ul><li>ä»€ä¹ˆä¹Ÿä¸åšï¼šåˆ©æ¶¦ &#x3D; 0</li><li>ä¹°å…¥è‚¡ç¥¨ï¼šåˆ©æ¶¦ &#x3D; -4ã€æ³¨æ„æ­¤é¢˜é™åˆ¶åŒæ—¶åªèƒ½æŒæœ‰ä¸€è‚¡è‚¡ç¥¨ï¼Œéœ€è¦åˆ¤æ–­ã€‘</li><li>å‡ºå”®è‚¡ç¥¨ï¼šåˆ©æ¶¦ &#x3D; 4</li></ul></blockquote><p>ğŸˆ<strong>å›æº¯ä¸‰é—®ï¼š</strong></p><ul><li><p>å­é—®é¢˜ï¼Ÿåˆ°ç¬¬iå¤©ç»“æŸçš„æ—¶ï¼ŒæŒæœ‰&#x2F;æœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦</p></li><li><p>å½“å‰æ“ä½œï¼Ÿ</p><ul><li>ä»€ä¹ˆä¹Ÿä¸åš</li><li>ä¹°å…¥ã€ç¬¬i-1å¤©æœªæŒæœ‰â€“&gt;ç¬¬iå¤©æŒæœ‰ã€‘</li><li>å–å‡ºã€ç¬¬i-1å¤©æŒæœ‰â€“&gt;ç¬¬iå¤©æœªæŒæœ‰ã€‘</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/ACM/3.png" alt="1"></p><p>ã€ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ­¤é¢˜å…·æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼ŒçŠ¶æ€è½¬ç§»æ€»å…±æœ‰å››ç§æƒ…å†µã€‘</p></li><li><p>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿåˆ°ç¬¬i-1å¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰&#x2F;æœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦</p></li></ul><p>ğŸˆ<strong>é€’å½’åˆ†æï¼š</strong></p><p><strong>é€’å½’å‡½æ•°</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/4.png" alt="1"></p><p>ä¸Šå›¾å±•ç°æ­¤é¢˜çš„çŠ¶æ€æœºã€‚</p><p>éœ€è¦å–åˆ©æ¶¦æœ€å¤§å€¼ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªæƒ…å†µï¼Œä¸€ä¸ªæ˜¯ç¬¬iå¤©æœªæŒæœ‰è‚¡ç¥¨ï¼Œä¸€ä¸ªæ˜¯ç¬¬iå¤©æŒæœ‰äº†è‚¡ç¥¨ï¼Œè¿™ä¸¤ä¸ªä¸ªæœ€ç»ˆä¹Ÿè¦å–æœ€å¤§å€¼ã€‚</p><p>å½“ç¬¬iå¤©æœªæŒæœ‰å’ŒæŒæœ‰è‚¡ç¥¨çš„æ—¶å€™ï¼Œç¬¬i-1å¤©ä¹Ÿæ˜¯ä¸¤ç§æƒ…å†µï¼š</p><p><code>dfs(i,0) = max( dfs(i-1,0),dfs(i-1,1)+prices[i] )</code></p><p><code>dfs(i,1) = max( dfs(i-1,1),dfs(i-1,0)-prices[i] )</code></p><p><strong>é€’å½’è¾¹ç•Œ</strong></p><ol><li><code>dfs(-1,0)=0</code>ï¼šç¬¬0å¤©å¼€å§‹çš„æ—¶å€™æœªæŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆåˆ©æ¶¦è‚¯å®šä¸º0ã€‚</li><li><code>dfs(-1,1)=-æ— ç©·</code>ï¼šç¬¬0å¤©å¼€å§‹æ˜¯ä¸ä¼šæŒæœ‰è‚¡ç¥¨çš„ï¼Œåˆ©æ¶¦å®šä¹‰ä¸ºæ— ç©·å°ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œmaxå–å€¼ã€‚</li></ol><blockquote><p>è¿™é‡Œçš„iï¼Œæˆ‘ä»¬å¡«å†™äº†-1ï¼Œå› ä¸ºiä¸º-1ä½œä¸ºè¾¹ç•Œçš„è¯ï¼Œæ­¤æ—¶prices[]æ•°ç»„å¯ä»¥æ˜¯ç©ºçš„ï¼Œ</p><p>å¦‚æœi&#x3D;0ä¸ºè¾¹ç•Œçš„è¯ï¼Œå¿…é¡»ä¿è¯prices[]æ•°ç»„ä¸èƒ½ä¸ºç©ºã€‚</p></blockquote><p><strong>é€’å½’å…¥å£</strong></p><p>æœ€åä¸€å¤©å¦‚æœæŒæœ‰è‚¡ç¥¨çš„è¯ï¼Œæ˜¯å–ä¸å‡ºå»çš„ï¼Œè‚¯å®šæ˜¯ç™½ç™½æµªè´¹é’±äº†ï¼Œæ‰€ä»¥è®¤ä¸º</p><p><code>max(dfs(n-1,0),dfs(n-1),1) = dfs(n-1,0)</code></p><p>ç›´æ¥ä»dfs(n-1,0)å¼€å§‹é€’å½’å°±å¯ä»¥äº†ï¼ï¼ï¼</p><p>ğŸˆ<strong>1:1ç¿»è¯‘æˆé€’æ¨ï¼š</strong></p><p>è½¬ç§»æ–¹ç¨‹å’Œ<code>dfs</code>çš„å†™æ³•ä¸€æ ·ï¼š</p><p><code>f[i][0] = max(f[i-1][0],f[i-1][1]+prices[i])</code></p><p><code>f[i][1] = max(f[i-1][1],f[i-1][0]-prices[i])</code></p><p>ä½†è¿™æ ·ä¼šå‘ç°æ²¡æœ‰çŠ¶æ€è¡¨ç¤º<code>f[-1][0]</code>å’Œ <code>f[-1][1]</code></p><p>é‚£å°±åœ¨<code>f</code>çš„æœ€å‰é¢æ’å…¥ä¸€ä¸ªçŠ¶æ€</p><blockquote><p><code>f[0][0] = 0</code></p><p><code>f[0][1] = -æ— ç©·</code></p><p><code>f[i+1][0] = max(f[i][0],f[i][1]+prices[i])</code></p><p><code>f[i+1][1] = max(f[i][1],f[i][0]-prices[i])</code></p></blockquote><p>æœ€åè¿”å›<code>f[n][0]</code></p><p>ğŸˆ<strong>ç©ºé—´ä¼˜åŒ–ï¼š</strong></p><p>ç”±äº<code>f[i+1]</code>åªç”¨åˆ°<code>f[i]</code>è¿™ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥åªéœ€è¦ä¸€ä¸ªé•¿ä¸ºäºŒçš„æ•°ç»„æ»šåŠ¨è®¡ç®—å°±å¥½äº†ï¼Œæˆ–è€…ä¸¤ä¸ªå˜é‡å°±å¯ä»¥äº†ã€‚</p><p>ğŸˆ<strong>ä»£ç ï¼š</strong></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">å›æº¯</button></li><li class="tab"><button type="button" data-href="#code-2">é€’å½’+ä¿å­˜ç»“æœ=è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#code-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#code-4">ç©ºé—´ä¼˜åŒ–</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="comment">//é€’å½’å‡½æ•°ï¼Œç¬¬1ä¸ªå‚æ•°æ˜¯é€’å½’åˆ°ç¬¬å‡ å¤©äº†ï¼Œç¬¬2å‚æ•°è¡¨ç¤ºç¬¬å‡ å¤©æ˜¯å¦æŒæœ‰è‚¡ç¥¨</span></span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">bool</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">bool</span> hold) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> hold ? INT_MIN : <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//ç¬¬iå¤©æŒæœ‰äº†è‚¡ç¥¨</span></span><br><span class="line">            <span class="keyword">if</span>(hold) <span class="keyword">return</span> <span class="built_in">max</span>( <span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">1</span>),<span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">0</span>)-prices[i] );</span><br><span class="line">            <span class="comment">//ç¬¬iå¤©æœªæŒæœ‰è‚¡ç¥¨</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>( <span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">0</span>),<span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">1</span>)+prices[i] );</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n<em>n)ï¼Œå…¶ä¸­ <em>n</em> ä¸º prices</em>prices* çš„é•¿åº¦ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> cache[n][<span class="number">2</span>];</span><br><span class="line">        <span class="built_in">memset</span>(cache,<span class="number">-1</span>,<span class="built_in">sizeof</span>(cache));</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">bool</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">bool</span> hold) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">0</span>) <span class="keyword">return</span> hold ? INT_MIN : <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> &amp;res = cache[i][hold];</span><br><span class="line">            <span class="keyword">if</span>(res!=<span class="number">-1</span>) <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">if</span>(hold) <span class="keyword">return</span> res = <span class="built_in">max</span>( <span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">1</span>),<span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">0</span>)-prices[i] );</span><br><span class="line">            <span class="keyword">return</span> res = <span class="built_in">max</span>( <span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">0</span>),<span class="built_in">dfs</span>(i<span class="number">-1</span>,<span class="number">1</span>)+prices[i] );</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ <em>n</em> ä¸º prices<em>prices</em> çš„é•¿åº¦ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-3"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>(), f[n + <span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = INT_MIN;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[i + <span class="number">1</span>][<span class="number">0</span>] = <span class="built_in">max</span>(f[i][<span class="number">0</span>], f[i][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[i + <span class="number">1</span>][<span class="number">1</span>] = <span class="built_in">max</span>(f[i][<span class="number">1</span>], f[i][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ <em>n</em> ä¸º prices<em>prices</em> çš„é•¿åº¦ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-4"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f0 = <span class="number">0</span>,f1 = INT_MIN;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="comment">//è¿™é‡Œä¸èƒ½ç›´æ¥æ›´æ–°f0,å› ä¸ºçŠ¶æ€è½¬ç§»çš„ä¸¤ä¸ªå¼å­æ˜¯å¹¶åˆ—çš„ï¼ï¼ï¼</span></span><br><span class="line">            <span class="type">int</span> new_f0 = <span class="built_in">max</span>(f0,f1+prices[i]);</span><br><span class="line">            f1 = <span class="built_in">max</span>(f1,f0-prices[i]);</span><br><span class="line">            f0 = new_f0;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ <em>n</em> ä¸º prices<em>prices</em> çš„é•¿åº¦ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> ä¹°å–è‚¡ç¥¨ã€å«å†·å†»æœŸã€‘ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/">309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ</a></p><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/solution/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-0k0l/">ã€è§†é¢‘ã€‘æ•™ä½ ä¸€æ­¥æ­¥æ€è€ƒåŠ¨æ€è§„åˆ’ï¼è‚¡ç¥¨é—®é¢˜é€šç”¨è§£æ³•ï¼ï¼ˆPython&#x2F;Java&#x2F;C++&#x2F;Goï¼‰ - æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p>ä¸æ— é™æ¬¡çš„ç›¸æ¯”ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªä¸€ä¸ªæ¡ä»¶ï¼Œå°±æ˜¯åœ¨å–å‡ºåçš„ç¬¬äºŒå¤©æ‰å¯ä»¥å¼€å§‹ä¹°å…¥è‚¡ç¥¨ï¼Œå…¶ä»–æ¡ä»¶éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>é‚£ä¹ˆä½“ç°åœ¨é€’å½’ä¸­å°±æ˜¯ï¼š</p><p><code>dfs(i,0) = max( dfs(i-1,0),dfs(i-1,1)+prices[i] )</code></p><p><code>dfs(i,1) = max( dfs(i-1,1),dfs(i-2,0)-prices[i] )</code></p>              </div>            </details><details class="folding-tag" blue><summary> ä¹°å–è‚¡ç¥¨ã€è‡³å¤šäº¤æ˜“Kæ¬¡ã€‘ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/">188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/solution/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-kksg/">ã€è§†é¢‘ã€‘æ•™ä½ ä¸€æ­¥æ­¥æ€è€ƒåŠ¨æ€è§„åˆ’ï¼è‚¡ç¥¨é—®é¢˜é€šç”¨è§£æ³•ï¼ï¼ˆPython&#x2F;Java&#x2F;C++&#x2F;Goï¼‰ - ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p>æ—¢ç„¶æœ‰äº¤æ˜“æ¬¡æ•°çš„é™åˆ¶ï¼Œé‚£ä¹ˆåœ¨é€’å½’å‡½æ•°ä¸­å°±æ˜¯å¤šäº†ä¸€ä¸ªå‚æ•°ï¼Œäº¤æ˜“ä¸€æ¬¡kå‡1ï¼Œæ³¨æ„è¿™é‡Œæ˜¯äº¤æ˜“ä¸€æ¬¡ï¼Œä¹°å…¥å’Œå–å‡ºåˆèµ·æ¥æ‰æ˜¯ä¸€ä¸ªäº¤æ˜“ï¼Œå³kå‡1å†™åœ¨ä¹°å…¥å’Œå–å‡ºä¸­æ˜¯ä¸€æ ·çš„ã€æœ‰ä¹°å…¥å¿…æœ‰å–å‡ºã€‘</p><blockquote><p>é€’å½’è¾¹ç•Œå¤šäº†ä¸€ä¸ªï¼Œkè‚¯å®šæ˜¯ä¸èƒ½å°äº0çš„ï¼Œè¿”å›è´Ÿæ— ç©·å¤§ï¼Œè¡¨ç¤ºä¸åˆæ³•æ–¹æ¡ˆã€‚</p><p>å…¶ä»–å’Œæ— é™æ¬¡è‚¯å®šæ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><p>é€’æ¨çš„è¾¹ç•Œï¼Œ<code>dp</code>æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸ºè´Ÿæ— ç©·å¤§ï¼Œç„¶åå¯¹äº<code>i=0</code>å’Œ<code>hold=0</code>çš„<code>dp</code>ï¼Œåˆå§‹åŒ–ä¸º<code>0</code>ã€‚</p>              </div>            </details><details class="folding-tag" blue><summary> ä¹°å–è‚¡ç¥¨ã€è‡³å°‘äº¤æ˜“Kæ¬¡ã€‘ </summary>              <div class='content'>              <p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p>å› ä¸ºè‡³å°‘0æ¬¡å’Œè‡³å°‘-1æ¬¡æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å‰é¢ä¸éœ€è¦æ·»åŠ çŠ¶æ€ã€‚</p><p>ï¼ï¼ï¼é€’å½’åˆ°ã€Œè‡³å°‘ &gt;0 æ¬¡ã€æ—¶ï¼Œå®ƒç­‰ä»·äºã€Œäº¤æ˜“æ¬¡æ•°æ²¡æœ‰é™åˆ¶ã€</p><p>æ‰€ä»¥åœ¨é€’å½’åˆ°j&gt;0ä¹‹å‰ï¼Œå’Œæ°å¥½äº¤æ˜“kæ¬¡çš„çŠ¶æ€è½¬ç§»å¼å­ä¸€æ ·ï¼Œåœ¨é€’å½’åˆ°j&#x3D;0çš„æ—¶å€™ï¼Œå°±å’Œäº¤æ˜“æ¬¡æ•°æ²¡æœ‰é™åˆ¶ä¸€æ ·äº†ã€‚</p>              </div>            </details><details class="folding-tag" blue><summary> ä¹°å–è‚¡ç¥¨ã€æ°å¥½äº¤æ˜“Kæ¬¡ã€‘ </summary>              <div class='content'>              <p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p>ä¸è‡³å¤šä¸åŒå°±æ˜¯è¾¹ç•Œæ¡ä»¶ã€‚</p><p>å¯¹äºç¬¬ä¸€å¤©åˆšå¼€å§‹çš„æ—¶å€™æ¥è¯´ï¼Œç”±äºæ²¡æœ‰ä»»ä½•äº¤æ˜“ï¼Œé‚£ä¹ˆå°±æ˜¯æ°å¥½å®Œæˆäº†0æ¬¡ã€‚</p><p><code>dp[0][1][0]=0,å…¶ä½™ä¸ºè´Ÿæ— ç©·å¤§</code></p><p>å› ä¸ºå‰é¢ä¼šåŠ ä¸€ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥<code>dp[0][0]</code>ä¸æ˜¯è¡¨ç¤ºæ°å¥½å®Œæˆ0æ¬¡çš„çŠ¶æ€ã€‚</p>              </div>            </details><h1 id="å››ã€åŒºé—´DP"><a href="#å››ã€åŒºé—´DP" class="headerlink" title="å››ã€åŒºé—´DP"></a>å››ã€åŒºé—´DP</h1><h4 id="åŒºåˆ«ï¼š"><a href="#åŒºåˆ«ï¼š" class="headerlink" title="åŒºåˆ«ï¼š"></a>åŒºåˆ«ï¼š</h4><ul><li>çº¿æ€§DPï¼šä¸€èˆ¬æ˜¯åœ¨æ•°ç»„çš„å‰ç¼€&#x2F;åç¼€ä¸Šè½¬ç§»ã€‚</li><li>åŒºé—´DPï¼šæŠŠé—®é¢˜è§„æ¨¡ç¼©å°åˆ°æ•°ç»„ä¸­é—´çš„åŒºé—´ä¸Šï¼Œä¸ä»…ä»…äº‹å‰ç¼€&#x2F;åç¼€ï¼Œä»å°åŒºé—´è½¬ç§»åˆ°å¤§åŒºé—´ã€‚</li></ul><details class="folding-tag" blue><summary> æœ€é•¿å›æ–‡å­åºåˆ— </summary>              <div class='content'>              <h4 id="æ¥ä¸€ä¸ªé¢˜ç›®ï¼š"><a href="#æ¥ä¸€ä¸ªé¢˜ç›®ï¼š" class="headerlink" title="æ¥ä¸€ä¸ªé¢˜ç›®ï¼š"></a>æ¥ä¸€ä¸ªé¢˜ç›®ï¼š</h4><p><a href="https://leetcode.cn/problems/longest-palindromic-subsequence/">516. æœ€é•¿å›æ–‡å­åºåˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>ğŸˆæ€è·¯1ï¼š</strong></p><p>å¯¹äºå­—ç¬¦ä¸²<code>s</code>ï¼Œå¯ä»¥æ±‚<code>s</code>å’Œåè½¬åçš„<code>s</code>çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚</p><p>ğŸˆ<strong>æ€è·¯2ï¼š</strong></p><p>æ—¢ç„¶å­åºåˆ—ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯é€‰&#x2F;ä¸é€‰ï¼Œç”±äºè¦è®¡ç®—çš„æ˜¯å›æ–‡å­åºåˆ—ï¼Œé‚£å°±çœ‹ç¬¬ä¸€ä¸ªå­—æ¯é€‰å’Œä¸é€‰ä»¥åŠæœ€åä¸€ä¸ªå­—æ¯é€‰å’Œä¸é€‰ï¼Œå³ä»ä¸¤ä¾§å‘å†…ç¼©å°é—®é¢˜è§„æ¨¡ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><blockquote><p>å­—ç¬¦ä¸²<code>s=eacbba</code></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/5.png" alt="1"></p><p>è§‚å¯Ÿä¸Šå›¾ï¼Œ</p><p>ç”±äºeå’Œaæ˜¯ä¸ç›¸ç­‰çš„ï¼Œæ‰€ä»¥åªèƒ½é€‰æ‹©ä¸€ä¸ªã€è¿™é‡Œä½ å¯èƒ½ä¼šé—®ï¼Œé‚£ä¹ˆèƒ½éƒ½ä¸é€‰å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œå½“é€‰æ‹©eçš„æ—¶å€™ï¼Œåé¢å¯èƒ½å°±ä¸é€‰eäº†ï¼Œæ‰€ä»¥ä¼šå‡ºç°éƒ½ä¸é€‰çš„æƒ…å†µã€‘</p><p>å½“é‡åˆ°ç¬¬ä¸€ä¸ªå­—æ¯å’Œæœ€åä¸€ä¸ªå­—æ¯ç›¸ç­‰æ—¶ï¼Œé‚£å°±é€‰ä¸Šï¼Œå¹¶è®°å½•ä¸€ä¸‹é•¿åº¦ï¼Œ</p><p>è¿™é‡Œå°±å’Œæœ€é•¿å…¬å…±å­åºåˆ—çš„æ€è€ƒæ–¹å¼ç±»ä¼¼ï¼</p></blockquote><p>ğŸˆ<strong>é€’å½’å…¬å¼ï¼š</strong></p><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p><p>å®šä¹‰<code>dfs(i,j)</code>è¡¨ç¤ºä»<code>s[i]</code>åˆ°<code>s[j]</code>çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦</p><p><code>dfs(i,j) = dfs(i+1,j-1) + 2  s[i]==s[j]</code></p><p><code>dfs(i,j) = max( dfs(i+1,j) , dfS(i,j-1) )   s[i]!=s[j]</code></p><p>ğŸˆ<strong>è¾¹ç•Œæ¡ä»¶ï¼š</strong></p><blockquote><p><code>dfs(i,j) = 1</code> ã€å¦‚æœé€’å½’åˆ°åªæœ‰ä¸€ä¸ªå­—æ¯çš„æ—¶å€™ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªå›æ–‡å­åºåˆ—ï¼Œé•¿åº¦ä¸º1ã€‘</p><p><code>dfs(i+1,i) = 0</code> ã€æ²¡æœ‰å­—æ¯ï¼Œè¿”å›0ã€‘</p><p>æ¯”å¦‚é‡åˆ°<code>bb</code>æ—¶ï¼Œä¼šä»<code>dfs(i,i+1)</code>é€’å½’åˆ°<code>dfs(i+1,i)</code></p></blockquote><p>ğŸˆ<strong>codeï¼š</strong></p><p><a href="https://leetcode.cn/problems/longest-palindromic-subsequence/solution/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-kgkg/">ã€è§†é¢‘ã€‘æ•™ä½ ä¸€æ­¥æ­¥æ€è€ƒåŠ¨æ€è§„åˆ’ï¼ï¼ˆPython&#x2F;Java&#x2F;C++&#x2F;Goï¼‰ - æœ€é•¿å›æ–‡å­åºåˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">åŒæŒ‡é’ˆé€’å½’</button></li><li class="tab"><button type="button" data-href="#code-2">è®°å¿†åŒ–æœç´¢</button></li><li class="tab"><button type="button" data-href="#code-3">1:1ç¿»è¯‘æˆé€’æ¨</button></li><li class="tab"><button type="button" data-href="#code-4">ç©ºé—´ä¼˜åŒ–</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>();</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==j) <span class="keyword">return</span> <span class="number">1</span>;  <span class="comment">//è¡¨ç¤ºåªæœ‰ä¸€ä¸ªå­—æ¯</span></span><br><span class="line">            <span class="keyword">if</span>(i&gt;j) <span class="keyword">return</span> <span class="number">0</span>;   <span class="comment">//è¡¨ç¤ºç©ºä¸²</span></span><br><span class="line">            <span class="keyword">if</span>(s[i]==s[j]) <span class="keyword">return</span> <span class="built_in">dfs</span>(i+<span class="number">1</span>,j<span class="number">-1</span>)+<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">dfs</span>(i+<span class="number">1</span>,j),<span class="built_in">dfs</span>(i,j<span class="number">-1</span>));</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼šO(2çš„næ¬¡æ–¹)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*n)</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> cache[n][n];</span><br><span class="line">        <span class="built_in">memset</span>(cache,<span class="number">-1</span>,<span class="built_in">sizeof</span>(cache)); <span class="comment">//-1è¡¨ç¤ºè¿˜æ²¡æœ‰è®¡ç®—è¿‡</span></span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i,<span class="type">int</span> j) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==j) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;j) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> &amp;res = cache[i][j];</span><br><span class="line">            <span class="keyword">if</span>(res!=<span class="number">-1</span>) <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">if</span>(s[i]==s[j]) <span class="keyword">return</span> res = <span class="built_in">dfs</span>(i+<span class="number">1</span>,j<span class="number">-1</span>)+<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> res = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i+<span class="number">1</span>,j),<span class="built_in">dfs</span>(i,j<span class="number">-1</span>));</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*n)ã€åŠ¨æ€è§„åˆ’çš„æ—¶é—´å¤æ‚åº¦&#x3D;çŠ¶æ€ä¸ªæ•°Ã—å•ä¸ªçŠ¶æ€çš„è½¬ç§»ä¸ªæ•°ï¼Œæœ¬é¢˜æ˜¯O(næ–¹)å’ŒO(1)ã€‘</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*n)</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-3"><p>é¦–å…ˆè¦æŠŠ<code>dfs</code>é€’å½’å‡½æ•°æ”¹æˆ<code>dp</code>æ•°ç»„ï¼Œç„¶åä¸¤å±‚å¾ªç¯ï¼Œå› ä¸ºæ˜¯äºŒç»´æ•°ç»„ï¼Œæ³¨æ„å¾ªç¯çš„é¡ºåºï¼Œå› ä¸ºæˆ‘ä»¬çš„<code>dp[i]</code>æ˜¯ä»<code>dp[i+1]</code>è½¬ç§»è¿‡æ¥çš„ï¼Œè€Œ<code>dp[j]</code>æ˜¯ä»<code>dp[j-1]</code>è½¬ç§»è¿‡æ¥çš„ï¼Œæ‰€ä»¥<code>i</code>è¦å€’åºï¼Œå…ˆæ±‚<code>i+1</code>çš„ï¼Œè€Œ<code>j</code>è¦æ­£åºï¼Œå…ˆæ±‚<code>j-1</code>çš„ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/6.png" alt="1"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>(), dp[n][n];</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in">sizeof</span>(dp));<span class="comment">//åˆå§‹åŒ–ä¸º0ï¼Œå› ä¸ºi&gt;jçš„æƒ…å†µæ˜¯0ï¼Œå…¶ä»–çš„éƒ½åœ¨å¾ªç¯ä¸­æ±‚å¾—ã€‚</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            dp[i][i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)</span><br><span class="line">                dp[i][j] = s[i] == s[j] ? dp[i + <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">2</span> :</span><br><span class="line">                          <span class="built_in">max</span>(dp[i + <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n*n)</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-4"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>(), f[n];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            f[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> pre = <span class="number">0</span>; <span class="comment">// f[i+1][i]</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="type">int</span> tmp = f[j];</span><br><span class="line">                f[j] = s[i] == s[j] ? pre + <span class="number">2</span> : <span class="built_in">max</span>(f[j], f[j - <span class="number">1</span>]);</span><br><span class="line">                pre = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h4 id="ç›¸å…³çš„é¢˜ç›®ç»ƒä¹ ï¼š"><a href="#ç›¸å…³çš„é¢˜ç›®ç»ƒä¹ ï¼š" class="headerlink" title="ç›¸å…³çš„é¢˜ç›®ç»ƒä¹ ï¼š"></a>ç›¸å…³çš„é¢˜ç›®ç»ƒä¹ ï¼š</h4><ul><li><p><a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/">1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ† - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>å¤šåšå¤šåšï¼ï¼ï¼</p></li><li><p><a href="https://leetcode.cn/problems/guess-number-higher-or-lower-ii/">375. çŒœæ•°å­—å¤§å° II</a></p></li><li><p><a href="https://leetcode.cn/problems/minimum-insertion-steps-to-make-a-string-palindrome/">1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°</a></p></li><li><p><a href="https://leetcode.cn/problems/minimum-cost-to-cut-a-stick/">1547. åˆ‡æ£å­çš„æœ€å°æˆæœ¬</a></p></li><li><p><a href="https://leetcode.cn/problems/minimum-cost-to-merge-stones/">1000. åˆå¹¶çŸ³å¤´çš„æœ€ä½æˆæœ¬</a></p></li></ul><h1 id="äº”ã€æ ‘å½¢DP"><a href="#äº”ã€æ ‘å½¢DP" class="headerlink" title="äº”ã€æ ‘å½¢DP"></a>äº”ã€æ ‘å½¢DP</h1><h2 id="5-1-äºŒå‰æ ‘ã€æ ‘çš„ç›´å¾„ã€‘"><a href="#5-1-äºŒå‰æ ‘ã€æ ‘çš„ç›´å¾„ã€‘" class="headerlink" title="5.1 äºŒå‰æ ‘ã€æ ‘çš„ç›´å¾„ã€‘"></a>5.1 äºŒå‰æ ‘ã€æ ‘çš„ç›´å¾„ã€‘</h2><p>å¦‚æœèƒ½å¤Ÿæ‰¾åˆ°å’ŒåŸé—®é¢˜ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œå¹¶å»ºç«‹èµ·å®ƒä»¬çš„è”ç³»ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç”¨é€’å½’è§£å†³ã€‚</p><p>ç”±äºäºŒå‰æ ‘çš„å·¦å³å­æ ‘æœ¬æ¥å°±å’Œæ•´æ£µæ ‘æ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥å¤©ç„¶åœ°å…·æœ‰åŸé—®é¢˜å’Œå­é—®é¢˜çš„å…³ç³»ã€‚</p><details class="folding-tag" yellow><summary> äºŒå‰æ ‘çš„ç›´å¾„ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. äºŒå‰æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p>ä»é¢˜ç›®ä¸­å¯ä»¥çœ‹å‡ºäºŒå‰æ ‘çš„ç›´å¾„å°±æ˜¯ï¼šä»ä¸€ä¸ªå¶å­å‡ºå‘å‘ä¸Šï¼Œåœ¨æŸä¸ªèŠ‚ç‚¹æ‹å¼¯ï¼Œå‘ä¸‹è¾¾åˆ°å¦ä¸€ä¸ªå¶å­ï¼Œå¾—åˆ°äº†ç”±ä¸¤æ¡é“¾æ‹¼èµ·æ¥çš„è·¯å¾„ï¼Œå¯èƒ½ä¼šå‡ºç°åªæœ‰ä¸€æ¡é“¾çš„ç°è±¡ã€‚</p><p>æ—¢ç„¶ç›´å¾„ä¼šåœ¨æŸä¸ªèŠ‚ç‚¹æ‹å¼¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æšä¸¾æ¯ä¸ªèŠ‚ç‚¹ï¼Œå‡è®¾ç›´å¾„åœ¨è¿™é‡Œæ‹å¼¯ï¼Œé‚£ä¹ˆå°±éœ€è¦çŸ¥é“è¿™ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æœ€é•¿é“¾çš„é•¿åº¦ï¼Œæœ€é•¿é“¾çš„è®¡ç®—æ–¹å¼ä¹Ÿå°±æ˜¯äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ã€‚</p><p>ğŸˆ<strong>ç®—æ³•ï¼š</strong></p><p>éå†äºŒå‰æ ‘ï¼Œåœ¨è®¡ç®—æœ€é•¿é“¾çš„åŒæ—¶ï¼Œé¡ºä¾¿æŠŠç›´å¾„ç®—å‡ºæ¥ã€‚</p><p>åœ¨å½“å‰èŠ‚ç‚¹æ‹å¼¯çš„ç›´å¾„é•¿åº¦&#x3D;å·¦å­æ ‘çš„æœ€é•¿é“¾+å³å­æ ‘çš„æœ€é•¿é“¾+2ã€‚</p><p>è¿”å›ç»™çˆ¶èŠ‚ç‚¹çš„å°±æ˜¯ï¼š</p><p>ä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘çš„æœ€é•¿é“¾&#x3D;max(å·¦å­æ ‘çš„æœ€é•¿é“¾+å³å­æ ‘çš„æœ€é•¿é“¾)+1</p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">æ–¹æ³•1</button></li><li class="tab"><button type="button" data-href="#code-2">æ–¹æ³•2</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">diameterOfBinaryTree</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;<span class="comment">//åˆå§‹åŒ–ç›´å¾„é•¿åº¦ä¸º0</span></span><br><span class="line">        function &lt;<span class="type">int</span>(TreeNode *)&gt; dfs = [&amp;](TreeNode *node) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(node==<span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            <span class="comment">//è¿™é‡Œretrun -1ï¼Œå½“æ—¶å¶å­èŠ‚ç‚¹çš„æ—¶å€™+1æ­£å¥½ä¸º0ï¼Œæœ€å¤§æ·±åº¦ä¸º0</span></span><br><span class="line">            <span class="type">int</span> l_len = <span class="built_in">dfs</span>(node-&gt;left) + <span class="number">1</span>;<span class="comment">//å·¦è¾¹çš„æœ€å¤§æ·±åº¦</span></span><br><span class="line">            <span class="type">int</span> r_len = <span class="built_in">dfs</span>(node-&gt;right) + <span class="number">1</span>;<span class="comment">//å³è¾¹çš„æœ€å¤§æ·±åº¦</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans,l_len+r_len);;<span class="comment">//ç›´å¾„å°±æ˜¯æ­¤èŠ‚ç‚¹ä¸¤è¾¹æœ€å¤§é“¾é•¿çš„å’Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(l_len,r_len);<span class="comment">//è¿”å›çš„å°±æ˜¯å·¦å³ä¸­æœ€å¤§çš„</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">dfs</span>(root);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code>ã€æ¯ä¸ªèŠ‚ç‚¹åªéå†äº†ä¸€æ¬¡ã€‘</p><p>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(n)</code>ã€ç”±äºåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿™æ£µäºŒå‰æ ‘æ˜¯ä¸€æ¡é“¾ï¼Œæ‰€ä»¥é€’å½’éœ€è¦O(n)çš„æ ˆç©ºé—´ã€‘</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">diameterOfBinaryTree</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        function &lt;<span class="type">int</span>(TreeNode *)&gt; dfs = [&amp;](TreeNode *node) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(node==<span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            <span class="comment">//è¿™é‡Œretrun -1ï¼Œå½“æ—¶å¶å­èŠ‚ç‚¹çš„æ—¶å€™+1æ­£å¥½ä¸º0ï¼Œæœ€å¤§æ·±åº¦ä¸º0</span></span><br><span class="line">            <span class="type">int</span> l_len = <span class="built_in">dfs</span>(node-&gt;left);    <span class="comment">//å·¦å­æ ‘çš„æœ€å¤§æ·±åº¦</span></span><br><span class="line">            <span class="type">int</span> r_len = <span class="built_in">dfs</span>(node-&gt;right);   <span class="comment">//å³å­æ ‘çš„æœ€å¤§æ·±åº¦</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans,l_len+r_len+<span class="number">2</span>);    <span class="comment">//ç›´å¾„å°±æ˜¯è¿”å›ä¸¤æ£µå­æ ‘+2</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(l_len,r_len)+<span class="number">1</span>;  <span class="comment">//è¿”å›çš„æœ€å¤§çš„é“¾é•¿</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">dfs</span>(root);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>è¿™é‡Œæ²¡æœ‰å¯¹èŠ‚ç‚¹é‡å¤ä½¿ç”¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªéå†äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸éœ€è¦è®°å¿†åŒ–æœç´¢ã€‚</p>              </div>            </details><p>ğŸ’¡<strong>ç›¸å…³é¢˜ç›®ï¼š</strong></p><p><a href="https://leetcode.cn/problems/binary-tree-maximum-path-sum/description/">124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/longest-univalue-path/">687. æœ€é•¿åŒå€¼è·¯å¾„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><h2 id="5-2ä¸€èˆ¬æ ‘ã€æ ‘çš„ç›´å¾„ã€‘"><a href="#5-2ä¸€èˆ¬æ ‘ã€æ ‘çš„ç›´å¾„ã€‘" class="headerlink" title="5.2ä¸€èˆ¬æ ‘ã€æ ‘çš„ç›´å¾„ã€‘"></a>5.2ä¸€èˆ¬æ ‘ã€æ ‘çš„ç›´å¾„ã€‘</h2><p>å¦‚æœä¸¤ä¸ªç‚¹x yä¹‹é—´æœ‰è¾¹ç›¸è¿ï¼Œé‚£ä¹ˆå¯ä»¥è¯´xæ˜¯yçš„é‚»å±…ï¼Œyæ˜¯xçš„é‚»å±…</p><details class="folding-tag" yellow><summary> ç›¸é‚»å­—ç¬¦ä¸åŒçš„æœ€é•¿è·¯å¾„ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/longest-path-with-different-adjacent-characters/">2246. ç›¸é‚»å­—ç¬¦ä¸åŒçš„æœ€é•¿è·¯å¾„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/longest-path-with-different-adjacent-characters/solutions/1427611/by-endlesscheng-92fw/">2246. ç›¸é‚»å­—ç¬¦ä¸åŒçš„æœ€é•¿è·¯å¾„é¢˜è§£ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p>æ­¤é¢˜å¦‚æœæ²¡æœ‰ç›¸é‚»èŠ‚ç‚¹çš„é™åˆ¶ï¼Œé‚£ä¹ˆå°±æ˜¯æ±‚ä¸€èˆ¬æ ‘ä¸­æ ‘çš„ç›´å¾„ä¸Šçš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¾¹çš„ä¸ªæ•°ï¼Œç‚¹å°±æ¯”è¾¹+1ï¼Œç”±äº<a href="https://leetcode.cn/problems/tree-diameter/">1245. æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a>è¦ä¼šå‘˜ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨æ­¤é¢˜å­¦ä¹ ï¼ï¼ï¼</p><ol><li><p>éå†èŠ‚ç‚¹çš„å­æ ‘ï¼ŒæŠŠæœ€é•¿é“¾çš„é•¿åº¦éƒ½å­˜åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œæ’åºå–æœ€å¤§çš„ä¸¤ä¸ªã€‚</p></li><li><p>éå†èŠ‚ç‚¹çš„å­æ ‘çš„åŒæ—¶æ±‚æœ€é•¿+æ¬¡é•¿ã€‚</p><blockquote><p>å¦‚æœæ¬¡é•¿åœ¨å‰é¢ï¼Œæœ€é•¿åœ¨åé¢ï¼Œé‚£ä¹ˆéå†åˆ°æœ€é•¿çš„æ—¶å€™ï¼Œå°±èƒ½ç®—å‡ºæœ€é•¿+æ¬¡é•¿</p><p>å¦‚æœæœ€é•¿åœ¨å‰é¢ï¼Œæ¬¡é•¿åœ¨åé¢ï¼Œé‚£ä¹ˆéå†åˆ°æ¬¡é•¿çš„æ—¶å€™ï¼Œå°±èƒ½ç®—å‡ºæœ€é•¿+æ¬¡é•¿</p><p>éå†çš„æ—¶å€™ç»´æŠ¤æœ€é•¿é•¿åº¦ï¼Œä¸€å®šä¼šåœ¨éå†æŸæ£µå­æ ‘æ—¶ç®—å‡ºæœ€é•¿+æ¬¡é•¿</p></blockquote></li></ol><p>ğŸˆ<strong>codeï¼š</strong></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">æ²¡æœ‰é™åˆ¶ï¼Œæ±‚ä¸€èˆ¬æ ‘ç›´å¾„</button></li><li class="tab"><button type="button" data-href="#code-2">æœ‰ç›¸é‚»èŠ‚ç‚¹é™åˆ¶çš„</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPath</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; parent, string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = parent.<span class="built_in">size</span>();  <span class="comment">//èŠ‚ç‚¹æ€»ä¸ªæ•°</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">g</span>(n);  <span class="comment">//ç”¨æ¥å­˜æ”¾æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;     <span class="comment">//åˆå§‹åŒ–ç»“æœ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">1</span>;i&lt;n;i++) <span class="comment">//ç”±äºæ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸ç”¨éå†</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æ³¨æ„é¢˜ç›®parentæ•°ç»„çš„å…ƒç´ å«ä¹‰</span></span><br><span class="line">            g[parent[i]].<span class="built_in">push_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="type">int</span> maxlen = <span class="number">0</span>; <span class="comment">//è®°å½•æœ€é•¿é•¿åº¦</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> y : g[x] )&#123; <span class="comment">//éå†å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="type">int</span> len = <span class="built_in">dfs</span>(y) + <span class="number">1</span>;   <span class="comment">//å½“å‰çš„éå†åˆ°çš„èŠ‚ç‚¹é•¿åº¦</span></span><br><span class="line">                ans = <span class="built_in">max</span>(ans,maxlen+len);  <span class="comment">//å¯»æ‰¾æœ€é•¿+æ¬¡é•¿</span></span><br><span class="line">                maxlen = <span class="built_in">max</span>(maxlen,len);   <span class="comment">//å¯»æ‰¾æœ€é•¿ï¼Œæ‰¾åˆ°ä¹‹åå°±ä¸å˜äº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨ä¸Šå±€ä»£ç æ‰¾åˆ°æ¬¡é•¿ï¼Œä»æ­¤æ›´æ–°ans</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> maxlen;  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€é•¿ç›´å¾„</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>);  <span class="comment">//ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹éå†</span></span><br><span class="line">        <span class="keyword">return</span> ans+<span class="number">1</span>;   <span class="comment">//æ±‚çš„æ˜¯èŠ‚ç‚¹ä¸ªæ•°ï¼Œä¸æ˜¯è¾¹çš„ä¸ªæ•°ï¼Œæ‰€ä»¥+1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPath</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; parent, string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = parent.<span class="built_in">size</span>();  <span class="comment">//èŠ‚ç‚¹æ€»ä¸ªæ•°</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">g</span>(n);  <span class="comment">//ç”¨æ¥å­˜æ”¾æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;     <span class="comment">//åˆå§‹åŒ–ç»“æœ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">1</span>;i&lt;n;i++) <span class="comment">//ç”±äºæ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸ç”¨éå†</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æ³¨æ„é¢˜ç›®parentæ•°ç»„çš„å…ƒç´ å«ä¹‰</span></span><br><span class="line">            g[parent[i]].<span class="built_in">push_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="type">int</span> maxlen = <span class="number">0</span>; <span class="comment">//è®°å½•æœ€é•¿é•¿åº¦</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> y : g[x] )&#123; <span class="comment">//éå†å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="type">int</span> len = <span class="built_in">dfs</span>(y) + <span class="number">1</span>;   <span class="comment">//å½“å‰çš„éå†åˆ°çš„èŠ‚ç‚¹é•¿åº¦</span></span><br><span class="line">                <span class="keyword">if</span>(s[x]!=s[y])&#123;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans,maxlen+len);  <span class="comment">//å¯»æ‰¾æœ€é•¿+æ¬¡é•¿</span></span><br><span class="line">                    maxlen = <span class="built_in">max</span>(maxlen,len);   <span class="comment">//å¯»æ‰¾æœ€é•¿ï¼Œæ‰¾åˆ°ä¹‹åå°±ä¸å˜äº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨ä¸Šå±€ä»£ç æ‰¾åˆ°æ¬¡é•¿ï¼Œä»æ­¤æ›´æ–°ans</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> maxlen;  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€é•¿ç›´å¾„</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>);  <span class="comment">//ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹éå†</span></span><br><span class="line">        <span class="keyword">return</span> ans+<span class="number">1</span>;   <span class="comment">//æ±‚çš„æ˜¯èŠ‚ç‚¹ä¸ªæ•°ï¼Œä¸æ˜¯è¾¹çš„ä¸ªæ•°ï¼Œæ‰€ä»¥+1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><p>ğŸ’¡<strong>ç›¸å…³é¢˜ç›®ï¼š</strong></p><p><a href="https://leetcode.cn/problems/count-subtrees-with-max-distance-between-cities/">1617. ç»Ÿè®¡å­æ ‘ä¸­åŸå¸‚ä¹‹é—´æœ€å¤§è·ç¦» - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/difference-between-maximum-and-minimum-price-sum/">2538. æœ€å¤§ä»·å€¼å’Œä¸æœ€å°ä»·å€¼å’Œçš„å·®å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><h2 id="5-3-äºŒå‰æ ‘ã€æ ‘ä¸Šæœ€å¤§ç‹¬ç«‹é›†ã€‘"><a href="#5-3-äºŒå‰æ ‘ã€æ ‘ä¸Šæœ€å¤§ç‹¬ç«‹é›†ã€‘" class="headerlink" title="5.3 äºŒå‰æ ‘ã€æ ‘ä¸Šæœ€å¤§ç‹¬ç«‹é›†ã€‘"></a>5.3 äºŒå‰æ ‘ã€æ ‘ä¸Šæœ€å¤§ç‹¬ç«‹é›†ã€‘</h2><details class="folding-tag" yellow><summary> æ‰“å®¶åŠ«èˆ </summary>              <div class='content'>              <p>è§†é¢‘è®²è§£ï¼š<a href="https://www.bilibili.com/video/BV1vu4y1f7dn/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">æ ‘å½¢DPå¦‚ä½•æ€è€ƒï¼Ÿæ‰“å®¶åŠ«èˆIIIã€åŸºç¡€ç®—æ³•ç²¾è®² 24ã€‘_å“”å“©å“”å“©_bilibili</a></p><p>é¢˜ç›®ï¼š<a href="https://leetcode.cn/problems/house-robber-iii/">337. æ‰“å®¶åŠ«èˆ III - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>é¢˜è§£ï¼š<a href="https://leetcode.cn/problems/house-robber-iii/solutions/2282018/shi-pin-ru-he-si-kao-shu-xing-dppythonja-a7t1/">337. æ‰“å®¶åŠ«èˆ III - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/7.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/8.png" alt="1"></p><p>ç›¸é‚»èŠ‚ç‚¹ä¸èƒ½é€‰ï¼Œå› ä¸ºæ˜¯äºŒå‰æ ‘ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯ä»æ ‘æ ¹å¼€å§‹å¾€ä¸‹é€’å½’ã€‚</p><p>æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ç§çŠ¶æ€ï¼Œæ¯ç§çŠ¶æ€åˆ†åˆ«å¯¹åº”ç€ä¸åŒçš„ä¸”æ˜¯å›ºå®šçš„æœ€å¤§å€¼ã€‚</p><ul><li>é€‰</li><li>ä¸é€‰</li></ul><p>å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„é€‰&#x2F;ä¸é€‰çš„ç»“æœæ˜¯ç”±å®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘å†³å®šçš„ã€çœ‹å›¾1ã€‘ã€‚</p><p>ğŸˆ<strong>codeï¼š</strong></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">Python</button></li><li class="tab"><button type="button" data-href="#code-2">c++</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rob</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>, <span class="number">0</span>  <span class="comment"># æ²¡æœ‰èŠ‚ç‚¹ï¼Œæ€ä¹ˆé€‰éƒ½æ˜¯ 0</span></span><br><span class="line">            l_rob, l_not_rob = dfs(node.left)  <span class="comment"># é€’å½’å·¦å­æ ‘</span></span><br><span class="line">            r_rob, r_not_rob = dfs(node.right)  <span class="comment"># é€’å½’å³å­æ ‘</span></span><br><span class="line">            rob = l_not_rob + r_not_rob + node.val  <span class="comment"># é€‰</span></span><br><span class="line">            not_rob = <span class="built_in">max</span>(l_rob, l_not_rob) + <span class="built_in">max</span>(r_rob, r_not_rob)  <span class="comment"># ä¸é€‰</span></span><br><span class="line">            <span class="keyword">return</span> rob, not_rob</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(dfs(root))  <span class="comment"># æ ¹èŠ‚ç‚¹é€‰æˆ–ä¸é€‰çš„æœ€å¤§å€¼</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">dfs</span><span class="params">(TreeNode *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">nullptr</span>) <span class="comment">// è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="number">0</span>, <span class="number">0</span>&#125;; <span class="comment">// æ²¡æœ‰èŠ‚ç‚¹ï¼Œæ€ä¹ˆé€‰éƒ½æ˜¯ 0</span></span><br><span class="line">        <span class="keyword">auto</span> [l_rob, l_not_rob] = <span class="built_in">dfs</span>(node-&gt;left);  <span class="comment">// é€’å½’å·¦å­æ ‘</span></span><br><span class="line">        <span class="keyword">auto</span> [r_rob, r_not_rob] = <span class="built_in">dfs</span>(node-&gt;right); <span class="comment">// é€’å½’å³å­æ ‘</span></span><br><span class="line">        <span class="type">int</span> rob = l_not_rob + r_not_rob + node-&gt;val; <span class="comment">// é€‰</span></span><br><span class="line">        <span class="type">int</span> not_rob = <span class="built_in">max</span>(l_rob, l_not_rob) + <span class="built_in">max</span>(r_rob, r_not_rob);  <span class="comment">// ä¸é€‰</span></span><br><span class="line">        <span class="keyword">return</span> &#123;rob, not_rob&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(TreeNode *root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> [root_rob, root_not_rob] = <span class="built_in">dfs</span>(root);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(root_rob, root_not_rob); <span class="comment">// æ ¹èŠ‚ç‚¹é€‰æˆ–ä¸é€‰çš„æœ€å¤§å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><p>ğŸ’¡<strong>ç›¸å…³ä¹ é¢˜ï¼š</strong></p><p><a href="https://www.luogu.com.cn/problem/P1352">P1352 æ²¡æœ‰ä¸Šå¸çš„èˆä¼š - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><p><a href="https://leetcode.cn/problems/frog-position-after-t-seconds/">1377. T ç§’åé’è›™çš„ä½ç½® - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/minimize-the-total-price-of-the-trips/">2646. æœ€å°åŒ–æ—…è¡Œçš„ä»·æ ¼æ€»å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’­ğŸ’¡ğŸˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çµç¥åŸºç¡€ç®—æ³•ç²¾è®²ï¼ˆä¸€ï¼‰</title>
      <link href="/2023/06/07/%E7%81%B5%E7%A5%9E%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%E7%B2%BE%E8%AE%B2%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/06/07/%E7%81%B5%E7%A5%9E%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%E7%B2%BE%E8%AE%B2%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/28.png" style="border-radius:10px" width="1000px"></img><div class="tag link"><a class="link-card" title="çµèŒ¶å±±è‰¾åºœ" href="https://leetcode.cn/u/endlesscheng/"><div class="left"><img src="https://assets.leetcode.cn/aliyun-lc-upload/users/endlesscheng/avatar_1675227068.png?x-oss-process=image%2Fformat%2Cwebp"/></div><div class="right"><p class="text">çµèŒ¶å±±è‰¾åºœ</p><p class="url">https://leetcode.cn/u/endlesscheng/</p></div></a></div></p><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><div class="note warning flat"><p>ğŸ’­ğŸ’¡ğŸˆä¸»è¦æ˜¯å°†é—®é¢˜è½¬åŒ–ä¸ºæ¨¡å‹çš„æ€è·¯ï¼ï¼ï¼</p></div><h1 id="ä¸€ã€åŒå‘åŒæŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€‘"><a href="#ä¸€ã€åŒå‘åŒæŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€‘" class="headerlink" title="ä¸€ã€åŒå‘åŒæŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€‘"></a>ä¸€ã€åŒå‘åŒæŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€‘</h1><p><a href="https://www.bilibili.com/video/BV1hd4y1r7Gq/?spm_id_from=333.999.0.0&vd_source=e459c0ddead0fb5eb6a33630a090aa93">åŒå‘åŒæŒ‡é’ˆ æ»‘åŠ¨çª—å£ã€åŸºç¡€ç®—æ³•ç²¾è®² 01ã€‘_å“”å“©å“”å“©_bilibili</a></p><p>å­æ•°ç»„å’Œå­ä¸²é—®é¢˜ä¸­ç»å¸¸ä¼šç”¨åˆ°åŒæŒ‡é’ˆè¿™ä¸€æŠ€å·§ã€‚</p><h2 id="æ¥ä¸€ä¸ªä¾‹é¢˜ï¼š"><a href="#æ¥ä¸€ä¸ªä¾‹é¢˜ï¼š" class="headerlink" title="æ¥ä¸€ä¸ªä¾‹é¢˜ï¼š"></a>æ¥ä¸€ä¸ªä¾‹é¢˜ï¼š</h2><details class="folding-tag" blue><summary> 209.é•¿åº¦æœ€å°çš„å­æ•°ç»„ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ğŸˆ<strong>é¢˜ç›®é‡ç‚¹è¯è¯­ï¼š</strong></p><ul><li>è¿ç»­å­æ•°ç»„</li><li>å…ƒç´ éƒ½æ˜¯æ­£æ•°</li><li>å­æ•°ç»„å…ƒç´ ä¹‹å’Œå¤§äº<code>target</code></li></ul><p><strong>ğŸˆæ€è·¯</strong></p><p><strong>æš´åŠ›åšæ³•ï¼š</strong></p><p>æšä¸¾å­æ•°ç»„çš„å·¦ç«¯ç‚¹ï¼Œä¸æ–­å‘å³æ‰©å±•ï¼Œåœ¨æ‰©å±•çš„åŒæ—¶ï¼ŒæŠŠè¿™äº›æ•°éƒ½åŠ èµ·æ¥ï¼Œå¦‚æœè¿˜æ²¡æœ‰è¾¾åˆ°<code>target</code>ï¼Œå°±ç»§ç»­å‘å³æ‰©å±•ï¼Œç›´åˆ°è¾¾åˆ°<code>target</code>ä¸ºæ­¢ï¼Œå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥æšä¸¾å³ç«¯ç‚¹çš„ï¼Œä¸æ–­å‘å·¦æ‰©å±•ï¼Œè¿™æ ·åšçš„æ—¶é—´å¤æ‚åº¦æ˜¯$O(n^2)$ã€æšä¸¾æ¯ä¸ªå³ç«¯ç‚¹+æ¯ä¸ªç«¯ç‚¹å‘å³æ‰©å±•$O(n)$ã€‘ï¼Œä½†æ­¤åšæ³•å¹¶æ²¡æœ‰åˆ©ç”¨åˆ°æ•°ç»„å…ƒç´ éƒ½æ˜¯æ­£æ•°è¿™ä¸ªæ€§è´¨ã€‚</p><p><strong>æ—¶é—´ä¼˜åŒ–ä¸€ä¸‹ï¼š</strong></p><p>é‚£ä¹ˆå¦‚ä½•åˆ©ç”¨æ•°ç»„å…ƒç´ éƒ½æ˜¯<font color='red'>æ­£æ•°</font>çš„è¿™ä¸ªæ€§è´¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ä¿ç•™ä¸Šä¸€æ¬¡è®¡ç®—çš„ç»“æœï¼Œæ¯”å¦‚ä¹‹å‰æšä¸¾å³ç«¯ç‚¹çš„æ—¶å€™å‘å·¦æ‰©å±•ã€‚</p><blockquote><p>[2,3,1,2,4,3]ï¼Œtarget&#x3D;7</p><p>å½“æšä¸¾åˆ°2çš„æ—¶å€™ï¼Œå‘å·¦æ‰©å±•åˆ°[2,3,1,2]ï¼Œæ­¤æ—¶å¤§äºäº†7ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°±ä¸ç”¨é‡æ–°æšä¸¾ä¸‹ä¸€ä¸ªå³ç«¯ç‚¹4äº†ï¼Œç›´æ¥åœ¨[2,3,1,2]çš„åŸºç¡€ä¸Šç›´æ¥å°†4åŠ è¿›å»ï¼Œå˜æˆäº†[2,3,1,2,4]ï¼Œç”±äºæ•°ç»„éƒ½æ˜¯æ­£æ•°ï¼Œå½“[2,3,1,2]$\geq$7çš„æ—¶å€™ï¼Œ[2,3,1,2,4]è‚¯å®šä¹Ÿæ˜¯$\geq$7çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä¸æ–­å‘å³ç¼©å°å·¦ç«¯ç‚¹ï¼Œå˜æˆäº†[3,1,2,4]ï¼Œå¦‚æœæ­¤æ—¶è¿™å››ä¸ªæ•°è¿˜æ˜¯$\geq$7çš„ï¼Œé‚£ä¹ˆç»§ç»­ç¼©å°ï¼Œå½“å‘ç°æ˜¯$\leq$7çš„ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ç»§ç»­ç¼©å°äº†ï¼Œå› ä¸ºå‰©ä¸‹çš„è‚¯å®šä¹Ÿæ˜¯$\leq$çš„ã€‚</p><p>å°±æ˜¯èƒ½æ‰”å°±æ‰”ï¼Œä¸èƒ½æ‰”å°±åŠ ã€‚</p></blockquote><p>å­æ•°ç»„çš„å³ç«¯ç‚¹æ˜¯æˆ‘ä»¬ä»å·¦åˆ°å³æšä¸¾çš„ï¼Œæ˜¯$O(n)$çš„ï¼Œå­æ•°ç»„çš„å·¦ç«¯ç‚¹æˆ‘ä»¬æ˜¯åœ¨ä¸æ–­ç¼©å°çš„ï¼Œä¹Ÿæ˜¯$O(n)$çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯$O(n)$çš„äº†ã€‚</p><p>ğŸˆ<strong>codeï¼š</strong></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">æ–¹æ³•1</button></li><li class="tab"><button type="button" data-href="#code-2">æ–¹æ³•2</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">minSubArrayLen</span>(<span class="params">self, target: <span class="built_in">int</span>, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        ans = n+<span class="number">1</span>   <span class="comment"># åˆå§‹åŒ–ç»“æœï¼Œæ–¹ä¾¿åé¢minç”¨ï¼Œä¹Ÿå¯ä¹Ÿæ˜¯infæ— ç©·å¤§</span></span><br><span class="line">        s = <span class="number">0</span>   <span class="comment"># åˆå§‹åŒ–å­æ•°ç»„çš„å’Œ</span></span><br><span class="line">        left = <span class="number">0</span>    <span class="comment"># åˆå§‹åŒ–å·¦ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> right,x <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):<span class="comment"># æšä¸¾å³ç«¯ç‚¹</span></span><br><span class="line">            s+=x</span><br><span class="line">            <span class="keyword">while</span> s-nums[left]&gt;=target:<span class="comment"># å¯»æ‰¾ç¼©å°å·¦ç«¯ç‚¹çš„æ¡ä»¶</span></span><br><span class="line">                s-=nums[left]</span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> s&gt;=target:<span class="comment"># åˆ¤æ–­æ˜¯å¦æ›´æ–°ansï¼Œå› ä¸ºåˆå§‹çš„æ—¶å€™sæ¯”è¾ƒå°ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ï¼Œä¸‹é¢çš„æ”¾åœ¨whileå¾ªç¯é‡Œé¢äº†ï¼Œå°±ä¸éœ€è¦åˆ¤æ–­äº†</span></span><br><span class="line">                ans = <span class="built_in">min</span>(ans,right-left+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> ans <span class="keyword">if</span> ans&lt;=n <span class="keyword">else</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶æˆ‘ä»¬å†™äº†ä¸€ä¸ªäºŒé‡å¾ªç¯ï¼Œä½†æ—¶é—´å¤æ‚åº¦å…¶å®ä¸æ˜¯$O(n^2)$çš„ã€‚</p><p>æ³¨æ„åˆ°left+&#x3D;1çš„æ¬¡æ•°è‡³å¤šæ˜¯næ¬¡ï¼Œé‚£å› æ­¤è¿™ä¸ªäºŒé‡å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿå¯ä»¥ç†è§£æˆæ˜¯left+&#x3D;1çš„æ¬¡æ•°ä»¥åŠright+&#x3D;1çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªäºŒé‡å¾ªç¯çš„<strong>æ—¶é—´å¤æ‚åº¦</strong>å°±æ˜¯$O(n)+O(n)$ã€‚</p><p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>$O(1)$</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">minSubArrayLen</span>(<span class="params">self, target: <span class="built_in">int</span>, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        ans = n+<span class="number">1</span>   <span class="comment"># åˆå§‹åŒ–ç»“æœï¼Œæ–¹ä¾¿åé¢minç”¨ï¼Œä¹Ÿå¯ä¹Ÿæ˜¯infæ— ç©·å¤§</span></span><br><span class="line">        s = <span class="number">0</span>   <span class="comment"># åˆå§‹åŒ–å­æ•°ç»„çš„å’Œ</span></span><br><span class="line">        left = <span class="number">0</span>    <span class="comment"># åˆå§‹åŒ–å·¦ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> right,x <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            s+=x</span><br><span class="line">            <span class="keyword">while</span> s&gt;=target:</span><br><span class="line">                ans = <span class="built_in">min</span>(ans,right-left+<span class="number">1</span>)</span><br><span class="line">                s-=nums[left]</span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans <span class="keyword">if</span> ans&lt;=n <span class="keyword">else</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>ğŸˆ<strong>åŒæŒ‡é’ˆåº”ç”¨åœºæ™¯ï¼š</strong></p><p>åœ¨<code>left</code>ç§»åŠ¨æ—¶ï¼Œå­æ•°ç»„çš„å’Œæ˜¯ä¸æ–­å˜å°çš„ï¼Œ<code>while</code>æ¡ä»¶ï¼Œå°±ä»æ»¡è¶³è¦æ±‚ä¸æ–­çš„å˜åŒ–ï¼Œå˜æˆä¸æ»¡è¶³è¦æ±‚çš„ï¼Œè¿™å°±æ˜¯å•è°ƒæ€§ï¼Œåªæœ‰æ»¡è¶³äº†å•è°ƒæ€§ï¼Œæˆ‘ä»¬æ‰å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆã€‚é‚£ä¹ˆ<code>while</code>ä¹Ÿå¯ä»¥ä»ä¸æ»¡è¶³è¦æ±‚åˆ°æ»¡è¶³è¦æ±‚~ã€‚</p>              </div>            </details><h2 id="ç›¸å…³é¢˜ç›®ï¼š"><a href="#ç›¸å…³é¢˜ç›®ï¼š" class="headerlink" title="ç›¸å…³é¢˜ç›®ï¼š"></a>ç›¸å…³é¢˜ç›®ï¼š</h2><details class="folding-tag" blue><summary> 713.é•¿åº¦æœ€å°çš„å­æ•°ç»„ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/subarray-product-less-than-k/">713. ä¹˜ç§¯å°äº K çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">numSubarrayProductLessThanK</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> k&lt;=<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        prod = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> right,x <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            prod*=x</span><br><span class="line">            <span class="keyword">while</span> prod&gt;=k:</span><br><span class="line">                prod /= nums[left]</span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">            ans+=right-left+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">lengthOfLongestSubstring</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(s)</span><br><span class="line">        ans = <span class="number">0</span>     <span class="comment"># æœ€é•¿å­ä¸²çš„é•¿åº¦</span></span><br><span class="line">        left = <span class="number">0</span>    <span class="comment"># å·¦æŒ‡é’ˆ</span></span><br><span class="line">        cnt = Counter()  <span class="comment"># ä¸€ä¸ªhashmapï¼Œç”¨æ¥è®¡ç®—å­—ç¬¦å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        <span class="comment"># å› ä¸ºæˆ‘ä»¬æ¯æ¬¡åŠ å…¥æ–°çš„å­—ç¬¦çš„æ—¶å€™ï¼Œéƒ½æ˜¯åœ¨ä¸å«é‡å¤å­—ç¬¦çš„å­ä¸²ä¸­åŠ å…¥çš„ï¼Œæ‰€ä»¥å‡ºç°é‡å¤äº†åªèƒ½æ˜¯æ–°åŠ å…¥çš„å­—ç¬¦</span></span><br><span class="line">        <span class="keyword">for</span> right,c <span class="keyword">in</span> <span class="built_in">enumerate</span>(s):    <span class="comment"># æšä¸¾å³ç«¯ç‚¹</span></span><br><span class="line">            cnt[c]+=<span class="number">1</span>   <span class="comment"># è®¡æ•°å™¨+1</span></span><br><span class="line">            <span class="keyword">while</span> cnt[c]&gt;<span class="number">1</span>: <span class="comment">#å‡ºç°é‡å¤ï¼Œå°±è¦å°†å·¦ç«¯ç‚¹å³ç§»ï¼Œç›´åˆ°ä¸å‡ºç°é‡å¤ä¸ºæ­¢ã€å³ç›´åˆ°å°†å’Œcä¸€æ ·çš„å­—ç¬¦å»é™¤äº†ï¼Œå› ä¸ºè¿™é‡Œçš„å­ä¸²è‚¯å®šæ˜¯è¿ç»­çš„ã€‘</span></span><br><span class="line">                cnt[s[left]]-=<span class="number">1</span></span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans,right-left+<span class="number">1</span>) <span class="comment"># æ›´æ–°ç­”æ¡ˆ</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong>$O(n)$ã€å’Œä¹‹å‰ä¸€æ ·ã€‘</p><p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>$O(1)&#x2F;O(1)$ã€så­—ç¬¦ä¸²æ˜¯ç”±å­—ç¬¦ã€ä¸‹åˆ’çº¿ã€æ•°å­—ç»„æˆï¼Œæ‰€ä»¥å°±ç›´æ¥å¯ä»¥çœ‹æˆASCIIå­—ç¬¦ï¼Œé‚£ä¹ˆASCIIå­—ç¬¦æœ‰128ä¸ªï¼Œé‚£ä¹ˆå°±ç”¨åˆ°äº†128ä¸ªç©ºé—´æœ€å¤šï¼Œæˆ–è€…å°±æ˜¯så»é‡ä¹‹åçš„é•¿åº¦ã€‘</p>              </div>            </details><details class="folding-tag" blue><summary> 1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/max-consecutive-ones-iii/description/">1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestOnes</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        ans = <span class="number">0</span>     <span class="comment"># åˆå§‹åŒ–ç»“æœ</span></span><br><span class="line">        left = <span class="number">0</span>    <span class="comment"># å·¦æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">for</span> right,x <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums): <span class="comment"># æšä¸¾å³ç«¯ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> x==<span class="number">0</span>:    <span class="comment"># å¦‚æœåŠ è¿›å»äº†0ï¼Œé‚£ä¹ˆkéœ€è¦-1</span></span><br><span class="line">                k-=<span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> k&lt;<span class="number">0</span>:  <span class="comment">#åˆ¤æ–­æ¡ä»¶0çš„ä¸ªæ•°æ˜¯å¦å¤§äºkäº†ï¼Œå¤§äºäº†å·¦ç«¯ç‚¹å°±å³ç§»ï¼Œç›´åˆ°æ­£å¥½æœ‰kä¸ª0</span></span><br><span class="line">                <span class="keyword">if</span> nums[left] == <span class="number">0</span>:</span><br><span class="line">                    k+=<span class="number">1</span></span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans,right-left+<span class="number">1</span>)     <span class="comment"># æ›´æ–°ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 1234. æ›¿æ¢å­ä¸²å¾—åˆ°å¹³è¡¡å­—ç¬¦ä¸² </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/max-consecutive-ones-iii/description/">1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/replace-the-substring-for-balanced-string/solutions/2108358/tong-xiang-shuang-zhi-zhen-hua-dong-chua-z7tu/">1234. æ›¿æ¢å­ä¸²å¾—åˆ°å¹³è¡¡å­—ç¬¦ä¸² - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><font color='red'>é€†å‘æ€è€ƒğŸ’¡</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">balancedString</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        cnt, m = Counter(s), <span class="built_in">len</span>(s) // <span class="number">4</span></span><br><span class="line">        <span class="comment"># cntæ˜¯ç”¨æ¥ç»Ÿè®¡å¾…æ›¿æ¢å­ä¸²å¤–çš„å„å­—ç¬¦ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">all</span>(cnt[x] == m <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&quot;QWER&quot;</span>):  <span class="comment"># å·²ç»ç¬¦åˆè¦æ±‚å•¦</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        ans, left = inf, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> right, c <span class="keyword">in</span> <span class="built_in">enumerate</span>(s):  <span class="comment"># æšä¸¾å­ä¸²å³ç«¯ç‚¹</span></span><br><span class="line">            cnt[c] -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> <span class="built_in">all</span>(cnt[x] &lt;= m <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&quot;QWER&quot;</span>):</span><br><span class="line">                ans = <span class="built_in">min</span>(ans, right - left + <span class="number">1</span>)</span><br><span class="line">                cnt[s[left]] += <span class="number">1</span></span><br><span class="line">                left += <span class="number">1</span>  <span class="comment"># ç¼©å°å­ä¸²</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 1658. å°† x å‡åˆ° 0 çš„æœ€å°æ“ä½œæ•° </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/max-consecutive-ones-iii/description/">1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><font color='red'>é€†å‘æ€è€ƒğŸ’¡</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">minOperations</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], x: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        target = <span class="built_in">sum</span>(nums) - x</span><br><span class="line">        <span class="keyword">if</span> target &lt; <span class="number">0</span>: <span class="keyword">return</span> -<span class="number">1</span>  <span class="comment"># å…¨éƒ¨ç§»é™¤ä¹Ÿæ— æ³•æ»¡è¶³è¦æ±‚</span></span><br><span class="line">        ans = -<span class="number">1</span></span><br><span class="line">        left = s = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> right, x <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            s += x</span><br><span class="line">            <span class="keyword">while</span> s &gt; target:  <span class="comment"># ç¼©å°å­æ•°ç»„é•¿åº¦</span></span><br><span class="line">                s -= nums[left]</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> s == target:</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, right - left + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span> <span class="keyword">if</span> ans &lt; <span class="number">0</span> <span class="keyword">else</span> <span class="built_in">len</span>(nums) - ans</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 2516. æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/take-k-of-each-character-from-left-and-right/description/">2516. æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><font color='red'>é€†å‘æ€è€ƒğŸ’¡</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">takeCharacters</span>(<span class="params">self, s: <span class="built_in">str</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># é€†å‘æ€ç»´</span></span><br><span class="line">        <span class="comment"># å–ä¸€ä¸ªè¿ç»­çš„å­ä¸²</span></span><br><span class="line">        <span class="comment"># é¢˜ç›®è¦æ±‚æ¯ä¸ªå­—ç¬¦è‡³å°‘å–kæ¬¡ï¼Œå³&gt;=k</span></span><br><span class="line">        <span class="comment"># é‚£ä¹ˆæˆ‘ä»¬å–ä¸€ä¸ªè¿ç»­çš„å­—ç¬¦ä¸²ï¼Œçœ‹å‰©ä¸‹çš„å­—ç¬¦ä¸ªæ•°æ˜¯ä¸æ˜¯æ»¡è¶³&gt;=kçš„</span></span><br><span class="line">        <span class="comment"># é‚£ä¹ˆå°±æ˜¯æ±‚æœ€é•¿çš„å­ä¸²é•¿åº¦</span></span><br><span class="line">        <span class="comment"># ç»“æœå°±æ˜¯len(nums)-k</span></span><br><span class="line">        cnt = Counter(s)    <span class="comment"># ç»Ÿè®¡å‰©ä½™å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦çš„ä¸ªæ•°</span></span><br><span class="line">        left = <span class="number">0</span>    <span class="comment"># å·¦æŒ‡é’ˆ</span></span><br><span class="line">        ans = <span class="number">0</span> <span class="comment"># æœ€å¤§è¿ç»­å­ä¸²çš„é•¿åº¦</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">all</span>(cnt[x]&gt;=k <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&quot;abc&quot;</span>):   <span class="comment"># å¦‚æœä¸æ˜¯éƒ½&gt;=kçš„ç›´æ¥return -1</span></span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> right,c <span class="keyword">in</span> <span class="built_in">enumerate</span>(s):</span><br><span class="line">            cnt[c]-=<span class="number">1</span>   <span class="comment"># å–ä¸€ä¸ªäº†</span></span><br><span class="line">            <span class="keyword">while</span> <span class="keyword">not</span> <span class="built_in">all</span>(cnt[x]&gt;=k <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&quot;abc&quot;</span>):    <span class="comment"># åˆ¤æ–­æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œä¸æ»¡è¶³å·¦æŒ‡é’ˆå³ç§»</span></span><br><span class="line">                cnt[s[left]]+=<span class="number">1</span></span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans,right-left+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(s)-ans</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="äºŒã€ç›¸å‘åŒæŒ‡é’ˆ"><a href="#äºŒã€ç›¸å‘åŒæŒ‡é’ˆ" class="headerlink" title="äºŒã€ç›¸å‘åŒæŒ‡é’ˆ"></a>äºŒã€ç›¸å‘åŒæŒ‡é’ˆ</h1><details class="folding-tag" blue><summary> 167. ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/">167. ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ğŸˆ<strong>é¢˜ç›®é‡ç‚¹è¯è¯­</strong></p><ul><li>æ•°ç»„æ˜¯éé€’å‡çš„ï¼</li></ul><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p><strong>æš´åŠ›è§£æ³•</strong></p><p>æšä¸¾ç¬¬ä¸€ä¸ªæ•°ï¼Œç„¶åå†æšä¸¾ç¬¬äºŒä¸ªæ•°ï¼Œä¸¤ä¸ªforå¾ªç¯åµŒå¥—</p><p>æ—¶é—´å¤æ‚åº¦$O(n^2)$</p><p><strong>ä¼˜åŒ–ä¸€ä¸‹</strong></p><p>æ•°ç»„æ˜¯æ’å¥½åºçš„ï¼Œä½†æš´åŠ›è§£æ³•å¹¶æ²¡æœ‰åˆ©ç”¨åˆ°æ•°ç»„æ˜¯æ’å¥½åºè¿™ä¸ªæ€§è´¨ã€‚</p><p>å¦‚ä½•åˆ©ç”¨ï¼Ÿ</p><blockquote><p>[2,3,4,6,8]targey&#x3D;9</p><p>éšä¾¿é€‰æ‹©ä¸¤ä¸ªæ•°ï¼Œæ¯”å¦‚3å’Œ8ï¼Œ3+8&gt;9äº†</p><p>å› ä¸ºæ•°ç»„æœ‰åºï¼Œæ—¢ç„¶3+8å·²ç»å¤§äº9äº†ï¼Œé‚£ä¹ˆ3å’Œ8ä¸­é—´çš„æ•°ç»„4ã€6ä¸8çš„å’Œï¼Œè‚¯å®šä¹Ÿæ˜¯å¤§äº9çš„ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬é¦–å…ˆå°±å¯ä»¥å…ˆå°†æœ€å°çš„æ•°2å’Œæœ€å¤§çš„æ•°8ç›¸åŠ ï¼Œ2+8&gt;9ï¼Œé‚£ä¹ˆ2å’Œ8ä¸­é—´çš„æ•°å’Œ8ç›¸åŠ è‚¯å®šä¹Ÿæ˜¯å¤§äº9çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å°†8å»æ‰äº†ï¼Œåœ¨å‰©ä¸‹çš„å››ä¸ªæ•°ä¸­è¿›è¡Œé€‰æ‹©ã€‚</p><p>2å’Œ6çš„å’Œå°äºï¼Œé‚£ä¹ˆå°±æ„å‘³ç€2å’Œ6ä¹‹é—´çš„æ•°å­—å’Œ2çš„å’Œè‚¯å®šéƒ½æ˜¯å°äº9çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥æŠŠ2å»æ‰äº†ã€‚</p></blockquote><p>é‚£ä¹ˆè¿™æ ·çš„<strong>æ—¶é—´å¤æ‚åº¦</strong>æ˜¯å¤šå°‘å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ¯æ¬¡åªèŠ±è´¹$O(1)$çš„æ—¶é—´å°†ä¸¤ä¸ªæ•°ç›¸åŠ ä¸targetæ¯”è¾ƒå¤§å°ï¼Œå°±å¯ä»¥å»æ‰ä¸€ä¸ªæ•°ï¼Œç›´åˆ°æ‰¾åˆ°ç­”æ¡ˆï¼Œå› æ­¤ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯$O(n)$çš„ã€‚</p><p>é‚£ä¹ˆè¿™ä¸ªç®—æ³•ç›¸æ¯”æš´åŠ›ç®—æ³•åˆ°åº•æ˜¯å¿«åœ¨å“ªé‡Œï¼Ÿ</p><p>è¿™é‡Œç”¨ä¸€ä¸ªè·å–äº†å¤šå°‘çš„ä¿¡æ¯é‡æ¥è¡¡é‡ä¸€ä¸ªç®—æ³•çš„æ•ˆç‡ï¼Œ</p><ul><li>æš´åŠ›åšæ³•èŠ±è´¹O(1)çš„æ—¶é—´åªçŸ¥é“äº†O(1)çš„ä¿¡æ¯ã€‚</li><li>ä¼˜åŒ–åçš„åšæ³•èŠ±è´¹O(1)çš„æ—¶é—´çŸ¥é“äº†O(n)çš„ä¿¡æ¯ã€‚</li></ul><p>ğŸˆ<strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">self, numbers: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        left = <span class="number">0</span>    <span class="comment"># å·¦æŒ‡é’ˆ</span></span><br><span class="line">        right = <span class="built_in">len</span>(numbers)-<span class="number">1</span>      <span class="comment"># å³æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">while</span> left&lt;right:</span><br><span class="line">            s = numbers[left]+numbers[right]</span><br><span class="line">            <span class="keyword">if</span> s==target:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span> s&gt;target:</span><br><span class="line">                right-=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> [left+<span class="number">1</span>,right+<span class="number">1</span>]     <span class="comment"># é¢˜ç›®è¦æ±‚æ•°ç»„ä¸‹æ ‡ä»1å¼€å§‹</span></span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 15. ä¸‰æ•°ä¹‹å’Œ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/3sum/">15. ä¸‰æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ğŸˆ<strong>é¢˜ç›®é‡ç‚¹è¯è¯­ï¼š</strong></p><ul><li>ä¸‰å…ƒç»„é¡ºåºä¸é‡è¦</li><li>ä¸‰å…ƒç»„ä¸èƒ½é‡å¤</li><li><code>i&lt;j&lt;k</code></li></ul><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p>æ—¢ç„¶é¢˜ç›®è¯´ä¸‰å…ƒç»„é¡ºåºä¸é‡è¦ï¼Œé‚£ä¹ˆå°±æ˜¯[-1,0,1]å’Œ[-1,1,0]æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸å¦¨å…ˆæ’ä¸‹åºï¼Œç„¶åè‡ªå·±è§„å®šä¸€ä¸ªé¡ºåºï¼Œå³è§„å®š<code>i&lt;j&lt;k</code>ï¼Œç„¶åå°†<code>nums[i]+nums[j]+nums[k]=0</code>è½¬æ¢æˆ<code>nums[j]+nums[k]=-nums[i]</code>ï¼Œé‚£ä¹Ÿå°±å°†æ­¤é¢˜è½¬æ¢æˆäº†ä¸¤æ•°ä¹‹å’Œã€æˆ‘ä»¬æšä¸¾-nums[i],ç„¶åå°†jå’Œkç›¸åŠ æˆäº†ä¸¤æ•°ä¹‹å’Œã€‘ã€‚</p><p>æ³¨æ„è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ï¼Œå› ä¸ºè¿™é‡Œçš„å…ƒç´ ä¼šé‡å¤ï¼Œè¿™é‡Œå’Œä¸¤æ•°ä¹‹å’Œæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><blockquote><p>[-4,-1,-1,0,1,2]</p><p>å½“æšä¸¾åˆ°ç¬¬äºŒä¸ªæ•°-1çš„æ—¶å€™ï¼Œ[-1,0,1]ç¬¦åˆè¦æ±‚</p><p>å½“ç¬¬ä¸‰ä¸ªæ•°çš„æ—¶å€™ï¼Œ[-1,0,1]ä¹Ÿæ˜¯ç¬¦åˆè¦æ±‚çš„ï¼Œè¿™æ ·å°±ä¼šå‡ºç°é‡å¤ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å› ä¸ºæˆ‘ä»¬å·²ç»å°†æ•°ç»„æ’å¥½åºï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ä¸€ä¸‹å½“å‰æšä¸¾çš„è¿™ä¸ªæ•°æ˜¯å¦å’Œä¸Šä¸€ä¸ªæ•°ç›¸åŒï¼Œç›¸åŒåˆ™è·³è¿‡ã€‚</p></blockquote><p>ğŸˆ<strong>codeï¼š</strong></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">ä¸ä¸¤æ•°ä¹‹å’Œç›¸è”ç³»</button></li><li class="tab"><button type="button" data-href="#code-2">ä¼˜åŒ–ä¸€ä¸‹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">threeSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        nums.sort()</span><br><span class="line">        ans = []    <span class="comment"># åˆå§‹åŒ–ç»“æœ</span></span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">2</span>):    <span class="comment"># æšä¸¾nums[i]</span></span><br><span class="line">            <span class="keyword">if</span> i&gt;<span class="number">0</span> <span class="keyword">and</span> nums[i] == nums[i-<span class="number">1</span>]: <span class="comment"># å¦‚ä½•å½“å‰æšä¸¾çš„å’Œå‰ä¸€ä¸ªæ•°ç›¸åŒï¼Œé‚£ä¹ˆè·³è¿‡</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            j = i+<span class="number">1</span>     <span class="comment"># å·¦æŒ‡é’ˆ</span></span><br><span class="line">            k = n-<span class="number">1</span>     <span class="comment"># å³æŒ‡é’ˆ</span></span><br><span class="line">            <span class="keyword">while</span> j&lt;k:  <span class="comment"># å¾ªç¯æ‰¾åˆ°s=0çš„i,j,k</span></span><br><span class="line">                s = nums[i]+nums[j]+nums[k]</span><br><span class="line">                <span class="keyword">if</span> s&gt;<span class="number">0</span>:</span><br><span class="line">                    k-=<span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> s&lt;<span class="number">0</span>:</span><br><span class="line">                    j+=<span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    ans.append([nums[i],nums[j],nums[k]])</span><br><span class="line">                    <span class="comment"># è¿™é‡Œè¿˜éœ€è¦åˆ¤æ–­ä¸€ä¸‹jå’Œkæ˜¯å¦é‡å¤</span></span><br><span class="line">                    j+=<span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> j&lt;k <span class="keyword">and</span> nums[j]==nums[j-<span class="number">1</span>]:    <span class="comment"># åˆšæ‰j+1äº†,åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦é‡å¤ï¼Œä¸‹é¢kä¹Ÿæ˜¯</span></span><br><span class="line">                        j += <span class="number">1</span></span><br><span class="line">                    k-=<span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> j&lt;k <span class="keyword">and</span> nums[k]==nums[k+<span class="number">1</span>]:</span><br><span class="line">                        k-=<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong></p><p>nums.sort()ï¼šæ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯$O(nlog_n)$ï¼Œåé¢çš„åµŒå¥—å¾ªç¯ä¸­ï¼Œæšä¸¾<code>nums[i]</code>æ˜¯$O(n)$çš„ï¼ŒåŒæŒ‡é’ˆä¹Ÿæ˜¯$O(n)$çš„ï¼Œæ‰€ä»¥æ˜¯$O(n^2)$ã€‚</p><p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong></p><p>æ’åºä¸ç®—ï¼Œå°±æ˜¯$O(1)$ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><p>æ³¨æ„æˆ‘ä»¬æšä¸¾çš„æ˜¯nums[i]</p><ul><li>å½“æšä¸¾ç¬¬iä¸ªæ•°çš„æ—¶å€™ï¼Œå¦‚æœä»–ä¸åé¢çš„ä¸¤ä¸ªæ•°çš„å’Œéƒ½å¤§äº0äº†ï¼Œé‚£ä¹ˆå°±ä¸å¿…å†ç»§ç»­å¾€åæšä¸¾äº†ï¼Œå› ä¸ºæ•°ç»„æ˜¯é€’å¢çš„ï¼Œç›´æ¥breakã€‚</li><li>å½“ç¬¬iä¸ªæ•°ä¸æœ€åä¸¤ä¸ªæ•°çš„å’Œéƒ½å°äº0äº†ï¼Œé‚£ä¹ˆä»–è‚¯å®šä¸å‰é¢çš„æ•°çš„å’Œä¹Ÿå°äº0ï¼Œç›´æ¥continueï¼Œæšä¸¾ä¸‹ä¸€ä¸ªnums[i]ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">threeSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        nums.sort()</span><br><span class="line">        ans = []    <span class="comment"># åˆå§‹åŒ–ç»“æœ</span></span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">2</span>):    <span class="comment"># æšä¸¾nums[i]</span></span><br><span class="line">            <span class="keyword">if</span> i&gt;<span class="number">0</span> <span class="keyword">and</span> nums[i] == nums[i-<span class="number">1</span>]: <span class="comment"># å¦‚ä½•å½“å‰æšä¸¾çš„å’Œå‰ä¸€ä¸ªæ•°ç›¸åŒï¼Œé‚£ä¹ˆè·³è¿‡</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> nums[i]+nums[i+<span class="number">1</span>]+nums[i+<span class="number">2</span>]&gt;<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> nums[i]+nums[-<span class="number">2</span>]+nums[-<span class="number">1</span>]&lt;<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            j = i+<span class="number">1</span>     <span class="comment"># å·¦æŒ‡é’ˆ</span></span><br><span class="line">            k = n-<span class="number">1</span>     <span class="comment"># å³æŒ‡é’ˆ</span></span><br><span class="line">            <span class="keyword">while</span> j&lt;k:  <span class="comment"># å¾ªç¯æ‰¾åˆ°s=0çš„i,j,k</span></span><br><span class="line">                s = nums[i]+nums[j]+nums[k]</span><br><span class="line">                <span class="keyword">if</span> s&gt;<span class="number">0</span>:</span><br><span class="line">                    k-=<span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> s&lt;<span class="number">0</span>:</span><br><span class="line">                    j+=<span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    ans.append([nums[i],nums[j],nums[k]])</span><br><span class="line">                    <span class="comment"># è¿™é‡Œè¿˜éœ€è¦åˆ¤æ–­ä¸€ä¸‹jå’Œkæ˜¯å¦é‡å¤</span></span><br><span class="line">                    j+=<span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> j&lt;k <span class="keyword">and</span> nums[j]==nums[j-<span class="number">1</span>]:    <span class="comment"># åˆšæ‰j+1äº†,åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦é‡å¤ï¼Œä¸‹é¢kä¹Ÿæ˜¯</span></span><br><span class="line">                        j += <span class="number">1</span></span><br><span class="line">                    k-=<span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> j&lt;k <span class="keyword">and</span> nums[k]==nums[k+<span class="number">1</span>]:</span><br><span class="line">                        k-=<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><p><strong>ç›¸å…³é¢˜ç›®ï¼š</strong></p><ul><li><a href="https://leetcode.cn/problems/3sum-closest/">16. æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/4sum/">18. å››æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/valid-triangle-number/?utm_source=LCUS&utm_medium=ip_redirect&utm_campaign=transfer2china">611. æœ‰æ•ˆä¸‰è§’å½¢çš„ä¸ªæ•° - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li></ul><details class="folding-tag" blue><summary> 11. ç››æœ€å¤šæ°´çš„å®¹å™¨ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/container-with-most-water/description/">11. ç››æœ€å¤šæ°´çš„å®¹å™¨ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://www.bilibili.com/video/BV1Qg411q7ia/?p=3&spm_id_from=pageDriver">ç››æœ€å¤šæ°´çš„å®¹å™¨ æ¥é›¨æ°´ã€åŸºç¡€ç®—æ³•ç²¾è®² 03ã€‘_å“”å“©å“”å“©_bilibili</a></p>              </div>            </details><details class="folding-tag" blue><summary> 42. æ¥é›¨æ°´ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/trapping-rain-water/description/">42. æ¥é›¨æ°´ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://www.bilibili.com/video/BV1Qg411q7ia/?p=3&spm_id_from=pageDriver">ç››æœ€å¤šæ°´çš„å®¹å™¨ æ¥é›¨æ°´ã€åŸºç¡€ç®—æ³•ç²¾è®² 03ã€‘_å“”å“©å“”å“©_bilibili</a></p><p>å¯ä»¥ç”¨å‰åç¼€åˆ†è§£ï¼Œä¹Ÿå¯ä»¥ç”¨åŒæŒ‡é’ˆã€‚</p>              </div>            </details><h1 id="ä¸‰ã€äºŒåˆ†æŸ¥æ‰¾"><a href="#ä¸‰ã€äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="ä¸‰ã€äºŒåˆ†æŸ¥æ‰¾"></a>ä¸‰ã€äºŒåˆ†æŸ¥æ‰¾</h1><p><a href="https://www.bilibili.com/video/BV1AP41137w7/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">äºŒåˆ†æŸ¥æ‰¾ã€åŸºç¡€ç®—æ³•ç²¾è®² 04ã€‘_å“”å“©å“”å“©_bilibili</a></p><p><a href="https://www.bilibili.com/video/BV1QK411d76w/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">æœç´¢æ—‹è½¬æ’åºæ•°ç»„ã€åŸºç¡€ç®—æ³•ç²¾è®² 05ã€‘_å“”å“©å“”å“©_bilibili</a></p><h2 id="ğŸ’¡å¾ªç¯ä¸å˜é‡ï¼š"><a href="#ğŸ’¡å¾ªç¯ä¸å˜é‡ï¼š" class="headerlink" title="ğŸ’¡å¾ªç¯ä¸å˜é‡ï¼š"></a>ğŸ’¡å¾ªç¯ä¸å˜é‡ï¼š</h2><details class="folding-tag" blue><summary> ä¾‹é¢˜ </summary>              <div class='content'>              <p><strong>å…³äºåŒºé—´æœ‰ä»¥ä¸‹å››ç§æƒ…å†µï¼š</strong></p><ul><li>å·¦é—­å³é—­åŒºé—´</li><li>å·¦é—­å³å¼€åŒºé—´</li><li>å·¦å¼€å³é—­åŒºé—´</li><li>å·¦å¼€å³å¼€åŒºé—´</li></ul><p><strong>å…³äºæ¯”è¾ƒæœ‰äº”ç§æƒ…å†µï¼š</strong></p><ul><li>$&#x3D;ã€&gt;ã€\geqã€&lt;ã€\leq$</li></ul><p><strong>ä¸‹é¢è§£é‡Šä¸€ç§æƒ…å†µ</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/9.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/10.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/11.png" alt="1"></p><blockquote><p>ğŸ’­<strong>çº¢è“æŸ“è‰²æ³•</strong></p><p>å°±æ˜¯å®šä¸€ä¸‹ç›®æ ‡å€¼ï¼Œçœ‹åœ¨ç›®æ ‡å€¼çš„å·¦ä¾§è¿˜æ˜¯å³ä¾§ï¼Œå·¦ä¾§çº¢è‰²ï¼Œå³ä¾§è“è‰²ï¼›</p><p>äºŒæ®µæ€§ï¼šæ¯æ¬¡éƒ½èƒ½åˆ¤æ–­ç­”æ¡ˆåœ¨ä¸€ä¸ªä½ç½®çš„å·¦è¾¹æˆ–è€…å³è¾¹å°±è¡Œäº†ï¼›</p><p>æ³¨æ„ä¸ä¸€å®šå¿…é¡»æœ‰åºï¼Œåˆ†æé¢˜ç›®ï¼Œåªè¦èƒ½å¾—åˆ°ç­”æ¡ˆå°±å¯ã€‚</p></blockquote><div class="tabs" id="ğŸˆcode"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ğŸˆcode-1">å·¦é—­å³é—­</button></li><li class="tab"><button type="button" data-href="#ğŸˆcode-2">å·¦é—­å³å¼€</button></li><li class="tab"><button type="button" data-href="#ğŸˆcode-3">å·¦å¼€å³å¼€</button></li><li class="tab"><button type="button" data-href="#ğŸˆcode-4">å…¶ä»–æƒ…å†µ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ğŸˆcode-1"><p>å¯»æ‰¾$\geq$targetçš„ç¬¬ä¸€ä¸ªä½ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">lower_bound</span>(<span class="params">nums:<span class="type">List</span>[<span class="built_in">int</span>],target:<span class="built_in">int</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    <span class="comment"># å·¦å³æŒ‡é’ˆï¼Œè¿™é‡Œæ˜¯é—­åŒºé—´ [0,n-1]</span></span><br><span class="line">    left,right = <span class="number">0</span>,<span class="built_in">len</span>(nums)-<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left&lt;=right:  <span class="comment"># åŒºé—´ä¸ä¸ºç©º</span></span><br><span class="line">        mid = (left+right)//<span class="number">2</span></span><br><span class="line">        <span class="comment"># c++ é˜²æ­¢æº¢å‡ºï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼šleft+(right-left)/2</span></span><br><span class="line">        <span class="keyword">if</span> nums[mid]&lt;target:    <span class="comment"># è¯´æ˜midä»¥å‰å…¨éƒ¨å°äºtarget</span></span><br><span class="line">            left = mid+<span class="number">1</span>    <span class="comment"># [mid+1,right]</span></span><br><span class="line">        <span class="keyword">else</span>:   <span class="comment"># è¯´æ˜midä»¥åçš„éƒ½å¤§äºç­‰äºtarget</span></span><br><span class="line">            right = mid-<span class="number">1</span>:  <span class="comment"># [left,mid-1]</span></span><br><span class="line">    <span class="keyword">return</span> left     <span class="comment"># è¿™é‡Œæ±‚çš„æ˜¯å¤§äºç­‰äºtargetçš„ä½ç½®ï¼Œæ‰€æœ‰æœ€åçš„æƒ…å†µè‚¯å®šæ˜¯rightåœ¨midå·¦è¾¹ï¼Œleftåœ¨midä¸Šï¼Œæ‰€æœ‰right=mid-1ï¼Œleft=mid</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ğŸˆcode-2"><p>å¯»æ‰¾$\geq$targetçš„ç¬¬ä¸€ä¸ªä½ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">lower_bound</span>(<span class="params">nums:<span class="type">List</span>[<span class="built_in">int</span>],target:<span class="built_in">int</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    <span class="comment"># å·¦é—­å³å¼€  # [left,right)</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">while</span> left&lt;right:   <span class="comment"># åŒºé—´ä¸ä¸ºç©º    å½“left = rightçš„æ—¶å€™,åŒºé—´å·²ç»æ˜¯ç©ºäº†</span></span><br><span class="line">        mid = (left+right)//<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> nums[mid]&lt;target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid     <span class="comment"># å¼€åŒºé—´ï¼Œ[left,mid) --&gt; [left,mid-1]</span></span><br><span class="line">    <span class="keyword">return</span> left     <span class="comment"># æ­¤æ—¶left=right</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ğŸˆcode-3"><p>å¯»æ‰¾$\geq$targetçš„ç¬¬ä¸€ä¸ªä½ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">lower_bound</span>(<span class="params">nums:<span class="type">List</span>[<span class="built_in">int</span>],target:<span class="built_in">int</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">    <span class="comment"># å·¦å¼€å³å¼€  # (left,right)</span></span><br><span class="line">    left = -<span class="number">1</span></span><br><span class="line">    right = <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">while</span> left+<span class="number">1</span>&lt;right:   <span class="comment"># åŒºé—´ä¸ä¸ºç©º    å½“left+1 = rightçš„æ—¶å€™,åŒºé—´å·²ç»æ˜¯ç©ºäº†,é€€å‡ºå¾ªç¯</span></span><br><span class="line">        mid = (left+right)//<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> nums[mid]&lt;target:</span><br><span class="line">            left = mid  <span class="comment"># å¼€åŒºé—´ï¼Œï¼ˆmid,right) --&gt; [mid+1,right)</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid     <span class="comment"># å¼€åŒºé—´ï¼Œ(left,mid) --&gt; (left,mid-1]</span></span><br><span class="line">    <span class="keyword">return</span> right     <span class="comment"># æ­¤æ—¶left+1=right</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ğŸˆcode-4"><ul><li>$&gt;å’Œ&#x3D;$ï¼šå°±æ˜¯$\geq$æƒ…å†µï¼Œç­‰äºå·æ”¾åœ¨<code>nums[mid]&lt;target</code>è¿™é‡Œ</li><li>$&lt;$ï¼šæ”¹å˜æœ€ç»ˆçš„returnå€¼å°±å¥½</li><li>$\leq$ï¼šæ”¹å˜æœ€ç»ˆçš„returnå€¼å°±å¥½</li></ul><p>å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼ï¼ï¼</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="ğŸ’¡ç›¸å…³é¢˜ç›®"><a href="#ğŸ’¡ç›¸å…³é¢˜ç›®" class="headerlink" title="ğŸ’¡ç›¸å…³é¢˜ç›®"></a>ğŸ’¡ç›¸å…³é¢˜ç›®</h2><p><a href="https://github.com/EndlessCheng/codeforces-go/blob/master/copypasta/sort.go">äºŒåˆ†æŸ¥æ‰¾çš„é¢˜å•</a></p><ul><li><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/">34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/find-peak-element/">162. å¯»æ‰¾å³°å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/">153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/search-in-rotated-sorted-array/">33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a>æœ‰ç‚¹éš¾å•ŠğŸ˜­</li><li><a href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array-ii/">154. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ II - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li></ul>              </div>            </details><h1 id="å››ã€é“¾è¡¨"><a href="#å››ã€é“¾è¡¨" class="headerlink" title="å››ã€é“¾è¡¨"></a>å››ã€é“¾è¡¨</h1><p>ğŸ’¡å¯èƒ½ä¼šæœ‰æ¯”è¾ƒå¥‡æ€ªçš„åšæ³•å“¦ï¼å¥½å¥½æ€è€ƒ</p><h2 id="4-1-åè½¬é“¾è¡¨"><a href="#4-1-åè½¬é“¾è¡¨" class="headerlink" title="4.1 åè½¬é“¾è¡¨"></a>4.1 åè½¬é“¾è¡¨</h2><blockquote><p><a href="https://www.bilibili.com/video/BV1sd4y1x7KN/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">åè½¬é“¾è¡¨ã€åŸºç¡€ç®—æ³•ç²¾è®² 06ã€‘_å“”å“©å“”å“©_bilibili</a></p></blockquote><p>åœ¨è¡¨å¤´æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼ï¼ï¼</p><ul><li><a href="https://leetcode.cn/problems/reverse-linked-list/">206. åè½¬é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/reverse-linked-list-ii/">92. åè½¬é“¾è¡¨ II - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/reverse-nodes-in-k-group/">25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li></ul><h2 id="4-2-å¿«æ…¢æŒ‡é’ˆ"><a href="#4-2-å¿«æ…¢æŒ‡é’ˆ" class="headerlink" title="4.2 å¿«æ…¢æŒ‡é’ˆ"></a>4.2 å¿«æ…¢æŒ‡é’ˆ</h2><p>ä¸€èˆ¬å¿«æŒ‡é’ˆçš„ç§»åŠ¨é€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆçš„ä¸¤å€ï¼ï¼ï¼</p><blockquote><p><a href="https://www.bilibili.com/video/BV1KG4y1G7cu/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">ç¯å½¢é“¾è¡¨IIã€åŸºç¡€ç®—æ³•ç²¾è®² 07ã€‘_å“”å“©å“”å“©_bilibili</a></p></blockquote><ul><li><p><a href="https://leetcode.cn/problems/middle-of-the-linked-list/description/">876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p></li><li><p><a href="https://leetcode.cn/problems/linked-list-cycle/description/">141. ç¯å½¢é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p></li><li><p><a href="https://leetcode.cn/problems/linked-list-cycle-ii/">142. ç¯å½¢é“¾è¡¨ II - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>å¤šåšåšï¼Œå¤šåˆ†æåˆ†æï¼Œæ•°å­¦æ€ç»´ğŸ’­</p></li><li><p><a href="https://leetcode.cn/problems/reorder-list/description/">143. é‡æ’é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>å¤šåšï¼ï¼ï¼</p></li><li><p><a href="https://leetcode.cn/problems/palindrome-linked-list/description/">234. å›æ–‡é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p></li></ul><h2 id="4-3-å‰åæŒ‡é’ˆ"><a href="#4-3-å‰åæŒ‡é’ˆ" class="headerlink" title="4.3 å‰åæŒ‡é’ˆ"></a>4.3 å‰åæŒ‡é’ˆ</h2><p>åæŒ‡é’ˆå…ˆèµ°ï¼Œå‰æŒ‡é’ˆéšåè·Ÿç€ï¼ï¼!</p><blockquote><p><a href="https://www.bilibili.com/video/BV1VP4y1Q71e/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">åˆ é™¤é“¾è¡¨é‡å¤èŠ‚ç‚¹ã€åŸºç¡€ç®—æ³•ç²¾è®² 08ã€‘_å“”å“©å“”å“©_bilibili</a></p></blockquote><ul><li><a href="https://leetcode.cn/problems/delete-node-in-a-linked-list/description/">237. åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/remove-nth-node-from-end-of-list/">19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/remove-duplicates-from-sorted-list/description/">83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/remove-duplicates-from-sorted-list-ii/description/">82. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/remove-linked-list-elements/description/">203. ç§»é™¤é“¾è¡¨å…ƒç´  - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li></ul><h1 id="äº”ã€äºŒå‰æ ‘"><a href="#äº”ã€äºŒå‰æ ‘" class="headerlink" title="äº”ã€äºŒå‰æ ‘"></a>äº”ã€äºŒå‰æ ‘</h1><p>åŠ¨æ€æ¼”ç¤ºç½‘ç«™ï¼š<a href="https://pythontutor.com/">https://pythontutor.com/</a></p><h2 id="5-1-äºŒå‰æ ‘çš„é€’å½’ã€è®¡ç®—æœºæ‰§è¡Œé€’å½’åº•å±‚åŸç†ã€‘"><a href="#5-1-äºŒå‰æ ‘çš„é€’å½’ã€è®¡ç®—æœºæ‰§è¡Œé€’å½’åº•å±‚åŸç†ã€‘" class="headerlink" title="5.1 äºŒå‰æ ‘çš„é€’å½’ã€è®¡ç®—æœºæ‰§è¡Œé€’å½’åº•å±‚åŸç†ã€‘"></a>5.1 äºŒå‰æ ‘çš„é€’å½’ã€è®¡ç®—æœºæ‰§è¡Œé€’å½’åº•å±‚åŸç†ã€‘</h2><p>ğŸ’¡<strong>åœ¨å¼€å¤´é¦–å…ˆè¦çŸ¥é“åˆ°åº•ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿï¼Ÿï¼Ÿ</strong></p><p>é€’å½’æ˜¯ä¸€ç§åœ¨å‡½æ•°æˆ–è¿‡ç¨‹ä¸­è°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§ã€‚åœ¨å‡½æ•°å®šä¹‰ä¸­ï¼Œé€’å½’æŒ‡çš„æ˜¯åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨è‡ªèº«çš„æ–¹å¼ã€‚</p><p>é€’å½’çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œæœ‰å»æœ‰å›â€ã€‚åœ¨é€’å½’è¿‡ç¨‹ä¸­ï¼Œé—®é¢˜ä¼šè¢«åˆ†è§£æˆè‹¥å¹²ä¸ªè§„æ¨¡æ›´å°çš„ç›¸ä¼¼å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜å’ŒåŸé—®é¢˜æœ‰ç€ç›¸åŒçš„è§£æ³•ã€‚é€šè¿‡ä¸æ–­åœ°é€’å½’ï¼Œé—®é¢˜çš„è§„æ¨¡é€æ¸ç¼©å°ï¼Œç›´åˆ°è¾¾åˆ°ä¸€ä¸ªå¯ä»¥ç›´æ¥æ±‚è§£çš„è¾¹ç•Œæ¡ä»¶ï¼Œç„¶åé€šè¿‡é€’å½’çš„æ–¹å¼é€æ­¥è¿”å›ï¼Œæœ€ç»ˆå¾—åˆ°é—®é¢˜çš„è§£ã€‚</p><p>é€’å½’é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å››ä¸ªåŸºæœ¬æ­¥éª¤ï¼š</p><ol><li>è¾¹ç•Œæ¡ä»¶ï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰ï¼šç¡®å®šé€’å½’ä½•æ—¶ç»“æŸï¼Œé€šå¸¸æ˜¯æŸäº›ç®€å•çš„æƒ…å†µæˆ–æ¡ä»¶ã€‚</li><li>é€’å½’å‰è¿›æ®µï¼šå®šä¹‰åœ¨æ»¡è¶³è¾¹ç•Œæ¡ä»¶ä¹‹å‰çš„é€’å½’è¿‡ç¨‹ï¼Œé€šå¸¸æ˜¯é€šè¿‡è°ƒç”¨å‡½æ•°è‡ªèº«æ¥å®ç°ã€‚</li><li>é€’å½’è¿”å›æ®µï¼šå®šä¹‰åœ¨æ»¡è¶³è¾¹ç•Œæ¡ä»¶æ—¶çš„è¿”å›æ“ä½œï¼Œé€šå¸¸æ˜¯å°†ç»“æœè¿”å›ç»™é€’å½’å‰è¿›æ®µä½¿ç”¨çš„å‡½æ•°ã€‚</li><li>é€’å½’è¾…åŠ©å‡½æ•°ï¼šå°†é€’å½’å‰è¿›æ®µå’Œé€’å½’è¿”å›æ®µç»“åˆåœ¨ä¸€èµ·çš„å‡½æ•°ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•å¤„ç†é€’å½’è¿‡ç¨‹ä¸­çš„æ¯ä¸ªæ­¥éª¤ã€‚</li></ol><p>åœ¨è®¡ç®—æœºç§‘å­¦å’Œæ•°å­¦ä¸­ï¼Œé€’å½’å¸¸ç”¨äºè§£å†³ä¸€äº›å¤æ‚çš„é—®é¢˜ï¼Œå¦‚æ ‘çš„éå†ã€æ’åºç®—æ³•ã€å›¾å½¢å¤„ç†ã€åˆ†æ²»ç®—æ³•ç­‰ã€‚ç„¶è€Œï¼Œåœ¨ä½¿ç”¨é€’å½’æ—¶éœ€è¦æ³¨æ„é¿å…æ­»å¾ªç¯å’Œæ ˆæº¢å‡ºç­‰é—®é¢˜ï¼Œä»¥ç¡®ä¿ç¨‹åºçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚</p><blockquote><p><a href="https://www.bilibili.com/video/BV1UD4y1Y769/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">è®¡ç®—æœºæ˜¯æ€ä¹ˆæ‰§è¡Œé€’å½’çš„ï¼ŸäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ã€åŸºç¡€ç®—æ³•ç²¾è®² 09ã€‘_å“”å“©å“”å“©_bilibili</a></p><p>å¤„ç†é€’å½’ï¼Œä¸è¦æƒ³å­é—®é¢˜çš„è¿‡ç¨‹ï¼Œåªè¦æƒ³å­é—®é¢˜çš„ç»“æœï¼Œæ€è·¯å°±æ¸…æ™°äº†â—ã€‚</p><p>åªè¦ä»£ç çš„è¾¹ç•Œæ¡ä»¶å’Œéè¾¹ç•Œæ¡ä»¶çš„é€»è¾‘å†™å¯¹äº†ï¼Œä»£ç å¿…ç„¶æ­£ç¡®ï¼Œæ²¡æœ‰å¿…è¦æƒ³é€’å½’æ˜¯æ€ä¹ˆä¸€å±‚ä¸€å±‚èµ°çš„â—ã€‚</p></blockquote><details class="folding-tag" blue><summary> æ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/">104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ğŸˆ<strong>æ€è·¯ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/15.png" alt="1"></p><p>ä¸è¦ä¸€å¼€å§‹å°±é™·å…¥äºŒå‰æ ‘çš„ç»†èŠ‚ï¼Œå¯ä»¥æŠŠäºŒå‰æ ‘ç®€åŒ–æˆå¦‚ä¸‹å›¾ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/12.png" alt="1"></p><p>è¿™é‡Œç”¨ä¸‰è§’å½¢è¡¨ç¤ºå­æ ‘</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/13.png" alt="1"></p><p>åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬çš„é—®é¢˜æ˜¯æœ‰åµŒå¥—å…³ç³»çš„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„è®¡ç®—ç»“æœè¿”å›ç»™å®ƒçš„ä¸Šä¸€çº§é—®é¢˜ï¼Œè€Œå®ƒçš„ä¸Šä¸€çº§é—®é¢˜åˆä¼šæŠŠå®ƒçš„è®¡ç®—ç»“æœè¿”å›ç»™ä¸Šä¸Šä¸€çº§é—®é¢˜ï¼Œä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œç”¨é€’å½’å®ç°æ›´åˆé€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/14.png" alt="1"></p><p>æˆ‘ä»¬ä»åŸé—®é¢˜å‡ºå‘ï¼ŒæŠŠé—®é¢˜ä¸æ–­åˆ†è§£æˆæ›´å°çš„å­é—®é¢˜ï¼Œè¿™å°±æ˜¯ã€é€’å½’ã€‘è¿‡ç¨‹ä¸­çš„ã€é€’ã€‘è¿‡ç¨‹ï¼Œé‚£ä¹ˆä¸æ–­çš„é€’å½’ä¸‹å»æ€»ä¼šæœ‰ä¸ªå°½å¤´ï¼Œä¹Ÿå°±æ˜¯é€’å½’çš„è¾¹ç•Œæ¡ä»¶ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œé€’å½’çš„è¾¹ç•Œæ¡ä»¶å°±æ˜¯ç©ºèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›0ä½œä¸ºç­”æ¡ˆï¼Œé‚£ä¹ˆè¿™ä¸ªè¿”å›çš„è¿‡ç¨‹å°±æ˜¯ã€é€’å½’ã€‘ä¸­çš„ã€å½’ã€‘ã€‚</p><p>ğŸˆ<strong>ä¸ºä»€ä¹ˆè¿™æ ·åšå°±è‚¯å®šæ˜¯å¯¹çš„å‘¢ï¼Ÿï¼Ÿï¼Ÿ</strong></p><p>å¯ä»¥ç”¨æ•°å­¦å½’çº³æ³•</p><p>ğŸˆ<strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxDepth</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        l_depth = self.maxDepth(root.left)</span><br><span class="line">        r_depth = self.maxDepth(root.right)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(l_depth,r_depth)+<span class="number">1</span></span><br></pre></td></tr></table></figure><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š</p><p>$O(n)$ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½éå†äº†ä¸€æ¬¡ï¼Œ</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š</p><p>$O(n)$ï¼Œ</p><p>å½“æˆ‘ä»¬<code>return </code>çš„æ—¶å€™ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ€ä¹ˆçŸ¥é“å®ƒè¦<code>return</code>åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸Šå»å‘¢ï¼Ÿ</p><p>è®¡ç®—æœºé€’å½’çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªé€’å½’æ ˆï¼Œåœ¨é€’çš„æ—¶å€™ï¼Œä¼šè®°å½•èŠ‚ç‚¹ï¼Œç„¶ååœ¨å½’çš„æ—¶å€™ï¼Œä¼šä¾æ¬¡å–å‡ºèŠ‚ç‚¹ï¼Œè¿”å›ç»™æ­¤å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå³å°±æ˜¯æ”¯æŒå…ˆè¿›åå‡ºã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘åªæœ‰å·¦å„¿å­ï¼Œæ²¡æœ‰å³å„¿å­ï¼Œå°±å˜æˆäº†ä¸€ä¸ªé“¾çŠ¶çš„ç»“æ„ï¼Œè¿™ä¸ªæ ˆçš„å¤§å°å°±ä¼šè¾¾åˆ°$O(n)$</p></li></ul><p>ğŸˆ<strong>å¦ä¸€ç§æ–¹æ³•ï¼š</strong></p><p>åœ¨é€’å½’çš„æ—¶å€™ï¼Œé™¤äº†æŠŠèŠ‚ç‚¹ä¼ ä¸‹å»ï¼Œè¿˜å¯ä»¥æŠŠè·¯å¾„ä¸Šçš„èŠ‚ç‚¹ä¸ªæ•°ä¹Ÿ ä¼ ä¸‹å»ã€‚</p><p>æ ¹èŠ‚ç‚¹è¿™é‡Œè‚¯å®šæ˜¯1ï¼Œå®ƒæŠŠ1ä¼ ä¸‹å»ï¼Œé€’å½’å·¦å­æ ‘ï¼ŒæŠŠåˆšæ‰æ”¶åˆ°çš„1ï¼Œå†+1å¾—åˆ°2ï¼Œé‚£é€’å½’å³å­æ ‘ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œç„¶åå³å­æ ‘å†é€’å½’ï¼ŒæŠŠ2ä¼ ä¸‹å»ï¼Œ+1åå˜æˆäº†3ï¼Œæˆ‘ä»¬åœ¨é€’å½’çš„åŒæ—¶å‘¢ï¼Œç»´æŠ¤ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ¯æ¬¡åŠ å®Œ1ä¹‹åï¼Œå°±æ›´æ–°å…¨å±€å˜é‡çš„æœ€å¤§å€¼ï¼Œé€’å½’ç»“æŸä¹‹åï¼Œç­”æ¡ˆå°±æ˜¯æ­¤å…¨å±€å˜é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxDepth</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node, cnt</span>):</span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            cnt += <span class="number">1</span></span><br><span class="line">            <span class="keyword">nonlocal</span> ans</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, cnt)</span><br><span class="line">            dfs(node.left, cnt)</span><br><span class="line">            dfs(node.right, cnt)</span><br><span class="line">        dfs(root, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>              </div>            </details><p>ğŸ’¡<strong>ç›¸å…³é¢˜ç›®ï¼š</strong></p><ul><li><a href="https://leetcode.cn/problems/minimum-depth-of-binary-tree/">111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/path-sum/">112. è·¯å¾„æ€»å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/path-sum-ii/">113. è·¯å¾„æ€»å’Œ II - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/sum-root-to-leaf-numbers/">129. æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li><li><a href="https://leetcode.cn/problems/binary-tree-paths/description/">257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></li></ul><h2 id="5-2-å¦‚ä½•çµæ´»çš„è¿ç”¨é€’å½’ï¼Ÿï¼Ÿï¼Ÿ"><a href="#5-2-å¦‚ä½•çµæ´»çš„è¿ç”¨é€’å½’ï¼Ÿï¼Ÿï¼Ÿ" class="headerlink" title="5.2 å¦‚ä½•çµæ´»çš„è¿ç”¨é€’å½’ï¼Ÿï¼Ÿï¼Ÿ"></a>5.2 å¦‚ä½•çµæ´»çš„è¿ç”¨é€’å½’ï¼Ÿï¼Ÿï¼Ÿ</h2><details class="folding-tag" blue><summary> ç›¸åŒçš„æ ‘ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/same-tree/">100. ç›¸åŒçš„æ ‘ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>å¦‚ä½•åˆ¤æ–­ä¸¤æ£µæ ‘ç›¸åŒå‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><ul><li>é¦–å…ˆï¼Œæ ¹èŠ‚ç‚¹è‚¯å®šæ˜¯ç›¸åŒçš„</li><li>é‚£ä¹ˆå¦‚æœæ ¹èŠ‚ç‚¹ç›¸åŒäº†ï¼Œå·¦å³ä¸¤ä¸ªå­æ ‘è¦æ˜¯ä¹Ÿç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤æ£µæ ‘è‚¯å®šæ˜¯ç›¸åŒçš„</li><li>é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å·¦å³ä¸¤é¢—å­æ ‘ä¹Ÿç›¸åŒå‘¢ï¼Ÿé€’å½’æ˜¯æœ€å¥½çš„åŠæ³•äº†â—</li><li>è¾¹ç•Œæ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿ</li><li>åªè¦å…¶ä¸­ä¸€é¢—å­æ ‘æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆè‚¯å®šæ— æ³•é€’å½’ä¸‹å»äº†ï¼Œè¿™æ—¶åˆ¤æ–­ä¸¤é¢—å­æ ‘æ˜¯ä¸æ˜¯åŒæ—¶ä¸ºç©ºå°±å¯ä»¥</li></ul><p><strong>codeï¼š</strong></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">Python</button></li><li class="tab"><button type="button" data-href="#code-2">c++</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isSameTree</span>(<span class="params">self, p: <span class="type">Optional</span>[TreeNode], q: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">if</span> p <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> q <span class="keyword">is</span> <span class="literal">None</span>:  <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">return</span> p <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> q <span class="keyword">is</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment"># ä¸‹é¢åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">        <span class="keyword">if</span> p.val == q.val:  <span class="comment"># ç›¸åŒ</span></span><br><span class="line">            <span class="comment"># é€’å½’è¿”å›ä¸¤é¢—å·¦å³å­æ ‘æ˜¯å¦ç›¸åŒï¼Œå¿…é¡»éƒ½ç›¸åŒï¼Œæ‰€ä»¥æ˜¯ and</span></span><br><span class="line">            <span class="keyword">return</span> self.isSameTree(p.left,q.left) <span class="keyword">and</span> self.isSameTree(p.right,q.right)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># ä¸ç›¸åŒç›´æ¥è¿”å›False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isSameTree</span><span class="params">(TreeNode* p, TreeNode* q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="literal">nullptr</span> || q ==<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> p==<span class="literal">nullptr</span> &amp;&amp; q==<span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p-&gt;val == q-&gt;val)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">isSameTree</span>(p-&gt;left,q-&gt;left) <span class="keyword">and</span> <span class="built_in">isSameTree</span>(p-&gt;right,q-&gt;right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> å¯¹ç§°äºŒå‰æ ‘ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/symmetric-tree/description/">101. å¯¹ç§°äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>åˆ¤æ–­æ ‘æ˜¯å¦æ˜¯è½´å¯¹ç§°</p><p>ä»ä¸­é—´å°†æ ‘åˆ‡æˆä¸¤åŠï¼Œé¢˜ç›®ä¸­æ ‘è‚¯å®šæ˜¯å­˜åœ¨æ ¹èŠ‚ç‚¹çš„ï¼Œä¸”æ ¹èŠ‚ç‚¹è‚¯å®šæ˜¯è½´å¯¹ç§°çš„ï¼Œæ‰€æœ‰å‘ç°å’Œä¸Šé¢˜ä¸€æ ·ï¼Œè¿™é‡Œå°±æ˜¯æ¯”è¾ƒæ ¹èŠ‚ç‚¹çš„ä¸¤é¢—å·¦å³å­æ ‘æ˜¯å¦æ˜¯é•œåƒçš„ï¼Œå¯¹leftå’Œrightè°ƒæ¢ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p><p>ç›´æ¥è°ƒç”¨ä¸Šé¢˜ä»£ç ï¼š</p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p><p>ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isSymmetric</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">p,q</span>):</span><br><span class="line">            <span class="keyword">if</span> p <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> q <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> p <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> q <span class="keyword">is</span> <span class="literal">None</span></span><br><span class="line">            <span class="keyword">if</span> p.val==q.val:</span><br><span class="line">                <span class="keyword">return</span> f(p.left,q.right) <span class="keyword">and</span> f(p.right,q.left)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> f(root.left,root.right)</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> å¹³è¡¡äºŒå‰æ ‘ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/balanced-binary-tree/">110. å¹³è¡¡äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><strong>å¹³è¡¡äºŒå‰æ ‘ï¼š</strong></p><blockquote><p>ä¸€ä¸ªäºŒå‰æ ‘<em>æ¯ä¸ªèŠ‚ç‚¹</em> çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€‚</p></blockquote><p>é¦–å…ˆåˆ©ç”¨é€’å½’æ±‚å¾—æ¯ä¸ªå­æ ‘çš„é«˜åº¦</p><p>è¿™é‡Œå¾—åˆ°çš„é«˜åº¦çš„ç»“æœè‚¯å®šæ˜¯å½’çš„æ—¶å€™å¾—åˆ°çš„ï¼Œæˆ‘ä»¬å®šä¹‰é€’å½’å‡½æ•°çš„æ—¶å€™ï¼Œæ ¹èŠ‚ç‚¹ä½œä¸ºå…¥å£ï¼Œç„¶åå¾€å¶å­èŠ‚ç‚¹é€’ï¼Œç„¶åå½’çš„æ—¶å€™ï¼Œè¿”å›å­æ ‘çš„é«˜åº¦ã€‚</p><p>ç„¶åå·¦å³å­æ ‘ç›¸å‡ï¼Œåˆ¤æ–­ç»“æœæ˜¯ä¸æ˜¯å¤§äº1å°±å¯</p><p>é‚£è¿™é‡Œå¦‚æœå¤§äº1æ€ä¹ˆåŠå‘¢ï¼Œè¿˜å¾€ä¸Šå½’å—ï¼Ÿï¼Ÿï¼Ÿ</p><p>å½“ç„¶ä¸ç”¨ï¼Œè¿™é‡Œå¯ä»¥åˆ©ç”¨é«˜åº¦è‚¯å®šæ˜¯éè´Ÿçš„æ€§è´¨ï¼Œå¦‚æœé‡åˆ°äº†ä¸å¹³è¡¡çš„æƒ…å†µï¼Œç›´æ¥è¿”å›-1ï¼Œæ¯ä¸ªå½’çš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦ä¸º-1ï¼Œä¸º-1çš„è¯ï¼Œå°±ä¸€ç›´å¾€ä¸Šè¿”å›ï¼Œç›´åˆ°æ ¹èŠ‚ç‚¹â—</p><p>æœ€ç»ˆåˆ¤æ–­ä¸€ä¸‹é€’å½’å…¥å£å¤„è¿”å›çš„æ˜¯ä¸æ˜¯-1å³å¯â—</p><p><strong>codeï¼š</strong></p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p><p>ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isBalanced</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="comment"># æ±‚è§£æ ‘çš„é«˜åº¦</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">get_tree_height</span>(<span class="params">root</span>):</span><br><span class="line">            <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:    <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>    <span class="comment"># è¡¨æ˜æ ‘çš„é«˜åº¦æ˜¯0</span></span><br><span class="line">            left_tree_height = get_tree_height(root.left) <span class="comment"># é€’å½’å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> left_tree_height == -<span class="number">1</span>:  <span class="comment"># åˆ¤æ–­æ˜¯å¦æ˜¯-1ï¼Œå³æ˜¯å¦æ˜¯å¹³è¡¡çš„</span></span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">            right_tree_height = get_tree_height(root.right) <span class="comment"># é€’å½’å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> right_tree_height == -<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(left_tree_height-right_tree_height)&gt;<span class="number">1</span>:   <span class="comment"># å¦‚æœæ˜¯ä¸å¹³è¡¡çš„</span></span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>   <span class="comment"># è¿”å›-1</span></span><br><span class="line">            <span class="comment"># éƒ½ä¸ç¬¦åˆ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(left_tree_height,right_tree_height)+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> get_tree_height(root) != -<span class="number">1</span></span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> äºŒå‰æ ‘çš„å³è§†å›¾ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/binary-tree-right-side-view/">199. äºŒå‰æ ‘çš„å³è§†å›¾ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>è¿™é“é¢˜è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><blockquote><p>æ—¢ç„¶æ˜¯æ‰¾å³è§†å›¾ï¼Œé‚£è‚¯å®šæ˜¯æœ€å³è¾¹çš„å­æ ‘æœ€å…ˆçœ‹åˆ°ï¼Œå¦‚æœå³å­æ ‘æ²¡æœ‰ï¼Œæ‰ä¼šçœ‹åˆ°å·¦å­æ ‘ã€‚</p><p>é‚£æˆ‘ä»¬å°±å¯ä»¥å…ˆé€’å½’å³å­æ ‘ï¼Œå†é€’å½’å·¦å­æ ‘ã€‚</p><p>é‚£è¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>æˆ‘ä»¬æ€ä¹ˆæŠŠç­”æ¡ˆè®°ä¸‹æ¥</li><li>æˆ‘ä»¬æ€ä¹ˆåˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦éœ€è¦è®°å½•åˆ°ç­”æ¡ˆä¸­</li></ul><p><strong>ä¸‹é¢æ˜¯ä¸€ä¸ªç¥æ–¹æ³•</strong>ğŸ˜­</p><p>åœ¨é€’å½’çš„åŒæ—¶è®°å½•ä¸€ä¸ªèŠ‚ç‚¹ä¸ªæ•°æˆ–è€…è¯´æ˜¯é€’å½’æ·±åº¦ï¼Œå¦‚æœé€’å½’æ·±åº¦ç­‰äºç­”æ¡ˆã€åœ¨è¿™é‡Œå°±æ˜¯ä¸€ä¸ªvectorã€‘çš„é•¿åº¦ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±éœ€è¦è®°å½•åˆ°ç­”æ¡ˆä¸­ã€å½“éå†åˆ°æ­¤èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„é€’å½’æ·±åº¦æ˜¯ä¸åŠ ä¸Šæ­¤èŠ‚ç‚¹çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¦åšçš„å°±æ˜¯åˆ¤æ–­æ­¤èŠ‚ç‚¹æ˜¯å¦åŠ ç­”æ¡ˆä¸­ï¼Œæ‰€æœ‰ä¸Šè¾¹æ˜¯ç­‰äºâ—ã€‘</p><p>æ¯”å¦‚æ ¹èŠ‚ç‚¹çš„æ—¶å€™ï¼Œç­”æ¡ˆé•¿åº¦ä¸º0ï¼Œé€’å½’æ·±åº¦ä¸º0ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥æŠŠæ ¹èŠ‚ç‚¹åŠ è¿›å»ã€‚è¿™æ ·å°±å¯ä»¥å°†æœ€å³è¾¹çš„èŠ‚ç‚¹å…¨éƒ¨åŠ åˆ°ç­”æ¡ˆä¸­ï¼Œå·¦å­æ ‘ä¸­çœ‹ä¸åˆ°çš„èŠ‚ç‚¹éƒ½ä¸ä¼šåŠ å…¥åˆ°ç­”æ¡ˆä¸­å»ï¼Œç„¶åä¾æ¬¡å†å‘å·¦è¾¹é€‰å–èŠ‚ç‚¹åŠ å…¥åˆ°ç­”æ¡ˆä¸­ã€‚</p></blockquote><p><strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rightSideView</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        ans = []</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">node,depth</span>):</span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">if</span> depth == <span class="built_in">len</span>(ans):</span><br><span class="line">                ans.append(node.val)</span><br><span class="line">            f(node.right,depth+<span class="number">1</span>)</span><br><span class="line">            f(node.left,depth+<span class="number">1</span>)</span><br><span class="line">        f(root,<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> ç¿»è½¬äºŒå‰æ ‘ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/invert-binary-tree/">226. ç¿»è½¬äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>ç¿»è½¬â—</p><p>é‚£å°±æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¦‚æœè¿™ä¸ªæ ¹èŠ‚ç‚¹æœ‰å·¦å³å­æ ‘å…¶ä¸­çš„ä¸€ä¸ªï¼Œé‚£ä¹ˆå³äº¤æ¢ï¼šæ³¨æ„è¿™é‡Œä¸èƒ½äº¤æ¢å€¼ï¼Œåªèƒ½äº¤æ¢å·¦å³å­æ ‘ã€‚</p><p><strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">invertTree</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="type">Optional</span>[TreeNode]:</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">or</span> root.right:</span><br><span class="line">            x = root.left</span><br><span class="line">            root.left = root.right</span><br><span class="line">            root.right = x</span><br><span class="line">        self.invertTree(root.left)</span><br><span class="line">        self.invertTree(root.right)</span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆä¹‹é—´çš„æœ€å¤§å·®å€¼ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/maximum-difference-between-node-and-ancestor/">1026. èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆä¹‹é—´çš„æœ€å¤§å·®å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/maximum-difference-between-node-and-ancestor/solutions/2232367/liang-chong-fang-fa-zi-ding-xiang-xia-zi-wj9v/">1026. èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆä¹‹é—´çš„æœ€å¤§å·®å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p>              </div>            </details><details class="folding-tag" blue><summary> æ ¹åˆ°å¶è·¯å¾„ä¸Šçš„ä¸è¶³èŠ‚ç‚¹ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/insufficient-nodes-in-root-to-leaf-paths/">1080. æ ¹åˆ°å¶è·¯å¾„ä¸Šçš„ä¸è¶³èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/insufficient-nodes-in-root-to-leaf-paths/solutions/2278769/jian-ji-xie-fa-diao-yong-zi-shen-pythonj-64lf/">1080. æ ¹åˆ°å¶è·¯å¾„ä¸Šçš„ä¸è¶³èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p>              </div>            </details><details class="folding-tag" blue><summary> åˆ ç‚¹æˆæ— </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/delete-nodes-and-return-forest/">1110. åˆ ç‚¹æˆæ— - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><a href="https://leetcode.cn/problems/delete-nodes-and-return-forest/solutions/2289131/he-shi-ji-lu-da-an-pythonjavacgo-by-endl-lpcd/">1110. åˆ ç‚¹æˆæ— - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p>å¦‚ä½•ä¿è¯é€’å½’æ˜¯ä»å¶å­èŠ‚ç‚¹å¼€å§‹çš„å‘¢ï¼Œåªè¦å°†æ“ä½œæ”¾åœ¨é€’å½’çš„ä¸‹é¢ï¼Œå…ˆé€’å½’å†æ“ä½œâ—â—â—</p>              </div>            </details><details class="folding-tag" blue><summary> äºŒå‰æ ‘çš„æœ€é•¿äº¤é”™è·¯å¾„ </summary>              <div class='content'>              <p><a href="https://leetcode.cn/problems/longest-zigzag-path-in-a-binary-tree/">1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></p><p><strong>ğŸˆæ€è·¯ï¼š</strong></p><ul><li>ä»å¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œå¾€ä¸Šå½’</li><li>è¿”å›ä¸¤ä¸ªæ•°ï¼Œä¸€ä¸ªæ˜¯ä»¥å½“å‰èŠ‚ç‚¹å‘å·¦äº¤é”™çš„è·¯å¾„é•¿åº¦ï¼Œä¸€ä¸ªæ˜¯ä»¥å½“å‰èŠ‚ç‚¹å‘å·¦äº¤é”™çš„è·¯å¾„é•¿åº¦</li><li>å¦‚æœæ˜¯ç©ºèŠ‚ç‚¹ï¼Œè¿”å›-1ï¼Œ-1ã€å› ä¸ºæœ€é•¿è·¯å¾„é•¿åº¦æ˜¯è®¿é—®è¿‡çš„èŠ‚ç‚¹é•¿åº¦-1ã€‘</li><li>å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¿”å›çš„è‚¯å®šæ˜¯0ï¼Œ0</li><li>å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆè¿”å›çš„å°±æ˜¯ï¼šã€å½“å‰èŠ‚ç‚¹çš„å·¦å­©å­å‘å³äº¤é”™çš„è·¯å¾„é•¿åº¦+1ï¼Œå½“å‰èŠ‚ç‚¹çš„å³å­©å­å‘å·¦äº¤é”™çš„è·¯å¾„é•¿åº¦+1ã€‘</li></ul><p><strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestZigZag</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        ans = <span class="number">0</span> <span class="comment"># åˆå§‹åŒ–æœ€é•¿äº¤é”™è·¯å¾„é•¿åº¦</span></span><br><span class="line">        <span class="comment"># æ·±åº¦ä¼˜å…ˆæœç´¢å‡½æ•°ï¼Œéå†äºŒå‰æ ‘</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>,-<span class="number">1</span>    <span class="comment"># è¿™é‡Œè¿”å› -1 æ˜¯å› ä¸ºäº¤é”™è·¯å¾„é•¿åº¦è¦-1</span></span><br><span class="line">            <span class="keyword">nonlocal</span> ans    <span class="comment"># å£°æ˜ansä¸ºéå±€éƒ¨å˜é‡</span></span><br><span class="line">            l1,r1 = dfs(node.left)  <span class="comment"># l1,r1è¡¨ç¤ºä»node.leftå¼€å§‹å‘å·¦å’Œå‘å³èµ°çš„è·¯å¾„é•¿åº¦</span></span><br><span class="line">            l2,r2 = dfs(node.right)</span><br><span class="line">            <span class="comment"># node.left è¡¨ç¤ºä»nodeå‘å·¦èµ°ï¼Œæ‰€ä»¥è¿™é‡Œè‚¯å®šå–r1,æ‰èƒ½äº¤é”™</span></span><br><span class="line">            <span class="comment"># node.right è¡¨ç¤ºä»nodeå‘å³èµ°ï¼Œæ‰€ä»¥è¿™é‡Œè‚¯å®šå–l1,æ‰èƒ½äº¤é”™</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans,<span class="number">1</span>+r1,<span class="number">1</span>+l2)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>+r1,<span class="number">1</span>+l2</span><br><span class="line">        dfs(root)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="5-3-äºŒå‰æœç´¢æ ‘BST"><a href="#5-3-äºŒå‰æœç´¢æ ‘BST" class="headerlink" title="5.3 äºŒå‰æœç´¢æ ‘BST"></a>5.3 äºŒå‰æœç´¢æ ‘BST</h2><h3 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘â“"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘â“" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘â“"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘â“</h3><p>å¯¹äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®ƒçš„å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°äºå®ƒï¼Œå®ƒçš„å³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å¤§äºå®ƒã€‚</p><p>åŒæ—¶å®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘ä¹Ÿå¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p><h3 id="ï¼ˆ2ï¼‰å¦‚ä½•åˆ¤æ–­ä¸€æ£µæ ‘æ˜¯ä¸æ˜¯äºŒå‰æœç´¢æ ‘â“"><a href="#ï¼ˆ2ï¼‰å¦‚ä½•åˆ¤æ–­ä¸€æ£µæ ‘æ˜¯ä¸æ˜¯äºŒå‰æœç´¢æ ‘â“" class="headerlink" title="ï¼ˆ2ï¼‰å¦‚ä½•åˆ¤æ–­ä¸€æ£µæ ‘æ˜¯ä¸æ˜¯äºŒå‰æœç´¢æ ‘â“"></a>ï¼ˆ2ï¼‰å¦‚ä½•åˆ¤æ–­ä¸€æ£µæ ‘æ˜¯ä¸æ˜¯äºŒå‰æœç´¢æ ‘â“</h3><p><strong>é¢˜ç›®ï¼š<a href="https://leetcode.cn/problems/validate-binary-search-tree/">98. éªŒè¯äºŒå‰æœç´¢æ ‘ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><ul><li><p><strong>å‰åºéå†ğŸ“Œ</strong></p><blockquote><p><img src="https://picbed.dai2yutou.space/article_img/ACM/16.png" alt="1"></p><p>æ ¹æ®å®šä¹‰ï¼Œæ ¹èŠ‚ç‚¹5çš„å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å¿…é¡»å°äº5ï¼Œé‚£æ¢å¥è¯è¯´ï¼Œè¿™äº›èŠ‚ç‚¹çš„å€¼éƒ½å¿…é¡»åœ¨å¼€åŒºé—´è´Ÿæ— ç©·å¤§åˆ°5ä¸­($-âˆ,5$)&#96;</p><p>å¯¹äº2çš„å³å­æ ‘ï¼Œé‚£ä¹ˆæ‰€æœ‰èŠ‚ç‚¹çš„å€¼å¿…é¡»æ˜¯åœ¨(2,5)ä¹‹é—´çš„ã€‚</p><p>æ ¹æ®æ­¤è¿‡ç¨‹ï¼Œå¯ä»¥æå‡ºä¸€ä¸ªé€’å½’ç®—æ³•ï¼Œåœ¨é€’å½’çš„æ—¶å€™ï¼Œé™¤äº†ä¼ å…¥èŠ‚ç‚¹ï¼Œè¿˜éœ€è¦ä¼ å…¥è¿™ä¸ªå¼€åŒºé—´çš„èŒƒå›´ï¼›</p><p>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œé¦–å…ˆåˆ¤æ–­å®ƒçš„èŠ‚ç‚¹å€¼æ˜¯å¦åœ¨å¼€åŒºé—´å†…ï¼Œç„¶åå†å¾€ä¸‹é€’å½’ï¼Œé‚£å¦‚æœå¾€å·¦è¾¹é€’å½’ï¼Œé‚£ä¹ˆå°±æŠŠå¼€åŒºé—´çš„æœ‰è¾¹ç•Œæ›´æ–°ä¸ºèŠ‚ç‚¹å€¼ï¼Œå› ä¸ºæ­¤å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å€¼è‚¯å®šæ˜¯å°äºçˆ¶èŠ‚ç‚¹çš„å€¼çš„ã€‚</p><p>å¾€å³é€’å½’ï¼Œç›¸åå¤„ç†ã€‚</p></blockquote><p>è¿™ç§å…ˆè®¿é—®èŠ‚ç‚¹å€¼ï¼Œå†é€’å½’å·¦å³å­æ ‘çš„è¿‡ç¨‹ï¼Œå°±å«åšå‰åºéå†ã€‚</p><blockquote><p>æ ¹èŠ‚ç‚¹æ˜¯é€’å½’å‡½æ•°è°ƒç”¨çš„å…¥å£ï¼Œå†å¾€ä¸Šæ˜¯æ²¡æœ‰èŠ‚ç‚¹çš„ï¼Œå› æ­¤ä¼ å…¥çš„å€¼æ˜¯<code>[-âˆ,+âˆ]</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isValidBST</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        flag = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node,left, right</span>):</span><br><span class="line">            <span class="comment"># é¦–å…ˆåˆ¤æ–­é€’å½’çš„è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            x = node.val</span><br><span class="line">            <span class="comment"># å¼€åŒºé—´èŒƒå›´å†…</span></span><br><span class="line">            <span class="comment"># å·¦å­æ ‘å’Œå³å­æ ‘å¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘</span></span><br><span class="line">            <span class="keyword">return</span> left &lt; x &lt; right <span class="keyword">and</span> dfs(node.left,left,x) <span class="keyword">and</span> dfs(node.right,x,right)</span><br><span class="line">        <span class="comment"># é€’å½’å…¥å£æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> dfs(root,-inf,inf)</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯$O(n)$</p></li><li><p><strong>ä¸­åºéå†ğŸ“Œ</strong></p><p>ä¸­åºéå†äºŒå‰æœç´¢æ ‘ç­‰äºéå†æœ‰åºæ•°ç»„â—</p><blockquote><p><img src="https://picbed.dai2yutou.space/article_img/ACM/16.png" alt="1"></p><p>æŒ‰ç…§é€’å½’å·¦å­æ ‘ã€è®¿é—®èŠ‚ç‚¹å€¼ã€å†é€’å½’å³å­æ ‘çš„é¡ºåºå»éå†ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­ã€1,2,3,4,5,6ã€‘</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸¥æ ¼çš„é€’å¢æ•°ç»„ï¼›</p><p>é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯ä¸¥æ ¼é€’å¢çš„å‘¢ï¼Ÿ</p><p>åªéœ€è¦æ¯”è¾ƒæ‰€æœ‰ç›¸é‚»çš„å…ƒç´ å°±å¯ä»¥ã€‚</p><p>å¯¹äºä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ï¼Œæ¯æ¬¡éå†å®Œå·¦å­æ ‘ï¼Œå°±å¯ä»¥çœ‹å½“å‰èŠ‚ç‚¹çš„å€¼æ˜¯å¦å¤§äºä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åæŠŠå½“å‰èŠ‚ç‚¹çš„å€¼è®°å½•ä¸‹æ¥ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å€¼å°±å’Œå®ƒæ¯”å¤§å°ã€‚</p></blockquote><p><strong>codeï¼š</strong></p><p>ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€æœ‰å¯ä»¥åˆå§‹åŒ–ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ä¸ºè´Ÿæ— ç©·å¤§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isValidBST</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        pre = -inf</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="comment"># é¦–å…ˆé€’å½’å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> dfs(node.left):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">nonlocal</span> pre</span><br><span class="line">            <span class="keyword">if</span> node.val &lt;= pre: <span class="comment"># å¦‚æœå½“å‰èŠ‚ç‚¹å€¼&lt;=ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            pre = node.val  <span class="comment"># è®°å½•å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">            <span class="comment"># é€’å½’å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> dfs(node.right):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> dfs(root)</span><br></pre></td></tr></table></figure></li><li><p><strong>ååºéå†ğŸ“Œ</strong></p><blockquote><p>ä¹‹å‰è®²çš„å‰åºéå†æ˜¯æŠŠèŠ‚ç‚¹çš„å€¼çš„èŒƒå›´å¾€ä¸‹ä¼ ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠèŠ‚ç‚¹å€¼çš„èŒƒå›´å¾€ä¸Šä¼ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/17.png" alt="1"></p><p>æ¯”å¦‚å¯¹äº5æ¥è¯´ï¼Œå®ƒå·¦è¾¹èŠ‚ç‚¹å€¼çš„èŒƒå›´æ˜¯[1,4]ï¼Œå³è¾¹æ˜¯[6,6]ï¼Œé‚£ä¹ˆ5å¤§äºåšå·¦è¾¹æ˜¯æœ€å¤§å€¼ï¼Œå¹¶ä¸”5å°äºå³è¾¹çš„æœ€å°å€¼ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯åˆæ³•çš„ã€‚</p><p>è¿™ç§åšæ³•éœ€è¦å…ˆéå†å·¦å³å­æ ‘ï¼Œå†åˆ¤æ–­èŠ‚ç‚¹å€¼ã€‚</p><p>ååºéå†æ—¶éœ€è¦è¿”å›çš„æ˜¯<strong>å­æ ‘çš„å–å€¼èŒƒå›´</strong>ï¼Œå¶å­èŠ‚ç‚¹å–å€¼èŒƒå›´æœ€å°ï¼Œåªæœ‰å®ƒè‡ªèº«çš„å€¼ï¼Œéšåä¸æ–­å‘ä¸Šï¼ŒèŠ‚ç‚¹çš„å–å€¼èŒƒå›´æ…¢æ…¢å˜å¤§ï¼Œä»»æ„ä¸€é¢—å­æ ‘çš„å–å€¼èŒƒå›´æ¥è‡ªäºå…¶å·¦å­æ ‘çš„æœ€å°å€¼å’Œå…¶å³å­æ ‘ä¸Šçš„æœ€å¤§å€¼ï¼Œè¿™æ ·ä¿ç•™äº†è¶³å¤Ÿå¤šçš„ä¿¡æ¯ã€‚</p><p>è¿™é‡Œä¸ºä»€ä¹ˆè¦è¿”å›å·¦å­æ ‘çš„æœ€å°å€¼ï¼Œè€Œä¸æ˜¯æœ€å¤§å€¼å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>ç­”ï¼šæ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä»å­æ ‘å‘ä¸Šé€’å½’ï¼Œä¸æ˜¯ä»ä¸Šå‘å­æ ‘å¾€ä¸‹é€’å½’ï¼Œæ‰€æœ‰çˆ¶èŠ‚ç‚¹éœ€è¦å¾—åˆ°æ›´å¤šçš„ä¿¡æ¯ï¼Œä»¥ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å°äºå®ƒçš„ç¥–å…ˆèŠ‚ç‚¹çš„</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isValidBST</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="comment"># é¦–å…ˆåˆ¤æ–­è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> inf,-inf</span><br><span class="line">            <span class="comment"># é€’å½’å·¦å­æ ‘ï¼Œæ‹¿åˆ°å·¦å­æ ‘çš„æœ€å°å€¼å’Œæœ€å¤§å€¼</span></span><br><span class="line">            l_min,l_max = dfs(node.left)</span><br><span class="line">            <span class="comment"># é€’å½’å³å­æ ‘ï¼Œæ‹¿åˆ°å³å­æ ‘çš„æœ€å°å€¼å’Œæœ€å¤§å€¼</span></span><br><span class="line">            r_min,r_max = dfs(node.right)</span><br><span class="line">            <span class="comment"># è®°å½•èŠ‚ç‚¹å€¼</span></span><br><span class="line">            x = node.val</span><br><span class="line">            <span class="keyword">if</span> x &lt;= l_max <span class="keyword">or</span> x &gt;= r_min:    <span class="comment"># è¡¨æ˜è¿™ä¸æ˜¯ä¸€é¢—äºŒå‰æœç´¢æ ‘ï¼Œä¸Šé¢è¾¹ç•Œæ¡ä»¶è¿”å›çš„ inf å’Œ -inf å¯ä»¥ä¿è¯è¿™å¥è¯è‚¯å®šä¸æˆç«‹</span></span><br><span class="line">                <span class="comment"># è¿™é‡Œè¿”å› -inf å’Œ infå¯ä»¥ä¿è¯åœ¨å­æ ‘å·²ç»ä¸æ˜¯äºŒå‰æœç´¢æ ‘çš„æƒ…å†µä¸‹ï¼Œçˆ¶èŠ‚ç‚¹è‚¯å®šä¹Ÿä¸æ˜¯äºŒå‰æœç´¢æ ‘</span></span><br><span class="line">                <span class="keyword">return</span> -inf,inf</span><br><span class="line">            <span class="comment"># æœ€åè¿”å›å·¦è¾¹çš„æœ€å°å€¼å’Œå³è¾¹çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="comment"># ç”±äºè¿™é‡Œæˆ‘ä»¬ä¼šè¿”å›infå’Œ-infï¼Œæ‰€æœ‰è¦min å’Œ max</span></span><br><span class="line">            <span class="keyword">return</span>  <span class="built_in">min</span>(l_min,x) , <span class="built_in">max</span>(r_max,x)</span><br><span class="line">        <span class="keyword">return</span> dfs(root)[<span class="number">1</span>] != inf</span><br></pre></td></tr></table></figure></li></ul><h3 id="ï¼ˆ3ï¼‰äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ "><a href="#ï¼ˆ3ï¼‰äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ " class="headerlink" title="ï¼ˆ3ï¼‰äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ "></a>ï¼ˆ3ï¼‰äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ </h3><p><strong><a href="https://leetcode.cn/problems/kth-smallest-element-in-a-bst/">230. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´  - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><p>äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ä¼šå¾—åˆ°ä¸€ä¸ªé€’å¢çš„åºåˆ—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨æ­¤æ€§è´¨æ¥æ±‚</p><p><strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">kthSmallest</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        ans = []<span class="comment"># ç”¨æ¥å­˜å‚¨å·²ç»éå†åˆ°çš„æ•°</span></span><br><span class="line">        <span class="comment"># ä¸­åºéå†</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            f(node.left)</span><br><span class="line">            <span class="comment"># nonlocal ans</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(ans)==k:<span class="comment"># è¡¨æ˜å·²ç»æ‰¾åˆ°ç¬¬kå°çš„æ•°äº†ï¼Œæ‰€æœ‰ä¸å¾€ansæ·»åŠ å…ƒç´ ï¼Œç›´æ¥return</span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            ans.append(node.val)</span><br><span class="line">            f(node.right)</span><br><span class="line">        f(root)</span><br><span class="line">        <span class="keyword">return</span> ans[k-<span class="number">1</span>]</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ4ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°"><a href="#ï¼ˆ4ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°" class="headerlink" title="ï¼ˆ4ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°"></a>ï¼ˆ4ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°</h3><p><strong><a href="https://leetcode.cn/problems/find-mode-in-binary-search-tree/description/">501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•° - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><p>ç›´æ¥åˆ©ç”¨hash</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findMode</span>(<span class="params">self, root</span>):</span><br><span class="line">        models = []     <span class="comment"># åˆå§‹åŒ–å­˜å‚¨ç»“æœçš„åˆ—è¡¨</span></span><br><span class="line">        max_count = <span class="number">0</span>   <span class="comment"># åˆå§‹åŒ–æœ€å¤§å€¼</span></span><br><span class="line">        count = collections.Counter()   <span class="comment"># è®¡æ•°å™¨</span></span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:    <span class="comment"># ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¸­åºéå†</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> max_count</span><br><span class="line">            <span class="keyword">if</span> node:</span><br><span class="line">                f(node.left)    <span class="comment"># éå†å·¦å­æ ‘</span></span><br><span class="line">                <span class="comment"># éå†æ ¹èŠ‚ç‚¹ +1</span></span><br><span class="line">                count[node.val] += <span class="number">1</span></span><br><span class="line">                <span class="comment"># åˆ¤æ–­æ˜¯å¦æ˜¯ä¼—æ•°</span></span><br><span class="line">                <span class="keyword">if</span> count[node.val] &gt; max_count: <span class="comment"># å‡ºç°æ•°é‡æ›´å¤šçš„æ•°ï¼Œæ›´æ–°models</span></span><br><span class="line">                    max_count = count[node.val]</span><br><span class="line">                    models.clear()</span><br><span class="line">                    models.append(node.val)</span><br><span class="line">                <span class="keyword">elif</span> count[node.val] == max_count:  <span class="comment"># è¡¨è¿°æ•°é‡ä¸€æ ·</span></span><br><span class="line">                    models.append(node.val)</span><br><span class="line">                <span class="comment"># éå†å³å­æ ‘</span></span><br><span class="line">                f(node.right)</span><br><span class="line">        f(root)</span><br><span class="line">        <span class="keyword">return</span> models</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ5ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®"><a href="#ï¼ˆ5ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®" class="headerlink" title="ï¼ˆ5ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®"></a>ï¼ˆ5ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®</h3><p><strong><a href="https://leetcode.cn/problems/minimum-absolute-difference-in-bst/">530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·® - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><p>åˆ©ç”¨ä¸­åºéå†å¾—åˆ°çš„é€’å¢åºåˆ—æ±‚è§£ã€‚</p><p>ç”±äºæ±‚è§£çš„æ˜¯ä»»æ„èŠ‚ç‚¹çš„æœ€å°å·®ï¼Œä¸”å·®å€¼æ˜¯æ­£æ•°ï¼Œé‚£ä¹ˆç»“æœè‚¯å®šæ˜¯åœ¨åˆ©ç”¨ä¸­åºéå†å¾—åˆ°çš„åºåˆ—ä¸­ç›¸é‚»èŠ‚ç‚¹çš„å·®ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getMinimumDifference</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        min_num = inf     <span class="comment"># åˆå§‹åŒ–æœ€å°å€¼</span></span><br><span class="line">        pre = -inf      <span class="comment"># åˆå§‹åŒ–ä¸Šä¸€ä¸ªå€¼</span></span><br><span class="line">        <span class="comment"># ä¸­åºéå†</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> min_num,pre</span><br><span class="line">            <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            f(node.left)</span><br><span class="line">            min_num = <span class="built_in">min</span>(min_num,node.val-pre)</span><br><span class="line">            pre = node.val</span><br><span class="line">            f(node.right)</span><br><span class="line">        f(root)</span><br><span class="line">        <span class="keyword">return</span> min_num</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ6ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢"><a href="#ï¼ˆ6ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢" class="headerlink" title="ï¼ˆ6ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢"></a>ï¼ˆ6ï¼‰äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢</h3><p><strong><a href="https://leetcode.cn/problems/search-in-a-binary-search-tree/description/">700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><h3 id="ï¼ˆ7ï¼‰äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ"><a href="#ï¼ˆ7ï¼‰äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ" class="headerlink" title="ï¼ˆ7ï¼‰äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ"></a>ï¼ˆ7ï¼‰äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ</h3><p><strong><a href="https://leetcode.cn/problems/maximum-sum-bst-in-binary-tree/">1373. äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><h2 id="5-4-æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#5-4-æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="5.4 æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>5.4 æœ€è¿‘å…¬å…±ç¥–å…ˆ</h2><p><a href="https://www.bilibili.com/video/BV1W44y1Z7AR/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€åŸºç¡€ç®—æ³•ç²¾è®² 12ã€‘_å“”å“©å“”å“©_bilibili</a></p><h3 id="ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h3><p><strong><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/">236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><p>å‰åºéå†ï¼Œå½“å‰é€’å½’åˆ°çš„èŠ‚ç‚¹è€ƒè™‘æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/18.png" alt="1"></p><blockquote><p>æ€è€ƒæ€è€ƒâ—â—â—</p><p>ä¸ºå•¥è¿™ä¹ˆé€’å½’ï¼Œæœ‰è¿™äº›æƒ…å†µï¼Œæ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„å‘¢â“</p></blockquote><h3 id="ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h3><p><strong><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree/">235. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><p>ç”±äºæ²¡æœ‰æƒ…å†µä¼šéå†åˆ°ç©ºèŠ‚ç‚¹ï¼Œæ‰€æœ‰ä¸éœ€è¦åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºç©º</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/19.png" alt="1"></p><p>è¿™é‡Œåˆ©ç”¨äº†äºŒå‰æœç´¢æ•°çš„æ€§è´¨â—</p><ul><li>å¦‚æœpå’Œqéƒ½åœ¨å·¦å­æ ‘ï¼Œé‚£ä¹ˆæœ€è¿‘å…¬å…±ç¥–å…ˆä¸€å®šåœ¨å·¦å­æ ‘ä¸­</li><li>å¦‚æœpå’Œqéƒ½åœ¨å³å­æ ‘ï¼Œé‚£ä¹ˆæœ€è¿‘å…¬å…±ç¥–å…ˆä¸€å®šåœ¨å³å­æ ‘ä¸­</li><li>å¦åˆ™å°±æ˜¯å·¦å­æ ‘ä¸€ä¸ªï¼Œå³å­æ ‘ä¸€ä¸ªï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆã€å› ä¸ºé¢˜ç›®è¦æ±‚äº†på’Œqè‚¯å®šå­˜åœ¨ã€‘</li></ul><h2 id="5-5-äºŒå‰æ ‘çš„å±‚åºéå†ã€BFSã€‘"><a href="#5-5-äºŒå‰æ ‘çš„å±‚åºéå†ã€BFSã€‘" class="headerlink" title="5.5 äºŒå‰æ ‘çš„å±‚åºéå†ã€BFSã€‘"></a>5.5 äºŒå‰æ ‘çš„å±‚åºéå†ã€BFSã€‘</h2><p><a href="https://www.bilibili.com/video/BV1hG4y1277i/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">äºŒå‰æ ‘çš„å±‚åºéå†ã€åŸºç¡€ç®—æ³•ç²¾è®² 13ã€‘_å“”å“©å“”å“©_bilibili</a></p><p><strong>ä¸¤ç§æ–¹æ³•ï¼š</strong></p><ul><li>åˆ©ç”¨äº†åŒæ•°ç»„â—</li><li>å¯ä»¥å°†ä¸¤ä¸ªæ•°ç»„æ‹¼èµ·æ¥ï¼Œä½¿ç”¨é˜Ÿåˆ—â—</li></ul><p>é€’å½’çš„ç®—æ³•æ˜¯DFSã€æ·±åº¦ä¼˜å…ˆæœç´¢ã€‘ï¼Œä½¿ç”¨ä¸€ä¸ªæ ˆï¼Œè¿›è¡Œå…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œï¼Œè¿™äº›æ“ä½œè®¡ç®—æœºå†…éƒ¨è‡ªåŠ¨å®ç°äº†ï¼Œä»£ç æ¯”è¾ƒç®€æ´ã€‚</p><p>å±‚åºéå†çš„ç®—æ³•æ˜¯BFSã€å¹¿åº¦ä¼˜å…ˆæœç´¢ã€‘ï¼Œä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿›è¡Œå…¥é˜Ÿå’Œå‡ºé˜Ÿçš„æ“ï¼Œè¿™é‡Œéœ€è¦æ‰‹åŠ¨æ“ä½œã€‚</p><p><strong>ç›¸å…³é¢˜ç›®ï¼š</strong></p><ul><li><strong><a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/">102. äºŒå‰æ ‘çš„å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></li><li><strong><a href="https://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal/">103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></li><li><strong><a href="https://leetcode.cn/problems/find-bottom-left-tree-value/">513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></li><li><strong><a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/">104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></li></ul><h1 id="å…­ã€å›æº¯"><a href="#å…­ã€å›æº¯" class="headerlink" title="å…­ã€å›æº¯"></a>å…­ã€å›æº¯</h1><h2 id="ä»€ä¹ˆæ˜¯å›æº¯â“â“â“"><a href="#ä»€ä¹ˆæ˜¯å›æº¯â“â“â“" class="headerlink" title="ä»€ä¹ˆæ˜¯å›æº¯â“â“â“"></a>ä»€ä¹ˆæ˜¯å›æº¯â“â“â“</h2><details class="folding-tag" blue><summary> ä»€ä¹ˆæ˜¯å›æº¯ </summary>              <div class='content'>              <p><strong>é¢˜ç›®ï¼š</strong></p><p>æ„é€ é•¿ä¸ºnçš„å­—ç¬¦ä¸²ã€‚</p><p><strong>æ€è·¯ï¼š</strong></p><ul><li>åŸé—®é¢˜ï¼šæ„é€ é•¿ä¸ºnçš„å­—ç¬¦ä¸²</li><li>æšä¸¾ä¸€ä¸ªå­—æ¯</li><li>æ„é€ é•¿ä¸ºn-1çš„å­—ç¬¦ä¸²</li></ul><p>å­é—®é¢˜å’ŒåŸé—®é¢˜æ˜¯ç›¸ä¼¼çš„ï¼Œè¿™ç§ä»åŸé—®é¢˜åˆ°å­é—®é¢˜çš„è¿‡ç¨‹ï¼Œé€‚åˆç”¨é€’å½’è§£å†³ï¼Œé€šè¿‡é€’å½’å°±å¯ä»¥è¾¾åˆ°å¤šé‡å¾ªç¯çš„æ•ˆæœã€‚</p><p>ä¾‹å¦‚ä»abcä¸­é€‰ä¸€ä¸ªå­—æ¯ï¼Œä»dcfä¸­é€‰ä¸€ä¸ªå­—æ¯ä¸¤ä¸¤ç»„åˆã€‚</p><p>å›æº¯æœ‰ä¸€ä¸ªå¢é‡æ„é€ ç­”æ¡ˆçš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹é€šå¸¸ç”¨é€’å½’å®ç°ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/20.png" alt="1"></p><p>æœ‰åŒå­¦åœ¨æ€è€ƒé€’å½’è¿‡ç¨‹çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæƒ³æ€ä¹ˆé€’çš„å’Œæ€ä¹ˆå½’çš„ï¼Œè¿™ä¸ªé€’å½’ä»£ç åˆ°åº•å¯¹ä¸å¯¹ï¼Œå…¶å®åªè¦è¾¹ç•Œæ¡ä»¶å’Œéè¾¹ç•Œæ¡ä»¶çš„é€»è¾‘å†™å¯¹äº†ï¼Œå…¶ä»–çš„å·¥ä½œäº¤ç»™æ•°å­¦å½’çº³æ³•å°±å¯ã€‚</p><p>å› æ­¤åœ¨æ€è€ƒå›æº¯é—®é¢˜çš„æ—¶å€™ï¼Œåªéœ€è¦å°†å¤´éƒ¨çš„é€»è¾‘æƒ³æ˜ç™½å°±è¡Œã€‚</p>              </div>            </details><h2 id="æ¨¡æ¿ğŸ¤“"><a href="#æ¨¡æ¿ğŸ¤“" class="headerlink" title="æ¨¡æ¿ğŸ¤“"></a>æ¨¡æ¿ğŸ¤“</h2><p><strong>å›æº¯ä¸‰é—®ï¼š</strong></p><ul><li>é¦–å…ˆæƒ³æƒ³å½“å‰æ“ä½œæ˜¯ä»€ä¹ˆï¼Œæˆ–è€…è¯´æ¯ä¸€æ­¥çš„æ“ä½œæ˜¯è¦å¹²ä»€ä¹ˆï¼Ÿ</li><li>å­é—®é¢˜ï¼Ÿæˆ–è€…è¯´æ˜¯å½“å‰çš„é—®é¢˜æ˜¯ä»€ä¹ˆ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿå½“æ“ä½œå®Œä¸€æ­¥åï¼Œä¸‹ä¸€ä¸ªå­é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</li></ul><p><strong>ç›¸å…³ç»ƒä¹ é¢˜ï¼š</strong></p><ol><li><strong><a href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/description/">17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></li></ol><h2 id="ğŸ’¡å­é›†å‹å›æº¯"><a href="#ğŸ’¡å­é›†å‹å›æº¯" class="headerlink" title="ğŸ’¡å­é›†å‹å›æº¯"></a>ğŸ’¡å­é›†å‹å›æº¯</h2><details class="folding-tag" blue><summary> å­é›† </summary>              <div class='content'>              <p><strong><a href="https://leetcode.cn/problems/subsets/">78. å­é›† - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><p>ä¸‹é¢æ˜¯è§£å†³æ­¤ç±»å‹é—®é¢˜çš„ä¸¤ç§æ¨¡æ¿ï¼š</p><div class="tabs" id="å­é›†"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å­é›†-1">ç«™åœ¨è¾“å…¥çš„è§†è§’</button></li><li class="tab"><button type="button" data-href="#å­é›†-2">ç«™åœ¨ç­”æ¡ˆçš„è§†è§’</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å­é›†-1"><p>æ¯ä¸ªå…ƒç´ å¯ä»¥é€‰&#x2F;ä¸é€‰</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/21.png" alt="1"></p><p><strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">subsets</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        ans = []    <span class="comment"># åˆå§‹åŒ–æœ€ç»ˆç»“æœ</span></span><br><span class="line">        path = []   <span class="comment"># åˆå§‹åŒ–ä¸­é—´ç»“æœ</span></span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i</span>):</span><br><span class="line">            <span class="keyword">if</span> i==n:    <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">                <span class="comment"># pathæ˜¯å…¨å±€å˜é‡æ˜¯å˜åŒ–çš„ï¼Œæ‰€æœ‰pythonè¦copyä¸€ä¸‹</span></span><br><span class="line">                ans.append(path.copy())</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="comment"># ä¸é€‰ç¬¬iä¸ªæ•°</span></span><br><span class="line">            dfs(i+<span class="number">1</span>)    <span class="comment"># ç›´æ¥å¾€ä¸‹é€’å½’</span></span><br><span class="line">            <span class="comment"># é€‰ç¬¬iä¸ªæ•°</span></span><br><span class="line">            path.append(nums[i])</span><br><span class="line">            dfs(i+<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># è¿”å›ä¸Šä¸€æ­¥çš„çŠ¶æ€</span></span><br><span class="line">            path.pop()</span><br><span class="line">        dfs(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong>æ¯ä¸ªå…ƒç´ åªæœ‰é€‰å’Œä¸é€‰ä¸¤ç§çŠ¶æ€ï¼Œæ‰€æœ‰$O(2^N)$ï¼Œcopy()çš„æ—¶é—´æ˜¯$O(n)$ï¼Œæ‰€æœ‰æ—¶é—´å¤æ‚åº¦å°±æ˜¯$O(n*2^n)$</p><p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>$O(n)$</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å­é›†-2"><p>æ¯æ¬¡å¿…é¡»é€‰ä¸€ä¸ªæ•°ï¼Œæšä¸¾ç­”æ¡ˆçš„ç¬¬ä¸€ä¸ªæ•°é€‰è°ï¼Œç¬¬äºŒä¸ªæ•°é€‰è°</p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/22.png" alt="1"></p><p><strong>codeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">subsets</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        ans = []    <span class="comment"># åˆå§‹åŒ–æœ€ç»ˆç»“æœ</span></span><br><span class="line">        path = []   <span class="comment"># åˆå§‹åŒ–ä¸­é—´ç»“æœ</span></span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i</span>):</span><br><span class="line">            ans.append(path.copy())</span><br><span class="line">            <span class="keyword">if</span> i==n:    <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i,n):</span><br><span class="line">                path.append(nums[j])</span><br><span class="line">                dfs(j+<span class="number">1</span>)</span><br><span class="line">                path.pop()</span><br><span class="line">        dfs(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><p><strong>ç›¸å…³ä¹ é¢˜ï¼š</strong></p><ul><li><p><strong><a href="https://leetcode.cn/problems/palindrome-partitioning/">131. åˆ†å‰²å›æ–‡ä¸² - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p></li><li><p><strong><a href="https://leetcode.cn/problems/letter-case-permutation/">784. å­—æ¯å¤§å°å†™å…¨æ’åˆ— - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p></li><li><p><strong><a href="https://leetcode.cn/problems/maximum-number-of-achievable-transfer-requests/">1601. æœ€å¤šå¯è¾¾æˆçš„æ¢æ¥¼è¯·æ±‚æ•°ç›® - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p></li><li><p><strong><a href="https://leetcode.cn/problems/maximum-rows-covered-by-columns/">2397. è¢«åˆ—è¦†ç›–çš„æœ€å¤šè¡Œæ•° - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><blockquote><p>ä½è¿ç®—</p></blockquote></li><li><p><strong><a href="https://leetcode.cn/problems/additive-number/">306. ç´¯åŠ æ•° - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p></li></ul><h2 id="ğŸ’¡ç»„åˆå‹å›æº¯"><a href="#ğŸ’¡ç»„åˆå‹å›æº¯" class="headerlink" title="ğŸ’¡ç»„åˆå‹å›æº¯"></a>ğŸ’¡ç»„åˆå‹å›æº¯</h2><p><strong><a href="https://www.bilibili.com/video/BV1xG4y1F7nC/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">å›æº¯ç®—æ³•å¥—è·¯â‘¡ç»„åˆå‹å›æº¯+å‰ªæã€åŸºç¡€ç®—æ³•ç²¾è®² 15ã€‘_å“”å“©å“”å“©_bilibili</a></strong></p><p>ç»„åˆå‹å›æº¯å°±æ˜¯ä»ä¸€ç»„ä¸œè¥¿ä¸­ï¼Œé€‰å‡ºå›ºå®šçš„å‡ ç»„ï¼Œè€Œä¸æ˜¯é€‰å‡ºå…¨éƒ¨çš„å­é›†ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™é“é¢˜ï¼š</p><details class="folding-tag" blue><summary> ç»„åˆ </summary>              <div class='content'>              <p>ğŸ“Œ<strong>é¢˜ç›®ï¼š</strong></p><p><strong><a href="https://leetcode.cn/problems/combinations/">77. ç»„åˆ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰</a></strong></p><p>ç»™å®šä¸¤ä¸ªæ•´æ•° <code>n</code> å’Œ <code>k</code>ï¼Œè¿”å›èŒƒå›´ <code>[1, n]</code> ä¸­æ‰€æœ‰å¯èƒ½çš„ <code>k</code> ä¸ªæ•°çš„ç»„åˆã€‚</p><p><strong>ğŸ“Œæ€è·¯ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/23.png" alt="1"></p><p>è¿™é¢˜å°±æ˜¯å­é›†å‹é—®é¢˜çš„ä¸€ç§å»¶ç”³ï¼Œ</p><p>ç›¸æ¯”äºå­é›†é—®é¢˜ï¼Œç»„åˆé—®é¢˜æˆ‘ä»¬å¯ä»¥åšä¸€äº›é¢å¤–çš„ä¼˜åŒ–ï¼Œå›¾ä¸­æ‰€ç¤ºï¼š</p><p>åœ¨ä¸‰ä¸ªæ•°ä¸­é€‰ä¸‰ä¸ªæ•°ç»„åˆï¼Œæˆ‘ä»¬ä»åå¾€å‰é€’å½’ï¼Œé‚£ä¹ˆå½“ç¬¬ä¸€ä¸ªæ•°ä¸æ˜¯3ï¼Œè€Œæ˜¯2çš„æ—¶å€™ï¼Œå°±ä¸ç”¨å¾€ä¸‹é€’å½’äº†ï¼›</p><p>åœ¨ä¸‰ä¸ªæ•°ä¸­é€‰ä¸¤ä¸ªæ•°ç»„åˆï¼Œé‚£ä¹ˆå½“é•¿åº¦å·²ç»æ˜¯2äº†ï¼Œä¹Ÿä¸éœ€è¦å¾€ä¸‹é€’å½’äº†</p><blockquote><p>å‡è®¾è·¯å¾„é•¿åº¦ä¸º<code>m</code>ï¼Œé‚£ä¹ˆå°±è¿˜éœ€è¦é€‰æ‹©<code>d-m</code>ä¸ªæ•°ã€‚</p><p>ç”±äºæˆ‘ä»¬æ˜¯ä»å¤§åˆ°å°æšä¸¾çš„ï¼Œé‚£ä¹ˆè®¾å½“å‰éœ€è¦ä»<code>[1,i]</code>è¿™<code>i</code>ä¸ªæ•°ä¸­é€‰æ•°ï¼Œ</p><p>å¦‚æœ<code>i&lt;d</code>ï¼Œé‚£ä¹ˆå¿…ç„¶æ— æ³•é€‰å‡º<code>k</code>ä¸ªæ•°ï¼Œä¸å†éœ€è¦é€’å½’ï¼Œ</p><p>è¿™å°±æ˜¯ä¸€ç§å‰ªææŠ€å·§ã€‚</p><ul><li>å°±æ˜¯æˆ‘ä»¬å‰ªæ‰äº†è¿™æ£µæœç´¢æ ‘çš„ä¸€äº›åˆ†æ”¯ï¼Œé€šè¿‡å‰ªæï¼Œæˆ‘ä»¬å¯ä»¥ç¼©å°æœç´¢æ ‘çš„è§„æ¨¡ã€‚</li><li><strong><a href="https://zhuanlan.zhihu.com/p/345181624">ä»€ä¹ˆæ˜¯ç®—æ³•ä¸­çš„å‰ªæï¼Ÿ - çŸ¥ä¹ (zhihu.com)</a></strong></li></ul></blockquote><p>ğŸ“Œ<strong>codeï¼š</strong></p><div class="tabs" id="code"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#code-1">ä»ç­”æ¡ˆçš„è§’åº¦</button></li><li class="tab"><button type="button" data-href="#code-2">ä»è¾“å…¥çš„è§’åº¦ã€é€‰/ä¸é€‰ã€‘</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="code-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">combine</span>(<span class="params">self, n: <span class="built_in">int</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        ans = []</span><br><span class="line">        path = []</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i</span>):</span><br><span class="line">            <span class="comment"># å‰ªæ</span></span><br><span class="line">            d = k - <span class="built_in">len</span>(path)</span><br><span class="line">            <span class="keyword">if</span> i&lt;d:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(path) ==k:</span><br><span class="line">                ans.append(path.copy())</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="comment"># ä»ç»“æœçš„è§’åº¦åˆ†æ</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i,<span class="number">0</span>,-<span class="number">1</span>):</span><br><span class="line">                path.append(j)</span><br><span class="line">                dfs(j-<span class="number">1</span>)</span><br><span class="line">                path.pop()</span><br><span class="line">        dfs(n)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="code-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">combine</span>(<span class="params">self, n: <span class="built_in">int</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        ans = []</span><br><span class="line">        path = []</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i</span>):</span><br><span class="line">            d = k - <span class="built_in">len</span>(path)</span><br><span class="line">            <span class="keyword">if</span> i&lt;d:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="comment"># è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(path) == k:</span><br><span class="line">                ans.append(path.copy())</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="comment"># ä»è¾“å…¥çš„è§’åº¦</span></span><br><span class="line">            dfs(i-<span class="number">1</span>)</span><br><span class="line">            path.append(i)</span><br><span class="line">            dfs(i-<span class="number">1</span>)</span><br><span class="line">            path.pop()</span><br><span class="line"></span><br><span class="line">        dfs(n)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>ğŸ“Œ<strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/23.png" alt="1"></p><p>æˆ‘ä»¬æŠŠæ¯ä¸ªå¶å­å•ç‹¬çœ‹ï¼Œå°±æ˜¯å¶å­çš„ä¸ªæ•°*æ ¹åˆ°å¶å­çš„è·¯å¾„é•¿åº¦ï¼Œ</p><blockquote><p>å¶å­ä¸ªæ•°å°±æ˜¯ä»nä¸ªæ•°ä¸­é€‰kä¸ªæ•°çš„ç»„åˆçš„ä¸ªæ•°</p><p>è·¯å¾„é•¿åº¦å°±æ˜¯é€’å½’çš„æ·±åº¦ï¼Œä¹Ÿå°±æ˜¯k</p></blockquote><p>$O(kC^k_n)$</p><p>ç©ºé—´å¤æ‚åº¦ä¸º$O(k)$</p>              </div>            </details><p><strong>ç›¸å…³é¢˜ç›®ï¼š</strong></p><ul><li><strong><a href="https://leetcode.cn/problems/combination-sum-iii/description/">216. ç»„åˆæ€»å’Œ III - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></strong></li><li><strong><a href="https://leetcode.cn/problems/generate-parentheses/">22. æ‹¬å·ç”Ÿæˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></strong></li><li><strong><a href="https://leetcode.cn/problems/remove-invalid-parentheses/">301. åˆ é™¤æ— æ•ˆçš„æ‹¬å· - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></strong></li></ul><h2 id="ğŸ’¡æ’åˆ—å‹å›æº¯"><a href="#ğŸ’¡æ’åˆ—å‹å›æº¯" class="headerlink" title="ğŸ’¡æ’åˆ—å‹å›æº¯"></a>ğŸ’¡æ’åˆ—å‹å›æº¯</h2><p><strong><a href="https://www.bilibili.com/video/BV1mY411D7f6/?spm_id_from=333.788&vd_source=e459c0ddead0fb5eb6a33630a090aa93">å›æº¯ç®—æ³•å¥—è·¯â‘¢æ’åˆ—å‹å›æº¯+Nçš‡åã€åŸºç¡€ç®—æ³•ç²¾è®² 16ã€‘_å“”å“©å“”å“©_bilibili</a></strong></p><details class="folding-tag" blue><summary> å…¨æ’åˆ— </summary>              <div class='content'>              <p><strong>ğŸ“Œé¢˜ç›®ï¼š<a href="https://leetcode.cn/problems/permutations/">46. å…¨æ’åˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></strong></p><p>ç›¸æ¯”ç»„åˆï¼Œæ’åˆ—å‹å›æº¯ä¸­ç­”æ¡ˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯é¡ºåºä¸åŒï¼Œæˆ‘ä»¬è¦çš„æ˜¯ç»™å‡ºä¸åŒçš„æ’åˆ—ç»„åˆã€‚</p><p>é‚£ä¹ˆ$n$ä¸ªæ•°å¿…æœ‰$n!$çš„æ’åˆ—ç»„åˆã€‚</p><p><strong>ğŸ“Œæ€è·¯ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/25.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/ACM/24.png" alt="1"></p><p>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªboolæ•°ç»„æ¥æ ‡è®°æ˜¯å¦å·²ç»æ·»åŠ åˆ°è·¯å¾„ä¸­äº†ã€è‡ªå·±å†™ä»£ç ~ã€‘</p><p><strong>ğŸ“Œcodeï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">permute</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        ans = []    <span class="comment"># ç»“æœ</span></span><br><span class="line">        path = []   <span class="comment"># ä¸­é—´è·¯å¾„</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i,s</span>):</span><br><span class="line">            <span class="keyword">if</span> i==n:    <span class="comment"># å…¨éƒ¨æ•°å­—æ’åˆ—å®Œ</span></span><br><span class="line">                ans.append(path.copy())     <span class="comment"># è·¯å¾„æ·»åŠ åˆ°ç»“æœä¸­</span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> s: <span class="comment"># æšä¸¾é›†åˆsä¸­æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæ·»åŠ åˆ°è·¯å¾„ä¸­</span></span><br><span class="line">                path.append(x)</span><br><span class="line">                dfs(i+<span class="number">1</span>,s-&#123;x&#125;)</span><br><span class="line">                path.pop()</span><br><span class="line">        dfs(<span class="number">0</span>,<span class="built_in">set</span>(nums))</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>              </div>            </details><p><strong>ç›¸å…³ä¹ é¢˜ï¼š</strong></p><ul><li><p><strong><a href="https://leetcode.cn/problems/n-queens/">51. N çš‡å - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></strong></p><blockquote><p><strong>å¤šåšå¤šåš</strong>â—â—â—</p><p>é¸½å·¢åŸç†ã€æŠ½å±‰åŸç†ã€‘</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’­ğŸ’¡ğŸˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºæ—¶é—´ç‰‡è½®è½¬çš„è¿›ç¨‹ç®¡ç†ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°</title>
      <link href="/2023/05/30/%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
      <url>/2023/05/30/%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/27.jpg" style="border-radius:10px" width="1000px"></img></p><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><details class="folding-tag" blue><summary> è®°å½• </summary>              <div class='content'>              <p>æœ¬ç¨‹åºæ˜¯å¤§äºŒä¸‹çš„æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªå¤§ä½œä¸šã€‚</p><p>æˆ‘çš„é¢˜ç›®æ˜¯<strong>åŸºäºæ—¶é—´ç‰‡è½®è½¬çš„è¿›ç¨‹ç®¡ç†ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°</strong>ã€‚</p><p>æœ¬ç¨‹åºé‡‡ç”¨<code>c</code>ä»£ç ï¼Œå®ç°äº†å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼Œè®°å½•ä¸€ä¸‹å•¦ï¼</p>              </div>            </details><h1 id="ä¸€ã€ç®—æ³•æˆ–åŸç†çš„å®ç°æ€æƒ³"><a href="#ä¸€ã€ç®—æ³•æˆ–åŸç†çš„å®ç°æ€æƒ³" class="headerlink" title="ä¸€ã€ç®—æ³•æˆ–åŸç†çš„å®ç°æ€æƒ³"></a>ä¸€ã€ç®—æ³•æˆ–åŸç†çš„å®ç°æ€æƒ³</h1><p>è¿›ç¨‹è°ƒåº¦ç³»ç»Ÿæ˜¯è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºå¤šä¸ªè¿›ç¨‹åˆ†é…CPUèµ„æºï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½èƒ½å¤Ÿå¾—åˆ°ä¸€å®šçš„æ—¶é—´ç‰‡ï¼Œä»è€Œå®ç°å¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œã€‚è¿›ç¨‹è°ƒåº¦ç³»ç»Ÿçš„è®¾è®¡å’Œå®ç°å¯¹äºè®¡ç®—æœºç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§æœ‰ç€é‡è¦çš„å½±å“ã€‚æœ¬ç³»ç»Ÿé‡‡ç”¨å…ˆæ¥å…ˆæœåŠ¡çš„è°ƒåº¦ç®—æ³•ï¼ŒæŒ‰ç…§è¿›ç¨‹åˆ°è¾¾ç³»ç»Ÿçš„æ—¶é—´æ¥è¿›è¡Œè°ƒåº¦ã€‚é¦–å…ˆåˆ°è¾¾çš„ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ï¼Œä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡åä¼šè¢«æ”¾å…¥é˜Ÿå°¾ï¼Œä»¥æ­¤å¾ªç¯æ‰§è¡Œï¼Œç›´è‡³æ‰€æœ‰çš„è¿›ç¨‹è¿è¡Œå®Œæ¯•ã€‚</p><p>åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæœ¬ç³»ç»Ÿå®šä¹‰äº†ä¸€ä¸ªè¿›ç¨‹ç»“æ„ä½“ï¼Œå…¶ä¸­åŒ…å«äº†è¿›ç¨‹åã€è¿›ç¨‹çš„åˆ°è¾¾æ—¶é—´ã€è¿›ç¨‹çš„è¿è¡Œæ—¶é—´ã€è¿›ç¨‹çš„å®Œæˆæ—¶é—´ã€è¿›ç¨‹è¿è¡Œçš„å‰©ä½™æ—¶é—´ã€è¿›ç¨‹çš„å‘¨è½¬æ—¶é—´ã€è¿›ç¨‹çš„å¸¦æƒå‘¨è½¬æ—¶é—´ã€‚</p><p>é¦–å…ˆæ ¹æ®è¿›ç¨‹çš„åˆ°è¾¾æ—¶é—´è¿›è¡Œæ’åºï¼Œä»¥æ­¤æ¥è¡¨ç¤ºæ¯ä¸ªè¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚åœ¨æ—¶é—´ç‰‡è½®è½¬è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è¿è¡Œå®Œæˆçš„è¿›ç¨‹åŠ å…¥åˆ°å®Œæˆé˜Ÿåˆ—ä¸­ï¼Œç„¶åæ ¹æ®å®Œæˆé˜Ÿåˆ—çš„å¤§å°æ¥åˆ¤æ–­æ˜¯å¦ç»§ç»­è½®è½¬ã€‚æˆ‘ä»¬å¯¹é˜Ÿåˆ—è¿›è¡Œå¾ªç¯ï¼Œæ ¹æ®æ¯ä¸ªè¿›ç¨‹çš„å‰©ä½™æ—¶é—´å’Œåˆ°è¾¾æ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦å¯¹æ­¤è¿›ç¨‹è¿›è¡Œè°ƒåº¦å¹¶è¿è¡Œã€‚</p><p><strong>è¾“å…¥ä¿¡æ¯ï¼š</strong></p><p>é¦–å…ˆè¾“å…¥è¿›ç¨‹ä¸ªæ•°å’Œæ—¶é—´ç‰‡çš„å¤§å°ã€‚</p><p>ç„¶åä¾æ¬¡è¾“å…¥è¿›ç¨‹ä¿¡æ¯ã€è¿›ç¨‹åã€åˆ°è¾¾æ—¶é—´ã€è¿è¡Œæ—¶é—´ã€‘</p><p><strong>è¾“å‡ºä¿¡æ¯ï¼š</strong></p><ul><li>è¿›ç¨‹çš„è°ƒåº¦è¿‡ç¨‹</li><li>è¿›ç¨‹çš„è°ƒåº¦åºåˆ—</li><li>è¿›ç¨‹çš„æœ€ç»ˆå®Œæˆåºåˆ—</li><li>è¿›ç¨‹çš„è¿›ç¨‹åã€åˆ°è¾¾æ—¶é—´ã€å®Œæˆæ—¶é—´ã€å‘¨è½¬æ—¶é—´ã€è¿è¡Œæ—¶é—´</li><li>è¿›ç¨‹ä¸ªæ•°ã€å¹³å‡å‘¨è½¬æ—¶é—´ã€å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´</li></ul><h1 id="äºŒã€ä»£ç "><a href="#äºŒã€ä»£ç " class="headerlink" title="äºŒã€ä»£ç "></a>äºŒã€ä»£ç </h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Process</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> name; <span class="comment">// è¿›ç¨‹å</span></span><br><span class="line">    <span class="type">int</span> arrive_time; <span class="comment">// åˆ°è¾¾æ—¶é—´</span></span><br><span class="line">    <span class="type">int</span> run_time; <span class="comment">// è¿è¡Œæ—¶é—´</span></span><br><span class="line">    <span class="type">int</span> finish_time; <span class="comment">// å®Œæˆæ—¶é—´</span></span><br><span class="line">    <span class="type">int</span> remain_time; <span class="comment">//å‰©ä½™æ—¶é—´</span></span><br><span class="line">    <span class="type">int</span> turnover_time; <span class="comment">// å‘¨è½¬æ—¶é—´</span></span><br><span class="line">    <span class="type">float</span> weighted_turnover_time; <span class="comment">// å¸¦æƒå‘¨è½¬æ—¶é—´</span></span><br><span class="line">&#125; Process;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> max_process_num;    <span class="comment">// è¿›ç¨‹ä¸ªæ•°</span></span><br><span class="line"><span class="type">int</span> time_quantum;   <span class="comment">// æ—¶é—´ç‰‡çš„å¤§å°</span></span><br><span class="line">Process process_queue[<span class="number">100</span>]; <span class="comment">// è¿›ç¨‹é˜Ÿåˆ—</span></span><br><span class="line">Process finish_process_queue[<span class="number">100</span>];  <span class="comment">// è¿›ç¨‹å®Œæˆé˜Ÿåˆ—</span></span><br><span class="line"><span class="type">int</span> finish_count = <span class="number">0</span>;   <span class="comment">// å®Œæˆçš„è¿›ç¨‹æ•°</span></span><br><span class="line"><span class="type">int</span> process_num = <span class="number">0</span>;    <span class="comment">// è¿›ç¨‹é˜Ÿåˆ—å¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹å­—ä½“é¢œè‰²</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">color</span><span class="params">(<span class="type">int</span> m)</span></span><br><span class="line">&#123;</span><br><span class="line">    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),m|<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰åˆ°è¾¾æ—¶é—´æ’åºã€é€‰æ‹©æ’åºã€‘</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">sort_by_arrive_time</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    Process temp;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; process_num - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; process_num; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (process_queue[i].arrive_time &gt; process_queue[j].arrive_time) &#123;</span><br><span class="line">                temp = process_queue[i];</span><br><span class="line">                process_queue[i] = process_queue[j];</span><br><span class="line">                process_queue[j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´ç‰‡è½®è½¬</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">time_slice_scheduling</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">int</span> time = <span class="number">0</span>; <span class="comment">// ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">    <span class="type">int</span> run_time; <span class="comment">// å½“å‰è¿›ç¨‹è¿è¡Œçš„æ—¶é—´ç‰‡é•¿åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; process_num; i++) &#123; <span class="comment">//åˆå§‹åŒ–æ¯ä¸ªè¿›ç¨‹å‰©ä½™çš„è¿è¡Œæ—¶é—´</span></span><br><span class="line">        process_queue[i].remain_time = process_queue[i].run_time;</span><br><span class="line">    &#125;</span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ—¶é—´ç‰‡è½®è½¬ç®—æ³•è¿‡ç¨‹ã€è¿›ç¨‹è°ƒåº¦åºåˆ—ã€‘\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¿›ç¨‹å\tåˆ°è¾¾æ—¶é—´\tè¿è¡Œæ—¶é—´\tå‰©ä½™æ—¶é—´\tå½“å‰ç³»ç»Ÿæ—¶é—´\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒåº¦è¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">while</span> (finish_count &lt; process_num) &#123;    <span class="comment">// åªæœ‰å½“æ‰€æœ‰è¿›ç¨‹éƒ½è¿è¡Œå®Œæˆæ‰ä¼šåœæ­¢è°ƒåº¦</span></span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;   <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰è¿›ç¨‹è¿è¡Œ</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; process_num; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (process_queue[i].remain_time &gt; <span class="number">0</span> &amp;&amp; process_queue[i].arrive_time&lt;=time) &#123;   <span class="comment">// é¦–å…ˆåˆ¤æ–­å½“å‰è¿›ç¨‹å‰©ä½™çš„è¿è¡Œæ—¶é—´æ˜¯å¦å¤§äº0ï¼Œä¸å¤§äº0è¡¨ç¤ºå½“å‰è¿›ç¨‹å·²ç»ç»“æŸäº†ï¼Œåˆ©ç”¨æ­¤å…³ç³»æ¥å¾…æ›¿å…¥é˜Ÿå‡ºé˜Ÿçš„è¿‡ç¨‹;ç„¶ååˆ¤æ–­å½“å‰è¿›ç¨‹æ˜¯å¦å·²ç»åˆ°è¾¾</span></span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (process_queue[i].remain_time &gt; time_quantum) &#123;    <span class="comment">// åˆ¤æ–­å½“å‰è¿›ç¨‹å‰©ä½™çš„è¿è¡Œæ—¶é—´æ˜¯å¦å¤§äºæ—¶é—´ç‰‡çš„æ—¶é—´</span></span><br><span class="line">                    run_time = time_quantum;    <span class="comment">// å¤§äºå°±æŒ‰è¿è¡Œå®Œæ•´ä¸ªæ—¶é—´ç‰‡</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    run_time = process_queue[i].remain_time;  <span class="comment">// å°äºå°±æ ¹æ®å‰©ä½™æ—¶é—´è¿è¡Œ</span></span><br><span class="line">                &#125;</span><br><span class="line">                process_queue[i].remain_time -= run_time;</span><br><span class="line">                time += run_time;</span><br><span class="line">                <span class="keyword">if</span> (process_queue[i].remain_time == <span class="number">0</span>) &#123;  <span class="comment">// è¡¨ç¤ºå½“å‰çš„è¿›ç¨‹è¿è¡Œå®Œæˆ</span></span><br><span class="line">                    process_queue[i].finish_time = time;    <span class="comment">// è®°å½•å½“å‰è¿›ç¨‹çš„å®Œæˆæ—¶é—´</span></span><br><span class="line">                    process_queue[i].turnover_time = process_queue[i].finish_time - process_queue[i].arrive_time;   <span class="comment">// è®°å½•å½“å‰è¿›ç¨‹çš„å‘¨è½¬æ—¶é—´</span></span><br><span class="line">                    process_queue[i].weighted_turnover_time = (<span class="type">float</span>) process_queue[i].turnover_time / process_queue[i].run_time;   <span class="comment">// è®°å½•å½“å‰è¿›ç¨‹çš„å¸¦æƒå‘¨è½¬æ—¶é—´</span></span><br><span class="line">                    finish_process_queue[finish_count] = process_queue[i];  <span class="comment">// å°†å½“å‰è¿›ç¨‹åŠ å…¥åˆ°å®Œæˆé˜Ÿåˆ—</span></span><br><span class="line">                    finish_count++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æ‰“å°å½“å‰æ‰§è¡Œçš„è¿›ç¨‹</span></span><br><span class="line">                color(<span class="number">3</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%c\t%d\t\t%d\t\t%d\t\t%d\n&quot;</span>, process_queue[i].name, process_queue[i].arrive_time, process_queue[i].run_time, process_queue[i].remain_time ,time);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">            time+=<span class="number">1</span>;    <span class="comment">// æœªæœ‰è¿›ç¨‹åˆ°è¾¾ï¼Œå·²ç»åˆ°è¾¾çš„è¿›ç¨‹è¿è¡Œå®Œæ¯•ï¼Œé‚£ä¹ˆç³»ç»Ÿæ—¶é—´è‡ªå¢</span></span><br><span class="line">            color(<span class="number">3</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-\t-\t\t-\t\t-\t\t%d\n&quot;</span>, time); <span class="comment">// æœªæœ‰è¿›ç¨‹è°ƒåº¦è¾“å‡ºâ€-â€œè¡¨ç¤º</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å…¥è¿›ç¨‹ä¿¡æ¯</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">input_process_info</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥è¿›ç¨‹ä¸ªæ•°å’Œæ—¶é—´ç‰‡å¤§å°ï¼š\n&quot;</span>);</span><br><span class="line">    color(<span class="number">7</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;max_process_num, &amp;time_quantum);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    getchar();  <span class="comment">// å°†è¾“å…¥ç¼“å†²åŒºä¸­çš„æ¢è¡Œç¬¦è¯»å–æ‰</span></span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥è¿›ç¨‹ä¿¡æ¯ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¿›ç¨‹å åˆ°è¾¾æ—¶é—´ è¿è¡Œæ—¶é—´\n&quot;</span>);</span><br><span class="line">    color(<span class="number">7</span>);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; max_process_num; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%c %d %d&quot;</span>, &amp;process_queue[i].name, &amp;process_queue[i].arrive_time, &amp;process_queue[i].run_time);</span><br><span class="line">        process_queue[i].finish_time = <span class="number">0</span>;</span><br><span class="line">        process_queue[i].turnover_time = <span class="number">0</span>;</span><br><span class="line">        process_queue[i].weighted_turnover_time = <span class="number">0</span>;</span><br><span class="line">        process_num++;</span><br><span class="line">        getchar();  <span class="comment">// å°†è¾“å…¥ç¼“å†²åŒºä¸­çš„æ¢è¡Œç¬¦è¯»å–æ‰</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºè¿›ç¨‹è°ƒåº¦åºåˆ—</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">output_process_sequence</span><span class="params">()</span>&#123;</span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¿›ç¨‹æœ€ç»ˆå®Œæˆåºåˆ—\n&quot;</span>);</span><br><span class="line">    color(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt;= finish_count<span class="number">-1</span>;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j==finish_count<span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,finish_process_queue[j].name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c--&gt;&quot;</span>,finish_process_queue[j].name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºè¿›ç¨‹è°ƒåº¦ä¿¡æ¯</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">output_process_info</span><span class="params">()</span>&#123;</span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¿›ç¨‹è°ƒåº¦ç»“æœ\n&quot;</span>);</span><br><span class="line">    <span class="type">float</span> avg_turnover_time = <span class="number">0</span>;    <span class="comment">// å¹³å‡å‘¨è½¬æ—¶é—´</span></span><br><span class="line">    <span class="type">float</span> avg_weighted_turnover_time = <span class="number">0</span>;   <span class="comment">// å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¿›ç¨‹å\tåˆ°è¾¾æ—¶é—´\tè¿è¡Œæ—¶é—´\tå®Œæˆæ—¶é—´\tå‘¨è½¬æ—¶é—´\tå¸¦æƒå‘¨è½¬æ—¶é—´\n&quot;</span>);</span><br><span class="line">    color(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt;= finish_count<span class="number">-1</span>;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        avg_turnover_time += finish_process_queue[j].turnover_time;</span><br><span class="line">        avg_weighted_turnover_time += finish_process_queue[j].weighted_turnover_time;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c\t%d\t\t%d\t\t%d\t\t%d\t\t%.2f\n&quot;</span>, finish_process_queue[j].name, finish_process_queue[j].arrive_time, finish_process_queue[j].run_time, finish_process_queue[j].finish_time, finish_process_queue[j].turnover_time, finish_process_queue[j].weighted_turnover_time);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    avg_turnover_time /= finish_count;</span><br><span class="line">    avg_weighted_turnover_time /= finish_count;</span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¿›ç¨‹ä¸ªæ•°ï¼š&quot;</span>);</span><br><span class="line">    color(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,finish_count);</span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å¹³å‡å‘¨è½¬æ—¶é—´ï¼š&quot;</span>);</span><br><span class="line">    color(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2f\n&quot;</span>,avg_turnover_time);</span><br><span class="line">    color(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´ï¼š&quot;</span>);</span><br><span class="line">    color(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2f\n&quot;</span>,avg_weighted_turnover_time);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    input_process_info();   <span class="comment">// è¾“å…¥è¿›ç¨‹ä¿¡æ¯</span></span><br><span class="line">    sort_by_arrive_time();  <span class="comment">// æŒ‰åˆ°è¾¾æ—¶é—´æ’åºã€é€‰æ‹©æ’åºã€‘</span></span><br><span class="line">    time_slice_scheduling();    <span class="comment">// æ—¶é—´ç‰‡è½®è½¬</span></span><br><span class="line">    output_process_sequence();  <span class="comment">// è¾“å‡ºè¿›ç¨‹è°ƒåº¦åºåˆ—</span></span><br><span class="line">    output_process_info();  <span class="comment">// è¾“å‡ºè¿›ç¨‹è°ƒåº¦ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€ä¸€äº›æµ‹è¯•æ ·ä¾‹"><a href="#ä¸‰ã€ä¸€äº›æµ‹è¯•æ ·ä¾‹" class="headerlink" title="ä¸‰ã€ä¸€äº›æµ‹è¯•æ ·ä¾‹"></a>ä¸‰ã€ä¸€äº›æµ‹è¯•æ ·ä¾‹</h1><p><strong>æµ‹è¯•æ ·ä¾‹1ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/7.png" alt="æµ‹è¯•æ ·ä¾‹1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/8.png" alt="æµ‹è¯•æ ·ä¾‹1"></p><p><strong>æµ‹è¯•æ ·ä¾‹2</strong>ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/9.png" alt="æµ‹è¯•æ ·ä¾‹2"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/10.png" alt="æµ‹è¯•æ ·ä¾‹2"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonå››å¤§æ³•å®</title>
      <link href="/2023/05/29/Python%E5%9B%9B%E5%A4%A7%E6%B3%95%E5%AE%9D/"/>
      <url>/2023/05/29/Python%E5%9B%9B%E5%A4%A7%E6%B3%95%E5%AE%9D/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/25.jpg" style="border-radius:10px" width="1000px"></img></p><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><blockquote><ul><li>åˆ—è¡¨ï¼ˆListï¼‰æ˜¯ä¸€ç§æœ‰åºå’Œå¯æ›´æ”¹çš„é›†åˆã€‚å…è®¸é‡å¤çš„æˆå‘˜ã€‚(å¯å˜åºåˆ—)</li><li>å…ƒç»„ï¼ˆTupleï¼‰æ˜¯ä¸€ç§æœ‰åºä¸”ä¸å¯æ›´æ”¹çš„é›†åˆã€‚å…è®¸é‡å¤çš„æˆå‘˜ã€‚(ä¸å¯å˜åºåˆ—)</li><li>é›†åˆï¼ˆSetï¼‰æ˜¯ä¸€ä¸ªæ— åºå’Œæ— ç´¢å¼•çš„é›†åˆã€‚æ²¡æœ‰é‡å¤çš„æˆå‘˜ã€‚(å¯å˜åºåˆ—)</li><li>è¯å…¸ï¼ˆDictionaryï¼‰æ˜¯ä¸€ä¸ªæ— åºï¼Œå¯å˜å’Œæœ‰ç´¢å¼•çš„é›†åˆã€‚æ²¡æœ‰é‡å¤çš„æˆå‘˜ã€‚(å¯å˜åºåˆ—)</li></ul></blockquote><h1 id="ï¼ˆä¸€ï¼‰åˆ—è¡¨ï¼-å¢åˆ æ”¹æŸ¥"><a href="#ï¼ˆä¸€ï¼‰åˆ—è¡¨ï¼-å¢åˆ æ”¹æŸ¥" class="headerlink" title="ï¼ˆä¸€ï¼‰åˆ—è¡¨ï¼(å¢åˆ æ”¹æŸ¥)"></a>ï¼ˆä¸€ï¼‰åˆ—è¡¨ï¼(å¢åˆ æ”¹æŸ¥)</h1><h2 id="1-åˆ—è¡¨å­˜å‚¨åŸç†ï¼ˆæ ¹æ®éœ€è¦åŠ¨æ€åˆ†é…å›æ”¶å†…å­˜ï¼‰"><a href="#1-åˆ—è¡¨å­˜å‚¨åŸç†ï¼ˆæ ¹æ®éœ€è¦åŠ¨æ€åˆ†é…å›æ”¶å†…å­˜ï¼‰" class="headerlink" title="1.åˆ—è¡¨å­˜å‚¨åŸç†ï¼ˆæ ¹æ®éœ€è¦åŠ¨æ€åˆ†é…å›æ”¶å†…å­˜ï¼‰"></a>1.åˆ—è¡¨å­˜å‚¨åŸç†ï¼ˆæ ¹æ®éœ€è¦åŠ¨æ€åˆ†é…å›æ”¶å†…å­˜ï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥æ‰¾åˆ—è¡¨å…ƒç´ çš„ç´¢å¼•(å¦‚æœåˆ—è¡¨ä¸­æœ‰ç›¸åŒçš„å…ƒç´ åˆ™è¿”å›ç¬¬ä¸€ä¸ªï¼›æ²¡æœ‰åˆ™æŠ¥é”™ValueError)</span><br><span class="line">thisList = [&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;,&quot;apple&quot;]</span><br><span class="line">print(thisList.index(&#x27;apple&#x27;))</span><br><span class="line"># å¯ä»¥åœ¨æŒ‡å®šstartå’Œstopä¹‹é—´è¿›è¡ŒæŸ¥æ‰¾</span><br><span class="line"># index(obj,start,stop)ï¼ˆä¸åŒ…æ‹¬stopï¼‰</span><br><span class="line">print(thisList.index(&#x27;apple&#x27;,1,4))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># è·å–åˆ—è¡¨ä¸­å¤šä¸ªå…ƒç´ â€”â€”â€”â€”åˆ‡ç‰‡æ“ä½œ(ä¸åŒ…æ‹¬stop)</span><br><span class="line"># list[start,stop,step](çœç•¥æ­¥é•¿ï¼Œé»˜è®¤æ­¥é•¿ä¸ºä¸€)</span><br><span class="line">list = [1,2,3,4,5,6,7,8,9]</span><br><span class="line">print(list[1:6:1])</span><br><span class="line"># åˆ—è¡¨é€†åºï¼ˆstepä¸ºè´Ÿæ•°æ—¶ï¼Œåˆ—è¡¨é€†åºï¼‰</span><br><span class="line">print(&quot;åŸåˆ—è¡¨&quot;,list)</span><br><span class="line">print(list[::-1])</span><br><span class="line">print(list[8::-1])</span><br></pre></td></tr></table></figure><h2 id="2-åˆ—è¡¨å…ƒç´ çš„å¢åŠ æ“ä½œ"><a href="#2-åˆ—è¡¨å…ƒç´ çš„å¢åŠ æ“ä½œ" class="headerlink" title="2.åˆ—è¡¨å…ƒç´ çš„å¢åŠ æ“ä½œ"></a>2.åˆ—è¡¨å…ƒç´ çš„å¢åŠ æ“ä½œ</h2><table><thead><tr><th>æ–¹æ³•&#x2F;å…¶ä»–</th><th>æ“ä½œæè¿°</th></tr></thead><tbody><tr><td>append()</td><td>åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>extend()</td><td>åœ¨åˆ—è¡¨çš„æœ«å°¾è‡³å°‘æ·»åŠ ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>insert()</td><td>åœ¨åˆ—è¡¨çš„ä»»æ„ä½ç½®æ·»åŠ ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>åˆ‡ç‰‡</td><td>åœ¨åˆ—è¡¨ä»»æ„ä¸€ä¸ªä½ç½®è‡³å°‘æ·»åŠ ä¸€ä¸ªå…ƒç´ </td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># å‘åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ </span><br><span class="line">lst1 = [10,20,30]</span><br><span class="line">print(lst1)                 #[10, 20, 30]</span><br><span class="line">lst1.append(100)        </span><br><span class="line">print(lst1)                 #[10, 20, 30, 100]</span><br><span class="line">lst2 = [&quot;hello&quot;,&quot;world&quot;]</span><br><span class="line">lst3 = [&quot;hello&quot;,&quot;world&quot;]</span><br><span class="line">lstAdd = [&quot;æˆ‘æ˜¯&quot;,&quot;äºå›½é¾™&quot;]</span><br><span class="line">lst2.append(lstAdd)         #å°†lstAddä½œä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°lst2çš„æœ«å°¾</span><br><span class="line">print(lst2)                 #[&#x27;hello&#x27;, &#x27;world&#x27;, [&#x27;æˆ‘æ˜¯&#x27;, &#x27;äºå›½é¾™&#x27;]]</span><br><span class="line">lst3.extend(lstAdd)         #å‘åˆ—è¡¨çš„æœ«å°¾ä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªå…ƒç´ </span><br><span class="line">print(lst3)                 #[&#x27;hello&#x27;, &#x27;world&#x27;, &#x27;æˆ‘æ˜¯&#x27;, &#x27;äºå›½é¾™&#x27;]</span><br><span class="line"># insert åœ¨åˆ—è¡¨çš„ä»»æ„ä½ç½®ä¸Šæ·»åŠ ä¸€ä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># åˆ‡ç‰‡æ·»åŠ (åœ¨ä»»æ„ä½ç½®æ·»åŠ nä¸ªå…ƒç´ )</span><br><span class="line">lst4 = [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;]</span><br><span class="line">lst5 = [&quot;6&quot;,&quot;7&quot;,&quot;8&quot;]</span><br><span class="line">lst4[3:] = lst5</span><br><span class="line">print(lst4)                 #[&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;6&#x27;, &#x27;7&#x27;, &#x27;8&#x27;]</span><br></pre></td></tr></table></figure><h2 id="3-åˆ—è¡¨å…ƒç´ çš„æŸ¥è¯¢æ“ä½œï¼š"><a href="#3-åˆ—è¡¨å…ƒç´ çš„æŸ¥è¯¢æ“ä½œï¼š" class="headerlink" title="3.åˆ—è¡¨å…ƒç´ çš„æŸ¥è¯¢æ“ä½œï¼š"></a>3.åˆ—è¡¨å…ƒç´ çš„æŸ¥è¯¢æ“ä½œï¼š</h2><ul><li><p>åˆ¤æ–­æŒ‡å®šå…ƒç´ åœ¨åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨ï¼ˆin ï¼› not inï¼‰</p></li><li><p>åˆ—è¡¨å…ƒç´ çš„éå†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">thislist = [&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;]</span><br><span class="line">for x in thislist:</span><br><span class="line">  print(x)</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-åˆ—è¡¨å…ƒç´ çš„åˆ é™¤æ“ä½œ"><a href="#4-åˆ—è¡¨å…ƒç´ çš„åˆ é™¤æ“ä½œ" class="headerlink" title="4.åˆ—è¡¨å…ƒç´ çš„åˆ é™¤æ“ä½œ"></a>4.åˆ—è¡¨å…ƒç´ çš„åˆ é™¤æ“ä½œ</h2><table><thead><tr><th>æ–¹æ³•&#x2F;å…¶ä»–</th><th>æ“ä½œæè¿°</th></tr></thead><tbody><tr><td>remove()</td><td>ä¸€æ¬¡åˆ é™¤ä¸€ä¸ªå…ƒç´ </td></tr><tr><td></td><td>é‡å¤å…ƒç´ åªåˆ é™¤ç¬¬ä¸€ä¸ª</td></tr><tr><td></td><td>å…ƒç´ ä¸å­˜åœ¨æŠ›å‡ºValueError</td></tr><tr><td>pop()</td><td>åˆ é™¤ä¸€ä¸ªæŒ‡å®šç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´ </td></tr><tr><td></td><td>æŒ‡å®šç´¢å¼•ä¸å­˜åœ¨æŠ›å‡ºIndexError</td></tr><tr><td></td><td>ä¸æŒ‡å®šç´¢å¼•ï¼Œåˆ é™¤åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td>åˆ‡ç‰‡</td><td>ä¸€æ¬¡è‡³å°‘åˆ é™¤ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>clear()</td><td>æ¸…ç©ºåˆ—è¡¨</td></tr><tr><td>del()</td><td>åˆ é™¤åˆ—è¡¨</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># åˆ‡ç‰‡åˆ é™¤ï¼Œä¸äº§ç”Ÿæ–°çš„åˆ—è¡¨å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">lst = [1,2,3,4,5,6]</span><br><span class="line">lst[1:5] = []</span><br><span class="line">print(lst)</span><br></pre></td></tr></table></figure><h2 id="5-åˆ—è¡¨å…ƒç´ çš„ä¿®æ”¹æ“ä½œ"><a href="#5-åˆ—è¡¨å…ƒç´ çš„ä¿®æ”¹æ“ä½œ" class="headerlink" title="5.åˆ—è¡¨å…ƒç´ çš„ä¿®æ”¹æ“ä½œ"></a>5.åˆ—è¡¨å…ƒç´ çš„ä¿®æ”¹æ“ä½œ</h2><ul><li><p>ä¸ºæŒ‡å®šç´¢å¼•å…ƒç´ èµ‹äºˆä¸€ä¸ªæ–°å€¼</p></li><li><p>ä¸ºæŒ‡å®šçš„åˆ‡ç‰‡èµ‹äºˆä¸€ä¸ªæ–°å€¼</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lst = [1,2,3,4,5]</span><br><span class="line"># ä¸€æ¬¡ä¿®æ”¹ä¸€ä¸ªå€¼</span><br><span class="line">lst[2] = 30</span><br><span class="line">print(lst)              # [1, 2, 30, 4, 5]</span><br><span class="line"># åˆ‡ç‰‡ä¿®æ”¹</span><br><span class="line">lst[1:3] = [20,30,40,50,60]</span><br><span class="line">print(lst)              # [1, 20, 30, 40, 50, 60, 4, 5]</span><br></pre></td></tr></table></figure><h2 id="6-åˆ—è¡¨å…ƒç´ çš„æ’åºæ“ä½œ"><a href="#6-åˆ—è¡¨å…ƒç´ çš„æ’åºæ“ä½œ" class="headerlink" title="6.åˆ—è¡¨å…ƒç´ çš„æ’åºæ“ä½œ"></a>6.åˆ—è¡¨å…ƒç´ çš„æ’åºæ“ä½œ</h2><ul><li><p>è°ƒç”¨<mark>sort()</mark>æ–¹æ³•ï¼Œåˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ é»˜è®¤æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºè¿›è¡Œæ’åºï¼Œå¯ä»¥æŒ‡å®š reverse &#x3D; True ,è¿›è¡Œé™åºæ’åºï¼ˆåŸåˆ—è¡¨æ”¹å˜ï¼Œä¸ä¼šäº§ç”Ÿæ–°çš„åˆ—è¡¨ï¼‰</p></li><li><p>è°ƒç”¨å†…ç½®å‡½æ•° <mark>sorted()</mark>,å¯ä»¥æŒ‡å®š reverse &#x3D; True ,è¿›è¡Œé™åºæ’åºï¼ŒåŸåˆ—è¡¨ä¸å‘ç”Ÿæ”¹å˜ï¼ˆä¼šäº§ç”Ÿæ–°çš„åˆ—è¡¨ï¼‰</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># è°ƒç”¨sort()æ–¹æ³•</span><br><span class="line"># åŸåˆ—è¡¨</span><br><span class="line">lst1 = [10,3,4,34]</span><br><span class="line">print(lst1)          # [10, 3, 4, 34]</span><br><span class="line"># sort()æ–¹æ³•å‡åºæ’åº</span><br><span class="line">lst1.sort()</span><br><span class="line">print(lst1)          # [3, 4, 10, 34]</span><br><span class="line"># sort()æ–¹æ³•é™åºæ’åº</span><br><span class="line">lst1.sort(reverse=True)</span><br><span class="line">print(lst1)          # [34, 10, 4, 3]</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨å†…ç½®å‡½æ•°sorted()å¯¹åˆ—è¡¨è¿›è¡Œæ’åºï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ—è¡¨,åŸåˆ—è¡¨ä¸æ”¹å˜</span><br><span class="line">lst2 = [1,3,5,2,4]</span><br><span class="line">new_lst2 = sorted(lst2)</span><br><span class="line">print(lst2)         # [1, 3, 5, 2, 4]</span><br><span class="line">print(new_lst2)     # [1, 2, 3, 4, 5]</span><br><span class="line">desc_lst2 = sorted(lst2,reverse=True)</span><br><span class="line">print(desc_lst2)     # [5, 4, 3, 2, 1]</span><br></pre></td></tr></table></figure><h2 id="7-åˆ—è¡¨ç”Ÿæˆå¼-ç”Ÿæˆåˆ—è¡¨çš„å¼å­"><a href="#7-åˆ—è¡¨ç”Ÿæˆå¼-ç”Ÿæˆåˆ—è¡¨çš„å¼å­" class="headerlink" title="7.åˆ—è¡¨ç”Ÿæˆå¼(ç”Ÿæˆåˆ—è¡¨çš„å¼å­)"></a>7.åˆ—è¡¨ç”Ÿæˆå¼(ç”Ÿæˆåˆ—è¡¨çš„å¼å­)</h2><p><code>[i*i for i in range(1,10)]</code></p><ul><li>i*iè¡¨ç¤ºåˆ—è¡¨å…ƒç´ çš„è¡¨è¾¾å¼</li><li>iè‡ªå®šä¹‰çš„ä¸€ä¸ªå˜é‡</li><li>range(1,10)æ˜¯å¯è¿­ä»£çš„å¯¹è±¡</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lst1 = [i for i in range(1,10)]</span><br><span class="line">print(lst1)         # [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">lst2 = [i*i for i in range(1,10)]</span><br><span class="line">print(lst2)         # [1, 4, 9, 16, 25, 36, 49, 64, 81]</span><br><span class="line"></span><br><span class="line"># åˆ—è¡¨ä¸­çš„å…ƒç´ çš„å€¼ä¸º2ï¼Œ4ï¼Œ6ï¼Œ8ï¼Œ10</span><br><span class="line">lst3 = [i*2 for i in range(1,6)]</span><br><span class="line">print(lst3)         # [2, 4, 6, 8, 10]</span><br></pre></td></tr></table></figure><h1 id="ï¼ˆäºŒï¼‰å­—å…¸-dict"><a href="#ï¼ˆäºŒï¼‰å­—å…¸-dict" class="headerlink" title="ï¼ˆäºŒï¼‰å­—å…¸(dict)"></a>ï¼ˆäºŒï¼‰å­—å…¸(dict)</h1><p>å­—å…¸æ˜¯ä¸€ä¸ªæ— åºã€å¯å˜å’Œæœ‰ç´¢å¼•çš„é›†åˆã€‚åœ¨ Python ä¸­ï¼Œå­—å…¸ç”¨èŠ±æ‹¬å·ç¼–å†™ï¼Œæ‹¥æœ‰é”®å’Œå€¼ã€‚</p><p>å…¶ä¸­ï¼Œé”®æ˜¯ä¸å¯å˜åºåˆ—ï¼Œæ¯”å¦‚str,intç­‰ï¼Œä¸å¯è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚</p><h2 id="1-å­—å…¸çš„åˆ›å»º"><a href="#1-å­—å…¸çš„åˆ›å»º" class="headerlink" title="1.å­—å…¸çš„åˆ›å»º"></a>1.å­—å…¸çš„åˆ›å»º</h2><ul><li><p>æœ€å¸¸ç”¨çš„æ–¹å¼ï¼šä½¿ç”¨<mark>èŠ±æ‹¬å·</mark></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scores = &#123;</span><br><span class="line">    &#x27;å¼ ä¸‰&#x27;:100,</span><br><span class="line">    &#x27;æå››&#x27;:80,</span><br><span class="line">    &#x27;ç‹äº”&#x27;:88</span><br><span class="line">&#125;</span><br><span class="line">print(scores)</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å†…ç½®å‡½æ•°<mark>dict()</mark></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scores = dict(name = &#x27;jack&#x27; , age = 20)</span><br><span class="line">print(scores)</span><br><span class="line"></span><br><span class="line"># ç©ºå­—å…¸</span><br><span class="line">d = &#123;&#125;</span><br><span class="line">print(d)</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-å­—å…¸ä¸­å…ƒç´ çš„è·å–"><a href="#2-å­—å…¸ä¸­å…ƒç´ çš„è·å–" class="headerlink" title="2.å­—å…¸ä¸­å…ƒç´ çš„è·å–"></a>2.å­—å…¸ä¸­å…ƒç´ çš„è·å–</h2><ul><li><p>é€šè¿‡åœ¨æ–¹æ‹¬å·å†…å¼•ç”¨å…¶é”®åæ¥è®¿é—®å­—å…¸çš„é¡¹ç›®</p></li><li><p>get()æ–¹æ³•</p><hr><p><mark>åŒºåˆ«ï¼š</mark></p><p>[] å¦‚æœå­—å…¸ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„keyï¼ŒæŠ›å‡ºkeyErrorå¼‚å¸¸ã€‚</p><p>get() æ–¹æ³•å–å€¼ï¼Œå¦‚æœå­—å…¸ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„keyï¼Œå¹¶ä¸ä¼šæŠ›å‡ºKeyErrorè€Œæ˜¯è¿”å›Noneï¼Œå¯ä»¥é€šè¿‡è®¾ç½®é»˜è®¤çš„valueï¼Œä»¥ä¾¿æŒ‡å®škeyä¸å­˜åœ¨æ—¶è¿”å›ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">thisdict =    &#123;</span><br><span class="line">  &quot;brand&quot;: &quot;Porsche&quot;,</span><br><span class="line">  &quot;model&quot;: &quot;911&quot;,</span><br><span class="line">  &quot;year&quot;: 1963</span><br><span class="line">&#125;</span><br><span class="line">x = thisdict.get(&quot;model&quot;)</span><br><span class="line">y = thisdict.get(&quot;age&quot;,&quot;ä¸å­˜åœ¨&quot;)</span><br><span class="line">print(x)</span><br><span class="line">print(y)</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-keyçš„åˆ¤æ–­"><a href="#3-keyçš„åˆ¤æ–­" class="headerlink" title="3.keyçš„åˆ¤æ–­"></a>3.keyçš„åˆ¤æ–­</h2><p>in å’Œ not in</p><h2 id="4-å­—å…¸çš„åˆ é™¤"><a href="#4-å­—å…¸çš„åˆ é™¤" class="headerlink" title="4.å­—å…¸çš„åˆ é™¤"></a>4.å­—å…¸çš„åˆ é™¤</h2><p>ä½¿ç”¨ <code>del</code> å…³é”®å­—åˆ é™¤å­—å…¸ä¸­çš„æŸä¸ªé”®å€¼å¯¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤é”®ä¸º &#x27;a&#x27; çš„é”®å€¼å¯¹</span></span><br><span class="line"><span class="keyword">del</span> my_dict[<span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_dict)  <span class="comment"># &#123;&#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>pop()</code> æ–¹æ³•åˆ é™¤å­—å…¸ä¸­çš„æŸä¸ªé”®å€¼å¯¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤é”®ä¸º &#x27;a&#x27; çš„é”®å€¼å¯¹ï¼Œå¹¶è¿”å›å€¼</span></span><br><span class="line">value = my_dict.pop(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_dict)  <span class="comment"># &#123;&#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(value)    <span class="comment"># 1</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåˆ é™¤çš„é”®ä¸å­˜åœ¨ï¼Œä½¿ç”¨ <code>del</code> å…³é”®å­—ä¼šæŠ›å‡º KeyError å¼‚å¸¸ï¼Œè€Œä½¿ç”¨ <code>pop()</code> æ–¹æ³•å¯ä»¥æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼æ¥é¿å…å¼‚å¸¸ï¼Œé€šå¸¸è¿”å›0</p><h2 id="5-å­—å…¸çš„å¢åŠ "><a href="#5-å­—å…¸çš„å¢åŠ " class="headerlink" title="5.å­—å…¸çš„å¢åŠ "></a>5.å­—å…¸çš„å¢åŠ </h2><h2 id="6-å­—å…¸çš„ä¿®æ”¹"><a href="#6-å­—å…¸çš„ä¿®æ”¹" class="headerlink" title="6.å­—å…¸çš„ä¿®æ”¹"></a>6.å­—å…¸çš„ä¿®æ”¹</h2><h2 id="7-è·å–å­—å…¸è§†å›¾çš„ä¸‰ä¸ªæ–¹æ³•"><a href="#7-è·å–å­—å…¸è§†å›¾çš„ä¸‰ä¸ªæ–¹æ³•" class="headerlink" title="7.è·å–å­—å…¸è§†å›¾çš„ä¸‰ä¸ªæ–¹æ³•"></a>7.è·å–å­—å…¸è§†å›¾çš„ä¸‰ä¸ªæ–¹æ³•</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>key()</td><td>è·å–å­—å…¸ä¸­æ‰€æœ‰çš„key</td></tr><tr><td>values()</td><td>è·å–å­—å…¸ä¸­æ‰€æœ‰çš„value</td></tr><tr><td>items()</td><td>è·å–å­—å…¸ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹</td></tr></tbody></table><h2 id="8-å­—å…¸å…ƒç´ çš„éå†"><a href="#8-å­—å…¸å…ƒç´ çš„éå†" class="headerlink" title="8.å­—å…¸å…ƒç´ çš„éå†"></a>8.å­—å…¸å…ƒç´ çš„éå†</h2><h2 id="9-å­—å…¸çš„ç‰¹ç‚¹"><a href="#9-å­—å…¸çš„ç‰¹ç‚¹" class="headerlink" title="9.å­—å…¸çš„ç‰¹ç‚¹"></a>9.å­—å…¸çš„ç‰¹ç‚¹</h2><ol><li><p>å­—å…¸ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªkey-valueå¯¹ï¼Œkeyä¸å…è®¸é‡å¤ï¼Œvalueå¯ä»¥é‡å¤</p></li><li><p>å­—å…¸ä¸­çš„å…ƒç´ æ˜¯æ— åºçš„</p></li><li><p>å­—å…¸ä¸­çš„keyå¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡</p></li><li><p>å­—å…¸ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€çš„ä¼¸ç¼©</p></li><li><p>å­—å…¸ä¼šæµªè´¹è¾ƒå¤§çš„å†…å­˜ï¼Œæ˜¯ä¸€ç§ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´çš„æ•°æ®</p></li></ol><h2 id="10-å­—å…¸ç”Ÿæˆå¼"><a href="#10-å­—å…¸ç”Ÿæˆå¼" class="headerlink" title="10.å­—å…¸ç”Ÿæˆå¼"></a>10.å­—å…¸ç”Ÿæˆå¼</h2><p>å¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚</p><p>ä¸‹é¢å±•ç¤ºä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span> = &#123;key: value <span class="keyword">for</span> key, value <span class="keyword">in</span> iterable&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œiterableæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä¾‹å¦‚åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆç­‰ï¼Œkeyå’Œvalueæ˜¯ç”¨äºåˆ›å»ºå­—å…¸é”®å€¼å¯¹çš„è¡¨è¾¾å¼ã€‚åœ¨å­—å…¸ç”Ÿæˆå¼ä¸­ï¼Œè¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨ä»»ä½•Pythonè¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬å‡½æ•°è°ƒç”¨ã€æ¡ä»¶è¯­å¥ç­‰ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªåŒ…å«å¶æ•°å’Œå¥‡æ•°çš„å­—å…¸ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">even_odd_dict = &#123;x: <span class="string">&#x27;even&#x27;</span> <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> <span class="string">&#x27;odd&#x27;</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)&#125;</span><br><span class="line"><span class="built_in">print</span>(even_odd_dict)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="comment"># &#123;0: &#x27;even&#x27;, 1: &#x27;odd&#x27;, 2: &#x27;even&#x27;, 3: &#x27;odd&#x27;, 4: &#x27;even&#x27;, 5: &#x27;odd&#x27;, 6: &#x27;even&#x27;, 7: &#x27;odd&#x27;, 8: &#x27;even&#x27;, 9: &#x27;odd&#x27;&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨rangeå‡½æ•°ç”Ÿæˆä¸€ä¸ªåŒ…å«0åˆ°9çš„æ•´æ•°åºåˆ—ï¼Œç„¶åä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼æ¥åˆ¤æ–­æ¯ä¸ªæ•°å­—æ˜¯å¶æ•°è¿˜æ˜¯å¥‡æ•°ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°å­—å…¸ä¸­ã€‚</p><h1 id="ï¼ˆä¸‰ï¼‰å…ƒç»„-Tuple"><a href="#ï¼ˆä¸‰ï¼‰å…ƒç»„-Tuple" class="headerlink" title="ï¼ˆä¸‰ï¼‰å…ƒç»„(Tuple)"></a>ï¼ˆä¸‰ï¼‰å…ƒç»„(Tuple)</h1><h2 id="1-å…ƒç»„çš„åˆ›å»º"><a href="#1-å…ƒç»„çš„åˆ›å»º" class="headerlink" title="1.å…ƒç»„çš„åˆ›å»º"></a>1.å…ƒç»„çš„åˆ›å»º</h2><p>ä¸åˆ—è¡¨çš„å·®åˆ«å°±åœ¨äºç”¨çš„æ˜¯å°æ‹¬å·</p><p>å…ƒç»„æ²¡æœ‰ç”Ÿæˆå¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;word&#x27;</span>,<span class="number">98</span>)</span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(t))</span><br><span class="line"><span class="comment"># ç©ºå…ƒç»„</span></span><br><span class="line">t1 = ()</span><br><span class="line">t2 = <span class="built_in">tuple</span>()</span><br></pre></td></tr></table></figure><h2 id="2-å…ƒç»„ä¸ºä»€ä¹ˆè®¾è®¡æˆä¸å¯å˜åºåˆ—"><a href="#2-å…ƒç»„ä¸ºä»€ä¹ˆè®¾è®¡æˆä¸å¯å˜åºåˆ—" class="headerlink" title="2.å…ƒç»„ä¸ºä»€ä¹ˆè®¾è®¡æˆä¸å¯å˜åºåˆ—"></a>2.å…ƒç»„ä¸ºä»€ä¹ˆè®¾è®¡æˆä¸å¯å˜åºåˆ—</h2><p>åœ¨å¤šä»»åŠ¡ç¯å¢ƒä¸‹ï¼ŒåŒæ—¶æ“ä½œå¯¹è±¡æ—¶ä¸éœ€è¦æ·é”ï¼Œå› æ­¤ï¼Œåœ¨ç¨‹åºä¸­é—´å°½é‡ä½¿ç”¨ä¸å¯å˜åºåˆ—ã€‚</p><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>å…ƒç»„ä¸­å­˜å‚¨çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>å¦‚æœå…ƒç»„ä¸­å¯¹è±¡æœ¬èº«æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œåˆ™ä¸èƒ½å†å¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚</p><p>å¦‚æœå…ƒç»„ä¸­çš„å¯¹è±¡æ˜¯å¯å˜å¯¹è±¡ï¼Œåˆ™å¯å˜å¯¹è±¡çš„å¼•ç”¨ä¸å…è®¸æ”¹å˜ï¼Œä½†æ•°æ®å¯ä»¥æ”¹å˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(t,<span class="built_in">type</span>(t))</span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">0</span>],<span class="built_in">type</span>(t[<span class="number">0</span>]),<span class="built_in">id</span>(t[<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">1</span>],<span class="built_in">type</span>(t[<span class="number">1</span>]),<span class="built_in">id</span>(t[<span class="number">1</span>]))</span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">2</span>],<span class="built_in">type</span>(t[<span class="number">2</span>]),<span class="built_in">id</span>(t[<span class="number">2</span>]))</span><br><span class="line"><span class="comment"># å°è¯•å°†t[1]ä¿®æ”¹ä¸º100</span></span><br><span class="line"><span class="comment"># t[1] = 100          ç”±äºå…ƒç»„æ˜¯ä¸å¯å˜åºåˆ—ï¼Œä¸å¯ä¿®æ”¹å…ƒç´ </span></span><br><span class="line"><span class="comment"># ä½†[2,3]æ˜¯åˆ—è¡¨ï¼Œæ˜¯å¯å˜åºåˆ—ï¼Œæ‰€ä»¥å¯ä»¥å‘åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´ ï¼Œè€Œåˆ—è¡¨çš„å†…å­˜åœ°å€ä¸å˜</span></span><br><span class="line">t[<span class="number">1</span>].append(<span class="number">5</span>)          <span class="comment"># å‘åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(t,<span class="built_in">id</span>(t[<span class="number">1</span>]))</span><br></pre></td></tr></table></figure><h2 id="3-å…ƒç»„çš„éå†"><a href="#3-å…ƒç»„çš„éå†" class="headerlink" title="3.å…ƒç»„çš„éå†"></a>3.å…ƒç»„çš„éå†</h2><p>å…ƒç»„å¯ä»¥ä½¿ç”¨forå¾ªç¯è¿›è¡Œéå†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç´¢å¼•è®¿é—®å…ƒç´ ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªå…ƒç»„</span></span><br><span class="line">tup = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨forå¾ªç¯éå†å…ƒç»„</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> tup:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç´¢å¼•è®¿é—®å…ƒç´ </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(tup)):</span><br><span class="line">    <span class="built_in">print</span>(tup[i])</span><br></pre></td></tr></table></figure><h1 id="ï¼ˆå››ï¼‰é›†åˆ-Set"><a href="#ï¼ˆå››ï¼‰é›†åˆ-Set" class="headerlink" title="ï¼ˆå››ï¼‰é›†åˆ(Set)"></a>ï¼ˆå››ï¼‰é›†åˆ(Set)</h1><p>é›†åˆæ˜¯æ²¡æœ‰<code>value</code>çš„å­—å…¸</p><p>å…ƒç´ ä¸å…è®¸é‡å¤</p><h2 id="1-é›†åˆçš„åˆ›å»º"><a href="#1-é›†åˆçš„åˆ›å»º" class="headerlink" title="1.é›†åˆçš„åˆ›å»º"></a>1.é›†åˆçš„åˆ›å»º</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># ç¬¬ä¸€ç§&#123;&#125;æ–¹å¼åˆ›å»ºé›†åˆ</span><br><span class="line">s1 = &#123;1,2,2,3,4,5&#125;</span><br><span class="line">print(s1 , type(s1))                # &#123;1, 2, 3, 4, 5&#125; &lt;class &#x27;set&#x27;&gt;</span><br><span class="line"></span><br><span class="line"># ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨set()</span><br><span class="line">s2 = set([1,2,3,4,2,3])</span><br><span class="line">print(s2,type(s2))                  # &#123;1, 2, 3, 4&#125; &lt;class &#x27;set&#x27;&gt;</span><br><span class="line">s3 = set((1,2,3,4,4,65))</span><br><span class="line">print(s3,type(s3))                  # &#123;65, 1, 2, 3, 4&#125; &lt;class &#x27;set&#x27;&gt;</span><br><span class="line">s4 = set(&#x27;python&#x27;)</span><br><span class="line">print(s4,type(s4))                  # &#123;&#x27;n&#x27;, &#x27;o&#x27;, &#x27;p&#x27;, &#x27;h&#x27;, &#x27;t&#x27;, &#x27;y&#x27;&#125; &lt;class &#x27;set&#x27;&gt;</span><br><span class="line"></span><br><span class="line"># å®šä¹‰ç©ºé›†åˆ</span><br><span class="line">s5 = set()</span><br><span class="line">print(s5)                           # set()</span><br></pre></td></tr></table></figure><h2 id="2-é›†åˆå…ƒç´ çš„ç›¸å…³æ“ä½œ"><a href="#2-é›†åˆå…ƒç´ çš„ç›¸å…³æ“ä½œ" class="headerlink" title="2.é›†åˆå…ƒç´ çš„ç›¸å…³æ“ä½œ"></a>2.é›†åˆå…ƒç´ çš„ç›¸å…³æ“ä½œ</h2><p><strong>é›†åˆå…ƒç´ çš„åˆ¤æ–­æ“ä½œ</strong></p><ul><li>inæˆ–not in</li></ul><p><strong>é›†åˆå…ƒç´ çš„å¢åŠ æ“ä½œ</strong></p><ul><li>add()ï¼šä¸€æ¬¡æ·»åŠ ä¸€ä¸ªå…ƒç´ </li><li>update()ï¼šä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ </li></ul><p><strong>é›†åˆå…ƒç´ çš„åˆ é™¤æ“ä½œï¼š</strong></p><ul><li>remove()ï¼šä¸€æ¬¡åˆ é™¤ä¸€ä¸ªæŒ‡å®šå…ƒç´ ï¼Œå¦‚æœæŒ‡å®šçš„å…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºKeyError</li><li>discard()ï¼šä¸€æ¬¡åˆ é™¤ä¸€ä¸ªæŒ‡å®šå…ƒç´ ï¼Œå¦‚æœæŒ‡å®šçš„å…ƒç´ ä¸å­˜åœ¨ï¼Œä¸æŠ›å‡ºå¼‚å¸¸</li><li>pop()ï¼šä¸€æ¬¡åˆ é™¤ä»»æ„ä¸€ä¸ªå…ƒç´ </li><li>clear()ï¼šæ¸…ç©ºé›†åˆ</li></ul><h2 id="3-é›†åˆé—´çš„å…³ç³»"><a href="#3-é›†åˆé—´çš„å…³ç³»" class="headerlink" title="3.é›†åˆé—´çš„å…³ç³»"></a>3.é›†åˆé—´çš„å…³ç³»</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># åˆ¤æ–­é›†åˆæ˜¯å¦ç›¸ç­‰</span><br><span class="line">s1 = &#123;1,2,3,4,5&#125;</span><br><span class="line">s2 = &#123;1,4,3,2,5&#125;</span><br><span class="line">print(s1==s2)</span><br><span class="line">print(s1!=s2)</span><br><span class="line"></span><br><span class="line"># åˆ¤æ–­å­é›†</span><br><span class="line">s3 = &#123;1,2,3,4,5,6&#125;</span><br><span class="line">s4 = &#123;1,2,3,4&#125;</span><br><span class="line">s5 = &#123;1,2,3,9&#125;</span><br><span class="line">print(s4.issubset(s3))    #åˆ¤æ–­s4æ˜¯ä¸æ˜¯s3çš„å­é›†</span><br><span class="line">print(s5.issubset(s3))    #åˆ¤æ–­s5æ˜¯ä¸æ˜¯s3çš„å­é›†</span><br><span class="line"></span><br><span class="line"># åˆ¤æ–­ä¸€ä¸ªé›†åˆæ˜¯å¦æ˜¯ä¸€ä¸ªé›†åˆçš„è¶…é›†</span><br><span class="line">print(s3.issuperset(s4))</span><br><span class="line">print(s3.issuperset(s5))</span><br><span class="line"></span><br><span class="line"># åˆ¤æ–­ä¸¤ä¸ªæ˜¯å¦æœ‰äº¤é›†(æ²¡æœ‰äº¤é›†è¿”å›trueï¼Œæœ‰äº¤é›†è¿”å›false)</span><br><span class="line">print(s4.isdisjoint(s5))</span><br></pre></td></tr></table></figure><h2 id="4-é›†åˆçš„æ•°å­¦æ“ä½œ"><a href="#4-é›†åˆçš„æ•°å­¦æ“ä½œ" class="headerlink" title="4.é›†åˆçš„æ•°å­¦æ“ä½œ"></a>4.é›†åˆçš„æ•°å­¦æ“ä½œ</h2><h3 id="ï¼ˆ1ï¼‰äº¤é›†"><a href="#ï¼ˆ1ï¼‰äº¤é›†" class="headerlink" title="ï¼ˆ1ï¼‰äº¤é›†"></a>ï¼ˆ1ï¼‰äº¤é›†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;10,20,30,40&#125;</span><br><span class="line">s2 = &#123;20,30,40,50,60&#125;</span><br><span class="line">print(s1.intersection(s2))              # &#123;40, 20, 30&#125;</span><br><span class="line">print(s1 &amp; s2)                          # &#123;40, 20, 30&#125;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰å¹¶é›†"><a href="#ï¼ˆ2ï¼‰å¹¶é›†" class="headerlink" title="ï¼ˆ2ï¼‰å¹¶é›†"></a>ï¼ˆ2ï¼‰å¹¶é›†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;10,20,30,40&#125;</span><br><span class="line">s2 = &#123;20,30,40,50,60&#125;</span><br><span class="line">print(s1.union(s2))             # &#123;40, 10, 50, 20, 60, 30&#125;</span><br><span class="line">print(s1 | s2)                  # &#123;40, 10, 50, 20, 60, 30&#125;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ3ï¼‰å·®é›†"><a href="#ï¼ˆ3ï¼‰å·®é›†" class="headerlink" title="ï¼ˆ3ï¼‰å·®é›†"></a>ï¼ˆ3ï¼‰å·®é›†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;10,20,30,40&#125;</span><br><span class="line">s2 = &#123;20,30,40,50,60&#125;</span><br><span class="line">print(s1.difference(s2))            # &#123;10&#125;</span><br><span class="line">print(s1 - s2)                      # &#123;10&#125;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ4ï¼‰å¯¹ç§°å·®"><a href="#ï¼ˆ4ï¼‰å¯¹ç§°å·®" class="headerlink" title="ï¼ˆ4ï¼‰å¯¹ç§°å·®"></a>ï¼ˆ4ï¼‰å¯¹ç§°å·®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;10,20,30,40&#125;</span><br><span class="line">s2 = &#123;20,30,40,50,60&#125;</span><br><span class="line">print(s1.symmetric_difference(s2))              # &#123;50, 10, 60&#125;</span><br><span class="line">print(s1 ^ s2)                                  # &#123;50, 10, 60&#125;</span><br></pre></td></tr></table></figure><h2 id="5-é›†åˆç”Ÿæˆå¼"><a href="#5-é›†åˆç”Ÿæˆå¼" class="headerlink" title="5.é›†åˆç”Ÿæˆå¼"></a>5.é›†åˆç”Ÿæˆå¼</h2><p>åªéœ€è¦å°†åˆ—è¡¨ç”Ÿæˆå¼çš„<mark>[]</mark>æ¢æˆ<mark>{}</mark>ï¼Œå…¶ä»–å’Œåˆ—è¡¨ç”Ÿæˆå¼ä¸€æ ·</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•æ›´å¿«ç†Ÿç»ƒPythonå­—ç¬¦ä¸²ï¼Ÿ</title>
      <link href="/2023/05/29/%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E7%86%9F%E7%BB%83Python%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%9F/"/>
      <url>/2023/05/29/%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E7%86%9F%E7%BB%83Python%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/25.jpg" style="border-radius:10px" width="1000px"></img></p><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><h1 id="ä¸€ã€Pythonå­—ç¬¦ä¸²ç®€ä»‹"><a href="#ä¸€ã€Pythonå­—ç¬¦ä¸²ç®€ä»‹" class="headerlink" title="ä¸€ã€Pythonå­—ç¬¦ä¸²ç®€ä»‹"></a>ä¸€ã€Pythonå­—ç¬¦ä¸²ç®€ä»‹</h1><p>ç›´æ¥å®šä¹‰</p><p>ä¾‹å¦‚ï¼š<code>str=&quot;æˆ‘æ˜¯ä¸€ä¸ªPythonå­—ç¬¦ä¸²&quot;</code></p><p>ä½¿ç”¨3å¯¹å•å¼•å·æˆ–3å¯¹åŒå¼•å·æ ‡è¯†å­—ç¬¦ä¸²å¯ä»¥åŒ…å«å¤šè¡Œ1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;&#x27;&#x27;æˆ‘æ˜¯å°èŠ‹å¤´</span></span><br><span class="line"><span class="string">å°æˆ´æ˜¯æˆ‘çš„å¥³æœ‹å‹</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>)</span><br><span class="line"><span class="comment"># æˆ‘æ˜¯å°èŠ‹å¤´</span></span><br><span class="line"><span class="comment"># å°æˆ´æ˜¯æˆ‘çš„å¥³æœ‹å‹</span></span><br></pre></td></tr></table></figure><h1 id="äºŒã€å­—ç¬¦ä¸²é©»ç•™æœºåˆ¶"><a href="#äºŒã€å­—ç¬¦ä¸²é©»ç•™æœºåˆ¶" class="headerlink" title="äºŒã€å­—ç¬¦ä¸²é©»ç•™æœºåˆ¶"></a>äºŒã€å­—ç¬¦ä¸²é©»ç•™æœºåˆ¶</h1><p>åœ¨Pythonä¸­å­—ç¬¦ä¸²æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªä¸å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œå³ä¸èƒ½è¢«ä¿®æ”¹ã€‚</p><p>pythonæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²é©»ç•™æ± ï¼Œpythonçš„é©»ç•™æœºåˆ¶å¯¹ç›¸åŒçš„å­—ç¬¦ä¸²åªä¿ç•™ä¸€ä»½æ‹·è´ï¼Œåç»­åˆ›å»ºç›¸åŒå­—ç¬¦ä¸²æ—¶ï¼Œä¸ä¼šå¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œè€Œæ˜¯æŠŠè¯¥å­—ç¬¦ä¸²çš„åœ°å€èµ‹ç»™æ–°åˆ›å»ºçš„å˜é‡ï¼Œå¦‚æœä¿®æ”¹äº†ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡çš„å€¼ï¼Œé‚£ä¹ˆåªæ˜¯æ–°åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å˜é‡æŒ‡å‘æ–°å­—ç¬¦ä¸²çš„åœ°å€ã€‚</p><p>å¦‚ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;æˆ‘æ˜¯str1&quot;</span></span><br><span class="line">str2 = <span class="string">&quot;æˆ‘æ˜¯str1&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str1,<span class="built_in">id</span>(str1))    <span class="comment"># æˆ‘æ˜¯str1 2448343018448</span></span><br><span class="line"><span class="built_in">print</span>(str2,<span class="built_in">id</span>(str2))    <span class="comment"># æˆ‘æ˜¯str1 2448343018448</span></span><br><span class="line">str1 = <span class="string">&quot;æˆ‘æ˜¯ä¿®æ”¹äº†çš„str1&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str1,<span class="built_in">id</span>(str1))    <span class="comment"># æˆ‘æ˜¯ä¿®æ”¹äº†çš„str1 2448343096656</span></span><br></pre></td></tr></table></figure><p>å½“éœ€è¦å€¼ç›¸åŒçš„å­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»å­—ç¬¦ä¸²æ± é‡Œæ‹¿æ¥ä½¿ç”¨ï¼Œé¿å…é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯ï¼Œæå‡æ•ˆç‡å’ŒèŠ‚çº¦å†…å­˜ï¼Œå› æ­¤æ‹¼æ¥å­—ç¬¦ä¸²å’Œä¿®æ”¹å­—ç¬¦ä¸²æ˜¯ä¼šæ¯”è¾ƒå½±å“æ€§èƒ½çš„ã€‚</p><p>åœ¨éœ€è¦è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥æ—¶å»ºè®®ä½¿ç”¨strç±»å‹çš„<code>join()</code>æ–¹æ³•ï¼Œè€Œé<code>+</code>ï¼Œå› ä¸º<code>join()</code>æ–¹æ³•æ˜¯å…ˆè®¡ç®—å‡ºæ‰€æœ‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç„¶åå†æ‹·è´ï¼Œåªnewä¸€æ¬¡å¯¹è±¡ï¼Œæ•ˆç‡è¦æ¯”<code>+</code>é«˜ã€‚</p><h1 id="ä¸‰ã€å­—ç¬¦ä¸²ç´¢å¼•-åˆ‡ç‰‡"><a href="#ä¸‰ã€å­—ç¬¦ä¸²ç´¢å¼•-åˆ‡ç‰‡" class="headerlink" title="ä¸‰ã€å­—ç¬¦ä¸²ç´¢å¼•+åˆ‡ç‰‡"></a>ä¸‰ã€å­—ç¬¦ä¸²ç´¢å¼•+åˆ‡ç‰‡</h1><h2 id="3-1-ç´¢å¼•"><a href="#3-1-ç´¢å¼•" class="headerlink" title="3.1 ç´¢å¼•"></a>3.1 ç´¢å¼•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;æˆ‘æ˜¯å°æ¼å¤´&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">0</span>])   <span class="comment"># æˆ‘</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[-<span class="number">1</span>])  <span class="comment"># å¤´</span></span><br></pre></td></tr></table></figure><h2 id="3-2-åˆ‡ç‰‡"><a href="#3-2-åˆ‡ç‰‡" class="headerlink" title="3.2 åˆ‡ç‰‡"></a>3.2 åˆ‡ç‰‡</h2><p>[èµ·å§‹ç¼–å·:ç»“æŸç¼–å·:æ­¥é•¿]</p><p>åŒ…å¤´ä¸åŒ…å°¾ï¼ï¼ï¼</p><p>æ¯ä¸ªéƒ½å¯çœç•¥ã€‚</p><h1 id="å››ã€å­—ç¬¦ä¸²çš„è¿ç®—"><a href="#å››ã€å­—ç¬¦ä¸²çš„è¿ç®—" class="headerlink" title="å››ã€å­—ç¬¦ä¸²çš„è¿ç®—"></a>å››ã€å­—ç¬¦ä¸²çš„è¿ç®—</h1><p><code>+</code>â€”&gt;å­—ç¬¦ä¸²çš„è¿æ¥</p><p><code>*</code>â€”&gt;é‡å¤å­—ç¬¦ä¸²</p><p><code>in</code>â€”&gt;å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«ç»™å®šå­—ç¬¦ï¼Œè¿”å› True</p><p><code>not in</code>â€”&gt;å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«ç»™å®šå­—ç¬¦ï¼Œè¿”å› False</p><p><code>ræˆ–R</code>åŸæ ·ä½¿ç”¨å­—ç¬¦ä¸²</p><p><code>len(str)</code>æ±‚å­—ç¬¦ä¸²strçš„é•¿åº¦</p><h1 id="äº”ã€å­—ç¬¦ä¸²å‡½æ•°"><a href="#äº”ã€å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="äº”ã€å­—ç¬¦ä¸²å‡½æ•°"></a>äº”ã€å­—ç¬¦ä¸²å‡½æ•°</h1><h2 id="5-1-å­—ç¬¦ä¸²æŸ¥è¯¢æ“ä½œ"><a href="#5-1-å­—ç¬¦ä¸²æŸ¥è¯¢æ“ä½œ" class="headerlink" title="5.1 å­—ç¬¦ä¸²æŸ¥è¯¢æ“ä½œ"></a>5.1 å­—ç¬¦ä¸²æŸ¥è¯¢æ“ä½œ</h2><details class="folding-tag" blue><summary> å­—ç¬¦ä¸²æŸ¥è¯¢æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">find</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">rfind</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">index</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">rindex</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">count</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>find(substr,begin,end)</code></p><p>ä»å·¦ä¾§æŸ¥æ‰¾å­—ç¬¦ä¸²ä»æŒ‡å®šå¼€å§‹ä½ç½®åˆ°æŒ‡å®šç»“æŸä½ç½®é—´ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®ï¼Œå¦‚æœæŸ¥æ‰¾çš„å­ä¸²ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºValueErroré”™è¯¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><p><code>rfind(substr,begin,end)</code></p><p>ä»å³ä¾§æŸ¥æ‰¾å­—ç¬¦ä¸²ä»æŒ‡å®šå¼€å§‹ä½ç½®åˆ°æŒ‡å®šç»“æŸä½ç½®é—´ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®ï¼Œå¦‚æœæŸ¥æ‰¾çš„å­ä¸²ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><p><code>index(substr,begin,end)</code></p><p>ä»å·¦ä¾§æŸ¥æ‰¾å­—ç¬¦ä¸²ä»æŒ‡å®šå¼€å§‹ä½ç½®åˆ°æŒ‡å®šç»“æŸä½ç½®é—´ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><p><code>rindex(substr,begin,end)</code></p><p>ä»å³ä¾§æŸ¥æ‰¾å­—ç¬¦ä¸²ä»æŒ‡å®šå¼€å§‹ä½ç½®åˆ°æŒ‡å®šç»“æŸä½ç½®é—´ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><p><code>count(substr)</code></p><p>æŸ¥è¯¢æŒ‡å®šå­—ç¬¦ä¸²åœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-2-å­—ç¬¦ä¸²çŠ¶æ€è·å–æ“ä½œ"><a href="#5-2-å­—ç¬¦ä¸²çŠ¶æ€è·å–æ“ä½œ" class="headerlink" title="5.2 å­—ç¬¦ä¸²çŠ¶æ€è·å–æ“ä½œ"></a>5.2 å­—ç¬¦ä¸²çŠ¶æ€è·å–æ“ä½œ</h2><p>ç¬¦åˆæ¡ä»¶è¿”å›ç»“æœä¸º<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code> ã€‚</p><details class="folding-tag" blue><summary> å­—ç¬¦ä¸²çŠ¶æ€è·å–æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">islower()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">isupper()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">isdigit()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">isalpha()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">isalnum()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-6">istitle()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-7">startswith()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-8">endswith()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-9">isspace()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>islower()</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨æ˜¯å°å†™å­—æ¯ç»„æˆ</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><p><code>isupper()</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨ç”±å¤§å†™å­—æ¯ç»„æˆ</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><p><code>isdigit()</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç”±çº¯æ•°å­—ç»„æˆ</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><p><code>isalpha()</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç”±çº¯å­—æ¯ç»„æˆ</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><p><code>isalnum()</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç”±çº¯æ•°å­—å’Œå­—æ¯ç»„æˆ</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-6"><p><code>istitle()</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å•è¯é¦–å­—æ¯å¤§å°å†™è¿™ç§æ ¼å¼</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-7"><p><code>startswith(str)</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥strå¼€å§‹</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-8"><p><code>endswith(str)</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥strç»“æŸ</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-9"><p><code>isspace()</code></p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å…¨æ˜¯ç©ºç™½å­—ç¬¦ã€‚</p><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥strç»“æŸ</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-3-å­—ç¬¦ä¸²è½¬æ¢æ“ä½œ"><a href="#5-3-å­—ç¬¦ä¸²è½¬æ¢æ“ä½œ" class="headerlink" title="5.3 å­—ç¬¦ä¸²è½¬æ¢æ“ä½œ"></a>5.3 å­—ç¬¦ä¸²è½¬æ¢æ“ä½œ</h2><details class="folding-tag" blue><summary> å­—ç¬¦ä¸²è½¬æ¢æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">lower()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">casefold()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">upper()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">swapcase()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">title()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-6">capitalize()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-7">å‡½æ•° 7</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>lower()</code></p><p>å°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯è½¬æˆå°å†™å­—æ¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><p><code>casefold()</code></p><p>å°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯è½¬æˆå°å†™å­—æ¯,æ”¯æŒå„ç§è¯­è¨€ã€‚</p><p>casefold()å‡½æ•°ä¸lower()å‡½æ•°ç±»ä¼¼ï¼Œå°†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å¤§å†™å­—æ¯è½¬æ¢ä¸ºå°å†™å­—æ¯ã€‚ä½†æ˜¯ï¼Œå®ƒè¿˜ä¼šå°†ä¸€äº›ç‰¹å®šäºè¯­è¨€çš„å­—ç¬¦è½¬æ¢ä¸ºå°å†™å½¢å¼ï¼Œä¾‹å¦‚å¾·è¯­ä¸­çš„ÃŸã€‚å› æ­¤ï¼Œcasefold()å‡½æ•°æ¯”lower()å‡½æ•°æ›´åŠ å…¨é¢ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><p><code>upper()</code></p><p>å°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯è½¬æˆå¤§å†™å­—æ¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><p><code>swapcase()</code></p><p>å­—ç¬¦ä¸²ä¸­å¤§å†™å­—æ¯è½¬æˆå°å†™ï¼Œå°å†™å­—æ¯è½¬æˆå¤§å†™ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><p><code>title()</code></p><p>å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å­—æ¯å°å†™ï¼ˆåŒºåˆ†å•è¯ä»¥ç©ºæ ¼åŒºåˆ†ï¼‰ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-6"><p><code>capitalize()</code></p><p>å­—ç¬¦ä¸²é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å­—æ¯å°å†™ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-7"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-4-å­—ç¬¦ä¸²æ ¼å¼è½¬æ¢æ“ä½œ"><a href="#5-4-å­—ç¬¦ä¸²æ ¼å¼è½¬æ¢æ“ä½œ" class="headerlink" title="5.4 å­—ç¬¦ä¸²æ ¼å¼è½¬æ¢æ“ä½œ"></a>5.4 å­—ç¬¦ä¸²æ ¼å¼è½¬æ¢æ“ä½œ</h2><details class="folding-tag" blue><summary> å­—ç¬¦ä¸²æ ¼å¼è½¬æ¢æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">strip()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">lstrip()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">rstrip()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">ljust()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-5">rjust()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-6">center()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-7">zfill()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>strip(str)</code></p><p>å»æ‰å­—ç¬¦ä¸²å·¦å³ä¸¤ä¾§ä¸­çš„strï¼Œä¸å¡«é»˜è®¤ä¸ºç©ºæ ¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;   abc   &quot;</span></span><br><span class="line">str2 = <span class="string">&quot;abcba&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str1.strip()) <span class="comment"># abc</span></span><br><span class="line"><span class="built_in">print</span>(str2.strip(<span class="string">&#x27;a&#x27;</span>))  <span class="comment"># bcb</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><p><code>lstrip(str)</code></p><p>ä¸<code>strip()</code>ç±»ä¼¼ï¼Œåªæ˜¯è¿™é‡Œåªèƒ½å»æ‰å­—ç¬¦ä¸²å·¦ä¾§çš„å­—ç¬¦ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><p><code>rstrip(str)</code></p><p>ä¸<code>strip()</code>ç±»ä¼¼ï¼Œåªæ˜¯è¿™é‡Œåªèƒ½å»æ‰å­—ç¬¦ä¸²å³ä¾§çš„å­—ç¬¦ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><p><code>ljust(len,str)</code></p><p>åœ¨å­—ç¬¦ä¸²å·¦ä¾§æ·»åŠ <code>len</code>ä¸ª<code>str</code>å­—ç¬¦ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-5"><p><code>rjust(len,str)</code></p><p>åœ¨å­—ç¬¦ä¸²å³ä¾§æ·»åŠ <code>len</code>ä¸ª<code>str</code>å­—ç¬¦ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-6"><p><code>center(len,str)</code></p><p>åœ¨å­—ç¬¦ä¸²ä¸¤è¾¹æ·»åŠ <code>len</code>ä¸ª<code>str</code>å­—ç¬¦ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-7"><p><code>zfill(len)</code></p><p>ä½¿ç”¨0åœ¨åŸå§‹å­—ç¬¦ä¸²å·¦ä¾§è¡¥å……åˆ°é•¿åº¦ä¸ºæŒ‡å®šå€¼ï¼Œå°æ•°ç‚¹å 1ä½ã€‚</p><p>len:è¡¥å……å­—ç¬¦åçš„å­—ç¬¦ä¸²é•¿åº¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;3.14&quot;</span></span><br><span class="line">str1.zfill(<span class="number">6</span>)            <span class="comment">#&quot;003.14&quot;</span></span><br><span class="line">str2 = <span class="string">&quot;314&quot;</span></span><br><span class="line">str2.zfill(<span class="number">6</span>)            <span class="comment">#&quot;000314&quot;</span></span><br><span class="line">str3 = <span class="string">&quot;3.14&quot;</span></span><br><span class="line">str3.zfill(<span class="number">3</span>)            <span class="comment">#&quot;3.14&quot;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-5-å­—ç¬¦ä¸²æ‹†åˆ†æ“ä½œ"><a href="#5-5-å­—ç¬¦ä¸²æ‹†åˆ†æ“ä½œ" class="headerlink" title="5.5 å­—ç¬¦ä¸²æ‹†åˆ†æ“ä½œ"></a>5.5 å­—ç¬¦ä¸²æ‹†åˆ†æ“ä½œ</h2><details class="folding-tag" blue><summary> å­—ç¬¦ä¸²æ‹†åˆ†æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">partition()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">rpartition()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">split()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">splitlines()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>partition(str)</code></p><p>ä»å­—ç¬¦ä¸²å·¦ä¾§æŸ¥æ‰¾åˆ°å‚æ•°åï¼Œå°†å‚æ•°å·¦ä¾§ã€å‚æ•°ã€å‚æ•°å³ä¾§çš„ä¸‰ä¸ªå­—ç¬¦ä¸²ç»„æˆå…ƒç»„å¹¶è¿”å›ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><p><code>rpartition(str)</code></p><p>ä»å­—ç¬¦ä¸²å³ä¾§æŸ¥æ‰¾åˆ°å‚æ•°åï¼Œå°†å‚æ•°å·¦ä¾§ã€å‚æ•°ã€å‚æ•°å³ä¾§çš„ä¸‰ä¸ªå­—ç¬¦ä¸²ç»„æˆå…ƒç»„å¹¶è¿”å›ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><p><code>split(str)</code></p><p>ä½¿ç”¨å‚æ•°ä½œä¸ºåˆ†å‰²çº¿å°†åŸå§‹å­—ç¬¦ä¸²æ‹†åˆ†æˆè‹¥å¹²ä¸ªå­—ç¬¦ä¸²å¹¶ç»„ç»‡æˆåˆ—è¡¨è¿”å›ã€‚</p><p>ä¸å¡«<code>str</code>å‚æ•°ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))    <span class="comment"># è¾“å…¥1 2 3 5 6</span></span><br><span class="line"><span class="built_in">print</span>(lst)  <span class="comment"># [1, 2, 3, 5, 6]</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><p><code>splitlines()</code></p><p>ä½¿ç”¨**æ¢è¡Œåˆ†éš”ç¬¦(\n|\r)**ä½œä¸ºåˆ†å‰²çº¿å°†åŸå§‹å­—ç¬¦ä¸²æ‹†åˆ†æˆè‹¥å¹²ä¸ªå­—ç¬¦ä¸²å¹¶ç»„ç»‡æˆåˆ—è¡¨è¿”å›</p><p>ä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;Hello\nWorld\r\nPython&quot;</span></span><br><span class="line">lines = text.splitlines()</span><br><span class="line"><span class="built_in">print</span>(lines)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;Hello&#x27;, &#x27;World&#x27;, &#x27;Python&#x27;]</span><br></pre></td></tr></table></figure><p>splitlines()æ–¹æ³•ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªå¸ƒå°”å‚æ•°keependsï¼Œå¦‚æœä¸ºTrueï¼Œåˆ™ä¿ç•™è¡Œåˆ†éš”ç¬¦ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;Hello\nWorld\r\nPython&quot;</span></span><br><span class="line">lines = text.splitlines(keepends=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(lines)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;Hello\n&#x27;, &#x27;World\r\n&#x27;, &#x27;Python&#x27;]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-6-å­—ç¬¦ä¸²è¿æ¥æ“ä½œ"><a href="#5-6-å­—ç¬¦ä¸²è¿æ¥æ“ä½œ" class="headerlink" title="5.6 å­—ç¬¦ä¸²è¿æ¥æ“ä½œ"></a>5.6 å­—ç¬¦ä¸²è¿æ¥æ“ä½œ</h2><details class="folding-tag" blue><summary> å­—ç¬¦ä¸²è¿æ¥æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">join()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>join(str)</code></p><p>å°†åŸå§‹å­—ç¬¦ä¸²å¡«å……åˆ°å‚æ•°çš„æ¯ä¸ªå­—ç¬¦ä¹‹é—´ç»„æˆæ–°çš„å­—ç¬¦ä¸²è¿”å›ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>.join(<span class="string">&quot;æˆ‘æ˜¯å°æˆ´&quot;</span>)) <span class="comment"># æˆ‘!æ˜¯!å°!æˆ´</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-7-å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œ"><a href="#5-7-å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œ" class="headerlink" title="5.7 å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œ"></a>5.7 å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œ</h2><details class="folding-tag" blue><summary> å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">replace()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">expandtabs()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>replace(old_str,new_str,num)</code></p><p>æ›¿æ¢åŸå­—ç¬¦ä¸²çš„<code>old_str</code>å­ä¸²ä¸º<code>new_str</code>ï¼Œ<code>num</code>ä¸ºæ›¿æ¢çš„æ•°é‡ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><p><code>expandtabs()</code></p><p>ä½¿ç”¨ç©ºæ ¼æ›¿æ¢åŸå§‹å­—ç¬¦ä¸²ä¸­çš„åˆ¶è¡¨ä½\tã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-8-å…¶ä»–æ“ä½œ"><a href="#5-8-å…¶ä»–æ“ä½œ" class="headerlink" title="5.8 å…¶ä»–æ“ä½œ"></a>5.8 å…¶ä»–æ“ä½œ</h2><details class="folding-tag" blue><summary> å…¶ä»–æ“ä½œ </summary>              <div class='content'>              <div class="tabs" id="å‡½æ•°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å‡½æ•°-1">maketrans()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-2">translate()</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-3">å‡½æ•° 3</button></li><li class="tab"><button type="button" data-href="#å‡½æ•°-4">å‡½æ•° 4</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å‡½æ•°-1"><p><code>maketrans(str1,str2)</code></p><p>ä½¿ç”¨ä¸¤ä¸ªç­‰é•¿çš„å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå¯¹åº”ä½ç½®çš„å­—ç¬¦ç”Ÿæˆä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚</p><ul><li>str1&#96;æ˜¯key</li><li><code>str2</code>æ˜¯å€¼</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-2"><p><code>translate (dict)</code></p><p>å°†å­—ç¬¦ä¸²ä¸­çš„æŸäº›å­—ç¬¦æ›¿æ¢ä¸ºå…¶ä»–å­—ç¬¦æˆ–åˆ é™¤å®ƒä»¬ã€‚</p><p>å‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè¯¥å­—å…¸å°†æŒ‡å®šè¦æ›¿æ¢çš„å­—ç¬¦åŠå…¶æ›¿æ¢å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;hello world&quot;</span></span><br><span class="line">table = &#123;<span class="number">100</span>: <span class="number">101</span>, <span class="number">101</span>: <span class="literal">None</span>&#125;  <span class="comment"># 97æ˜¯å­—æ¯&quot;a&quot;çš„ASCIIç ï¼Œ98æ˜¯å­—æ¯&quot;b&quot;çš„ASCIIç ï¼Œ101æ˜¯å­—æ¯&quot;e&quot;çš„ASCIIç ï¼ŒNoneè¡¨ç¤ºåˆ é™¤è¯¥å­—ç¬¦</span></span><br><span class="line">new_s = s.translate(table)</span><br><span class="line"><span class="built_in">print</span>(new_s)  <span class="comment"># è¾“å‡º: &quot;hllo worle&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸­ï¼Œå­—æ¯eåˆ é™¤äº†ï¼Œå­—æ¯dæ›¿æ¢æˆäº†å­—æ¯eã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å‡½æ•°-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ä¸€äº›ä¸ä¼šçš„çŸ¥è¯†</title>
      <link href="/2023/05/16/c-%E4%B8%80%E4%BA%9B%E4%B8%8D%E4%BC%9A%E7%9A%84%E7%9F%A5%E8%AF%86/"/>
      <url>/2023/05/16/c-%E4%B8%80%E4%BA%9B%E4%B8%8D%E4%BC%9A%E7%9A%84%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/26.jpg" style="border-radius:10px" width="1000px"></img></p><div class="note info simple"><p>å‚è€ƒæ•™ç¨‹ï¼š<a href="https://www.runoob.com/cplusplus/cpp-tutorial.html">C++ æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p></div><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><h1 id="1-sizeof"><a href="#1-sizeof" class="headerlink" title="1. sizeof()"></a>1. sizeof()</h1><p>C++ä¸­çš„sizeofæ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œç”¨äºè®¡ç®—æ•°æ®ç±»å‹æˆ–å˜é‡æ‰€å ç”¨çš„å­—èŠ‚æ•°ã€‚sizeofå¯ä»¥ç”¨äºä»»ä½•æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ã€ç»“æ„ä½“ã€ç±»ç­‰ã€‚</p><p>sizeofçš„ä½œç”¨æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>åŠ¨æ€è®¡ç®—æ•°æ®ç±»å‹æˆ–å˜é‡æ‰€å ç”¨çš„å†…å­˜å¤§å°ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚</li><li>åœ¨åˆ†é…å†…å­˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨sizeofæ¥ç¡®å®šå†…å­˜å—çš„å¤§å°ã€‚</li><li>å¯ä»¥ç”¨æ¥ç¡®å®šæ•°ç»„çš„å¤§å°ï¼Œä¾‹å¦‚sizeof(arr)&#x2F;sizeof(arr[0])å¯ä»¥è®¡ç®—å‡ºæ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚</li><li>å¯ä»¥ç”¨æ¥åˆ¤æ–­ä¸åŒæ•°æ®ç±»å‹ä¹‹é—´çš„å·®å¼‚ã€‚</li><li>åœ¨ç¨‹åºä¸­ä½¿ç”¨sizeofå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li></ol><p>sizeofæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ“ä½œç¬¦ï¼Œå¯ä»¥å¸®åŠ©ç¨‹åºå‘˜åœ¨ç¼–å†™ç¨‹åºæ—¶æ›´å¥½åœ°æ§åˆ¶å†…å­˜çš„ä½¿ç”¨ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//è®¡ç®—æ•°æ®ç±»å‹æ‰€å ç”¨å­—èŠ‚æ•°</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(<span class="type">int</span>));<span class="comment">//4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(<span class="type">int</span>));<span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¡ç®—å˜é‡æ‰€å ç”¨å­—èŠ‚æ•°</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr1[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">char</span> b = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line"><span class="type">char</span> arr2[] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;v&#x27;</span>,<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;w&#x27;</span>&#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(a));<span class="comment">//4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(arr1));<span class="comment">//16</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(arr1)/<span class="built_in">sizeof</span>(arr1[<span class="number">0</span>]));<span class="comment">//è®¡ç®—arr1æ•°ç»„çš„é•¿åº¦ 4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(b));<span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(arr2));<span class="comment">//5</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sizeof</span>(arr2)/<span class="built_in">sizeof</span>(arr2[<span class="number">0</span>]));<span class="comment">//è®¡ç®—arr2æ•°ç»„çš„é•¿åº¦ 5</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-æŒ‡é’ˆ"><a href="#2-æŒ‡é’ˆ" class="headerlink" title="2.æŒ‡é’ˆ"></a>2.æŒ‡é’ˆ</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span>* str = <span class="string">&quot;hello world&quot;</span>;</span><br></pre></td></tr></table></figure><p>stræ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡çš„æŒ‡é’ˆå˜é‡ï¼Œåœ¨C++ä¸­ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œä»¥ç©ºå­—ç¬¦ï¼ˆâ€™\0â€™ï¼‰ç»“å°¾ã€‚å› æ­¤stræ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆï¼Œæ˜¯ä¸€ä¸ªåœ°å€ã€‚</p><p>constè¡¨ç¤ºä¸å¯å˜ï¼Œå¦‚æœå°è¯•æ›´æ”¹å­—ç¬¦ä¸²çš„å†…å®¹ï¼Œç¼–è¯‘å™¨å°†ä¼šæŠ¥é”™ã€‚</p><p>å¯ä»¥ç›´æ¥æ‰“å°strï¼Œä¹Ÿå¯ä»¥æ‰“å°å…¶ä¸­çš„æŸä¸ªå­—ç¬¦ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">const</span> <span class="type">char</span>* str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">  cout &lt;&lt; str &lt;&lt; endl;<span class="comment">// hello world</span></span><br><span class="line">cout &lt;&lt; *str &lt;&lt; endl;<span class="comment">// h</span></span><br><span class="line">cout &lt;&lt; *(str+<span class="number">1</span>) &lt;&lt; endl;<span class="comment">// e</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-string-amp-strå’Œchar-s"><a href="#3-string-amp-strå’Œchar-s" class="headerlink" title="3. string&amp; strå’Œchar* s"></a>3. string&amp; strå’Œchar* s</h1><p>string&amp; stræ˜¯ä¸€ä¸ªC++ä¸­çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…·æœ‰ä¸€ç³»åˆ—çš„æ–¹æ³•å’Œå±æ€§ï¼Œæ”¯æŒåŠ¨æ€å†…å­˜åˆ†é…å’Œè‡ªåŠ¨é‡Šæ”¾ç­‰åŠŸèƒ½ã€‚å®ƒå¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦é‡è½½æ¥å®ç°å­—ç¬¦ä¸²çš„æ“ä½œï¼Œå¦‚è¿æ¥ã€æ¯”è¾ƒã€æŸ¥æ‰¾ç­‰ã€‚</p><p>è€Œchar* sæ˜¯ä¸€ä¸ªCè¯­è¨€ä¸­çš„å­—ç¬¦æŒ‡é’ˆï¼Œå®ƒæ˜¯ä¸€ä¸ªç®€å•çš„æŒ‡é’ˆç±»å‹ï¼ŒæŒ‡å‘ä¸€ä¸ªä»¥â€™\0â€™ç»“å°¾çš„å­—ç¬¦æ•°ç»„ã€‚å®ƒä¸èƒ½è‡ªåŠ¨åˆ†é…æˆ–é‡Šæ”¾å†…å­˜ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ç©ºé—´ã€‚å®ƒçš„æ“ä½œéœ€è¦ä½¿ç”¨ä¸€äº›Cè¯­è¨€ä¸­çš„åº“å‡½æ•°ï¼Œå¦‚strcpyã€strcatã€strcmpç­‰ã€‚</p><p>å› æ­¤ï¼Œstring&amp; strå’Œchar* sçš„åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¯æŒåŠ¨æ€å†…å­˜åˆ†é…å’Œè‡ªåŠ¨é‡Šæ”¾ï¼Œåè€…æ˜¯ä¸€ä¸ªç®€å•çš„æŒ‡é’ˆç±»å‹ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ç©ºé—´ã€‚å‰è€…æ›´åŠ é«˜çº§å’Œå®‰å…¨ï¼Œåè€…æ›´åŠ åº•å±‚å’Œçµæ´»ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨string&amp; str</span></span><br><span class="line">    string str = <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">    str += <span class="string">&quot; I&#x27;m a C++ programmer.&quot;</span>;</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨char* s</span></span><br><span class="line">    <span class="type">char</span> s[] = <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line">    cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">strcat</span>(s, <span class="string">&quot; I&#x27;m a C programmer.&quot;</span>);</span><br><span class="line">    cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¾“å‡ºç»“æœ</span><br><span class="line">Hello, world!</span><br><span class="line">Hello, world! I<span class="number">&#x27;</span>m a C++ programmer.</span><br><span class="line">Hello, world!</span><br><span class="line">Hello, world! I<span class="number">&#x27;</span>m a C programmer.</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨string&amp; strå¯ä»¥ç›´æ¥ä½¿ç”¨è¿ç®—ç¬¦é‡è½½æ¥è¿›è¡Œå­—ç¬¦ä¸²çš„æ“ä½œï¼Œè€Œä½¿ç”¨char* séœ€è¦ä½¿ç”¨åº“å‡½æ•°æ¥å®ç°å­—ç¬¦ä¸²çš„æ“ä½œã€‚åŒæ—¶ï¼Œä½¿ç”¨string&amp; strå¯ä»¥é¿å…æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œæ›´åŠ å®‰å…¨å’Œé«˜çº§ã€‚</p><h1 id="4-å‡½æ•°å‚æ•°ä¼ å…¥å¯¹è±¡å¼•ç”¨ä¸ç›´æ¥ä¼ å…¥åŒºåˆ«"><a href="#4-å‡½æ•°å‚æ•°ä¼ å…¥å¯¹è±¡å¼•ç”¨ä¸ç›´æ¥ä¼ å…¥åŒºåˆ«" class="headerlink" title="4. å‡½æ•°å‚æ•°ä¼ å…¥å¯¹è±¡å¼•ç”¨ä¸ç›´æ¥ä¼ å…¥åŒºåˆ«"></a>4. å‡½æ•°å‚æ•°ä¼ å…¥å¯¹è±¡å¼•ç”¨ä¸ç›´æ¥ä¼ å…¥åŒºåˆ«</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector01</span><span class="params">(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::const_iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line"><span class="comment">// *it = 10000;</span></span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector02</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">*it = <span class="number">10000</span>;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector03</span><span class="params">(vector&lt;<span class="type">int</span>&gt; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">*it = <span class="number">20000</span>;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector04</span><span class="params">(vector&lt;<span class="type">int</span>&gt; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector01</span>(v);<span class="comment">//0 1 2 3 4 5 6 7 8 9 </span></span><br><span class="line"><span class="built_in">printVector02</span>(v);<span class="comment">//10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 </span></span><br><span class="line"><span class="built_in">printVector04</span>(v);<span class="comment">//10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 </span></span><br><span class="line"><span class="built_in">printVector03</span>(v);<span class="comment">//20000 20000 20000 20000 20000 20000 20000 20000 20000 20000 </span></span><br><span class="line"><span class="built_in">printVector04</span>(v);<span class="comment">//10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 </span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‚æ•°<code>&amp;v</code>è¡¨ç¤ºä¼ é€’çš„æ˜¯vectorå¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«çš„å‰¯æœ¬ã€æ‹·è´ã€‘ã€‚ä½¿ç”¨å¼•ç”¨ä½œä¸ºå‚æ•°å¯ä»¥é¿å…å‡½æ•°è°ƒç”¨æ—¶å‘ç”Ÿä¸å¿…è¦çš„æ‹·è´ï¼Œæé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚å¦‚æœä½¿ç”¨<code>v</code>ä½œä¸ºå‚æ•°ï¼Œåˆ™ä¼šäº§ç”Ÿä¸€æ¬¡æ‹·è´æ„é€ ï¼Œå¢åŠ ç³»ç»Ÿå¼€é”€å’Œæ—¶é—´æ¶ˆè€—ã€‚åŒæ—¶ï¼Œä½¿ç”¨å¼•ç”¨ä½œä¸ºå‚æ•°å¯ä»¥ä¿è¯å‡½æ•°å†…éƒ¨å¯¹å‚æ•°çš„ä¿®æ”¹èƒ½å¤Ÿåæ˜ åœ¨å‡½æ•°å¤–éƒ¨ã€‚</p><p>ä¸Šè¿°<code>printVector01</code>å‡½æ•°ä¼ å…¥çš„å¯¹è±¡ä¸­ç”¨<code>const</code>ä¿®é¥°ï¼Œè¡¨ç¤ºäº†æ­¤å¯¹è±¡ä¸å¯æ›´æ”¹ï¼Œæ­¤æ—¶å¿…é¡»è¦å°†è¿­ä»£å™¨æ”¹ä¸º<code>const_iterator</code>è¡¨ç¤ºåªè¯»ï¼Œæ‰èƒ½ä¿è¯ä¸æŠ¥é”™ã€‚æ­¤æ—¶ä½¿ç”¨<code>*it = 10000;</code>ä¼šå‘ç”ŸæŠ¥é”™ã€‚</p><p><code>printVector02</code>å‡½æ•°ä¼ å…¥çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œä½¿ç”¨<code>*it = 10000</code>ä¿®æ”¹ äº†<code>v</code>çš„å€¼ï¼Œæ‰“å°å‘ç°<code>v</code>ä¸­çš„å€¼å·²æ”¹å˜ï¼Œç„¶åè°ƒç”¨<code>printVector04</code>å‡½æ•°æ‰“å°å‡½æ•°å¤–éƒ¨çš„<code>v</code>ï¼Œå‘ç°å…¶ç»“æœå·²ç»æ”¹å˜ã€‚</p><p><code>printVector03</code>å‡½æ•°ä¼ å…¥çš„æ˜¯å¯¹è±¡æœ¬èº«çš„å‰¯æœ¬ï¼Œä½¿ç”¨<code>*it = 20000</code>ä¿®æ”¹ äº†<code>v</code>çš„å€¼ï¼Œæ‰“å°å‘ç°å‡½æ•°å†…éƒ¨çš„<code>v</code>ä¸­çš„å€¼å·²æ”¹å˜ï¼Œç„¶åè°ƒç”¨<code>printVector04</code>å‡½æ•°æ‰“å°å‡½æ•°å¤–éƒ¨çš„<code>v</code>ï¼Œå‘ç°å…¶ç»“æœä¸å˜ã€‚</p><h1 id="5-rand"><a href="#5-rand" class="headerlink" title="5. rand()"></a>5. rand()</h1><h1 id="6-gt-ä¸-çš„åŒºåˆ«"><a href="#6-gt-ä¸-çš„åŒºåˆ«" class="headerlink" title="6. -&gt;ä¸.çš„åŒºåˆ«"></a>6. -&gt;ä¸.çš„åŒºåˆ«</h1><h1 id="7-auto"><a href="#7-auto" class="headerlink" title="7. auto"></a>7. auto</h1><p><a href="https://blog.csdn.net/lwgkzl/article/details/82110068">c++ autoåŸºæœ¬ç”¨æ³•_c++ä¸­autoçš„ç”¨æ³•_lwgkzlçš„åšå®¢-CSDNåšå®¢</a></p><h1 id="8-std"><a href="#8-std" class="headerlink" title="8. std::"></a>8. std::</h1><p><a href="https://blog.csdn.net/CSDN_fzs/article/details/105678692">ã€C++ã€‘ä¸€æ–‡ææ‡‚C++ä¸­çš„stdï¼šï¼šæ˜¯ä»€ä¹ˆ_c++ std::_ç‹®å­ç‹é‡åŒ–çš„åšå®¢-CSDNåšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++æé«˜ç¼–ç¨‹</title>
      <link href="/2023/05/16/c-%E6%8F%90%E9%AB%98%E7%BC%96%E7%A8%8B/"/>
      <url>/2023/05/16/c-%E6%8F%90%E9%AB%98%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><a href="https://picbed.dai2yutou.space/web_img/26.jpg">https://picbed.dai2yutou.space/web_img/26.jpg</a><br><img src="https://picbed.dai2yutou.space/web_img/26.jpg" style="border-radius:10px" width="1000px"></img></p><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><ul><li>é’ˆå¯¹C++<strong>æ³›å‹ç¼–ç¨‹</strong>å’Œ<strong>STL</strong>æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++æ›´æ·±å±‚çš„ä½¿ç”¨</li></ul><h2 id="ä¸€ã€æ¨¡æ¿"><a href="#ä¸€ã€æ¨¡æ¿" class="headerlink" title="ä¸€ã€æ¨¡æ¿"></a>ä¸€ã€æ¨¡æ¿</h2><h3 id="1-1-æ¨¡æ¿çš„æ¦‚å¿µ"><a href="#1-1-æ¨¡æ¿çš„æ¦‚å¿µ" class="headerlink" title="1.1 æ¨¡æ¿çš„æ¦‚å¿µ"></a>1.1 æ¨¡æ¿çš„æ¦‚å¿µ</h3><p>æ¨¡æ¿å°±æ˜¯å»ºç«‹<strong>é€šç”¨çš„æ¨¡å…·</strong>ï¼Œå¤§å¤§<strong>æé«˜å¤ç”¨æ€§</strong></p><p>ä¾‹å¦‚ç”Ÿæ´»ä¸­çš„æ¨¡æ¿</p><p>ä¸€å¯¸ç…§ç‰‡æ¨¡æ¿ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/1.png" alt="1547105026929"></p><p>PPTæ¨¡æ¿ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/2.png" alt="1547103297864"></p><p><img src="https://picbed.dai2yutou.space/article_img/c++/3.png" alt="1547103359158"></p><p>æ¨¡æ¿çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ¨¡æ¿ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¡†æ¶</li><li>æ¨¡æ¿çš„é€šç”¨å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><h3 id="1-2-å‡½æ•°æ¨¡æ¿"><a href="#1-2-å‡½æ•°æ¨¡æ¿" class="headerlink" title="1.2 å‡½æ•°æ¨¡æ¿"></a>1.2 å‡½æ•°æ¨¡æ¿</h3><ul><li><p>C++å¦ä¸€ç§ç¼–ç¨‹æ€æƒ³ç§°ä¸º <strong>æ³›å‹ç¼–ç¨‹</strong> ï¼Œä¸»è¦åˆ©ç”¨çš„æŠ€æœ¯å°±æ˜¯æ¨¡æ¿</p></li><li><p>C++æä¾›ä¸¤ç§æ¨¡æ¿æœºåˆ¶:<strong>å‡½æ•°æ¨¡æ¿</strong>å’Œ<strong>ç±»æ¨¡æ¿</strong></p></li></ul><h4 id="1-2-1-å‡½æ•°æ¨¡æ¿è¯­æ³•"><a href="#1-2-1-å‡½æ•°æ¨¡æ¿è¯­æ³•" class="headerlink" title="1.2.1 å‡½æ•°æ¨¡æ¿è¯­æ³•"></a>1.2.1 å‡½æ•°æ¨¡æ¿è¯­æ³•</h4><p>å‡½æ•°æ¨¡æ¿ä½œç”¨ï¼š</p><p>å»ºç«‹ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå…¶å‡½æ•°è¿”å›å€¼ç±»å‹å’Œå½¢å‚ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">å‡½æ•°å£°æ˜æˆ–å®šä¹‰</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template  â€”  å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename  â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨classä»£æ›¿</p><p>T    â€”   é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢æ•´å‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swapInt</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢æµ®ç‚¹å‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swapDouble</span><span class="params">(<span class="type">double</span>&amp; a, <span class="type">double</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">double</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;<span class="comment">//å£°æ˜ä¸€ä¸ªæ¨¡æ¿ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨åé¢ä»£ç ä¸­ç´§è·Ÿç€çš„Tä¸è¦æŠ¥é”™ï¼ŒTæ˜¯ä¸€ä¸ªé€šç”¨æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//swapInt(a, b);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿å®ç°äº¤æ¢</span></span><br><span class="line"><span class="comment">//1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼</span></span><br><span class="line"><span class="built_in">mySwap</span>(a, b);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</span></span><br><span class="line"><span class="built_in">mySwap</span>&lt;<span class="type">int</span>&gt;(a, b);<span class="comment">//è¿™é‡Œçš„intç›´æ¥æŒ‡å®šäº†æ¨¡æ¿ä¸­Tæ˜¯int</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å‡½æ•°æ¨¡æ¿åˆ©ç”¨å…³é”®å­— template</li><li>ä½¿ç”¨å‡½æ•°æ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</li><li>æ¨¡æ¿çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å¤ç”¨æ€§ï¼Œå°†ç±»å‹å‚æ•°åŒ–</li></ul><h4 id="1-2-2-å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹"><a href="#1-2-2-å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹" class="headerlink" title="1.2.2 å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹"></a>1.2.2 å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹</h4><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</p></li><li><p>æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap</span>(a, b); <span class="comment">// æ­£ç¡®ï¼Œå¯ä»¥æ¨å¯¼å‡ºä¸€è‡´çš„T</span></span><br><span class="line"><span class="comment">//mySwap(a, c); // é”™è¯¯ï¼Œæ¨å¯¼ä¸å‡ºä¸€è‡´çš„Tç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//func(); //é”™è¯¯ï¼Œæ¨¡æ¿ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»ç¡®å®šå‡ºTçš„ç±»å‹</span></span><br><span class="line"><span class="built_in">func</span>&lt;<span class="type">int</span>&gt;(); <span class="comment">//åˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œç»™Tä¸€ä¸ªç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨è¯¥æ¨¡æ¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ä½¿ç”¨æ¨¡æ¿æ—¶å¿…é¡»ç¡®å®šå‡ºé€šç”¨æ•°æ®ç±»å‹Tï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¨å¯¼å‡ºä¸€è‡´çš„ç±»å‹</li></ul><h4 id="1-2-3-å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹"><a href="#1-2-3-å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹" class="headerlink" title="1.2.3 å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹"></a>1.2.3 å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><ul><li>åˆ©ç”¨å‡½æ•°æ¨¡æ¿å°è£…ä¸€ä¸ªæ’åºçš„å‡½æ•°ï¼Œå¯ä»¥å¯¹<strong>ä¸åŒæ•°æ®ç±»å‹æ•°ç»„</strong>è¿›è¡Œæ’åº</li><li>æ’åºè§„åˆ™ä»å¤§åˆ°å°ï¼Œæ’åºç®—æ³•ä¸º<strong>é€‰æ‹©æ’åº</strong></li><li>åˆ†åˆ«åˆ©ç”¨<strong>charæ•°ç»„</strong>å’Œ<strong>intæ•°ç»„</strong>è¿›è¡Œæµ‹è¯•</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äº¤æ¢çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T &amp;a, T&amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="comment">// ä¹Ÿå¯ä»¥æ›¿æ¢æˆtypename</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨é€‰æ‹©æ’åºï¼Œè¿›è¡Œå¯¹æ•°ç»„ä»å¤§åˆ°å°çš„æ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySort</span><span class="params">(T arr[], <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> max = i; <span class="comment">//æœ€å¤§æ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; len; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[max] &lt; arr[j])</span><br><span class="line">&#123;</span><br><span class="line">max = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (max != i) <span class="comment">//å¦‚æœæœ€å¤§æ•°çš„ä¸‹æ ‡ä¸æ˜¯iï¼Œäº¤æ¢ä¸¤è€…</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">mySwap</span>(arr[max], arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printArray</span><span class="params">(T arr[], <span class="type">int</span> len)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•charæ•°ç»„</span></span><br><span class="line"><span class="type">char</span> charArr[] = <span class="string">&quot;bdcfeagh&quot;</span>;</span><br><span class="line"><span class="type">int</span> num = <span class="built_in">sizeof</span>(charArr) / <span class="built_in">sizeof</span>(<span class="type">char</span>);</span><br><span class="line"><span class="built_in">mySort</span>(charArr, num);</span><br><span class="line"><span class="built_in">printArray</span>(charArr, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•intæ•°ç»„</span></span><br><span class="line"><span class="type">int</span> intArr[] = &#123; <span class="number">7</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span> &#125;;</span><br><span class="line"><span class="type">int</span> num = <span class="built_in">sizeof</span>(intArr) / <span class="built_in">sizeof</span>(<span class="type">int</span>);</span><br><span class="line"><span class="built_in">mySort</span>(intArr, num);</span><br><span class="line"><span class="built_in">printArray</span>(intArr, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ¨¡æ¿å¯ä»¥æé«˜ä»£ç å¤ç”¨ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="1-2-4-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«"><a href="#1-2-4-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«" class="headerlink" title="1.2.4 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«"></a>1.2.4 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«</h4><p><strong>æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ï¼š</strong></p><ul><li>æ™®é€šå‡½æ•°è°ƒç”¨æ—¶å¯ä»¥å‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰</li><li>å‡½æ•°æ¨¡æ¿è°ƒç”¨æ—¶ï¼Œå¦‚æœåˆ©ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li><li>å¦‚æœåˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">myAdd01</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">myAdd02</span><span class="params">(T a, T b)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨å‡½æ•°æ¨¡æ¿æ—¶ï¼Œå¦‚æœç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢,å³éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">myAdd01</span>(a, c) &lt;&lt; endl; <span class="comment">//æ­£ç¡®ï¼Œå°†charç±»å‹çš„&#x27;c&#x27;éšå¼è½¬æ¢ä¸ºintç±»å‹  &#x27;c&#x27; å¯¹åº” ASCIIç  99</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//myAdd02(a, c); // æŠ¥é”™ï¼Œä½¿ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼æ—¶ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">myAdd02</span>&lt;<span class="type">int</span>&gt;(a, c); <span class="comment">//æ­£ç¡®ï¼Œå¦‚æœç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œè°ƒç”¨å‡½æ•°æ¨¡æ¿ï¼Œå› ä¸ºå¯ä»¥è‡ªå·±ç¡®å®šé€šç”¨ç±»å‹T</p><h4 id="1-2-5-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™"><a href="#1-2-5-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™" class="headerlink" title="1.2.5 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™"></a>1.2.5 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™</h4><p>è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</li><li>å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</li><li>å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</li><li>å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿è°ƒç”¨è§„åˆ™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨çš„æ™®é€šå‡½æ•°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b, T c)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨é‡è½½çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//1ã€å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="comment">// æ³¨æ„ å¦‚æœå‘Šè¯‰ç¼–è¯‘å™¨  æ™®é€šå‡½æ•°æ˜¯æœ‰çš„ï¼Œä½†åªæ˜¯å£°æ˜æ²¡æœ‰å®ç°ï¼Œæˆ–è€…ä¸åœ¨å½“å‰æ–‡ä»¶å†…å®ç°ï¼Œå°±ä¼šæŠ¥é”™æ‰¾ä¸åˆ°</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(a, b); <span class="comment">//è°ƒç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line">myPrint&lt;&gt;(a, b); <span class="comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</span></span><br><span class="line"><span class="type">int</span> c = <span class="number">30</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(a, b, c); <span class="comment">//è°ƒç”¨é‡è½½çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4ã€ å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="type">char</span> c1 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> c2 = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(c1, c2); <span class="comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ—¢ç„¶æä¾›äº†å‡½æ•°æ¨¡æ¿ï¼Œæœ€å¥½å°±ä¸è¦æä¾›æ™®é€šå‡½æ•°ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°äºŒä¹‰æ€§</p><h4 id="1-2-6-æ¨¡æ¿çš„å±€é™æ€§"><a href="#1-2-6-æ¨¡æ¿çš„å±€é™æ€§" class="headerlink" title="1.2.6 æ¨¡æ¿çš„å±€é™æ€§"></a>1.2.6 æ¨¡æ¿çš„å±€é™æ€§</h4><p><strong>å±€é™æ€§ï¼š</strong></p><ul><li>æ¨¡æ¿çš„é€šç”¨æ€§å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><p><strong>ä¾‹å¦‚ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">   a = b;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­æä¾›çš„èµ‹å€¼æ“ä½œï¼Œå¦‚æœä¼ å…¥çš„aå’Œbæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå°±æ— æ³•å®ç°äº†</p><p>å†ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">   <span class="keyword">if</span>(a &gt; b) &#123; ... &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœTçš„æ•°æ®ç±»å‹ä¼ å…¥çš„æ˜¯åƒPersonè¿™æ ·çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¹Ÿæ— æ³•æ­£å¸¸è¿è¡Œ</p><p>å› æ­¤C++ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæä¾›æ¨¡æ¿çš„é‡è½½ï¼Œå¯ä»¥ä¸ºè¿™äº›<strong>ç‰¹å®šçš„ç±»å‹</strong>æä¾›<strong>å…·ä½“åŒ–çš„æ¨¡æ¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (a ** b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…·ä½“åŒ–ï¼Œæ˜¾ç¤ºå…·ä½“åŒ–çš„åŸå‹å’Œå®šæ„æ€ä»¥template&lt;&gt;å¼€å¤´ï¼Œå¹¶é€šè¿‡åç§°æ¥æŒ‡å‡ºç±»å‹</span></span><br><span class="line"><span class="comment">//å…·ä½“åŒ–ä¼˜å…ˆäºå¸¸è§„æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(Person &amp;p1, Person &amp;p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> ( p1.m_Name  ** p2.m_Name &amp;&amp; p1.m_Age ** p2.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">myCompare</span>(a, b);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a ** b &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a != b &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¸ä¼šè°ƒç”¨æ™®é€šçš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="comment">//å¯ä»¥åˆ›å»ºå…·ä½“åŒ–çš„Personæ•°æ®ç±»å‹çš„æ¨¡æ¿ï¼Œç”¨äºç‰¹æ®Šå¤„ç†è¿™ä¸ªç±»å‹</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">myCompare</span>(p1, p2);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1 ** p2 &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1 != p2 &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨å…·ä½“åŒ–çš„æ¨¡æ¿ï¼Œå¯ä»¥è§£å†³è‡ªå®šä¹‰ç±»å‹çš„é€šç”¨åŒ–</li><li>å­¦ä¹ æ¨¡æ¿å¹¶ä¸æ˜¯ä¸ºäº†å†™æ¨¡æ¿ï¼Œè€Œæ˜¯åœ¨STLèƒ½å¤Ÿè¿ç”¨ç³»ç»Ÿæä¾›çš„æ¨¡æ¿</li></ul><h3 id="1-3-ç±»æ¨¡æ¿"><a href="#1-3-ç±»æ¨¡æ¿" class="headerlink" title="1.3 ç±»æ¨¡æ¿"></a>1.3 ç±»æ¨¡æ¿</h3><h4 id="1-3-1-ç±»æ¨¡æ¿è¯­æ³•"><a href="#1-3-1-ç±»æ¨¡æ¿è¯­æ³•" class="headerlink" title="1.3.1 ç±»æ¨¡æ¿è¯­æ³•"></a>1.3.1 ç±»æ¨¡æ¿è¯­æ³•</h4><p>ç±»æ¨¡æ¿ä½œç”¨ï¼š</p><ul><li>å»ºç«‹ä¸€ä¸ªé€šç”¨ç±»ï¼Œç±»ä¸­çš„æˆå‘˜ æ•°æ®ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</li></ul><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">ç±»</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template  â€”  å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename  â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨classä»£æ›¿</p><p>T    â€”   é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span>&gt; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// æŒ‡å®šNameType ä¸ºstringç±»å‹ï¼ŒAgeType ä¸º intç±»å‹</span></span><br><span class="line">Person&lt;string, <span class="type">int</span>&gt;<span class="built_in">P1</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">999</span>);</span><br><span class="line">P1.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿è¯­æ³•ç›¸ä¼¼ï¼Œåœ¨å£°æ˜æ¨¡æ¿templateåé¢åŠ ç±»ï¼Œæ­¤ç±»ç§°ä¸ºç±»æ¨¡æ¿</p><h4 id="1-3-2-ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«"><a href="#1-3-2-ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«" class="headerlink" title="1.3.2 ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«"></a>1.3.2 ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«</h4><p>ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p><ol><li>ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</li><li>ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span> = <span class="type">int</span>&gt; </span><br><span class="line"><span class="keyword">class</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// Person p(&quot;å­™æ‚Ÿç©º&quot;, 1000); // é”™è¯¯ ç±»æ¨¡æ¿ä½¿ç”¨æ—¶å€™ï¼Œä¸å¯ä»¥ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼</span></span><br><span class="line">Person &lt;string ,<span class="type">int</span>&gt;<span class="built_in">p</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">1000</span>); <span class="comment">//å¿…é¡»ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œä½¿ç”¨ç±»æ¨¡æ¿</span></span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string&gt; <span class="built_in">p</span>(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">999</span>); <span class="comment">//ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨ å¯ä»¥æŒ‡å®šé»˜è®¤å‚æ•°</span></span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç±»æ¨¡æ¿ä½¿ç”¨åªèƒ½ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹æ–¹å¼</li><li>ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨å¯ä»¥æœ‰é»˜è®¤å‚æ•°</li></ul><h4 id="1-3-3-ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº"><a href="#1-3-3-ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº" class="headerlink" title="1.3.3 ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº"></a>1.3.3 ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº</h4><p>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°å’Œæ™®é€šç±»ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯æœ‰åŒºåˆ«çš„ï¼š</p><ul><li>æ™®é€šç±»ä¸­çš„æˆå‘˜å‡½æ•°ä¸€å¼€å§‹å°±å¯ä»¥åˆ›å»º</li><li>ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°åœ¨è°ƒç”¨æ—¶æ‰åˆ›å»º</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person1 show&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person2 show&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œè€Œæ˜¯åœ¨æ¨¡æ¿è°ƒç”¨æ—¶å†ç”Ÿæˆ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123; obj.<span class="built_in">showPerson1</span>(); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun2</span><span class="params">()</span> </span>&#123; obj.<span class="built_in">showPerson2</span>(); &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyClass&lt;Person1&gt; m;</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">fun1</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//m.fun2();//ç¼–è¯‘ä¼šå‡ºé”™ï¼Œè¯´æ˜å‡½æ•°è°ƒç”¨æ‰ä¼šå»åˆ›å»ºæˆå‘˜å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œåœ¨è°ƒç”¨æ—¶æ‰å»åˆ›å»º</p><h4 id="1-3-4-ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°"><a href="#1-3-4-ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°" class="headerlink" title="1.3.4 ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°"></a>1.3.4 ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>ç±»æ¨¡æ¿å®ä¾‹åŒ–å‡ºçš„å¯¹è±¡ï¼Œå‘å‡½æ•°ä¼ å‚çš„æ–¹å¼</li></ul><p>ä¸€å…±æœ‰ä¸‰ç§ä¼ å…¥æ–¹å¼ï¼š</p><ol><li>æŒ‡å®šä¼ å…¥çš„ç±»å‹   â€” ç›´æ¥æ˜¾ç¤ºå¯¹è±¡çš„æ•°æ®ç±»å‹</li><li>å‚æ•°æ¨¡æ¿åŒ–           â€” å°†å¯¹è±¡ä¸­çš„å‚æ•°å˜ä¸ºæ¨¡æ¿è¿›è¡Œä¼ é€’</li><li>æ•´ä¸ªç±»æ¨¡æ¿åŒ–       â€” å°†è¿™ä¸ªå¯¹è±¡ç±»å‹ æ¨¡æ¿åŒ–è¿›è¡Œä¼ é€’</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span> = <span class="type">int</span>&gt; </span><br><span class="line"><span class="keyword">class</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€æŒ‡å®šä¼ å…¥çš„ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson1</span><span class="params">(Person&lt;string, <span class="type">int</span>&gt; &amp;p)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printPerson1</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‚æ•°æ¨¡æ¿åŒ–</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt;&amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;T1çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;T2çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T2).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">90</span>);</span><br><span class="line"><span class="built_in">printPerson2</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ•´ä¸ªç±»æ¨¡æ¿åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson3</span><span class="params">(T &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Tçš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;å”åƒ§&quot;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">printPerson3</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é€šè¿‡ç±»æ¨¡æ¿åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸‰ç§æ–¹å¼å‘å‡½æ•°ä¸­è¿›è¡Œä¼ å‚</li><li>ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›æ˜¯ç¬¬ä¸€ç§ï¼šæŒ‡å®šä¼ å…¥çš„ç±»å‹</li></ul><h4 id="1-3-5-ç±»æ¨¡æ¿ä¸ç»§æ‰¿"><a href="#1-3-5-ç±»æ¨¡æ¿ä¸ç»§æ‰¿" class="headerlink" title="1.3.5 ç±»æ¨¡æ¿ä¸ç»§æ‰¿"></a>1.3.5 ç±»æ¨¡æ¿ä¸ç»§æ‰¿</h4><p>å½“ç±»æ¨¡æ¿ç¢°åˆ°ç»§æ‰¿æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å½“å­ç±»ç»§æ‰¿çš„çˆ¶ç±»æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿æ—¶ï¼Œå­ç±»åœ¨å£°æ˜çš„æ—¶å€™ï¼Œè¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹</li><li>å¦‚æœä¸æŒ‡å®šï¼Œç¼–è¯‘å™¨æ— æ³•ç»™å­ç±»åˆ†é…å†…å­˜</li><li>å¦‚æœæƒ³çµæ´»æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹ï¼Œå­ç±»ä¹Ÿéœ€å˜ä¸ºç±»æ¨¡æ¿</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line">T m;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class Son:public Base  //é”™è¯¯ï¼Œc++ç¼–è¯‘éœ€è¦ç»™å­ç±»åˆ†é…å†…å­˜ï¼Œå¿…é¡»çŸ¥é“çˆ¶ç±»ä¸­Tçš„ç±»å‹æ‰å¯ä»¥å‘ä¸‹ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base&lt;<span class="type">int</span>&gt; <span class="comment">//å¿…é¡»æŒ‡å®šä¸€ä¸ªç±»å‹</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ç»§æ‰¿ç±»æ¨¡æ¿ ,å¯ä»¥ç”¨T2æŒ‡å®šçˆ¶ç±»ä¸­çš„Tç±»å‹</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span> :<span class="keyword">public</span> Base&lt;T2&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son2</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="built_in">typeid</span>(T1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">typeid</span>(T2).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son2&lt;<span class="type">int</span>, <span class="type">char</span>&gt; child1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœçˆ¶ç±»æ˜¯ç±»æ¨¡æ¿ï¼Œå­ç±»éœ€è¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„æ•°æ®ç±»å‹</p><h4 id="1-3-6-ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°"><a href="#1-3-6-ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°" class="headerlink" title="1.3.6 ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°"></a>1.3.6 ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</h4><p>å­¦ä¹ ç›®æ ‡ï¼šèƒ½å¤ŸæŒæ¡ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°ç±»å†…å£°æ˜</span></span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age);</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Person&lt;T1, T2&gt;::<span class="built_in">Person</span>(T1 name, T2 age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Person&lt;T1, T2&gt;::<span class="built_in">showPerson</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°æ—¶ï¼Œéœ€è¦åŠ ä¸Šæ¨¡æ¿å‚æ•°åˆ—è¡¨</p><h4 id="1-3-7-ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™"><a href="#1-3-7-ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™" class="headerlink" title="1.3.7 ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™"></a>1.3.7 ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°åˆ†æ–‡ä»¶ç¼–å†™äº§ç”Ÿçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹å¼</li></ul><p>é—®é¢˜ï¼š</p><ul><li>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯åœ¨è°ƒç”¨é˜¶æ®µï¼Œå¯¼è‡´åˆ†æ–‡ä»¶ç¼–å†™æ—¶é“¾æ¥ä¸åˆ°</li></ul><p>è§£å†³ï¼š</p><ul><li>è§£å†³æ–¹å¼1ï¼šç›´æ¥åŒ…å«.cppæºæ–‡ä»¶</li><li>è§£å†³æ–¹å¼2ï¼šå°†å£°æ˜å’Œå®ç°å†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶æ›´æ”¹åç¼€åä¸º.hppï¼Œhppæ˜¯çº¦å®šçš„åç§°ï¼Œå¹¶ä¸æ˜¯å¼ºåˆ¶</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>person.hppä¸­ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age);</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Person&lt;T1, T2&gt;::<span class="built_in">Person</span>(T1 name, T2 age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Person&lt;T1, T2&gt;::<span class="built_in">showPerson</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™.cppä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//#include &quot;person.h&quot;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;person.cpp&quot;</span> <span class="comment">//è§£å†³æ–¹å¼1ï¼ŒåŒ…å«cppæºæ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è§£å†³æ–¹å¼2ï¼Œå°†å£°æ˜å’Œå®ç°å†™åˆ°ä¸€èµ·ï¼Œæ–‡ä»¶åç¼€åæ”¹ä¸º.hpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;person.hpp&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä¸»æµçš„è§£å†³æ–¹å¼æ˜¯ç¬¬äºŒç§ï¼Œå°†ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°å†™åˆ°ä¸€èµ·ï¼Œå¹¶å°†åç¼€åæ”¹ä¸º.hpp</p><h4 id="1-3-8-ç±»æ¨¡æ¿ä¸å‹å…ƒ"><a href="#1-3-8-ç±»æ¨¡æ¿ä¸å‹å…ƒ" class="headerlink" title="1.3.8 ç±»æ¨¡æ¿ä¸å‹å…ƒ"></a>1.3.8 ç±»æ¨¡æ¿ä¸å‹å…ƒ</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿é…åˆå‹å…ƒå‡½æ•°çš„ç±»å†…å’Œç±»å¤–å®ç°</li></ul><p>å…¨å±€å‡½æ•°ç±»å†…å®ç° - ç›´æ¥åœ¨ç±»å†…å£°æ˜å‹å…ƒå³å¯</p><p>å…¨å±€å‡½æ•°ç±»å¤–å®ç° - éœ€è¦æå‰è®©ç¼–è¯‘å™¨çŸ¥é“å…¨å±€å‡½æ•°çš„å­˜åœ¨</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç° - å…ˆåšå‡½æ•°æ¨¡æ¿å£°æ˜ï¼Œä¸‹æ–¹åœ¨åšå‡½æ•°æ¨¡æ¿å®šä¹‰ï¼Œåœ¨åšå‹å…ƒ</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt; <span class="keyword">class</span> <span class="title class_">Person</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœå£°æ˜äº†å‡½æ•°æ¨¡æ¿ï¼Œå¯ä»¥å°†å®ç°å†™åˆ°åé¢ï¼Œå¦åˆ™éœ€è¦å°†å®ç°ä½“å†™åˆ°ç±»çš„å‰é¢è®©ç¼–è¯‘å™¨æå‰çœ‹åˆ°</span></span><br><span class="line"><span class="comment">//template&lt;class T1, class T2&gt; void printPerson2(Person&lt;T1, T2&gt; &amp; p); </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt; &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç±»å¤–å®ç° ---- å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//1ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ   ç±»å†…å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">printPerson</span><span class="params">(Person&lt;T1, T2&gt; &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">friend</span> <span class="type">void</span> printPerson2&lt;&gt;(Person&lt;T1, T2&gt; &amp; p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å…¨å±€å‡½æ•°åœ¨ç±»å†…å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="built_in">printPerson</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å…¨å±€å‡½æ•°åœ¨ç±»å¤–å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;Jerry&quot;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">printPerson2</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®å…¨å±€å‡½æ•°åšç±»å†…å®ç°ï¼Œç”¨æ³•ç®€å•ï¼Œè€Œä¸”ç¼–è¯‘å™¨å¯ä»¥ç›´æ¥è¯†åˆ«</p><h4 id="1-3-9-ç±»æ¨¡æ¿æ¡ˆä¾‹"><a href="#1-3-9-ç±»æ¨¡æ¿æ¡ˆä¾‹" class="headerlink" title="1.3.9 ç±»æ¨¡æ¿æ¡ˆä¾‹"></a>1.3.9 ç±»æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°:  å®ç°ä¸€ä¸ªé€šç”¨çš„æ•°ç»„ç±»ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>å¯ä»¥å¯¹å†…ç½®æ•°æ®ç±»å‹ä»¥åŠè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„æ•°æ®è¿›è¡Œå­˜å‚¨</li><li>å°†æ•°ç»„ä¸­çš„æ•°æ®å­˜å‚¨åˆ°å †åŒº</li><li>æ„é€ å‡½æ•°ä¸­å¯ä»¥ä¼ å…¥æ•°ç»„çš„å®¹é‡</li><li>æä¾›å¯¹åº”çš„æ‹·è´æ„é€ å‡½æ•°ä»¥åŠoperator&#x3D;é˜²æ­¢æµ…æ‹·è´é—®é¢˜</li><li>æä¾›å°¾æ’æ³•å’Œå°¾åˆ æ³•å¯¹æ•°ç»„ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ å’Œåˆ é™¤</li><li>å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ </li><li>å¯ä»¥è·å–æ•°ç»„ä¸­å½“å‰å…ƒç´ ä¸ªæ•°å’Œæ•°ç»„çš„å®¹é‡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>myArray.hppä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    </span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">int</span> capacity)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">const</span> MyArray &amp; arr)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = arr.m_Capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = arr.m_Size;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_Size; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å¦‚æœTä¸ºå¯¹è±¡ï¼Œè€Œä¸”è¿˜åŒ…å«æŒ‡é’ˆï¼Œå¿…é¡»éœ€è¦é‡è½½ = æ“ä½œç¬¦ï¼Œå› ä¸ºè¿™ä¸ªç­‰å·ä¸æ˜¯ æ„é€  è€Œæ˜¯èµ‹å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">// æ™®é€šç±»å‹å¯ä»¥ç›´æ¥= ä½†æ˜¯æŒ‡é’ˆç±»å‹éœ€è¦æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[i] = arr.pAddress[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½= æ“ä½œç¬¦  é˜²æ­¢æµ…æ‹·è´é—®é¢˜</span></span><br><span class="line">MyArray&amp; <span class="keyword">operator</span>=(<span class="type">const</span> MyArray&amp; myarray) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pAddress;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = myarray.m_Capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = myarray.m_Size;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_Size; i++) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[i] = myarray[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½[] æ“ä½œç¬¦  arr[0]</span></span><br><span class="line">T&amp; <span class="keyword">operator</span> [](<span class="type">int</span> index)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;pAddress[index]; <span class="comment">//ä¸è€ƒè™‘è¶Šç•Œï¼Œç”¨æˆ·è‡ªå·±å»å¤„ç†</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾æ’æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push_back</span><span class="params">(<span class="type">const</span> T &amp; val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Capacity ** <span class="keyword">this</span>-&gt;m_Size)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[<span class="keyword">this</span>-&gt;m_Size] = val;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Pop_back</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Size ** <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æ•°ç»„å®¹é‡</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getCapacity</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Capacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æ•°ç»„å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">int</span><span class="title">getSize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„</span></span><br><span class="line">~<span class="built_in">MyArray</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pAddress;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T * pAddress;  <span class="comment">//æŒ‡å‘ä¸€ä¸ªå †ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´å­˜å‚¨çœŸæ­£çš„æ•°æ®</span></span><br><span class="line"><span class="type">int</span> m_Capacity; <span class="comment">//å®¹é‡</span></span><br><span class="line"><span class="type">int</span> m_Size;   <span class="comment">// å¤§å°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿æ¡ˆä¾‹â€”æ•°ç»„ç±»å°è£….cppä¸­</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myArray.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printIntArray</span><span class="params">(MyArray&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">getSize</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">array1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">array1.<span class="built_in">Push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printIntArray</span>(array1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array1.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array1.<span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">array2</span><span class="params">(array1)</span></span>;</span><br><span class="line">array2.<span class="built_in">Pop_back</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printIntArray</span>(array2);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array2.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array2.<span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;&#125; </span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPersonArray</span><span class="params">(MyArray&lt;Person&gt;&amp; personArr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; personArr.<span class="built_in">getSize</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; personArr[i].m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; personArr[i].m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°ç»„</span></span><br><span class="line"><span class="function">MyArray&lt;Person&gt; <span class="title">pArray</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;éŸ©ä¿¡&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¦²å·±&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ç‹æ˜­å›&quot;</span>, <span class="number">15</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">24</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥æ•°æ®</span></span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p1);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p2);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p3);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p4);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printPersonArray</span>(pArray);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pArrayçš„å¤§å°ï¼š&quot;</span> &lt;&lt; pArray.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pArrayçš„å®¹é‡ï¼š&quot;</span> &lt;&lt; pArray.<span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>èƒ½å¤Ÿåˆ©ç”¨æ‰€å­¦çŸ¥è¯†ç‚¹å®ç°é€šç”¨çš„æ•°ç»„</p><h2 id="äºŒã€STLåˆè¯†"><a href="#äºŒã€STLåˆè¯†" class="headerlink" title="äºŒã€STLåˆè¯†"></a>äºŒã€STLåˆè¯†</h2><h3 id="2-1-STLçš„è¯ç”Ÿ"><a href="#2-1-STLçš„è¯ç”Ÿ" class="headerlink" title="2.1 STLçš„è¯ç”Ÿ"></a>2.1 STLçš„è¯ç”Ÿ</h3><ul><li><p>é•¿ä¹…ä»¥æ¥ï¼Œè½¯ä»¶ç•Œä¸€ç›´å¸Œæœ›å»ºç«‹ä¸€ç§å¯é‡å¤åˆ©ç”¨çš„ä¸œè¥¿</p></li><li><p>C++çš„<strong>é¢å‘å¯¹è±¡</strong>å’Œ<strong>æ³›å‹ç¼–ç¨‹</strong>æ€æƒ³ï¼Œç›®çš„å°±æ˜¯<strong>å¤ç”¨æ€§çš„æå‡</strong></p></li><li><p>å¤§å¤šæƒ…å†µä¸‹ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•éƒ½æœªèƒ½æœ‰ä¸€å¥—æ ‡å‡†,å¯¼è‡´è¢«è¿«ä»äº‹å¤§é‡é‡å¤å·¥ä½œ</p></li><li><p>ä¸ºäº†å»ºç«‹æ•°æ®ç»“æ„å’Œç®—æ³•çš„ä¸€å¥—æ ‡å‡†,è¯ç”Ÿäº†<strong>STL</strong></p></li></ul><h3 id="2-2-STLåŸºæœ¬æ¦‚å¿µ"><a href="#2-2-STLåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2.2 STLåŸºæœ¬æ¦‚å¿µ"></a>2.2 STLåŸºæœ¬æ¦‚å¿µ</h3><ul><li>STL(Standard Template Library,<strong>æ ‡å‡†æ¨¡æ¿åº“</strong>)</li><li>STL ä»å¹¿ä¹‰ä¸Šåˆ†ä¸º: <strong>å®¹å™¨(container) ç®—æ³•(algorithm) è¿­ä»£å™¨(iterator)</strong></li><li><strong>å®¹å™¨</strong>å’Œ<strong>ç®—æ³•</strong>ä¹‹é—´é€šè¿‡<strong>è¿­ä»£å™¨</strong>è¿›è¡Œæ— ç¼è¿æ¥ã€‚</li><li>STL å‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½é‡‡ç”¨äº†æ¨¡æ¿ç±»æˆ–è€…æ¨¡æ¿å‡½æ•°</li></ul><h3 id="2-3-STLå…­å¤§ç»„ä»¶"><a href="#2-3-STLå…­å¤§ç»„ä»¶" class="headerlink" title="2.3 STLå…­å¤§ç»„ä»¶"></a>2.3 STLå…­å¤§ç»„ä»¶</h3><p>STLå¤§ä½“åˆ†ä¸ºå…­å¤§ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯:<strong>å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€ä»¿å‡½æ•°ã€é€‚é…å™¨ï¼ˆé…æ¥å™¨ï¼‰ã€ç©ºé—´é…ç½®å™¨</strong></p><ol><li>å®¹å™¨ï¼šå„ç§æ•°æ®ç»“æ„ï¼Œå¦‚vectorã€listã€dequeã€setã€mapç­‰,ç”¨æ¥å­˜æ”¾æ•°æ®ã€‚</li><li>ç®—æ³•ï¼šå„ç§å¸¸ç”¨çš„ç®—æ³•ï¼Œå¦‚sortã€findã€copyã€for_eachç­‰</li><li>è¿­ä»£å™¨ï¼šæ‰®æ¼”äº†å®¹å™¨ä¸ç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚ã€‚</li><li>ä»¿å‡½æ•°ï¼šè¡Œä¸ºç±»ä¼¼å‡½æ•°ï¼Œå¯ä½œä¸ºç®—æ³•çš„æŸç§ç­–ç•¥ã€‚</li><li>é€‚é…å™¨ï¼šä¸€ç§ç”¨æ¥ä¿®é¥°å®¹å™¨æˆ–è€…ä»¿å‡½æ•°æˆ–è¿­ä»£å™¨æ¥å£çš„ä¸œè¥¿ã€‚</li><li>ç©ºé—´é…ç½®å™¨ï¼šè´Ÿè´£ç©ºé—´çš„é…ç½®ä¸ç®¡ç†ã€‚</li></ol><h3 id="2-4-STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨"><a href="#2-4-STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨" class="headerlink" title="2.4  STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨"></a>2.4  STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨</h3><p><strong>å®¹å™¨ï¼š</strong>ç½®ç‰©ä¹‹æ‰€ä¹Ÿ</p><p>STL<strong>å®¹å™¨</strong>å°±æ˜¯å°†è¿ç”¨<strong>æœ€å¹¿æ³›çš„ä¸€äº›æ•°æ®ç»“æ„</strong>å®ç°å‡ºæ¥</p><p>å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šæ•°ç»„, é“¾è¡¨,æ ‘, æ ˆ, é˜Ÿåˆ—, é›†åˆ, æ˜ å°„è¡¨ ç­‰</p><p>è¿™äº›å®¹å™¨åˆ†ä¸º<strong>åºåˆ—å¼å®¹å™¨</strong>å’Œ<strong>å…³è”å¼å®¹å™¨</strong>ä¸¤ç§:</p><p>â€‹<strong>åºåˆ—å¼å®¹å™¨</strong>:å¼ºè°ƒå€¼çš„æ’åºï¼Œåºåˆ—å¼å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ å‡æœ‰å›ºå®šçš„ä½ç½®ã€‚<br>â€‹<strong>å…³è”å¼å®¹å™¨</strong>:äºŒå‰æ ‘ç»“æ„ï¼Œå„å…ƒç´ ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„ç‰©ç†ä¸Šçš„é¡ºåºå…³ç³»</p><p><strong>ç®—æ³•ï¼š</strong>é—®é¢˜ä¹‹è§£æ³•ä¹Ÿ</p><p>æœ‰é™çš„æ­¥éª¤ï¼Œè§£å†³é€»è¾‘æˆ–æ•°å­¦ä¸Šçš„é—®é¢˜ï¼Œè¿™ä¸€é—¨å­¦ç§‘æˆ‘ä»¬å«åšç®—æ³•(Algorithms)</p><p>ç®—æ³•åˆ†ä¸º:<strong>è´¨å˜ç®—æ³•</strong>å’Œ<strong>éè´¨å˜ç®—æ³•</strong>ã€‚</p><p>è´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ çš„å†…å®¹ã€‚ä¾‹å¦‚æ‹·è´ï¼Œæ›¿æ¢ï¼Œåˆ é™¤ç­‰ç­‰</p><p>éè´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¸ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ å†…å®¹ï¼Œä¾‹å¦‚æŸ¥æ‰¾ã€è®¡æ•°ã€éå†ã€å¯»æ‰¾æå€¼ç­‰ç­‰</p><p><strong>è¿­ä»£å™¨ï¼š</strong>å®¹å™¨å’Œç®—æ³•ä¹‹é—´ç²˜åˆå‰‚</p><p>æä¾›ä¸€ç§æ–¹æ³•ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¾åºå¯»è®¿æŸä¸ªå®¹å™¨æ‰€å«çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆæ— éœ€æš´éœ²è¯¥å®¹å™¨çš„å†…éƒ¨è¡¨ç¤ºæ–¹å¼ã€‚</p><p>æ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±ä¸“å±çš„è¿­ä»£å™¨</p><p>è¿­ä»£å™¨ä½¿ç”¨éå¸¸ç±»ä¼¼äºæŒ‡é’ˆï¼Œåˆå­¦é˜¶æ®µæˆ‘ä»¬å¯ä»¥å…ˆç†è§£è¿­ä»£å™¨ä¸ºæŒ‡é’ˆ</p><p>è¿­ä»£å™¨ç§ç±»ï¼š</p><table><thead><tr><th>ç§ç±»</th><th>åŠŸèƒ½</th><th>æ”¯æŒè¿ç®—</th></tr></thead><tbody><tr><td>è¾“å…¥è¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªè¯»è®¿é—®</td><td>åªè¯»ï¼Œæ”¯æŒ++ã€**ã€ï¼&#x3D;</td></tr><tr><td>è¾“å‡ºè¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªå†™è®¿é—®</td><td>åªå†™ï¼Œæ”¯æŒ++</td></tr><tr><td>å‰å‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰æ¨è¿›è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€**ã€ï¼&#x3D;</td></tr><tr><td>åŒå‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰å’Œå‘åæ“ä½œ</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ï¼Œ</td></tr><tr><td>éšæœºè®¿é—®è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¯ä»¥ä»¥è·³è·ƒçš„æ–¹å¼è®¿é—®ä»»æ„æ•°æ®ï¼ŒåŠŸèƒ½æœ€å¼ºçš„è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ã€[n]ã€-nã€&lt;ã€&lt;&#x3D;ã€&gt;ã€&gt;&#x3D;</td></tr></tbody></table><p>å¸¸ç”¨çš„å®¹å™¨ä¸­è¿­ä»£å™¨ç§ç±»ä¸ºåŒå‘è¿­ä»£å™¨ï¼Œå’Œéšæœºè®¿é—®è¿­ä»£å™¨</p><h3 id="2-5-å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†"><a href="#2-5-å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†" class="headerlink" title="2.5 å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†"></a>2.5 å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†</h3><p>äº†è§£STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬åˆ©ç”¨ä»£ç æ„Ÿå—STLçš„é­…åŠ›</p><p>STLä¸­æœ€å¸¸ç”¨çš„å®¹å™¨ä¸ºVectorï¼Œå¯ä»¥ç†è§£ä¸ºæ•°ç»„ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å‘è¿™ä¸ªå®¹å™¨ä¸­æ’å…¥æ•°æ®ã€å¹¶éå†è¿™ä¸ªå®¹å™¨</p><h4 id="2-5-1-vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹"><a href="#2-5-1-vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹" class="headerlink" title="2.5.1 vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹"></a>2.5.1 vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</h4><p>å®¹å™¨ï¼š     <code>vector</code></p><p>ç®—æ³•ï¼š     <code>for_each</code></p><p>è¿­ä»£å™¨ï¼š <code>vector&lt;int&gt;::iterator</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyPrint</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºvectorå®¹å™¨å¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡æ¨¡æ¿å‚æ•°æŒ‡å®šå®¹å™¨ä¸­å­˜æ”¾çš„æ•°æ®çš„ç±»å‹</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="comment">//å‘å®¹å™¨ä¸­æ”¾æ•°æ®</span></span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æ˜¯ç”¨æ¥éå†å®¹å™¨ä¸­çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">//v.begin()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="comment">//v.end()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨å…ƒç´ çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line"><span class="comment">//vector&lt;int&gt;::iterator æ‹¿åˆ°vector&lt;int&gt;è¿™ç§å®¹å™¨çš„è¿­ä»£å™¨ç±»å‹</span></span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator pBegin = v.<span class="built_in">begin</span>();</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator pEnd = v.<span class="built_in">end</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="keyword">while</span> (pBegin != pEnd) &#123;</span><br><span class="line">cout &lt;&lt; *pBegin &lt;&lt; endl;</span><br><span class="line">pBegin++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨STLæä¾›æ ‡å‡†éå†ç®—æ³•  å¤´æ–‡ä»¶ algorithm</span></span><br><span class="line">    <span class="comment">//å†…éƒ¨å°±æ˜¯ä¸€ä¸ªforå¾ªç¯ï¼Œæ ¹æ®v.beginåˆ°v.end()éå†ï¼Œ*itå–å‡ºæ¯ä¸ªå…ƒç´ ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ é€’ç»™MyPrintå‡½æ•°ï¼Œç„¶åæ‰§è¡ŒMyPrint()å‡½æ•°è¿›è¡Œéå†ã€‚</span></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), MyPrint);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-2-Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹"><a href="#2-5-2-Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹" class="headerlink" title="2.5.2 Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹"></a>2.5.2 Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</h4><p>å­¦ä¹ ç›®æ ‡ï¼švectorä¸­å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¹¶æ‰“å°è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string mName;</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å­˜æ”¾å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;eee&quot;</span>, <span class="number">50</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">        <span class="comment">//vectorä¸­çš„æ•°æ®ç±»å‹æ˜¯Personï¼Œæ‰€ä»¥ï¼ˆ*itï¼‰å°±æ˜¯Personï¼Œæ‰€ä»¥ç›´æ¥å¯¹itè¿›è¡Œå–*è§£å¼•ç”¨ï¼Œå¾—åˆ°Person</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; (*it).mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; (*it).mAge &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; it-&gt;mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; it-&gt;mAge &lt;&lt; endl;</span><br><span class="line">        <span class="comment">//ä¸Šé¢ä¸¤è¡Œä»£ç æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¾å¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person*&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;eee&quot;</span>, <span class="number">50</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person*&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">        <span class="comment">//vectorä¸­å­˜æ”¾çš„æ˜¯Personå¯¹è±¡çš„æŒ‡é’ˆï¼Œæ‰€ä»¥ï¼ˆ*itï¼‰å°±æ˜¯Personå¯¹è±¡çš„æŒ‡é’ˆ</span></span><br><span class="line">Person * p = (*it);<span class="comment">//å°†æŒ‡é’ˆèµ‹å€¼ç»™p</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; p-&gt;mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; (*it)-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line">    </span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-3-Vectorå®¹å™¨åµŒå¥—å®¹å™¨"><a href="#2-5-3-Vectorå®¹å™¨åµŒå¥—å®¹å™¨" class="headerlink" title="2.5.3 Vectorå®¹å™¨åµŒå¥—å®¹å™¨"></a>2.5.3 Vectorå®¹å™¨åµŒå¥—å®¹å™¨</h4><p>å­¦ä¹ ç›®æ ‡ï¼šå®¹å™¨ä¸­åµŒå¥—å®¹å™¨ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ•°æ®è¿›è¡Œéå†è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®¹å™¨åµŒå¥—å®¹å™¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt; vector&lt;<span class="type">int</span>&gt; &gt;  v;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i + <span class="number">2</span>);</span><br><span class="line">v3.<span class="built_in">push_back</span>(i + <span class="number">3</span>);</span><br><span class="line">v4.<span class="built_in">push_back</span>(i + <span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨å…ƒç´ æ’å…¥åˆ°vector vä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(v1);</span><br><span class="line">v.<span class="built_in">push_back</span>(v2);</span><br><span class="line">v.<span class="built_in">push_back</span>(v3);</span><br><span class="line">v.<span class="built_in">push_back</span>(v4);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator vit = (*it).<span class="built_in">begin</span>(); vit != (*it).<span class="built_in">end</span>(); vit++) &#123;</span><br><span class="line">cout &lt;&lt; *vit &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€STL-å¸¸ç”¨å®¹å™¨"><a href="#ä¸‰ã€STL-å¸¸ç”¨å®¹å™¨" class="headerlink" title="ä¸‰ã€STL- å¸¸ç”¨å®¹å™¨"></a>ä¸‰ã€STL- å¸¸ç”¨å®¹å™¨</h2><h3 id="3-1-stringå®¹å™¨"><a href="#3-1-stringå®¹å™¨" class="headerlink" title="3.1 stringå®¹å™¨"></a>3.1 stringå®¹å™¨</h3><h4 id="3-1-1-stringåŸºæœ¬æ¦‚å¿µ"><a href="#3-1-1-stringåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.1.1 stringåŸºæœ¬æ¦‚å¿µ"></a>3.1.1 stringåŸºæœ¬æ¦‚å¿µ</h4><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>stringæ˜¯C++é£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè€Œstringæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»</li></ul><p><strong>stringå’Œchar * åŒºåˆ«ï¼š</strong></p><ul><li>char * æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</li><li>stringæ˜¯ä¸€ä¸ªç±»ï¼Œç±»å†…éƒ¨å°è£…äº†char*ï¼Œç®¡ç†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ªchar*å‹çš„å®¹å™¨ã€‚</li></ul><p><strong>ç‰¹ç‚¹ï¼š</strong></p><p>string ç±»å†…éƒ¨å°è£…äº†å¾ˆå¤šæˆå‘˜æ–¹æ³•</p><p>ä¾‹å¦‚ï¼šæŸ¥æ‰¾findï¼Œæ‹·è´copyï¼Œåˆ é™¤delete æ›¿æ¢replaceï¼Œæ’å…¥insert</p><p>stringç®¡ç†char*æ‰€åˆ†é…çš„å†…å­˜ï¼Œä¸ç”¨æ‹…å¿ƒå¤åˆ¶è¶Šç•Œå’Œå–å€¼è¶Šç•Œç­‰ï¼Œç”±ç±»å†…éƒ¨è¿›è¡Œè´Ÿè´£</p><h4 id="3-1-2-stringæ„é€ å‡½æ•°"><a href="#3-1-2-stringæ„é€ å‡½æ•°" class="headerlink" title="3.1.2 stringæ„é€ å‡½æ•°"></a>3.1.2 stringæ„é€ å‡½æ•°</h4><p>æ„é€ å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string();</code>          &#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸² ä¾‹å¦‚: string str;<br><code>string(const char* s);</code>        &#x2F;&#x2F;ä½¿ç”¨å­—ç¬¦ä¸²såˆå§‹åŒ–</li><li><code>string(const string&amp; str);</code>    &#x2F;&#x2F;ä½¿ç”¨ä¸€ä¸ªstringå¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªstringå¯¹è±¡</li><li><code>string(int n, char c);</code>           &#x2F;&#x2F;ä½¿ç”¨nä¸ªå­—ç¬¦cåˆå§‹åŒ–</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//stringæ„é€ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string s1; <span class="comment">//åˆ›å»ºç©ºå­—ç¬¦ä¸²ï¼Œè°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; s1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="function">string <span class="title">s2</span><span class="params">(str)</span></span>; <span class="comment">//æŠŠc_stringè½¬æ¢æˆäº†string</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str2 = &quot;</span> &lt;&lt; s2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">s3</span><span class="params">(s2)</span></span>; <span class="comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">s4</span><span class="params">(<span class="number">10</span>, <span class="string">&#x27;a&#x27;</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstringçš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-1-3-stringèµ‹å€¼æ“ä½œ"><a href="#3-1-3-stringèµ‹å€¼æ“ä½œ" class="headerlink" title="3.1.3 stringèµ‹å€¼æ“ä½œ"></a>3.1.3 stringèµ‹å€¼æ“ä½œ</h4><p>åŠŸèƒ½æè¿°ï¼š</p><ul><li>ç»™stringå­—ç¬¦ä¸²è¿›è¡Œèµ‹å€¼</li></ul><p>èµ‹å€¼çš„å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string&amp; operator=(const char* s);</code>             &#x2F;&#x2F;char*ç±»å‹å­—ç¬¦ä¸² èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(const string &amp;s);</code>         &#x2F;&#x2F;æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(char c);</code>                          &#x2F;&#x2F;å­—ç¬¦èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s);</code>                  &#x2F;&#x2F;æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s, int n);</code>     &#x2F;&#x2F;æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦èµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const string &amp;s);</code>              &#x2F;&#x2F;æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li><li><code>string&amp; assign(int n, char c);</code>                  &#x2F;&#x2F;ç”¨nä¸ªå­—ç¬¦cèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str1;</span><br><span class="line">str1 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str2;</span><br><span class="line">str2 = str1;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str2 = &quot;</span> &lt;&lt; str2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str3;</span><br><span class="line">str3 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str4;</span><br><span class="line">str4.<span class="built_in">assign</span>(<span class="string">&quot;hello c++&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str4 = &quot;</span> &lt;&lt; str4 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str5;</span><br><span class="line">str5.<span class="built_in">assign</span>(<span class="string">&quot;hello c++&quot;</span>,<span class="number">5</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str5 = &quot;</span> &lt;&lt; str5 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">string str6;</span><br><span class="line">str6.<span class="built_in">assign</span>(str5);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str6 = &quot;</span> &lt;&lt; str6 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str7;</span><br><span class="line">str7.<span class="built_in">assign</span>(<span class="number">5</span>, <span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str7 = &quot;</span> &lt;&lt; str7 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹stringçš„èµ‹å€¼æ–¹å¼å¾ˆå¤šï¼Œ<code>operator=</code>  è¿™ç§æ–¹å¼æ˜¯æ¯”è¾ƒå®ç”¨çš„</p><h4 id="3-1-4-stringå­—ç¬¦ä¸²æ‹¼æ¥"><a href="#3-1-4-stringå­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="3.1.4 stringå­—ç¬¦ä¸²æ‹¼æ¥"></a>3.1.4 stringå­—ç¬¦ä¸²æ‹¼æ¥</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°åœ¨å­—ç¬¦ä¸²æœ«å°¾æ‹¼æ¥å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; operator+=(const char* str);</code>                   &#x2F;&#x2F;é‡è½½+&#x3D;æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const char c);</code>                         &#x2F;&#x2F;é‡è½½+&#x3D;æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const string&amp; str);</code>                &#x2F;&#x2F;é‡è½½+&#x3D;æ“ä½œç¬¦</li><li><code>string&amp; append(const char *s); </code>                               &#x2F;&#x2F;æŠŠå­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const char *s, int n);</code>                 &#x2F;&#x2F;æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const string &amp;s);</code>                           &#x2F;&#x2F;åŒoperator+&#x3D;(const string&amp; str)</li><li><code>string&amp; append(const string &amp;s, int pos, int n);</code>&#x2F;&#x2F;å­—ç¬¦ä¸²sä¸­ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦è¿æ¥åˆ°å­—ç¬¦ä¸²ç»“å°¾</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str1 = <span class="string">&quot;æˆ‘&quot;</span>;</span><br><span class="line"></span><br><span class="line">str1 += <span class="string">&quot;çˆ±ç©æ¸¸æˆ&quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">str1 += <span class="string">&#x27;:&#x27;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str2 = <span class="string">&quot;LOL DNF&quot;</span>;</span><br><span class="line"></span><br><span class="line">str1 += str2;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str3 = <span class="string">&quot;I&quot;</span>;</span><br><span class="line">str3.<span class="built_in">append</span>(<span class="string">&quot; love &quot;</span>);</span><br><span class="line">str3.<span class="built_in">append</span>(<span class="string">&quot;game abcde&quot;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">//str3.append(str2);</span></span><br><span class="line">str3.<span class="built_in">append</span>(str2, <span class="number">4</span>, <span class="number">3</span>); <span class="comment">// ä»ä¸‹æ ‡4ä½ç½®å¼€å§‹ ï¼Œæˆªå–3ä¸ªå­—ç¬¦ï¼Œæ‹¼æ¥åˆ°å­—ç¬¦ä¸²æœ«å°¾</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²æ‹¼æ¥çš„é‡è½½ç‰ˆæœ¬å¾ˆå¤šï¼Œåˆå­¦é˜¶æ®µè®°ä½å‡ ç§å³å¯</p><h4 id="3-1-5-stringæŸ¥æ‰¾å’Œæ›¿æ¢"><a href="#3-1-5-stringæŸ¥æ‰¾å’Œæ›¿æ¢" class="headerlink" title="3.1.5 stringæŸ¥æ‰¾å’Œæ›¿æ¢"></a>3.1.5 stringæŸ¥æ‰¾å’Œæ›¿æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ï¼šæŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨</li><li>æ›¿æ¢ï¼šåœ¨æŒ‡å®šçš„ä½ç½®æ›¿æ¢å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int find(const string&amp; str, int pos = 0) const;</code>              &#x2F;&#x2F;æŸ¥æ‰¾strç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos = 0) const; </code>                     &#x2F;&#x2F;æŸ¥æ‰¾sç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos, int n) const; </code>               &#x2F;&#x2F;ä»posä½ç½®æŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡ä½ç½®</li><li><code>int find(const char c, int pos = 0) const; </code>                       &#x2F;&#x2F;æŸ¥æ‰¾å­—ç¬¦cç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>int rfind(const string&amp; str, int pos = npos) const;</code>      &#x2F;&#x2F;æŸ¥æ‰¾stræœ€åä¸€æ¬¡ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos = npos) const;</code>              &#x2F;&#x2F;æŸ¥æ‰¾sæœ€åä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos, int n) const;</code>              &#x2F;&#x2F;ä»posæŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦æœ€åä¸€æ¬¡ä½ç½®</li><li><code>int rfind(const char c, int pos = 0) const;  </code>                      &#x2F;&#x2F;æŸ¥æ‰¾å­—ç¬¦cæœ€åä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>string&amp; replace(int pos, int n, const string&amp; str); </code>       &#x2F;&#x2F;æ›¿æ¢ä»poså¼€å§‹nä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸²str</li><li><code>string&amp; replace(int pos, int n,const char* s); </code>                 &#x2F;&#x2F;æ›¿æ¢ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸²s</li></ul><p>æŸ¥æ‰¾ä¸åˆ°è¿”å›-1</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œæ›¿æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">string str1 = <span class="string">&quot;abcdefgde&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> pos = str1.<span class="built_in">find</span>(<span class="string">&quot;de&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos ** <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pos = str1.<span class="built_in">rfind</span>(<span class="string">&quot;de&quot;</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ›¿æ¢</span></span><br><span class="line">string str1 = <span class="string">&quot;abcdefgde&quot;</span>;</span><br><span class="line">str1.<span class="built_in">replace</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="string">&quot;1111&quot;</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>findæŸ¥æ‰¾æ˜¯ä»å·¦å¾€åï¼Œrfindä»å³å¾€å·¦</li><li>findæ‰¾åˆ°å­—ç¬¦ä¸²åè¿”å›æŸ¥æ‰¾çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½ç½®ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</li><li>replaceåœ¨æ›¿æ¢æ—¶ï¼Œè¦æŒ‡å®šä»å“ªä¸ªä½ç½®èµ·ï¼Œå¤šå°‘ä¸ªå­—ç¬¦ï¼Œæ›¿æ¢æˆä»€ä¹ˆæ ·çš„å­—ç¬¦ä¸²</li></ul><h4 id="3-1-6-stringå­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#3-1-6-stringå­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="3.1.6 stringå­—ç¬¦ä¸²æ¯”è¾ƒ"></a>3.1.6 stringå­—ç¬¦ä¸²æ¯”è¾ƒ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²ä¹‹é—´çš„æ¯”è¾ƒ</li></ul><p><strong>æ¯”è¾ƒæ–¹å¼ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯æŒ‰å­—ç¬¦çš„ASCIIç è¿›è¡Œå¯¹æ¯”</li></ul><p>&#x3D; è¿”å›   0</p><p>&gt; è¿”å›   1</p><p>&lt; è¿”å›  -1</p><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int compare(const string &amp;s) const; </code>  &#x2F;&#x2F;ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</li><li><code>int compare(const char *s) const;</code>      &#x2F;&#x2F;ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ¯”è¾ƒ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">string s1 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">string s2 = <span class="string">&quot;aello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ret = s1.<span class="built_in">compare</span>(s2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (ret ** <span class="number">0</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 ç­‰äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (ret &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 å¤§äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 å°äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²å¯¹æ¯”ä¸»è¦æ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œåˆ¤æ–­è°å¤§è°å°çš„æ„ä¹‰å¹¶ä¸æ˜¯å¾ˆå¤§</p><h4 id="3-1-7-stringå­—ç¬¦å­˜å–"><a href="#3-1-7-stringå­—ç¬¦å­˜å–" class="headerlink" title="3.1.7 stringå­—ç¬¦å­˜å–"></a>3.1.7 stringå­—ç¬¦å­˜å–</h4><p>stringä¸­å•ä¸ªå­—ç¬¦å­˜å–æ–¹å¼æœ‰ä¸¤ç§</p><ul><li><code>char&amp; operator[](int n); </code>     &#x2F;&#x2F;é€šè¿‡[]æ–¹å¼å–å­—ç¬¦</li><li><code>char&amp; at(int n);   </code>                    &#x2F;&#x2F;é€šè¿‡atæ–¹æ³•è·å–å­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; str[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; str.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¿®æ”¹</span></span><br><span class="line">str[<span class="number">0</span>] = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">str.<span class="built_in">at</span>(<span class="number">1</span>) = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstringå­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦å­˜å–æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ©ç”¨ [ ] æˆ– at</p><h4 id="3-1-8-stringæ’å…¥å’Œåˆ é™¤"><a href="#3-1-8-stringæ’å…¥å’Œåˆ é™¤" class="headerlink" title="3.1.8 stringæ’å…¥å’Œåˆ é™¤"></a>3.1.8 stringæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹stringå­—ç¬¦ä¸²è¿›è¡Œæ’å…¥å’Œåˆ é™¤å­—ç¬¦æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; insert(int pos, const char* s);  </code>                &#x2F;&#x2F;æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, const string&amp; str); </code>        &#x2F;&#x2F;æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, int n, char c);</code>                &#x2F;&#x2F;åœ¨æŒ‡å®šä½ç½®æ’å…¥nä¸ªå­—ç¬¦c</li><li><code>string&amp; erase(int pos, int n = npos);</code>                    &#x2F;&#x2F;åˆ é™¤ä»Poså¼€å§‹çš„nä¸ªå­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">str.<span class="built_in">insert</span>(<span class="number">1</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">str.<span class="built_in">erase</span>(<span class="number">1</span>, <span class="number">3</span>);  <span class="comment">//ä»1å·ä½ç½®å¼€å§‹3ä¸ªå­—ç¬¦</span></span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>æ’å…¥å’Œåˆ é™¤çš„èµ·å§‹ä¸‹æ ‡éƒ½æ˜¯ä»0å¼€å§‹</p><h4 id="3-1-9-stringå­ä¸²"><a href="#3-1-9-stringå­ä¸²" class="headerlink" title="3.1.9 stringå­ä¸²"></a>3.1.9 stringå­ä¸²</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä»å­—ç¬¦ä¸²ä¸­è·å–æƒ³è¦çš„å­ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string substr(int pos = 0, int n = npos) const;</code>   &#x2F;&#x2F;è¿”å›ç”±poså¼€å§‹çš„nä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ä¸²</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">string str = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line">string subStr = str.<span class="built_in">substr</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;subStr = &quot;</span> &lt;&lt; subStr &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string email = <span class="string">&quot;hello@sina.com&quot;</span>;</span><br><span class="line"><span class="type">int</span> pos = email.<span class="built_in">find</span>(<span class="string">&quot;@&quot;</span>);</span><br><span class="line">string username = email.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;username: &quot;</span> &lt;&lt; username &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>çµæ´»çš„è¿ç”¨æ±‚å­ä¸²åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å®é™…å¼€å‘ä¸­è·å–æœ‰æ•ˆçš„ä¿¡æ¯</p><h3 id="3-2-vectorå®¹å™¨"><a href="#3-2-vectorå®¹å™¨" class="headerlink" title="3.2 vectorå®¹å™¨"></a>3.2 vectorå®¹å™¨</h3><h4 id="3-2-1-vectoråŸºæœ¬æ¦‚å¿µ"><a href="#3-2-1-vectoråŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.2.1 vectoråŸºæœ¬æ¦‚å¿µ"></a>3.2.1 vectoråŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>vectoræ•°æ®ç»“æ„å’Œ<strong>æ•°ç»„éå¸¸ç›¸ä¼¼</strong>ï¼Œä¹Ÿç§°ä¸º<strong>å•ç«¯æ•°ç»„</strong></li></ul><p><strong>vectorä¸æ™®é€šæ•°ç»„åŒºåˆ«ï¼š</strong></p><ul><li>ä¸åŒä¹‹å¤„åœ¨äºæ•°ç»„æ˜¯é™æ€ç©ºé—´ï¼Œè€Œvectorå¯ä»¥<strong>åŠ¨æ€æ‰©å±•</strong></li></ul><p><strong>åŠ¨æ€æ‰©å±•ï¼š</strong></p><ul><li>å¹¶ä¸æ˜¯åœ¨åŸç©ºé—´ä¹‹åç»­æ¥æ–°ç©ºé—´ï¼Œè€Œæ˜¯æ‰¾æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå°†åŸæ•°æ®æ‹·è´æ–°ç©ºé—´ï¼Œé‡Šæ”¾åŸç©ºé—´</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/c++/5.png" alt="è¯´æ˜: 2015-11-10_151152"></p><ul><li>vectorå®¹å™¨çš„è¿­ä»£å™¨æ˜¯æ”¯æŒéšæœºè®¿é—®çš„è¿­ä»£å™¨</li></ul><h4 id="3-2-2-vectoræ„é€ å‡½æ•°"><a href="#3-2-2-vectoræ„é€ å‡½æ•°" class="headerlink" title="3.2.2 vectoræ„é€ å‡½æ•°"></a>3.2.2 vectoræ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»ºvectorå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>vector&lt;T&gt; v; </code>                    &#x2F;&#x2F;é‡‡ç”¨æ¨¡æ¿å®ç°ç±»å®ç°ï¼Œé»˜è®¤æ„é€ å‡½æ•°</li><li><code>vector(v.begin(), v.end());   </code>       &#x2F;&#x2F;å°†v[begin(), end())åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(n, elem);</code>                            &#x2F;&#x2F;æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(const vector &amp;vec);</code>         &#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1; <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v2</span><span class="params">(v1.begin(), v1.end())</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v3</span><span class="params">(<span class="number">10</span>, <span class="number">100</span>)</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v3);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v4</span><span class="params">(v3)</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>vectorçš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-2-3-vectorèµ‹å€¼æ“ä½œ"><a href="#3-2-3-vectorèµ‹å€¼æ“ä½œ" class="headerlink" title="3.2.3 vectorèµ‹å€¼æ“ä½œ"></a>3.2.3 vectorèµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™vectorå®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>vector&amp; operator=(const vector &amp;vec);</code>&#x2F;&#x2F;é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code>       &#x2F;&#x2F;å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code>        &#x2F;&#x2F;å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1; <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line">v2 = v1;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v3;</span><br><span class="line">v3.<span class="built_in">assign</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printVector</span>(v3);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v4;</span><br><span class="line">v4.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š vectorèµ‹å€¼æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨operator&#x3D;ï¼Œæˆ–è€…assignéƒ½å¯ä»¥</p><h4 id="3-2-4-vectorå®¹é‡å’Œå¤§å°"><a href="#3-2-4-vectorå®¹é‡å’Œå¤§å°" class="headerlink" title="3.2.4  vectorå®¹é‡å’Œå¤§å°"></a>3.2.4  vectorå®¹é‡å’Œå¤§å°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorå®¹å™¨çš„å®¹é‡å’Œå¤§å°æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>empty(); </code>                            &#x2F;&#x2F;åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>capacity();</code>                      &#x2F;&#x2F;å®¹å™¨çš„å®¹é‡ã€é€šå¸¸æ˜¯c++å·²ç»è®¡ç®—å¥½çš„ï¼Œ&gt;&#x3D;å…ƒç´ ä¸ªæ•°ã€‘</p></li><li><p><code>size();</code>                              &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>resize(int num);</code>             &#x2F;&#x2F;é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼0å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹      &#x2F;&#x2F;å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(int num, elem);</code>  &#x2F;&#x2F;é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹              &#x2F;&#x2F;å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="keyword">if</span> (v1.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„å®¹é‡ = &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„å¤§å° = &quot;</span> &lt;&lt; v1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å¤§ï¼Œé»˜è®¤ç”¨0å¡«å……æ–°ä½ç½®ï¼Œå¯ä»¥åˆ©ç”¨é‡è½½ç‰ˆæœ¬æ›¿æ¢é»˜è®¤å¡«å……</span></span><br><span class="line">v1.<span class="built_in">resize</span>(<span class="number">15</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å°ï¼Œè¶…å‡ºéƒ¨åˆ†å…ƒç´ è¢«åˆ é™¤</span></span><br><span class="line">v1.<span class="built_in">resize</span>(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º  â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°  â€” size</li><li>è¿”å›å®¹å™¨å®¹é‡  â€” capacity</li><li>é‡æ–°æŒ‡å®šå¤§å°  â€”  resize</li></ul><h4 id="3-2-5-vectoræ’å…¥å’Œåˆ é™¤"><a href="#3-2-5-vectoræ’å…¥å’Œåˆ é™¤" class="headerlink" title="3.2.5 vectoræ’å…¥å’Œåˆ é™¤"></a>3.2.5 vectoræ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorå®¹å™¨è¿›è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>push_back(ele);</code>                                         &#x2F;&#x2F;å°¾éƒ¨æ’å…¥å…ƒç´ ele</li><li><code>pop_back();</code>                                                &#x2F;&#x2F;åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>insert(const_iterator pos, ele);</code>        &#x2F;&#x2F;è¿­ä»£å™¨æŒ‡å‘ä½ç½®posæ’å…¥å…ƒç´ ele</li><li><code>insert(const_iterator pos, int count,ele);</code>&#x2F;&#x2F;è¿­ä»£å™¨æŒ‡å‘ä½ç½®posæ’å…¥countä¸ªå…ƒç´ ele</li><li><code>erase(const_iterator pos);</code>                     &#x2F;&#x2F;åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ </li><li><code>erase(const_iterator start, const_iterator end);</code>&#x2F;&#x2F;åˆ é™¤è¿­ä»£å™¨ä»startåˆ°endä¹‹é—´çš„å…ƒç´ </li><li><code>clear();</code>                                                        &#x2F;&#x2F;åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">v1.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">v1.<span class="built_in">insert</span>(v1.<span class="built_in">begin</span>(), <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">v1.<span class="built_in">insert</span>(v1.<span class="built_in">begin</span>(), <span class="number">2</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">v1.<span class="built_in">erase</span>(v1.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line">v1.<span class="built_in">erase</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>());</span><br><span class="line">v1.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’  â€” push_back</li><li>å°¾åˆ   â€” pop_back</li><li>æ’å…¥  â€” insert    (ä½ç½®è¿­ä»£å™¨)</li><li>åˆ é™¤  â€” erase  ï¼ˆä½ç½®è¿­ä»£å™¨ï¼‰</li><li>æ¸…ç©º  â€”  clear</li></ul><h4 id="3-2-6-vectoræ•°æ®å­˜å–"><a href="#3-2-6-vectoræ•°æ®å­˜å–" class="headerlink" title="3.2.6 vectoræ•°æ®å­˜å–"></a>3.2.6 vectoræ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code>     &#x2F;&#x2F;è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code>       &#x2F;&#x2F;è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code>            &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code>              &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v1.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; v1[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v1.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; v1.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v1.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v1.<span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å–vectorå®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œatä¹Ÿå¯ä»¥</li><li>frontè¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>backè¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-2-7-vectoräº’æ¢å®¹å™¨"><a href="#3-2-7-vectoräº’æ¢å®¹å™¨" class="headerlink" title="3.2.7 vectoräº’æ¢å®¹å™¨"></a>3.2.7 vectoräº’æ¢å®¹å™¨</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°ä¸¤ä¸ªå®¹å™¨å†…å…ƒç´ è¿›è¡Œäº’æ¢</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>swap(vec);</code>  &#x2F;&#x2F; å°†vecä¸æœ¬èº«çš„å…ƒç´ äº’æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;äº’æ¢å‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">10</span>; i &gt; <span class="number">0</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">v2.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº’æ¢å®¹å™¨</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº’æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">v1.<span class="built_in">swap</span>(v2);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…ç”¨é€”</span></span><br><span class="line"><span class="comment">// å·§ç”¨swapå¯ä»¥æ”¶ç¼©å†…å­˜ç©ºé—´</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">resize</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¶ç¼©å†…å­˜</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(v).<span class="built_in">swap</span>(v); <span class="comment">//åŒ¿åå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°ç»“æœï¼š</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">äº’æ¢å‰</span></span><br><span class="line"><span class="comment">0 1 2 3 4 5 6 7 8 9 </span></span><br><span class="line"><span class="comment">10 9 8 7 6 5 4 3 2 1 </span></span><br><span class="line"><span class="comment">äº’æ¢å</span></span><br><span class="line"><span class="comment">10 9 8 7 6 5 4 3 2 1 </span></span><br><span class="line"><span class="comment">0 1 2 3 4 5 6 7 8 9 </span></span><br><span class="line"><span class="comment">vçš„å®¹é‡ä¸ºï¼š131072</span></span><br><span class="line"><span class="comment">vçš„å¤§å°ä¸ºï¼š100000</span></span><br><span class="line"><span class="comment">vçš„å®¹é‡ä¸ºï¼š131072</span></span><br><span class="line"><span class="comment">vçš„å¤§å°ä¸ºï¼š3</span></span><br><span class="line"><span class="comment">vçš„å®¹é‡ä¸ºï¼š3</span></span><br><span class="line"><span class="comment">vçš„å¤§å°ä¸ºï¼š3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šswapå¯ä»¥ä½¿ä¸¤ä¸ªå®¹å™¨äº’æ¢ï¼Œå¯ä»¥è¾¾åˆ°å®ç”¨çš„æ”¶ç¼©å†…å­˜æ•ˆæœ</p><p>è§£é‡Šï¼š</p><p><code>vector&lt;int&gt;(v).swap(v)</code>çš„æ“ä½œå¯ä»¥ç”¨æ¥é‡Šæ”¾vçš„å¤šä½™ç©ºé—´ï¼Œå°†vçš„capacityç¼©å°åˆ°å…¶å®é™…å¤§å°ï¼Œä»è€ŒèŠ‚çœå†…å­˜ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œè¯¥æ“ä½œå°†åˆ›å»ºä¸€ä¸ªæ–°çš„vectorå¯¹è±¡ï¼Œå…¶å®¹é‡ä¸ºvçš„å¤§å°ï¼Œå†…å®¹ä¸vç›¸åŒã€‚ç„¶åï¼Œå®ƒå°†vå’Œæ–°åˆ›å»ºçš„vectorå¯¹è±¡äº¤æ¢ã€äº¤æ¢æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ã€‘ï¼Œè¿™æ ·vå°±æ‹¥æœ‰äº†æ–°çš„å®¹é‡ï¼Œè€Œæ–°çš„vectorå¯¹è±¡åˆ™è¢«é”€æ¯(åŒ¿åå¯¹è±¡åœ¨å½“å‰è¯­å¥æ‰§è¡Œå®Œåå°±ä¼šé”€æ¯)ã€‚ç”±äºäº¤æ¢æ“ä½œåªæ˜¯äº¤æ¢æŒ‡é’ˆï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå®é™…çš„æ•°æ®å¤åˆ¶ï¼Œå› æ­¤è¯¥æ“ä½œçš„æ•ˆç‡éå¸¸é«˜ã€‚</p><h4 id="3-2-8-vectoré¢„ç•™ç©ºé—´"><a href="#3-2-8-vectoré¢„ç•™ç©ºé—´" class="headerlink" title="3.2.8 vectoré¢„ç•™ç©ºé—´"></a>3.2.8 vectoré¢„ç•™ç©ºé—´</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‡å°‘vectoråœ¨åŠ¨æ€æ‰©å±•å®¹é‡æ—¶çš„æ‰©å±•æ¬¡æ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reserve(int len);</code>&#x2F;&#x2F;å®¹å™¨é¢„ç•™lenä¸ªå…ƒç´ é•¿åº¦ï¼Œé¢„ç•™ä½ç½®ä¸åˆå§‹åŒ–ï¼Œå…ƒç´ ä¸å¯è®¿é—®ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¢„ç•™ç©ºé—´</span></span><br><span class="line">v.<span class="built_in">reserve</span>(<span class="number">100000</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;<span class="comment">//ç»Ÿè®¡å†…å­˜ç©ºé—´å¼€è¾Ÿçš„æ¬¡æ•°</span></span><br><span class="line"><span class="type">int</span>* p = <span class="literal">NULL</span>;<span class="comment">//æ•´æ•°ç±»å‹çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">        <span class="comment">//å› ä¸ºvectoræ˜¯åŠ¨æ€çš„ï¼Œæ’å…¥æ•°æ®å‰ä¼šæå‰å¼€è¾Ÿç©ºé—´ï¼Œé€šå¸¸å®¹é‡å¤§äºå…ƒç´ ä¸ªæ•°ï¼Œå½“å…ƒç´ ä¸ªæ•°è¶…å‡ºäº†æ—¶ï¼Œä¼šé‡æ–°å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œæ­¤æ—¶på°±ä¸ä¼šæŒ‡å‘vçš„é¦–åœ°å€äº†ï¼Œé€šè¿‡è¿™ä¸ªå¯ä»¥åˆ¤æ–­å¼€è¾Ÿå†…å­˜ç©ºé—´çš„æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">if</span> (p != &amp;v[<span class="number">0</span>]) &#123;<span class="comment">//å¦‚pæŒ‡é’ˆä¸æŒ‡å‘vçš„é¦–åœ°å€</span></span><br><span class="line">p = &amp;v[<span class="number">0</span>];<span class="comment">//åˆ™è§„å®špæŒ‡å‘vçš„é¦–åœ°å€</span></span><br><span class="line">num++;<span class="comment">//å†…å­˜ç©ºé—´å¼€è¾Ÿæ¬¡æ•°+1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num:&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line">    </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œå¯ä»¥ä¸€å¼€å§‹åˆ©ç”¨reserveé¢„ç•™ç©ºé—´</p><h3 id="3-3-dequeå®¹å™¨"><a href="#3-3-dequeå®¹å™¨" class="headerlink" title="3.3 dequeå®¹å™¨"></a>3.3 dequeå®¹å™¨</h3><h4 id="3-3-1-dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ"><a href="#3-3-1-dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.3.1 dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ"></a>3.3.1 dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>åŒç«¯æ•°ç»„ï¼Œå¯ä»¥å¯¹å¤´ç«¯è¿›è¡Œæ’å…¥åˆ é™¤æ“ä½œ</li></ul><p><strong>dequeä¸vectoråŒºåˆ«ï¼š</strong></p><ul><li>vectorå¯¹äºå¤´éƒ¨çš„æ’å…¥åˆ é™¤æ•ˆç‡ä½ï¼Œæ•°æ®é‡è¶Šå¤§ï¼Œæ•ˆç‡è¶Šä½</li><li>dequeç›¸å¯¹è€Œè¨€ï¼Œå¯¹å¤´éƒ¨çš„æ’å…¥åˆ é™¤é€Ÿåº¦å›æ¯”vectorå¿«</li><li>vectorè®¿é—®å…ƒç´ æ—¶çš„é€Ÿåº¦ä¼šæ¯”dequeå¿«,è¿™å’Œä¸¤è€…å†…éƒ¨å®ç°æœ‰å…³</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/c++/7.png" alt="è¯´æ˜: 2015-11-19_204101"></p><p>dequeå†…éƒ¨å·¥ä½œåŸç†:</p><p>dequeå†…éƒ¨æœ‰ä¸ª<strong>ä¸­æ§å™¨</strong>ï¼Œç»´æŠ¤æ¯æ®µç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œç¼“å†²åŒºä¸­å­˜æ”¾çœŸå®æ•°æ®</p><p>ä¸­æ§å™¨ç»´æŠ¤çš„æ˜¯æ¯ä¸ªç¼“å†²åŒºçš„åœ°å€ï¼Œä½¿å¾—ä½¿ç”¨dequeæ—¶åƒä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/8.png" alt="clip_image002-1547547896341"></p><ul><li>dequeå®¹å™¨çš„è¿­ä»£å™¨ä¹Ÿæ˜¯æ”¯æŒéšæœºè®¿é—®çš„</li></ul><h4 id="3-3-2-dequeæ„é€ å‡½æ•°"><a href="#3-3-2-dequeæ„é€ å‡½æ•°" class="headerlink" title="3.3.2 dequeæ„é€ å‡½æ•°"></a>3.3.2 dequeæ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>dequeå®¹å™¨æ„é€ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>deque&lt;T&gt;</code> deqT;                      &#x2F;&#x2F;é»˜è®¤æ„é€ å½¢å¼</li><li><code>deque(beg, end);</code>                  &#x2F;&#x2F;æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(n, elem);</code>                    &#x2F;&#x2F;æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(const deque &amp;deq);</code>   &#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//dequeæ„é€ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1; <span class="comment">//æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"><span class="function">deque&lt;<span class="type">int</span>&gt; <span class="title">d2</span><span class="params">(d1.begin(),d1.end())</span></span>;</span><br><span class="line"><span class="built_in">printDeque</span>(d2);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;<span class="built_in">d3</span>(<span class="number">10</span>,<span class="number">100</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d3);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d4 = d3;</span><br><span class="line"><span class="built_in">printDeque</span>(d4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>dequeå®¹å™¨å’Œvectorå®¹å™¨çš„æ„é€ æ–¹å¼å‡ ä¹ä¸€è‡´ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-3-3-dequeèµ‹å€¼æ“ä½œ"><a href="#3-3-3-dequeèµ‹å€¼æ“ä½œ" class="headerlink" title="3.3.3 dequeèµ‹å€¼æ“ä½œ"></a>3.3.3 dequeèµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™dequeå®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque&amp; operator=(const deque &amp;deq); </code>         &#x2F;&#x2F;é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code>                                           &#x2F;&#x2F;å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code>                                             &#x2F;&#x2F;å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d2;</span><br><span class="line">d2 = d1;</span><br><span class="line"><span class="built_in">printDeque</span>(d2);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d3;</span><br><span class="line">d3.<span class="built_in">assign</span>(d1.<span class="built_in">begin</span>(), d1.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d3);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d4;</span><br><span class="line">d4.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d4);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šdequeèµ‹å€¼æ“ä½œä¹Ÿä¸vectorç›¸åŒï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="3-3-4-dequeå¤§å°æ“ä½œ"><a href="#3-3-4-dequeå¤§å°æ“ä½œ" class="headerlink" title="3.3.4 dequeå¤§å°æ“ä½œ"></a>3.3.4 dequeå¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹dequeå®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque.empty();</code>                       &#x2F;&#x2F;åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>deque.size();</code>                         &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>deque.resize(num);</code>                &#x2F;&#x2F;é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnum,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹                             &#x2F;&#x2F;å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>deque.resize(num, elem);</code>     &#x2F;&#x2F;é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnum,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹                                                     &#x2F;&#x2F;å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span> (d1.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1ä¸ºç©º!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1ä¸ä¸ºç©º!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç»Ÿè®¡å¤§å°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1çš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; d1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡æ–°æŒ‡å®šå¤§å°</span></span><br><span class="line">d1.<span class="built_in">resize</span>(<span class="number">15</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line">d1.<span class="built_in">resize</span>(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>dequeæ²¡æœ‰å®¹é‡çš„æ¦‚å¿µ</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°   â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•°   â€” resize</li></ul><h4 id="3-3-5-deque-æ’å…¥å’Œåˆ é™¤"><a href="#3-3-5-deque-æ’å…¥å’Œåˆ é™¤" class="headerlink" title="3.3.5 deque æ’å…¥å’Œåˆ é™¤"></a>3.3.5 deque æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘dequeå®¹å™¨ä¸­æ’å…¥å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p>ä¸¤ç«¯æ’å…¥æ“ä½œï¼š</p><ul><li><code>push_back(elem);</code>          &#x2F;&#x2F;åœ¨å®¹å™¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ•°æ®</li><li><code>push_front(elem);</code>        &#x2F;&#x2F;åœ¨å®¹å™¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®</li><li><code>pop_back();</code>                   &#x2F;&#x2F;åˆ é™¤å®¹å™¨æœ€åä¸€ä¸ªæ•°æ®</li><li><code>pop_front();</code>                 &#x2F;&#x2F;åˆ é™¤å®¹å™¨ç¬¬ä¸€ä¸ªæ•°æ®</li></ul><p>æŒ‡å®šä½ç½®æ“ä½œï¼š</p><ul><li><p><code>insert(pos,elem);</code>         &#x2F;&#x2F;åœ¨posä½ç½®æ’å…¥ä¸€ä¸ªelemå…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>insert(pos,n,elem);</code>     &#x2F;&#x2F;åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>insert(pos,beg,end);</code>    &#x2F;&#x2F;åœ¨posä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>clear();</code>                           &#x2F;&#x2F;æ¸…ç©ºå®¹å™¨çš„æ‰€æœ‰æ•°æ®</p></li><li><p><code>erase(beg,end);</code>             &#x2F;&#x2F;åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>erase(pos);</code>                    &#x2F;&#x2F;åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸¤ç«¯æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"><span class="comment">//å¤´æ’</span></span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">d.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="comment">//å¤´åˆ </span></span><br><span class="line">d.<span class="built_in">pop_front</span>();</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), <span class="number">2</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d2;</span><br><span class="line">d2.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">d2.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">d2.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), d2.<span class="built_in">begin</span>(), d2.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">erase</span>(d.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">erase</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line">d.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">test03</span>();</span><br><span class="line">    </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥å’Œåˆ é™¤æä¾›çš„ä½ç½®æ˜¯è¿­ä»£å™¨ï¼</li><li>å°¾æ’   â€”  push_back</li><li>å°¾åˆ    â€”  pop_back</li><li>å¤´æ’   â€”  push_front</li><li>å¤´åˆ    â€”  pop_front</li></ul><h4 id="3-3-6-deque-æ•°æ®å­˜å–"><a href="#3-3-6-deque-æ•°æ®å­˜å–" class="headerlink" title="3.3.6 deque æ•°æ®å­˜å–"></a>3.3.6 deque æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹deque ä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code>     &#x2F;&#x2F;è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code>      &#x2F;&#x2F;è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code>            &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code>              &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®å­˜å–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; d[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; d.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;front:&quot;</span> &lt;&lt; d.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;back:&quot;</span> &lt;&lt; d.<span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å–dequeå®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œatä¹Ÿå¯ä»¥</li><li>frontè¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>backè¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-3-7-deque-æ’åº"><a href="#3-3-7-deque-æ’åº" class="headerlink" title="3.3.7  deque æ’åº"></a>3.3.7  deque æ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ©ç”¨ç®—æ³•å®ç°å¯¹dequeå®¹å™¨è¿›è¡Œæ’åº</li></ul><p><strong>ç®—æ³•ï¼š</strong></p><ul><li><code>sort(iterator beg, iterator end)</code>  &#x2F;&#x2F;å¯¹begå’ŒendåŒºé—´å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"><span class="built_in">sort</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šsortç®—æ³•éå¸¸å®ç”¨ï¼Œä½¿ç”¨æ—¶åŒ…å«å¤´æ–‡ä»¶ algorithmå³å¯</p><h3 id="3-4-æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†"><a href="#3-4-æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†" class="headerlink" title="3.4 æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†"></a>3.4 æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†</h3><h4 id="3-4-1-æ¡ˆä¾‹æè¿°"><a href="#3-4-1-æ¡ˆä¾‹æè¿°" class="headerlink" title="3.4.1 æ¡ˆä¾‹æè¿°"></a>3.4.1 æ¡ˆä¾‹æè¿°</h4><p>æœ‰5åé€‰æ‰‹ï¼šé€‰æ‰‹ABCDEï¼Œ10ä¸ªè¯„å§”åˆ†åˆ«å¯¹æ¯ä¸€åé€‰æ‰‹æ‰“åˆ†ï¼Œå»é™¤æœ€é«˜åˆ†ï¼Œå»é™¤è¯„å§”ä¸­æœ€ä½åˆ†ï¼Œå–å¹³å‡åˆ†ã€‚</p><h4 id="3-4-2-å®ç°æ­¥éª¤"><a href="#3-4-2-å®ç°æ­¥éª¤" class="headerlink" title="3.4.2 å®ç°æ­¥éª¤"></a>3.4.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»ºäº”åé€‰æ‰‹ï¼Œæ”¾åˆ°vectorä¸­</li><li>éå†vectorå®¹å™¨ï¼Œå–å‡ºæ¥æ¯ä¸€ä¸ªé€‰æ‰‹ï¼Œæ‰§è¡Œforå¾ªç¯ï¼Œå¯ä»¥æŠŠ10ä¸ªè¯„åˆ†æ‰“åˆ†å­˜åˆ°dequeå®¹å™¨ä¸­</li><li>sortç®—æ³•å¯¹dequeå®¹å™¨ä¸­åˆ†æ•°æ’åºï¼Œå»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</li><li>dequeå®¹å™¨éå†ä¸€éï¼Œç´¯åŠ æ€»åˆ†</li><li>è·å–å¹³å‡åˆ†</li></ol><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€‰æ‰‹ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> score)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Score = score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name; <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> m_Score;  <span class="comment">//å¹³å‡åˆ†</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createPerson</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string nameSeed = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">string name = <span class="string">&quot;é€‰æ‰‹&quot;</span>;</span><br><span class="line">name += nameSeed[i];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(name, score)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†åˆ›å»ºçš„personå¯¹è±¡ æ”¾å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(p);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“åˆ†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setScore</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å°†è¯„å§”çš„åˆ†æ•° æ”¾å…¥åˆ°dequeå®¹å™¨ä¸­</span></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> score = <span class="built_in">rand</span>() % <span class="number">41</span> + <span class="number">60</span>;  <span class="comment">// 60 ~ 100</span></span><br><span class="line">d.<span class="built_in">push_back</span>(score);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;é€‰æ‰‹ï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; æ‰“åˆ†ï¼š &quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//for (deque&lt;int&gt;::iterator dit = d.begin(); dit != d.end(); dit++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; *dit &lt;&lt; &quot; &quot;;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</span></span><br><span class="line">d.<span class="built_in">pop_back</span>();</span><br><span class="line">d.<span class="built_in">pop_front</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–å¹³å‡åˆ†</span></span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::iterator dit = d.<span class="built_in">begin</span>(); dit != d.<span class="built_in">end</span>(); dit++)</span><br><span class="line">&#123;</span><br><span class="line">sum += *dit; <span class="comment">//ç´¯åŠ æ¯ä¸ªè¯„å§”çš„åˆ†æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> avg = sum / d.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å¹³å‡åˆ† èµ‹å€¼ç»™é€‰æ‰‹èº«ä¸Š</span></span><br><span class="line">it-&gt;m_Score = avg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showScore</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹³å‡åˆ†ï¼š &quot;</span> &lt;&lt; it-&gt;m_Score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éšæœºæ•°ç§å­</span></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€åˆ›å»º5åé€‰æ‰‹</span></span><br><span class="line">vector&lt;Person&gt;v;  <span class="comment">//å­˜æ”¾é€‰æ‰‹å®¹å™¨</span></span><br><span class="line"><span class="built_in">createPerson</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//for (vector&lt;Person&gt;::iterator it = v.begin(); it != v.end(); it++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; (*it).m_Name &lt;&lt; &quot; åˆ†æ•°ï¼š &quot; &lt;&lt; (*it).m_Score &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€ç»™5åé€‰æ‰‹æ‰“åˆ†</span></span><br><span class="line"><span class="built_in">setScore</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ˜¾ç¤ºæœ€åå¾—åˆ†</span></span><br><span class="line"><span class="built_in">showScore</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> é€‰å–ä¸åŒçš„å®¹å™¨æ“ä½œæ•°æ®ï¼Œå¯ä»¥æå‡ä»£ç çš„æ•ˆç‡</p><h3 id="3-5-stackå®¹å™¨"><a href="#3-5-stackå®¹å™¨" class="headerlink" title="3.5 stackå®¹å™¨"></a>3.5 stackå®¹å™¨</h3><h4 id="3-5-1-stack-åŸºæœ¬æ¦‚å¿µ"><a href="#3-5-1-stack-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.5.1 stack åŸºæœ¬æ¦‚å¿µ"></a>3.5.1 stack åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong>stackæ˜¯ä¸€ç§<strong>å…ˆè¿›åå‡º</strong>(First In Last Out,FILO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå‡ºå£</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/9.png" alt="è¯´æ˜: 2015-11-15_195707"></p><p>æ ˆä¸­åªæœ‰é¡¶ç«¯çš„å…ƒç´ æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤æ ˆä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>æ ˆä¸­è¿›å…¥æ•°æ®ç§°ä¸º  â€” <strong>å…¥æ ˆ</strong>  <code>push</code></p><p>æ ˆä¸­å¼¹å‡ºæ•°æ®ç§°ä¸º  â€” <strong>å‡ºæ ˆ</strong>  <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„æ ˆï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/6.png" alt="img"></p><p><img src="https://picbed.dai2yutou.space/article_img/c++/10.png" alt="img"></p><h4 id="3-5-2-stack-å¸¸ç”¨æ¥å£"><a href="#3-5-2-stack-å¸¸ç”¨æ¥å£" class="headerlink" title="3.5.2 stack å¸¸ç”¨æ¥å£"></a>3.5.2 stack å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼šæ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>stack&lt;T&gt; stk;</code>                                 &#x2F;&#x2F;stacké‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œ stackå¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>stack(const stack &amp;stk);</code>            &#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>stack&amp; operator=(const stack &amp;stk);</code>           &#x2F;&#x2F;é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code>      &#x2F;&#x2F;å‘æ ˆé¡¶æ·»åŠ å…ƒç´ </li><li><code>pop();</code>                &#x2F;&#x2F;ä»æ ˆé¡¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>top(); </code>                &#x2F;&#x2F;è¿”å›æ ˆé¡¶å…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code>            &#x2F;&#x2F;åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code>              &#x2F;&#x2F;è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ˆå®¹å™¨å¸¸ç”¨æ¥å£</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºæ ˆå®¹å™¨ æ ˆå®¹å™¨å¿…é¡»ç¬¦åˆå…ˆè¿›åå‡º</span></span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘æ ˆä¸­æ·»åŠ å…ƒç´ ï¼Œå«åš å‹æ ˆ å…¥æ ˆ</span></span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">10</span>);</span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">20</span>);</span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line"><span class="comment">//è¾“å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ ˆé¡¶å…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; s.<span class="built_in">top</span>() &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">s.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ ˆçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; s.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥æ ˆ   â€” push</li><li>å‡ºæ ˆ   â€” pop</li><li>è¿”å›æ ˆé¡¶   â€” top</li><li>åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›æ ˆå¤§å°   â€” size</li></ul><h3 id="3-6-queue-å®¹å™¨"><a href="#3-6-queue-å®¹å™¨" class="headerlink" title="3.6 queue å®¹å™¨"></a>3.6 queue å®¹å™¨</h3><h4 id="3-6-1-queue-åŸºæœ¬æ¦‚å¿µ"><a href="#3-6-1-queue-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.6.1 queue åŸºæœ¬æ¦‚å¿µ"></a>3.6.1 queue åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong>Queueæ˜¯ä¸€ç§<strong>å…ˆè¿›å…ˆå‡º</strong>(First In First Out,FIFO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡ºå£</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/11.png" alt="è¯´æ˜: 2015-11-15_214429"></p><p>é˜Ÿåˆ—å®¹å™¨å…è®¸ä»ä¸€ç«¯æ–°å¢å…ƒç´ ï¼Œä»å¦ä¸€ç«¯ç§»é™¤å…ƒç´ </p><p>é˜Ÿåˆ—ä¸­åªæœ‰é˜Ÿå¤´å’Œé˜Ÿå°¾æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤é˜Ÿåˆ—ä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>é˜Ÿåˆ—ä¸­è¿›æ•°æ®ç§°ä¸º â€” <strong>å…¥é˜Ÿ</strong>    <code>push</code></p><p>é˜Ÿåˆ—ä¸­å‡ºæ•°æ®ç§°ä¸º â€” <strong>å‡ºé˜Ÿ</strong>    <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„é˜Ÿåˆ—ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/4.png" alt="1547606785041"></p><h4 id="3-6-2-queue-å¸¸ç”¨æ¥å£"><a href="#3-6-2-queue-å¸¸ç”¨æ¥å£" class="headerlink" title="3.6.2 queue å¸¸ç”¨æ¥å£"></a>3.6.2 queue å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼šæ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>queue&lt;T&gt; que;</code>                                 &#x2F;&#x2F;queueé‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œqueueå¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>queue(const queue &amp;que);</code>            &#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>queue&amp; operator=(const queue &amp;que);</code>           &#x2F;&#x2F;é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code>                             &#x2F;&#x2F;å¾€é˜Ÿå°¾æ·»åŠ å…ƒç´ </li><li><code>pop();</code>                                      &#x2F;&#x2F;ä»é˜Ÿå¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>back();</code>                                    &#x2F;&#x2F;è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>front(); </code>                                  &#x2F;&#x2F;è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code>            &#x2F;&#x2F;åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code>              &#x2F;&#x2F;è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">queue&lt;Person&gt; q;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡†å¤‡æ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;å”åƒ§&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">1000</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">900</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;æ²™åƒ§&quot;</span>, <span class="number">800</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´   å…¥é˜Ÿæ“ä½œ</span></span><br><span class="line">q.<span class="built_in">push</span>(p1);</span><br><span class="line">q.<span class="built_in">push</span>(p2);</span><br><span class="line">q.<span class="built_in">push</span>(p3);</span><br><span class="line">q.<span class="built_in">push</span>(p4);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é˜Ÿåˆ—ä¸æä¾›è¿­ä»£å™¨ï¼Œæ›´ä¸æ”¯æŒéšæœºè®¿é—®</span></span><br><span class="line"><span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line"><span class="comment">//è¾“å‡ºé˜Ÿå¤´å…ƒç´ </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿå¤´å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="built_in">front</span>().m_Name </span><br><span class="line">              &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span>&lt;&lt; q.<span class="built_in">front</span>().m_Age &lt;&lt; endl;</span><br><span class="line">        </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿå°¾å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="built_in">back</span>().m_Name  </span><br><span class="line">              &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; q.<span class="built_in">back</span>().m_Age &lt;&lt; endl;</span><br><span class="line">        </span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¼¹å‡ºé˜Ÿå¤´å…ƒç´ </span></span><br><span class="line">q.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿåˆ—å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; q.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥é˜Ÿ   â€” push</li><li>å‡ºé˜Ÿ   â€” pop</li><li>è¿”å›é˜Ÿå¤´å…ƒç´    â€” front</li><li>è¿”å›é˜Ÿå°¾å…ƒç´    â€” back</li><li>åˆ¤æ–­é˜Ÿæ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›é˜Ÿåˆ—å¤§å°   â€” size</li></ul><h3 id="3-7-listå®¹å™¨"><a href="#3-7-listå®¹å™¨" class="headerlink" title="3.7 listå®¹å™¨"></a>3.7 listå®¹å™¨</h3><h4 id="3-7-1-liståŸºæœ¬æ¦‚å¿µ"><a href="#3-7-1-liståŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.7.1 liståŸºæœ¬æ¦‚å¿µ"></a>3.7.1 liståŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong>å°†æ•°æ®è¿›è¡Œé“¾å¼å­˜å‚¨</p><p><strong>é“¾è¡¨</strong>ï¼ˆlistï¼‰æ˜¯ä¸€ç§ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­çš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨ä¸­çš„æŒ‡é’ˆé“¾æ¥å®ç°çš„</p><p>é“¾è¡¨çš„ç»„æˆï¼šé“¾è¡¨ç”±ä¸€ç³»åˆ—<strong>ç»“ç‚¹</strong>ç»„æˆ</p><p>ç»“ç‚¹çš„ç»„æˆï¼šä¸€ä¸ªæ˜¯å­˜å‚¨æ•°æ®å…ƒç´ çš„<strong>æ•°æ®åŸŸ</strong>ï¼Œå¦ä¸€ä¸ªæ˜¯å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„<strong>æŒ‡é’ˆåŸŸ</strong></p><p>STLä¸­çš„é“¾è¡¨æ˜¯ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨</p><p><img src="https://picbed.dai2yutou.space/article_img/c++/12.png" alt="è¯´æ˜: 2015-11-15_225145"></p><p>ç”±äºé“¾è¡¨çš„å­˜å‚¨æ–¹å¼å¹¶ä¸æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤é“¾è¡¨listä¸­çš„è¿­ä»£å™¨åªæ”¯æŒå‰ç§»å’Œåç§»ï¼Œå±äº<strong>åŒå‘è¿­ä»£å™¨</strong></p><p>listçš„ä¼˜ç‚¹ï¼š</p><ul><li>é‡‡ç”¨åŠ¨æ€å­˜å‚¨åˆ†é…ï¼Œä¸ä¼šé€ æˆå†…å­˜æµªè´¹å’Œæº¢å‡º</li><li>é“¾è¡¨æ‰§è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œååˆ†æ–¹ä¾¿ï¼Œä¿®æ”¹æŒ‡é’ˆå³å¯ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ </li></ul><p>listçš„ç¼ºç‚¹ï¼š</p><ul><li>é“¾è¡¨çµæ´»ï¼Œä½†æ˜¯ç©ºé—´(æŒ‡é’ˆåŸŸ) å’Œ æ—¶é—´ï¼ˆéå†ï¼‰é¢å¤–è€—è´¹è¾ƒå¤§</li></ul><p>Listæœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œæ’å…¥æ“ä½œå’Œåˆ é™¤æ“ä½œéƒ½ä¸ä¼šé€ æˆåŸæœ‰listè¿­ä»£å™¨çš„å¤±æ•ˆï¼Œè¿™åœ¨vectoræ˜¯ä¸æˆç«‹çš„ã€‚</p><p>æ€»ç»“ï¼šSTLä¸­<strong>Listå’Œvectoræ˜¯ä¸¤ä¸ªæœ€å¸¸è¢«ä½¿ç”¨çš„å®¹å™¨</strong>ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹</p><h4 id="3-7-2-listæ„é€ å‡½æ•°"><a href="#3-7-2-listæ„é€ å‡½æ•°" class="headerlink" title="3.7.2  listæ„é€ å‡½æ•°"></a>3.7.2  listæ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»ºlistå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>list&lt;T&gt; lst;</code>                               &#x2F;&#x2F;listé‡‡ç”¨é‡‡ç”¨æ¨¡æ¿ç±»å®ç°,å¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼ï¼š</li><li><code>list(beg,end);</code>                           &#x2F;&#x2F;æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(n,elem);</code>                             &#x2F;&#x2F;æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(const list &amp;lst);</code>            &#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L2</span>(L1.<span class="built_in">begin</span>(),L1.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L3</span>(L2);</span><br><span class="line"><span class="built_in">printList</span>(L3);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L4</span>(<span class="number">10</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlistæ„é€ æ–¹å¼åŒå…¶ä»–å‡ ä¸ªSTLå¸¸ç”¨å®¹å™¨ï¼Œç†Ÿç»ƒæŒæ¡å³å¯</p><h4 id="3-7-3-list-èµ‹å€¼å’Œäº¤æ¢"><a href="#3-7-3-list-èµ‹å€¼å’Œäº¤æ¢" class="headerlink" title="3.7.3 list èµ‹å€¼å’Œäº¤æ¢"></a>3.7.3 list èµ‹å€¼å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™listå®¹å™¨è¿›è¡Œèµ‹å€¼ï¼Œä»¥åŠäº¤æ¢listå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>assign(beg, end);</code>            &#x2F;&#x2F;å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>assign(n, elem);</code>              &#x2F;&#x2F;å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>list&amp; operator=(const list &amp;lst);</code>         &#x2F;&#x2F;é‡è½½ç­‰å·æ“ä½œç¬¦</li><li><code>swap(lst);</code>                         &#x2F;&#x2F;å°†lstä¸æœ¬èº«çš„å…ƒç´ äº’æ¢ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼å’Œäº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L2;</span><br><span class="line">L2 = L1;</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L3;</span><br><span class="line">L3.<span class="built_in">assign</span>(L2.<span class="built_in">begin</span>(), L2.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printList</span>(L3);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L4;</span><br><span class="line">L4.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printList</span>(L4);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L2;</span><br><span class="line">L2.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">L1.<span class="built_in">swap</span>(L2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlistèµ‹å€¼å’Œäº¤æ¢æ“ä½œèƒ½å¤Ÿçµæ´»è¿ç”¨å³å¯</p><h4 id="3-7-4-list-å¤§å°æ“ä½œ"><a href="#3-7-4-list-å¤§å°æ“ä½œ" class="headerlink" title="3.7.4 list å¤§å°æ“ä½œ"></a>3.7.4 list å¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>size(); </code>                             &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>empty(); </code>                           &#x2F;&#x2F;åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>resize(num);</code>                   &#x2F;&#x2F;é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹    &#x2F;&#x2F;å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(num, elem); </code>       &#x2F;&#x2F;é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><pre><code>               â€‹    //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</code></pre></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (L1.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; L1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡æ–°æŒ‡å®šå¤§å°</span></span><br><span class="line">L1.<span class="built_in">resize</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line">L1.<span class="built_in">resize</span>(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°   â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•°   â€” resize</li></ul><h4 id="3-7-5-list-æ’å…¥å’Œåˆ é™¤"><a href="#3-7-5-list-æ’å…¥å’Œåˆ é™¤" class="headerlink" title="3.7.5 list æ’å…¥å’Œåˆ é™¤"></a>3.7.5 list æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨è¿›è¡Œæ•°æ®çš„æ’å…¥å’Œåˆ é™¤</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li>push_back(elem);&#x2F;&#x2F;åœ¨å®¹å™¨å°¾éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_back();&#x2F;&#x2F;åˆ é™¤å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ </li><li>push_front(elem);&#x2F;&#x2F;åœ¨å®¹å™¨å¼€å¤´æ’å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_front();&#x2F;&#x2F;ä»å®¹å™¨å¼€å¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>insert(pos,elem);&#x2F;&#x2F;åœ¨posä½ç½®æ’elemå…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</li><li>insert(pos,n,elem);&#x2F;&#x2F;åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>insert(pos,beg,end);&#x2F;&#x2F;åœ¨posä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>clear();&#x2F;&#x2F;ç§»é™¤å®¹å™¨çš„æ‰€æœ‰æ•°æ®</li><li>erase(beg,end);&#x2F;&#x2F;åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>erase(pos);&#x2F;&#x2F;åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>remove(elem);&#x2F;&#x2F;åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰ä¸elemå€¼åŒ¹é…çš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; L;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line"><span class="comment">//å¤´æ’</span></span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">L.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤´åˆ </span></span><br><span class="line">L.<span class="built_in">pop_front</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;::iterator it = L.<span class="built_in">begin</span>();</span><br><span class="line">L.<span class="built_in">insert</span>(++it, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">it = L.<span class="built_in">begin</span>();</span><br><span class="line">L.<span class="built_in">erase</span>(++it);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§»é™¤</span></span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">L.<span class="built_in">remove</span>(<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ¸…ç©º</span></span><br><span class="line">L.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’   â€” push_back</li><li>å°¾åˆ    â€” pop_back</li><li>å¤´æ’   â€” push_front</li><li>å¤´åˆ    â€” pop_front</li><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>ç§»é™¤   â€” remove</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-7-6-list-æ•°æ®å­˜å–"><a href="#3-7-6-list-æ•°æ®å­˜å–" class="headerlink" title="3.7.6 list æ•°æ®å­˜å–"></a>3.7.6 list æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨ä¸­æ•°æ®è¿›è¡Œå­˜å–</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>front();</code>        &#x2F;&#x2F;è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li><li><code>back();</code>         &#x2F;&#x2F;è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®å­˜å–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; L1.at(0) &lt;&lt; endl;//é”™è¯¯ ä¸æ”¯æŒatè®¿é—®æ•°æ®</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; L1[0] &lt;&lt; endl; //é”™è¯¯  ä¸æ”¯æŒ[]æ–¹å¼è®¿é—®æ•°æ®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L1.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L1.<span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//listå®¹å™¨çš„è¿­ä»£å™¨æ˜¯åŒå‘è¿­ä»£å™¨ï¼Œä¸æ”¯æŒéšæœºè®¿é—®</span></span><br><span class="line">    <span class="comment">//åŸå› æ˜¯listæœ¬è´¨æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œä¸æ˜¯ç”¨è¿ç»­çº¿æ€§ç©ºé—´å­˜å‚¨æ•°æ®</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;::iterator it = L1.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">//it = it + 1;//é”™è¯¯ï¼Œä¸å¯ä»¥è·³è·ƒè®¿é—®ï¼Œå³ä½¿æ˜¯+1ï¼Œå¯ä»¥it++ã€++iã€--iã€i--</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>listå®¹å™¨ä¸­ä¸å¯ä»¥é€šè¿‡[]æˆ–è€…atæ–¹å¼è®¿é—®æ•°æ®</li><li>è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´    â€” front</li><li>è¿”å›æœ€åä¸€ä¸ªå…ƒç´    â€” back</li></ul><h4 id="3-7-7-list-åè½¬å’Œæ’åº"><a href="#3-7-7-list-åè½¬å’Œæ’åº" class="headerlink" title="3.7.7 list åè½¬å’Œæ’åº"></a>3.7.7 list åè½¬å’Œæ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨ä¸­çš„å…ƒç´ åè½¬ï¼Œä»¥åŠå°†å®¹å™¨ä¸­çš„æ•°æ®è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reverse();</code>   &#x2F;&#x2F;åè½¬é“¾è¡¨</li><li><code>sort();</code>        &#x2F;&#x2F;é“¾è¡¨æ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(<span class="type">int</span> val1 , <span class="type">int</span> val2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val1 &gt; val2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬å’Œæ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; L;</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">90</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">70</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬å®¹å™¨çš„å…ƒç´ </span></span><br><span class="line">L.<span class="built_in">reverse</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åº</span></span><br><span class="line">    <span class="comment">//ä¸èƒ½ä½¿ç”¨sort(L.begin(),L.end())ï¼Œ</span></span><br><span class="line">    <span class="comment">//æ‰€æœ‰ä¸æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨çš„å®¹å™¨ï¼Œä¸å¯ä»¥ç”¨æ ‡å‡†ç®—æ³•</span></span><br><span class="line">    <span class="comment">//ä¸æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨çš„å®¹å™¨ï¼Œå†…éƒ¨ä¼šæä¾›å¯¹åº”çš„ç®—æ³•</span></span><br><span class="line">L.<span class="built_in">sort</span>(); <span class="comment">//é»˜è®¤çš„æ’åºè§„åˆ™ ä»å°åˆ°å¤§sort()åº•å±‚ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ’åºç®—æ³•</span></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line">L.<span class="built_in">sort</span>(myCompare); <span class="comment">//æŒ‡å®šè§„åˆ™ï¼Œä»å¤§åˆ°å°</span></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åè½¬   â€” reverse</li><li>æ’åº   â€” sort ï¼ˆæˆå‘˜å‡½æ•°ï¼‰</li></ul><h4 id="3-7-8-æ’åºæ¡ˆä¾‹"><a href="#3-7-8-æ’åºæ¡ˆä¾‹" class="headerlink" title="3.7.8 æ’åºæ¡ˆä¾‹"></a>3.7.8 æ’åºæ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼šå°†Personè‡ªå®šä¹‰æ•°æ®ç±»å‹è¿›è¡Œæ’åºï¼ŒPersonä¸­å±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜</p><p>æ’åºè§„åˆ™ï¼šæŒ‰ç…§å¹´é¾„è¿›è¡Œå‡åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰ç…§èº«é«˜è¿›è¡Œé™åº</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age , <span class="type">int</span> height) &#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">m_Age = age;</span><br><span class="line">m_Height = height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> m_Age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> m_Height;   <span class="comment">//èº«é«˜</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ComparePerson</span><span class="params">(Person&amp; p1, Person&amp; p2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (p1.m_Age ** p2.m_Age) &#123;</span><br><span class="line"><span class="keyword">return</span> p1.m_Height  &gt; p2.m_Height;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>  p1.m_Age &lt; p2.m_Age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">list&lt;Person&gt; L;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span> , <span class="number">175</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">45</span> , <span class="number">180</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å­™æƒ&quot;</span>, <span class="number">40</span> , <span class="number">170</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">25</span> , <span class="number">190</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span> , <span class="number">160</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p6</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span> , <span class="number">200</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">L.<span class="built_in">push_back</span>(p1);</span><br><span class="line">L.<span class="built_in">push_back</span>(p2);</span><br><span class="line">L.<span class="built_in">push_back</span>(p3);</span><br><span class="line">L.<span class="built_in">push_back</span>(p4);</span><br><span class="line">L.<span class="built_in">push_back</span>(p5);</span><br><span class="line">L.<span class="built_in">push_back</span>(p6);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age </span><br><span class="line">              &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">L.<span class="built_in">sort</span>(ComparePerson); <span class="comment">//æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age </span><br><span class="line">              &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¸çŸ¥é“å¦‚ä½•è¿›è¡Œæ’åº</p></li><li><p>é«˜çº§æ’åºåªæ˜¯åœ¨æ’åºè§„åˆ™ä¸Šå†è¿›è¡Œä¸€æ¬¡é€»è¾‘è§„åˆ™åˆ¶å®šï¼Œå¹¶ä¸å¤æ‚</p></li></ul><h3 id="3-8-set-x2F-multiset-å®¹å™¨"><a href="#3-8-set-x2F-multiset-å®¹å™¨" class="headerlink" title="3.8 set&#x2F; multiset å®¹å™¨"></a>3.8 set&#x2F; multiset å®¹å™¨</h3><h4 id="3-8-1-setåŸºæœ¬æ¦‚å¿µ"><a href="#3-8-1-setåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.8.1 setåŸºæœ¬æ¦‚å¿µ"></a>3.8.1 setåŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨æ’å…¥æ—¶è‡ªåŠ¨è¢«æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>set&#x2F;multisetå±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨<strong>äºŒå‰æ ‘</strong>å®ç°ã€‚</li></ul><p><strong>setå’ŒmultisetåŒºåˆ«</strong>ï¼š</p><ul><li>setä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ ï¼ˆä¼šè‡ªåŠ¨æ’åºå’Œå»é‡,ï¼Œæ’å…¥é‡å¤å€¼æ—¶ä¼šæ’å…¥å¤±è´¥ï¼‰</li><li>multisetå…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </li></ul><h4 id="3-8-2-setæ„é€ å’Œèµ‹å€¼"><a href="#3-8-2-setæ„é€ å’Œèµ‹å€¼" class="headerlink" title="3.8.2 setæ„é€ å’Œèµ‹å€¼"></a>3.8.2 setæ„é€ å’Œèµ‹å€¼</h4><p>åŠŸèƒ½æè¿°ï¼šåˆ›å»ºsetå®¹å™¨ä»¥åŠèµ‹å€¼</p><p>æ„é€ ï¼š</p><ul><li><code>set&lt;T&gt; st;</code>                        &#x2F;&#x2F;é»˜è®¤æ„é€ å‡½æ•°ï¼š</li><li><code>set(const set &amp;st);</code>       &#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼ï¼š</p><ul><li><code>set&amp; operator=(const set &amp;st);</code>    &#x2F;&#x2F;é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å’Œèµ‹å€¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ’å…¥æ•°æ®åªæœ‰insert()æ–¹å¼</span></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;<span class="built_in">s2</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;s3;</span><br><span class="line">s3 = s2;</span><br><span class="line"><span class="built_in">printSet</span>(s3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>setå®¹å™¨æ’å…¥æ•°æ®æ—¶ç”¨insert</li><li>setå®¹å™¨æ’å…¥æ•°æ®çš„æ•°æ®ä¼šè‡ªåŠ¨æ’åº</li></ul><h4 id="3-8-3-setå¤§å°å’Œäº¤æ¢"><a href="#3-8-3-setå¤§å°å’Œäº¤æ¢" class="headerlink" title="3.8.3 setå¤§å°å’Œäº¤æ¢"></a>3.8.3 setå¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡setå®¹å™¨å¤§å°ä»¥åŠäº¤æ¢setå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>size();</code>          &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code>        &#x2F;&#x2F;åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code>      &#x2F;&#x2F;äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (s1.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; s1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt; s2;</span><br><span class="line"></span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">100</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">300</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">200</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">s1.<span class="built_in">swap</span>(s2);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å°   â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>äº¤æ¢å®¹å™¨   â€” swap</li></ul><h4 id="3-8-4-setæ’å…¥å’Œåˆ é™¤"><a href="#3-8-4-setæ’å…¥å’Œåˆ é™¤" class="headerlink" title="3.8.4 setæ’å…¥å’Œåˆ é™¤"></a>3.8.4 setæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>setå®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code>           &#x2F;&#x2F;åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code>                    &#x2F;&#x2F;æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code>              &#x2F;&#x2F;åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code>    &#x2F;&#x2F;åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(elem);</code>            &#x2F;&#x2F;åˆ é™¤å®¹å™¨ä¸­å€¼ä¸ºelemçš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">s1.<span class="built_in">erase</span>(s1.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">s1.<span class="built_in">erase</span>(<span class="number">30</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line"><span class="comment">//s1.erase(s1.begin(), s1.end());</span></span><br><span class="line">s1.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-8-5-setæŸ¥æ‰¾å’Œç»Ÿè®¡"><a href="#3-8-5-setæŸ¥æ‰¾å’Œç»Ÿè®¡" class="headerlink" title="3.8.5 setæŸ¥æ‰¾å’Œç»Ÿè®¡"></a>3.8.5 setæŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹setå®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code>                  &#x2F;&#x2F;æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›set.end();</li><li><code>count(key);</code>                &#x2F;&#x2F;ç»Ÿè®¡keyçš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator pos = s1.<span class="built_in">find</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos != s1.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†å…ƒç´  ï¼š &quot;</span> &lt;&lt; *pos &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡</span></span><br><span class="line"><span class="type">int</span> num = s1.<span class="built_in">count</span>(<span class="number">30</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾   â€”  find    ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡   â€”  count  ï¼ˆå¯¹äºsetï¼Œç»“æœä¸º0æˆ–è€…1ï¼‰</li></ul><h4 id="3-8-6-setå’ŒmultisetåŒºåˆ«"><a href="#3-8-6-setå’ŒmultisetåŒºåˆ«" class="headerlink" title="3.8.6 setå’ŒmultisetåŒºåˆ«"></a>3.8.6 setå’ŒmultisetåŒºåˆ«</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡setå’Œmultisetçš„åŒºåˆ«</li></ul><p><strong>åŒºåˆ«ï¼š</strong></p><ul><li>setä¸å¯ä»¥æ’å…¥é‡å¤æ•°æ®ï¼Œè€Œmultisetå¯ä»¥</li><li>setæ’å…¥æ•°æ®çš„åŒæ—¶ä¼šè¿”å›æ’å…¥ç»“æœã€è¿”å›çš„æ˜¯pairå®¹å™¨ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ•°æ®seconæ˜¯setçš„è¿­ä»£å™¨ï¼Œç¬¬äºŒä¸ªæ•°æ®æ˜¯boolç±»å‹ã€‘ï¼Œè¡¨ç¤ºæ’å…¥æ˜¯å¦æˆåŠŸ</li><li>multisetä¸ä¼šæ£€æµ‹æ•°æ®ï¼Œå› æ­¤å¯ä»¥æ’å…¥é‡å¤æ•°æ®</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//setå’ŒmultisetåŒºåˆ«</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">pair&lt;set&lt;<span class="type">int</span>&gt;::iterator, <span class="type">bool</span>&gt;  ret = s.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span> (ret.second) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret = s.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span> (ret.second) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒæ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒæ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//multiset</span></span><br><span class="line">multiset&lt;<span class="type">int</span>&gt; ms;</span><br><span class="line">ms.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">ms.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (multiset&lt;<span class="type">int</span>&gt;::iterator it = ms.<span class="built_in">begin</span>(); it != ms.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å¦‚æœä¸å…è®¸æ’å…¥é‡å¤æ•°æ®å¯ä»¥åˆ©ç”¨set</li><li>å¦‚æœéœ€è¦æ’å…¥é‡å¤æ•°æ®åˆ©ç”¨multiset</li></ul><h4 id="3-8-7-pairå¯¹ç»„åˆ›å»º"><a href="#3-8-7-pairå¯¹ç»„åˆ›å»º" class="headerlink" title="3.8.7 pairå¯¹ç»„åˆ›å»º"></a>3.8.7 pairå¯¹ç»„åˆ›å»º</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æˆå¯¹å‡ºç°çš„æ•°æ®ï¼Œåˆ©ç”¨å¯¹ç»„å¯ä»¥è¿”å›ä¸¤ä¸ªæ•°æ®</li></ul><p>ã€ä¸éœ€è¦å¤´æ–‡ä»¶ã€‘</p><p><strong>ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š</strong></p><ul><li><code>pair&lt;type, type&gt; p ( value1, value2 );</code></li><li><code>pair&lt;type, type&gt; p = make_pair( value1, value2 );</code></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹ç»„åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">pair&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(string(<span class="string">&quot;Tom&quot;</span>), <span class="number">20</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt;  p.first &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">pair&lt;string, <span class="type">int</span>&gt; p2 = <span class="built_in">make_pair</span>(<span class="string">&quot;Jerry&quot;</span>, <span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p2.first &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p2.second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥åˆ›å»ºå¯¹ç»„ï¼Œè®°ä½ä¸€ç§å³å¯</p><h4 id="3-8-8-setå®¹å™¨æ’åº"><a href="#3-8-8-setå®¹å™¨æ’åº" class="headerlink" title="3.8.8 setå®¹å™¨æ’åº"></a>3.8.8 setå®¹å™¨æ’åº</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>setå®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸ºä»å°åˆ°å¤§ï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p>ä¸»è¦æŠ€æœ¯ç‚¹ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ä¸€</strong>   setå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> <span class="comment">//ä»¿å‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;<span class="comment">//é‡è½½</span></span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s1.<span class="built_in">begin</span>(); it != s1.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡å®šæ’åºè§„åˆ™</span></span><br><span class="line">set&lt;<span class="type">int</span>,MyCompare&gt; s2;</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>, MyCompare&gt;::iterator it = s2.<span class="built_in">begin</span>(); it != s2.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šåˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®šsetå®¹å™¨çš„æ’åºè§„åˆ™</p><p><strong>ç¤ºä¾‹äºŒ</strong> setå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">comparePerson</span><span class="comment">//ä»¿å‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Person&amp; p1, <span class="type">const</span> Person &amp;p2)</span><span class="comment">//é‡è½½</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº  é™åº</span></span><br><span class="line"><span class="keyword">return</span> p1.m_Age &gt; p2.m_Age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;Person, comparePerson&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">23</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">27</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">21</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">insert</span>(p1);</span><br><span class="line">s.<span class="built_in">insert</span>(p2);</span><br><span class="line">s.<span class="built_in">insert</span>(p3);</span><br><span class="line">s.<span class="built_in">insert</span>(p4);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (set&lt;Person, comparePerson&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œsetå¿…é¡»æŒ‡å®šæ’åºè§„åˆ™æ‰å¯ä»¥æ’å…¥æ•°æ®</p><h4 id="3-8-9-å…³äºmultiset"><a href="#3-8-9-å…³äºmultiset" class="headerlink" title="3.8.9 å…³äºmultiset"></a>3.8.9 å…³äºmultiset</h4><p>multisetçš„å…¨ç§°æ˜¯â€œmultiple setsâ€ï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºâ€œå¤šé‡é›†åˆâ€ï¼Œå®ƒæ˜¯C++ STLä¸­çš„ä¸€ä¸ªå®¹å™¨ç±»ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªç›¸åŒçš„å…ƒç´ ã€‚ä¸setä¸åŒï¼Œmultisetä¸­å…è®¸å‡ºç°é‡å¤å…ƒç´ ï¼Œä¸”å…ƒç´ ä¼šæŒ‰ç…§ä¸€å®šçš„æ’åºè§„åˆ™è¿›è¡Œè‡ªåŠ¨æ’åºã€‚multisetå†…éƒ¨å®ç°é€šå¸¸ä½¿ç”¨<code>çº¢é»‘æ ‘</code>ï¼Œå…·æœ‰å¿«é€ŸæŸ¥æ‰¾å’Œæ’å…¥çš„ç‰¹ç‚¹ã€‚multisetçš„ä½¿ç”¨æ–¹æ³•ä¸setç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨éå†å…ƒç´ ã€ä½¿ç”¨insert()æ’å…¥å…ƒç´ ã€ä½¿ç”¨erase()åˆ é™¤å…ƒç´ ç­‰ã€‚</p><h3 id="3-9-map-x2F-multimapå®¹å™¨"><a href="#3-9-map-x2F-multimapå®¹å™¨" class="headerlink" title="3.9 map&#x2F; multimapå®¹å™¨"></a>3.9 map&#x2F; multimapå®¹å™¨</h3><h4 id="3-9-1-mapåŸºæœ¬æ¦‚å¿µ"><a href="#3-9-1-mapåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.9.1 mapåŸºæœ¬æ¦‚å¿µ"></a>3.9.1 mapåŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>mapä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯pair</li><li>pairä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºkeyï¼ˆé”®å€¼ï¼‰ï¼Œèµ·åˆ°ç´¢å¼•ä½œç”¨ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºvalueï¼ˆå®å€¼ï¼‰</li><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šæ ¹æ®å…ƒç´ çš„é”®å€¼è‡ªåŠ¨æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>map&#x2F;multimapå±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨äºŒå‰æ ‘å®ç°ã€‚</li></ul><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å¯ä»¥æ ¹æ®keyå€¼å¿«é€Ÿæ‰¾åˆ°valueå€¼</li></ul><p>mapå’Œmultimap<strong>åŒºåˆ«</strong>ï¼š</p><ul><li>mapä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </li><li>multimapå…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </li></ul><h4 id="3-9-2-mapæ„é€ å’Œèµ‹å€¼"><a href="#3-9-2-mapæ„é€ å’Œèµ‹å€¼" class="headerlink" title="3.9.2  mapæ„é€ å’Œèµ‹å€¼"></a>3.9.2  mapæ„é€ å’Œèµ‹å€¼</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹mapå®¹å™¨è¿›è¡Œæ„é€ å’Œèµ‹å€¼æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p><strong>æ„é€ ï¼š</strong></p><ul><li><code>map&lt;T1, T2&gt; mp;</code>                     &#x2F;&#x2F;mapé»˜è®¤æ„é€ å‡½æ•°:</li><li><code>map(const map &amp;mp);</code>             &#x2F;&#x2F;æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>èµ‹å€¼ï¼š</strong></p><ul><li><code>map&amp; operator=(const map &amp;mp);</code>    &#x2F;&#x2F;é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">//ä¸¤ç§æ–¹å¼å–å€¼</span></span><br><span class="line">        <span class="comment">//1.æ ¹æ®itæŒ‡é’ˆ-&gt;</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">        <span class="comment">//2.æ ¹æ®*itå¯¹è±¡.</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;m; <span class="comment">//é»˜è®¤æ„é€ </span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;<span class="built_in">m2</span>(m); <span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m3;</span><br><span class="line">m3 = m2; <span class="comment">//èµ‹å€¼</span></span><br><span class="line"><span class="built_in">printMap</span>(m3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šmapä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œæ’å…¥æ•°æ®æ—¶å€™è¦ä½¿ç”¨å¯¹ç»„</p><h4 id="3-9-3-mapå¤§å°å’Œäº¤æ¢"><a href="#3-9-3-mapå¤§å°å’Œäº¤æ¢" class="headerlink" title="3.9.3 mapå¤§å°å’Œäº¤æ¢"></a>3.9.3 mapå¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡mapå®¹å™¨å¤§å°ä»¥åŠäº¤æ¢mapå®¹å™¨</li></ul><p>å‡½æ•°åŸå‹ï¼š</p><ul><li><code>size();</code>          &#x2F;&#x2F;è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code>        &#x2F;&#x2F;åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code>      &#x2F;&#x2F;äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (m.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mçš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; m.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m2;</span><br><span class="line">m2.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">4</span>, <span class="number">100</span>));</span><br><span class="line">m2.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">5</span>, <span class="number">200</span>));</span><br><span class="line">m2.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">6</span>, <span class="number">300</span>));</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">m.<span class="built_in">swap</span>(m2);</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å°   â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>äº¤æ¢å®¹å™¨   â€” swap</li></ul><h4 id="3-9-4-mapæ’å…¥å’Œåˆ é™¤"><a href="#3-9-4-mapæ’å…¥å’Œåˆ é™¤" class="headerlink" title="3.9.4 mapæ’å…¥å’Œåˆ é™¤"></a>3.9.4 mapæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>mapå®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code>           &#x2F;&#x2F;åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code>                    &#x2F;&#x2F;æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code>              &#x2F;&#x2F;åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code>    &#x2F;&#x2F;åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(key);</code>            &#x2F;&#x2F;åˆ é™¤å®¹å™¨ä¸­é”®å€¼ä¸ºkeyçš„å…ƒç´ ã€æŒ‰ç…§keyåˆ é™¤ã€‘ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::<span class="built_in">value_type</span>(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"><span class="comment">//ç¬¬å››ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m[<span class="number">4</span>] = <span class="number">40</span>; </span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">erase</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line">m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>(),m.<span class="built_in">end</span>());</span><br><span class="line">m.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>mapæ’å…¥æ–¹å¼å¾ˆå¤šï¼Œè®°ä½å…¶ä¸€å³å¯</li></ul><ul><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-9-5-mapæŸ¥æ‰¾å’Œç»Ÿè®¡"><a href="#3-9-5-mapæŸ¥æ‰¾å’Œç»Ÿè®¡" class="headerlink" title="3.9.5 mapæŸ¥æ‰¾å’Œç»Ÿè®¡"></a>3.9.5 mapæŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹mapå®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code>                  &#x2F;&#x2F;æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›map.end();</li><li><code>count(key);</code>                &#x2F;&#x2F;ç»Ÿè®¡keyçš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m; </span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator pos = m.<span class="built_in">find</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos != m.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†å…ƒç´  key = &quot;</span> &lt;&lt; (*pos).first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; (*pos).second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡</span></span><br><span class="line"><span class="type">int</span> num = m.<span class="built_in">count</span>(<span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾   â€”  find    ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡   â€”  count  ï¼ˆå¯¹äºmapï¼Œç»“æœä¸º0æˆ–è€…1ï¼‰</li></ul><h4 id="3-9-6-mapå®¹å™¨æ’åº"><a href="#3-9-6-mapå®¹å™¨æ’åº" class="headerlink" title="3.9.6 mapå®¹å™¨æ’åº"></a>3.9.6 mapå®¹å™¨æ’åº</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>mapå®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸º æŒ‰ç…§keyå€¼è¿›è¡Œ ä»å°åˆ°å¤§æ’åºï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ä¸»è¦æŠ€æœ¯ç‚¹:</strong></p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ä¸€</strong> mapå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é»˜è®¤æŒ‰ç…§keyä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨ä»¿å‡½æ•°å®ç°ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>, MyCompare&gt; m;</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">4</span>, <span class="number">40</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">5</span>, <span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>, MyCompare&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key:&quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value:&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹äºŒ</strong>mapå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;<span class="comment">//è‡ªå®šä¹‰å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Student</span>(string name,<span class="type">int</span> score)&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;score = score;</span><br><span class="line">&#125;</span><br><span class="line">string name;</span><br><span class="line"><span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">compareStudent</span><span class="comment">//ä»¿å‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Student&amp; s1,<span class="type">const</span> Student&amp; s2)</span></span>&#123;<span class="comment">//é‡è½½ï¼Œä½¿ç”¨é”®çš„scoreæ’åºï¼Œä¼ å…¥çš„æ˜¯é”®å€¼</span></span><br><span class="line"><span class="keyword">return</span> s1.score&gt;s2.score;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">map&lt;Student,<span class="type">int</span>,compareStudent&gt; m;</span><br><span class="line"><span class="function">Student <span class="title">s1</span><span class="params">(<span class="string">&quot;å°æˆ´&quot;</span>,<span class="number">100</span>)</span></span>;</span><br><span class="line"><span class="function">Student <span class="title">s2</span><span class="params">(<span class="string">&quot;å°æ¸”å¤´&quot;</span>,<span class="number">61</span>)</span></span>;</span><br><span class="line"><span class="function">Student <span class="title">s3</span><span class="params">(<span class="string">&quot;sb&quot;</span>,<span class="number">59</span>)</span></span>;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(s1,<span class="number">3</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(s2,<span class="number">1</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(s3,<span class="number">2</span>));</span><br><span class="line"><span class="keyword">for</span>(map&lt;Student,<span class="type">int</span>,compareStudent&gt;::iterator it = m.<span class="built_in">begin</span>();it!=m.<span class="built_in">end</span>();it++)&#123;</span><br><span class="line">cout&lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span>&lt;&lt; it-&gt;first.name &lt;&lt; <span class="string">&quot;æˆç»©:&quot;</span> &lt;&lt; it-&gt;first.score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®šmapå®¹å™¨çš„æ’åºè§„åˆ™</li><li>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œmapå¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™,åŒsetå®¹å™¨</li></ul><h3 id="3-10-æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„"><a href="#3-10-æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„" class="headerlink" title="3.10 æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„"></a>3.10 æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„</h3><h4 id="3-10-1-æ¡ˆä¾‹æè¿°"><a href="#3-10-1-æ¡ˆä¾‹æè¿°" class="headerlink" title="3.10.1 æ¡ˆä¾‹æè¿°"></a>3.10.1 æ¡ˆä¾‹æè¿°</h4><ul><li>å…¬å¸ä»Šå¤©æ‹›è˜äº†10ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</li><li>å‘˜å·¥ä¿¡æ¯æœ‰: å§“å  å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</li><li>éšæœºç»™10åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</li><li>é€šè¿‡multimapè¿›è¡Œä¿¡æ¯çš„æ’å…¥  key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ul><h4 id="3-10-2-å®ç°æ­¥éª¤"><a href="#3-10-2-å®ç°æ­¥éª¤" class="headerlink" title="3.10.2 å®ç°æ­¥éª¤"></a>3.10.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»º10åå‘˜å·¥ï¼Œæ”¾åˆ°vectorä¸­</li><li>éå†vectorå®¹å™¨ï¼Œå–å‡ºæ¯ä¸ªå‘˜å·¥ï¼Œè¿›è¡Œéšæœºåˆ†ç»„</li><li>åˆ†ç»„åï¼Œå°†å‘˜å·¥éƒ¨é—¨ç¼–å·ä½œä¸ºkeyï¼Œå…·ä½“å‘˜å·¥ä½œä¸ºvalueï¼Œæ”¾å…¥åˆ°multimapå®¹å™¨ä¸­</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ol><p><strong>æ¡ˆä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">- å…¬å¸ä»Šå¤©æ‹›è˜äº†10ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</span></span><br><span class="line"><span class="comment">- å‘˜å·¥ä¿¡æ¯æœ‰: å§“å  å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</span></span><br><span class="line"><span class="comment">- éšæœºç»™10åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</span></span><br><span class="line"><span class="comment">- é€šè¿‡multimapè¿›è¡Œä¿¡æ¯çš„æ’å…¥  key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</span></span><br><span class="line"><span class="comment">- åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CEHUA  0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MEISHU 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> YANFA  2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Worker</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Salary;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createWorker</span><span class="params">(vector&lt;Worker&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string nameSeed = <span class="string">&quot;ABCDEFGHIJ&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">Worker worker;</span><br><span class="line">worker.m_Name = <span class="string">&quot;å‘˜å·¥&quot;</span>;</span><br><span class="line">worker.m_Name += nameSeed[i];</span><br><span class="line"></span><br><span class="line">worker.m_Salary = <span class="built_in">rand</span>() % <span class="number">10000</span> + <span class="number">10000</span>; <span class="comment">// 10000 ~ 19999</span></span><br><span class="line"><span class="comment">//å°†å‘˜å·¥æ”¾å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(worker);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘˜å·¥åˆ†ç»„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGroup</span><span class="params">(vector&lt;Worker&gt;&amp;v,multimap&lt;<span class="type">int</span>,Worker&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Worker&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//äº§ç”Ÿéšæœºéƒ¨é—¨ç¼–å·</span></span><br><span class="line"><span class="type">int</span> deptId = <span class="built_in">rand</span>() % <span class="number">3</span>; <span class="comment">// 0 1 2 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å‘˜å·¥æ’å…¥åˆ°åˆ†ç»„ä¸­</span></span><br><span class="line"><span class="comment">//keyéƒ¨é—¨ç¼–å·ï¼Œvalueå…·ä½“å‘˜å·¥</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(deptId, *it));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showWorkerByGourp</span><span class="params">(multimap&lt;<span class="type">int</span>,Worker&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 0  A  B  C   1  D  E   2  F G ...</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç­–åˆ’éƒ¨é—¨ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">multimap&lt;<span class="type">int</span>,Worker&gt;::iterator pos = m.<span class="built_in">find</span>(CEHUA);</span><br><span class="line"><span class="type">int</span> count = m.<span class="built_in">count</span>(CEHUA); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line"><span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++ , index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¾æœ¯éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">pos = m.<span class="built_in">find</span>(MEISHU);</span><br><span class="line">count = m.<span class="built_in">count</span>(MEISHU); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line">index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç ”å‘éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">pos = m.<span class="built_in">find</span>(YANFA);</span><br><span class="line">count = m.<span class="built_in">count</span>(YANFA); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line">index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€åˆ›å»ºå‘˜å·¥</span></span><br><span class="line">vector&lt;Worker&gt;vWorker;</span><br><span class="line"><span class="built_in">createWorker</span>(vWorker);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‘˜å·¥åˆ†ç»„</span></span><br><span class="line">multimap&lt;<span class="type">int</span>, Worker&gt;mWorker;</span><br><span class="line"><span class="built_in">setGroup</span>(vWorker, mWorker);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€åˆ†ç»„æ˜¾ç¤ºå‘˜å·¥</span></span><br><span class="line"><span class="built_in">showWorkerByGourp</span>(mWorker);</span><br><span class="line"></span><br><span class="line"><span class="comment">////æµ‹è¯•</span></span><br><span class="line"><span class="comment">//for (vector&lt;Worker&gt;::iterator it = vWorker.begin(); it != vWorker.end(); it++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; å·¥èµ„ï¼š &quot; &lt;&lt; it-&gt;m_Salary &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å½“æ•°æ®ä»¥é”®å€¼å¯¹å½¢å¼å­˜åœ¨ï¼Œå¯ä»¥è€ƒè™‘ç”¨map æˆ– multimap</li></ul><h2 id="å››ã€STL-å‡½æ•°å¯¹è±¡"><a href="#å››ã€STL-å‡½æ•°å¯¹è±¡" class="headerlink" title="å››ã€STL- å‡½æ•°å¯¹è±¡"></a>å››ã€STL- å‡½æ•°å¯¹è±¡</h2><h3 id="4-1-å‡½æ•°å¯¹è±¡"><a href="#4-1-å‡½æ•°å¯¹è±¡" class="headerlink" title="4.1 å‡½æ•°å¯¹è±¡"></a>4.1 å‡½æ•°å¯¹è±¡</h3><h4 id="4-1-1-å‡½æ•°å¯¹è±¡æ¦‚å¿µ"><a href="#4-1-1-å‡½æ•°å¯¹è±¡æ¦‚å¿µ" class="headerlink" title="4.1.1 å‡½æ•°å¯¹è±¡æ¦‚å¿µ"></a>4.1.1 å‡½æ•°å¯¹è±¡æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong>l</p><ul><li>é‡è½½<strong>å‡½æ•°è°ƒç”¨æ“ä½œç¬¦</strong>çš„ç±»ï¼Œå…¶å¯¹è±¡å¸¸ç§°ä¸º<strong>å‡½æ•°å¯¹è±¡</strong></li><li><strong>å‡½æ•°å¯¹è±¡</strong>ä½¿ç”¨é‡è½½çš„()æ—¶ï¼Œè¡Œä¸ºç±»ä¼¼å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå«<strong>ä»¿å‡½æ•°</strong></li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><p>å‡½æ•°å¯¹è±¡(ä»¿å‡½æ•°)æ˜¯ä¸€ä¸ª<strong>ç±»</strong>ï¼Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°</p><h4 id="4-1-2-å‡½æ•°å¯¹è±¡ä½¿ç”¨"><a href="#4-1-2-å‡½æ•°å¯¹è±¡ä½¿ç”¨" class="headerlink" title="4.1.2  å‡½æ•°å¯¹è±¡ä½¿ç”¨"></a>4.1.2  å‡½æ•°å¯¹è±¡ä½¿ç”¨</h4><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</li><li>å‡½æ•°å¯¹è±¡è¶…å‡ºæ™®é€šå‡½æ•°çš„æ¦‚å¿µï¼Œå‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</li><li>å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</li></ul><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 + v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyAdd myAdd;</span><br><span class="line">cout &lt;&lt; <span class="built_in">myAdd</span>(<span class="number">10</span>, <span class="number">10</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyPrint</span>()</span><br><span class="line">&#123;</span><br><span class="line">count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; test &lt;&lt; endl;</span><br><span class="line">count++; <span class="comment">//ç»Ÿè®¡ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> count; <span class="comment">//å†…éƒ¨è‡ªå·±çš„çŠ¶æ€</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyPrint myPrint;</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;myPrintè°ƒç”¨æ¬¡æ•°ä¸ºï¼š &quot;</span> &lt;&lt; myPrint.count &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doPrint</span><span class="params">(MyPrint &amp;mp , string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">mp</span>(test);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyPrint myPrint;</span><br><span class="line"><span class="built_in">doPrint</span>(myPrint, <span class="string">&quot;Hello C++&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ä»¿å‡½æ•°å†™æ³•éå¸¸çµæ´»ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚</li></ul><h3 id="4-2-è°“è¯"><a href="#4-2-è°“è¯" class="headerlink" title="4.2  è°“è¯"></a>4.2  è°“è¯</h3><h4 id="4-2-1-è°“è¯æ¦‚å¿µ"><a href="#4-2-1-è°“è¯æ¦‚å¿µ" class="headerlink" title="4.2.1 è°“è¯æ¦‚å¿µ"></a>4.2.1 è°“è¯æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>è¿”å›boolç±»å‹çš„ä»¿å‡½æ•°ç§°ä¸º<strong>è°“è¯</strong></li><li>å¦‚æœoperator()æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšä¸€å…ƒè°“è¯</li><li>å¦‚æœoperator()æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšäºŒå…ƒè°“è¯</li></ul><h4 id="4-2-2-ä¸€å…ƒè°“è¯"><a href="#4-2-2-ä¸€å…ƒè°“è¯" class="headerlink" title="4.2.2 ä¸€å…ƒè°“è¯"></a>4.2.2 ä¸€å…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.ä¸€å…ƒè°“è¯</span></span><br><span class="line"><span class="comment">//æŸ¥å®¹å™¨ä¸­æœ‰æ²¡æœ‰å¤§äº5çš„æ•°å­—</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GreaterFive</span>&#123;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt; <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// GreaterFive()æ˜¯åŒ¿åå‡½æ•°å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// find_if()è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">GreaterFive</span>());</span><br><span class="line"><span class="keyword">if</span> (it ** v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸€ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºä¸€å…ƒè°“è¯</p><h4 id="4-2-3-äºŒå…ƒè°“è¯"><a href="#4-2-3-äºŒå…ƒè°“è¯" class="headerlink" title="4.2.3 äºŒå…ƒè°“è¯"></a>4.2.3 äºŒå…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="comment">//äºŒå…ƒè°“è¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> num1 &gt; num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨å‡½æ•°å¯¹è±¡æ”¹å˜ç®—æ³•ç­–ç•¥ï¼Œæ’åºä»å¤§åˆ°å°</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œä¼ å…¥çš„ä¹Ÿæ˜¯åŒ¿åå‡½æ•°å¯¹è±¡</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">MyCompare</span>());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸¤ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºäºŒå…ƒè°“è¯</p><h3 id="4-3-å†…å»ºå‡½æ•°å¯¹è±¡"><a href="#4-3-å†…å»ºå‡½æ•°å¯¹è±¡" class="headerlink" title="4.3 å†…å»ºå‡½æ•°å¯¹è±¡"></a>4.3 å†…å»ºå‡½æ•°å¯¹è±¡</h3><h4 id="4-3-1-å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰"><a href="#4-3-1-å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰" class="headerlink" title="4.3.1 å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰"></a>4.3.1 å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>STLå†…å»ºäº†ä¸€äº›å‡½æ•°å¯¹è±¡</li></ul><p><strong>åˆ†ç±»:</strong></p><ul><li><p>ç®—æœ¯ä»¿å‡½æ•°</p></li><li><p>å…³ç³»ä»¿å‡½æ•°</p></li><li><p>é€»è¾‘ä»¿å‡½æ•°</p></li></ul><p><strong>ç”¨æ³•ï¼š</strong></p><ul><li>è¿™äº›ä»¿å‡½æ•°æ‰€äº§ç”Ÿçš„å¯¹è±¡ï¼Œç”¨æ³•å’Œä¸€èˆ¬å‡½æ•°å®Œå…¨ç›¸åŒ</li><li>ä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include&lt;functional&gt;</code></li></ul><h4 id="4-3-2-ç®—æœ¯ä»¿å‡½æ•°"><a href="#4-3-2-ç®—æœ¯ä»¿å‡½æ•°" class="headerlink" title="4.3.2 ç®—æœ¯ä»¿å‡½æ•°"></a>4.3.2 ç®—æœ¯ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å››åˆ™è¿ç®—</li><li>å…¶ä¸­negateæ˜¯ä¸€å…ƒè¿ç®—ï¼Œå…¶ä»–éƒ½æ˜¯äºŒå…ƒè¿ç®—</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; T plus&lt;T&gt;</code>                &#x2F;&#x2F;åŠ æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T minus&lt;T&gt;</code>              &#x2F;&#x2F;å‡æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T multiplies&lt;T&gt;</code>    &#x2F;&#x2F;ä¹˜æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T divides&lt;T&gt;</code>         &#x2F;&#x2F;é™¤æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T modulus&lt;T&gt;</code>         &#x2F;&#x2F;å–æ¨¡ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T negate&lt;T&gt;</code>           &#x2F;&#x2F;å–åä»¿å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="comment">//negate</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">negate&lt;<span class="type">int</span>&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="built_in">n</span>(<span class="number">50</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//plus</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">plus&lt;<span class="type">int</span>&gt; p;</span><br><span class="line">cout &lt;&lt; <span class="built_in">p</span>(<span class="number">10</span>, <span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡æ—¶ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include &lt;functional&gt;</code></p><h4 id="4-3-3-å…³ç³»ä»¿å‡½æ•°"><a href="#4-3-3-å…³ç³»ä»¿å‡½æ•°" class="headerlink" title="4.3.3 å…³ç³»ä»¿å‡½æ•°"></a>4.3.3 å…³ç³»ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å…³ç³»å¯¹æ¯”</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool equal_to&lt;T&gt;</code>                    &#x2F;&#x2F;ç­‰äº</li><li><code>template&lt;class T&gt; bool not_equal_to&lt;T&gt;</code>            &#x2F;&#x2F;ä¸ç­‰äº</li><li><code>template&lt;class T&gt; bool greater&lt;T&gt;</code>                      &#x2F;&#x2F;å¤§äº</li><li><code>template&lt;class T&gt; bool greater_equal&lt;T&gt;</code>          &#x2F;&#x2F;å¤§äºç­‰äº</li><li><code>template&lt;class T&gt; bool less&lt;T&gt;</code>                           &#x2F;&#x2F;å°äº</li><li><code>template&lt;class T&gt; bool less_equal&lt;T&gt;</code>               &#x2F;&#x2F;å°äºç­‰äº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå·±å®ç°ä»¿å‡½æ•°</span></span><br><span class="line"><span class="comment">//sort(v.begin(), v.end(), MyCompare());</span></span><br><span class="line"><span class="comment">//STLå†…å»ºä»¿å‡½æ•°  å¤§äºä»¿å‡½æ•°</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå…³ç³»ä»¿å‡½æ•°ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯greater&lt;&gt;å¤§äº</p><h4 id="4-3-4-é€»è¾‘ä»¿å‡½æ•°"><a href="#4-3-4-é€»è¾‘ä»¿å‡½æ•°" class="headerlink" title="4.3.4 é€»è¾‘ä»¿å‡½æ•°"></a>4.3.4 é€»è¾‘ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°é€»è¾‘è¿ç®—</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool logical_and&lt;T&gt;</code>              &#x2F;&#x2F;é€»è¾‘ä¸</li><li><code>template&lt;class T&gt; bool logical_or&lt;T&gt;</code>                &#x2F;&#x2F;é€»è¾‘æˆ–</li><li><code>template&lt;class T&gt; bool logical_not&lt;T&gt;</code>              &#x2F;&#x2F;é€»è¾‘é</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">bool</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">bool</span>&gt;::iterator it = v.<span class="built_in">begin</span>();it!= v.<span class="built_in">end</span>();it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€»è¾‘é  å°†vå®¹å™¨æ¬è¿åˆ°v2ä¸­ï¼Œå¹¶æ‰§è¡Œé€»è¾‘éè¿ç®—</span></span><br><span class="line">vector&lt;<span class="type">bool</span>&gt; v2;</span><br><span class="line">v2.<span class="built_in">resize</span>(v.<span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(),  v2.<span class="built_in">begin</span>(), <span class="built_in">logical_not</span>&lt;<span class="type">bool</span>&gt;());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">bool</span>&gt;::iterator it = v2.<span class="built_in">begin</span>(); it != v2.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé€»è¾‘ä»¿å‡½æ•°å®é™…åº”ç”¨è¾ƒå°‘ï¼Œäº†è§£å³å¯</p><h2 id="äº”ã€STL-å¸¸ç”¨ç®—æ³•"><a href="#äº”ã€STL-å¸¸ç”¨ç®—æ³•" class="headerlink" title="äº”ã€STL- å¸¸ç”¨ç®—æ³•"></a>äº”ã€STL- å¸¸ç”¨ç®—æ³•</h2><p><strong>æ¦‚è¿°</strong>:</p><ul><li><p>ç®—æ³•ä¸»è¦æ˜¯ç”±å¤´æ–‡ä»¶<code>&lt;algorithm&gt;</code> <code>&lt;functional&gt;</code> <code>&lt;numeric&gt;</code>ç»„æˆã€‚</p></li><li><p><code>&lt;algorithm&gt;</code>æ˜¯æ‰€æœ‰STLå¤´æ–‡ä»¶ä¸­æœ€å¤§çš„ä¸€ä¸ªï¼ŒèŒƒå›´æ¶‰åŠåˆ°æ¯”è¾ƒã€ äº¤æ¢ã€æŸ¥æ‰¾ã€éå†æ“ä½œã€å¤åˆ¶ã€ä¿®æ”¹ç­‰ç­‰</p></li><li><p><code>&lt;numeric&gt;</code>ä½“ç§¯å¾ˆå°ï¼ŒåªåŒ…æ‹¬å‡ ä¸ªåœ¨åºåˆ—ä¸Šé¢è¿›è¡Œç®€å•æ•°å­¦è¿ç®—çš„æ¨¡æ¿å‡½æ•°</p></li><li><p><code>&lt;functional&gt;</code>å®šä¹‰äº†ä¸€äº›æ¨¡æ¿ç±»ï¼ŒåŒ…å«äº†å†…å»ºçš„å‡½æ•°å¯¹è±¡ï¼Œç”¨ä»¥å£°æ˜å‡½æ•°å¯¹è±¡ã€‚</p></li></ul><h3 id="5-1-å¸¸ç”¨éå†ç®—æ³•"><a href="#5-1-å¸¸ç”¨éå†ç®—æ³•" class="headerlink" title="5.1 å¸¸ç”¨éå†ç®—æ³•"></a>5.1 å¸¸ç”¨éå†ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„éå†ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>for_each</code>     &#x2F;&#x2F;éå†å®¹å™¨</li><li><code>transform</code>   &#x2F;&#x2F;æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><h4 id="5-1-1-for-each"><a href="#5-1-1-for-each" class="headerlink" title="5.1.1 for_each"></a>5.1.1 for_each</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°éå†å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>for_each(iterator beg, iterator end, _func);  </code></p><p>&#x2F;&#x2F; éå†ç®—æ³• éå†å®¹å™¨å…ƒç´ </p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; _func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡ã€**æ™®é€šå‡½æ•°æ”¾å‡½æ•°åå³å¯ï¼Œå‡½æ•°å¯¹è±¡éœ€è¦åŠ ()**ã€‘</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print01</span><span class="params">(<span class="type">int</span> val)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡½æ•°å¯¹è±¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">print02</span> </span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//for_eachç®—æ³•åŸºæœ¬ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) </span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†ç®—æ³•</span></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), print01);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">print02</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>for_eachåœ¨å®é™…å¼€å‘ä¸­æ˜¯æœ€å¸¸ç”¨éå†ç®—æ³•ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="5-1-2-transform"><a href="#5-1-2-transform" class="headerlink" title="5.1.2 transform"></a>5.1.2 transform</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>transform(iterator beg1, iterator end1, iterator beg2, _func);</code></li></ul><p>&#x2F;&#x2F;beg1 æºå®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F;end1 æºå®¹å™¨ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F;beg2 ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F;_func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸ç”¨éå†ç®—æ³•  æ¬è¿ transform</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TransForm</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span><span class="comment">//æ¬è¿çš„æ˜¯intï¼Œæ‰€ä»¥å‚æ•°ä¼ é€’æ—¶intï¼Œè¿”å›çš„ä¹Ÿæ˜¯int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val;<span class="comment">//è¿™é‡Œå¯ä»¥å®šä¹‰åœ¨æ¬è¿æ—¶ï¼Œå¯¹å…ƒç´ çš„æ“ä½œï¼Œæ— æ“ä½œç›´æ¥return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;vTarget; <span class="comment">//ç›®æ ‡å®¹å™¨ï¼Œè¿™é‡Œåªæ˜¯å®šä¹‰äº†vTargetï¼Œä½†é‡Œé¢ä¸€ç‚¹å®¹é‡éƒ½æ²¡æœ‰</span></span><br><span class="line"></span><br><span class="line">vTarget.<span class="built_in">resize</span>(v.<span class="built_in">size</span>()); <span class="comment">// ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´ï¼Œä¸èƒ½ç¡¬å¡</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>(), <span class="built_in">TransForm</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), vTarget.<span class="built_in">end</span>(), <span class="built_in">MyPrint</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> æ¬è¿çš„ç›®æ ‡å®¹å™¨å¿…é¡»è¦æå‰å¼€è¾Ÿç©ºé—´ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸æ¬è¿</p><h3 id="5-2-å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•"><a href="#5-2-å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•" class="headerlink" title="5.2 å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•"></a>5.2 å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•</h3><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡å¸¸ç”¨çš„æŸ¥æ‰¾ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>find</code>                     &#x2F;&#x2F;æŸ¥æ‰¾å…ƒç´ </li><li><code>find_if</code>               &#x2F;&#x2F;æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li><li><code>adjacent_find</code>    &#x2F;&#x2F;æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li><li><code>binary_search</code>    &#x2F;&#x2F;äºŒåˆ†æŸ¥æ‰¾æ³•</li><li><code>count</code>                   &#x2F;&#x2F;ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li><li><code>count_if</code>             &#x2F;&#x2F;æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><h4 id="5-2-1-find"><a href="#5-2-1-find" class="headerlink" title="5.2.1 find"></a>5.2.1 find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šå…ƒç´ çš„è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨end()</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find(iterator beg, iterator end, value);  </code></p><p>&#x2F;&#x2F; æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">// å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å®¹å™¨ä¸­æ˜¯å¦æœ‰ 5 è¿™ä¸ªå…ƒç´ </span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">5</span>);</span><br><span class="line"><span class="keyword">if</span> (it ** v.<span class="built_in">end</span>()) </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡è½½â€œ**â€ è®©åº•å±‚findå‡½æ•°çŸ¥é“å¦‚ä½•å¯¹æ¯”personæ•°æ®</span></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>**(<span class="type">const</span> Person&amp; p) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name ** p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age ** p.m_Age) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt;::iterator it = <span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), p2);</span><br><span class="line"><span class="keyword">if</span> (it ** v.<span class="built_in">end</span>()) </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š åˆ©ç”¨findå¯ä»¥åœ¨å®¹å™¨ä¸­æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯<strong>è¿­ä»£å™¨</strong></p><h4 id="5-2-2-find-if"><a href="#5-2-2-find-if" class="headerlink" title="5.2.2 find_if"></a>5.2.2 find_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find_if(iterator beg, iterator end, _Pred);  </code></p><p>&#x2F;&#x2F; æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; _Pred å‡½æ•°æˆ–è€…è°“è¯ï¼ˆè¿”å›boolç±»å‹çš„ä»¿å‡½æ•°ï¼‰</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GreaterFive</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt; <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">GreaterFive</span>());</span><br><span class="line"><span class="keyword">if</span> (it ** v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å¤§äº5çš„æ•°å­—:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater20</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(Person &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> p.m_Age &gt; <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Greater20</span>());</span><br><span class="line"><span class="keyword">if</span> (it ** v.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šfind_ifæŒ‰æ¡ä»¶æŸ¥æ‰¾ä½¿æŸ¥æ‰¾æ›´åŠ çµæ´»ï¼Œæä¾›çš„ä»¿å‡½æ•°å¯ä»¥æ”¹å˜ä¸åŒçš„ç­–ç•¥</p><h4 id="5-2-3-adjacent-find"><a href="#5-2-3-adjacent-find" class="headerlink" title="5.2.3 adjacent_find"></a>5.2.3 adjacent_find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>adjacent_find(iterator beg, iterator end);  </code></p><p>&#x2F;&#x2F; æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ,è¿”å›ç›¸é‚»å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨</p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">adjacent_find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">if</span> (it ** v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾ä¸åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°ç›¸é‚»é‡å¤å…ƒç´ ä¸º:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé¢è¯•é¢˜ä¸­å¦‚æœå‡ºç°æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ï¼Œè®°å¾—ç”¨STLä¸­çš„adjacent_findç®—æ³•</p><h4 id="5-2-4-binary-search"><a href="#5-2-4-binary-search" class="headerlink" title="5.2.4 binary_search"></a>5.2.4 binary_search</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>bool binary_search(iterator beg, iterator end, value);  </code></p><p>&#x2F;&#x2F; æŸ¥æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼ŒæŸ¥åˆ° è¿”å›true  å¦åˆ™false</p><p>&#x2F;&#x2F; æ³¨æ„: åœ¨<strong>æ— åºåºåˆ—ä¸­ä¸å¯ç”¨</strong></p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">binary_search</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(),<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾æ•ˆç‡å¾ˆé«˜ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æŸ¥æ‰¾çš„å®¹å™¨ä¸­å…ƒç´ å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-2-5-count"><a href="#5-2-5-count" class="headerlink" title="5.2.5 count"></a>5.2.5 count</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count(iterator beg, iterator end, value);  </code></p><p>&#x2F;&#x2F; ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; value ç»Ÿè®¡çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>**(<span class="type">const</span> Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Age ** p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line">    </span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;è¯¸è‘›äº®&quot;</span>,<span class="number">35</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), p);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> ç»Ÿè®¡è‡ªå®šä¹‰æ•°æ®ç±»å‹æ—¶å€™ï¼Œéœ€è¦é…åˆé‡è½½ <code>operator==</code></p><h4 id="5-2-6-count-if"><a href="#5-2-6-count-if" class="headerlink" title="5.2.6 count_if"></a>5.2.6 count_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count_if(iterator beg, iterator end, _Pred);  </code></p><p>&#x2F;&#x2F; æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; _Pred è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater4</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt;= <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Greater4</span>());</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¤§äº4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AgeLess35</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Person &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> p.m_Age &lt; <span class="number">35</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">AgeLess35</span>());</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°äº35å²çš„ä¸ªæ•°ï¼š&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>æŒ‰å€¼ç»Ÿè®¡ç”¨countï¼ŒæŒ‰æ¡ä»¶ç»Ÿè®¡ç”¨count_if</p><h3 id="5-3-å¸¸ç”¨æ’åºç®—æ³•"><a href="#5-3-å¸¸ç”¨æ’åºç®—æ³•" class="headerlink" title="5.3 å¸¸ç”¨æ’åºç®—æ³•"></a>5.3 å¸¸ç”¨æ’åºç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ’åºç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>sort</code>             &#x2F;&#x2F;å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li><li><code>random_shuffle</code>   &#x2F;&#x2F;æ´—ç‰Œ   æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li><li><code>merge </code>           &#x2F;&#x2F; å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>reverse</code>       &#x2F;&#x2F; åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒ</li></ul><h4 id="5-3-1-sort"><a href="#5-3-1-sort" class="headerlink" title="5.3.1 sort"></a>5.3.1 sort</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>sort(iterator beg, iterator end, _Pred);  </code></p><p>&#x2F;&#x2F; æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>&#x2F;&#x2F;  beg    å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F;  end    ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; _Pred  è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//sorté»˜è®¤ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), myPrint);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line">    <span class="comment">// greateræ˜¯å†…å»ºçš„å‡½æ•°å¯¹è±¡</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), myPrint);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>sortå±äºå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ç®—æ³•ä¹‹ä¸€ï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="5-3-2-random-shuffle"><a href="#5-3-2-random-shuffle" class="headerlink" title="5.3.2 random_shuffle"></a>5.3.2 random_shuffle</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ´—ç‰Œ   æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>random_shuffle(iterator beg, iterator end);  </code></p><p>&#x2F;&#x2F; æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));<span class="comment">//éšæœºæ•°ç§å­</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“ä¹±é¡ºåº</span></span><br><span class="line"><span class="built_in">random_shuffle</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>random_shuffleæ´—ç‰Œç®—æ³•æ¯”è¾ƒå®ç”¨ï¼Œä½¿ç”¨æ—¶è®°å¾—åŠ éšæœºæ•°ç§å­</p><h4 id="5-3-3-merge"><a href="#5-3-3-merge" class="headerlink" title="5.3.3 merge"></a>5.3.3 merge</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä¸¤ä¸ªå®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>merge(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>&#x2F;&#x2F; å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</p><p>&#x2F;&#x2F; æ³¨æ„: ä¸¤ä¸ªå®¹å™¨å¿…é¡»æ˜¯<strong>æœ‰åºçš„</strong></p><p>&#x2F;&#x2F; beg1   å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end1   å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; beg2   å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end2   å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; dest    ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span> ; i++) </span><br><span class="line">    &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vtarget;</span><br><span class="line"><span class="comment">//ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vtarget.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>() + v2.<span class="built_in">size</span>());</span><br><span class="line"><span class="comment">//åˆå¹¶  éœ€è¦ä¸¤ä¸ªæœ‰åºåºåˆ—</span></span><br><span class="line"><span class="built_in">merge</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vtarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vtarget.<span class="built_in">begin</span>(), vtarget.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>mergeåˆå¹¶çš„ä¸¤ä¸ªå®¹å™¨å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-3-4-reverse"><a href="#5-3-4-reverse" class="headerlink" title="5.3.4 reverse"></a>5.3.4 reverse</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…å…ƒç´ è¿›è¡Œåè½¬</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>reverse(iterator beg, iterator end);  </code></p><p>&#x2F;&#x2F; åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒç´ </p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åè½¬å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åè½¬åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">reverse</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>reverseåè½¬åŒºé—´å†…å…ƒç´ ï¼Œé¢è¯•é¢˜å¯èƒ½æ¶‰åŠåˆ°</p><h3 id="5-4-å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•"><a href="#5-4-å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•" class="headerlink" title="5.4 å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•"></a>5.4 å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ‹·è´å’Œæ›¿æ¢ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>copy</code>                      &#x2F;&#x2F; å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>replace</code>                &#x2F;&#x2F; å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li><li><code>replace_if </code>          &#x2F;&#x2F; å®¹å™¨å†…æŒ‡å®šèŒƒå›´æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ›¿æ¢ä¸ºæ–°å…ƒç´ </li><li><code>swap</code>                     &#x2F;&#x2F; äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><h4 id="5-4-1-copy"><a href="#5-4-1-copy" class="headerlink" title="5.4.1 copy"></a>5.4.1 copy</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>copy(iterator beg, iterator end, iterator dest);  </code></p><p>&#x2F;&#x2F; æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>&#x2F;&#x2F; beg  å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end  ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; dest ç›®æ ‡èµ·å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">v2.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">copy</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>åˆ©ç”¨copyç®—æ³•åœ¨æ‹·è´æ—¶ï¼Œç›®æ ‡å®¹å™¨è®°å¾—æå‰å¼€è¾Ÿç©ºé—´</p><h4 id="5-4-2-replace"><a href="#5-4-2-replace" class="headerlink" title="5.4.2 replace"></a>5.4.2 replace</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace(iterator beg, iterator end, oldvalue, newvalue);  </code></p><p>&#x2F;&#x2F; å°†åŒºé—´å†…æ—§å…ƒç´  æ›¿æ¢æˆ æ–°å…ƒç´ </p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; oldvalue æ—§å…ƒç´ </p><p>&#x2F;&#x2F; newvalue æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨ä¸­çš„20 æ›¿æ¢æˆ 2000</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">replace</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">20</span>,<span class="number">2000</span>);</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>replaceä¼šæ›¿æ¢åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </p><h4 id="5-4-3-replace-if"><a href="#5-4-3-replace-if" class="headerlink" title="5.4.3 replace_if"></a>5.4.3 replace_if</h4><p><strong>åŠŸèƒ½æè¿°:</strong></p><ul><li>å°†åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œæ›¿æ¢æˆæŒ‡å®šå…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace_if(iterator beg, iterator end, _pred, newvalue);  </code></p><p>&#x2F;&#x2F; æŒ‰æ¡ä»¶æ›¿æ¢å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶çš„æ›¿æ¢æˆæŒ‡å®šå…ƒç´ </p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; _pred è°“è¯</p><p>&#x2F;&#x2F; newvalue æ›¿æ¢çš„æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReplaceGreater30</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt;= <span class="number">30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨ä¸­å¤§äºç­‰äºçš„30 æ›¿æ¢æˆ 3000</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">replace_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">ReplaceGreater30</span>(), <span class="number">3000</span>);</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>replace_ifæŒ‰æ¡ä»¶æŸ¥æ‰¾ï¼Œå¯ä»¥åˆ©ç”¨ä»¿å‡½æ•°çµæ´»ç­›é€‰æ»¡è¶³çš„æ¡ä»¶</p><h4 id="5-4-4-swap"><a href="#5-4-4-swap" class="headerlink" title="5.4.4 swap"></a>5.4.4 swap</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>swap(container c1, container c2);  </code></p><p>&#x2F;&#x2F; äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </p><p>&#x2F;&#x2F; c1å®¹å™¨1</p><p>&#x2F;&#x2F; c2å®¹å™¨2</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">for_each(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">swap</span>(v1, v2);</span><br><span class="line">for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">for_each(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>swapäº¤æ¢å®¹å™¨æ—¶ï¼Œæ³¨æ„äº¤æ¢çš„å®¹å™¨è¦åŒç§ç±»å‹</p><h3 id="5-5-å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•"><a href="#5-5-å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•" class="headerlink" title="5.5 å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•"></a>5.5 å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„ç®—æœ¯ç”Ÿæˆç®—æ³•</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ç®—æœ¯ç”Ÿæˆç®—æ³•å±äºå°å‹ç®—æ³•ï¼Œä½¿ç”¨æ—¶åŒ…å«çš„å¤´æ–‡ä»¶ä¸º <code>#include &lt;numeric&gt;</code></li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>accumulate</code>      &#x2F;&#x2F; è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p></li><li><p><code>fill</code>                 &#x2F;&#x2F; å‘å®¹å™¨ä¸­æ·»åŠ å…ƒç´ </p></li></ul><h4 id="5-5-1-accumulate"><a href="#5-5-1-accumulate" class="headerlink" title="5.5.1 accumulate"></a>5.5.1 accumulate</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>è®¡ç®—åŒºé—´å†…å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>accumulate(iterator beg, iterator end, value);  </code></p><p>&#x2F;&#x2F; è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; value èµ·å§‹å€¼ã€èµ·å§‹çš„ç´¯åŠ å€¼ã€‘</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> total = <span class="built_in">accumulate</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;total = &quot;</span> &lt;&lt; total &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>accumulateä½¿ç”¨æ—¶å¤´æ–‡ä»¶æ³¨æ„æ˜¯ numericï¼Œè¿™ä¸ªç®—æ³•å¾ˆå®ç”¨</p><h4 id="5-5-2-fill"><a href="#5-5-2-fill" class="headerlink" title="5.5.2 fill"></a>5.5.2 fill</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘å®¹å™¨ä¸­å¡«å……æŒ‡å®šçš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>fill(iterator beg, iterator end, value);  </code></p><p>&#x2F;&#x2F; å‘å®¹å™¨ä¸­å¡«å……å…ƒç´ </p><p>&#x2F;&#x2F; beg å¼€å§‹è¿­ä»£å™¨</p><p>&#x2F;&#x2F; end ç»“æŸè¿­ä»£å™¨</p><p>&#x2F;&#x2F; value å¡«å……çš„å€¼</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">resize</span>(<span class="number">10</span>);<span class="comment">//æŒ‡å®šå®¹å™¨å®¹é‡å¤§å°ä¸º10ï¼Œé»˜è®¤å¡«å……äº†10ä¸ª0</span></span><br><span class="line"><span class="comment">//åæœŸé‡æ–°å¡«å……</span></span><br><span class="line"><span class="built_in">fill</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong>åˆ©ç”¨fillå¯ä»¥å°†å®¹å™¨åŒºé—´å†…å…ƒç´ å¡«å……ä¸ºæŒ‡å®šçš„å€¼</p><h3 id="5-6-å¸¸ç”¨é›†åˆç®—æ³•"><a href="#5-6-å¸¸ç”¨é›†åˆç®—æ³•" class="headerlink" title="5.6 å¸¸ç”¨é›†åˆç®—æ³•"></a>5.6 å¸¸ç”¨é›†åˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„é›†åˆç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>set_intersection</code>          &#x2F;&#x2F; æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</p></li><li><p><code>set_union</code>                       &#x2F;&#x2F; æ±‚ä¸¤ä¸ªå®¹å™¨çš„å¹¶é›†</p></li><li><p><code>set_difference </code>              &#x2F;&#x2F; æ±‚ä¸¤ä¸ªå®¹å™¨çš„å·®é›†</p></li></ul><h4 id="5-6-1-set-intersection"><a href="#5-6-1-set-intersection" class="headerlink" title="5.6.1 set_intersection"></a>5.6.1 set_intersection</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_intersection(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>&#x2F;&#x2F; æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†</p><p>&#x2F;&#x2F; <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>&#x2F;&#x2F; beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå°çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(<span class="built_in">min</span>(v1.<span class="built_in">size</span>(), v2.<span class="built_in">size</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd = </span><br><span class="line">        <span class="built_in">set_intersection</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚äº¤é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨ä¸­å–å°å€¼</strong></li><li>set_intersectionè¿”å›å€¼æ—¢æ˜¯äº¤é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-2-set-union"><a href="#5-6-2-set-union" class="headerlink" title="5.6.2 set_union"></a>5.6.2 set_union</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_union(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>&#x2F;&#x2F; æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</p><p>&#x2F;&#x2F; <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>&#x2F;&#x2F; beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªå®¹å™¨çš„å’Œç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>() + v2.<span class="built_in">size</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd = </span><br><span class="line">        <span class="built_in">set_union</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å¹¶é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦<strong>ä¸¤ä¸ªå®¹å™¨ç›¸åŠ </strong></li><li>set_unionè¿”å›å€¼æ—¢æ˜¯å¹¶é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-3-set-difference"><a href="#5-6-3-set-difference" class="headerlink" title="5.6.3  set_difference"></a>5.6.3  set_difference</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_difference(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>&#x2F;&#x2F; æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</p><p>&#x2F;&#x2F; <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>&#x2F;&#x2F; beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>&#x2F;&#x2F; end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>&#x2F;&#x2F; dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå¤§çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>( <span class="built_in">max</span>(v1.<span class="built_in">size</span>() , v2.<span class="built_in">size</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸v2çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd = </span><br><span class="line">        <span class="built_in">set_difference</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v2ä¸v1çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">itEnd = <span class="built_in">set_difference</span>(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å·®é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨å–è¾ƒå¤§å€¼</strong></li><li>set_differenceè¿”å›å€¼æ—¢æ˜¯å·®é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ–‡å¼„æ‡‚Pythonè£…é¥°å™¨</title>
      <link href="/2023/05/16/%E4%B8%80%E6%96%87%E5%BC%84%E6%87%82Python%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
      <url>/2023/05/16/%E4%B8%80%E6%96%87%E5%BC%84%E6%87%82Python%E8%A3%85%E9%A5%B0%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/25.jpg" style="border-radius:10px" width="1000px"></img></p><div class="tag link"><a class="link-card" title="æ”»åŸç‹®ç™½ç‰" href="https://blog.csdn.net/zhh763984017/article/details/120072425"><div class="left"><img src="https://picbed.dai2yutou.space/article_img/Python/6.png"/></div><div class="right"><p class="text">æ”»åŸç‹®ç™½ç‰</p><p class="url">https://blog.csdn.net/zhh763984017/article/details/120072425</p></div></a></div><div class="note success simple"><p>å°æˆ´åˆ«å·çœ‹äº†ğŸ¤£ï¼Œæˆ‘å‘ç°ä½ äº†å“¦~ğŸ˜œ</p></div><h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯è£…é¥°å™¨"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯è£…é¥°å™¨" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯è£…é¥°å™¨"></a>ä¸€ã€ä»€ä¹ˆæ˜¯è£…é¥°å™¨</h1><p>è£…é¥°å™¨æ˜¯ç»™ç°æœ‰çš„æ¨¡å—å¢æ·»æ–°çš„å°åŠŸèƒ½ï¼Œå¯ä»¥å¯¹åŸå‡½æ•°è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œè€Œä¸”è¿˜ä¸éœ€è¦ä¿®æ”¹åŸå‡½æ•°çš„å†…å®¹ï¼Œä¹Ÿä¸éœ€è¦ä¿®æ”¹åŸå‡½æ•°çš„è°ƒç”¨ã€‚</p><p>è£…é¥°å™¨çš„ä½¿ç”¨ç¬¦åˆäº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¼€æ”¾å°é—­åŸåˆ™ã€‚</p><blockquote><p>å¼€æ”¾å°é—­åŸåˆ™ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol><li>å¯¹æ‰©å±•å¼€æ”¾ï¼Œæ„å‘³ç€æœ‰æ–°çš„éœ€æ±‚æˆ–å˜åŒ–æ—¶ï¼Œå¯ä»¥å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ‰©å±•ï¼Œä»¥é€‚åº”æ–°çš„æƒ…å†µã€‚</li><li>å¯¹ä¿®æ”¹å°é—­ï¼Œæ„å‘³ç€ç±»ä¸€æ—¦è®¾è®¡å®Œæˆï¼Œå°±å¯ä»¥ç‹¬ç«‹å…¶å·¥ä½œï¼Œè€Œä¸è¦å¯¹ç±»å°½ä»»ä½•ä¿®æ”¹ã€‚</li></ol></blockquote><p>è£…é¥°å™¨æœ¬è´¨ä¸Šè¿˜æ˜¯å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªåµŒå¥—å‡½æ•°ï¼Œä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ›¿æ¢å‡½æ•°çš„å¯æ‰§è¡Œå‡½æ•°ã€‚</p><p>å¤–å±‚å‡½æ•°çš„å‚æ•°æ˜¯è¢«ä¿®é¥°çš„å‡½æ•°ï¼Œå†…å±‚å‡½æ•°æ˜¯ä¸€ä¸ªé—­åŒ…å¹¶åœ¨å…¶ä¸­å¢åŠ æ–°çš„åŠŸèƒ½ã€è£…é¥°å™¨çš„åŠŸèƒ½å‡½æ•°ã€‘</p><p><strong>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</strong></p><p>å¦‚æœå†…å±‚å‡½æ•°å¼•ç”¨äº†å¤–å±‚å‡½æ•°çš„å˜é‡ï¼ˆåŒ…æ‹¬å…¶å‚æ•°ï¼‰ï¼Œå¹¶ä¸”å¤–å±‚å‡½æ•°è¿”å›å†…å±‚å‡½æ•°åï¼Œè¿™ç§å‡½æ•°æ¶æ„ç§°ä¸ºé—­åŒ…ã€‚</p><p>å¿…é¡»æ»¡è¶³çš„ä¸‰ä¸ªæ¡ä»¶ï¼š</p><ul><li>å†…å±‚å‡½æ•°çš„å®šä¹‰åµŒå¥—åœ¨å¤–å±‚å‡½æ•°ä¸­</li><li>å†…å±‚å‡½æ•°å¼•ç”¨å¤–å±‚å‡½æ•°çš„å˜é‡å</li><li>å¤–å±‚å‡½æ•°è¿”å›å†…å±‚å‡½æ•°å</li></ul><p>å’Œåå‡½æ•°ä¸ä¸€æ ·ï¼Œåå‡½æ•°åªè¦æ±‚å‡½æ•°å†…è°ƒç”¨å‡½æ•°ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;æˆ‘æ˜¯å°æ¼å¤´&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun1</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fun2</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">return</span> fun2</span><br><span class="line">x = fun1(<span class="built_in">str</span>)</span><br><span class="line">x()</span><br></pre></td></tr></table></figure><h1 id="äºŒã€ç®€å•çš„è£…é¥°å™¨"><a href="#äºŒã€ç®€å•çš„è£…é¥°å™¨" class="headerlink" title="äºŒã€ç®€å•çš„è£…é¥°å™¨"></a>äºŒã€ç®€å•çš„è£…é¥°å™¨</h1><p>ä¸‹é¢å†™ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å°æˆ´æ˜¯å°æ¼å¤´çš„å¯¹è±¡ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°æˆ´æ˜¯æ˜¯è°ï¼Ÿ&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> func()+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line"></span><br><span class="line">func = f2(func)</span><br><span class="line"><span class="built_in">print</span>(func())</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å°æˆ´æ˜¯æ˜¯è°ï¼Ÿ</span></span><br><span class="line"><span class="string">å°æˆ´æ˜¯å°æ¼å¤´çš„å¯¹è±¡ï¼</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª<code>func()</code>å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯1ï¼Œç„¶åå®šä¹‰äº†ä¸€ä¸ª<code>f2()</code>å‡½æ•°ã€‚</p><p>ä½ ä¼šå‘ç°<code>f2()</code>å‡½æ•°å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œ<code>f2()</code>å‡½æ•°æ˜¯å¤–å±‚å‡½æ•°ï¼Œ<code>f1()</code>å‡½æ•°æ˜¯å†…å±‚å‡½æ•°ï¼Œå¤–å±‚å‡½æ•°çš„è¿”å›å€¼æ˜¯f1ï¼Œå†…å±‚å‡½æ•°ä½¿ç”¨å¤–å±‚å‡½æ•°çš„å˜é‡åã€‚</p><p>è¿™é‡Œ<code>f2()</code>å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œè£…é¥°å™¨å‡½æ•°é‡Œé¢å®šä¹‰äº†ä¸€ä¸ª<code>f1()</code>å‡½æ•°ï¼ŒæŠŠ<code>func()</code>è¿™ä¸ªå‡½æ•°å½“ä½œå‚æ•°ä¼ å…¥ï¼Œå‡½æ•°å®ç°çš„åŠŸèƒ½æ˜¯æŠŠ<code>func</code>åŒ…è£¹èµ·æ¥ï¼Œå¹¶è¿”å›<code>f1()</code>å‡½æ•°ï¼Œ<code>f1()</code>å‡½æ•°å°±æ˜¯è¦å®ç°è£…é¥°å™¨çš„åŠŸèƒ½ã€‚</p><p><code>func = f2(func)</code>ä½¿ç”¨å˜é‡åå°†è£…é¥°å™¨å‡½æ•°ä¸è¢«è£…é¥°å™¨å‡½æ•°è”ç³»èµ·æ¥ï¼Œæœ€ç»ˆå¾—åˆ°äº†è£…é¥°ç‰ˆçš„<code>func()</code>å‡½æ•°ã€‚</p><h1 id="ä¸‰ã€-ç¬¦å·çš„åº”ç”¨ã€è£…é¥°å™¨çš„è¯­æ³•ç³–ã€‘"><a href="#ä¸‰ã€-ç¬¦å·çš„åº”ç”¨ã€è£…é¥°å™¨çš„è¯­æ³•ç³–ã€‘" class="headerlink" title="ä¸‰ã€@ç¬¦å·çš„åº”ç”¨ã€è£…é¥°å™¨çš„è¯­æ³•ç³–ã€‘"></a>ä¸‰ã€@ç¬¦å·çš„åº”ç”¨ã€è£…é¥°å™¨çš„è¯­æ³•ç³–ã€‘</h1><p>é™¤äº†ä½¿ç”¨å˜é‡åï¼Œè¿˜å¯ä»¥é€šè¿‡@ç¬¦å·å’Œè£…é¥°å™¨åå®ç°è£…é¥°å™¨å‡½æ•°ä¸è¢«è£…é¥°å‡½æ•°çš„è”ç³»ã€‚</p><p>å¦‚ä¸Šé¢çš„<code>func = f2(func)</code>ï¼Œå¯ä»¥ç›´æ¥å†™æˆ<code>@f2</code>ã€‚</p><p>ä½†æ­¤æ—¶å¿…é¡»å†™åœ¨è¢«ä¿®é¥°çš„å‡½æ•°ä¸Šè¾¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°æˆ´æ˜¯æ˜¯è°ï¼Ÿ&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> func()+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line"></span><br><span class="line"><span class="meta">@f2</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å°æˆ´æ˜¯å°æ¼å¤´çš„å¯¹è±¡ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(func())</span><br></pre></td></tr></table></figure><h1 id="å››ã€ä¸¤ä¸ªè£…é¥°å™¨ä¿®é¥°ä¸€ä¸ªå‡½æ•°"><a href="#å››ã€ä¸¤ä¸ªè£…é¥°å™¨ä¿®é¥°ä¸€ä¸ªå‡½æ•°" class="headerlink" title="å››ã€ä¸¤ä¸ªè£…é¥°å™¨ä¿®é¥°ä¸€ä¸ªå‡½æ•°"></a>å››ã€ä¸¤ä¸ªè£…é¥°å™¨ä¿®é¥°ä¸€ä¸ªå‡½æ•°</h1><p>ä¸‹é¢ç»™ä¸€ä¸ªç¤ºä¾‹å…³äºä¸¤ä¸ªè£…é¥°å™¨ä¿®é¥°ä¸€ä¸ªå‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">set_fun1</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å°æˆ´ï¼šæˆ‘æ˜¯å°æˆ´ï¼Œå…ˆæ‰§è¡Œæˆ‘è‚¯å®šï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call_fun1</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°æ¼å¤´ï¼šyeah yeah yeahæ‰§è¡Œäº†å“&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°æˆ´ï¼šsb&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> call_fun1</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_fun2</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å°æ¼å¤´ï¼šå‘œå‘œå‘œï¼Œè¦è®©ç€å°æ¼å¤´ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call_fun2</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°æˆ´ï¼šå¥½å§ï¼Œç»™ä½ ä½ å…ˆæ‰§è¡Œ!&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°æ¼å¤´ï¼šå¤§sb&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> call_fun2</span><br><span class="line"></span><br><span class="line"><span class="meta">@set_fun2</span></span><br><span class="line"><span class="meta">@set_fun1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è·¯äººï¼šä»€ä¹ˆæ—¶å€™èƒ½æ‰§è¡Œåˆ°æˆ‘å•Šï¼Ÿï¼Ÿï¼Ÿ&quot;</span>)</span><br><span class="line"></span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å°æˆ´ï¼šæˆ‘æ˜¯å°æˆ´ï¼Œå…ˆæ‰§è¡Œæˆ‘è‚¯å®šï¼</span></span><br><span class="line"><span class="string">å°æ¼å¤´ï¼šå‘œå‘œå‘œï¼Œè¦è®©ç€å°æ¼å¤´ï¼</span></span><br><span class="line"><span class="string">å°æˆ´ï¼šå¥½å§ï¼Œç»™ä½ ä½ å…ˆæ‰§è¡Œ!</span></span><br><span class="line"><span class="string">å°æ¼å¤´ï¼šyeah yeah yeahæ‰§è¡Œäº†å“</span></span><br><span class="line"><span class="string">è·¯äººï¼šä»€ä¹ˆæ—¶å€™èƒ½æ‰§è¡Œåˆ°æˆ‘å•Šï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line"><span class="string">å°æˆ´ï¼šsb</span></span><br><span class="line"><span class="string">å°æ¼å¤´ï¼šå¤§sb</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œæ—¶ï¼Œè£…é¥°å™¨å‡½æ•°åœ¨è¢«è£…é¥°å™¨å‡½æ•°å®šä¹‰å¥½åå°±ç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥ä¼šå…ˆæ‰“å°<strong>å°æˆ´ï¼šæˆ‘æ˜¯å°æˆ´ï¼Œå…ˆæ‰§è¡Œæˆ‘è‚¯å®šï¼</strong><br>å’Œ<strong>å°æ¼å¤´ï¼šå‘œå‘œå‘œï¼Œè¦è®©ç€å°æ¼å¤´ï¼</strong>ï¼Œåœ¨å®šä¹‰è£…é¥°å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆå†™äº†<code>@set_fun1</code>ï¼Œç„¶åå†™äº†<code>@set_fun2</code>ï¼Œå³<code>@set_fun1</code>ç¦»è¢«ä¿®é¥°çš„å‡½æ•°æ›´è¿‘ï¼Œå¤šä¸ªè£…é¥°å™¨è£…é¥°å‡½æ•°æ—¶ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ç”±ä¸Šåˆ°ä¸‹å¼€å§‹è£…é¥°ï¼Œä»ä¸Šåˆ°ä¸‹å¼€å§‹æ‰§è¡Œã€‚</p><blockquote><p>æ‰€ä»¥<code>set_fun2()</code>é‡Œè¾¹ä¼ å…¥çš„å‚æ•°æ˜¯å·²ç»è¢«<code>set-fun1</code>ä¿®é¥°è¿‡çš„<code>func()</code>å‡½æ•°åã€‚</p></blockquote><p><strong><span style="color:red">å…ˆç©¿åè„±ï¼Œæ‰§è¡Œå…ˆå¤–åå†…</span></strong></p><blockquote><p>å…ˆæŒ‰ç”±å†…åˆ°å¤–çš„é¡ºåºæ‰§è¡ŒåŸå‡½æ•°çš„åŠŸèƒ½ï¼Œç„¶ååœ¨æŒ‰ç”±å¤–é“å†…æ‰§è¡Œè£…é¥°å™¨çš„åŠŸèƒ½ï¼Œå…ˆæ‰§è¡Œäº†<code>call_fun2()</code>ï¼Œç„¶ååœ¨æ‰§è¡Œçš„<code>call_fun2()</code>ï¼Œå†æ‰§è¡Œ<code>func()</code>æœ€åä¼šå›è°ƒã€‚</p></blockquote><h1 id="äº”ã€è£…é¥°æœ‰å‚æ•°çš„è£…é¥°å™¨"><a href="#äº”ã€è£…é¥°æœ‰å‚æ•°çš„è£…é¥°å™¨" class="headerlink" title="äº”ã€è£…é¥°æœ‰å‚æ•°çš„è£…é¥°å™¨"></a>äº”ã€è£…é¥°æœ‰å‚æ•°çš„è£…é¥°å™¨</h1><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">a=<span class="number">0</span>,b=<span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">return</span>  func(a,b) + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line"></span><br><span class="line"><span class="meta">@f2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a=<span class="number">0</span>,b=<span class="number">0</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;func()å‡½æ•°&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(func(<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">func()å‡½æ•°</span></span><br><span class="line"><span class="string">6</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p><code>f1()</code>å‡½æ•°çš„å‚æ•°å¿…é¡»åŒ…å«å¯¹åº”<code>func()</code>ä¸­æ‰€æœ‰çš„å‚æ•°ã€‚</p><h1 id="å…­ã€å¸¦å‚æ•°çš„è£…é¥°å™¨â€”è£…é¥°å™¨åŠ å·¥å‚"><a href="#å…­ã€å¸¦å‚æ•°çš„è£…é¥°å™¨â€”è£…é¥°å™¨åŠ å·¥å‚" class="headerlink" title="å…­ã€å¸¦å‚æ•°çš„è£…é¥°å™¨â€”è£…é¥°å™¨åŠ å·¥å‚"></a>å…­ã€å¸¦å‚æ•°çš„è£…é¥°å™¨â€”è£…é¥°å™¨åŠ å·¥å‚</h1><p>å‰é¢å’±ä»¬çŸ¥é“ï¼Œè£…é¥°å™¨å‡½æ•°ä¹Ÿæ˜¯å‡½æ•°ï¼Œæ—¢ç„¶æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿›è¡Œå‚æ•°ä¼ é€’ï¼Œå’±ä»¬æ€ä¹ˆå†™ä¸€ä¸ªå¸¦å‚æ•°çš„è£…é¥°å™¨å‘¢ï¼Ÿ</p><p>è£…é¥°å™¨éœ€è¦å†å¤šä¸€å±‚å†…åµŒå‡½æ•°ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f3</span>(<span class="params">arg=<span class="string">&#x27;è£…é¥°å™¨çš„å‚æ•°&#x27;</span></span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">            <span class="built_in">print</span>(arg)</span><br><span class="line">            <span class="keyword">return</span> func() + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> f1</span><br><span class="line">    <span class="keyword">return</span> f2</span><br><span class="line"></span><br><span class="line"><span class="meta">@f3(<span class="params"><span class="string">&#x27;å¸¦å‚æ•°çš„è£…é¥°å™¨&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;func()å‡½æ•°&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(func())</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è£…é¥°å™¨çš„å‚æ•°</span></span><br><span class="line"><span class="string">func()å‡½æ•°</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€ç±»è£…é¥°å™¨"><a href="#ä¸ƒã€ç±»è£…é¥°å™¨" class="headerlink" title="ä¸ƒã€ç±»è£…é¥°å™¨"></a>ä¸ƒã€ç±»è£…é¥°å™¨</h1><p>ä¸Šé¢çŸ¥é“äº†æ€ä¹ˆå†™è£…é¥°å™¨å‡½æ•°ï¼Œåœ¨pythonä¸­ï¼Œå…¶å®ä¹Ÿå¯ä»¥åŒç±»æ¥å®ç°è£…é¥°å™¨çš„åŠŸèƒ½ï¼Œç§°ä¹‹ä¸ºç±»è£…é¥°å™¨ã€‚ç±»è£…é¥°å™¨çš„å®ç°æ˜¯è°ƒç”¨äº†ç±»é‡Œé¢çš„__call__å‡½æ•°ã€‚ç±»è£…é¥°å™¨çš„å†™æ³•æ¯”æˆ‘ä»¬è£…é¥°å™¨å‡½æ•°çš„å†™æ³•æ›´åŠ ç®€å•ã€‚</p><p>å½“æˆ‘ä»¬å°†ç±»ä½œä¸ºä¸€ä¸ªè£…é¥°å™¨ï¼Œå·¥ä½œæµç¨‹ï¼š</p><ul><li>é€šè¿‡__init__ï¼ˆï¼‰æ–¹æ³•åˆå§‹åŒ–ç±»</li><li>é€šè¿‡__call__ï¼ˆï¼‰æ–¹æ³•è°ƒç”¨çœŸæ­£çš„è£…é¥°æ–¹æ³•</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">XiaoYutou</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, func</span>):</span><br><span class="line">        self.func = func</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ‰§è¡Œç±»çš„__init__æ–¹æ³•&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿›å…¥__call__å‡½æ•°&#x27;</span>)</span><br><span class="line">        t1 = time.time()</span><br><span class="line">        self.func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ‰§è¡Œæ—¶é—´ä¸ºï¼š&quot;</span>, time.time() - t1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@XiaoYutou</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æˆ‘æ˜¯å°æ¼å¤´&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">python_blog_list</span>():</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¿›æ¥äº†å˜›&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@XiaoYutou</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¿›å…¥func2å‡½æ•°&#x27;</span>)</span><br><span class="line">    name()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æˆ‘çš„åšå®¢æ˜¯ dai2yutou.space&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    func1()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;--------------&#x27;</span>)</span><br><span class="line">    func2(python_blog_list)</span><br><span class="line">    </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ‰§è¡Œç±»çš„__init__æ–¹æ³•</span></span><br><span class="line"><span class="string">æ‰§è¡Œç±»çš„__init__æ–¹æ³•</span></span><br><span class="line"><span class="string">è¿›å…¥__call__å‡½æ•°</span></span><br><span class="line"><span class="string">æˆ‘æ˜¯å°æ¼å¤´</span></span><br><span class="line"><span class="string">æ‰§è¡Œæ—¶é—´ä¸ºï¼š 2.0138158798217773</span></span><br><span class="line"><span class="string">--------------</span></span><br><span class="line"><span class="string">è¿›å…¥__call__å‡½æ•°</span></span><br><span class="line"><span class="string">è¿›å…¥func2å‡½æ•°</span></span><br><span class="line"><span class="string">è¿›æ¥äº†å˜›</span></span><br><span class="line"><span class="string">æˆ‘çš„åšå®¢æ˜¯ dai2yutou.space</span></span><br><span class="line"><span class="string">æ‰§è¡Œæ—¶é—´ä¸ºï¼š 5.008427381515503</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h1 id="å…«ã€å¸¦å‚æ•°çš„ç±»è£…é¥°å™¨"><a href="#å…«ã€å¸¦å‚æ•°çš„ç±»è£…é¥°å™¨" class="headerlink" title="å…«ã€å¸¦å‚æ•°çš„ç±»è£…é¥°å™¨"></a>å…«ã€å¸¦å‚æ•°çš„ç±»è£…é¥°å™¨</h1><p>å½“è£…é¥°å™¨æœ‰å‚æ•°çš„æ—¶å€™ï¼Œ<strong>init</strong>() å‡½æ•°å°±ä¸èƒ½ä¼ å…¥<strong>func</strong>ï¼ˆfuncä»£è¡¨è¦è£…é¥°çš„å‡½æ•°ï¼‰äº†ï¼Œè€Œ<strong>func</strong>æ˜¯åœ¨__call__å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼ å…¥çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Decorator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, arg1, arg2</span>):  <span class="comment"># init()æ–¹æ³•é‡Œé¢çš„å‚æ•°éƒ½æ˜¯è£…é¥°å™¨çš„å‚æ•°</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;æ‰§è¡Œç±»Decoratorçš„__init__()æ–¹æ³•&#x27;</span>)</span><br><span class="line">        self.arg1 = arg1</span><br><span class="line">        self.arg2 = arg2</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, func</span>):  <span class="comment"># å› ä¸ºè£…é¥°å™¨å¸¦äº†å‚æ•°ï¼Œæ‰€ä»¥æ¥æ”¶ä¼ å…¥å‡½æ•°å˜é‡çš„ä½ç½®æ˜¯è¿™é‡Œ</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;æ‰§è¡Œç±»Decoratorçš„__call__()æ–¹æ³•&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">xiaoyutou_warp</span>(<span class="params">*args</span>):  <span class="comment"># è¿™é‡Œè£…é¥°å™¨çš„å‡½æ•°åå­—å¯ä»¥éšä¾¿å‘½åï¼Œåªè¦è·Ÿreturnçš„å‡½æ•°åç›¸åŒå³å¯</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;æ‰§è¡Œwrap()&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;è£…é¥°å™¨å‚æ•°ï¼š&#x27;</span>, self.arg1, self.arg2)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;æ‰§è¡Œ&#x27;</span> + func.__name__ + <span class="string">&#x27;()&#x27;</span>)</span><br><span class="line">            func(*args)</span><br><span class="line">            <span class="built_in">print</span>(func.__name__ + <span class="string">&#x27;()æ‰§è¡Œå®Œæ¯•&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> xiaoyutou_warp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Decorator(<span class="params"><span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;xiaoyutou&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">example</span>(<span class="params">a1, a2, a3</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¼ å…¥example()çš„å‚æ•°ï¼š&#x27;</span>, a1, a2, a3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å‡†å¤‡è°ƒç”¨example()&#x27;</span>)</span><br><span class="line">    example(<span class="string">&#x27;xiaoyutou&#x27;</span>, <span class="string">&#x27;Happy&#x27;</span>, <span class="string">&#x27;Coder&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æµ‹è¯•ä»£ç æ‰§è¡Œå®Œæ¯•&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ‰§è¡Œç±»Decoratorçš„__init__()æ–¹æ³•</span></span><br><span class="line"><span class="string">æ‰§è¡Œç±»Decoratorçš„__call__()æ–¹æ³•</span></span><br><span class="line"><span class="string">å‡†å¤‡è°ƒç”¨example()</span></span><br><span class="line"><span class="string">æ‰§è¡Œwrap()</span></span><br><span class="line"><span class="string">è£…é¥°å™¨å‚æ•°ï¼š Hello xiaoyutou</span></span><br><span class="line"><span class="string">æ‰§è¡Œexample()</span></span><br><span class="line"><span class="string">ä¼ å…¥example()çš„å‚æ•°ï¼š xiaoyutou Happy Coder</span></span><br><span class="line"><span class="string">example()æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line"><span class="string">æµ‹è¯•ä»£ç æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå…¥é—¨åˆ°å…¥åœŸ</title>
      <link href="/2023/05/15/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/"/>
      <url>/2023/05/15/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/24.jpg" style="border-radius:20px"></img></p><h1 id="ä¸€ã€å­¦ä¹ ã€å¼€å‘å‰çš„å‡†å¤‡"><a href="#ä¸€ã€å­¦ä¹ ã€å¼€å‘å‰çš„å‡†å¤‡" class="headerlink" title="ä¸€ã€å­¦ä¹ ã€å¼€å‘å‰çš„å‡†å¤‡"></a>ä¸€ã€å­¦ä¹ ã€å¼€å‘å‰çš„å‡†å¤‡</h1><h2 id="1-1-æ³¨å†Œè´¦å·-è·å–AppleID"><a href="#1-1-æ³¨å†Œè´¦å·-è·å–AppleID" class="headerlink" title="1.1 æ³¨å†Œè´¦å·+è·å–AppleID"></a>1.1 æ³¨å†Œè´¦å·+è·å–AppleID</h2><p>æ‰“å¼€<a href="https://mp.weixin.qq.com/">https://mp.weixin.qq.com/</a> ï¼Œè¿›å…¥å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œè¿›è¡Œå¾®ä¿¡å°ç¨‹åºè´¦å·çš„æ³¨å†Œã€‚</p><p>ç„¶åä¾æ¬¡ç‚¹å‡»<strong>å¼€å‘ç®¡ç†</strong>-&gt;<strong>å¼€å‘è®¾ç½®</strong>ï¼Œè·å–<strong>AppID</strong>(å°ç¨‹åºID)ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/6.png" alt="1.png"></p><p>AppIDåœ¨åŸºç¡€éƒ¨åˆ†å­¦ä¹ ä¸­ä¸éœ€è¦ï¼Œä½†åœ¨äº‘å¼€å‘ä¸­å¿…é¡»ä½¿ç”¨ï¼Œè®°ä½ä½ç½®å³å¯ã€‚</p><h2 id="1-2-å¾®ä¿¡å¼€å‘è€…å·¥å…·"><a href="#1-2-å¾®ä¿¡å¼€å‘è€…å·¥å…·" class="headerlink" title="1.2 å¾®ä¿¡å¼€å‘è€…å·¥å…·"></a>1.2 å¾®ä¿¡å¼€å‘è€…å·¥å…·</h2><h3 id="1-2-1-å·¥å…·ä¸‹è½½"><a href="#1-2-1-å·¥å…·ä¸‹è½½" class="headerlink" title="1.2.1 å·¥å…·ä¸‹è½½"></a>1.2.1 å·¥å…·ä¸‹è½½</h3><p>ä¸‹è½½ç¾¤å†…å‹ç¼©åŒ…ï¼Œç›´æ¥è§£å‹å³å¯ã€‚</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html</a></p><p>ä¹Ÿå¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½ï¼</p><h3 id="1-2-2-é¡¹ç›®åˆ›å»º"><a href="#1-2-2-é¡¹ç›®åˆ›å»º" class="headerlink" title="1.2.2 é¡¹ç›®åˆ›å»º"></a>1.2.2 é¡¹ç›®åˆ›å»º</h3><p>æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·è¿›è¡Œé¡¹ç›®åˆ›å»ºã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/7.png" alt="2.png"></p><p><strong>é¡¹ç›®åç§°</strong>ï¼šéšä¾¿æ·»åŠ ã€‚</p><p><strong>ç›®å½•</strong>ï¼šè‡ªå·±é€‰æ‹©ä½ç½®ã€</p><p>é€‰æ‹©<strong>ä¸ä½¿ç”¨äº‘æœåŠ¡</strong>ï¼ŒAppIDé€‰æ‹©æµ‹è¯•å·å¡«å…¥å³å¯ã€‚</p><p>é€‰æ‹©<strong>å¾®ä¿¡äº‘å¼€å‘</strong>ï¼Œå¡«å…¥è‡ªå·±çš„AppIDã€‚</p><p><strong>æ¨¡æ¿é€‰æ‹©</strong>ï¼šé€‰æ‹©ç¬¬äºŒä¸ªæ¨¡æ¿ï¼Œå³JavaScipt-åŸºç¡€æ¨¡æ¿ï¼Œè¿™æ ·å…¶ä¸­çš„å¤„ç†é€»è¾‘éƒ¨åˆ†çš„æ–‡ä»¶æ˜¯jsã€‚</p><h3 id="1-2-3-ç•Œé¢åˆè¯†"><a href="#1-2-3-ç•Œé¢åˆè¯†" class="headerlink" title="1.2.3 ç•Œé¢åˆè¯†"></a>1.2.3 ç•Œé¢åˆè¯†</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/8.png" alt="image-20230513224813571"></p><p>èœå•æ ã€å·¥å…·æ ã€ä»£ç å¼€å‘ã€è°ƒè¯•ã€å¯¼èˆªæ </p><h2 id="1-3-å°ç¨‹åºé¡¹ç›®ä»£ç ç»„æˆ"><a href="#1-3-å°ç¨‹åºé¡¹ç›®ä»£ç ç»„æˆ" class="headerlink" title="1.3 å°ç¨‹åºé¡¹ç›®ä»£ç ç»„æˆ"></a>1.3 å°ç¨‹åºé¡¹ç›®ä»£ç ç»„æˆ</h2><ol><li>pages ç”¨æ¥å­˜æ”¾æ‰€æœ‰å°ç¨‹åºçš„é¡µé¢</li><li>utils ç”¨æ¥å­˜æ”¾å·¥å…·æ€§è´¨çš„æ¨¡å—ï¼ˆä¾‹å¦‚ï¼šæ ¼å¼åŒ–æ—¶é—´çš„è‡ªå®šä¹‰æ¨¡å—ï¼‰</li><li>app.js å°ç¨‹åºé¡¹ç›®çš„å…¥å£æ–‡ä»¶</li><li>app.json å°ç¨‹åºé¡¹ç›®çš„å…¨å±€é…ç½®æ–‡ä»¶</li><li>app.wxss å°ç¨‹åºé¡¹ç›®çš„å…¨å±€æ ·å¼æ–‡ä»¶</li><li>project.config.json é¡¹ç›®çš„é…ç½®æ–‡ä»¶</li><li>logsæ—¥å¿—é¡µé¢</li></ol><h3 id="1-3-1-pagesæ–‡ä»¶å¤¹"><a href="#1-3-1-pagesæ–‡ä»¶å¤¹" class="headerlink" title="1.3.1 pagesæ–‡ä»¶å¤¹"></a>1.3.1 pagesæ–‡ä»¶å¤¹</h3><p>å°ç¨‹åºä¸­æ‰€æœ‰çš„é¡µé¢éƒ½å­˜æ”¾åœ¨pagesç›®å½•ä¸­ï¼Œæ¯ä¸ªé¡µé¢ä»¥å•ç‹¬çš„æ–‡ä»¶å¤¹å­˜ã€‚</p><p>æ¯ä¸ªé¡µé¢æ–‡ä»¶å¤¹ä¸­åŒ…å«å››ä¸ªé¡µé¢ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>.jsonæ–‡ä»¶ï¼šé¡µé¢çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®çª—å£å¤–è§‚ç­‰</li><li>.wxmlæ–‡ä»¶ï¼šé¡µé¢çš„<strong>æ¨¡æ¿</strong>æ–‡ä»¶</li><li>.cssæ–‡ä»¶ï¼šé¡µé¢çš„æ ·å¼æ–‡ä»¶</li><li>.jsæ–‡ä»¶ï¼šé¡µé¢çš„è„šæœ¬æ–‡ä»¶ï¼Œå­˜æ”¾é¡µé¢çš„æ•°æ®ã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰</li></ul><h3 id="1-3-2-jsonæ–‡ä»¶"><a href="#1-3-2-jsonæ–‡ä»¶" class="headerlink" title="1.3.2 jsonæ–‡ä»¶"></a>1.3.2 jsonæ–‡ä»¶</h3><p>jsonæ–‡ä»¶ä¸­çš„éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p><p>é”®å€¼å¯¹çš„é”®å’Œå€¼ä¹‹é—´ç”¨<code>ï¼š</code>éš”å¼€ï¼Œå€¼çš„æ•°æ®ç±»å‹æœ‰å¤šç§ï¼Œæ•°ç»„ã€æ•´å½¢ã€å­—ç¬¦ä¸²ç­‰ç­‰ï¼Œæ¯ä¸ªé”®å€¼å¯¹ä¹‹é—´ç”¨<code>,</code>éš”å¼€ã€‚</p><p><strong>app.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/our/our&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;light&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Weixin&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;black&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#999&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#1aad19&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é¦–é¡µ&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/home_img.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/home_img_select.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/our/our&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æˆ‘ä»¬&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/our_img.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/our_img_select.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sitemapLocation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sitemap.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å…¨å±€é¡µé¢çš„é…ç½®æ–‡ä»¶ã€‚</p><p><strong>pages</strong>ï¼šé¡µé¢è·¯å¾„åˆ—è¡¨ï¼Œå³å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„è·¯å¾„ï¼Œè°æ”¾åœ¨ç¬¬ä¸€ä¸ªï¼Œåˆ™é»˜è®¤æ˜¯é¦–é¡µï¼Œå³å°ç¨‹åºç¼–è¯‘åç¬¬ä¸€ä¸ªæ˜¾ç¤ºçš„é¡µé¢ï¼Œå¯ä»¥é€šè¿‡å·¥å…·æ æ”¹å˜ç¼–è¯‘æ¨¡å¼æ”¹å˜ã€‚</p><p>æ·»åŠ é¡µé¢ï¼šåœ¨pagesçš„æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªé¡µé¢è·¯å¾„ï¼Œå°ç¨‹åºä¼šè‡ªåŠ¨ç”Ÿæˆé¡µé¢çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«äº†å››ä¸ªæ–‡ä»¶</p><p>åˆ é™¤é¡µé¢ï¼šåˆ é™¤é¡µé¢çš„æ–‡ä»¶å¤¹ï¼Œç„¶ååˆ é™¤pagesä¸­çš„è·¯å¾„ã€‚</p><p><strong>window</strong>ï¼šå°ç¨‹åºçš„å…¨å±€çª—å£å±æ€§ï¼Œå¦‚å¯¼èˆªæ çš„é¢œè‰²ã€èƒŒæ™¯è‰²ã€‚</p><p><strong>tabBar</strong>ï¼šå°ç¨‹åºåº•éƒ¨tabæ ï¼ŒåŒ…æ‹¬tabçš„åˆ—è¡¨ã€é¢œè‰²ã€å›¾æ ‡ç­‰ï¼Œéœ€è¦å»ºç«‹ä¸€ä¸ªå­˜æ”¾å›¾æ ‡çš„æ–‡ä»¶å¤¹ã€‚</p><p><strong>æ¯ä¸ªé¡µé¢å•ç‹¬çš„json</strong></p><p>ç”¨æ¥é…ç½®å•ç‹¬æŸä¸ªé¡µé¢çš„çª—å£å¤–è§‚ï¼Œä¼šè¦†ç›–app.jsonã€‚</p><h3 id="1-3-3-WXMLæ–‡ä»¶"><a href="#1-3-3-WXMLæ–‡ä»¶" class="headerlink" title="1.3.3 WXMLæ–‡ä»¶"></a>1.3.3 WXMLæ–‡ä»¶</h3><p>ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œç±»ä¼¼vueã€‚</p><p>ä½œç”¨ç±»ä¼¼äºHTMLï¼Œä½†åˆè¦åŒºåˆ«ã€‚</p><p>æ•°æ®åŠ¨æ€ç»‘å®šã€æ”¯æŒåˆ—è¡¨æ¸²æŸ“ã€æ¡ä»¶åˆ¤æ–­ç­‰ç­‰ã€‚</p><h3 id="1-3-4-WXSSæ–‡ä»¶"><a href="#1-3-4-WXSSæ–‡ä»¶" class="headerlink" title="1.3.4 WXSSæ–‡ä»¶"></a>1.3.4 WXSSæ–‡ä»¶</h3><p>ä¸cssä¸€æ ·ï¼Œä½†å°ºå¯¸å•ä½æ–°å¢äº†ä¸€ä¸ªrpxï¼Œä¼šæ ¹æ®å±å¹•å¤§å°çš„å˜åŒ–è‡ªåŠ¨è¿›è¡Œæ¢ç®—æˆpxã€‚</p><p>ä¸cssä¸­%ä½œç”¨æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ–¹ä¾¿çš„è®¸å¤šã€‚</p><p>å…¶ä¸­app.wxssæ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ä¼šä½œç”¨äºå…¨å±€é¡µé¢ã€‚</p><h3 id="1-3-5-jsæ–‡ä»¶"><a href="#1-3-5-jsæ–‡ä»¶" class="headerlink" title="1.3.5 jsæ–‡ä»¶"></a>1.3.5 jsæ–‡ä»¶</h3><p>å°ç¨‹åºå®ç°çš„é€»è¾‘å±‚ã€‚</p><p>app.jså°ç¨‹åºçš„é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œé€šè¿‡è°ƒç”¨App()å‡½æ•°æ¥å¯åŠ¨æ•´ä¸ªå°ç¨‹åºï¼Œä¸ç”¨ç®¡ã€‚</p><p>é¡µé¢.jsæ–‡ä»¶æ˜¯æ¯ä¸ªé¡µé¢çš„å…¥å£æ–‡ä»¶ï¼Œé€šè¿‡Page()å‡½æ•°æ¥åˆ›å»ºå¹¶è¿è¡Œå¯¹åº”é¡µé¢ã€‚</p><h1 id="äºŒã€ç»„ä»¶"><a href="#äºŒã€ç»„ä»¶" class="headerlink" title="äºŒã€ç»„ä»¶"></a>äºŒã€ç»„ä»¶</h1><p>å¼€å‘è€…å¯ä»¥æ ¹æ®å°ç¨‹åºå®˜æ–¹æä¾›çš„ç»„ä»¶å¿«é€Ÿæ­å»ºé¡µé¢ç»“æ„ã€‚</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/">è§†å›¾å®¹å™¨ | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p>ç‚¹å‡»é“¾æ¥è¿›å…¥å®˜æ–¹æ–‡æ¡£ã€‚</p><p>ä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ã€‚</p><p>æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„å±æ€§ã€æ›´åŠ æ–¹ä¾¿å¿«æ·ã€‘ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€äº›æ ·å¼å’Œäº‹ä»¶ç­‰ç­‰ã€‚</p><h2 id="2-1-è§†å›¾å®¹å™¨"><a href="#2-1-è§†å›¾å®¹å™¨" class="headerlink" title="2.1 è§†å›¾å®¹å™¨"></a>2.1 è§†å›¾å®¹å™¨</h2><p><strong>view</strong></p><p>ç±»ä¼¼äºHTMLä¸­çš„divï¼Œå—çº§å…ƒç´ ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;view_1&quot;</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªview<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.view_1</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">2</span>rpx red;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>swiper&amp;swiper-item</strong></p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">swiper | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p>è½®æ’­å›¾å®¹å™¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">indicator-dots</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>C<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">swiper-item<span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) <span class="selector-class">.item</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: aquamarine;</span><br><span class="line">&#125;</span><br><span class="line">swiper-item<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) <span class="selector-class">.item</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>:coral</span><br><span class="line">&#125;</span><br><span class="line">swiper-item<span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) <span class="selector-class">.item</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: darksalmon;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-2-å†…å®¹ç»„ä»¶"><a href="#2-2-å†…å®¹ç»„ä»¶" class="headerlink" title="2.2 å†…å®¹ç»„ä»¶"></a>2.2 å†…å®¹ç»„ä»¶</h2><p><strong>text</strong></p><p>ç±»ä¼¼HTMLä¸­çš„spanï¼Œè¡Œå†…å…ƒç´ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>æˆ‘æ˜¯text<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-3-è¡¨å•ç»„ä»¶"><a href="#2-3-è¡¨å•ç»„ä»¶" class="headerlink" title="2.3 è¡¨å•ç»„ä»¶"></a>2.3 è¡¨å•ç»„ä»¶</h2><p><strong>form</strong></p><p><strong>input</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘æ˜¯textçš„inputï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">æˆ‘æ˜¯passwordçš„inputï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><strong>button</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>æˆ‘æ˜¯button_01<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>æˆ‘æ˜¯button_02<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-4-å¯¼èˆªç»„ä»¶"><a href="#2-4-å¯¼èˆªç»„ä»¶" class="headerlink" title="2.4 å¯¼èˆªç»„ä»¶"></a>2.4 å¯¼èˆªç»„ä»¶</h2><p><strong>navigator</strong></p><h2 id="2-5-åª’ä½“ç»„ä»¶"><a href="#2-5-åª’ä½“ç»„ä»¶" class="headerlink" title="2.5 åª’ä½“ç»„ä»¶"></a>2.5 åª’ä½“ç»„ä»¶</h2><p>img</p><p><strong>image</strong></p><h1 id="ä¸‰ã€åŸºæœ¬è¯­æ³•"><a href="#ä¸‰ã€åŸºæœ¬è¯­æ³•" class="headerlink" title="ä¸‰ã€åŸºæœ¬è¯­æ³•"></a>ä¸‰ã€åŸºæœ¬è¯­æ³•</h1><h2 id="3-1-æ•°æ®ç»‘å®š"><a href="#3-1-æ•°æ®ç»‘å®š" class="headerlink" title="3.1 æ•°æ®ç»‘å®š"></a>3.1 æ•°æ®ç»‘å®š</h2><p><strong>åœ¨dataä¸­å®šä¹‰é¡µé¢çš„æ•°æ®</strong></p><p>æ¯ä¸ªé¡µé¢çš„jsæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªpage()å‡½æ•°ï¼Œä¼ å…¥äº†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œæˆ‘ä»¬å°±åœ¨æ­¤å¯¹è±¡ä¸­è¿›è¡Œä¸€äº›æ•°æ®å’Œé€»è¾‘çš„å¤„ç†ã€‚</p><p>å‚æ•°å¯¹è±¡æ˜¯ç”±é”®å€¼å¯¹ç»„æˆçš„ã€‚</p><p>dataçš„å€¼åˆæ˜¯ä¸€ä¸ª{}å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†å¤šä¸ªé”®å€¼å¯¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;ä½ çœ‹æˆ‘å‡ºæ¥äº†å˜›ï¼Ÿ&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šé”®æ˜¯<code>msg</code>ï¼Œå€¼æ˜¯<code>ä½ çœ‹æˆ‘å‡ºæ¥äº†å˜›ï¼Ÿ</code>,å­—ç¬¦ä¸²ç±»å‹ã€‚</p><p>è¿™é‡Œå€¼çš„ç±»å‹å¯ä»¥æ˜¯å¤šä¸ªåŒ…æ‹¬æ•°ç»„ã€å­—ç¬¦ä¸²ã€æ•´å‹ã€å¯¹è±¡ç­‰ç­‰ã€‚</p><p><strong>åœ¨WXMLä¸­ä½¿ç”¨æ•°æ®</strong></p><p>æŠŠdataä¸­çš„æ•°æ®ç»‘å®šåˆ°é¡µé¢ä¸­æ¸²æŸ“ï¼Œä½¿ç”¨<strong>Mustache è¯­æ³•</strong>ï¼Œvueä¸­å«åšæ’å€¼è¡¨è¾¾å¼ã€‚</p><p>å³<code>&#123;&#123;&#125;&#125;</code></p><p><code>&#123;&#123;&#125;&#125;</code>ä¸­å¯ä»¥ä¼ å…¥å˜é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°è°ƒç”¨ç­‰ç­‰ç­‰ã€‚</p><p>å¦‚ä¸Šé¢dataä¸­å®šä¹‰äº†ä¸€ä¸ªmsgå˜é‡ï¼Œåˆ™è¿™é‡Œå¯ä»¥æ¸²æŸ“åˆ°é¡µé¢ä¸­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜å¯ä»¥æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªæ ‡ç­¾çš„å±æ€§æˆ–è€…æ˜¯ä¸€ä¸ªæ ‡ç­¾çš„æ ·å¼ç­‰ç­‰ç­‰ï¼Œåªè¦åœ¨WXMLä¸­ï¼Œæ”¾åˆ°å“ªéƒ½å¯ä»¥ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;imgUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;3+2*3&#125;&#125;\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123; (3+2)**5 ? &#x27;å¯¹äº†&#x27; : &#x27;é”™äº†ï¼&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;ä½ çœ‹æˆ‘å‡ºæ¥äº†å˜›ï¼Ÿ&#x27;</span>,</span><br><span class="line">    <span class="attr">imgUrl</span>: <span class="string">&#x27;/images/yeah.jpg&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-2-æ¡ä»¶æ¸²æŸ“"><a href="#3-2-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.2 æ¡ä»¶æ¸²æŸ“"></a>3.2 æ¡ä»¶æ¸²æŸ“</h2><p>æ ¹æ®æ¡ä»¶åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºæŸä¸ªå…ƒç´ ï¼ŒåŠ¨æ€æ§åˆ¶é¡µé¢çš„æ˜¾ç¤ºæ•ˆæœ</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;msg**&#x27;A&#x27;&#125;&#125;&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;msg**&#x27;B&#x27;&#125;&#125;&quot;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>C<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123;!msg**&#x27;A&#x27;&#125;&#125;&quot;</span>&gt;</span>æˆ‘æ˜¯ç”¨hiddenåˆ¤æ–­çš„<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;A&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-3-åˆ—è¡¨æ¸²æŸ“"><a href="#3-3-åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="3.3 åˆ—è¡¨æ¸²æŸ“"></a>3.3 åˆ—è¡¨æ¸²æŸ“</h2><p>æ›´å¿«çš„æ¸²æŸ“æ•°æ®åˆ—è¡¨ï¼Œæ–¹ä¾¿åç»­ä»£ç çš„æŸ¥çœ‹å’Œä¿®æ”¹ï¼Œå‡å°‘ä»£ç çš„å¤ç”¨æ€§ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">list</span>: [<span class="string">&#x27;è‹¹æœ&#x27;</span>, <span class="string">&#x27;é¦™è•‰&#x27;</span>, <span class="string">&#x27;æ©˜å­&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>wx:key</code>æ˜¯ç”¨æ¥æ ‡è®°åˆ—è¡¨é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ çš„å”¯ä¸€çš„å±æ€§ï¼Œè¿™é‡Œç”¨indexï¼Œå³å½“å‰æ‰€ä¾¿åˆ©çš„å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</p><p><code>item</code>è¡¨ç¤ºå½“å‰å…ƒç´ ã€‚</p><h2 id="3-3-äº‹ä»¶ç»‘å®š"><a href="#3-3-äº‹ä»¶ç»‘å®š" class="headerlink" title="3.3 äº‹ä»¶ç»‘å®š"></a>3.3 äº‹ä»¶ç»‘å®š</h2><p><strong>bindtapï¼šç‚¹å‡»äº‹ä»¶</strong></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;click&quot;</span>&gt;</span>æˆ‘æ˜¯button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;æˆ‘æ²¡è¢«ä¿®æ”¹è¿‡&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">click</span>: <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">msg</span>:<span class="string">&#x27;æˆ‘è¢«ä¿®æ”¹äº†&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>bindinputï¼šè¾“å…¥æ¡†è¾“å…¥äº‹ä»¶</strong></p><p>å½“æˆ‘ä»¬è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œä¼šè¿”å›ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¸¦ç€ä¸€ä¸ªäº‹ä»¶å¯¹è±¡eventï¼Œé‡Œé¢çš„ä¸€äº›å¸¸è§å±æ€§å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>type</td><td>äº‹ä»¶ç±»å‹</td></tr><tr><td>target</td><td>è§¦å‘äº‹ä»¶çš„ç»„ä»¶çš„ä¸€äº›å±æ€§å€¼é›†åˆ</td></tr><tr><td>currentTarget</td><td>å½“å‰ç»„ä»¶çš„ä¸€äº›å±æ€§å€¼é›†åˆ</td></tr><tr><td>detail</td><td>å…¶ä»–ä¿¡æ¯</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;input&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;æˆ‘æ²¡è¢«ä¿®æ”¹è¿‡&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">input</span>: <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">    <span class="comment">// console.log(event)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">msg</span>: event.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input&#123;</span><br><span class="line">  margin: 20rpx;</span><br><span class="line">  border: solid 2rpx rgb(27, 107, 153);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-4-äº‹ä»¶ä¼ å‚"><a href="#3-4-äº‹ä»¶ä¼ å‚" class="headerlink" title="3.4 äº‹ä»¶ä¼ å‚"></a>3.4 äº‹ä»¶ä¼ å‚</h2><p>æˆ‘ä»¬åœ¨ä¸ºä¸€ä¸ªå…ƒç´ ç»‘å®šäº‹ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥å¯¹äº‹ä»¶è¿›è¡Œä¼ å‚ï¼Œä¼ å…¥ä¸€äº›å…³äºå…ƒç´ çš„ä¸€äº›æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ã€‚</p><p><strong>è¯­æ³•ï¼š</strong></p><p>**data-**<em>ï¼Œå…¶ä¸­</em>ä»£è¡¨å‚æ•°çš„åå­—ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰å³å¯ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">&quot;view1&quot;</span> <span class="attr">data-name</span>=<span class="string">&quot;View One&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;onTap&quot;</span>&gt;</span>View 1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">onTap</span>: <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(event)</span></span><br><span class="line">    <span class="keyword">var</span> viewId = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">id</span>;</span><br><span class="line">    <span class="keyword">var</span> viewName = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">name</span>;</span><br><span class="line">    <span class="keyword">var</span> viewType = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">type</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked view id: &quot;</span> + viewId);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked view name: &quot;</span> + viewName);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked view type: &quot;</span> + viewType);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="å››ã€ç½‘ç»œæ•°æ®è¯·æ±‚"><a href="#å››ã€ç½‘ç»œæ•°æ®è¯·æ±‚" class="headerlink" title="å››ã€ç½‘ç»œæ•°æ®è¯·æ±‚"></a>å››ã€ç½‘ç»œæ•°æ®è¯·æ±‚</h1><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">RequestTask | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p>wx.requestæ˜¯å¾®ä¿¡å°ç¨‹åºä¸­çš„APIï¼Œç”¨æ¥å‘æœåŠ¡å™¨å‘èµ·ç½‘ç»œæ•°æ®è¯·æ±‚ï¼Œä¸åç«¯è¿›è¡Œäº¤äº’ã€‚</p><p><strong>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</strong></p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#%E5%8F%82%E6%95%B0">Page(Object object) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p>jsæ–‡ä»¶çš„pageä¸­æŒ‡å®šé¡µé¢çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›å¾®ä¿¡å°ç¨‹åºå°è£…å¥½çš„å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åº”çš„æ“ä½œï¼Œç›´æ¥åœ¨å‡½æ•°ä½“ä¸­å†™å°±å¯ä»¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params"></span>)&#123;&#125;<span class="comment">//ç›‘å¬é¡µé¢åŠ è½½</span></span><br><span class="line"><span class="title function_">onReady</span>(<span class="params"></span>)&#123;&#125;<span class="comment">//ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ</span></span><br><span class="line"><span class="title function_">onShow</span>(<span class="params"></span>)&#123;&#125;<span class="comment">//ç›‘å¬é¡µé¢æ˜¾ç¤º</span></span><br><span class="line"><span class="title function_">onHide</span>(<span class="params"></span>)&#123;&#125;<span class="comment">//ç›‘å¬é¡µé¢éšè—</span></span><br><span class="line"><span class="title function_">onUnload</span>(<span class="params"></span>)&#123;&#125;<span class="comment">//ç›‘å¬é¡µé¢å¸è½½</span></span><br></pre></td></tr></table></figure><p><strong>ä»€ä¹ˆæ˜¯APIï¼š</strong></p><p>å¾®ä¿¡å°ç¨‹åºä¸­çš„APIæ˜¯ä¸€ç»„å°è£…å¥½çš„JavaScriptå‡½æ•°å’Œå¯¹è±¡ï¼Œç”¨äºå®ç°å°ç¨‹åºçš„å„ç§åŠŸèƒ½ã€‚</p><p>å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨æ­¤APIçš„æ—¶å€™ï¼Œå¿…é¡»éœ€è¦å°†å®ƒå†™åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œé€šè¿‡è°ƒç”¨æ­¤å‡½æ•°è°ƒç”¨æ­¤APIæ¥å£ã€‚</p><p>å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™ï¼Œå°±å¯¹ç½‘ç»œæ•°æ®è¿›è¡Œè¯·æ±‚ï¼Œåˆ™éœ€è¦å°†æ­¤è¯·æ±‚å†™åœ¨<code>onLoad()</code>å‡½æ•°ä¸­ã€‚</p><p>å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ç‚¹å‡»ç™»å½•æŒ‰é’®åï¼Œæç¤ºå¯†ç é”™è¯¯ï¼Œåˆ™å°±éœ€è¦åœ¨ç™»å½•æŒ‰é’®äº‹ä»¶å‡½æ•°ä¸­æ·»åŠ wx.showToast(),è°ƒç”¨æ­¤APIã€‚</p><p><strong>æ³¨æ„</strong>ï¼šåªèƒ½è¯·æ±‚HTTPSç±»å‹çš„æ¥å£ã€ä¸ä¸Šçº¿å¯åœ¨è¯¦æƒ…-&gt;æœ¬åœ°è®¾ç½®ä¸­é€‰æ‹©ä¸æ ¡éªŒåˆæ³•åŸŸåã€‘ï¼Œå¿…é¡»å°†æ¥å£çš„åŸŸåæ·»åŠ åˆ°ä¿¡ä»»åˆ—è¡¨ã€å·¥å…·æ -&gt;è¯¦æƒ…-&gt;é¡¹ç›®é…ç½®-&gt;åŸŸåä¿¡æ¯ã€‘ä¸­æ‰èƒ½å‘èµ·è¯·æ±‚ã€‚</p><p><strong>å¦‚ä½•æ·»åŠ åŸŸååˆ°ä¿¡ä»»åˆ—è¡¨</strong>ï¼š</p><p><a href="https://mp.weixin.qq.com/">å¾®ä¿¡å…¬ä¼—å¹³å° (qq.com)</a></p><p>è¿›å…¥å¾®ä¿¡å…¬ä¼—å¹³å°å¹¶ç™»å½•è‡ªå·±çš„è´¦å·ã€‚</p><p>ç„¶å<strong>å¼€å‘</strong>-&gt;<strong>å¼€å‘ç®¡ç†</strong>-&gt;<strong>å¼€å‘è®¾ç½®</strong>-&gt;<strong>æœåŠ¡å™¨åŸŸå</strong>-&gt;<strong>é…ç½®åŸŸå</strong>-&gt;<strong>ä¿®æ”¹requeståˆæ³•åŸŸå</strong>ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;url&#x27;</span>,</span><br><span class="line">  <span class="attr">methed</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æ¼å¤´&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;20&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">success</span>(<span class="params">res</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">fail</span>(<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>url</code>ï¼šè¯·æ±‚çš„æœåŠ¡å™¨åœ°å€ã€‚</li><li><code>data</code>ï¼šè¯·æ±‚çš„å‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–å­—ç¬¦ä¸²ã€‚</li><li><code>method</code>ï¼šè¯·æ±‚çš„æ–¹æ³•ï¼Œå¯ä»¥æ˜¯GETã€POSTç­‰ã€‚</li><li><code>success</code>ï¼šè¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ï¼Œå‚æ•°ä¸ºæœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</li><li><code>fail</code>ï¼šè¯·æ±‚å¤±è´¥åçš„å›è°ƒå‡½æ•°ï¼Œå‚æ•°ä¸ºé”™è¯¯ä¿¡æ¯ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥åœ¨successå›è°ƒå‡½æ•°ä¸­æ·»åŠ è¯·æ±‚æ•°æ®æˆåŠŸåå¯¹æ•°æ®çš„ä¸€äº›å¤„ç†ï¼Œä¾‹å¦‚åˆ©ç”¨setDataèµ‹å€¼ç»™dataæ•°æ®ï¼Œæ¸²æŸ“åˆ°å‰ç«¯é¡µé¢ä¸­ï¼Œæˆ–è€…ä½œä¸ºå‚æ•°è°ƒç”¨å…¶ä»–å‡½æ•°ç­‰ç­‰ç­‰ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨failå›è°ƒå‡½æ•°ä¸­æ·»åŠ è¯·æ±‚æ•°æ®å¤±è´¥åçš„ä¸€äº›æç¤ºç­‰ç­‰ã€‚</p><h1 id="äº”ã€å¾®ä¿¡äº‘å¼€å‘"><a href="#äº”ã€å¾®ä¿¡äº‘å¼€å‘" class="headerlink" title="äº”ã€å¾®ä¿¡äº‘å¼€å‘"></a>äº”ã€å¾®ä¿¡äº‘å¼€å‘</h1><p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html">å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p>ç½‘ç»œæ•°æ®è¯·æ±‚éœ€è¦æœåŠ¡å™¨å’Œåç«¯çš„æŠ€æœ¯ã€‚</p><p>ä½¿ç”¨å¾®ä¿¡äº‘å¼€å‘ï¼Œå¼€å‘è€…ä¸éœ€è¦æ­å»ºè‡ªå·±çš„æœåŠ¡å™¨ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/9.png" alt="image-20230514152831939"></p><p>å¦‚æœæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªäº‘å¼€å‘çš„å°ç¨‹åºé¡¹ç›®ï¼ŒAppIDä¸èƒ½ä½¿ç”¨æµ‹è¯•å·ï¼Œéœ€è¦ä½¿ç”¨è‡ªå·±çš„AppIDã€‚</p><p>ä¸”åç«¯æœåŠ¡é€‰æ‹©å¾®ä¿¡äº‘å¼€å‘ã€‚</p><h2 id="5-1-åº•å±‚åŸç†"><a href="#5-1-åº•å±‚åŸç†" class="headerlink" title="5.1 åº•å±‚åŸç†"></a>5.1 åº•å±‚åŸç†</h2><p>å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“åº•å±‚åŸç†ä½¿ç”¨çš„æ˜¯è…¾è®¯äº‘çš„äº‘æ•°æ®åº“æœåŠ¡ã€‚äº‘æ•°æ®åº“æ˜¯ä¸€ç§åŸºäºäº‘è®¡ç®—çš„æ•°æ®åº“æœåŠ¡ï¼Œæä¾›äº†é«˜å¯ç”¨æ€§ã€é«˜å¯æ‰©å±•æ€§ã€è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ç­‰åŠŸèƒ½ã€‚å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡æ˜¯åœ¨è…¾è®¯äº‘çš„äº‘æ•°æ®åº“æœåŠ¡ä¸Šè¿›è¡Œçš„å°è£…å’Œå®šåˆ¶ï¼Œä½¿å…¶æ›´ç¬¦åˆå¾®ä¿¡å°ç¨‹åºçš„å¼€å‘éœ€æ±‚ã€‚</p><p>å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡é‡‡ç”¨çš„æ˜¯éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨æ¨¡å‹ï¼Œå³NoSQLã€‚NoSQLæ•°æ®åº“ä¸ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ä¸åŒï¼Œä¸ä½¿ç”¨ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨å…¶ä»–æ•°æ®æŸ¥è¯¢è¯­è¨€æˆ–APIæ¥è®¿é—®å’Œç®¡ç†æ•°æ®ã€‚å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡ä½¿ç”¨çš„æ˜¯æ–‡æ¡£å‹æ•°æ®åº“ï¼Œå³ä½¿ç”¨JSONæ ¼å¼å­˜å‚¨æ•°æ®ï¼Œæ¯ä¸ªæ–‡æ¡£ç›¸å½“äºä¸€æ¡è®°å½•ã€‚</p><p>å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡æ”¯æŒå®æ—¶åŒæ­¥å’Œæ•°æ®è®¿é—®æƒé™æ§åˆ¶ç­‰åŠŸèƒ½ã€‚åŒæ—¶ï¼Œå®ƒè¿˜æ”¯æŒäº‘å‡½æ•°è§¦å‘å™¨ï¼Œå¯ä»¥åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘äº‘å‡½æ•°ã€‚è¿™ç§è§¦å‘å™¨å¯ä»¥ç”¨äºå®ç°å®æ—¶é€šçŸ¥ã€è‡ªåŠ¨åŒ–å¤„ç†å’Œæ•°æ®åˆ†æç­‰åŠŸèƒ½ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“åº•å±‚åŸç†é‡‡ç”¨äº†è…¾è®¯äº‘çš„äº‘æ•°æ®åº“æœåŠ¡ï¼Œä½¿ç”¨æ–‡æ¡£å‹æ•°æ®åº“å­˜å‚¨æ¨¡å‹ï¼Œæ”¯æŒå®æ—¶åŒæ­¥å’Œæ•°æ®è®¿é—®æƒé™æ§åˆ¶ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜æ”¯æŒäº‘å‡½æ•°è§¦å‘å™¨ã€‚</p><h2 id="5-2-å·¥å…·ä»‹ç»"><a href="#5-2-å·¥å…·ä»‹ç»" class="headerlink" title="5.2 å·¥å…·ä»‹ç»"></a>5.2 å·¥å…·ä»‹ç»</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/10.png" alt="image-20230514154350512"></p><p><strong>æ•°æ®åº“</strong>ï¼šå­˜å‚¨æ•°æ®</p><p><strong>å­˜å‚¨</strong>ï¼šå­˜å‚¨æ–‡ä»¶ã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰ç­‰</p><p><strong>äº‘å‡½æ•°</strong>ï¼šæˆ‘ä»¬å†™çš„äº‘å‡½æ•°</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/11.png" alt="image-20230514154605352"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/12.png" alt="image-20230514154619303"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/13.png" alt="image-20230514154628092"></p><h2 id="5-3-åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ"><a href="#5-3-åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ" class="headerlink" title="5.3 åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ"></a>5.3 åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ</h2><p>æˆ‘ä»¬åœ¨äº‘æ•°æ®åº“ä¸­å®šä¹‰äº†<code>getData</code>é›†åˆï¼Œé‡Œé¢åˆå§‹æ”¾äº†ä¸¤æ¡è®°å½•ï¼Œæ¯æ¡è®°å½•æœ‰ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸º<code>_idã€usernameã€password</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/1.png" alt="1"></p><p>æˆ‘ä»¬åœ¨jsæ–‡ä»¶ä¸­å®šä¹‰äº†å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰dbå˜é‡è¿æ¥æ•°æ®åº“ï¼Œå¹¶è¿æ¥åˆ°getDataè¿™ä¸ªè¡¨</span></span><br><span class="line"><span class="keyword">const</span> db = wx.<span class="property">cloud</span>.<span class="title function_">database</span>().<span class="title function_">collection</span>(<span class="string">&quot;getData&quot;</span>)</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">//é¡µé¢çš„åˆå§‹æ•°æ®</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&quot;&quot;</span>,<span class="comment">//åˆå§‹åŒ–usernameæ•°æ®ï¼Œç”¨æ¥åˆ°æ•°æ®åº“ä¸­ä¼ å‚usernameå­—æ®µ</span></span><br><span class="line">    <span class="attr">psd</span>:<span class="string">&quot;&quot;</span><span class="comment">//åˆå§‹åŒ–psdæ•°æ®ï¼Œç”¨æ¥åˆ°æ•°æ®åº“ä¸­ä¼ å‚passwordå­—æ®µ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-1-å¢åŠ "><a href="#2-1-å¢åŠ " class="headerlink" title="2.1 å¢åŠ "></a>2.1 å¢åŠ </h3><p>wxmlæ–‡ä»¶ï¼Œä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œä¸€ä¸ªæ·»åŠ æŒ‰é’®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥è´¦å·&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;addName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥å¯†ç &quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;addPsd&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;addData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">   <span class="comment">//è·å–æ·»åŠ çš„è´¦å·</span></span><br><span class="line">  <span class="attr">addName</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">username</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//è·å–æ·»åŠ çš„å¯†ç </span></span><br><span class="line">  <span class="attr">addPsd</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">psd</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//ç‚¹å‡»æ·»åŠ æŒ‰é’®æ·»åŠ æ“ä½œ</span></span><br><span class="line">  <span class="comment">//å…¶ä¸­dataé‡Œè¾¹ä¸ºä¼ å…¥çš„å‚æ•°ï¼Œä¸ºjsonæ ¼å¼ï¼Œï¼šå‰é¢çš„ä¸ºæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œåé¢çš„ä¸ºè¦ä¼ å…¥çš„å€¼ï¼Œ</span></span><br><span class="line">  <span class="comment">//æ­¤æ—¶å°±å¯ä»¥å°†æ•°æ®æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">  <span class="attr">addData</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    db.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">username</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">username</span>,</span><br><span class="line">        <span class="attr">password</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">psd</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>,res);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ·»åŠ å¤±è´¥&quot;</span>,err);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†è¾“å…¥è´¦å·å’Œå¯†ç åï¼Œç‚¹å‡»æ·»åŠ æŒ‰é’®ï¼Œä¼šåœ¨getDataé›†åˆä¸­ç”Ÿæˆä¸€ä¸ªæ–°çš„è®°å½•ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼Œ_idä¸ºè‡ªåŠ¨ç”Ÿæˆï¼Œusernameã€passwordä¸ºæˆ‘ä»¬è¾“å…¥çš„å†…å®¹ã€‚</p></blockquote><p>æ·»åŠ æˆåŠŸçš„ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/3.png" alt="1"></p><h3 id="2-2-åˆ é™¤"><a href="#2-2-åˆ é™¤" class="headerlink" title="2.2 åˆ é™¤"></a>2.2 åˆ é™¤</h3><p>wxmlæ–‡ä»¶ï¼Œä¸ºä¸€ä¸ªè¾“å…¥è´¦å·çš„inputå’Œä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼›</p><p>æˆ‘ä»¬é€‰æ‹©é€šè¿‡è¾“å…¥çš„è´¦å·åˆ é™¤</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥è´¦å·&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;del&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;delData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> &gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">delData</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">  db.<span class="title function_">where</span>(&#123;</span><br><span class="line">    <span class="comment">//è¿™æ˜¯æ˜¯æ ¹æ®whereè¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢é›†åˆä¸­usernameå­—æ®µçš„å€¼ä¸ºthis.data.usernameçš„è®°å½•</span></span><br><span class="line">    <span class="attr">username</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">username</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">remove</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>,res)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤å¤±è´¥&quot;</span>,err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬åœ¨è¾“å…¥è´¦å·æ—¶ï¼Œä¼šè°ƒç”¨delå‡½æ•°ï¼Œå°†è¾“å…¥çš„è´¦å·èµ‹å€¼ç»™äº†dataé‡Œè¾¹çš„usernameï¼Œå½“æˆ‘ä»¬ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œä¼šè°ƒç”¨delDataæ–¹æ³•ï¼Œæ ¹æ®dataé‡Œé¢çš„usernameï¼Œåˆ°æ•°æ®åº“ä¸­æ‰¾usernameå­—æ®µç›¸ç­‰çš„è®°å½•ï¼Œå¹¶æ‰§è¡Œremove()å‡½æ•°ï¼Œåˆ é™¤æ­¤æ¡æ•°æ®ï¼Œ.thenæ˜¯åˆ é™¤æˆåŠŸåæ‰§è¡Œçš„ï¼Œ.catchæ˜¯åˆ é™¤å¤±è´¥æ‰§è¡Œçš„ã€‚</p></blockquote><p>åˆ é™¤æˆåŠŸçš„ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/2.png" alt="1"></p><h3 id="2-3-ä¿®æ”¹"><a href="#2-3-ä¿®æ”¹" class="headerlink" title="2.3 ä¿®æ”¹"></a>2.3 ä¿®æ”¹</h3><p>wxmlæ–‡ä»¶ï¼Œä¸¤ä¸ªinputï¼Œä¸€ä¸ªä¿®æ”¹æŒ‰é’®ï¼Œç¬¬ä¸€ä¸ªinputéœ€å¡«å…¥è¦ä¿®æ”¹çš„è´¦å·ï¼Œç¬¬äºŒä¸ªå¡«å…¥ä¿®æ”¹åçš„å¯†ç ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥è¦ä¿®æ”¹è´¦å·çš„ç”¨æˆ·å&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;updUsername&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥ä¿®æ”¹åçš„å¯†ç &quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;updPsd&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;updData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> &gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">updUsername</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">username</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">updPsd</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">psd</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">updData</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    db.<span class="title function_">where</span>(&#123;</span><br><span class="line">      <span class="attr">username</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">username</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">update</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">password</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">psd</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>,res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¿®æ”¹å¤±è´¥&quot;</span>,err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬è¾“å…¥è´¦å·åå’Œå¯†ç æ—¶ï¼Œä¼šè°ƒç”¨updUsernameå’ŒupdPsdå‡½æ•°ï¼Œå°†è¾“å…¥çš„å†…å®¹èµ‹å€¼åˆ°dataé‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬ç‚¹å‡»ä¿®æ”¹æŒ‰é’®åï¼Œä¼šè°ƒç”¨updDataå‡½æ•°ï¼Œç„¶åæ ¹æ®whereæŸ¥è¯¢è¯­å¥ï¼Œåœ¨getDataé›†åˆä¸­æŸ¥æ‰¾usernamå­—æ®µçš„å€¼ä¸åˆšåˆšè¾“å…¥çš„è´¦å·åç›¸ç­‰çš„è®°å½•ï¼Œå¹¶æ ¹æ®updata()å‡½æ•°å°†passwordå­—æ®µçš„å€¼ä¿®æ”¹ä¸ºthis.data.psdã€‚</p></blockquote><p>ä¿®æ”¹æˆåŠŸçš„ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/4.png" alt="1"></p><h3 id="2-4-æŸ¥è¯¢"><a href="#2-4-æŸ¥è¯¢" class="headerlink" title="2.4 æŸ¥è¯¢"></a>2.4 æŸ¥è¯¢</h3><p>wxmlæ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;getData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getData</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    db.<span class="title function_">get</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span>,res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æŸ¥è¯¢å¤±è´¥&quot;</span>,err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬ç‚¹å‡»æŸ¥è¯¢æŒ‰é’®åï¼Œä¼šå¾—åˆ°æ‰€ä»¥ç»“æœï¼Œç»“æœä¼šå­˜æ”¾åœ¨resçš„dataä¸‹</p></blockquote><p>æŸ¥è¯¢æˆåŠŸç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/5.png" alt="1"></p><h2 id="5-4-whereæ¡ä»¶æŸ¥è¯¢"><a href="#5-4-whereæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="5.4 whereæ¡ä»¶æŸ¥è¯¢"></a>5.4 whereæ¡ä»¶æŸ¥è¯¢</h2><p>å…·ä½“æŸ¥çœ‹ğŸ“¢ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/Command.html">Command | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p>è¿™æ˜¯æˆ‘ä»¬å®šä¹‰äº†<code>db=wx.cloud.database()</code>ï¼Œä¸ä¸Šæ–‡ä¸åŒ</p><p>å¾®ä¿¡å°ç¨‹åºçš„å¢åˆ æŸ¥æ”¹æ“ä½œéœ€è¦ä½¿ç”¨å°ç¨‹åºäº‘å¼€å‘çš„æ•°æ®åº“ APIï¼Œåœ¨ä½¿ç”¨ where æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ã€æ›´æ–°æˆ–åˆ é™¤æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>1.where æ¡ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§åä¸ºå­—æ®µåï¼Œå±æ€§å€¼ä¸ºåŒ¹é…æ¡ä»¶ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ name å­—æ®µç­‰äºâ€œå¼ ä¸‰â€çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>2.where æ¡ä»¶å¯ä»¥ä½¿ç”¨å¤šä¸ªå±æ€§ï¼Œå¤šä¸ªå±æ€§ä¹‹é—´çš„å…³ç³»æ˜¯â€œä¸â€çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ name å­—æ®µç­‰äºâ€œå¼ ä¸‰â€ä¸” age å­—æ®µå¤§äºç­‰äº 18 çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: db.<span class="property">command</span>.<span class="title function_">gte</span>(<span class="number">18</span>)</span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.command.gte(18) è¡¨ç¤º age å¤§äºç­‰äº 18ã€‚</p><p>3.where æ¡ä»¶æ”¯æŒå¤šç§æ¯”è¾ƒæ“ä½œç¬¦ï¼ŒåŒ…æ‹¬ï¼šç­‰äºï¼ˆeqï¼‰ã€ä¸ç­‰äºï¼ˆneqï¼‰ã€å°äºï¼ˆltï¼‰ã€å°äºç­‰äºï¼ˆlteï¼‰ã€å¤§äºï¼ˆgtï¼‰ã€å¤§äºç­‰äºï¼ˆgteï¼‰ã€åŒ…å«äºï¼ˆinï¼‰ã€ä¸åŒ…å«äºï¼ˆninï¼‰ã€ä»¥ä»€ä¹ˆå¼€å¤´ï¼ˆregexï¼‰ã€ä»¥ä»€ä¹ˆç»“å°¾ï¼ˆregexï¼‰ã€åŒ…å«ï¼ˆandï¼‰ã€æˆ–è€…ï¼ˆorï¼‰ç­‰ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ age å­—æ®µå¤§äºç­‰äº 18 ä¸”å°äºç­‰äº 30 çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">age</span>: db.<span class="property">command</span>.<span class="title function_">and</span>(db.<span class="property">command</span>.<span class="title function_">gte</span>(<span class="number">18</span>), db.<span class="property">command</span>.<span class="title function_">lte</span>(<span class="number">30</span>))</span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.command.and() è¡¨ç¤ºâ€œä¸â€çš„å…³ç³»ï¼Œdb.command.gte() è¡¨ç¤ºå¤§äºç­‰äºï¼Œdb.command.lte() è¡¨ç¤ºå°äºç­‰äºã€‚</p><p>4.where æ¡ä»¶æ”¯æŒåµŒå¥—ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡åµŒå¥—çš„æ–¹å¼è¡¨ç¤ºå¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ age å­—æ®µå¤§äºç­‰äº 18 ä¸”å°äºç­‰äº 30ï¼Œä¸” (name å­—æ®µç­‰äºâ€œå¼ ä¸‰â€æˆ–è€… gender å­—æ®µç­‰äºâ€œå¥³â€) çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">age</span>: db.<span class="property">command</span>.<span class="title function_">and</span>(db.<span class="property">command</span>.<span class="title function_">gte</span>(<span class="number">18</span>), db.<span class="property">command</span>.<span class="title function_">lte</span>(<span class="number">30</span>)),</span><br><span class="line">  db.<span class="property">command</span>.<span class="title function_">or</span>([&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;å¥³&#x27;</span></span><br><span class="line">  &#125;])</span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.command.or() è¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»ï¼Œå¯ä»¥å°†å¤šä¸ªæ¡ä»¶ç”¨æ•°ç»„è¡¨ç¤ºã€‚</p><h2 id="5-4-è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹"><a href="#5-4-è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹" class="headerlink" title="5.4 è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹"></a>5.4 è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹</h2><h3 id="5-4-1-wx-cloud-callFunction"><a href="#5-4-1-wx-cloud-callFunction" class="headerlink" title="5.4.1 wx.cloud.callFunction"></a>5.4.1 wx.cloud.callFunction</h3><p><code>wx.cloud.callFunction</code> æ˜¯å¾®ä¿¡å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°çš„æ–¹æ³•ï¼Œå®ƒçš„å‚æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ul><li><code>name</code>ï¼šäº‘å‡½æ•°åç§°ï¼Œå¿…å¡«é¡¹ã€‚</li><li><code>data</code>ï¼šä¼ é€’ç»™äº‘å‡½æ•°çš„å‚æ•°ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>config</code>ï¼šé…ç½®é€‰é¡¹ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>success</code>ï¼šæˆåŠŸå›è°ƒå‡½æ•°ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>fail</code>ï¼šå¤±è´¥å›è°ƒå‡½æ•°ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>complete</code>ï¼šå®Œæˆå›è°ƒå‡½æ•°ï¼Œå¯é€‰é¡¹ã€‚</li></ul><p>å…¶ä¸­ï¼Œ<code>name</code> å‚æ•°æŒ‡å®šè¦è°ƒç”¨çš„äº‘å‡½æ•°çš„åç§°ï¼Œæ˜¯å¿…å¡«é¡¹ã€‚<code>data</code> å‚æ•°æ˜¯ä¼ é€’ç»™äº‘å‡½æ•°çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ç­‰ã€‚<code>config</code> å‚æ•°æ˜¯é…ç½®é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®è¶…æ—¶æ—¶é—´ã€ç¯å¢ƒ ID ç­‰ã€‚<code>success</code>ã€<code>fail</code> å’Œ <code>complete</code> å‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œåˆ†åˆ«åœ¨è°ƒç”¨æˆåŠŸã€è°ƒç”¨å¤±è´¥å’Œè°ƒç”¨å®Œæˆæ—¶æ‰§è¡Œã€‚</p><p>ğŸ“Œå…·ä½“æ¥è¯´ï¼Œ<code>config</code> å‚æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªé€‰é¡¹ï¼š</p><ul><li><code>env</code>ï¼šæŒ‡å®šäº‘ç¯å¢ƒ IDï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨å½“å‰å°ç¨‹åºçš„äº‘ç¯å¢ƒ IDã€‚</li><li><code>timeout</code>ï¼šè°ƒç”¨äº‘å‡½æ•°çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œé»˜è®¤ä¸º 3000 æ¯«ç§’ã€‚</li></ul><p>ğŸ“Œâ€‹<code>data</code>å‚æ•°å…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><code>action</code>ï¼šè¡¨ç¤ºè¦æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚<code>action: &#39;add&#39;</code>æˆ–è€…<code>action:&#39;delete&#39;</code>ç­‰ç­‰</li><li><code>data</code>ï¼šè¡¨ç¤ºè¦å¤„ç†çš„æ•°æ®ï¼Œä¾‹å¦‚ <code>&#123;name: &#39;å°æ˜&#39;, age: 18&#125;</code> è¡¨ç¤ºè¦æ·»åŠ çš„æ•°æ®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†åå­—å’Œå¹´é¾„ä¸¤ä¸ªå±æ€§ã€‚</li></ul><h3 id="5-4-2-äº‘å‡½æ•°"><a href="#5-4-2-äº‘å‡½æ•°" class="headerlink" title="5.4.2 äº‘å‡½æ•°"></a>5.4.2 äº‘å‡½æ•°</h3><p>å¾®ä¿¡å°ç¨‹åºä¸­çš„äº‘å‡½æ•°æ˜¯ä¸€ç§åœ¨äº‘ç«¯è¿è¡Œçš„ JavaScript ä»£ç ï¼Œå®ƒå¯ä»¥è¢«å°ç¨‹åºè°ƒç”¨ï¼Œç”¨äºå¤„ç†ä¸€äº›å¤æ‚çš„ä¸šåŠ¡é€»è¾‘æˆ–éœ€è¦è®¿é—®æ•æ„Ÿæ•°æ®çš„æ“ä½œã€‚ä¸ä¼ ç»Ÿçš„å®¢æˆ·ç«¯ä»£ç ä¸åŒï¼Œäº‘å‡½æ•°ä¸ä¼šè¢«æ‰“åŒ…åˆ°å°ç¨‹åºä¸­ï¼Œè€Œæ˜¯åœ¨äº‘ç«¯è¿è¡Œï¼Œå¯ä»¥åœ¨å¤šä¸ªå°ç¨‹åºä¸­å…±äº«ä½¿ç”¨ã€‚</p><p>é€šè¿‡äº‘å‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å°ç¨‹åºä¸­ä½¿ç”¨äº‘ç«¯æ•°æ®åº“ã€äº‘å­˜å‚¨ã€äº‘å‡½æ•°ç­‰äº‘æœåŠ¡ï¼Œå¹¶åœ¨äº‘ç«¯å®Œæˆæ•°æ®çš„å¢åˆ æŸ¥æ”¹ç­‰æ“ä½œã€‚äº‘å‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨äº‘æœåŠ¡ APIï¼Œä¹Ÿå¯ä»¥é€šè¿‡äº‘å‡½æ•° SDK æ¥è®¿é—®äº‘æœåŠ¡ã€‚</p><p>ä½¿ç”¨äº‘å‡½æ•°å¯ä»¥å°†ä¸€äº›å¤æ‚çš„è®¡ç®—ã€æ•°æ®å¤„ç†ã€ä¸šåŠ¡é€»è¾‘ç­‰æ“ä½œä»å®¢æˆ·ç«¯ç§»åŠ¨åˆ°äº‘ç«¯ï¼Œå‡è½»å®¢æˆ·ç«¯çš„è´Ÿæ‹…ï¼Œæé«˜å°ç¨‹åºçš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚åŒæ—¶ï¼Œäº‘å‡½æ•°çš„è¿è¡Œç¯å¢ƒæ˜¯åœ¨å¾®ä¿¡çš„å®‰å…¨æ²™ç®±ä¸­ï¼Œä¿è¯äº†ä»£ç çš„å®‰å…¨æ€§ï¼Œå¯ä»¥è®¿é—®å°ç¨‹åºçš„æ•æ„Ÿæ•°æ®è€Œä¸ä¼šæ³„éœ²ã€‚</p><p>ä½¿ç”¨äº‘å‡½æ•°éœ€è¦å…ˆåœ¨å°ç¨‹åºç®¡ç†åå°å¼€é€šäº‘å¼€å‘åŠŸèƒ½ï¼Œå¹¶åœ¨å¼€å‘å·¥å…·ä¸­åˆ›å»ºäº‘å‡½æ•°ã€‚ç„¶åï¼Œå¼€å‘è€…å¯ä»¥åœ¨äº‘å‡½æ•°ä¸­ç¼–å†™ JavaScript ä»£ç ï¼Œä½¿ç”¨äº‘å‡½æ•° SDK è®¿é—®äº‘æœåŠ¡ï¼Œæˆ–ç›´æ¥è°ƒç”¨äº‘æœåŠ¡ APIã€‚åœ¨å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°æ—¶ï¼Œå¯ä»¥ä¼ é€’å‚æ•°ç»™äº‘å‡½æ•°ï¼Œäº‘å‡½æ•°å¯ä»¥æ¥æ”¶å¹¶å¤„ç†å‚æ•°ï¼Œç„¶åè¿”å›ç»“æœç»™å°ç¨‹åºã€‚</p><p>åœ¨äº‘å‡½æ•°ä¸­ï¼Œå…¥å£å‡½æ•°çš„å‚æ•°åŒ…æ‹¬ <code>event</code> å’Œ <code>context</code> ä¸¤ä¸ªå‚æ•°ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨äº†å½“å‰äº‘å‡½æ•°è¢«è§¦å‘æ—¶çš„äº‹ä»¶å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ<code>event</code> å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«äº†äº‹ä»¶ä¿¡æ¯çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†è°ƒç”¨äº‘å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ï¼Œä¾‹å¦‚å°ç¨‹åºè°ƒç”¨äº‘å‡½æ•°æ—¶ä¼ é€’çš„ <code>data</code> å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>event</code> å‚æ•°æ¥è·å–ä¼ é€’çš„æ•°æ®ï¼Œç„¶åæ ¹æ®ä¸åŒçš„æ“ä½œè¿›è¡Œå¤„ç†ã€‚</p><p>è€Œ <code>context</code> å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«äº†ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†å½“å‰äº‘å‡½æ•°çš„ä¸€äº›å…ƒæ•°æ®ï¼Œä¾‹å¦‚æ‰€å±ç¯å¢ƒ IDã€å½“å‰æ—¶é—´æˆ³ã€è¯·æ±‚ ID ç­‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>context</code> å‚æ•°æ¥è·å–å½“å‰äº‘å‡½æ•°çš„ä¸€äº›å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚è·å–å½“å‰æ—¶é—´æˆ³ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªäº‘å‡½æ•°çš„å…¥å£å‡½æ•°ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(event) <span class="comment">// æ‰“å°ä¼ é€’çš„å‚æ•°</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(context) <span class="comment">// æ‰“å°ä¸Šä¸‹æ–‡ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> å¤„ç†ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>console.log</code> æ‰“å°äº† <code>event</code> å’Œ <code>context</code> ä¸¤ä¸ªå‚æ•°ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æ¥è·å–ä¼ é€’çš„æ•°æ®å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç„¶åæ ¹æ®ä¸åŒçš„æ“ä½œè¿›è¡Œå¤„ç†ã€‚</p><h3 id="5-4-3-ç¤ºä¾‹"><a href="#5-4-3-ç¤ºä¾‹" class="headerlink" title="5.4.3 ç¤ºä¾‹"></a>5.4.3 ç¤ºä¾‹</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¾®ä¿¡å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹çš„ä»£ç ç¤ºä¾‹ï¼š</p><ol><li>åœ¨å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨é¡µé¢ä¸­è°ƒç”¨äº‘å‡½æ•°</span></span><br><span class="line">wx.<span class="property">cloud</span>.<span class="title function_">callFunction</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;crud&#x27;</span>, <span class="comment">// äº‘å‡½æ•°åç§°</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">action</span>: <span class="string">&#x27;add&#x27;</span>, <span class="comment">// è¦æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚æ·»åŠ æ•°æ®</span></span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="comment">// è¦æ·»åŠ çš„æ•°æ®</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å°æ˜&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">result</span>) <span class="comment">// æ‰“å°äº‘å‡½æ•°è¿”å›çš„ç»“æœ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨äº‘å‡½æ•°ä¸­å¤„ç†æ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> cloud = <span class="built_in">require</span>(<span class="string">&#x27;wx-server-sdk&#x27;</span>)</span><br><span class="line">cloud.<span class="title function_">init</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = cloud.<span class="title function_">database</span>() <span class="comment">// è·å–æ•°æ®åº“å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‘å‡½æ•°å…¥å£å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> action = event.<span class="property">action</span> <span class="comment">// è·å–è¦æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line">  <span class="keyword">const</span> data = event.<span class="property">data</span> <span class="comment">// è·å–è¦å¤„ç†çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (action) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">addData</span>(data) <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;delete&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">deleteData</span>(data) <span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;update&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">updateData</span>(data) <span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;get&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">getData</span>(data) <span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;unknown action&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">addData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">deleteData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">doc</span>(data.<span class="property">_id</span>).<span class="title function_">remove</span>()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">doc</span>(data.<span class="property">_id</span>).<span class="title function_">update</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(data).<span class="title function_">get</span>()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°æ—¶ä¼ å…¥äº†è¦æ‰§è¡Œçš„æ“ä½œå’Œè¦å¤„ç†çš„æ•°æ®ï¼Œç„¶ååœ¨äº‘å‡½æ•°ä¸­æ ¹æ®ä¸åŒçš„æ“ä½œè¿›è¡Œå¢åˆ æŸ¥æ”¹çš„æ“ä½œï¼Œå¹¶è¿”å›æ“ä½œç»“æœã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹å’Œæ‰©å±•ã€‚</p><h2 id="5-5-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#5-5-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="5.5 æ¨¡ç³ŠæŸ¥è¯¢"></a>5.5 æ¨¡ç³ŠæŸ¥è¯¢</h2><h3 id="5-5-1-åŸºæœ¬åŸç†ä»£ç "><a href="#5-5-1-åŸºæœ¬åŸç†ä»£ç " class="headerlink" title="5.5.1 åŸºæœ¬åŸç†ä»£ç "></a>5.5.1 åŸºæœ¬åŸç†ä»£ç </h3><p><strong>å¾®ä¿¡å°ç¨‹åºæ¨¡ç³ŠæŸ¥è¯¢å¯ä»¥é€šè¿‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><ol><li>è·å–éœ€è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²å’ŒæŸ¥è¯¢çš„å…³é”®å­—ã€‚</li><li>æ„é€ æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†å…³é”®å­—è½¬åŒ–ä¸ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶æ·»åŠ æ¨¡ç³ŠåŒ¹é…ç¬¦å·ã€‚</li><li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ï¼Œè¿”å›åŒ¹é…ç»“æœã€‚</li></ol><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// è·å–éœ€è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²å’ŒæŸ¥è¯¢çš„å…³é”®å­—</span><br><span class="line">let str = &quot;hello world, hello everyone&quot;;</span><br><span class="line">let keyword = &quot;hello&quot;;</span><br><span class="line"></span><br><span class="line">// æ„é€ æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">let regStr = `.*$&#123;keyword&#125;.*`;</span><br><span class="line">let reg = new RegExp(regStr, &quot;g&quot;);</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…</span><br><span class="line">let result = str.match(reg);</span><br><span class="line"></span><br><span class="line">console.log(result); // [&quot;hello world&quot;, &quot;hello everyone&quot;]</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥å®ç°ç®€å•çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚å¿½ç•¥å¤§å°å†™ã€æ”¯æŒå¤šå…³é”®å­—æŸ¥è¯¢ç­‰ã€‚</p><h3 id="5-5-2-requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢"><a href="#5-5-2-requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="5.5.2 requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢"></a>5.5.2 requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢</h3><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://example.com/api/search&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">keyword</span>: <span class="string">&#x27;å…³é”®è¯&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œurl ä¸ºè¦è¯·æ±‚çš„æ¥å£åœ°å€ï¼Œmethod ä¸ºè¯·æ±‚æ–¹æ³•ï¼Œdata ä¸ºè¯·æ±‚å‚æ•°ï¼ŒåŒ…æ‹¬è¦åŒ¹é…çš„å…³é”®è¯ã€‚åœ¨æ¥å£çš„åç«¯ä»£ç ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼ä»¥ä¸‹çš„ä»£ç è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> keyword = req.<span class="property">query</span>.<span class="property">keyword</span>;</span><br><span class="line"><span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="title class_">RegExp</span>(keyword, <span class="string">&#x27;i&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> results = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;collectionName&#x27;</span>).<span class="title function_">where</span>(&#123; <span class="attr">name</span>: regex &#125;).<span class="title function_">get</span>();</span><br><span class="line">res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(results);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œreq.query.keyword ä¸ºå‰ç«¯ä¼ é€’çš„å…³é”®è¯ï¼Œregex ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œi è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œdb.collection(â€˜collectionNameâ€™) ä¸ºæ•°æ®åº“é›†åˆå¯¹è±¡ï¼Œname ä¸ºè¦åŒ¹é…çš„å­—æ®µåã€‚æœ€ç»ˆå°†æŸ¥è¯¢ç»“æœä»¥ JSON æ ¼å¼è¿”å›ç»™å‰ç«¯ã€‚</p><h3 id="5-5-3-äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢"><a href="#5-5-3-äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="5.5.3 äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢"></a>5.5.3 äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢</h3><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> db = wx.<span class="property">cloud</span>.<span class="title function_">database</span>();</span><br><span class="line"><span class="keyword">const</span> keyword = <span class="string">&#x27;å…³é”®è¯&#x27;</span>;</span><br><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;collectionName&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: db.<span class="title class_">RegExp</span>(&#123;</span><br><span class="line">    <span class="attr">regexp</span>: keyword,</span><br><span class="line">    <span class="attr">options</span>: <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).<span class="title function_">get</span>(&#123;</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.RegExp ä¸ºäº‘æ•°æ®åº“çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œregexp ä¸ºè¦åŒ¹é…çš„å…³é”®è¯ï¼Œoptions ä¸ºæ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹ï¼Œâ€™iâ€™ è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ã€‚æœ€ç»ˆå°†æŸ¥è¯¢ç»“æœä»¥ JSON æ ¼å¼è¿”å›ç»™å‰ç«¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåŸºæœ¬è¾“å‡ºæ–¹æ³•æ€»ç»“</title>
      <link href="/2023/05/09/python%E5%9F%BA%E6%9C%AC%E8%BE%93%E5%87%BA%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/"/>
      <url>/2023/05/09/python%E5%9F%BA%E6%9C%AC%E8%BE%93%E5%87%BA%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/16.jpg" style="border-radius:10px" width="1000px"></img></p><div class="tag link"><a class="link-card" title="Pythonå®˜æ–¹æ•™ç¨‹" href="https://docs.python.org/zh-cn/3/tutorial/index.html"><div class="left"><img src="https://docs.python.org/zh-cn/3/_static/py.svg"/></div><div class="right"><p class="text">Pythonå®˜æ–¹æ•™ç¨‹</p><p class="url">https://docs.python.org/zh-cn/3/tutorial/index.html</p></div></a></div><h2 id="ä¸€ã€print-å‡½æ•°åŸºæœ¬è¾“å‡º"><a href="#ä¸€ã€print-å‡½æ•°åŸºæœ¬è¾“å‡º" class="headerlink" title="ä¸€ã€print()å‡½æ•°åŸºæœ¬è¾“å‡º"></a>ä¸€ã€print()å‡½æ•°åŸºæœ¬è¾“å‡º</h2><h3 id="1-1-print-å‡½æ•°åŸºæœ¬ç”¨æ³•"><a href="#1-1-print-å‡½æ•°åŸºæœ¬ç”¨æ³•" class="headerlink" title="1.1 print()å‡½æ•°åŸºæœ¬ç”¨æ³•"></a>1.1 print()å‡½æ•°åŸºæœ¬ç”¨æ³•</h3><p>è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(*objects, sep=<span class="string">&#x27; &#x27;</span>, end=<span class="string">&#x27;\n&#x27;</span>, file=sys.stdout)</span><br></pre></td></tr></table></figure><p>å‚æ•°å«ä¹‰ï¼š</p><p>objects â€“è¡¨ç¤ºè¾“å‡ºçš„å¯¹è±¡ã€‚è¾“å‡ºå¤šä¸ªå¯¹è±¡æ—¶ï¼Œéœ€è¦ç”¨ , ï¼ˆé€—å·ï¼‰åˆ†éš”ï¼Œå¦‚æœç›´æ¥è¾“å…¥å¤šä¸ªå­—ç¬¦ä¸²åˆ™å¯ä»¥ä¸éœ€è¦ç”¨é€—å·è¿æ¥ã€‚</p><p>sep â€“ ç”¨æ¥é—´éš”å¤šä¸ªå¯¹è±¡ã€‚</p><p>end â€“ ç”¨æ¥è®¾å®šä»¥ä»€ä¹ˆç»“å°¾ã€‚é»˜è®¤å€¼æ˜¯æ¢è¡Œç¬¦ \nï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆå…¶ä»–å­—ç¬¦ã€‚</p><p>file â€“ è¦å†™å…¥çš„æ–‡ä»¶å¯¹è±¡ã€‚</p><h3 id="1-2-print-å‡½æ•°æ ¼å¼åŒ–è¾“å‡º"><a href="#1-2-print-å‡½æ•°æ ¼å¼åŒ–è¾“å‡º" class="headerlink" title="1.2 print()å‡½æ•°æ ¼å¼åŒ–è¾“å‡º"></a>1.2 print()å‡½æ•°æ ¼å¼åŒ–è¾“å‡º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%[-][+][0][m][n]%</span><br><span class="line"># å…·ä½“å«ä¹‰è§ä¸‹å›¾</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/Python/4.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/Python/5.png" alt="2"></p><p>å¦‚æœéœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­é€šè¿‡æ ¼å¼åŒ–å­—ç¬¦è¾“å‡ºå¤šä¸ªå€¼ï¼Œåˆ™å°†æ¯ä¸ªå¯¹åº”å€¼å­˜æ”¾åœ¨ä¸€å¯¹åœ†æ‹¬å·()ä¸­ï¼Œå€¼ä¸å€¼ä¹‹é—´ä½¿ç”¨è‹±æ–‡é€—å·éš”å¼€ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;å°æ¸”å¤´&quot;</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;%så·²ç»%däº†&#x27;</span> % (a, b))   <span class="comment"># å°æ¸”å¤´å·²ç»20äº†</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€æ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢å€¼ã€f-å­—ç¬¦ä¸²ã€‘"><a href="#äºŒã€æ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢å€¼ã€f-å­—ç¬¦ä¸²ã€‘" class="headerlink" title="äºŒã€æ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢å€¼ã€f-å­—ç¬¦ä¸²ã€‘"></a>äºŒã€æ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢å€¼ã€f-å­—ç¬¦ä¸²ã€‘</h2><p>åœ¨å­—ç¬¦ä¸²å‰é¢åŠ <code>f</code>æˆ–è€…<code>F</code>ï¼Œé€šè¿‡<code>&#123;expression&#125;</code>è¡¨è¾¾å¼ã€åŒ…æ‹¬å˜é‡å’Œè¡¨è¾¾å¼ã€‘ï¼ŒæŠŠpythonè¡¨è¾¾å¼çš„å€¼æ·»åŠ åˆ°å­—ç¬¦ä¸²å†…ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;å°æ¸”å¤´&quot;</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;æˆ‘æ˜¯<span class="subst">&#123;a&#125;</span>ï¼Œå·²ç»<span class="subst">&#123;b&#125;</span>äº†&#x27;</span>)   <span class="comment"># æˆ‘æ˜¯å°æ¸”å¤´ï¼Œå·²ç»20äº†</span></span><br></pre></td></tr></table></figure><p>f-å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨å„ç§æ ¼å¼åŒ–é€‰é¡¹ï¼Œä¾‹å¦‚æŒ‡å®šè¾“å‡ºå®½åº¦ã€ç²¾åº¦ã€å¯¹é½æ–¹å¼ç­‰ç­‰ï¼Œå†™åœ¨è¡¨è¾¾å¼çš„åé¢ï¼Œåœ¨<code>:</code>åä¼ é€’å‚æ•°ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi = <span class="number">3.1415926</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;The value of pi is approximately <span class="subst">&#123;pi:<span class="number">.2</span>f&#125;</span>.&#x27;</span>)<span class="comment"># The value of pi is approximately 3.14.</span></span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›ä¿®é¥°ç¬¦å¯ä»¥åœ¨æ ¼å¼åŒ–å‰è½¬æ¢å€¼ã€‚ <code>&#39;!a&#39;</code> åº”ç”¨ <a href="https://docs.python.org/zh-cn/3/library/functions.html#ascii"><code>ascii()</code></a> ï¼Œ<code>&#39;!s&#39;</code> åº”ç”¨ <a href="https://docs.python.org/zh-cn/3/library/stdtypes.html#str"><code>str()</code></a>ï¼Œ<code>&#39;!r&#39;</code> åº”ç”¨ <a href="https://docs.python.org/zh-cn/3/library/functions.html#repr"><code>repr()</code></a>ï¼š</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;A&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;æˆ‘æ˜¯<span class="subst">&#123;a&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;æˆ‘æ˜¯<span class="subst">&#123;a!r&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨ f-å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ &#x3D; å·è¯´æ˜ç¬¦ï¼Œå¯ä»¥å°†è¡¨è¾¾å¼å±•å¼€ä¸ºè¡¨è¾¾å¼çš„æ–‡æœ¬ï¼Œç­‰å·ï¼Œç„¶åæ˜¯æ±‚å€¼è¡¨è¾¾å¼çš„è¡¨ç¤ºå½¢å¼ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨äºè°ƒè¯•å’Œç†è§£ä»£ç ä¸­çš„è¡¨è¾¾å¼ã€‚è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç‰¹æ€§ï¼Œä» Python 3.8 å¼€å§‹å¼•å…¥ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="number">20</span></span><br><span class="line">c = <span class="string">f&quot;<span class="subst">&#123;a&#125;</span> + <span class="subst">&#123;b&#125;</span> = <span class="subst">&#123;a+b&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(c)  <span class="comment"># è¾“å‡ºï¼š10 + 20 = 30</span></span><br><span class="line"></span><br><span class="line">d = <span class="string">f&quot;<span class="subst">&#123;a=&#125;</span> <span class="subst">&#123;b=&#125;</span> <span class="subst">&#123;a+b=&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(d)  <span class="comment"># è¾“å‡ºï¼ša=10 b=20 a+b=30</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ª f-å­—ç¬¦ä¸²ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¸¸è§„çš„å­—ç¬¦ä¸²æ’å€¼æ–¹å¼ï¼Œå°† a å’Œ b çš„å€¼æ’å…¥åˆ°å­—ç¬¦ä¸²ä¸­ã€‚åœ¨ç¬¬äºŒä¸ª f-å­—ç¬¦ä¸²ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† &#x3D; å·è¯´æ˜ç¬¦ï¼Œå°†è¡¨è¾¾å¼å±•å¼€ä¸ºè¡¨è¾¾å¼çš„æ–‡æœ¬ï¼Œç­‰å·ï¼Œç„¶åæ˜¯æ±‚å€¼è¡¨è¾¾å¼çš„è¡¨ç¤ºå½¢å¼ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåœ°æŸ¥çœ‹è¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°è°ƒè¯•ä»£ç ã€‚</p><h2 id="ä¸‰ã€å­—ç¬¦ä¸²-format-æ–¹æ³•"><a href="#ä¸‰ã€å­—ç¬¦ä¸²-format-æ–¹æ³•" class="headerlink" title="ä¸‰ã€å­—ç¬¦ä¸² format() æ–¹æ³•"></a>ä¸‰ã€å­—ç¬¦ä¸² format() æ–¹æ³•</h2><p><code>str.format()</code></p><h3 id="3-1-åŸºæœ¬ç”¨æ³•"><a href="#3-1-åŸºæœ¬ç”¨æ³•" class="headerlink" title="3.1 åŸºæœ¬ç”¨æ³•"></a>3.1 åŸºæœ¬ç”¨æ³•</h3><ol><li><p>åŸºæœ¬ç”¨æ³•ï¼š</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æˆ‘æ˜¯&#123;&#125;ï¼Œä»Šå¹´&#123;&#125;äº†&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;å°æ¸”å¤´&#x27;</span>,<span class="number">20</span>))    <span class="comment"># æˆ‘æ˜¯å°æ¸”å¤´ï¼Œä»Šå¹´20äº†</span></span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®ä½ç½®å¡«å……</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æˆ‘æ˜¯&#123;0&#125;ï¼Œä»Šå¹´&#123;1&#125;äº†&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;å°æ¸”å¤´&#x27;</span>,<span class="number">20</span>))    <span class="comment"># æˆ‘æ˜¯å°æ¸”å¤´ï¼Œä»Šå¹´20äº†</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æˆ‘æ˜¯&#123;1&#125;ï¼Œä»Šå¹´&#123;0&#125;äº†&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;å°æ¸”å¤´&#x27;</span>,<span class="number">20</span>))    <span class="comment"># æˆ‘æ˜¯20ï¼Œä»Šå¹´å°æ¸”å¤´äº†</span></span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®å…³é”®å­—å¡«å……</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æˆ‘æ˜¯&#123;name&#125;ï¼Œä»Šå¹´&#123;age&#125;äº†&#x27;</span>.<span class="built_in">format</span>(name=<span class="string">&#x27;å°æ¸”å¤´&#x27;</span>,age=<span class="number">20</span>))    <span class="comment"># æˆ‘æ˜¯å°æ¸”å¤´ï¼Œä»Šå¹´20äº†</span></span><br></pre></td></tr></table></figure></li><li><p>ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°å¯ä»¥ä»»æ„ç»„åˆ</p></li><li><p>æ ¹æ®å­—å…¸å¡«å……</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;â€˜objâ€™:â€™worldâ€™,â€™nameâ€™:â€™pythonâ€™&#125; </span><br><span class="line"><span class="built_in">print</span>(â€˜hello &#123;names[obj]&#125; i am &#123;names[name]&#125;â€™.<span class="built_in">format</span>(names=<span class="built_in">dict</span>)) </span><br><span class="line"><span class="comment"># hello world i am python </span></span><br><span class="line"><span class="comment"># æ³¨æ„è®¿é—®å­—å…¸çš„keyï¼Œä¸ç”¨å¼•å·çš„</span></span><br></pre></td></tr></table></figure><p> å¦‚æœä¸æƒ³åˆ†æ‹†è¾ƒé•¿çš„æ ¼å¼å­—ç¬¦ä¸²ï¼Œæœ€å¥½æŒ‰åç§°å¼•ç”¨å˜é‡è¿›è¡Œæ ¼å¼åŒ–ï¼Œä¸è¦æŒ‰ä½ç½®ã€‚è¿™é¡¹æ“ä½œå¯ä»¥é€šè¿‡ä¼ é€’å­—å…¸ï¼Œå¹¶ç”¨æ–¹æ‹¬å· <code>&#39;[]&#39;</code> è®¿é—®é”®æ¥å®Œæˆã€‚</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">table = &#123;<span class="string">&#x27;Sjoerd&#x27;</span>: <span class="number">4127</span>, <span class="string">&#x27;Jack&#x27;</span>: <span class="number">4098</span>, <span class="string">&#x27;Dcab&#x27;</span>: <span class="number">8637678</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Jack: &#123;0[Jack]:d&#125;; Sjoerd: &#123;0[Sjoerd]:d&#125;; &#x27;</span></span><br><span class="line">      <span class="string">&#x27;Dcab: &#123;0[Dcab]:d&#125;&#x27;</span>.<span class="built_in">format</span>(table))</span><br><span class="line"><span class="comment"># Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span></span><br></pre></td></tr></table></figure><p> è¿™ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨**ç¬¦å·å°†è¡¨å­—å…¸ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ é€’æ¥å®ç°ã€‚</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">table = &#123;<span class="string">&#x27;Sjoerd&#x27;</span>: <span class="number">4127</span>, <span class="string">&#x27;Jack&#x27;</span>: <span class="number">4098</span>, <span class="string">&#x27;Dcab&#x27;</span>: <span class="number">8637678</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Jack: &#123;Jack:d&#125;; Sjoerd: &#123;Sjoerd:d&#125;; Dcab: &#123;Dcab:d&#125;&#x27;</span>.<span class="built_in">format</span>(**table))</span><br><span class="line"><span class="comment"># Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span></span><br></pre></td></tr></table></figure><p> â€œdâ€åœ¨è¿™é‡Œè¡¨ç¤ºå°†å€¼æ ¼å¼åŒ–ä¸ºåè¿›åˆ¶æ•´æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒå‘Šè¯‰Pythonå°†æ¯ä¸ªé”®çš„å€¼è½¬æ¢ä¸ºåè¿›åˆ¶æ•´æ•°ï¼Œå¹¶å°†å®ƒä»¬æ’å…¥åˆ°æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„ç›¸åº”ä½ç½®ä¸­ã€‚</p></li><li><p>é€šè¿‡åˆ—è¡¨å¡«å……</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>=[<span class="string">&#x27;world&#x27;</span>,<span class="string">&#x27;python&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello &#123;names[0]&#125;  i am &#123;names[1]&#125;&#x27;</span>.<span class="built_in">format</span>(names=<span class="built_in">list</span>))</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœï¼šhello world  i am python</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello &#123;0[0]&#125;  i am &#123;0[1]&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">list</span>)) </span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœï¼šhello world  i am python</span></span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡ç±»çš„å±æ€§å¡«å……</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Names</span>():</span><br><span class="line">    obj=<span class="string">&#x27;world&#x27;</span></span><br><span class="line">    name=<span class="string">&#x27;python&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello &#123;names.obj&#125; i am &#123;names.name&#125;&#x27;</span>.<span class="built_in">format</span>(names=Names))</span><br><span class="line"><span class="comment"># è¾“å…¥ç»“æœhello world i am python</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="3-2-æ ¼å¼åŒ–"><a href="#3-2-æ ¼å¼åŒ–" class="headerlink" title="3.2 æ ¼å¼åŒ–"></a>3.2 æ ¼å¼åŒ–</h3><ol><li><p>å¡«å……å’Œå¯¹é½å­—ç¬¦ä¸²</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:^10&#125;&quot;</span>.<span class="built_in">format</span>(text))    <span class="comment">#   Hello</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:0^10&#125;&quot;</span>.<span class="built_in">format</span>(text))   <span class="comment"># 00Hello000</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:0&gt;10&#125;&quot;</span>.<span class="built_in">format</span>(text))   <span class="comment"># 00000Hello</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:0&lt;10&#125;&quot;</span>.<span class="built_in">format</span>(text))   <span class="comment"># Hello00000</span></span><br></pre></td></tr></table></figure><p> ä½¿ç”¨{}åŒ…è£¹éœ€è¦æ ¼å¼åŒ–çš„å˜é‡ï¼Œç„¶ååœ¨å¤§æ‹¬å·ä¸­ä½¿ç”¨å†’å·:æ¥æ·»åŠ æ ¼å¼åŒ–é€‰é¡¹ã€‚å…¶ä¸­0è¡¨ç¤ºå¡«å……å­—ç¬¦ï¼Œä¸å¡«åˆ™è¡¨ç¤ºç©ºæ ¼ã€‚</p><p> <code>^</code>è¡¨ç¤ºå±…ä¸­å¯¹é½</p><p> <code>&gt;</code>è¡¨ç¤ºå³å¯¹é½</p><p> <code>&lt;</code>è¡¨ç¤ºå·¦å¯¹é½</p><p> å®½åº¦ä¸ºåä¸ªå­—ç¬¦</p></li><li><p>æ ¼å¼åŒ–æ•°å­—</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">price = <span class="number">19.99</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The price is $&#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(price))</span><br><span class="line"><span class="comment"># The price is $19.99</span></span><br></pre></td></tr></table></figure></li><li><p>æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">now = datetime.datetime.now()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Today is &#123;&#125;&quot;</span>.<span class="built_in">format</span>(now.strftime(<span class="string">&quot;%Y-%m-%d&quot;</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The time is &#123;&#125;&quot;</span>.<span class="built_in">format</span>(now.strftime(<span class="string">&quot;%H:%M:%S&quot;</span>)))</span><br><span class="line"><span class="comment"># Today is 2021-09-23</span></span><br><span class="line"><span class="comment"># The time is 16:05:23</span></span><br></pre></td></tr></table></figure><p> å…¶ä¸­ï¼Œ%Yè¡¨ç¤ºå¹´ä»½ï¼Œ%mè¡¨ç¤ºæœˆä»½ï¼Œ%dè¡¨ç¤ºæ—¥æœŸï¼Œ%Hè¡¨ç¤ºå°æ—¶ï¼Œ%Mè¡¨ç¤ºåˆ†é’Ÿï¼Œ%Sè¡¨ç¤ºç§’æ•°ã€‚strftime()æ–¹æ³•å°†æ—¥æœŸå’Œæ—¶é—´å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p></li><li><p>æ ¼å¼åŒ–è¿›åˆ¶<br> è¾“å…¥ä¸€è¡Œå­—ç¬¦ä¸²ï¼Œå»æ‰é16è¿›åˆ¶å­—ç¬¦ï¼Œå°†å®ƒè½¬æ¢æˆ16ã€10ã€8ã€2è¿›åˆ¶æ•°ï¼Œè¾“å‡ºã€‚</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">input</span>()  <span class="comment"># è¾“å…¥å­—ç¬¦ä¸²</span></span><br><span class="line">s = <span class="string">&#x27;&#x27;</span>.join(c <span class="keyword">for</span> c <span class="keyword">in</span> s <span class="keyword">if</span> c <span class="keyword">in</span> <span class="string">&#x27;0123456789abcdefABCDEF&#x27;</span>)  <span class="comment"># ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼å»æ‰å­—ç¬¦ä¸²ä¸­é16è¿›åˆ¶å­—ç¬¦ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°å­—ç¬¦ä¸²</span></span><br><span class="line">n = <span class="built_in">int</span>(s, <span class="number">16</span>)  <span class="comment"># è½¬æ¢æˆ10è¿›åˆ¶æ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;:x&#125; &#123;:d&#125; &#123;:o&#125; &#123;:b&#125;&#x27;</span>.<span class="built_in">format</span>(n, n, n, n))  <span class="comment"># è¾“å‡º16è¿›åˆ¶ã€10è¿›åˆ¶ã€8è¿›åˆ¶ã€2è¿›åˆ¶æ•°</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå†…ç½®å‡½æ•°ä½¿ç”¨æ–¹æ³•</title>
      <link href="/2023/05/08/python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
      <url>/2023/05/08/python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/article_img/Python/1.jpg" style="border-radius:10px" width="1000px"></img></p><div class="tag link"><a class="link-card" title="Pythonå®˜æ–¹æ•™ç¨‹" href="https://docs.python.org/zh-cn/3/library/functions.html"><div class="left"><img src="https://docs.python.org/zh-cn/3/_static/py.svg"/></div><div class="right"><p class="text">Pythonå®˜æ–¹æ•™ç¨‹</p><p class="url">https://docs.python.org/zh-cn/3/library/functions.html</p></div></a></div><h2 id="A"><a href="#A" class="headerlink" title="A"></a>A</h2><div class="tabs" id="a"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#a-1">abs()</button></li><li class="tab"><button type="button" data-href="#a-2">aiter()</button></li><li class="tab"><button type="button" data-href="#a-3">all()</button></li><li class="tab"><button type="button" data-href="#a-4">any()</button></li><li class="tab"><button type="button" data-href="#a-5">anext()</button></li><li class="tab"><button type="button" data-href="#a-6">ascii()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="a-1"><p><code>abs(x)</code></p><p><strong>ä»‹ç»ï¼š</strong>è¿”å›ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼ï¼Œå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œå¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªå¤æ•°ï¼Œåˆ™è¿”å›å¤æ•°çš„æ¨¡ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">abs</span>(-<span class="number">2</span>))  // <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">abs</span>(<span class="built_in">complex</span>(<span class="number">3</span>,<span class="number">4</span>)))    // <span class="number">5.0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a-3"><p><code>all(iterable)</code></p><p><strong>ä»‹ç»ï¼š</strong>å¦‚æœ <em>iterable</em> çš„æ‰€æœ‰å…ƒç´ å‡ä¸ºçœŸå€¼ï¼ˆæˆ–å¯è¿­ä»£å¯¹è±¡ä¸ºç©ºï¼‰åˆ™è¿”å› <code>True</code> ã€‚</p><p><strong>ä½œç”¨ï¼š</strong>ç”¨äºåˆ¤æ–­ç»™å®šçš„å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸ºçœŸã€‚</p><p><strong>ç­‰ä»·ä»£ç ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">all</span>(<span class="params">iterable</span>):</span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> element:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ¤æ–­åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸ºçœŸ</span></span><br><span class="line">my_list = [<span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">True</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">all</span>(my_list))  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­å…ƒç»„ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸ºçœŸ</span></span><br><span class="line">my_tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">all</span>(my_tuple))  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­é›†åˆä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸ºçœŸ</span></span><br><span class="line">my_set = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">all</span>(my_set))  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­å­—å…¸ä¸­æ‰€æœ‰å€¼æ˜¯å¦éƒ½ä¸ºçœŸ</span></span><br><span class="line">my_dict = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;b&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;c&#x27;</span>: <span class="literal">True</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">all</span>(my_dict.values()))  <span class="comment"># False</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a-4"><p><code>any(iterable)</code></p><p><strong>ä»‹ç»ï¼š</strong>å¦‚æœ <em>iterable</em> çš„ä»»ä¸€å…ƒç´ ä¸ºçœŸå€¼åˆ™è¿”å› <code>True</code>ã€‚ å¦‚æœå¯è¿­ä»£å¯¹è±¡ä¸ºç©ºï¼Œè¿”å› <code>False</code>ã€‚</p><p><strong>ä½œç”¨ï¼š</strong>ç”¨äºåˆ¤æ–­ç»™å®šçš„å¯è¿­ä»£å¯¹è±¡ä¸­æ˜¯å¦æœ‰ä»»ä½•ä¸€ä¸ªå…ƒç´ ä¸ºçœŸã€‚</p><p><strong>ç­‰ä»·ä»£ç ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">any</span>(<span class="params">iterable</span>):</span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> element:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ¤æ–­åˆ—è¡¨ä¸­æ˜¯å¦æœ‰ä»»ä½•ä¸€ä¸ªå…ƒç´ ä¸ºçœŸ</span></span><br><span class="line">my_list = [<span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">True</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">any</span>(my_list))  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­å…ƒç»„ä¸­æ˜¯å¦æœ‰ä»»ä½•ä¸€ä¸ªå…ƒç´ ä¸ºçœŸ</span></span><br><span class="line">my_tuple = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">any</span>(my_tuple))  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰ä»»ä½•ä¸€ä¸ªå…ƒç´ ä¸ºçœŸ</span></span><br><span class="line">my_set = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">any</span>(my_set))  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦æœ‰ä»»ä½•å€¼ä¸ºçœŸ</span></span><br><span class="line">my_dict = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;b&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;c&#x27;</span>: <span class="literal">True</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">any</span>(my_dict.values()))  <span class="comment"># True</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a-6"><p><code>ascii(object)</code></p><p><strong>ä»‹ç»ï¼š</strong>è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…å«äº†<code>object</code>è½¬æ¢ä¸ºASCIIç è¡¨ç¤ºçš„ç»“æœã€‚ä¸ <a href="https://docs.python.org/zh-cn/3/library/functions.html#repr"><code>repr()</code></a> ç±»ä¼¼ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå¯¹è±¡çš„å¯æ‰“å°å½¢å¼ï¼Œä½†åœ¨ <a href="https://docs.python.org/zh-cn/3/library/functions.html#repr"><code>repr()</code></a> è¿”å›çš„å­—ç¬¦ä¸²ä¸­ï¼Œé ASCII å­—ç¬¦ä¼šç”¨ <code>\x</code>ã€<code>\u</code> å’Œ <code>\U</code> è¿›è¡Œè½¬ä¹‰ã€‚ç”Ÿæˆçš„å­—ç¬¦ä¸²ç±»ä¼¼äº Python 2 ä¸­ <a href="https://docs.python.org/zh-cn/3/library/functions.html#repr"><code>repr()</code></a> çš„è¿”å›ç»“æœã€‚</p><p><strong>ä½œç”¨ï¼š</strong>ç”¨äºå°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºASCIIç è¡¨ç¤ºçš„å­—ç¬¦ä¸²ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ascii</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="string">&quot;&#x27;hello&#x27;&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ascii</span>(<span class="string">&#x27;ä½ å¥½&#x27;</span>)</span><br><span class="line"><span class="string">&quot;&#x27;\\u4f60\\u597d&#x27;&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ascii</span>(<span class="string">&#x27;hello, ä½ å¥½&#x27;</span>)</span><br><span class="line"><span class="string">&quot;&#x27;hello, \\u4f60\\u597d&#x27;&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ascii</span>([<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>])</span><br><span class="line"><span class="string">&quot;[&#x27;hello&#x27;, &#x27;world&#x27;]&quot;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="B"><a href="#B" class="headerlink" title="B"></a>B</h2><div class="tabs" id="b"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#b-1">bin()</button></li><li class="tab"><button type="button" data-href="#b-2">bool()</button></li><li class="tab"><button type="button" data-href="#b-3">breakpoint()</button></li><li class="tab"><button type="button" data-href="#b-4">bytearray()</button></li><li class="tab"><button type="button" data-href="#b-5">bytes()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="b-1"><p><strong>ä»‹ç»ï¼š</strong>å°†æ•´æ•°è½¬å˜ä¸ºä»¥â€œ0bâ€å‰ç¼€çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ç»“æœæ˜¯ä¸€ä¸ªåˆæ³•çš„ Python è¡¨è¾¾å¼ã€‚å¦‚æœ <em>x</em> ä¸æ˜¯ Python çš„ <a href="https://docs.python.org/zh-cn/3/library/functions.html#int"><code>int</code></a> å¯¹è±¡ï¼Œå®ƒå¿…é¡»å®šä¹‰ <code>__index__()</code> æ–¹æ³•ï¼Œä»¥ä¾¿è¿”å›æ•´æ•°å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bin</span>(<span class="number">3</span>)</span><br><span class="line"><span class="string">&#x27;0b11&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bin</span>(-<span class="number">10</span>)</span><br><span class="line"><span class="string">&#x27;-0b1010&#x27;</span></span><br></pre></td></tr></table></figure><p>è‹¥è¦æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå‰ç¼€â€œ0bâ€ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">format</span>(<span class="number">14</span>, <span class="string">&#x27;#b&#x27;</span>), <span class="built_in">format</span>(<span class="number">14</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;0b1110&#x27;</span>, <span class="string">&#x27;1110&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&#x27;<span class="subst">&#123;<span class="number">14</span>:#b&#125;</span>&#x27;</span>, <span class="string">f&#x27;<span class="subst">&#123;<span class="number">14</span>:b&#125;</span>&#x27;</span></span><br><span class="line">(<span class="string">&#x27;0b1110&#x27;</span>, <span class="string">&#x27;1110&#x27;</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="b-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="b-3"><p><code>breakpoint</code></p><p><strong>ä»‹ç»ï¼š</strong>æ˜¯ä¸€ä¸ªç”¨äºè°ƒè¯•çš„å†…ç½®å‡½æ•°ï¼Œå®ƒå¯ä»¥åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ï¼Œä½¿ç¨‹åºåœ¨æ‰§è¡Œåˆ°è¯¥æ–­ç‚¹æ—¶æš‚åœï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ç¨‹åºçŠ¶æ€å’Œå˜é‡å€¼ã€‚</p><p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong>åœ¨ä»£ç ä¸­ä»»æ„ä¸€è¡Œè°ƒç”¨breakpoint()å‡½æ•°å³å¯è®¾ç½®æ–­ç‚¹ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">breakpoint</span>()</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">foo(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><p>å½“ç¨‹åºæ‰§è¡Œåˆ°breakpoint()æ—¶ï¼Œä¼šè‡ªåŠ¨æš‚åœï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥å‘½ä»¤è¿›è¡Œè°ƒè¯•ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="b-4"><p><code>class bytearray(source=b&#39;&#39;)</code></p><p><code>class bytearray(source,encoding)</code></p><p><code>class bytearray(source,encoding,errors)</code></p><p>bytearrayæ˜¯Pythonä¸­çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯å˜çš„å­—èŠ‚æ•°ç»„å¯¹è±¡ã€‚bytearrayå¯¹è±¡çš„å…ƒç´ æ˜¯0-255ä¹‹é—´çš„æ•´æ•°ï¼ˆå³å­—èŠ‚ï¼‰ï¼Œå¯ä»¥ç”¨ç´¢å¼•è®¿é—®å’Œä¿®æ”¹ã€‚</p><p>bytearray()å‡½æ•°å¯ä»¥æ¥å—ä¸åŒçš„å‚æ•°ï¼š</p><ol><li><p>å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„å­—èŠ‚æ•°ç»„å¯¹è±¡ã€‚</p></li><li><p>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°nï¼Œåˆ™è¿”å›ä¸€ä¸ªé•¿åº¦ä¸ºnçš„å­—èŠ‚æ•°ç»„å¯¹è±¡ï¼Œæ¯ä¸ªå…ƒç´ çš„å€¼ä¸º0ã€‚</p></li><li><p>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚å­—ç¬¦ä¸²æˆ–åˆ—è¡¨ï¼Œåˆ™è¿”å›ä¸€ä¸ªåŒ…å«è¯¥å¯è¿­ä»£å¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ çš„å­—èŠ‚æ•°ç»„å¯¹è±¡ã€‚å­—ç¬¦ä¸²å¿…é¡»æä¾›encodingå‚æ•°ã€‚</p></li></ol><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">arr = <span class="built_in">bytearray</span>() <span class="comment"># è¿”å›ä¸€ä¸ªç©ºçš„å­—èŠ‚æ•°ç»„å¯¹è±¡</span></span><br><span class="line">arr.append(<span class="number">97</span>) <span class="comment"># åœ¨å­—èŠ‚æ•°ç»„çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå­—èŠ‚ï¼Œå€¼ä¸º97ï¼ˆå³å­—ç¬¦&#x27;a&#x27;çš„ASCIIç ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(arr) <span class="comment"># è¾“å‡ºï¼šbytearray(b&#x27;a&#x27;)</span></span><br><span class="line"></span><br><span class="line">arr = <span class="built_in">bytearray</span>(<span class="number">5</span>) <span class="comment"># è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º5çš„å­—èŠ‚æ•°ç»„å¯¹è±¡ï¼Œæ¯ä¸ªå…ƒç´ çš„å€¼ä¸º0</span></span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">65</span> <span class="comment"># ä¿®æ”¹ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ä¸º65ï¼ˆå³å­—ç¬¦&#x27;A&#x27;çš„ASCIIç ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(arr) <span class="comment"># è¾“å‡ºï¼šbytearray(b&#x27;A\x00\x00\x00\x00&#x27;)</span></span><br><span class="line"></span><br><span class="line">arr = <span class="built_in">bytearray</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;utf-8&quot;</span>) <span class="comment"># è¿”å›ä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²&quot;hello&quot;ä¸­æ‰€æœ‰å­—ç¬¦çš„å­—èŠ‚æ•°ç»„å¯¹è±¡</span></span><br><span class="line"><span class="built_in">print</span>(arr) <span class="comment"># è¾“å‡ºï¼šbytearray(b&#x27;hello&#x27;)</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œbytearrayå¯¹è±¡æ˜¯å¯å˜çš„ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•å’Œåˆ‡ç‰‡è®¿é—®å’Œä¿®æ”¹å…¶ä¸­çš„å…ƒç´ ã€‚åŒæ—¶ï¼Œbytearrayå¯¹è±¡ä¹Ÿæ”¯æŒå¤§éƒ¨åˆ†åˆ—è¡¨çš„æ–¹æ³•ï¼Œå¦‚appendã€extendã€insertç­‰ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="b-5"><p><code>class bytes(source=b&#39;&#39;)</code></p><p><code>class bytes(source,encoding)</code></p><p><code>class bytes(source,encoding,errors)</code></p><p>å½“<code>source</code>æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥æŒ‡å®š<code>encoding</code>å‚æ•°æ¥æŒ‡å®šå­—ç¬¦ä¸²çš„ç¼–ç æ–¹å¼ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤ä¸º<code>&#39;utf-8&#39;</code>ã€‚å¦‚æœ<code>source</code>æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ã€‚å¦‚æœ<code>source</code>æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œåˆ™å°†å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ï¼Œå¹¶å°†ç»“æœåˆå¹¶ä¸ºä¸€ä¸ªå­—èŠ‚åºåˆ—ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—</span></span><br><span class="line">b = <span class="built_in">bytes</span>(<span class="string">&quot;hello&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(b)  <span class="comment"># b&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ•°å€¼è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—</span></span><br><span class="line">b = <span class="built_in">bytes</span>([<span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>])</span><br><span class="line"><span class="built_in">print</span>(b)  <span class="comment"># b&#x27;ABC&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—</span></span><br><span class="line">b = <span class="built_in">bytes</span>([<span class="number">104</span>, <span class="number">101</span>, <span class="number">108</span>, <span class="number">108</span>, <span class="number">111</span>])</span><br><span class="line"><span class="built_in">print</span>(b)  <span class="comment"># b&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>bytes()</code>å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å­—èŠ‚åºåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½é€šè¿‡ä¿®æ”¹å…¶ä¸­çš„å…ƒç´ æ¥æ”¹å˜å­—èŠ‚åºåˆ—çš„å†…å®¹ã€‚å¦‚æœéœ€è¦ä¿®æ”¹å­—èŠ‚åºåˆ—çš„å†…å®¹ï¼Œå¯ä»¥å…ˆå°†å…¶è½¬æ¢ä¸ºå¯å˜çš„å­—èŠ‚æ•°ç»„ï¼Œç„¶åå†è¿›è¡Œä¿®æ”¹ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><div class="tabs" id="c"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#c-1">callable()</button></li><li class="tab"><button type="button" data-href="#c-2">chr()</button></li><li class="tab"><button type="button" data-href="#c-3">classmethod()</button></li><li class="tab"><button type="button" data-href="#c-4">compile()</button></li><li class="tab"><button type="button" data-href="#c-5">complex()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="c-1"><p><code>callable(object)</code></p><p>callable()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«è°ƒç”¨ã€‚å¦‚æœå¯¹è±¡å¯ä»¥è¢«è°ƒç”¨ï¼Œåˆ™è¿”å›Trueï¼›å¦åˆ™è¿”å›Falseã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥è¢«è°ƒç”¨çš„å¯¹è±¡ï¼š</p><ul><li>å‡½æ•°</li><li>æ–¹æ³•</li><li>ç±»</li><li>å®ç°äº†__call__()æ–¹æ³•çš„å¯¹è±¡</li></ul><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä¸å¯ä»¥è¢«è°ƒç”¨çš„å¯¹è±¡ï¼š</p><ul><li>å˜é‡</li><li>å­—ç¬¦ä¸²</li><li>æ•°å­—</li><li>åˆ—è¡¨</li><li>å­—å…¸</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;MyClass is called.&quot;</span>)</span><br><span class="line"></span><br><span class="line">my_obj = MyClass()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">callable</span>(my_func))      <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">callable</span>(my_obj))       <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">callable</span>(<span class="string">&quot;Hello&quot;</span>))      <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">callable</span>(<span class="number">123</span>))          <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">callable</span>([]))           <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">callable</span>(&#123;&#125;))           <span class="comment"># False</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="c-2"><p><code>chr(i)</code></p><p>ç”¨äºå°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºå¯¹åº”çš„Unicodeå­—ç¬¦ã€‚</p><p>å…¶ä¸­ï¼Œiè¡¨ç¤ºä¸€ä¸ªæ•´æ•°ï¼ŒèŒƒå›´ä¸º0åˆ°1,114,111ï¼ˆåå…­è¿›åˆ¶è¡¨ç¤ºä¸º0x10FFFFï¼‰ã€‚</p><p>è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºUnicodeç ä½ä¸ºiçš„å­—ç¬¦ã€‚</p><p>ä¾‹å¦‚ï¼Œchr(65)è¿”å›çš„æ˜¯å­—ç¬¦â€™Aâ€™ï¼Œchr(97)è¿”å›çš„æ˜¯å­—ç¬¦â€™aâ€™ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœiä¸åœ¨ä¸Šè¿°èŒƒå›´å†…ï¼Œåˆ™ä¼šæŠ›å‡ºValueErrorå¼‚å¸¸ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="c-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="c-4"><p><code>compile(source, filename, mode, flags=0, dont_inherit=False, optimize=- 1)</code></p><p>ç”¨äºå°†å­—ç¬¦ä¸²æˆ–è€…æ–‡ä»¶ç¼–è¯‘æˆPythonä»£ç å¯¹è±¡ã€‚</p><p>å…¶ä¸­ï¼Œsourceè¡¨ç¤ºè¦è¢«ç¼–è¯‘çš„æºä»£ç å­—ç¬¦ä¸²æˆ–æ–‡ä»¶ï¼›filenameè¡¨ç¤ºæºä»£ç æ‰€åœ¨çš„æ–‡ä»¶åï¼Œå¦‚æœsourceä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™å¯ä»¥å°†filenameè®¾ç½®ä¸ºâ€™â€™ï¼›modeè¡¨ç¤ºç¼–è¯‘æ¨¡å¼ï¼Œå¯ä»¥ä¸ºâ€™execâ€™ã€â€™evalâ€™æˆ–â€™singleâ€™ï¼›flagsè¡¨ç¤ºé™„åŠ æ ‡å¿—ï¼Œå¯ä»¥ä¸ºPyCF_MASKã€PyCF_SOURCE_IS_UTF8ã€PyCF_ONLY_ASTã€PyCF_IGNORE_COOKIEã€PyCF_ACCEPT_NULL_BYTESã€PyCF_DONT_IMPLY_DEDENTã€PyCF_TYPE_COMMENTSç­‰ï¼›dont_inheritè¡¨ç¤ºæ˜¯å¦ç»§æ‰¿çˆ¶ä½œç”¨åŸŸï¼Œå¦‚æœä¸ºTrueï¼Œåˆ™ä¸ç»§æ‰¿ï¼›optimizeè¡¨ç¤ºä¼˜åŒ–çº§åˆ«ï¼Œå¯ä»¥ä¸º0ã€1æˆ–2ã€‚</p><p>compile()å‡½æ•°å°†è¿”å›ä¸€ä¸ªPythonä»£ç å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨eval()å‡½æ•°æˆ–è€…exec()å‡½æ•°æ¥æ‰§è¡Œç¼–è¯‘åçš„ä»£ç ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">code_str = <span class="string">&quot;print(&#x27;Hello, World!&#x27;)&quot;</span></span><br><span class="line">code_obj = <span class="built_in">compile</span>(code_str, <span class="string">&#x27;&lt;string&gt;&#x27;</span>, <span class="string">&#x27;exec&#x27;</span>)</span><br><span class="line"><span class="built_in">exec</span>(code_obj)<span class="comment"># Hello, World!</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="c-5"><p><code>class complex(real=0, imag=0)</code><br><code>class complex(string)</code></p><p>Pythonä¸­çš„complex()å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªå¤æ•°å¯¹è±¡ã€‚å®ƒå¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå¤æ•°çš„å®éƒ¨å’Œè™šéƒ¨ã€‚å¦‚æœåªæä¾›ä¸€ä¸ªå‚æ•°ï¼Œåˆ™é»˜è®¤ä¸ºå®éƒ¨ï¼Œè™šéƒ¨ä¸º0ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªå¤æ•°å¯¹è±¡</span></span><br><span class="line">x = <span class="built_in">complex</span>(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(x)  <span class="comment"># è¾“å‡ºï¼š(3+4j)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæä¾›å®éƒ¨</span></span><br><span class="line">y = <span class="built_in">complex</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(y)  <span class="comment"># è¾“å‡ºï¼š(2+0j)</span></span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºå¤æ•°ã€‚å­—ç¬¦ä¸²çš„æ ¼å¼ä¸ºâ€œå®éƒ¨+è™šéƒ¨jâ€ï¼Œå…¶ä¸­å®éƒ¨å’Œè™šéƒ¨éƒ½å¯ä»¥æ˜¯æµ®ç‚¹æ•°æˆ–æ•´æ•°ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å­—ç¬¦ä¸²åˆ›å»ºå¤æ•°å¯¹è±¡</span></span><br><span class="line">z = <span class="built_in">complex</span>(<span class="string">&#x27;5+6j&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(z)  <span class="comment"># è¾“å‡ºï¼š(5+6j)</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœå­—ç¬¦ä¸²æ ¼å¼ä¸æ­£ç¡®ï¼Œå°†ä¼šæŠ›å‡ºValueErrorå¼‚å¸¸ã€‚</p><p>ä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºå¤æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">z = <span class="number">2</span> + <span class="number">3j</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(z))<span class="comment"># &lt;class &#x27;complex&#x27;&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="D"><a href="#D" class="headerlink" title="D"></a>D</h2><div class="tabs" id="d"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#d-1">delattr()</button></li><li class="tab"><button type="button" data-href="#d-2">dict()</button></li><li class="tab"><button type="button" data-href="#d-3">dir()</button></li><li class="tab"><button type="button" data-href="#d-4">divmod()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="d-1"><p><code>delatter(object,name)</code></p><p>å‡½æ•°ç”¨äºåˆ é™¤å¯¹è±¡çš„å±æ€§ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå¯¹è±¡å’Œå±æ€§åã€‚å¦‚æœå¯¹è±¡å­˜åœ¨è¯¥å±æ€§ï¼Œåˆ™è¯¥å±æ€§å°†è¢«åˆ é™¤ï¼›å¦åˆ™å°†å¼•å‘ AttributeError å¼‚å¸¸ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">person = Person(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>)</span><br><span class="line"><span class="built_in">print</span>(person.name)  <span class="comment"># è¾“å‡º &quot;Alice&quot;</span></span><br><span class="line"><span class="built_in">delattr</span>(person, <span class="string">&quot;name&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(person.name)  <span class="comment"># å¼•å‘ AttributeError å¼‚å¸¸</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="d-2"><p>dict()æ˜¯Pythonä¸­çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚å®ƒå¯ä»¥æ¥å—å¤šç§ä¸åŒçš„å‚æ•°ï¼ŒåŒ…æ‹¬ï¼š</p><ol><li><p>æ— å‚ï¼šåˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ã€‚</p></li><li><p>å¯è¿­ä»£å¯¹è±¡ï¼šé€šè¿‡å¯è¿­ä»£å¯¹è±¡åˆ›å»ºå­—å…¸ã€‚å¯è¿­ä»£å¯¹è±¡çš„æ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º2çš„å…ƒç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºé”®ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä½œä¸ºå€¼ã€‚</p></li><li><p>æ˜ å°„å¯¹è±¡ï¼šé€šè¿‡æ˜ å°„å¯¹è±¡åˆ›å»ºå­—å…¸ã€‚æ˜ å°„å¯¹è±¡æ˜¯æŒ‡å…·æœ‰é”®å€¼å¯¹çš„å¯¹è±¡ï¼Œå¦‚å­—å…¸ã€defaultdictç­‰ã€‚</p></li><li><p>å…³é”®å­—å‚æ•°ï¼šé€šè¿‡å…³é”®å­—å‚æ•°åˆ›å»ºå­—å…¸ã€‚å…³é”®å­—å‚æ•°çš„é”®ä½œä¸ºå­—å…¸çš„é”®ï¼Œå€¼ä½œä¸ºå­—å…¸çš„å€¼ã€‚</p></li></ol><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç©ºå­—å…¸</span></span><br><span class="line">d1 = <span class="built_in">dict</span>()</span><br><span class="line"><span class="built_in">print</span>(d1)  <span class="comment"># &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡å¯è¿­ä»£å¯¹è±¡åˆ›å»ºå­—å…¸</span></span><br><span class="line">d2 = <span class="built_in">dict</span>([(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="built_in">print</span>(d2)  <span class="comment"># &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡æ˜ å°„å¯¹è±¡åˆ›å»ºå­—å…¸</span></span><br><span class="line">d3 = <span class="built_in">dict</span>(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(d3)  <span class="comment"># &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡å…³é”®å­—å‚æ•°åˆ›å»ºå­—å…¸</span></span><br><span class="line">d4 = <span class="built_in">dict</span>(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(d4)  <span class="comment"># &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="d-3"><p><code>dir()</code></p><p><code>dir(object)</code></p><p>dir()æ˜¯Pythonå†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ—å‡ºæŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p><p>å¦‚æœæ²¡æœ‰æŒ‡å®šå¯¹è±¡ï¼Œåˆ™é»˜è®¤åˆ—å‡ºå½“å‰ä½œç”¨åŸŸå†…çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dir</span>()  <span class="comment"># åˆ—å‡ºå½“å‰ä½œç”¨åŸŸå†…çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•</span></span><br><span class="line">[<span class="string">&#x27;__annotations__&#x27;</span>, <span class="string">&#x27;__builtins__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, <span class="string">&#x27;__loader__&#x27;</span>, <span class="string">&#x27;__name__&#x27;</span>, <span class="string">&#x27;__package__&#x27;</span>, <span class="string">&#x27;__spec__&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dir</span>(<span class="built_in">list</span>)  <span class="comment"># åˆ—å‡ºlistå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•</span></span><br><span class="line">[<span class="string">&#x27;__add__&#x27;</span>, <span class="string">&#x27;__class__&#x27;</span>, <span class="string">&#x27;__contains__&#x27;</span>, <span class="string">&#x27;__delattr__&#x27;</span>, <span class="string">&#x27;__delitem__&#x27;</span>, <span class="string">&#x27;__dir__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, <span class="string">&#x27;__eq__&#x27;</span>, <span class="string">&#x27;__format__&#x27;</span>, <span class="string">&#x27;__ge__&#x27;</span>, <span class="string">&#x27;__getattribute__&#x27;</span>, <span class="string">&#x27;__getitem__&#x27;</span>, <span class="string">&#x27;__gt__&#x27;</span>, <span class="string">&#x27;__hash__&#x27;</span>, <span class="string">&#x27;__iadd__&#x27;</span>, <span class="string">&#x27;__imul__&#x27;</span>, <span class="string">&#x27;__init__&#x27;</span>, <span class="string">&#x27;__init_subclass__&#x27;</span>, <span class="string">&#x27;__iter__&#x27;</span>, <span class="string">&#x27;__le__&#x27;</span>, <span class="string">&#x27;__len__&#x27;</span>, <span class="string">&#x27;__lt__&#x27;</span>, <span class="string">&#x27;__mul__&#x27;</span>, <span class="string">&#x27;__ne__&#x27;</span>, <span class="string">&#x27;__new__&#x27;</span>, <span class="string">&#x27;__reduce__&#x27;</span>, <span class="string">&#x27;__reduce_ex__&#x27;</span>, <span class="string">&#x27;__repr__&#x27;</span>, <span class="string">&#x27;__reversed__&#x27;</span>, <span class="string">&#x27;__rmul__&#x27;</span>, <span class="string">&#x27;__setattr__&#x27;</span>, <span class="string">&#x27;__setitem__&#x27;</span>, <span class="string">&#x27;__sizeof__&#x27;</span>, <span class="string">&#x27;__str__&#x27;</span>, <span class="string">&#x27;__subclasshook__&#x27;</span>, <span class="string">&#x27;append&#x27;</span>, <span class="string">&#x27;clear&#x27;</span>, <span class="string">&#x27;copy&#x27;</span>, <span class="string">&#x27;count&#x27;</span>, <span class="string">&#x27;extend&#x27;</span>, <span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;insert&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;remove&#x27;</span>, <span class="string">&#x27;reverse&#x27;</span>, <span class="string">&#x27;sort&#x27;</span>]</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œdir()è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­çš„å…ƒç´ æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè¡¨ç¤ºå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•åç§°ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="d-4"><p><code>divmod(a,b)</code></p><p><strong>ä½œç”¨ï¼š</strong>ç”¨äºåŒæ—¶è·å–ä¸¤ä¸ªæ•´æ•°çš„å•†å’Œä½™æ•°ã€‚</p><p><strong>è¿”å›å€¼ï¼š</strong></p><p>è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå…ƒç»„ï¼ŒåŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼š</p><p>ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ x é™¤ä»¥ y çš„å•†ï¼Œä¸ºæ•´æ•°ç±»å‹ã€‚</p><p>ç¬¬äºŒä¸ªå…ƒç´ æ˜¯ x é™¤ä»¥ y çš„ä½™æ•°ï¼Œä¸ºæ•´æ•°ç±»å‹ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">divmod</span>(<span class="number">10</span>, <span class="number">3</span>)  <span class="comment"># è¿”å› (3, 1)</span></span><br><span class="line"><span class="built_in">divmod</span>(-<span class="number">10</span>, <span class="number">3</span>)  <span class="comment"># è¿”å› (-4, 2)</span></span><br><span class="line"><span class="built_in">divmod</span>(<span class="number">10</span>, -<span class="number">3</span>)  <span class="comment"># è¿”å› (-4, -2)</span></span><br><span class="line"><span class="built_in">divmod</span>(-<span class="number">10</span>, -<span class="number">3</span>)  <span class="comment"># è¿”å› (3, -1)</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="E"><a href="#E" class="headerlink" title="E"></a>E</h2><div class="tabs" id="e"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#e-1">enumerate()</button></li><li class="tab"><button type="button" data-href="#e-2">eval()</button></li><li class="tab"><button type="button" data-href="#e-3">exec()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="e-1"><p><code>enumerate(iterable, start=0)</code></p><p>å…¶ä¸­ï¼Œiterableæ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼Œstartæ˜¯å¯é€‰å‚æ•°ï¼ŒæŒ‡å®šèµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤å€¼ä¸º0ã€‚</p><p>enumerate()æ˜¯Pythonå†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºå°†ä¸€ä¸ªå¯éå†çš„æ•°æ®å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰ç»„åˆä¸ºä¸€ä¸ªç´¢å¼•åºåˆ—ï¼ŒåŒæ—¶åˆ—å‡ºæ•°æ®å’Œæ•°æ®ä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i, fruit <span class="keyword">in</span> <span class="built_in">enumerate</span>(fruits):</span><br><span class="line">    <span class="built_in">print</span>(i, fruit)</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 apple</span><br><span class="line">1 banana</span><br><span class="line">2 orange</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†enumerate()å‡½æ•°æ¥éå†æ°´æœåˆ—è¡¨fruitsï¼ŒåŒæ—¶è·å–æ¯ä¸ªæ°´æœçš„ç´¢å¼•å’Œå€¼ï¼Œå¹¶å°†å®ƒä»¬æ‰“å°å‡ºæ¥ã€‚æ³¨æ„ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šstartå‚æ•°ï¼Œæ‰€ä»¥é»˜è®¤ä»0å¼€å§‹è®¡æ•°ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="e-2"><p><code>eval(expression, globals = None, locals = None)</code></p><p>expressionæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå¯ä»¥åŒ…å«å˜é‡ã€è¿ç®—ç¬¦å’Œå‡½æ•°è°ƒç”¨ç­‰ã€‚å¦‚æœglobalså’Œlocalså‚æ•°è¢«çœç•¥æˆ–ä¼ å…¥ä¸ºNoneï¼Œåˆ™å®ƒä»¬ä¼šé»˜è®¤ä½¿ç”¨å½“å‰ä½œç”¨åŸŸçš„å…¨å±€å’Œå±€éƒ¨å˜é‡ã€‚</p><p><strong>ä½œç”¨ï¼š</strong>åŠ¨æ€åœ°æ‰§è¡ŒPythonä»£ç ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²è¡¨è¾¾å¼è½¬æ¢ä¸ºæ•´æ•°</span></span><br><span class="line">result = <span class="built_in">eval</span>(<span class="string">&quot;2 + 3&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># è¾“å‡º5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²è¡¨è¾¾å¼è½¬æ¢ä¸ºæµ®ç‚¹æ•°</span></span><br><span class="line">result = <span class="built_in">eval</span>(<span class="string">&quot;3.14 * 2.0&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># è¾“å‡º6.28</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œä¸€ä¸ªå‡½æ•°è°ƒç”¨</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">result = <span class="built_in">eval</span>(<span class="string">&quot;add(2, 3)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># è¾“å‡º5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ä¸€ä¸ªå˜é‡çš„å¹³æ–¹</span></span><br><span class="line">x = <span class="number">5</span></span><br><span class="line">result = <span class="built_in">eval</span>(<span class="string">&quot;x ** 2&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># è¾“å‡º25</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºeval()å‡½æ•°å¯ä»¥æ‰§è¡Œä»»æ„å­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå› æ­¤å®ƒä¹Ÿå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯ä»å¤–éƒ¨è¾“å…¥çš„ï¼Œåº”è¯¥è°¨æ…ä½¿ç”¨eval()å‡½æ•°ï¼Œä»¥é˜²æ­¢ä»£ç æ³¨å…¥ç­‰å®‰å…¨é—®é¢˜ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="e-3"><p><code>eval(object, globals = None, locals = None)</code></p><p><code>eval()</code>å’Œ<code>exec()</code>éƒ½æ˜¯Pythonå†…ç½®å‡½æ•°ï¼Œéƒ½å¯ä»¥åŠ¨æ€åœ°æ‰§è¡ŒPythonä»£ç ï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰å‡ ä¸ªé‡è¦çš„åŒºåˆ«ï¼š</p><ol><li><p><code>eval()</code>å‡½æ•°åªèƒ½æ‰§è¡Œå•ä¸ªè¡¨è¾¾å¼çš„ä»£ç ï¼Œè€Œ<code>exec()</code>å‡½æ•°å¯ä»¥æ‰§è¡Œä»»æ„æ•°é‡çš„è¯­å¥ï¼ŒåŒ…æ‹¬å‡½æ•°å’Œç±»å®šä¹‰ç­‰ã€‚</p></li><li><p><code>eval()</code>å‡½æ•°ä¼šè¿”å›è¡¨è¾¾å¼çš„å€¼ï¼Œè€Œ<code>exec()</code>å‡½æ•°ä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œå› ä¸ºå®ƒåªæ˜¯æ‰§è¡Œä»£ç å¹¶å°†ç»“æœå­˜å‚¨åœ¨å‘½åç©ºé—´ä¸­ã€‚</p></li><li><p><code>eval()</code>å‡½æ•°çš„å®‰å…¨æ€§æ¯”<code>exec()</code>å‡½æ•°æ›´é«˜ï¼Œå› ä¸ºå®ƒåªèƒ½æ‰§è¡Œå•ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸èƒ½è®¿é—®ä»»ä½•å…¨å±€æˆ–å±€éƒ¨å˜é‡ï¼Œåªèƒ½è®¿é—®ä¼ é€’ç»™å®ƒçš„å‘½åç©ºé—´ä¸­çš„å˜é‡ã€‚</p></li></ol><p>ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†<code>eval()</code>å’Œ<code>exec()</code>å‡½æ•°çš„ç”¨æ³•å’ŒåŒºåˆ«ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹1ï¼šä½¿ç”¨eval()å‡½æ•°è®¡ç®—è¡¨è¾¾å¼çš„å€¼</span></span><br><span class="line">x = <span class="number">10</span></span><br><span class="line">y = <span class="number">20</span></span><br><span class="line">expr = <span class="string">&quot;x + y&quot;</span></span><br><span class="line">result1 = <span class="built_in">eval</span>(expr)</span><br><span class="line">result2 = <span class="built_in">exec</span>(expr)</span><br><span class="line"><span class="built_in">print</span>(result1)  <span class="comment"># è¾“å‡º30</span></span><br><span class="line"><span class="built_in">print</span>(result2)  <span class="comment"># None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹2ï¼šä½¿ç”¨exec()å‡½æ•°æ‰§è¡Œä¸€æ®µä»£ç </span></span><br><span class="line">code = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">for i in range(5):</span></span><br><span class="line"><span class="string">    print(i)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">exec</span>(code)  <span class="comment"># è¾“å‡º0,1,2,3,4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹3ï¼šä½¿ç”¨eval()å‡½æ•°è®¿é—®ä¼ é€’çš„å‘½åç©ºé—´ä¸­çš„å˜é‡</span></span><br><span class="line">namespace = &#123;<span class="string">&quot;x&quot;</span>: <span class="number">10</span>, <span class="string">&quot;y&quot;</span>: <span class="number">20</span>&#125;</span><br><span class="line">expr = <span class="string">&quot;x + y&quot;</span></span><br><span class="line">result = <span class="built_in">eval</span>(expr, namespace)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># è¾“å‡º30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹4ï¼šä½¿ç”¨exec()å‡½æ•°å®šä¹‰ä¸€ä¸ªå‡½æ•°å¹¶è°ƒç”¨å®ƒ</span></span><br><span class="line">code = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">def add(x, y):</span></span><br><span class="line"><span class="string">    return x + y</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">result = add(10, 20)</span></span><br><span class="line"><span class="string">print(result)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">exec</span>(code)  <span class="comment"># è¾“å‡º30</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ—¶ï¼Œéœ€è¦é¿å…æ‰§è¡Œä¸å¯ä¿¡çš„ä»£ç ï¼Œä»¥é˜²æ­¢å®‰å…¨é—®é¢˜ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="F"><a href="#F" class="headerlink" title="F"></a>F</h2><div class="tabs" id="f"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#f-1">filter()</button></li><li class="tab"><button type="button" data-href="#f-2">float()</button></li><li class="tab"><button type="button" data-href="#f-3">format()</button></li><li class="tab"><button type="button" data-href="#f-4">frozenset()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="f-1"><p><code>filter(function, iterable)</code></p><p>æ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªåºåˆ—ä½œä¸ºå‚æ•°ï¼Œå°†å‡½æ•°åº”ç”¨äºåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼ä¸ºTrueçš„å…ƒç´ æ„æˆä¸€ä¸ªæ–°çš„åºåˆ—ã€‚</p><p>functionï¼šç”¨äºç­›é€‰çš„å‡½æ•°ï¼Œå¯ä»¥æ˜¯ä»»ä½•å¯è°ƒç”¨çš„å‡½æ•°ï¼ŒåŒ…æ‹¬lambdaè¡¨è¾¾å¼ã€‚</p><p>iterableï¼šè¦è¿›è¡Œç­›é€‰çš„åºåˆ—ï¼Œå¯ä»¥æ˜¯åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆç­‰å¯è¿­ä»£å¯¹è±¡ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>ç­›é€‰å‡ºåˆ—è¡¨ä¸­æ‰€æœ‰çš„å¶æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonlst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">result = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x % <span class="number">2</span> == <span class="number">0</span>, lst)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result))  <span class="comment"># [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure><p>ç­›é€‰å‡ºå­—ç¬¦ä¸²åˆ—è¡¨ä¸­é•¿åº¦å¤§äºç­‰äº5çš„å­—ç¬¦ä¸²ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonlst = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>, <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;is&#x27;</span>, <span class="string">&#x27;great&#x27;</span>]</span><br><span class="line">result = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x: <span class="built_in">len</span>(x) &gt;= <span class="number">5</span>, lst)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result))  <span class="comment"># [&#x27;hello&#x27;, &#x27;world&#x27;, &#x27;python&#x27;, &#x27;great&#x27;]</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="f-2"><p><code>class float(x=0.0)</code></p><p>float()å‡½æ•°æ˜¯ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°å­—è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼ˆå³å°æ•°ï¼‰çš„å‡½æ•°ã€‚å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°å­—ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚å¦‚æœå­—ç¬¦ä¸²æ— æ³•è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼Œåˆ™ä¼šå¼•å‘ValueErrorå¼‚å¸¸ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œåˆ™è¿”å›0.0ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">float</span>(<span class="string">&quot;3.14&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(x)  <span class="comment"># è¾“å‡º 3.14</span></span><br><span class="line"></span><br><span class="line">y = <span class="built_in">float</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(y)  <span class="comment"># è¾“å‡º 10.0</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠå­—ç¬¦ä¸²â€œ3.14â€å’Œæ•´æ•°10è½¬æ¢ä¸ºäº†æµ®ç‚¹æ•°ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="f-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="f-4"><p><code>class frozenset(iterable=set())</code></p><p>å‡½æ•°æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªä¸å¯å˜çš„é›†åˆå¯¹è±¡ï¼Œå³å†»ç»“çš„é›†åˆã€‚ä¸æ™®é€šé›†åˆä¸åŒçš„æ˜¯ï¼Œå†»ç»“é›†åˆä¸èƒ½è¿›è¡Œä»»ä½•ä¿®æ”¹æ“ä½œï¼ŒåŒ…æ‹¬æ·»åŠ ã€åˆ é™¤å’Œæ›´æ–°å…ƒç´ ç­‰ã€‚å› æ­¤ï¼Œå®ƒä»¬è¢«è§†ä¸ºä¸€ç§æ›´å®‰å…¨çš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºåœ¨éœ€è¦ä¿æŠ¤æ•°æ®ä¸è¢«ä¿®æ”¹çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p><p>frozenset()å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶ä»ä¸­åˆ›å»ºä¸€ä¸ªå†»ç»“çš„é›†åˆã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = frozenset([1, 2, 3])</span><br><span class="line">&gt;&gt;&gt; print(a)</span><br><span class="line">frozenset(&#123;1, 2, 3&#125;)</span><br><span class="line">&gt;&gt;&gt; a.add(4)</span><br><span class="line">AttributeError: &#x27;frozenset&#x27; object has no attribute &#x27;add&#x27;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨åˆ—è¡¨ [1, 2, 3] åˆ›å»ºäº†ä¸€ä¸ªé›†åˆå¯¹è±¡ï¼Œç„¶åä½¿ç”¨ frozenset() å‡½æ•°å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå†»ç»“é›†åˆã€‚æ¥ç€ï¼Œæˆ‘ä»¬å°è¯•å‘é›†åˆä¸­æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´  4ï¼Œä½†ç”±äºå†»ç»“é›†åˆæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ä¼šå¼•å‘ AttributeError å¼‚å¸¸ã€‚</p><p><strong>ä½œç”¨ï¼š</strong></p><p>ç”¨äºåˆ›å»ºä¸å¯å˜çš„é›†åˆå¯¹è±¡ï¼Œä»¥ä¿æŠ¤æ•°æ®ä¸è¢«ä¿®æ”¹ã€‚ç”±äºå†»ç»“é›†åˆæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å®ƒä»¬é€‚ç”¨äºä¸€äº›éœ€è¦ä¿è¯æ•°æ®å®‰å…¨æ€§çš„åœºåˆã€‚ä¾‹å¦‚ï¼š</p><ol><li>ä½œä¸ºå­—å…¸çš„é”®å€¼ï¼šç”±äºå­—å…¸çš„é”®å¿…é¡»æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å†»ç»“é›†åˆä½œä¸ºå­—å…¸çš„é”®å€¼ã€‚</li><li>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä½œä¸ºå…±äº«å¯¹è±¡ï¼šç”±äºå†»ç»“é›†åˆæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä½œä¸ºå…±äº«å¯¹è±¡ï¼Œé¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹é›†åˆå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</li><li>åœ¨ç®—æ³•å’Œæ•°æ®ç»“æ„ä¸­ï¼šå†»ç»“é›†åˆå¯ä»¥ç”¨äºç®—æ³•å’Œæ•°æ®ç»“æ„ä¸­ï¼Œä¾‹å¦‚ç”¨äºå®ç°å›¾çš„é‚»æ¥è¡¨ç­‰ã€‚</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºå†»ç»“é›†åˆæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å®ƒä»¬ä¸èƒ½è¿›è¡Œæ·»åŠ ã€åˆ é™¤å’Œæ›´æ–°å…ƒç´ ç­‰æ“ä½œã€‚å¦‚æœéœ€è¦å¯¹é›†åˆè¿›è¡Œä¿®æ”¹æ“ä½œï¼Œåº”è¯¥ä½¿ç”¨æ™®é€šçš„é›†åˆå¯¹è±¡ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="G"><a href="#G" class="headerlink" title="G"></a>G</h2><div class="tabs" id="g"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#g-1">getattr()</button></li><li class="tab"><button type="button" data-href="#g-2">globals()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="g-1"><p><code>getattr(object, name)</code><br><code>getattr(object, name, default)</code></p><p>ç”¨äºè·å–å¯¹è±¡çš„å±æ€§å€¼ã€‚</p><p>å…¶ä¸­ï¼Œ</p><ul><li>objectï¼šè¡¨ç¤ºè¦è·å–å±æ€§å€¼çš„å¯¹è±¡ã€‚</li><li>nameï¼šè¡¨ç¤ºè¦è·å–çš„å±æ€§åã€‚</li><li>defaultï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºå¦‚æœå¯¹è±¡æ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™è¿”å›çš„é»˜è®¤å€¼ã€‚</li></ul><p>å¦‚æœå¯¹è±¡æœ‰è¯¥å±æ€§ï¼Œåˆ™è¿”å›è¯¥å±æ€§çš„å€¼ï¼›å¦‚æœå¯¹è±¡æ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™ä¼šæŠ›å‡º AttributeError å¼‚å¸¸ï¼Œé™¤éæŒ‡å®šäº†é»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">person = Person(<span class="string">&quot;Alice&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å±æ€§å€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getattr</span>(person, <span class="string">&quot;name&quot;</span>)) <span class="comment"># Alice</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¸å­˜åœ¨çš„å±æ€§ï¼Œä¼šæŠ›å‡º AttributeError å¼‚å¸¸</span></span><br><span class="line"><span class="comment"># print(getattr(person, &quot;age&quot;)) # AttributeError: &#x27;Person&#x27; object has no attribute &#x27;age&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¸å­˜åœ¨çš„å±æ€§ï¼ŒæŒ‡å®šé»˜è®¤å€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getattr</span>(person, <span class="string">&quot;age&quot;</span>, <span class="number">20</span>)) <span class="comment"># 20</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="g-2"><p><code>globals()</code></p><p>å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«å½“å‰å…¨å±€ç¬¦å·è¡¨ä¸­æ‰€æœ‰å˜é‡çš„å­—å…¸å¯¹è±¡ã€‚è¿™ä¸ªå­—å…¸å¯¹è±¡å¯ä»¥ç”¨äºæŸ¥çœ‹å½“å‰ç¨‹åºä¸­æ‰€æœ‰å…¨å±€å˜é‡å’Œå®ƒä»¬çš„å€¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = 10</span><br><span class="line">b = &quot;hello&quot;</span><br><span class="line">print(globals())</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;__name__&#x27;: &#x27;__main__&#x27;, &#x27;__doc__&#x27;: None, &#x27;__package__&#x27;: None, &#x27;__loader__&#x27;: &lt;class &#x27;_frozen_importlib.BuiltinImporter&#x27;&gt;, &#x27;__spec__&#x27;: None, &#x27;__annotations__&#x27;: &#123;&#125;, &#x27;__builtins__&#x27;: &lt;module &#x27;builtins&#x27; (built-in)&gt;, &#x27;a&#x27;: 10, &#x27;b&#x27;: &#x27;hello&#x27;&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿”å›çš„å­—å…¸ä¸­åŒ…å«äº†å½“å‰ç¨‹åºä¸­æ‰€æœ‰çš„å…¨å±€å˜é‡ï¼ŒåŒ…æ‹¬å†…ç½®å˜é‡å’Œç”¨æˆ·å®šä¹‰çš„å˜é‡ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="H"><a href="#H" class="headerlink" title="H"></a>H</h2><div class="tabs" id="h"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#h-1">hasattr()</button></li><li class="tab"><button type="button" data-href="#h-2">hash()</button></li><li class="tab"><button type="button" data-href="#h-3">help()</button></li><li class="tab"><button type="button" data-href="#h-4">hex()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="h-1"><p><code>hasattr(object, name)</code></p><p>å‡½æ•°çš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§æˆ–æ–¹æ³•ï¼Œå¦‚æœæœ‰åˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseã€‚</p><p>å…¶ä¸­ï¼Œobjectæ˜¯è¦åˆ¤æ–­çš„å¯¹è±¡ï¼Œnameæ˜¯è¦åˆ¤æ–­çš„å±æ€§æˆ–æ–¹æ³•åã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.name = <span class="string">&#x27;Alice&#x27;</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say_hello</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Hello, world!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">obj = MyClass()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(obj, <span class="string">&#x27;name&#x27;</span>))    <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(obj, <span class="string">&#x27;age&#x27;</span>))     <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(obj, <span class="string">&#x27;say_hello&#x27;</span>))    <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(obj, <span class="string">&#x27;run&#x27;</span>))     <span class="comment"># False</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="h-2"><p><code>hash()</code></p><p>ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼ã€‚å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç”¨äºæ¯”è¾ƒå’ŒæŸ¥æ‰¾å­—å…¸ä¸­çš„é”®å€¼ã€‚å“ˆå¸Œå€¼æ˜¯æ ¹æ®å¯¹è±¡çš„å†…å®¹è®¡ç®—å‡ºæ¥çš„ï¼Œå› æ­¤å¦‚æœä¸¤ä¸ªå¯¹è±¡å†…å®¹ç›¸åŒï¼Œå®ƒä»¬çš„å“ˆå¸Œå€¼ä¹Ÿåº”è¯¥ç›¸åŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="string">&quot;hello&quot;</span></span><br><span class="line">c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hash</span>(a))  <span class="comment"># è¾“å‡ºï¼š10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hash</span>(b))  <span class="comment"># è¾“å‡ºï¼š-1087625273</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hash</span>(c))  <span class="comment"># æŠ›å‡º TypeError å¼‚å¸¸</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="h-3"><p><code>help()</code></p><p>help()æ˜¯Pythonä¸­çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºè·å–å¸®åŠ©ä¿¡æ¯ã€‚é€šè¿‡help()å‡½æ•°ï¼Œæ‚¨å¯ä»¥è·å–Pythonçš„å†…ç½®å‡½æ•°ã€æ¨¡å—ã€ç±»ã€æ–¹æ³•ç­‰çš„æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜ã€‚</p><p>ä½¿ç”¨æ–¹æ³•ï¼š<br>åœ¨Pythonäº¤äº’å¼ç¯å¢ƒä¸­ï¼Œç›´æ¥è¾“å…¥help()å³å¯ã€‚è¾“å…¥help()åï¼Œä¼šå‡ºç°ä¸€ä¸ªæç¤ºç¬¦ï¼Œæ‚¨å¯ä»¥åœ¨æç¤ºç¬¦åé¢è¾“å…¥è¦æŸ¥æ‰¾çš„å‡½æ•°ã€æ¨¡å—ã€ç±»ã€æ–¹æ³•ç­‰çš„åç§°ï¼Œç„¶åæŒ‰å›è½¦é”®å³å¯è·å–å…¶ä½¿ç”¨è¯´æ˜ã€‚</p><p>ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è¾“å…¥help(print)æ¥è·å–printå‡½æ•°çš„ä½¿ç”¨è¯´æ˜ï¼Œæˆ–è€…è¾“å…¥help(str)æ¥è·å–å­—ç¬¦ä¸²ç±»å‹çš„ä½¿ç”¨è¯´æ˜ã€‚</p><p>é™¤äº†åœ¨äº¤äº’å¼ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨Pythonè„šæœ¬ä¸­ä½¿ç”¨help()å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨help(sys)æ¥è·å–sysæ¨¡å—çš„ä½¿ç”¨è¯´æ˜ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="h-4"><p>å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hex</span>(<span class="number">255</span>)</span><br><span class="line"><span class="string">&#x27;0xff&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hex</span>(<span class="number">10</span>)</span><br><span class="line"><span class="string">&#x27;0xa&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hex</span>(<span class="number">16</span>)</span><br><span class="line"><span class="string">&#x27;0x10&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="I"><a href="#I" class="headerlink" title="I"></a>I</h2><div class="tabs" id="i"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#i-1">id()</button></li><li class="tab"><button type="button" data-href="#i-2">input()</button></li><li class="tab"><button type="button" data-href="#i-3">int()</button></li><li class="tab"><button type="button" data-href="#i-4">isinstance()</button></li><li class="tab"><button type="button" data-href="#i-5">issubclass()</button></li><li class="tab"><button type="button" data-href="#i-6">iter()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="i-1"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="i-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="i-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="i-4"><p>å‡½æ•°çš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»æˆ–å­ç±»çš„å®ä¾‹ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isinstance</span>(<span class="built_in">object</span>, classinfo)</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>object</code>ï¼šè¦æ£€æŸ¥çš„å¯¹è±¡ã€‚</li><li><code>classinfo</code>ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªç±»å‹å¯¹è±¡æˆ–ä¸€ä¸ªç”±ç±»å‹å¯¹è±¡ç»„æˆçš„å…ƒç»„ã€‚å¦‚æœ <code>object</code> æ˜¯å…¶ä¸­ä»»ä½•ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œåˆ™è¿”å› <code>True</code>ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">dog = Dog()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(dog, Dog)) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(dog, Animal)) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(dog, <span class="built_in">tuple</span>)) <span class="comment"># False</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="i-5"><p>å‡½æ•°ç”¨äºæ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦æ˜¯å¦ä¸€ä¸ªç±»çš„å­ç±»ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">issubclass</span>(<span class="keyword">class</span>, classinfo)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>class</code> æ˜¯è¦æ£€æŸ¥çš„ç±»ï¼Œ<code>classinfo</code> æ˜¯è¦æ¯”è¾ƒçš„ç±»æˆ–ç±»å…ƒç»„ã€‚å¦‚æœ <code>class</code> æ˜¯ <code>classinfo</code> çš„å­ç±»ï¼Œåˆ™è¿”å› <code>True</code>ï¼Œå¦åˆ™è¿”å› <code>False</code>ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">issubclass</span>(B, A))  <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">issubclass</span>(A, B))  <span class="comment"># False</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="i-6"><p>å‡½æ•°æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡çš„è¿­ä»£å™¨ã€‚å¯è¿­ä»£å¯¹è±¡æŒ‡çš„æ˜¯å¯ä»¥è¢« for å¾ªç¯éå†çš„å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆã€å­—å…¸ç­‰ã€‚è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ next() æ–¹æ³•ä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ²¡æœ‰å…ƒç´ å¯è¿”å›æ—¶æŠ›å‡º StopIteration å¼‚å¸¸ã€‚ä½¿ç”¨ iter() å‡½æ•°å¯ä»¥å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºè¿­ä»£å™¨ï¼Œä»è€Œå¯ä»¥ä½¿ç”¨ next() æ–¹æ³•éå†å…ƒç´ ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">my_iter = <span class="built_in">iter</span>(my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡º 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡º 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡º 3</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœå¯¹ä¸€ä¸ªå·²ç»æ˜¯è¿­ä»£å™¨çš„å¯¹è±¡ä½¿ç”¨ iter() å‡½æ•°ï¼Œä¼šè¿”å›å®ƒæœ¬èº«ï¼Œå› ä¸ºè¿­ä»£å™¨æœ¬èº«å·²ç»å®ç°äº† <strong>iter</strong>() æ–¹æ³•ï¼Œå¯ä»¥è¿”å›è‡ªèº«ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_iter = <span class="built_in">iter</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">iter</span>(my_iter) <span class="keyword">is</span> my_iter)  <span class="comment"># è¾“å‡º True</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="L"><a href="#L" class="headerlink" title="L"></a>L</h2><div class="tabs" id="i"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#i-1">len()</button></li><li class="tab"><button type="button" data-href="#i-2">list()</button></li><li class="tab"><button type="button" data-href="#i-3">locals()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="i-1"><p>len()æ˜¯Pythonå†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºè·å–ä¸€ä¸ªåºåˆ—ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰æˆ–é›†åˆï¼ˆå­—å…¸ã€é›†åˆç­‰ï¼‰çš„å…ƒç´ ä¸ªæ•°ã€‚å…¶è¯­æ³•æ ¼å¼ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len(sequence)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œsequenceä¸ºè¦è®¡ç®—å…ƒç´ ä¸ªæ•°çš„åºåˆ—æˆ–é›†åˆã€‚è¿”å›å€¼ä¸ºæ•´æ•°ç±»å‹ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;Hello, World!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(str1))  <span class="comment"># è¾“å‡º 13</span></span><br><span class="line"></span><br><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(list1))  <span class="comment"># è¾“å‡º 5</span></span><br><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">20</span>, <span class="string">&quot;gender&quot;</span>: <span class="string">&quot;female&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(dict1))  <span class="comment"># è¾“å‡º 3</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œlen()å‡½æ•°åªèƒ½ç”¨äºå¯è¿­ä»£å¯¹è±¡ï¼Œå³å…·æœ‰__len__()æ–¹æ³•çš„å¯¹è±¡ã€‚å¦‚æœä¼ å…¥çš„å¯¹è±¡æ²¡æœ‰å®ç°è¯¥æ–¹æ³•ï¼Œä¼šæŠ›å‡ºTypeErrorå¼‚å¸¸ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="i-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="i-3"><p>locals()æ˜¯Pythonå†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºè¿”å›å½“å‰ä½œç”¨åŸŸå†…çš„æ‰€æœ‰å±€éƒ¨å˜é‡å’Œå®ƒä»¬çš„å€¼ã€‚å®ƒè¿”å›ä¸€ä¸ªå­—å…¸å¯¹è±¡ï¼Œå…¶ä¸­é”®æ˜¯å˜é‡åï¼Œå€¼æ˜¯å˜é‡çš„å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œlocals()å°†è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­åŒ…å«å˜é‡xå’ŒyåŠå…¶å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def my_function():</span><br><span class="line">    x = 1</span><br><span class="line">    y = 2</span><br><span class="line">    print(locals())</span><br><span class="line"></span><br><span class="line">my_function()</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;x&#x27;: 1, &#x27;y&#x27;: 2&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œlocals()åªè¿”å›å½“å‰ä½œç”¨åŸŸå†…çš„å±€éƒ¨å˜é‡ï¼Œè€Œä¸åŒ…æ‹¬å…¨å±€å˜é‡å’Œå…¶ä»–ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚å¦‚æœè¦è·å–å…¨å±€å˜é‡å’Œå…¶ä»–ä½œç”¨åŸŸå†…çš„å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨globals()å‡½æ•°æˆ–è€…inspectæ¨¡å—ä¸­çš„ç›¸å…³å‡½æ•°ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="M"><a href="#M" class="headerlink" title="M"></a>M</h2><div class="tabs" id="m"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#m-1">map()</button></li><li class="tab"><button type="button" data-href="#m-2">max()</button></li><li class="tab"><button type="button" data-href="#m-3">memoryview()</button></li><li class="tab"><button type="button" data-href="#m-4">min()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="m-1"><p><strong>å‡½æ•°çš„ç”¨æ³•ï¼š</strong></p><p>map()å‡½æ•°æ˜¯Pythonå†…ç½®çš„é«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†å‡½æ•°åº”ç”¨äºå¯è¿­ä»£å¯¹è±¡çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å¯è¿­ä»£å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†åº”ç”¨å‡½æ•°åçš„ç»“æœã€‚</p><p>ç›´æ¥æ‰“å°è¿”å›ç»“æœæ˜¯ä¸€ä¸ªmapçš„åœ°å€ï¼Œæˆ‘ä»¬éœ€è¦è½¬æ¢æˆåˆ—è¡¨ç­‰æ¥æ˜¾ç¤ºï¼ï¼ï¼</p><p><strong>è¯­æ³•ï¼š</strong></p><p>map(function, iterable, â€¦)</p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><p>functionï¼šç”¨äºå¤„ç†æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ã€‚</p><p>iterableï¼šä¸€ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ã€‚</p><p><strong>è¿”å›å€¼ï¼š</strong></p><p>ä¸€ä¸ªæ–°çš„å¯è¿­ä»£å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†åº”ç”¨å‡½æ•°åçš„ç»“æœã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>1.å°†åˆ—è¡¨ä¸­çš„å…ƒç´ å¹³æ–¹ï¼š</p><pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">new_lst = <span class="built_in">map</span>(<span class="keyword">lambda</span> x: x ** <span class="number">2</span>, lst)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(new_lst))  <span class="comment"># [1, 4, 9, 16, 25]</span></span><br></pre></td></tr></table></figure></code></pre><p>2.å°†ä¸¤ä¸ªåˆ—è¡¨å¯¹åº”ä½ç½®çš„å…ƒç´ ç›¸åŠ ï¼š</p><pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lst1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">lst2 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br><span class="line">new_lst = <span class="built_in">map</span>(<span class="keyword">lambda</span> x, y: x + y, lst1, lst2)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(new_lst))  <span class="comment"># [11, 22, 33, 44, 55]</span></span><br></pre></td></tr></table></figure></code></pre><p>3.å°†å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„å…ƒç´ è½¬æ¢ä¸ºå¤§å†™ï¼š</p><pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>, <span class="string">&#x27;python&#x27;</span>]</span><br><span class="line">new_lst = <span class="built_in">map</span>(<span class="built_in">str</span>.upper, lst)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(new_lst))  <span class="comment"># [&#x27;HELLO&#x27;, &#x27;WORLD&#x27;, &#x27;PYTHON&#x27;]</span></span><br></pre></td></tr></table></figure></code></pre><p>4.è·å–åˆ°è¾“å…¥çš„æ•°å­—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n,m = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="string">&quot;1 2&quot;</span>.split())</span><br><span class="line"><span class="built_in">print</span>(n,m)  <span class="comment"># 1 2</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¨¡æ‹Ÿé”®ç›˜è¾“å…¥1ã€ç©ºæ ¼ã€2ã€‚</p><p>åŸç†ï¼šåœ¨æ‰§è¡Œmapå‡½æ•°æ—¶ï¼Œä½¿ç”¨äº†è§£æ„èµ‹å€¼ï¼›è§£æ„èµ‹å€¼æ˜¯ä¸€ç§å¿«é€Ÿè·å–åˆ—è¡¨ã€å…ƒç»„ç­‰å¯è¿­ä»£å¯¹è±¡ä¸­å…ƒç´ çš„æ–¹å¼ã€‚å®ƒå¯ä»¥å°†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ï¼Œä¸€æ¬¡æ€§èµ‹å€¼ç»™å¤šä¸ªå˜é‡ã€‚<br>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—è¡¨</span></span><br><span class="line">a, b, c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># å­—å…¸</span></span><br><span class="line">d = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br><span class="line">name, age = d[<span class="string">&#x27;name&#x27;</span>], d[<span class="string">&#x27;age&#x27;</span>]</span><br><span class="line"><span class="comment"># é›†åˆ</span></span><br><span class="line">s = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;</span><br><span class="line">a, b, c = s</span><br></pre></td></tr></table></figure><p>mapé›†åˆè¿”å›çš„æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸¤ä¸ªå…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼åˆ†åˆ«èµ‹å€¼ç»™ä¸¤ä¸ªå˜é‡</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="m-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="m-3"><p>memoryview()æ˜¯ä¸€ä¸ªPythonå†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªå†…å­˜è§†å›¾å¯¹è±¡ï¼Œå®ƒå…è®¸Pythonç¨‹åºä»¥ä¸åŒçš„æ–¹å¼æŸ¥çœ‹å†…å­˜ä¸­çš„æ•°æ®ã€‚å†…å­˜è§†å›¾å¯¹è±¡æ˜¯ä¸€ç§ç±»ä¼¼äºæ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨äºè®¿é—®äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚å­—èŠ‚æ•°ç»„ã€å­—ç¬¦æ•°ç»„å’Œç»“æ„ä½“æ•°ç»„ç­‰ã€‚</p><p>memoryview()å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><p>memoryview(obj)</p><p>å…¶ä¸­ï¼Œobjæ˜¯ä¸€ä¸ªæ”¯æŒç¼“å†²åŒºåè®®çš„å¯¹è±¡ï¼Œä¾‹å¦‚å­—èŠ‚æ•°ç»„ã€å­—ç¬¦ä¸²å’Œæ–‡ä»¶å¯¹è±¡ç­‰ã€‚è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå†…å­˜è§†å›¾å¯¹è±¡ï¼Œå®ƒå…è®¸å¯¹objå¯¹è±¡è¿›è¡Œåˆ‡ç‰‡ã€ç´¢å¼•å’Œè¿­ä»£ç­‰æ“ä½œï¼Œä»¥ä¾¿ä»¥ä¸åŒçš„æ–¹å¼è®¿é—®å…¶æ•°æ®ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨memoryview()å‡½æ•°çš„ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºä¸€ä¸ªå­—èŠ‚æ•°ç»„</span><br><span class="line">data = bytearray(b&#x27;hello world&#x27;)</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºä¸€ä¸ªå†…å­˜è§†å›¾å¯¹è±¡</span><br><span class="line">view = memoryview(data)</span><br><span class="line"></span><br><span class="line"># è¾“å‡ºå†…å­˜è§†å›¾å¯¹è±¡</span><br><span class="line">print(view)</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨åˆ‡ç‰‡æ“ä½œè®¿é—®å†…å­˜è§†å›¾å¯¹è±¡</span><br><span class="line">print(view[2:7])</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨forå¾ªç¯è¿­ä»£å†…å­˜è§†å›¾å¯¹è±¡</span><br><span class="line">for item in view:</span><br><span class="line">    print(item)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;memory at 0x7f7d30e8f1c0&gt;</span><br><span class="line">&lt;memory at 0x7f7d30e8f1c0&gt;</span><br><span class="line">&lt;bytes&gt;</span><br><span class="line">bytearray(b&#x27;llo w&#x27;)</span><br><span class="line">104</span><br><span class="line">101</span><br><span class="line">108</span><br><span class="line">108</span><br><span class="line">111</span><br><span class="line">32</span><br><span class="line">119</span><br><span class="line">111</span><br><span class="line">114</span><br><span class="line">108</span><br><span class="line">100</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="m-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="N"><a href="#N" class="headerlink" title="N"></a>N</h2><div class="tabs" id="n"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#n-1">next()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="n-1"><p>next()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒä¼šå¼•å‘StopIterationå¼‚å¸¸ã€‚åœ¨Pythonä¸­ï¼Œè®¸å¤šå¯¹è±¡éƒ½æ˜¯å¯è¿­ä»£çš„ï¼ŒåŒ…æ‹¬åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ã€å­—å…¸ç­‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨next()å‡½æ•°éå†åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">my_iter = <span class="built_in">iter</span>(my_list)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡ºï¼š1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡ºï¼š2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡ºï¼š3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡ºï¼š4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># è¾“å‡ºï¼š5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iter))  <span class="comment"># æŠ›å‡ºStopIterationå¼‚å¸¸</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œé¦–å…ˆä½¿ç”¨<strong>iter()å‡½æ•°å°†åˆ—è¡¨è½¬æ¢ä¸ºè¿­ä»£å™¨å¯¹è±¡my_iterã€‚</strong>ç„¶åï¼Œä½¿ç”¨next()å‡½æ•°éå†è¿­ä»£å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚å½“è¿­ä»£å™¨ä¸­æ²¡æœ‰å…ƒç´ æ—¶ï¼Œnext()å‡½æ•°å°†æŠ›å‡ºStopIterationå¼‚å¸¸ã€‚</p><p>å¯è¿­ä»£çš„ä¸è¡¨ç¤ºå®ƒæ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="O"><a href="#O" class="headerlink" title="O"></a>O</h2><div class="tabs" id="o"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#o-1">object()</button></li><li class="tab"><button type="button" data-href="#o-2">oct()</button></li><li class="tab"><button type="button" data-href="#o-3">open()</button></li><li class="tab"><button type="button" data-href="#o-4">ord()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="o-1"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="o-2"><p>å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºå…«è¿›åˆ¶å­—ç¬¦ä¸²ã€‚</p><p>è¯­æ³•æ ¼å¼ï¼š</p><p>oct(x)</p><p>å…¶ä¸­ï¼Œxä¸ºæ•´æ•°ç±»å‹ï¼Œè¿”å›å€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">oct</span>(<span class="number">10</span>)</span><br><span class="line"><span class="string">&#x27;0o12&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">oct</span>(<span class="number">20</span>)</span><br><span class="line"><span class="string">&#x27;0o24&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">oct</span>(<span class="number">100</span>)</span><br><span class="line"><span class="string">&#x27;0o144&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="o-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="o-4"><p>å‡½æ•°çš„ä½œç”¨æ˜¯å°†å­—ç¬¦è½¬æ¢ä¸ºå®ƒçš„ASCIIç å€¼ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ord</span>(c)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œcè¡¨ç¤ºè¦è½¬æ¢çš„å­—ç¬¦ã€‚</p><p>è¿”å›å€¼ä¸ºæ•´æ•°ï¼Œè¡¨ç¤ºå­—ç¬¦çš„ASCIIç å€¼ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="number">97</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="number">65</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ord</span>(<span class="string">&#x27;ä¸­&#x27;</span>)</span><br><span class="line"><span class="number">20013</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="P"><a href="#P" class="headerlink" title="P"></a>P</h2><div class="tabs" id="p"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#p-1">pow()</button></li><li class="tab"><button type="button" data-href="#p-2">print()</button></li><li class="tab"><button type="button" data-href="#p-3">property()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="p-1"><p>pow()æ˜¯Pythonå†…ç½®çš„æ•°å­¦å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªæ•°çš„å¹‚ï¼Œå¯ä»¥æ¥æ”¶ä¸¤ä¸ªæˆ–ä¸‰ä¸ªå‚æ•°ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pow(x, y[, z])</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>xï¼šåº•æ•°</li><li>yï¼šæŒ‡æ•°</li><li>zï¼šæ¨¡æ•°ï¼Œå¯é€‰å‚æ•°ï¼Œå¦‚æœæŒ‡å®šäº†æ­¤å‚æ•°ï¼Œåˆ™è¿”å›å€¼ä¸ºx^y % zï¼ˆå³xçš„yæ¬¡å¹‚å¯¹zå–æ¨¡çš„ç»“æœï¼‰ã€‚</li></ul><p>è¿”å›å€¼ï¼š</p><ul><li>å¦‚æœåªæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›xçš„yæ¬¡å¹‚çš„å€¼ã€‚</li><li>å¦‚æœæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œè¿”å›xçš„yæ¬¡å¹‚å¯¹zå–æ¨¡çš„å€¼ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">pow</span>(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">pow</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­pow(2, 3)è¿”å›2çš„3æ¬¡å¹‚çš„å€¼ï¼Œå³8ï¼›ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­pow(2, 3, 5)è¿”å›2çš„3æ¬¡å¹‚å¯¹5å–æ¨¡çš„ç»“æœï¼Œå³3ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="p-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="p-3"><p>property()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªå±æ€§ï¼Œè¯¥å±æ€§å¯è¯»ã€å¯å†™æˆ–å¯åˆ é™¤ã€‚å®ƒæ¥å—ä¸‰ä¸ªå¯é€‰å‚æ•°ï¼šfgetï¼Œfsetå’Œfdelï¼Œåˆ†åˆ«ç”¨äºè·å–ã€è®¾ç½®å’Œåˆ é™¤å±æ€§çš„å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºâ€œageâ€çš„å±æ€§ï¼Œå®ƒçš„å€¼å¯ä»¥è¢«è¯»å–å’Œè®¾ç½®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, age</span>):</span><br><span class="line">        self._age = age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @age.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Age cannot be negative&quot;</span>)</span><br><span class="line">        self._age = value</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ@propertyè£…é¥°å™¨å°†æ–¹æ³•â€œageâ€è½¬æ¢ä¸ºä¸€ä¸ªåªè¯»å±æ€§ï¼Œè€Œ@age.setterè£…é¥°å™¨å°†æ–¹æ³•â€œageâ€è½¬æ¢ä¸ºä¸€ä¸ªå¯å†™å±æ€§ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åƒè®¿é—®ç±»çš„å…¶ä»–å±æ€§ä¸€æ ·æ¥è®¿é—®å’Œä¿®æ”¹â€œageâ€å±æ€§çš„å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">person = Person(<span class="number">25</span>)</span><br><span class="line"><span class="built_in">print</span>(person.age)  <span class="comment"># è¾“å‡º 25</span></span><br><span class="line">person.age = <span class="number">30</span></span><br><span class="line"><span class="built_in">print</span>(person.age)  <span class="comment"># è¾“å‡º 30</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å°è¯•å°†â€œageâ€å±æ€§è®¾ç½®ä¸ºè´Ÿæ•°ï¼Œå°†ä¼šå¼•å‘ä¸€ä¸ªValueErrorå¼‚å¸¸ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.age = -<span class="number">10</span>  <span class="comment"># å¼•å‘ ValueError: Age cannot be negative</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="R"><a href="#R" class="headerlink" title="R"></a>R</h2><div class="tabs" id="r"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#r-1">range()</button></li><li class="tab"><button type="button" data-href="#r-2">repr()</button></li><li class="tab"><button type="button" data-href="#r-3">reversed()</button></li><li class="tab"><button type="button" data-href="#r-4">round()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="r-1"><p>range()æ˜¯Pythonå†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªæ•´æ•°åºåˆ—ï¼Œå¸¸ç”¨äºforå¾ªç¯ä¸­ã€‚range()å‡½æ•°æœ‰ä¸‰ç§ç”¨æ³•ï¼š</p><ol><li><p>range(stop)ï¼šç”Ÿæˆä¸€ä¸ªä»0åˆ°stop-1çš„æ•´æ•°åºåˆ—ã€‚</p></li><li><p>range(start, stop)ï¼šç”Ÿæˆä¸€ä¸ªä»startåˆ°stop-1çš„æ•´æ•°åºåˆ—ã€‚</p></li><li><p>range(start, stop, step)ï¼šç”Ÿæˆä¸€ä¸ªä»startåˆ°stop-1çš„æ•´æ•°åºåˆ—ï¼Œæ­¥é•¿ä¸ºstepã€‚</p></li></ol><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š0 1 2 3 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">6</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š0 2 4 6 8</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrange()å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚å¦‚æœéœ€è¦å°†å…¶è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨list()å‡½æ•°ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lst = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(lst)</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š[0, 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="r-2"><p>å‡½æ•°çš„ä½œç”¨æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå¯æ‰“å°çš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªåŒ…å«å…ƒç´ çš„åˆ—è¡¨ï¼Œä½¿ç”¨repr()å‡½æ•°å¯ä»¥å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">repr</span>(my_list))</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3]</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œrepr()å‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²å½¢å¼æ˜¯Pythonä»£ç çš„è¡¨ç¤ºå½¢å¼ï¼Œå¯ä»¥é€šè¿‡eval()å‡½æ•°å°†å…¶è½¬æ¢å›åŸå§‹å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">my_list_str = <span class="built_in">repr</span>(my_list)</span><br><span class="line">my_list_2 = <span class="built_in">eval</span>(my_list_str)</span><br><span class="line"><span class="built_in">print</span>(my_list_2)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="r-3"><p>å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªåºåˆ—ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰åè½¬å¹¶è¿”å›ä¸€ä¸ªåè½¬åçš„è¿­ä»£å™¨å¯¹è±¡ã€‚</p><p>å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">b = <span class="built_in">reversed</span>(a)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(b))  <span class="comment"># [5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šreversed() å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ list() å‡½æ•°å°†å…¶è½¬æ¢ä¸ºåˆ—è¡¨æ‰èƒ½è¾“å‡ºã€‚å¦‚æœåªæ˜¯è¦éå†åè½¬åçš„åºåˆ—ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿­ä»£å™¨å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">reversed</span>(a):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="r-4"><p>å‡½æ•°çš„ä½œç”¨æ˜¯å¯¹æŒ‡å®šçš„æ•°è¿›è¡Œå››èˆäº”å…¥ï¼Œå¯ä»¥æŒ‡å®šä¿ç•™å°æ•°ä½æ•°ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">round</span>(number, ndigits=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><ul><li>numberï¼šè¦è¿›è¡Œå››èˆäº”å…¥çš„æ•°å­—ã€‚</li><li>ndigitsï¼šè¦ä¿ç•™çš„å°æ•°ä½æ•°ï¼Œå¯ä»¥ä¸ºè´Ÿæ•°ã€‚</li></ul><p>è¿”å›å€¼ï¼š</p><p>è¿”å›å››èˆäº”å…¥åçš„æ•°å­—ï¼Œç±»å‹ä¸åŸæ•°å­—ç›¸åŒã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">3.1415926</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">3.1415926</span>, <span class="number">2</span>)</span><br><span class="line"><span class="number">3.14</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">3.1415926</span>, -<span class="number">2</span>)</span><br><span class="line"><span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">23141</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="number">23140</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">23141</span>, -<span class="number">2</span>)</span><br><span class="line"><span class="number">23100</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>å½“ndigitsä¸ºNoneæ—¶ï¼Œround()å‡½æ•°å°†è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯¹æœ€è¿‘çš„æ•´æ•°è¿›è¡Œå››èˆäº”å…¥ã€‚å¦‚æœndigitsä¸ºè´Ÿæ•°ï¼Œåˆ™å››èˆäº”å…¥åˆ°æœ€è¿‘çš„10ã€100ã€1000ç­‰ã€‚å¦‚æœndigitsä¸ºæ­£æ•°ï¼Œåˆ™å››èˆäº”å…¥åˆ°å°æ•°ç‚¹åçš„æŒ‡å®šä½æ•°ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="S"><a href="#S" class="headerlink" title="S"></a>S</h2><div class="tabs" id="s"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#s-1">set()</button></li><li class="tab"><button type="button" data-href="#s-2">setattr()</button></li><li class="tab"><button type="button" data-href="#s-3">slice()</button></li><li class="tab"><button type="button" data-href="#s-4">sorted()</button></li><li class="tab"><button type="button" data-href="#s-5">staticmethod()</button></li><li class="tab"><button type="button" data-href="#s-6">str()</button></li><li class="tab"><button type="button" data-href="#s-7">sum()</button></li><li class="tab"><button type="button" data-href="#s-8">super()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="s-1"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="s-2"><p>å‡½æ•°çš„ä½œç”¨æ˜¯è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼ã€‚</p><p>è¯­æ³•ï¼š</p><p>setattr(object, name, value)</p><p>å‚æ•°è¯´æ˜ï¼š</p><p>objectï¼šè¡¨ç¤ºè¦è®¾ç½®å±æ€§å€¼çš„å¯¹è±¡ã€‚</p><p>nameï¼šè¡¨ç¤ºè¦è®¾ç½®çš„å±æ€§åç§°ã€‚</p><p>valueï¼šè¡¨ç¤ºè¦è®¾ç½®çš„å±æ€§å€¼ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">p = Person()</span><br><span class="line"><span class="built_in">setattr</span>(p, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;Tom&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p.name)  <span class="comment"># è¾“å‡ºï¼šTom</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨setattr()å‡½æ•°è®¾ç½®äº†Personç±»çš„å®ä¾‹pçš„nameå±æ€§å€¼ä¸ºâ€™Tomâ€™ï¼Œå¹¶é€šè¿‡è®¿é—®p.nameå±æ€§æ¥éªŒè¯è®¾ç½®ç»“æœã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="s-3"><p>åœ¨Pythonä¸­ï¼Œslice()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒç”¨äºåˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥ç”¨äºåˆ‡ç‰‡æ“ä½œã€‚åˆ‡ç‰‡æ“ä½œæ˜¯æŒ‡ä»ä¸€ä¸ªåºåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªå­åºåˆ—ã€‚åˆ‡ç‰‡å¯¹è±¡å¯ä»¥ç”¨äºåˆ‡ç‰‡æ“ä½œï¼Œä¾‹å¦‚åœ¨åˆ—è¡¨ã€å…ƒç»„å’Œå­—ç¬¦ä¸²ä¸­ã€‚</p><p>slice()å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><p><code>slice(start, stop, step)</code></p><p>å…¶ä¸­ï¼Œstartè¡¨ç¤ºåˆ‡ç‰‡çš„èµ·å§‹ä½ç½®ï¼ˆé»˜è®¤å€¼ä¸ºNoneï¼‰ï¼Œstopè¡¨ç¤ºåˆ‡ç‰‡çš„ç»“æŸä½ç½®ï¼ˆé»˜è®¤å€¼ä¸ºNoneï¼‰ï¼Œstepè¡¨ç¤ºåˆ‡ç‰‡çš„æ­¥é•¿ï¼ˆé»˜è®¤å€¼ä¸ºNoneï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªåˆ—è¡¨aï¼Œå¯ä»¥ä½¿ç”¨slice()å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡sï¼Œç„¶åä½¿ç”¨sæ¥è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">s = <span class="built_in">slice</span>(<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a[s])  <span class="comment"># è¾“å‡ºï¼š[2, 4]</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡sï¼Œå®ƒä»åˆ—è¡¨açš„ç¬¬1ä¸ªä½ç½®ï¼ˆå³ç¬¬2ä¸ªå…ƒç´ ï¼‰å¼€å§‹ï¼Œåˆ°ç¬¬4ä¸ªä½ç½®ï¼ˆå³ç¬¬5ä¸ªå…ƒç´ ï¼‰ç»“æŸï¼Œæ­¥é•¿ä¸º2ã€‚ç„¶åä½¿ç”¨sæ¥å¯¹åˆ—è¡¨aè¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œè¾“å‡ºç»“æœä¸º[2, 4]ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="s-4"><p>sorted()æ˜¯Pythonå†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºå¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºã€‚å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ–°çš„å·²æ’åºçš„åˆ—è¡¨ï¼Œä¸ä¼šæ”¹å˜åŸæ¥çš„åºåˆ—ã€‚</p><p>sorted()çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sorted(iterable, key=None, reverse=False)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œiterableæ˜¯è¦æ’åºçš„å¯è¿­ä»£å¯¹è±¡ï¼Œä¾‹å¦‚åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆã€å­—å…¸ç­‰ã€‚keyæ˜¯å¯é€‰çš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šä¸€ä¸ªå‡½æ•°æ¥å°†æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºæ¯”è¾ƒé”®ã€‚reverseæ˜¯å¯é€‰çš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ’åºæ˜¯å¦é™åºï¼Œé»˜è®¤ä¸ºå‡åºã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><ol><li>å¯¹åˆ—è¡¨è¿›è¡Œæ’åº</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">sorted_lst = <span class="built_in">sorted</span>(lst)</span><br><span class="line"><span class="built_in">print</span>(sorted_lst)  <span class="comment"># [1, 1, 2, 3, 3, 4, 5, 5, 5, 6, 9]</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å¯¹å…ƒç»„è¿›è¡Œæ’åº</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tpl = (<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;date&#x27;</span>)</span><br><span class="line">sorted_tpl = <span class="built_in">sorted</span>(tpl)</span><br><span class="line"><span class="built_in">print</span>(sorted_tpl)  <span class="comment"># [&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;cherry&#x27;, &#x27;date&#x27;]</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å¯¹é›†åˆè¿›è¡Œæ’åº</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">st = &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">5</span>&#125;</span><br><span class="line">sorted_st = <span class="built_in">sorted</span>(st)</span><br><span class="line"><span class="built_in">print</span>(sorted_st)  <span class="comment"># [1, 2, 3, 4, 5, 6, 9]</span></span><br></pre></td></tr></table></figure><ol start="4"><li>å¯¹å­—å…¸è¿›è¡Œæ’åº</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dct = &#123;<span class="string">&#x27;apple&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;banana&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;cherry&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;date&#x27;</span>: <span class="number">1</span>&#125;</span><br><span class="line">sorted_dct = <span class="built_in">sorted</span>(dct.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(sorted_dct)  <span class="comment"># [(&#x27;date&#x27;, 1), (&#x27;banana&#x27;, 2), (&#x27;apple&#x27;, 3), (&#x27;cherry&#x27;, 4)]</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†lambdaè¡¨è¾¾å¼æ¥æŒ‡å®šæ’åºçš„é”®ã€‚å®ƒçš„ä½œç”¨æ˜¯è¿”å›å…ƒç´ çš„ç¬¬äºŒä¸ªå€¼ï¼Œå³å­—å…¸ä¸­çš„å€¼ã€‚å› æ­¤ï¼Œå­—å…¸æŒ‰å€¼ä»å°åˆ°å¤§æ’åºã€‚</p><p><strong>ä¸€äº›ç®—æ³•é¢˜åº”ç”¨ï¼š</strong></p><div class="tabs" id="åˆ—è¡¨å»é‡"><ul class="nav-tabs"></ul><div class="tab-contents"></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="s-5"><p>staticmethod()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒç”¨äºå°†ä¸€ä¸ªæ–¹æ³•è½¬æ¢ä¸ºé™æ€æ–¹æ³•ã€‚</p><p>é™æ€æ–¹æ³•æ˜¯ä¸€ä¸ªä¸éœ€è¦å®ä¾‹åŒ–ç±»å°±èƒ½è°ƒç”¨çš„æ–¹æ³•ã€‚å®ƒä»¬ä¸ç±»ç›¸å…³ï¼Œä½†æ˜¯ä¸éœ€è¦è®¿é—®å®ä¾‹å±æ€§æˆ–æ–¹æ³•ã€‚é™æ€æ–¹æ³•å¯ä»¥é€šè¿‡ç±»åæˆ–å®ä¾‹åè°ƒç”¨ï¼Œä½†æ˜¯å®ƒä»¬ä¸èƒ½è®¿é—®å®ä¾‹å±æ€§æˆ–æ–¹æ³•ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">my_static_method</span>(<span class="params">arg1, arg2, ...</span>):</span><br><span class="line">        <span class="comment"># æ–¹æ³•ä½“</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œmy_static_method()è¢«å®šä¹‰ä¸ºä¸€ä¸ªé™æ€æ–¹æ³•ã€‚å®ƒå¯ä»¥é€šè¿‡ç±»åæˆ–å®ä¾‹åè°ƒç”¨ï¼Œä½†æ˜¯å®ƒä¸éœ€è¦è®¿é—®å®ä¾‹å±æ€§æˆ–æ–¹æ³•ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">my_static_method</span>(<span class="params">x, y</span>):</span><br><span class="line">        <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(MyClass.my_static_method(<span class="number">3</span>, <span class="number">4</span>)) <span class="comment"># è¾“å‡ºç»“æœä¸º7</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªé™æ€æ–¹æ³•my_static_method()ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°xå’Œyï¼Œå¹¶è¿”å›å®ƒä»¬çš„å’Œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»åMyClassè°ƒç”¨è¿™ä¸ªé™æ€æ–¹æ³•ï¼Œå¹¶ä¼ é€’å‚æ•°3å’Œ4ã€‚è¾“å‡ºç»“æœä¸º7ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="s-6"><p>å‡½æ•°æ˜¯å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚å®ƒå¯ä»¥æ¥å—ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°å­—ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ç­‰ç­‰ï¼Œå°†å…¶è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">123</span></span><br><span class="line">str_num = <span class="built_in">str</span>(num)</span><br><span class="line"><span class="built_in">print</span>(str_num)  <span class="comment"># è¾“å‡ºï¼š&#x27;123&#x27;</span></span><br><span class="line"></span><br><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">str_lst = <span class="built_in">str</span>(lst)</span><br><span class="line"><span class="built_in">print</span>(str_lst)  <span class="comment"># è¾“å‡ºï¼š&#x27;[1, 2, 3]&#x27;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå¯¹è±¡æœ¬èº«å°±æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œé‚£ä¹ˆä½¿ç”¨str()å‡½æ•°å¹¶ä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼Œä»ç„¶è¿”å›åŸå­—ç¬¦ä¸²ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str_s = <span class="built_in">str</span>(s)</span><br><span class="line"><span class="built_in">print</span>(str_s)  <span class="comment"># è¾“å‡ºï¼š&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="s-7"><p>sum()æ˜¯Pythonå†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºå¯¹ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆä¾‹å¦‚åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰ä¸­çš„å…ƒç´ è¿›è¡Œæ±‚å’Œæ“ä½œã€‚</p><p>è¯­æ³•ï¼š</p><p>sum(iterable, start&#x3D;0)</p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>iterable - å¯è¿­ä»£å¯¹è±¡ï¼Œä¾‹å¦‚åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼›</li><li>start - å¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ±‚å’Œçš„åˆå§‹å€¼ï¼Œé»˜è®¤ä¸º0ã€‚</li></ul><p>è¿”å›å€¼ï¼š</p><p>è¿”å›å¯è¿­ä»£å¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ çš„æ€»å’Œã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ æ±‚å’Œ</span></span><br><span class="line">nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(nums))  <span class="comment"># è¾“å‡ºï¼š15</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ±‚å’Œçš„åˆå§‹å€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(nums, <span class="number">10</span>))  <span class="comment"># è¾“å‡ºï¼š25</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹å…ƒç»„ä¸­çš„å…ƒç´ æ±‚å’Œ</span></span><br><span class="line">tup = (<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(tup))  <span class="comment"># è¾“å‡ºï¼š20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹ç”Ÿæˆå™¨ä¸­çš„å…ƒç´ æ±‚å’Œ</span></span><br><span class="line">gen = (x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">6</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(gen))  <span class="comment"># è¾“å‡ºï¼š15</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="s-8"><p>super()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚å®ƒå¯ä»¥ç”¨äºå•ç»§æ‰¿å’Œå¤šç»§æ‰¿çš„æƒ…å†µä¸‹ã€‚</p><p>åœ¨å•ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨super()å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x</span>):</span><br><span class="line">        self.x = x</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span>(<span class="title class_ inherited__">Parent</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(x)</span><br><span class="line">        self.y = y</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒChildç±»ç»§æ‰¿è‡ªParentç±»ï¼Œå®ƒçš„æ„é€ å‡½æ•°ä¸­ä½¿ç”¨äº†super()è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿åˆå§‹åŒ–çˆ¶ç±»çš„å±æ€§ã€‚</p><p>åœ¨å¤šç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨super()å¯ä»¥è§£å†³æ–¹æ³•é‡å¤è°ƒç”¨çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;A.foo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;B.foo&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>().foo()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;C.foo&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>().foo()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span>(B, C):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;D.foo&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>().foo()</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒDç±»åŒæ—¶ç»§æ‰¿è‡ªBå’ŒCç±»ï¼Œå®ƒçš„foo()æ–¹æ³•ä¸­ä½¿ç”¨äº†super()è°ƒç”¨äº†Bå’ŒCç±»çš„foo()æ–¹æ³•ï¼Œä»¥ä¾¿é¿å…é‡å¤è°ƒç”¨Aç±»çš„foo()æ–¹æ³•ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="T"><a href="#T" class="headerlink" title="T"></a>T</h2><div class="tabs" id="t"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#t-1">tuple()</button></li><li class="tab"><button type="button" data-href="#t-2">type()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="t-1"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="t-2"><p>type()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå¯ä»¥ç”¨äºæŸ¥çœ‹ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ã€‚å®ƒçš„è¯­æ³•æ ¼å¼ä¸ºï¼štype(object)ã€‚å…¶ä¸­ï¼Œobjectæ˜¯è¦æŸ¥çœ‹ç±»å‹çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼Œå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ã€å‡½æ•°ç­‰ç­‰ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(x))  <span class="comment"># &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line">y = <span class="string">&#x27;Hello, World!&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(y))  <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line">z = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(z))  <span class="comment"># &lt;class &#x27;list&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­åˆ†åˆ«ä½¿ç”¨type()å‡½æ•°æŸ¥çœ‹äº†æ•´æ•°ã€å­—ç¬¦ä¸²ã€åˆ—è¡¨çš„ç±»å‹ï¼Œè¾“å‡ºç»“æœåˆ†åˆ«ä¸ºintã€strå’Œlistã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="V"><a href="#V" class="headerlink" title="V"></a>V</h2><div class="tabs" id="v"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#v-1">vars()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="v-1"><p>vars()æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡çš„__dict__å±æ€§ã€‚å®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œåˆ™è¿”å›å½“å‰ä½œç”¨åŸŸå†…çš„__dict__å±æ€§ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.x = <span class="number">1</span></span><br><span class="line">        self.y = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">my_obj = MyClass()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">vars</span>(my_obj))  <span class="comment"># &#123;&#x27;x&#x27;: 1, &#x27;y&#x27;: 2&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">vars</span>())  <span class="comment"># è¿”å›å½“å‰ä½œç”¨åŸŸå†…çš„__dict__å±æ€§</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºMyClassçš„ç±»ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰äº†xå’Œyå±æ€§ã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmy_objçš„å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨vars()å‡½æ•°æ‰“å°å…¶å±æ€§å­—å…¸ã€‚ç»“æœæ˜¯{â€˜xâ€™: 1, â€˜yâ€™: 2}ï¼Œè¿™æ˜¯my_objçš„å±æ€§å­—å…¸ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨vars()å‡½æ•°æ¥è·å–å½“å‰ä½œç”¨åŸŸå†…çš„å˜é‡å’Œå€¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">1</span></span><br><span class="line">y = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">vars</span>())  <span class="comment"># è¿”å›å½“å‰ä½œç”¨åŸŸå†…çš„__dict__å±æ€§ï¼ŒåŒ…æ‹¬xå’Œyå˜é‡</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†xå’Œyå˜é‡ï¼Œå¹¶ä½¿ç”¨vars()å‡½æ•°æ‰“å°å½“å‰ä½œç”¨åŸŸå†…çš„__dict__å±æ€§ã€‚ç»“æœæ˜¯{â€˜xâ€™: 1, â€˜yâ€™: 2}ï¼Œè¿™æ˜¯xå’Œyçš„å˜é‡å’Œå€¼ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Z"><a href="#Z" class="headerlink" title="Z"></a>Z</h2><div class="tabs" id="z"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#z-1">zip()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="z-1"><p><code>zip(*iterables, strict=False)</code></p><p>åœ¨å¤šä¸ªè¿­ä»£å™¨ä¸Šå¹¶è¡Œè¿­ä»£ï¼Œä»æ¯ä¸ªè¿­ä»£å™¨è¿”å›ä¸€ä¸ªæ•°æ®é¡¹ç»„æˆå…ƒç»„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">zip</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="string">&#x27;sugar&#x27;</span>, <span class="string">&#x27;spice&#x27;</span>, <span class="string">&#x27;everything nice&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(1, &#x27;sugar&#x27;)</span></span><br><span class="line"><span class="string">(2, &#x27;spice&#x27;)</span></span><br><span class="line"><span class="string">(3, &#x27;everything nice&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è¿”å›æ¯ä¸ªåˆ—è¡¨çš„å…ƒç´ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">zip</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="string">&#x27;sugar&#x27;</span>, <span class="string">&#x27;spice&#x27;</span>, <span class="string">&#x27;everything nice&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(i,j)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1 sugar</span></span><br><span class="line"><span class="string">2 spice</span></span><br><span class="line"><span class="string">3 everything nice</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://docs.python.org/zh-cn/3/library/functions.html#zip"><code>zip()</code></a> æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ï¼šç›´è‡³è¿­ä»£æ—¶æ‰ä¼šå¯¹å…ƒç´ è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ <code>for</code> å¾ªç¯æˆ–æ”¾å…¥ <a href="https://docs.python.org/zh-cn/3/library/stdtypes.html#list"><code>list</code></a> ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">zip</span>(<span class="built_in">range</span>(<span class="number">3</span>), [<span class="string">&#x27;fee&#x27;</span>, <span class="string">&#x27;fi&#x27;</span>, <span class="string">&#x27;fo&#x27;</span>, <span class="string">&#x27;fum&#x27;</span>], strict=<span class="literal">True</span>):  </span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line">(<span class="number">0</span>, <span class="string">&#x27;fee&#x27;</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;fi&#x27;</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;fo&#x27;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: <span class="built_in">zip</span>() argument <span class="number">2</span> <span class="keyword">is</span> longer than argument <span class="number">1</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæœªæŒ‡å®š <code>strict=True</code> å‚æ•°ï¼Œæ‰€æœ‰å¯¼è‡´å¯è¿­ä»£å¯¹è±¡é•¿åº¦ä¸åŒçš„é”™è¯¯éƒ½ä¼šè¢«æŠ‘åˆ¶ï¼Œè¿™å¯èƒ½ä¼šåœ¨ç¨‹åºçš„å…¶ä»–åœ°æ–¹è¡¨ç°ä¸ºéš¾ä»¥å‘ç°çš„é”™è¯¯ï¼Œå»ºè®®ç”¨ <code>strict=True</code> çš„é€‰é¡¹ã€‚</p><p><a href="https://docs.python.org/zh-cn/3/library/functions.html#zip"><code>zip()</code></a> ä¸ <code>*</code> è¿ç®—ç¬¦ç›¸ç»“åˆå¯ä»¥ç”¨æ¥æ‹†è§£ä¸€ä¸ªåˆ—è¡¨:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list1=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">list2=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="built_in">list</span>=<span class="built_in">list</span>(<span class="built_in">zip</span>(list1,list2))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>) <span class="comment"># [(1, &#x27;a&#x27;), (2, &#x27;b&#x27;), (3, &#x27;c&#x27;), (4, &#x27;d&#x27;), (5, &#x27;e&#x27;)]</span></span><br><span class="line">x,y=<span class="built_in">zip</span>(*<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">print</span>(x,y)  <span class="comment"># (1, 2, 3, 4, 5) (&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;)</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id=""><a href="#" class="headerlink" title="-"></a>-</h2><div class="tabs" id="-"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#--1">__import__()</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="--1"><p>ç”¨äºåŠ¨æ€å¯¼å…¥æ¨¡å—ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¼ å‚æ–¹å¼ï¼šå¯å˜/ä¸å¯å˜å¯¹è±¡</title>
      <link href="/2023/04/25/Python%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F%EF%BC%9A%E5%8F%AF%E5%8F%98-%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%AF%B9%E8%B1%A1/"/>
      <url>/2023/04/25/Python%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F%EF%BC%9A%E5%8F%AF%E5%8F%98-%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/article_img/Python/1.jpg" style="border-radius:10px" width="1000px"></img></p><p>åœ¨Pythonä¸­ï¼Œæ•°å­—ã€å­—ç¬¦ä¸²ä¸å…ƒç»„æ˜¯ä¸å¯å˜ç±»å‹ï¼Œè€Œåˆ—è¡¨ã€å­—å…¸ã€é›†åˆæ˜¯å¯å˜ç±»å‹ï¼Œä¸¤è€…åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li><strong>ä¸å¯å˜ç±»å‹</strong>â€”â€”è¯¥ç±»å‹çš„å¯¹è±¡æ‰€ä»£è¡¨çš„å€¼ä¸èƒ½è¢«æ”¹å˜ã€‚å½“æ”¹å˜æŸä¸ªå˜é‡æ—¶ï¼Œç”±äºå…¶æ‰€æŒ‡çš„å€¼ä¸èƒ½è¢«æ”¹å˜ï¼Œç›¸å½“äºæŠŠåŸæ¥çš„å€¼å¤åˆ¶ä¸€ä»½åå†æ”¹å˜ï¼Œè¿™ä¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„åœ°å€ï¼Œå˜é‡å†æŒ‡å‘è¿™ä¸ªæ–°çš„åœ°å€ã€‚ï¼ˆå€¼ä¼ é€’ï¼‰</li><li><strong>å¯å˜ç±»å‹</strong>â€”â€”è¯¥ç±»å‹çš„å¯¹è±¡æ‰€ä»£è¡¨çš„å€¼å¯ä»¥è¢«æ”¹å˜ã€‚å˜é‡æ”¹å˜åï¼Œå®é™…ä¸Šæ˜¯å…¶æ‰€æŒ‡çš„å€¼ç›´æ¥å‘ç”Ÿæ”¹å˜ï¼Œå¹¶æ²¡æœ‰å‘ç”Ÿå¤åˆ¶è¡Œä¸ºï¼Œä¹Ÿæ²¡æœ‰å¼€è¾Ÿå‡ºæ–°çš„åœ°å€ã€‚ï¼ˆåœ°å€ä¼ é€’ï¼‰</li></ul><p>ä¸‹é¢ä»¥ä¸€ä¸ªä¾‹å­è¯´æ˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test1</span>(<span class="params">alist</span>):</span><br><span class="line">    alist.append(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(alist)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(alist))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>(<span class="params">astr</span>):</span><br><span class="line">    astr += <span class="string">&#x27;.space&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(astr)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(astr))</span><br><span class="line"></span><br><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]    <span class="comment"># å¯å˜å¯¹è±¡</span></span><br><span class="line">str1 = <span class="string">&#x27;dai2yutou&#x27;</span>  <span class="comment"># ä¸å¯å˜å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å‰</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ·»åŠ å‰&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(list1)    <span class="comment"># [1, 2, 3, 4]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(list1))    <span class="comment"># 2708903970752</span></span><br><span class="line"><span class="built_in">print</span>(str1)     <span class="comment"># dai2yutou</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(str1))     <span class="comment"># 2708906967920</span></span><br><span class="line"><span class="comment"># æ·»åŠ åï¼Œå‡½æ•°ä¸­å˜é‡æ‰“å°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ·»åŠ åï¼Œå‡½æ•°ä¸­å˜é‡æ‰“å°&quot;</span>)</span><br><span class="line">test1(list1)     <span class="comment"># [1, 2, 3, 4, 5]  2708903970752</span></span><br><span class="line">test2(str1)     <span class="comment"># dai2yutou.space   2708906977392</span></span><br><span class="line"><span class="comment"># æ·»åŠ åï¼ŒåŸå˜é‡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ·»åŠ åï¼ŒåŸå˜é‡&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(list1)    <span class="comment"># [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(list1))    <span class="comment"># 2708903970752</span></span><br><span class="line"><span class="built_in">print</span>(str1)     <span class="comment"># dai2yutou</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(str1))     <span class="comment"># 2708906967920</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œtest1å‡½æ•°ä¼ å…¥çš„å‚æ•°æ˜¯åˆ—è¡¨ï¼Œåˆ—è¡¨æ˜¯å¯å˜åºåˆ—,å› æ­¤ä¼ å…¥çš„æ˜¯åˆ—è¡¨çš„åœ°å€å€¼ï¼Œå¯¹åˆ—è¡¨è¿›è¡Œappendï¼Œåˆ™ä¼ å…¥çš„ä¸ä¹‹å‰çš„éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚è€Œtest2å‡½æ•°ä¼ å…¥çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜åºåˆ—ï¼Œå› æ­¤ä¼ å…¥çš„æ˜¯å˜é‡çš„å€¼ï¼Œä¿®æ”¹åï¼Œä¹‹å‰çš„å­—ç¬¦ä¸²ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ä¸­é‡åˆ°çš„åŸºç¡€ä¸ä¼šçš„çŸ¥è¯†</title>
      <link href="/2023/04/24/python%E5%AD%A6%E4%B9%A0%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8D%E4%BC%9A%E7%9A%84%E7%9F%A5%E8%AF%86/"/>
      <url>/2023/04/24/python%E5%AD%A6%E4%B9%A0%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8D%E4%BC%9A%E7%9A%84%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/article_img/Python/1.jpg" style="border-radius:10px" width="1000px"></img></p><h1 id="ä¸€ã€æ‚"><a href="#ä¸€ã€æ‚" class="headerlink" title="ä¸€ã€æ‚"></a>ä¸€ã€æ‚</h1><p>1.æ³¨æ„ï¼šåè¿›åˆ¶è½¬æ¢è¿›åˆ¶åï¼Œå°±æˆä¸ºstrç±»å‹äº†ã€‚<br>2.int()å‡½æ•°é»˜è®¤å¤„ç†çš„æ˜¯åè¿›åˆ¶ï¼Œå½“å¤„ç†å…¶ä»–è¿›åˆ¶æ—¶ï¼Œéœ€è¦æ·»åŠ æ¡ä»¶</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;0b1010&#x27;</span><span class="comment">#äºŒè¿›åˆ¶</span></span><br><span class="line">b = <span class="built_in">int</span>(a,base=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(b)    <span class="comment"># 10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(b))  <span class="comment"># &lt;class &#x27;int&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>3.<strong>å…³äºround()å‡½æ•°</strong></p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="built_in">round</span>(<span class="number">0.375</span>,<span class="number">2</span>)<span class="comment"># å››èˆå…­å…¥äº”ç•™åŒ</span></span><br><span class="line"><span class="built_in">print</span>(a)<span class="comment"># 0.38</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">â€œå››â€æ˜¯æŒ‡â‰¤4æ—¶èˆå»ï¼Œ</span></span><br><span class="line"><span class="string">&quot;å…­&quot;æ˜¯æŒ‡â‰¥6æ—¶è¿›ä¸Šã€‚</span></span><br><span class="line"><span class="string">&quot;äº”&quot;æŒ‡çš„æ˜¯æ ¹æ®5åé¢çš„æ•°å­—æ¥å®šï¼Œå½“5åæœ‰æ•°æ—¶ï¼Œèˆ5å…¥1ï¼›</span></span><br><span class="line"><span class="string">å½“5åæ— æœ‰æ•ˆæ•°å­—æ—¶ï¼Œéœ€è¦åˆ†ä¸¤ç§æƒ…å†µæ¥è®²ï¼š5å‰ä¸ºå¥‡æ•°ï¼Œèˆ5å…¥1ï¼›5å‰ä¸ºå¶æ•°ï¼Œèˆ5ä¸è¿›ï¼ˆ0æ˜¯å¶æ•°ï¼‰ã€‚</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>4.ç¼–ç ä¸è§£ç </p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">encode()</span><br><span class="line">decode()</span><br></pre></td></tr></table></figure><p>5.<strong>æ³¨æ„ä¸€äº›å­—ç¬¦ä¸²çš„å¤„ç†æ–¹æ³•</strong></p><pre><code>- ###### strip()ï¼Œjoin()</code></pre><hr><p>6.<strong>chr(n)</strong></p><p>  chr(n) æ˜¯ Python å†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºå°† Unicode ç ä½å€¼ n è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ã€‚<br>  å®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º Unicode ç ä½å€¼ n æ‰€å¯¹åº”çš„å•ä¸ªå­—ç¬¦ã€‚<br>  ä¾‹å¦‚ï¼Œchr(65) è¿”å›å­—ç¬¦ â€˜Aâ€™ï¼Œchr(8364) è¿”å›å­—ç¬¦ â€˜â‚¬â€™ã€‚<br>7.<strong>sorted() å‡½æ•°</strong></p><p>  <a href="http://c.biancheng.net/view/2239.html">Python sortedå‡½æ•°åŠç”¨æ³• (biancheng.net)</a></p><p>  <a href="https://www.runoob.com/python/python-func-sorted.html">Python sorted() å‡½æ•°</a></p><h1 id="äºŒã€å…³äºæ–‡ä»¶å¤„ç†ï¼š"><a href="#äºŒã€å…³äºæ–‡ä»¶å¤„ç†ï¼š" class="headerlink" title="äºŒã€å…³äºæ–‡ä»¶å¤„ç†ï¼š"></a>äºŒã€å…³äºæ–‡ä»¶å¤„ç†ï¼š</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os <span class="comment"># Pythonçš„ç³»ç»Ÿç¼–ç¨‹çš„æ“ä½œæ¨¡å—,å¯ä»¥å¤„ç†æ–‡ä»¶å’Œç›®å½•</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">withè¯­æ³•æ˜¯ä¸€ç§ä¸Šä¸‹æ–‡çš„ç®¡ç†åè®®ï¼Œç”¨äºç®€åŒ–tryâ€¦exceptâ€¦finallyçš„å¤„ç†æµç¨‹ã€‚</span></span><br><span class="line"><span class="string">withé€šè¿‡__enter__æ–¹æ³•åˆå§‹åŒ–</span></span><br><span class="line"><span class="string">ç„¶ååœ¨__exit__ä¸­åšå–„åä»¥åŠå¤„ç†å¼‚å¸¸</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;##æ–¹æ³•ä¸€##&#x27;</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;work/è¯—æ­Œ.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(f.read())</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;##æ–¹æ³•äºŒ##&#x27;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;work/è¯—æ­Œ.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;fail to open&#x27;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br><span class="line">    </span><br><span class="line"><span class="string">&#x27;##æ–¹æ³•ä¸‰##&#x27;</span></span><br><span class="line"><span class="comment">#è¿™é‡Œwithè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰§è¡Œäº†é€€å‡ºçš„æ“ä½œï¼Œä¸éœ€è¦é¢å¤–è¿›è¡Œåç»­çš„å¤„ç†</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;work/è¯—æ­Œ.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br></pre></td></tr></table></figure><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ³¨æ„è¯»ä¹Ÿå¯ä»¥è¯»ä¸€è¡Œä¸­çš„éƒ¨åˆ†å†…å®¹ã€‚æˆ–è€…å“ªå‡ è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€è¡Œï¼ŒæŸä¸€ä¸ªé•¿åº¦</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;work/è¯—æ­Œ.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(f.readline()[<span class="number">2</span>:<span class="number">7</span>])</span><br><span class="line"><span class="comment"># æ‰€æœ‰è¡Œï¼ŒæŸä¸€è¡Œ</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;work/è¯—æ­Œ.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(f.readlines()[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;work/è¯—æ­Œ.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(f.readlines())</span><br><span class="line"><span class="built_in">print</span>(f.read())</span><br><span class="line"><span class="built_in">print</span>(f.readline())</span><br><span class="line"><span class="comment">#[&#x27;åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚&#x27;]</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(f.tell()) <span class="comment">#æŒ‡é’ˆçš„ä½ç½®</span></span><br><span class="line"><span class="comment">#å­—èŠ‚çš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line">f.seek()<span class="comment">#éƒ½æ˜¯å­—èŠ‚é‡çš„ç§»åŠ¨</span></span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€å…³äºå‡½æ•°éƒ¨åˆ†"><a href="#ä¸‰ã€å…³äºå‡½æ•°éƒ¨åˆ†" class="headerlink" title="ä¸‰ã€å…³äºå‡½æ•°éƒ¨åˆ†"></a>ä¸‰ã€å…³äºå‡½æ•°éƒ¨åˆ†</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># *çš„æ‰©å±•-ç»Ÿè®¡å¾—åˆ†-è·å–å¤šä¸ªæ•°å€¼</span></span><br><span class="line"></span><br><span class="line">first, *mean, last = [<span class="number">100</span>, <span class="number">95</span>, <span class="number">75</span>, <span class="number">65</span>, <span class="number">60</span>]</span><br><span class="line"><span class="built_in">print</span>(first,mean,last)<span class="comment">#100 [95, 75, 65] 60</span></span><br><span class="line"><span class="built_in">print</span>(*mean)<span class="comment">#95 75 65</span></span><br><span class="line"><span class="built_in">print</span>(mean)<span class="comment">#[95, 75, 65]</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*mean, = <span class="number">95</span>, <span class="number">75</span></span><br><span class="line"><span class="comment">#è¿›è¡Œå¤šä¸ªå€¼èµ‹å€¼çš„æ—¶å€™ï¼Œå‰é¢çš„å˜é‡ä¸€å®šè¦å˜æˆå…ƒç»„</span></span><br><span class="line"><span class="comment">#*mean = 95, 75 # é”™è¯¯ç”¨æ³•</span></span><br><span class="line"><span class="built_in">print</span>(mean)     <span class="comment">#[95, 75]</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">param</span>(<span class="params">a, *args</span>):</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;a =&quot;</span>, a)</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;args =&quot;</span>, args)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">for</span> arg <span class="keyword">in</span> args:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;arg =&quot;</span>, arg)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">param(<span class="string">&quot;say:&quot;</span>,<span class="string">&quot;It&#x27;s&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;nice&quot;</span>,<span class="string">&quot;day&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">a = say:</span></span><br><span class="line"><span class="string">args = (&quot;It&#x27;s&quot;, &#x27;a&#x27;, &#x27;nice&#x27;, &#x27;day&#x27;)</span></span><br><span class="line"><span class="string">arg = It&#x27;s</span></span><br><span class="line"><span class="string">arg = a</span></span><br><span class="line"><span class="string">arg = nice</span></span><br><span class="line"><span class="string">arg = day</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">l = [(<span class="string">&quot;ç¬¬ä¸€&quot;</span>, <span class="number">100</span>, <span class="string">&quot;å¾ˆå¥½&quot;</span>), (<span class="string">&quot;ç¬¬äºŒ&quot;</span>, <span class="number">90</span>, <span class="string">&quot;å¥½&quot;</span>), (<span class="string">&quot;ç¬¬ä¸‰&quot;</span>, <span class="number">80</span>, <span class="string">&quot;ä¸€èˆ¬&quot;</span>), (<span class="string">&quot;ç¬¬å››&quot;</span>, <span class="number">60</span>, <span class="string">&quot;å·®&quot;</span>)]</span><br><span class="line"><span class="keyword">for</span> d, *p <span class="keyword">in</span> l:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;åæ¬¡æ˜¯<span class="subst">&#123;d&#125;</span>ï¼Œåˆ†æ•°æ˜¯<span class="subst">&#123;p&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">åæ¬¡æ˜¯ç¬¬ä¸€ï¼Œåˆ†æ•°æ˜¯[100, &#x27;å¾ˆå¥½&#x27;]</span></span><br><span class="line"><span class="string">åæ¬¡æ˜¯ç¬¬äºŒï¼Œåˆ†æ•°æ˜¯[90, &#x27;å¥½&#x27;]</span></span><br><span class="line"><span class="string">åæ¬¡æ˜¯ç¬¬ä¸‰ï¼Œåˆ†æ•°æ˜¯[80, &#x27;ä¸€èˆ¬&#x27;]</span></span><br><span class="line"><span class="string">åæ¬¡æ˜¯ç¬¬å››ï¼Œåˆ†æ•°æ˜¯[60, &#x27;å·®&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="å››ã€å°ç»ƒä¹ é¢˜"><a href="#å››ã€å°ç»ƒä¹ é¢˜" class="headerlink" title="å››ã€å°ç»ƒä¹ é¢˜"></a>å››ã€å°ç»ƒä¹ é¢˜</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">demp</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> n*n</span><br><span class="line">lst = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: demp(x),lst)))     <span class="comment"># [1, 4, 9, 16, 25]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">x = [[random.randint(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> x:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;___________________&quot;</span>)</span><br><span class="line">y = <span class="built_in">sorted</span>(x,key=<span class="keyword">lambda</span> item:(item[<span class="number">1</span>],item[<span class="number">4</span>]))</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> y:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[10, 1, 9, 1, 5]</span></span><br><span class="line"><span class="string">[3, 2, 3, 8, 5]</span></span><br><span class="line"><span class="string">[7, 4, 6, 7, 6]</span></span><br><span class="line"><span class="string">[7, 9, 9, 7, 8]</span></span><br><span class="line"><span class="string">[1, 9, 7, 8, 5]</span></span><br><span class="line"><span class="string">___________________</span></span><br><span class="line"><span class="string">[10, 1, 9, 1, 5]</span></span><br><span class="line"><span class="string">[3, 2, 3, 8, 5]</span></span><br><span class="line"><span class="string">[7, 4, 6, 7, 6]</span></span><br><span class="line"><span class="string">[1, 9, 7, 8, 5]</span></span><br><span class="line"><span class="string">[7, 9, 9, 7, 8]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å­¦å»ºæ¨¡å›¾åƒå¤„ç†</title>
      <link href="/2023/04/12/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
      <url>/2023/04/12/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/23.jpg" alt="1"></p><h2 id="å›¾åƒå½¢æ€å­¦è¿ç®—"><a href="#å›¾åƒå½¢æ€å­¦è¿ç®—" class="headerlink" title="å›¾åƒå½¢æ€å­¦è¿ç®—"></a>å›¾åƒå½¢æ€å­¦è¿ç®—</h2><p>å›¾åƒå½¢æ€å­¦è¿ç®—æ˜¯ä¸€ç§åŸºäºå›¾åƒå½¢æ€å­¦ç†è®ºçš„å›¾åƒå¤„ç†æ–¹æ³•ï¼Œç”¨äºå¯¹å›¾åƒè¿›è¡Œå½¢æ€å­¦æ“ä½œï¼Œå¦‚è†¨èƒ€ã€è…èš€ã€å¼€è¿ç®—ã€é—­è¿ç®—ç­‰ã€‚è¿™äº›æ“ä½œå¯ä»¥ç”¨äºå»é™¤å›¾åƒä¸­çš„å™ªå£°ã€å¡«è¡¥å›¾åƒä¸­çš„ç©ºæ´ã€åˆ†ç¦»å›¾åƒä¸­çš„ç‰©ä½“ç­‰åº”ç”¨ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å›¾åƒå½¢æ€å­¦è¿ç®—ï¼š</p><ol><li>è†¨èƒ€ï¼ˆDilationï¼‰ï¼šè†¨èƒ€æ“ä½œå¯ä»¥å°†å›¾åƒä¸­çš„ç‰©ä½“è¾¹ç•Œå‘å¤–æ‰©å¼ ï¼Œä½¿ç‰©ä½“å˜å¤§ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¡«è¡¥ç‰©ä½“å†…éƒ¨çš„ç©ºæ´ã€‚</li><li>è…èš€ï¼ˆErosionï¼‰ï¼šè…èš€æ“ä½œå¯ä»¥å°†å›¾åƒä¸­çš„ç‰©ä½“è¾¹ç•Œå‘å†…æ”¶ç¼©ï¼Œä½¿ç‰©ä½“å˜å°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å»é™¤ç‰©ä½“è¾¹ç•Œä¸Šçš„å™ªå£°ã€‚</li><li>å¼€è¿ç®—ï¼ˆOpeningï¼‰ï¼šå¼€è¿ç®—æ˜¯å…ˆè¿›è¡Œè…èš€æ“ä½œï¼Œå†è¿›è¡Œè†¨èƒ€æ“ä½œï¼Œç”¨äºå»é™¤å›¾åƒä¸­çš„å°å™ªå£°å’Œç»†å°çš„ç‰©ä½“ã€‚</li><li>é—­è¿ç®—ï¼ˆClosingï¼‰ï¼šé—­è¿ç®—æ˜¯å…ˆè¿›è¡Œè†¨èƒ€æ“ä½œï¼Œå†è¿›è¡Œè…èš€æ“ä½œï¼Œç”¨äºå¡«è¡¥å›¾åƒä¸­çš„å°ç©ºæ´å’Œè¿æ¥ç»†å°çš„ç‰©ä½“ã€‚</li><li>æ¢¯åº¦è¿ç®—ï¼ˆGradientï¼‰ï¼šæ¢¯åº¦è¿ç®—æ˜¯å¯¹å›¾åƒè¿›è¡Œè†¨èƒ€å’Œè…èš€æ“ä½œåå¾—åˆ°çš„å·®å€¼å›¾åƒï¼Œç”¨äºåˆ†ç¦»ç‰©ä½“è¾¹ç•Œã€‚</li><li>é¡¶å¸½è¿ç®—ï¼ˆTop Hatï¼‰ï¼šé¡¶å¸½è¿ç®—æ˜¯åŸå§‹å›¾åƒä¸å¼€è¿ç®—ä¹‹é—´çš„å·®å€¼å›¾åƒï¼Œç”¨äºåˆ†ç¦»ç»†å°çš„ç‰©ä½“ã€‚</li><li>åº•å¸½è¿ç®—ï¼ˆBottom Hatï¼‰ï¼šåº•å¸½è¿ç®—æ˜¯é—­è¿ç®—ä¸åŸå§‹å›¾åƒä¹‹é—´çš„å·®å€¼å›¾åƒï¼Œç”¨äºåˆ†ç¦»å¤§çš„ç‰©ä½“ã€‚</li></ol><h2 id="imread"><a href="#imread" class="headerlink" title="imread()"></a>imread()</h2><p>imreadå‡½æ•°æ˜¯matlabä¸­ç”¨äºè¯»å–å›¾åƒæ–‡ä»¶çš„å‡½æ•°ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I = imread(filename)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œfilenameæ˜¯è¦è¯»å–çš„å›¾åƒæ–‡ä»¶åï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ã€‚Iæ˜¯è¯»å–å‡ºçš„å›¾åƒçŸ©é˜µï¼Œå®ƒçš„ç±»å‹å’Œå¤§å°å–å†³äºåŸå§‹å›¾åƒæ–‡ä»¶çš„æ ¼å¼å’Œé¢œè‰²æ·±åº¦ã€‚</p><p>imreadå‡½æ•°æ”¯æŒè¯»å–å¤šç§å›¾åƒæ ¼å¼ï¼ŒåŒ…æ‹¬bmpã€jpgã€pngã€tifç­‰ã€‚å¦‚æœè¯»å–çš„å›¾åƒæ–‡ä»¶æ ¼å¼ä¸å—æ”¯æŒï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>é™¤äº†è¯»å–å›¾åƒæ–‡ä»¶å¤–ï¼Œimreadå‡½æ•°è¿˜æ”¯æŒè¯»å–ç½‘ç»œä¸Šçš„å›¾åƒæ–‡ä»¶ï¼Œåªéœ€è¦å°†filenameæŒ‡å®šä¸ºç½‘ç»œä¸Šçš„URLåœ°å€å³å¯ã€‚</p><h2 id="imshow"><a href="#imshow" class="headerlink" title="imshow()"></a>imshow()</h2><p>imshowå‡½æ•°æ˜¯matlabä¸­ç”¨äºæ˜¾ç¤ºå›¾åƒçš„å‡½æ•°ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imshow(I)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ŒIæ˜¯è¦æ˜¾ç¤ºçš„å›¾åƒçŸ©é˜µã€‚imshowå‡½æ•°ä¼šè‡ªåŠ¨æ ¹æ®å›¾åƒçŸ©é˜µçš„ç±»å‹å’Œå¤§å°æ¥ç¡®å®šæ˜¾ç¤ºçš„æ–¹å¼å’Œé¢œè‰²æ·±åº¦ã€‚</p><p>é™¤äº†æ˜¾ç¤ºå›¾åƒçŸ©é˜µå¤–ï¼Œimshowå‡½æ•°è¿˜æ”¯æŒæ˜¾ç¤ºç°åº¦å›¾åƒã€RGBå›¾åƒã€äºŒå€¼å›¾åƒå’Œå½©è‰²å›¾åƒã€‚å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‚æ•°æ¥æŒ‡å®šæ˜¾ç¤ºçš„æ–¹å¼ï¼Œä¾‹å¦‚ï¼š</p><ul><li><p>imshow(I,[]) % æ˜¾ç¤ºç°åº¦å›¾åƒ</p></li><li><p>imshow(I,[low high]) % æ˜¾ç¤ºç°åº¦å›¾åƒï¼Œå¹¶æŒ‡å®šç°åº¦çº§çš„èŒƒå›´</p></li><li><p>imshow(RGB) % æ˜¾ç¤ºRGBå›¾åƒ</p></li><li><p>imshow(BW) % æ˜¾ç¤ºäºŒå€¼å›¾åƒ</p></li><li><p>imshow(X,map) % æ˜¾ç¤ºç´¢å¼•å›¾åƒ</p></li><li><p>imshow(X,R) % æ˜¾ç¤ºå½©è‰²å›¾åƒï¼Œå¹¶æŒ‡å®šé¢œè‰²ç©ºé—´</p></li></ul><p>æ­¤å¤–ï¼Œimshowå‡½æ•°è¿˜æ”¯æŒä¸€äº›äº¤äº’å¼æ“ä½œï¼Œä¾‹å¦‚æ”¾å¤§ã€ç¼©å°ã€å¹³ç§»å’Œæ—‹è½¬ç­‰ã€‚å¯ä»¥ä½¿ç”¨é¼ æ ‡æˆ–é”®ç›˜æ¥è¿›è¡Œæ“ä½œã€‚</p><h2 id="rgb2gray"><a href="#rgb2gray" class="headerlink" title="rgb2gray()"></a>rgb2gray()</h2><p><strong>åŸç†ï¼š</strong></p><p>rgb2grayæ˜¯ä¸€ç§å°†RGBå›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒçš„å‡½æ•°ã€‚å…¶ä½œç”¨åŸç†æ˜¯å°†RGBå›¾åƒä¸­çš„ä¸‰ä¸ªé¢œè‰²é€šé“ï¼ˆçº¢è‰²ã€ç»¿è‰²å’Œè“è‰²ï¼‰è¿›è¡ŒåŠ æƒå¹³å‡ï¼Œå¾—åˆ°ä¸€ä¸ªç°åº¦å€¼ï¼Œç”¨äºè¡¨ç¤ºè¯¥åƒç´ çš„äº®åº¦ã€‚</p><p>å…·ä½“åœ°ï¼Œrgb2grayçš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><p>gray &#x3D; 0.2989 * R + 0.5870 * G + 0.1140 * B</p><p>å…¶ä¸­ï¼ŒRã€Gã€Båˆ†åˆ«ä¸ºè¯¥åƒç´ åœ¨RGBå›¾åƒä¸­çš„çº¢ã€ç»¿ã€è“é€šé“å€¼ï¼Œgrayä¸ºè®¡ç®—å¾—åˆ°çš„ç°åº¦å€¼ã€‚è¿™ä¸ªå…¬å¼ä¸­çš„æƒé‡å€¼æ˜¯ç»è¿‡å®éªŒå¾—å‡ºçš„ï¼Œå…¶ç›®çš„æ˜¯ä½¿å¾—è®¡ç®—å‡ºçš„ç°åº¦å€¼æ›´ç¬¦åˆäººç±»è§†è§‰æ„ŸçŸ¥çš„äº®åº¦ã€‚</p><p>é€šè¿‡rgb2grayå‡½æ•°å°†RGBå›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒåï¼Œæ¯ä¸ªåƒç´ åªéœ€è¦ä¸€ä¸ªç°åº¦å€¼æ¥è¡¨ç¤ºï¼Œä»è€Œå‡å°‘äº†å­˜å‚¨ç©ºé—´ï¼Œæ–¹ä¾¿äº†å›¾åƒå¤„ç†å’Œåˆ†æã€‚</p><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p>åœ¨Matlabä¸­ï¼Œrgb2grayå‡½æ•°ä¹Ÿæ˜¯å°†RGBå›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒçš„å‡½æ•°ï¼Œå…¶ä½¿ç”¨æ–¹æ³•å’Œè§£é‡Šå¦‚ä¸‹ï¼š</p><ol><li>å¯¼å…¥éœ€è¦å¤„ç†çš„å›¾åƒæ–‡ä»¶ï¼š</li></ol><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img = imread(<span class="string">&#x27;example.jpg&#x27;</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨rgb2grayå‡½æ•°è¿›è¡Œè½¬æ¢ï¼š</li></ol><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gray_img = rgb2gray(img);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œimgä¸ºåŸå§‹çš„RGBå›¾åƒï¼Œgray_imgä¸ºè½¬æ¢åçš„ç°åº¦å›¾åƒã€‚åœ¨Matlabä¸­ï¼Œrgb2grayå‡½æ•°ç›´æ¥å°†RGBå›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œæ— éœ€ä¼ å…¥é¢œè‰²ç©ºé—´å‚æ•°ã€‚</p><ol start="3"><li>å¯ä»¥ä½¿ç”¨imshowå‡½æ•°å°†åŸå§‹å›¾åƒå’Œè½¬æ¢åçš„ç°åº¦å›¾åƒæ˜¾ç¤ºå‡ºæ¥ï¼š</li></ol><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">imshow(img);</span><br><span class="line">title(<span class="string">&#x27;Original Image&#x27;</span>);</span><br><span class="line"><span class="built_in">figure</span>;</span><br><span class="line">imshow(gray_img);</span><br><span class="line">title(<span class="string">&#x27;Gray Image&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œimshowå‡½æ•°ç”¨äºæ˜¾ç¤ºå›¾åƒï¼Œtitleå‡½æ•°ç”¨äºè®¾ç½®å›¾åƒæ ‡é¢˜ï¼Œfigureå‡½æ•°ç”¨äºåˆ›å»ºæ–°çš„å›¾åƒçª—å£ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Matlabä¸­ï¼Œå›¾åƒçš„é¢œè‰²é€šé“é¡ºåºæ˜¯RGBï¼Œè€Œä¸æ˜¯OpenCVä¸­çš„BGRã€‚å› æ­¤ï¼Œåœ¨Matlabä¸­è¯»å–çš„å›¾åƒæ˜¯RGBæ ¼å¼çš„ï¼Œè€Œä¸éœ€è¦è¿›è¡Œé¢œè‰²é€šé“çš„è½¬æ¢ã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒMatlabä¸­çš„rgb2grayå‡½æ•°ä½¿ç”¨æ–¹æ³•ç®€å•ï¼Œç›´æ¥å°†RGBå›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œé€‚åˆå¤„ç†å°è§„æ¨¡çš„å›¾åƒæ•°æ®ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼Œå°†é¢œè‰²æ˜ å°„è½¬æ¢ä¸ºç°åº¦ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[X,map] = imread(<span class="string">&#x27;corn.tif&#x27;</span>); </span><br><span class="line">imshow(X,map);</span><br><span class="line">newmap = rgb2gray(map);</span><br><span class="line">imshow(X,newmap)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨imreadå‡½æ•°è¯»å–åä¸ºâ€corn.tifâ€çš„å›¾åƒæ–‡ä»¶ï¼Œå¹¶å°†ç”Ÿæˆçš„å›¾åƒçŸ©é˜µåˆ†é…ç»™å˜é‡Xã€‚å®ƒè¿˜è¯»å–åä¸ºâ€mapâ€çš„é¢œè‰²æ˜ å°„ï¼Œå¹¶å°†å…¶åˆ†é…ç»™å˜é‡mapã€‚ç„¶åï¼Œä½¿ç”¨imshowå‡½æ•°ä½¿ç”¨é¢œè‰²æ˜ å°„mapæ˜¾ç¤ºç”±Xè¡¨ç¤ºçš„å›¾åƒã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨rgb2grayå‡½æ•°å°†é¢œè‰²æ˜ å°„mapè½¬æ¢ä¸ºç°åº¦ï¼Œå¹¶å°†ç”Ÿæˆçš„é¢œè‰²æ˜ å°„åˆ†é…ç»™å˜é‡newmapã€‚æœ€åï¼Œå†æ¬¡ä½¿ç”¨imshowå‡½æ•°ä½¿ç”¨æ–°çš„ç°åº¦é¢œè‰²æ˜ å°„newmapæ˜¾ç¤ºç”±Xè¡¨ç¤ºçš„å›¾åƒã€‚</p><h2 id="imresize"><a href="#imresize" class="headerlink" title="imresize()"></a>imresize()</h2><p>imresizeæ˜¯MATLABçš„ä¸€ä¸ªå›¾åƒå¤„ç†å‡½æ•°ï¼Œç”¨äºè°ƒæ•´å›¾åƒçš„å¤§å°ã€‚å®ƒå¯ä»¥å°†å›¾åƒç¼©å°æˆ–æ”¾å¤§åˆ°æŒ‡å®šçš„å°ºå¯¸ï¼Œå¹¶æ”¯æŒå¤šç§æ’å€¼æ–¹æ³•ã€‚</p><p>imresizeçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><p>imresize(A, scale)ï¼šå°†å›¾åƒAæŒ‰ç…§æ¯”ä¾‹scaleè¿›è¡Œç¼©æ”¾ï¼Œscaleå¯ä»¥æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œè¡¨ç¤ºç¼©æ”¾çš„æ¯”ä¾‹ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªäºŒå…ƒç»„(x_scale, y_scale)ï¼Œè¡¨ç¤ºåœ¨xå’Œyæ–¹å‘ä¸Šçš„ç¼©æ”¾æ¯”ä¾‹ã€‚</p><p>imresize(A, [m, n])ï¼šå°†å›¾åƒAç¼©æ”¾åˆ°æŒ‡å®šçš„å¤§å°mÃ—nã€‚</p><p>imresize(A, [m, n], method)ï¼šæŒ‡å®šæ’å€¼æ–¹æ³•ï¼Œå…¶ä¸­methodå¯ä»¥æ˜¯ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€ï¼š</p><ul><li>nearestï¼šæœ€è¿‘é‚»æ’å€¼</li><li>bilinearï¼šåŒçº¿æ€§æ’å€¼</li><li>bicubicï¼šåŒä¸‰æ¬¡æ’å€¼</li></ul><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°†è¯»å–ä¸€å¼ å›¾åƒï¼Œå°†å…¶ç¼©æ”¾åˆ°ä¸€åŠçš„å¤§å°ï¼Œå¹¶ä½¿ç”¨åŒçº¿æ€§æ’å€¼æ–¹æ³•ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img = imread(<span class="string">&#x27;example.jpg&#x27;</span>);</span><br><span class="line">scaled_img = imresize(img, <span class="number">0.5</span>, <span class="string">&#x27;bilinear&#x27;</span>);</span><br><span class="line">imshow(scaled_img);</span><br></pre></td></tr></table></figure><p><strong>å…³äºæ’å€¼æ–¹æ³•ï¼š</strong></p><p>åœ¨å›¾åƒç¼©æ”¾è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¯¹åŸå§‹å›¾åƒä¸­ä¸å­˜åœ¨çš„åƒç´ è¿›è¡Œä¼°è®¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºæ’å€¼ã€‚æ’å€¼æ–¹æ³•çš„ä½œç”¨æ˜¯é€šè¿‡å¯¹å·²çŸ¥åƒç´ çš„è®¡ç®—æ¥æ¨æµ‹æœªçŸ¥åƒç´ çš„å€¼ï¼Œä»è€Œå®ç°å›¾åƒçš„ç¼©æ”¾ã€æ—‹è½¬ã€å˜å½¢ç­‰æ“ä½œã€‚</p><p>å¸¸è§çš„æ’å€¼æ–¹æ³•æœ‰ï¼š</p><p>1.æœ€è¿‘é‚»æ’å€¼ï¼ˆnearest neighbor interpolationï¼‰ï¼šå¯¹äºç›®æ ‡åƒç´ ï¼Œé€‰æ‹©è·ç¦»æœ€è¿‘çš„åŸå§‹åƒç´ çš„å€¼ä½œä¸ºå…¶å€¼ã€‚</p><p>2.åŒçº¿æ€§æ’å€¼ï¼ˆbilinear interpolationï¼‰ï¼šå¯¹äºç›®æ ‡åƒç´ ï¼Œåˆ©ç”¨å…¶å‘¨å›´å››ä¸ªæœ€è¿‘çš„åŸå§‹åƒç´ çš„å€¼è¿›è¡ŒåŠ æƒå¹³å‡ã€‚</p><p>3.ä¸‰æ¬¡æ ·æ¡æ’å€¼ï¼ˆbicubic interpolationï¼‰ï¼šå¯¹äºç›®æ ‡åƒç´ ï¼Œåˆ©ç”¨å…¶å‘¨å›´16ä¸ªæœ€è¿‘çš„åŸå§‹åƒç´ çš„å€¼è¿›è¡ŒåŠ æƒå¹³å‡ã€‚</p><p>ä¸åŒçš„æ’å€¼æ–¹æ³•ä¼šå¯¹å›¾åƒçš„è´¨é‡äº§ç”Ÿä¸åŒçš„å½±å“ï¼Œé€‰æ‹©åˆé€‚çš„æ’å€¼æ–¹æ³•å¯ä»¥ä½¿å¾—å›¾åƒç¼©æ”¾åçš„è´¨é‡æ›´å¥½ã€‚ä½†åŒæ—¶ä¹Ÿéœ€è¦æ³¨æ„ï¼Œä½¿ç”¨æ›´å¤æ‚çš„æ’å€¼æ–¹æ³•ä¼šå¢åŠ è®¡ç®—çš„å¤æ‚åº¦ï¼Œå¯¼è‡´å¤„ç†æ—¶é—´å˜é•¿ã€‚</p><h2 id="princomp"><a href="#princomp" class="headerlink" title="princomp()"></a>princomp()</h2><p>princomp()å‡½æ•°æ˜¯matlabè½¯ä»¶ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºè¿›è¡Œä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€‚ä¸»æˆåˆ†åˆ†ææ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®é™ç»´æ–¹æ³•ï¼Œå¯ä»¥å°†é«˜ç»´æ•°æ®è½¬æ¢ä¸ºä½ç»´æ•°æ®ï¼ŒåŒæ—¶ä¿ç•™æ•°æ®çš„ä¸»è¦ä¿¡æ¯ã€‚</p><p>princomp()å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[coeff,score,latent,tsquared,explained,mu] = princomp(X)</span><br><span class="line"><span class="comment">% ç®€å•ä½¿ç”¨</span></span><br><span class="line">coeff = princomp(X)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ŒXæ˜¯ä¸€ä¸ªmÃ—nçš„çŸ©é˜µï¼Œè¡¨ç¤ºæœ‰mä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬æœ‰nä¸ªç‰¹å¾ã€‚</p><p>å‡½æ•°çš„è¾“å‡ºåŒ…æ‹¬ï¼š</p><ul><li>coeffï¼šä¸»æˆåˆ†ç³»æ•°çŸ©é˜µï¼Œè¡¨ç¤ºå°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºä¸»æˆåˆ†çš„ç³»æ•°ã€‚</li><li>scoreï¼šä¸»æˆåˆ†åˆ†æ•°çŸ©é˜µï¼Œè¡¨ç¤ºæ¯ä¸ªæ ·æœ¬åœ¨ä¸»æˆåˆ†ä¸Šçš„æŠ•å½±å€¼ã€‚</li><li>latentï¼šä¸»æˆåˆ†æ–¹å·®å‘é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªä¸»æˆåˆ†çš„æ–¹å·®å¤§å°ã€‚</li><li>tsquaredï¼šT2ç»Ÿè®¡é‡å‘é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªæ ·æœ¬çš„T2ç»Ÿè®¡é‡å€¼ã€‚</li><li>explainedï¼šè§£é‡Šæ–¹å·®å‘é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªä¸»æˆåˆ†è§£é‡Šçš„æ–¹å·®æ‰€å æ¯”ä¾‹ã€‚</li><li>muï¼šæ ·æœ¬å‡å€¼å‘é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªç‰¹å¾çš„å¹³å‡å€¼ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œprincomp()å‡½æ•°é»˜è®¤å¯¹æ¯ä¸ªç‰¹å¾è¿›è¡Œä¸­å¿ƒåŒ–å¤„ç†ï¼Œå³å°†æ¯ä¸ªç‰¹å¾å‡å»å…¶å‡å€¼ã€‚</p><p>ä½¿ç”¨princomp()å‡½æ•°è¿›è¡Œä¸»æˆåˆ†åˆ†æçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>å‡†å¤‡æ•°æ®ï¼šå°†éœ€è¦è¿›è¡Œä¸»æˆåˆ†åˆ†æçš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªçŸ©é˜µä¸­ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªæ ·æœ¬ï¼Œæ¯åˆ—ä»£è¡¨ä¸€ä¸ªç‰¹å¾ã€‚</p></li><li><p>è°ƒç”¨princomp()å‡½æ•°ï¼šå°†æ•°æ®çŸ©é˜µä½œä¸ºè¾“å…¥å‚æ•°ä¼ å…¥princomp()å‡½æ•°ï¼Œå³å¯å¾—åˆ°ä¸»æˆåˆ†ç³»æ•°çŸ©é˜µcoeffã€ä¸»æˆåˆ†åˆ†æ•°çŸ©é˜µscoreã€ä¸»æˆåˆ†æ–¹å·®å‘é‡latentã€T2ç»Ÿè®¡é‡å‘é‡tsquaredã€è§£é‡Šæ–¹å·®å‘é‡explainedå’Œæ ·æœ¬å‡å€¼å‘é‡muã€‚</p></li><li><p>é€‰æ‹©ä¸»æˆåˆ†æ•°é‡ï¼šæ ¹æ®è§£é‡Šæ–¹å·®å‘é‡explainedçš„ç»“æœï¼Œå¯ä»¥é€‰æ‹©ä¿ç•™å‰kä¸ªä¸»æˆåˆ†ï¼Œå°†æ•°æ®é™ç»´ä¸ºkç»´ã€‚</p></li><li><p>å¯¹æ–°æ•°æ®è¿›è¡Œå¤„ç†ï¼šä½¿ç”¨å¾—åˆ°çš„ä¸»æˆåˆ†ç³»æ•°çŸ©é˜µcoeffå¯¹æ–°æ•°æ®è¿›è¡Œå˜æ¢ï¼Œå¾—åˆ°æ–°çš„ä¸»æˆåˆ†åˆ†æ•°çŸ©é˜µscore_newï¼Œå³å¯å°†é«˜ç»´æ•°æ®è½¬æ¢ä¸ºä½ç»´æ•°æ®ã€‚</p></li></ol><p>ä½¿ç”¨princomp()å‡½æ•°è¿›è¡Œä¸»æˆåˆ†åˆ†æå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£æ•°æ®çš„ç»“æ„å’Œç‰¹å¾ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨äºæ•°æ®é™ç»´ã€æ•°æ®å¯è§†åŒ–ã€ç‰¹å¾æå–ç­‰æ–¹é¢ã€‚</p><h2 id="im2col-å’Œcol2im"><a href="#im2col-å’Œcol2im" class="headerlink" title="im2col()å’Œcol2im()"></a>im2col()å’Œcol2im()</h2><p>im2col()å’Œcol2im()å‡½æ•°æ˜¯MATLABä¸­ç”¨äºå›¾åƒå¤„ç†çš„å‡½æ•°ï¼Œä¸»è¦ä½œç”¨æ˜¯å°†å›¾åƒè½¬åŒ–ä¸ºåˆ—å‘é‡æˆ–å°†åˆ—å‘é‡è½¬åŒ–ä¸ºå›¾åƒã€‚</p><p>im2col()å‡½æ•°çš„ä½œç”¨æ˜¯å°†è¾“å…¥çš„å›¾åƒçŸ©é˜µæŒ‰ç…§æŒ‡å®šçš„çª—å£å¤§å°å’Œæ­¥é•¿è¿›è¡Œåˆ†å—ï¼Œå¹¶å°†æ¯ä¸ªå—è½¬åŒ–ä¸ºåˆ—å‘é‡ã€‚è¯¥å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B = im2col(A,[m n],<span class="string">&#x27;sliding&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ŒAä¸ºè¾“å…¥çš„å›¾åƒçŸ©é˜µï¼Œ[m n]ä¸ºæŒ‡å®šçš„çª—å£å¤§å°ï¼Œâ€˜slidingâ€™ä¸ºæŒ‡å®šçš„æ­¥é•¿æ–¹å¼ã€‚è¯¥å‡½æ•°çš„è¾“å‡ºä¸ºåˆ—å‘é‡çŸ©é˜µBã€‚</p><p>col2im()å‡½æ•°çš„ä½œç”¨æ˜¯å°†åˆ—å‘é‡çŸ©é˜µè½¬åŒ–ä¸ºå›¾åƒçŸ©é˜µã€‚è¯¥å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A = col2im(B,[m n],[M N],<span class="string">&#x27;sliding&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ŒBä¸ºè¾“å…¥çš„åˆ—å‘é‡çŸ©é˜µï¼Œ[m n]ä¸ºæŒ‡å®šçš„çª—å£å¤§å°ï¼Œ[M N]ä¸ºæŒ‡å®šçš„è¾“å‡ºå›¾åƒå¤§å°ï¼Œâ€˜slidingâ€™ä¸ºæŒ‡å®šçš„æ­¥é•¿æ–¹å¼ã€‚è¯¥å‡½æ•°çš„è¾“å‡ºä¸ºå›¾åƒçŸ©é˜µAã€‚</p><p>ç»¼ä¸Šï¼Œim2col()å’Œcol2im()å‡½æ•°åœ¨å›¾åƒå¤„ç†ä¸­å…·æœ‰é‡è¦çš„ä½œç”¨ï¼Œå®ƒä»¬å¯ä»¥æ–¹ä¾¿åœ°å°†å›¾åƒè½¬åŒ–ä¸ºåˆ—å‘é‡è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå¯ä»¥å°†å¤„ç†åçš„åˆ—å‘é‡è½¬åŒ–ä¸ºå›¾åƒè¿›è¡Œè¾“å‡ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦å»ºæ¨¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å¼€å§‹çš„è®¡ç½‘â€”â€”æ•°æ®é“¾è·¯å±‚</title>
      <link href="/2023/04/08/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/"/>
      <url>/2023/04/08/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/17.png" alt="1"></p><p><strong>å‚è€ƒåšå®¢ï¼š</strong></p><div class="tag link"><a class="link-card" title="BloothOfYouth]" href="https://www.jianshu.com/p/6b82134a4325"><div class="left"><img src="https://upload.jianshu.io/users/upload_avatars/24878825/a76b4b0e-6816-4240-af9a-5541e80af541.jpg?imageMogr2/auto-orient/stripimageView2/1/w/240/h/240"/></div><div class="right"><p class="text">BloothOfYouth]</p><p class="url">https://www.jianshu.com/p/6b82134a4325</p></div></a></div><p><strong>æœ¬ç¬”è®°æ¥æºäºï¼š<a href="https://www.bilibili.com/video/BV1c4411d7jb">è®¡ç®—æœºç½‘ç»œå¾®è¯¾å ‚â€”â€”æ¹–ç§‘å¤§</a></strong></p><h1 id="ä¸€ã€æ•°æ®é“¾è·¯å±‚æ¦‚è¿°"><a href="#ä¸€ã€æ•°æ®é“¾è·¯å±‚æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ•°æ®é“¾è·¯å±‚æ¦‚è¿°"></a>ä¸€ã€æ•°æ®é“¾è·¯å±‚æ¦‚è¿°</h1><h2 id="1-1-æ¦‚è¿°"><a href="#1-1-æ¦‚è¿°" class="headerlink" title="1.1 æ¦‚è¿°"></a>1.1 æ¦‚è¿°</h2><p><strong>é“¾è·¯</strong>æ˜¯ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ï¼Œ<strong>æ•°æ®é“¾è·¯</strong>åˆ™æ˜¯åœ¨é“¾è·¯çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›å¿…è¦çš„ç¡¬ä»¶ï¼ˆå¦‚ç½‘ç»œé€‚é…å™¨ï¼‰å’Œè½¯ä»¶ï¼ˆå¦‚åè®®çš„å®ç°ï¼‰</p><p><strong>ç½‘ç»œä¸­çš„ä¸»æœºã€è·¯ç”±å™¨ç­‰éƒ½å¿…é¡»å®ç°æ•°æ®é“¾è·¯å±‚</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011102531462.png" alt="image-20201011102531462"></p><p><strong>å±€åŸŸç½‘ä¸­çš„ä¸»æœºã€äº¤æ¢æœºç­‰éƒ½å¿…é¡»å®ç°æ•°æ®é“¾è·¯å±‚</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014004326549.png" alt="image-20201014004326549"></p><p><strong>ä»å±‚æ¬¡ä¸Šæ¥çœ‹æ•°æ®çš„æµåŠ¨</strong></p><blockquote><p>ä¸»æœºH1å°†å¾…å‘é€çš„æ•°æ®é€å±‚å°è£…åï¼Œé€šè¿‡ç‰©ç†å±‚å°†æ„æˆæ•°æ®åŒ…çš„å„æ¯”ç‰¹è½¬æ¢ä¸ºç”µä¿¡å·ï¼Œå‘é€åˆ°ä¼ è¾“åª’ä½“ï¼Œæ•°æ®åŒ…è¿›å…¥è·¯ç”±å™¨åï¼Œç”±ä¸‹å¾€ä¸Šé€å±‚è§£å°åˆ°ç½‘ç»œå±‚ï¼Œè·¯ç”±å™¨æ ¹æ®æ•°æ®åŒ…ä¸­çš„ç›®çš„ç½‘ç»œåœ°å€å’Œè‡ªèº«è½¬å‘è¡¨ï¼Œç¡®å®šæ•°æ®åŒ…çš„è½¬å‘ç«¯å£ï¼Œç„¶åä»ç½‘ç»œå±‚å‘ä¸‹é€å±‚å°è£…æ•°æ®åŒ…ï¼Œå¹¶é€šè¿‡ç‰©ç†å±‚å°†æ•°æ®åŒ…å‘é€åˆ°ä¼ è¾“åª’ä½“ã€‚æ•°æ®åŒ…æœ€ç»ˆåˆ°è¾¾ä¸»æœºH2æ—¶ï¼Œè¿˜è¦ç”±ä¸‹å¾€ä¸Šé€å±‚è§£å°ï¼Œæœ€ç»ˆè§£å°å‡ºä¸»æœºH1æ‰€å‘é€çš„æ•°æ®ã€‚</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011102618878.png" alt="image-20201011102618878"></p><p><strong>ä»…ä»æ•°æ®é“¾è·¯å±‚è§‚å¯Ÿå¸§çš„æµåŠ¨</strong></p><blockquote><p>è¿™é‡Œæˆ‘ä»¬åªå…³æ³¨æ•°æ®é“¾è·¯å±‚ï¼Œçœ‹ä½œæ•°æ®åŒ…åªä»æ•°æ®é“¾è·¯å±‚ä»å·¦åˆ°å³ä¼ é€ã€‚</p><p>ä¸»æœºH1åˆ°ä¸»æœºH2çš„é€šä¿¡ï¼Œå¯ä»¥çœ‹æˆæ˜¯åœ¨4æ®µä¸åŒçš„é“¾è·¯ä¸Šçš„é€šä¿¡ç»„æˆçš„ã€‚</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011102653161.png" alt="image-20201011102653161"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011102733584.png" alt="image-20201011102733584"></p><blockquote><p>ä¸»æœºH1 åˆ°ä¸»æœºH2 æ‰€ç»è¿‡çš„ç½‘ç»œå¯ä»¥æ˜¯å¤šç§ä¸åŒç±»å‹çš„</p><p><strong>æ³¨æ„ï¼šä¸åŒçš„é“¾è·¯å±‚å¯èƒ½é‡‡ç”¨ä¸åŒçš„æ•°æ®é“¾è·¯å±‚åè®®</strong></p></blockquote><p><strong>æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¿¡é“</strong></p><p>æ•°æ®é“¾è·¯å±‚å±äºè®¡ç®—æœºç½‘è·¯çš„ä½å±‚ã€‚<strong>æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¿¡é“ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š</strong></p><ul><li>ç‚¹å¯¹ç‚¹ä¿¡é“</li><li>å¹¿æ’­ä¿¡é“</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014004459744.png" alt="image-20201014004459744"></p><blockquote><p><strong>å±€åŸŸç½‘å±äºæ•°æ®é“¾è·¯å±‚</strong></p><p>å±€åŸŸç½‘è™½ç„¶æ˜¯ä¸ªç½‘ç»œã€‚ä½†æˆ‘ä»¬å¹¶ä¸æŠŠå±€åŸŸç½‘æ”¾åœ¨ç½‘ç»œå±‚ä¸­è®¨è®ºã€‚è¿™æ˜¯å› ä¸ºåœ¨ç½‘ç»œå±‚è¦è®¨è®ºçš„æ˜¯å¤šä¸ªç½‘ç»œäº’è¿çš„é—®é¢˜ï¼Œæ˜¯è®¨è®ºåˆ†ç»„æ€ä¹ˆä»ä¸€ä¸ªç½‘ç»œï¼Œé€šè¿‡è·¯ç”±å™¨ï¼Œè½¬å‘åˆ°å¦ä¸€ä¸ªç½‘ç»œã€‚</p><p>è€Œåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­ï¼Œåˆ†ç»„æ€ä¹ˆä»ä¸€å°ä¸»æœºä¼ é€åˆ°å¦ä¸€å°ä¸»æœºï¼Œä½†å¹¶ä¸ç»è¿‡è·¯ç”±å™¨è½¬å‘ã€‚ä»æ•´ä¸ªäº’è”ç½‘æ¥çœ‹ï¼Œ<strong>å±€åŸŸç½‘ä»å±äºæ•°æ®é“¾è·¯å±‚</strong>çš„èŒƒå›´</p></blockquote><h2 id="1-2-ä¸‰ä¸ªé‡è¦é—®é¢˜"><a href="#1-2-ä¸‰ä¸ªé‡è¦é—®é¢˜" class="headerlink" title="1.2 ä¸‰ä¸ªé‡è¦é—®é¢˜"></a>1.2 ä¸‰ä¸ªé‡è¦é—®é¢˜</h2><p>æ•°æ®é“¾è·¯å±‚ä¼ é€çš„åè®®æ•°æ®å•å…ƒæ˜¯<strong>å¸§</strong></p><p><strong>å°è£…æˆå¸§</strong></p><blockquote><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸¤å°ä¸»æœºéƒ½ä¼šå¯¹æ‰€å‘é€æˆ–æ¥å—çš„æ•°æ®åŒ…è¿›è¡Œäº”ä¸ªå±‚æ¬¡çš„å°è£…æˆ–è§£å°ï¼Œå‘é€æ–¹å°†å¾…å‘é€çš„æ•°æ®é€šè¿‡åº”ç”¨å±‚å°è£…ä¸ºåº”ç”¨å±‚åè®®æ•°æ®å•å…ƒï¼Œè¿è¾“å±‚ä¸ºä¹‹æ·»åŠ åè®®é¦–éƒ¨ï¼Œä½¿ä¹‹æˆä¸ºè¿è¾“å±‚åè®®æ•°æ®å•å…ƒï¼Œç„¶åäº¤ä»˜ç»™ç½‘ç»œå±‚ï¼Œç½‘ç»œå±‚ä¸ºå…¶æ·»åŠ ç½‘ç»œå±‚åè®®é¦–éƒ¨ï¼Œä½¿ä¹‹æˆä¸ºç½‘ç»œå±‚åè®®æ•°æ®å•å…ƒï¼Œç„¶åäº¤ä»˜ç»™æ•°æ®é“¾è·¯å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ä¸ºå…¶æ·»åŠ ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚åè®®é¦–éƒ¨ï¼Œç®€ç§°ä¸ºå¸§å¤´ï¼Œè¿˜è¦ç»™å…¶æ·»åŠ ä¸€ä¸ªå¸§å°¾ï¼Œæœ€ç»ˆå¦‚ä¸‹å›¾æ‰€ç¤º</p></blockquote><ul><li><strong>å°è£…æˆå¸§</strong> (framing) å°±æ˜¯åœ¨ä¸€æ®µæ•°æ®çš„å‰ååˆ†åˆ«æ·»åŠ å¸§å¤´å’Œå¸§å°¾ï¼Œç„¶åå°±æ„æˆäº†ä¸€ä¸ªå¸§ã€‚</li><li>é¦–éƒ¨å’Œå°¾éƒ¨çš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯è¿›è¡Œ<strong>å¸§å®šç•Œ</strong>ï¼Œä¸ºäº†åœ¨é“¾è·¯å±‚ä¸Šä»¥å¸§ä¸ºå•å…ƒæ¥ä¼ é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸ºäº†å®ç°æ•°æ®é“¾è·¯å±‚æœ¬èº«çš„åŠŸèƒ½ã€‚</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011103650253.png" alt="image-20201011103650253"></p><p><strong>å·®é”™æ§åˆ¶</strong></p><p>åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿ<strong>æ¯”ç‰¹å·®é”™</strong>ï¼š1 å¯èƒ½ä¼šå˜æˆ 0ï¼Œ è€Œ 0 ä¹Ÿå¯èƒ½å˜æˆ 1ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011103917512.png" alt="image-20201011103917512"></p><p>æ¥æ”¶æ–¹ä¸»æœºå¦‚ä½•åˆ¤æ–­å¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°äº†è¯¯ç ï¼Ÿ</p><blockquote><p>å‘é€æ–¹åœ¨å‘é€å¸§ä¹‹å‰ï¼ŒåŸºäºå¾…å‘é€çš„æ•°æ®å’Œæ£€é”™ç®—æ³•è®¡ç®—å‡ºæ£€é”™ç ï¼Œå¹¶å°†å…¶å°è£…åœ¨å¸§å°¾ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°å¸§åï¼Œé€šè¿‡æ£€é”™ç å’Œæ£€é”™ç®—æ³•ï¼Œå°±å¯ä»¥åˆ¤æ–­å‡ºå¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°äº†è¯¯ç ã€‚</p></blockquote><p><strong>å¯é ä¼ è¾“</strong></p><p>æ¥æ”¶æ–¹ä¸»æœºæ”¶åˆ°æœ‰è¯¯ç çš„å¸§åï¼Œæ˜¯ä¸ä¼šæ¥å—è¯¥å¸§çš„ï¼Œä¼šå°†å®ƒä¸¢å¼ƒ</p><p>å¦‚æœæ•°æ®é“¾è·¯å±‚å‘å…¶ä¸Šå±‚æä¾›çš„æ˜¯ä¸å¯é æœåŠ¡ï¼Œé‚£ä¹ˆä¸¢å¼ƒå°±ä¸¢å¼ƒäº†ï¼Œä¸ä¼šå†æœ‰æ›´å¤šæªæ–½</p><p><strong>å¦‚æœæ•°æ®é“¾è·¯å±‚å‘å…¶ä¸Šå±‚æä¾›çš„æ˜¯å¯é æœåŠ¡ï¼Œé‚£å°±è¿˜éœ€è¦å…¶ä»–æªæ–½ï¼Œæ¥ç¡®ä¿æ¥æ”¶æ–¹ä¸»æœºè¿˜å¯ä»¥é‡æ–°æ”¶åˆ°è¢«ä¸¢å¼ƒçš„è¿™ä¸ªå¸§çš„æ­£ç¡®å‰¯æœ¬</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011105314053.png" alt="image-20201011105314053"></p><blockquote><p>ä»¥ä¸Šä¸‰ä¸ªé—®é¢˜éƒ½æ˜¯ä½¿ç”¨<strong>ç‚¹å¯¹ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚</strong>æ¥ä¸¾ä¾‹çš„</p></blockquote><p><strong>å¦‚æœä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚é™¤äº†åŒ…å«ä¸Šé¢ä¸‰ä¸ªé—®é¢˜å¤–ï¼Œè¿˜æœ‰ä¸€äº›é—®é¢˜è¦è§£å†³</strong></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œä¸»æœºAï¼ŒBï¼ŒCï¼ŒDï¼ŒEé€šè¿‡ä¸€æ ¹æ€»çº¿è¿›è¡Œäº’è¿ï¼Œä¸»æœºAè¦ç»™ä¸»æœºCå‘é€æ•°æ®ï¼Œä»£è¡¨å¸§çš„ä¿¡å·ä¼šé€šè¿‡æ€»çº¿ä¼ è¾“åˆ°æ€»çº¿ä¸Šçš„å…¶ä»–å„ä¸»æœºï¼Œé‚£ä¹ˆä¸»æœºBï¼ŒDï¼ŒEå¦‚ä½•çŸ¥é“æ‰€æ”¶åˆ°çš„å¸§ä¸æ˜¯å‘é€ç»™å¥¹ä»¬çš„ï¼Œä¸»æœºCå¦‚ä½•çŸ¥é“å‘é€çš„å¸§æ˜¯å‘é€ç»™è‡ªå·±çš„ï¼Ÿ</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011105824466.png" alt="image-20201011105824466"></p><p>å¯ä»¥ç”¨ç¼–å€ï¼ˆåœ°å€ï¼‰çš„æ¥è§£å†³</p><p>å°†å¸§çš„ç›®çš„åœ°å€æ·»åŠ åœ¨å¸§ä¸­ä¸€èµ·ä¼ è¾“</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011110017415.png" alt="image-20201011110017415"></p><p>è¿˜æœ‰æ•°æ®ç¢°æ’é—®é¢˜</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011110129994.png" alt="image-20201011110129994"></p><blockquote><p>éšç€æŠ€æœ¯çš„å‘å±•ï¼Œäº¤æ¢æŠ€æœ¯çš„æˆç†Ÿï¼Œ</p><p>åœ¨ æœ‰çº¿ï¼ˆå±€åŸŸç½‘ï¼‰é¢†åŸŸ ä½¿ç”¨<strong>ç‚¹å¯¹ç‚¹é“¾è·¯</strong>å’Œ<strong>é“¾è·¯å±‚äº¤æ¢æœº</strong>çš„<strong>äº¤æ¢å¼å±€åŸŸç½‘</strong>å–ä»£äº†<del>å…±äº«å¼å±€åŸŸç½‘</del></p><p>ç”±äºæ— çº¿ä¿¡é“çš„å¹¿æ’­å¤©æ€§ï¼Œåœ¨æ— çº¿å±€åŸŸç½‘ä¸­ä»ç„¶ä½¿ç”¨çš„æ˜¯å…±äº«ä¿¡é“æŠ€æœ¯</p></blockquote><hr><h1 id="äºŒã€å°è£…æˆå¸§"><a href="#äºŒã€å°è£…æˆå¸§" class="headerlink" title="äºŒã€å°è£…æˆå¸§"></a>äºŒã€å°è£…æˆå¸§</h1><h2 id="2-1-ä»‹ç»"><a href="#2-1-ä»‹ç»" class="headerlink" title="2.1 ä»‹ç»"></a>2.1 ä»‹ç»</h2><p>å°è£…æˆå¸§æ˜¯æŒ‡æ•°æ®é“¾è·¯å±‚ç»™ä¸Šå±‚äº¤ä»˜çš„åè®®æ•°æ®å•å…ƒæ·»åŠ å¸§å¤´å’Œå¸§å°¾ä½¿ä¹‹æˆä¸ºå¸§</p><ul><li><strong>å¸§å¤´å’Œå¸§å°¾ä¸­åŒ…å«æœ‰é‡è¦çš„æ§åˆ¶ä¿¡æ¯</strong></li></ul><blockquote><p>PPPå¸§å°±æ˜¯ç‚¹å¯¹ç‚¹çš„æ ¼å¼</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011110851301.png" alt="image-20201011110851301"></p><p>å‘é€æ–¹çš„æ•°æ®é“¾è·¯å±‚å°†ä¸Šå±‚äº¤ä»˜ä¸‹æ¥çš„åè®®æ•°æ®å•å…ƒå°è£…æˆå¸§åï¼Œè¿˜è¦é€šè¿‡ç‰©ç†å±‚ï¼Œå°†æ„æˆå¸§çš„å„æ¯”ç‰¹ï¼Œè½¬æ¢æˆç”µä¿¡å·äº¤ç»™ä¼ è¾“åª’ä½“ï¼Œé‚£ä¹ˆæ¥æ”¶æ–¹çš„æ•°æ®é“¾è·¯å±‚å¦‚ä½•ä»ç‰©ç†å±‚äº¤ä»˜çš„æ¯”ç‰¹æµä¸­æå–å‡ºä¸€ä¸ªä¸ªçš„å¸§ï¼Ÿ</p><p>ç­”ï¼šéœ€è¦å¸§å¤´å’Œå¸§å°¾æ¥åš<strong>å¸§å®šç•Œ</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011111334052.png" alt="image-20201011111334052"></p><p>å¦‚ä¸Šå›¾PPTå¸§çš„æ ¼å¼ï¼Œåœ¨å¸§å¤´å’Œå¸§å°¾å„åŒ…å«ä¸€ä¸ªé•¿åº¦ä¸º1å­—èŠ‚çš„æ ‡å¿—å­—æ®µï¼Œå…¶ä½œç”¨å°±æ˜¯å¸§å®šç•Œã€‚</p><p>ä½†æ¯”ä¸æ˜¯æ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®çš„å¸§éƒ½åŒ…å«æœ‰å¸§å®šç•Œæ ‡å¿—ï¼Œä¾‹å¦‚ä¸‹é¢ä¾‹å­</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011111729324.png" alt="image-20201011111729324"></p><blockquote><p>å‰å¯¼ç </p><ul><li>å‰åŒæ­¥ç ï¼šä½œç”¨æ˜¯ä½¿æ¥æ”¶æ–¹çš„æ—¶é’ŸåŒæ­¥</li><li>å¸§å¼€å§‹å®šç•Œç¬¦ï¼šè¡¨æ˜å…¶åé¢ç´§è·Ÿç€çš„å°±æ˜¯MACå¸§</li></ul></blockquote><p>å¦å¤–ä»¥å¤ªç½‘è¿˜è§„å®šäº†å¸§é—´é—´éš”ä¸º96æ¯”ç‰¹æ—¶é—´ï¼Œå› æ­¤ï¼ŒMACå¸§ä¸éœ€è¦å¸§ç»“æŸå®šç•Œç¬¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011112450187.png" alt="image-20201011112450187"></p><h2 id="2-2-é€æ˜ä¼ è¾“"><a href="#2-2-é€æ˜ä¼ è¾“" class="headerlink" title="2.2 é€æ˜ä¼ è¾“"></a>2.2 é€æ˜ä¼ è¾“</h2><blockquote><p><strong>é€æ˜</strong>ï¼š</p><p>æŒ‡æŸä¸€ä¸ªå®é™…å­˜åœ¨çš„äº‹ç‰©çœ‹èµ·æ¥å´å¥½åƒä¸å­˜åœ¨ä¸€æ ·ã€‚</p><p><strong>é€æ˜ä¼ è¾“ï¼š</strong></p><p>æŒ‡çš„æ˜¯åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šæ”¹å˜æ•°æ®çš„å†…å®¹ã€æ ¼å¼ã€é¡ºåºç­‰ä¿¡æ¯ï¼Œä½¿å¾—æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹å¯¹ç”¨æˆ·æ¥è¯´æ˜¯â€œé€æ˜â€çš„ï¼Œå°±å¥½åƒæ•°æ®ç›´æ¥ä»æºç«¯ä¼ è¾“åˆ°ç›®çš„ç«¯ä¸€æ ·ã€‚è¿™ç§ä¼ è¾“æ–¹å¼å¯ä»¥æé«˜ç½‘ç»œçš„å¯é æ€§å’Œç¨³å®šæ€§ï¼ŒåŒæ—¶ä¹Ÿèƒ½æå‡ç”¨æˆ·ä½“éªŒã€‚</p></blockquote><p>é€æ˜ä¼ è¾“æ˜¯æŒ‡<strong>æ•°æ®é“¾è·¯å±‚å¯¹ä¸Šå±‚äº¤ä»˜çš„ä¼ è¾“æ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶</strong>ï¼Œå¥½åƒæ•°æ®é“¾è·¯å±‚ä¸å­˜åœ¨ä¸€æ ·ã€‚</p><p>å¸§å®šç•Œæ ‡å¿—ä¹Ÿå°±æ˜¯ä¸ªç‰¹å®šæ•°æ®å€¼ï¼Œå¦‚æœåœ¨ä¸Šå±‚äº¤ä»˜çš„åè®®æ•°æ®å•å…ƒä¸­ï¼Œæ°å¥½ä¹ŸåŒ…å«è¿™ä¸ªç‰¹å®šæ•°å€¼ï¼Œæ¥æ”¶æ–¹å°±ä¸èƒ½æ­£ç¡®æ¥æ”¶ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011113207944.png" alt="image-20201011113207944"></p><blockquote><p>å¦‚æœæ•°æ®é“¾è·¯å±‚ä¸é‡‡å–å…¶ä»–æªæ–½ï¼Œæ¥é¿å…æ¥æ”¶æ–¹å¯¹å¸§æ˜¯å¦ç»“æŸçš„è¯¯åˆ¤ï¼Œå°±ä¸èƒ½ç§°ä¸ºé€æ˜ä¼ è¾“ã€‚æ‰€ä»¥æ•°æ®é“¾è·¯å±‚åº”è¯¥å¯¹ä¸Šå±‚äº¤ä»˜çš„æ•°æ®æœ‰é™åˆ¶ï¼Œå…¶å†…å®¹ä¸èƒ½åŒ…å«å¸§å®šç•Œç¬¦çš„å€¼</p></blockquote><h3 id="2-2-1-è§£å†³é€æ˜ä¼ è¾“é—®é¢˜"><a href="#2-2-1-è§£å†³é€æ˜ä¼ è¾“é—®é¢˜" class="headerlink" title="2.2.1 è§£å†³é€æ˜ä¼ è¾“é—®é¢˜"></a>2.2.1 è§£å†³é€æ˜ä¼ è¾“é—®é¢˜</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011113804721.png" alt="image-20201011113804721"></p><ul><li><strong>è§£å†³æ–¹æ³•</strong>ï¼šé¢å‘å­—èŠ‚çš„ç‰©ç†é“¾è·¯ä½¿ç”¨<strong>å­—èŠ‚å¡«å……</strong> (byte stuffing) æˆ–<strong>å­—ç¬¦å¡«å……</strong> (character stuffing)ï¼Œé¢å‘æ¯”ç‰¹çš„ç‰©ç†é“¾è·¯ä½¿ç”¨<strong>æ¯”ç‰¹å¡«å……</strong>çš„æ–¹æ³•ã€æ¯äº”ä¸ªè¿ç»­çš„1åé¢æ’å…¥ä¸€ä¸ªæ¯”ç‰¹0ã€‘å®ç°é€æ˜ä¼ è¾“ã€‚</li><li>å‘é€ç«¯çš„æ•°æ®é“¾è·¯å±‚åœ¨æ•°æ®ä¸­å‡ºç°æ§åˆ¶å­—ç¬¦â€œSOHâ€æˆ–â€œEOTâ€çš„å‰é¢<strong>æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦â€œESCâ€</strong>(è½¬ä¹‰å­—ç¬¦æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ§åˆ¶å­—ç¬¦ï¼Œå…¶é•¿åº¦ä¸º1ä¸ªå­—èŠ‚ï¼Œåè¿›åˆ¶å€¼ä¸º27ï¼Œå…¶åå…­è¿›åˆ¶ç¼–ç æ˜¯1B)ã€‚</li><li>æ¥æ”¶ç«¯çš„æ•°æ®é“¾è·¯å±‚åœ¨å°†æ•°æ®é€å¾€ç½‘ç»œå±‚ä¹‹å‰åˆ é™¤æ’å…¥çš„è½¬ä¹‰å­—ç¬¦ã€‚</li><li>å¦‚æœè½¬ä¹‰å­—ç¬¦ä¹Ÿå‡ºç°åœ¨æ•°æ®å½“ä¸­ï¼Œé‚£ä¹ˆåº”åœ¨è½¬ä¹‰å­—ç¬¦å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ ESCã€‚å½“æ¥æ”¶ç«¯æ”¶åˆ°è¿ç»­çš„ä¸¤ä¸ªè½¬ä¹‰å­—ç¬¦æ—¶ï¼Œå°±åˆ é™¤å…¶ä¸­å‰é¢çš„ä¸€ä¸ªã€‚</li></ul><h3 id="2-2-2-å¸§çš„æ•°æ®éƒ¨åˆ†é•¿åº¦"><a href="#2-2-2-å¸§çš„æ•°æ®éƒ¨åˆ†é•¿åº¦" class="headerlink" title="2.2.2 å¸§çš„æ•°æ®éƒ¨åˆ†é•¿åº¦"></a>2.2.2 å¸§çš„æ•°æ®éƒ¨åˆ†é•¿åº¦</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011115008209.png" alt="image-20201011115008209"></p><h2 id="2-3-æ€»ç»“"><a href="#2-3-æ€»ç»“" class="headerlink" title="2.3 æ€»ç»“"></a>2.3 æ€»ç»“</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011115049672.png" alt="image-20201011115049672"></p><hr><h1 id="ä¸‰ã€å·®é”™æ£€æµ‹"><a href="#ä¸‰ã€å·®é”™æ£€æµ‹" class="headerlink" title="ä¸‰ã€å·®é”™æ£€æµ‹"></a>ä¸‰ã€å·®é”™æ£€æµ‹</h1><h2 id="3-1-ä»‹ç»"><a href="#3-1-ä»‹ç»" class="headerlink" title="3.1 ä»‹ç»"></a>3.1 ä»‹ç»</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011133757804.png" alt="image-20201011133757804"></p><blockquote><p>å¦‚ä¸Šå›¾ï¼Œå¸§å°¾çš„FCSæ˜¯å¸§æ£€éªŒåºåˆ—å­—æ®µã€æ£€æµ‹ç ã€‘ï¼Œå…¶ä½œç”¨å°±æ˜¯è®©æ¥æ”¶æ–¹çš„æ•°æ®é“¾è·¯å±‚æ£€æŸ¥å¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿäº†è¯¯ç ã€‚</p></blockquote><h2 id="3-2-å¥‡å¶æ ¡éªŒ"><a href="#3-2-å¥‡å¶æ ¡éªŒ" class="headerlink" title="3.2 å¥‡å¶æ ¡éªŒ"></a>3.2 å¥‡å¶æ ¡éªŒ</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011234428217.png" alt="image-20201011234428217"></p><h2 id="3-3-å¾ªç¯å†—ä½™æ ¡éªŒCRC-Cyclic-Redundancy-Check"><a href="#3-3-å¾ªç¯å†—ä½™æ ¡éªŒCRC-Cyclic-Redundancy-Check" class="headerlink" title="3.3 å¾ªç¯å†—ä½™æ ¡éªŒCRC(Cyclic Redundancy Check)"></a>3.3 å¾ªç¯å†—ä½™æ ¡éªŒCRC(Cyclic Redundancy Check)</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011234605045.png" alt="image-20201011234605045"></p><blockquote><p>æ³¨æ„ğŸ“Œï¼šæ·»åŠ åˆ°å·¦è¾¹ï¼Œå³å¾…å‘é€çš„æ•°æ®çš„åé¢</p><p>æ³¨æ„ğŸ“Œï¼šè¿™é‡Œçš„é™¤æ³•æ˜¯<code>å¼‚æˆ–</code>è¿ç®—</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011234701845.png" alt="image-20201011234701845"></p><p><strong>ä¾‹é¢˜</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011235128869.png" alt="image-20201011235128869"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011235325022.png" alt="image-20201011235325022"></p><h2 id="3-4-æ€»ç»“"><a href="#3-4-æ€»ç»“" class="headerlink" title="3.4 æ€»ç»“"></a>3.4 æ€»ç»“</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201011235726437.png" alt="image-20201011235726437"></p><blockquote><p>å¾ªç¯å†—ä½™æ ¡éªŒ CRC æ˜¯ä¸€ç§æ£€é”™æ–¹æ³•ï¼Œè€Œå¸§æ ¡éªŒåºåˆ— FCS æ˜¯æ·»åŠ åœ¨æ•°æ®åé¢çš„å†—ä½™ç </p></blockquote><hr><h1 id="å››ã€å¯é ä¼ è¾“"><a href="#å››ã€å¯é ä¼ è¾“" class="headerlink" title="å››ã€å¯é ä¼ è¾“"></a>å››ã€å¯é ä¼ è¾“</h1><h2 id="4-1-åŸºæœ¬æ¦‚å¿µ"><a href="#4-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="4.1 åŸºæœ¬æ¦‚å¿µ"></a>4.1 åŸºæœ¬æ¦‚å¿µ</h2><p><strong>å¯é ä¼ è¾“</strong>æ˜¯æŒ‡åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­èƒ½å¤Ÿä¿è¯ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€ä¸å‡ºé”™åœ°åˆ°è¾¾ç›®çš„åœ°ã€‚</p><h3 id="4-1-1-ä¸‹é¢æ˜¯æ¯”ç‰¹å·®é”™"><a href="#4-1-1-ä¸‹é¢æ˜¯æ¯”ç‰¹å·®é”™" class="headerlink" title="4.1.1 ä¸‹é¢æ˜¯æ¯”ç‰¹å·®é”™"></a>4.1.1 ä¸‹é¢æ˜¯æ¯”ç‰¹å·®é”™</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012153605893.png" alt="image-20201012153605893"></p><h3 id="4-1-2-å…¶ä»–ä¼ è¾“å·®é”™"><a href="#4-1-2-å…¶ä»–ä¼ è¾“å·®é”™" class="headerlink" title="4.1.2 å…¶ä»–ä¼ è¾“å·®é”™"></a>4.1.2 å…¶ä»–ä¼ è¾“å·®é”™</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012153811724.png" alt="image-20201012153811724"></p><ul><li>åˆ†ç»„ä¸¢å¤±</li></ul><p>è·¯ç”±å™¨è¾“å…¥é˜Ÿåˆ—å¿«æ»¡äº†ï¼Œä¸»åŠ¨ä¸¢å¼ƒæ”¶åˆ°çš„åˆ†ç»„</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012154910921.png" alt="image-20201012154910921"></p><ul><li>åˆ†ç»„å¤±åº</li></ul><p>æ•°æ®å¹¶æœªæŒ‰ç…§å‘é€é¡ºåºä¾æ¬¡åˆ°è¾¾æ¥æ”¶ç«¯</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012155300937.png" alt="image-20201012155300937"></p><ul><li>åˆ†ç»„é‡å¤</li></ul><p>ç”±äºæŸäº›åŸå› ï¼Œæœ‰äº›åˆ†ç»„åœ¨ç½‘ç»œä¸­æ»ç•™äº†ï¼Œæ²¡æœ‰åŠæ—¶åˆ°è¾¾æ¥æ”¶ç«¯ï¼Œè¿™å¯èƒ½ä¼šé€ æˆå‘é€ç«¯å¯¹è¯¥åˆ†ç»„çš„é‡å‘ï¼Œé‡å‘çš„åˆ†ç»„åˆ°è¾¾æ¥æ”¶ç«¯ï¼Œä½†ä¸€æ®µæ—¶é—´åï¼Œæ»ç•™åœ¨ç½‘ç»œçš„åˆ†ç»„ä¹Ÿåˆ°è¾¾äº†æ¥æ”¶ç«¯ï¼Œè¿™å°±é€ æˆ<strong>åˆ†ç»„é‡å¤</strong>çš„ä¼ è¾“å·®é”™</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012160026362.png" alt="image-20201012160026362"></p><h2 id="4-2-ä¸‰ç§å¯é åè®®"><a href="#4-2-ä¸‰ç§å¯é åè®®" class="headerlink" title="4.2 ä¸‰ç§å¯é åè®®"></a>4.2 ä¸‰ç§å¯é åè®®</h2><ul><li>åœæ­¢-ç­‰å¾…åè®®SW</li><li>å›é€€Nå¸§åè®®GBN</li><li>é€‰æ‹©é‡ä¼ åè®®SR</li></ul><blockquote><p>è¿™ä¸‰ç§å¯é ä¼ è¾“å®ç°æœºåˆ¶çš„åŸºæœ¬åŸç†å¹¶ä¸ä»…é™äºæ•°æ®é“¾è·¯å±‚ï¼Œå¯ä»¥åº”ç”¨åˆ°è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„çš„å„å±‚åè®®ä¸­</p></blockquote><h3 id="4-2-1-åœæ­¢-ç­‰å¾…åè®®SW-Stop-and-Wait"><a href="#4-2-1-åœæ­¢-ç­‰å¾…åè®®SW-Stop-and-Wait" class="headerlink" title="4.2.1 åœæ­¢-ç­‰å¾…åè®®SW(Stop-and-Wait)"></a>4.2.1 åœæ­¢-ç­‰å¾…åè®®SW(Stop-and-Wait)</h3><h4 id="1ï¼‰åœæ­¢-ç­‰å¾…åè®®å¯èƒ½é‡åˆ°çš„å››ä¸ªé—®é¢˜"><a href="#1ï¼‰åœæ­¢-ç­‰å¾…åè®®å¯èƒ½é‡åˆ°çš„å››ä¸ªé—®é¢˜" class="headerlink" title="1ï¼‰åœæ­¢-ç­‰å¾…åè®®å¯èƒ½é‡åˆ°çš„å››ä¸ªé—®é¢˜"></a>1ï¼‰åœæ­¢-ç­‰å¾…åè®®å¯èƒ½é‡åˆ°çš„å››ä¸ªé—®é¢˜</h4><blockquote><p>æ¯å‘é€ä¸€ä¸ªæ•°æ®åˆ†ç»„ï¼Œå°±éœ€è¦åœæ­¢ç­‰å¾…ï¼Œæ”¶åˆ°ç¡®è®¤åˆ†ç»„ï¼Œå‘é€æ–¹æ‰èƒ½ç»§ç»­å‘é€ä¸‹ä¸€ä¸ªDATAã€‚</p></blockquote><p><strong>1.ç¡®è®¤ä¸å¦è®¤</strong></p><img src="https://picbed.dai2yutou.space/article_img/è®¡ç®—æœºç½‘ç»œ/è®¡ç®—æœºç½‘ç»œç¬¬ä¸‰ç« ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰.assets/image-20201012162009780.png" alt="image-20201012162009780" style="zoom:67%;" /><blockquote><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ”¶å‘åŒæ–¹åŸºäºäº’è”ç½‘è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸æ˜¯å±€é™åœ¨ä¸€æ¡ç‚¹å¯¹ç‚¹çš„æ•°æ®é“¾è·¯ï¼Œçºµåæ ‡ä¸ºæ—¶é—´ï¼Œå‘é€æ–¹ç»™æ¥æ”¶æ–¹å‘é€æ•°æ®åˆ†ç»„DATAã€‚æ¥æ”¶æ–¹æ”¶åˆ°åå¯¹å…¶è¿›è¡Œå·®é”™æ£€æµ‹ï¼Œè‹¥æ²¡æœ‰è¯¯ç ï¼Œåˆ™æ¥å—è¯¥æ•°æ®åˆ†ç»„ï¼Œå¹¶ç»™å‘é€æ–¹å‘é€ç¡®è®¤åˆ†ç»„ï¼Œç®€ç§°ä¸ºACKã€‚å‘é€æ–¹æ”¶åˆ°å¯¹æ‰€å‘é€æ•°æ®åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„åï¼Œæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åˆ†ç»„ã€‚å‡è®¾è¿™ä¸ªåˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†è¯¯ç ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°åå¯¹å…¶è¿›è¡Œå·®é”™æ£€æµ‹ï¼Œå‘ç°äº†è¯¯ç ï¼Œåˆ™ä¸¢å¼ƒè¯¥æ•°æ®åˆ†ç»„ï¼Œå¹¶ç»™å‘é€æ–¹å‘é€å¦è®¤åˆ†ç»„ï¼Œç®€ç§°NAKã€‚å‘é€æ–¹æ”¶åˆ°å¯¹æ‰€å‘é€æ•°æ®åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„åï¼Œå°±çŸ¥é“äº†ä¹‹å‰æ‰€å‘é€çš„æ•°æ®åˆ†ç»„å‡ºç°äº†å·®é”™è€Œè¢«æ¥æ”¶æ–¹æ‹’ç»ï¼Œäºæ˜¯ç«‹åˆ»é‡ä¼ è¯¥æ•°æ®åˆ†ç»„ã€‚</p><p>å› æ­¤å‘é€æ–¹å‘é€å®Œä¸€ä¸ªæ•°æ®åˆ†ç»„åï¼Œå¹¶ä¸èƒ½ç«‹å³å°†æ•°æ®åˆ†ç»„ä»ç¼“å­˜ä¸­åˆ é™¤ï¼Œåªæœ‰åœ¨æ”¶åˆ°é’ˆå¯¹è¯¥æ•°æ®åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„åï¼Œæ‰èƒ½å°†å…¶ä»ç¼“å­˜ä¸­åˆ é™¤ã€‚</p></blockquote><p><strong>2.è¶…æ—¶é‡ä¼ </strong></p><img src="https://picbed.dai2yutou.space/article_img/è®¡ç®—æœºç½‘ç»œ/è®¡ç®—æœºç½‘ç»œç¬¬ä¸‰ç« ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰.assets/image-20201012162112151.png" alt="image-20201012162112151" style="zoom:67%;" /><blockquote><p>å¯¹äºæ•°æ®é“¾è·¯å±‚ç‚¹å¯¹ç‚¹ä¿¡é“è€Œè¨€ï¼Œä¸å¤ªå®¹æ˜“å‡ºç°DATAåœ¨ä¼ è¾“é“è·¯ä¸Šä¸¢å¤±çš„æƒ…å†µï¼Œä½†å¯¹äºå¤šä¸ªç½‘è·¯é€šè¿‡å¤šä¸ªè·¯ç”±å™¨äº’è”çš„å¤æ‚äº’è”ç½‘ç¯å¢ƒè€Œè¨€ï¼Œè¿™ç§æƒ…å†µæ˜¯ç»å¸¸å‡ºç°çš„ã€‚</p></blockquote><p><strong>3.ç¡®è®¤ä¸¢å¤±</strong></p><img src="https://picbed.dai2yutou.space/article_img/è®¡ç®—æœºç½‘ç»œ/è®¡ç®—æœºç½‘ç»œç¬¬ä¸‰ç« ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰.assets/image-20201012162318298.png" alt="image-20201012162318298" style="zoom:67%;" /><img src="https://picbed.dai2yutou.space/article_img/è®¡ç®—æœºç½‘ç»œ/è®¡ç®—æœºç½‘ç»œç¬¬ä¸‰ç« ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰.assets/image-20201012162348428.png" alt="image-20201012162348428" style="zoom:67%;" /><blockquote><p>æ ¹æ®SWçš„åœç­‰ç‰¹æ€§ï¼Œä¸€ä¸ªæ¯”ç‰¹æ¥ç¼–å·ï¼Œå³0&#x2F;1ï¼Œç”¨æ¥ç¡®å®šä¸ä¸Šä¸€ä¸ªDATAä¸æ˜¯åŒä¸€ä¸ªå³å¯ï¼ï¼ï¼</p><p>æ—¢ç„¶æ•°æ®åˆ†ç»„éœ€è¦ç¼–å·ï¼Œç¡®è®¤åˆ†ç»„æ˜¯å¦éœ€è¦ç¼–å·ï¼Ÿ</p><p>è¦ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p></blockquote><p><strong>4.ç¡®è®¤è¿Ÿåˆ°</strong></p><blockquote><p>å¯¹äºæ•°æ®é“¾è·¯å±‚çš„ç‚¹å¯¹ç‚¹ä¿¡é“ï¼Œå¾€è¿”æ—¶é—´æ¯”è¾ƒå›ºå®šï¼Œä¸ä¼šå‡ºç°ç¡®è®¤è¿Ÿåˆ°çš„æƒ…å†µã€‚å› æ­¤ï¼Œå¦‚æœåªåœ¨æ•°æ®é“¾è·¯å±‚å®ç°SWï¼Œå¯ä»¥ä¸ç”¨ç»™ç¡®è®¤åˆ†ç»„ç¼–å·ã€‚</p></blockquote><img src="https://picbed.dai2yutou.space/article_img/è®¡ç®—æœºç½‘ç»œ/è®¡ç®—æœºç½‘ç»œç¬¬ä¸‰ç« ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰.assets/image-20201012162815885.png" alt="image-20201012162815885" style="zoom:67%;" /><blockquote><p>æ³¨æ„ï¼Œå›¾ä¸­æœ€ä¸‹é¢é‚£ä¸ªæ•°æ®åˆ†ç»„ä¸ä¹‹å‰åºå·ä¸º0çš„é‚£ä¸ªæ•°æ®åˆ†ç»„ä¸æ˜¯åŒä¸€ä¸ªæ•°æ®åˆ†ç»„</p></blockquote><p><strong>æ³¨æ„äº‹é¡¹</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012164008780.png" alt="image-20201012164008780"></p><h4 id="2ï¼‰åœæ­¢-ç­‰å¾…åè®®çš„ä¿¡é“åˆ©ç”¨ç‡"><a href="#2ï¼‰åœæ­¢-ç­‰å¾…åè®®çš„ä¿¡é“åˆ©ç”¨ç‡" class="headerlink" title="2ï¼‰åœæ­¢-ç­‰å¾…åè®®çš„ä¿¡é“åˆ©ç”¨ç‡"></a>2ï¼‰åœæ­¢-ç­‰å¾…åè®®çš„ä¿¡é“åˆ©ç”¨ç‡</h4><p>å‡è®¾æ”¶å‘åŒæ–¹ä¹‹é—´æ˜¯ä¸€æ¡ç›´é€šçš„ä¿¡é“ï¼Œå‘é€æ–¹å‘é€ä¸€ä¸ªæ•°æ®åˆ†ç»„åï¼Œå°±åœæ­¢å‘é€ï¼Œå¹¶ç­‰å¾…æ¥æ”¶æ–¹å¯¹è¯¥æ•°æ®åˆ†ç»„çš„ç¡®è®¤ï¼Œå½“æ”¶åˆ°ç¡®è®¤åˆ†ç»„åï¼Œæ‰å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åˆ†ç»„ã€‚</p><ul><li><strong>TD</strong>ï¼šæ˜¯å‘é€æ–¹å‘é€æ•°æ®åˆ†ç»„æ‰€è€—è´¹çš„å‘é€æ—¶å»¶ã€æ•°æ®å¸§çš„å‘é€æ—¶å»¶ã€‘</li><li><strong>RTT</strong>ï¼šæ˜¯æ”¶å‘åŒæ–¹ä¹‹é—´çš„å¾€è¿”æ—¶é—´ã€æ˜¯å‘é€æ–¹ä¸æ¥æ”¶æ–¹ä¹‹é—´çš„ä¸¤æ®µå•ç¨‹ä¼ æ’­æ—¶å»¶ã€‘</li><li><strong>TA</strong>ï¼šæ˜¯æ¥æ”¶æ–¹å‘é€ç¡®è®¤åˆ†ç»„æ‰€è€—è´¹çš„å‘é€æ—¶å»¶</li></ul><p>å›¾ä¸­å¿½ç•¥äº†æ¥æ”¶æ–¹å¯¹æ•°æ®åˆ†ç»„çš„å¤„ç†æ—¶å»¶å’Œå‘é€æ–¹å¯¹ç¡®è®¤åˆ†ç»„çš„å¤„ç†æ—¶å»¶ã€‚</p><p>TAä¸€èˆ¬éƒ½è¿œå°äºTDï¼Œå¯ä»¥å¿½ç•¥ï¼Œå½“RTTè¿œå¤§äºTDæ—¶ï¼Œä¿¡é“åˆ©ç”¨ç‡ä¼šéå¸¸ä½ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012164924635.png" alt="image-20201012164924635"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012181005719.png" alt="image-20201012181005719"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012181047665.png" alt="image-20201012181047665"></p><blockquote><p>åƒåœæ­¢-ç­‰å¾…åè®®è¿™æ ·é€šè¿‡ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶å®ç°çš„å¯é ä¼ è¾“åè®®ï¼Œå¸¸ç§°ä¸ºè‡ªåŠ¨è¯·æ±‚é‡ä¼ åè®®ARQ(<strong>A</strong>utomatic <strong>R</strong>epeat re<strong>Q</strong>uest)ï¼Œæ„æ€æ˜¯é‡ä¼ çš„è¯·æ±‚æ˜¯è‡ªåŠ¨è¿›è¡Œï¼Œå› ä¸ºä¸éœ€è¦æ¥æ”¶æ–¹æ˜¾å¼åœ°è¯·æ±‚-&gt;å‘é€æ–¹é‡ä¼ æŸä¸ªå‘é€çš„åˆ†ç»„ã€‚</p></blockquote><h3 id="4-2-2-å›é€€Nå¸§åè®®GBN-Go-Back-N"><a href="#4-2-2-å›é€€Nå¸§åè®®GBN-Go-Back-N" class="headerlink" title="4.2.2 å›é€€Nå¸§åè®®GBN(Go-Back-N)"></a>4.2.2 å›é€€Nå¸§åè®®GBN(Go-Back-N)</h3><h4 id="1ï¼‰ä¸ºä»€ä¹ˆç”¨å›é€€Nå¸§åè®®"><a href="#1ï¼‰ä¸ºä»€ä¹ˆç”¨å›é€€Nå¸§åè®®" class="headerlink" title="1ï¼‰ä¸ºä»€ä¹ˆç”¨å›é€€Nå¸§åè®®"></a>1ï¼‰ä¸ºä»€ä¹ˆç”¨å›é€€Nå¸§åè®®</h4><p>åœ¨ç›¸åŒçš„æ—¶é—´å†…ï¼Œä½¿ç”¨åœæ­¢-ç­‰å¾…åè®®çš„å‘é€æ–¹åªèƒ½å‘é€ä¸€ä¸ªæ•°æ®åˆ†ç»„ï¼Œè€Œé‡‡ç”¨æµæ°´çº¿ä¼ è¾“çš„å‘é€æ–¹ï¼Œå¯ä»¥å‘é€å¤šä¸ªæ•°æ®åˆ†ç»„ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012190027828.png" alt="image-20201012190027828"></p><p>å›é€€Nå¸§åè®®åœ¨æµæ°´çº¿ä¼ è¾“çš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨å‘é€çª—å£æ¥é™åˆ¶å‘é€æ–¹å¯è¿ç»­å‘é€æ•°æ®åˆ†ç»„çš„ä¸ªæ•°ã€‚</p><p>ä¸‹å›¾ä¸¾ä¾‹è¯´æ˜ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012190632086.png" alt="image-20201012190632086"></p><blockquote><p>å¦‚æœWTçš„å–å€¼ä¸º1ï¼Œåˆ™å°±æ˜¯SWåè®®ã€‚</p><p>åœ¨GBNä¸­ï¼ŒWRåªèƒ½å–å€¼ä¸º1ã€‚</p></blockquote><h4 id="2ï¼‰æ— å·®é”™æƒ…å†µæµç¨‹"><a href="#2ï¼‰æ— å·®é”™æƒ…å†µæµç¨‹" class="headerlink" title="2ï¼‰æ— å·®é”™æƒ…å†µæµç¨‹"></a>2ï¼‰æ— å·®é”™æƒ…å†µæµç¨‹</h4><p>å‘é€æ–¹å°†åºå·è½åœ¨å‘é€çª—å£å†…çš„0~4å·æ•°æ®åˆ†ç»„ï¼Œä¾æ¬¡è¿ç»­å‘é€å‡ºå»</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012191936466.png" alt="image-20201012191936466"></p><p>ä»–ä»¬ç»è¿‡äº’è”ç½‘ä¼ è¾“æ­£ç¡®åˆ°è¾¾æ¥æ”¶æ–¹ï¼Œå°±æ˜¯æ²¡æœ‰ä¹±åºå’Œè¯¯ç ï¼Œæ¥æ”¶æ–¹æŒ‰åºæ¥æ”¶å®ƒä»¬ï¼Œæ¯æ¥æ”¶ä¸€ä¸ªï¼Œæ¥æ”¶çª—å£å°±å‘å‰æ»‘åŠ¨ä¸€ä¸ªä½ç½®ï¼Œå¹¶ç»™å‘é€æ–¹å‘é€é’ˆå¯¹æ‰€æ¥æ”¶åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„ï¼Œåœ¨é€šè¿‡äº’è”ç½‘çš„ä¼ è¾“æ­£ç¡®åˆ°è¾¾äº†å‘é€æ–¹</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012192932035.png" alt="image-20201012192932035"></p><p>å‘é€æ–¹æ¯æ¥æ”¶ä¸€ä¸ªã€å‘é€çª—å£å°±å‘å‰æ»‘åŠ¨ä¸€ä¸ªä½ç½®ï¼Œè¿™æ ·å°±æœ‰æ–°çš„åºå·è½å…¥å‘é€çª—å£ï¼Œå‘é€æ–¹å¯ä»¥å°†æ”¶åˆ°ç¡®è®¤çš„æ•°æ®åˆ†ç»„ä»ç¼“å­˜ä¸­åˆ é™¤äº†ï¼Œè€Œæ¥æ”¶æ–¹å¯ä»¥æ‹©æœºå°†å·²æ¥æ”¶çš„æ•°æ®åˆ†ç»„äº¤ä»˜ä¸Šå±‚å¤„ç†</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012193212419.png" alt="image-20201012193212419"></p><h4 id="3ï¼‰ç´¯è®¡ç¡®è®¤"><a href="#3ï¼‰ç´¯è®¡ç¡®è®¤" class="headerlink" title="3ï¼‰ç´¯è®¡ç¡®è®¤"></a>3ï¼‰ç´¯è®¡ç¡®è®¤</h4><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012194304696.png" alt="ï¼Œimage-20201012194304696"></p><blockquote><p>ç´¯è®¡ç¡®è®¤</p><p>ä¼˜ç‚¹:</p><ul><li>å³ä½¿ç¡®è®¤åˆ†ç»„ä¸¢å¤±ï¼Œå‘é€æ–¹ä¹Ÿå¯èƒ½ä¸å¿…é‡ä¼ ï¼</li><li>å‡å°æ¥æ”¶æ–¹çš„å¼€é”€ï¼</li><li>å‡å°å¯¹ç½‘ç»œèµ„æºçš„å ç”¨ï¼</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸èƒ½å‘å‘é€æ–¹åŠæ—¶åæ˜ å‡ºæ¥æ”¶æ–¹å·²ç»æ­£ç¡®æ¥æ”¶çš„æ•°æ®åˆ†ç»„ä¿¡æ¯ï¼</li></ul></blockquote><h4 id="4ï¼‰æœ‰å·®é”™æƒ…å†µ"><a href="#4ï¼‰æœ‰å·®é”™æƒ…å†µ" class="headerlink" title="4ï¼‰æœ‰å·®é”™æƒ…å†µ"></a>4ï¼‰æœ‰å·®é”™æƒ…å†µ</h4><p>ä¾‹å¦‚</p><p>åœ¨ä¼ è¾“æ•°æ®åˆ†ç»„æ—¶ï¼Œ5å·æ•°æ®åˆ†ç»„å‡ºç°è¯¯ç ï¼Œæ¥æ”¶æ–¹é€šè¿‡æ•°æ®åˆ†ç»„ä¸­çš„æ£€é”™ç å‘ç°äº†é”™è¯¯</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012195440780.png" alt="image-20201012195440780"></p><p>äºæ˜¯ä¸¢å¼ƒè¯¥åˆ†ç»„ï¼Œè€Œåç»­åˆ°è¾¾çš„è¿™å‰©ä¸‹å››ä¸ªåˆ†ç»„ä¸æ¥æ”¶çª—å£çš„åºå·ä¸åŒ¹é…</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012195629368.png" alt="image-20201012195629368"></p><p>æ¥æ”¶æ–¹åŒæ ·ä¹Ÿä¸èƒ½æ¥æ”¶å®ƒä»¬ï¼Œå°†å®ƒä»¬ä¸¢å¼ƒï¼Œå¹¶å¯¹ä¹‹å‰æŒ‰åºæ¥æ”¶çš„æœ€åä¸€ä¸ªæ•°æ®åˆ†ç»„è¿›è¡Œç¡®è®¤ï¼Œå‘é€ACK4ï¼Œ<strong>æ¯ä¸¢å¼ƒä¸€ä¸ªæ•°æ®åˆ†ç»„ï¼Œå°±å‘é€ä¸€ä¸ªACK4</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012195836902.png" alt="image-20201012195836902"></p><p>å½“æ”¶åˆ°é‡å¤çš„ACK4æ—¶ï¼Œå°±çŸ¥é“ä¹‹å‰æ‰€å‘é€çš„æ•°æ®åˆ†ç»„å‡ºç°äº†å·®é”™ï¼Œäºæ˜¯å¯ä»¥ä¸ç­‰è¶…æ—¶è®¡æ—¶å™¨è¶…æ—¶å°±ç«‹åˆ»å¼€å§‹é‡ä¼ ï¼Œå…·ä½“æ”¶åˆ°å‡ ä¸ªé‡å¤ç¡®è®¤å°±ç«‹åˆ»é‡ä¼ ï¼Œæ ¹æ®å…·ä½“å®ç°å†³å®š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012200120166.png" alt="image-20201012200120166"></p><p>å¦‚æœæ”¶åˆ°è¿™4ä¸ªé‡å¤çš„ç¡®è®¤å¹¶ä¸ä¼šè§¦å‘å‘é€ç«‹åˆ»é‡ä¼ ï¼Œä¸€æ®µæ—¶é—´åã€‚è¶…æ—¶è®¡æ—¶å™¨è¶…æ—¶ï¼Œä¹Ÿä¼šå°†å‘é€çª—å£å†…ä»¥å‘é€è¿‡çš„è¿™äº›æ•°æ®åˆ†ç»„å…¨éƒ¨é‡ä¼ </p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012200454557.png" alt="image-20201012200454557"></p><p><strong>è‹¥WTè¶…è¿‡å–å€¼èŒƒå›´ï¼Œä¾‹å¦‚WT&#x3D;8ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ</strong></p><blockquote><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>å‘é€æ–¹å°†åºå·è½åœ¨å‘é€çª—å£å†…çš„0~7å·è¿™8ä¸ªæ•°æ®åˆ†ç»„ï¼Œä¾æ¬¡è¿ç»­çš„å‘é€å‡ºå»ã€‚å®ƒä»¬ç»è¿‡äº†äº’è”ç½‘çš„ä¼ è¾“ï¼Œæ­£ç¡®åˆ°è¾¾äº†æ¥æ”¶æ–¹ï¼Œæ¥æ”¶æ–¹æ­£ç¡®æŒ‰åºæ¥æ”¶åï¼Œç»™å‘é€æ–¹å‘å›ç´¯è®¡ç¡®è®¤ACK7ã€‚å‡è®¾ACK7åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±äº†ï¼Œè¿™å°†å¯¼è‡´å‘é€æ–¹çš„è¶…æ—¶é‡ä¼ ï¼Œé‡ä¼ çš„0~7å·æ•°æ®åˆ†ç»„åˆ°è¾¾æ¥æ”¶æ–¹ã€‚ä½†ç°åœ¨é—®é¢˜æ¥äº†æ¥æ”¶æ–¹æ ¹æ®å½“å‰æ¥æ”¶çª—å£å†…çš„åºå·ï¼Œä¼šå¯¹è¿™8ä¸ªæ•°æ®åˆ†ç»„æŒ‰åºæ¥æ”¶ï¼Œä½†æ˜¯æ¥æ”¶æ–¹ä¹‹å‰å·²ç»æ¥å—è¿‡è¿™8ä¸ªæ•°æ®åˆ†ç»„äº†ï¼Œç°åœ¨æ˜¯é‡å¤æ¥å—ï¼Œæ— æ³•åˆ†è¾¨æ–°ã€æ—§æ•°æ®åˆ†ç»„ï¼Œè¿›è€Œä¼šäº§ç”Ÿåˆ†ç»„é‡å¤è¿™ä¸€ä¼ è¾“å·®é”™ã€‚</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012201109774.png" alt="image-20201012201109774"></p><h4 id="5ï¼‰ä¹ é¢˜"><a href="#5ï¼‰ä¹ é¢˜" class="headerlink" title="5ï¼‰ä¹ é¢˜"></a>5ï¼‰ä¹ é¢˜</h4><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012202419107.png" alt="image-20201012202419107"></p><h4 id="6ï¼‰æ€»ç»“"><a href="#6ï¼‰æ€»ç»“" class="headerlink" title="6ï¼‰æ€»ç»“"></a>6ï¼‰æ€»ç»“</h4><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012202222138.png" alt="image-20201012202222138"></p><ul><li>å›é€€Nå¸§åè®®åœ¨æµæ°´çº¿ä¼ è¾“çš„åŸºç¡€ä¸Šåˆ©ç”¨å‘é€çª—å£æ¥é™åˆ¶å‘é€æ–¹è¿ç»­å‘é€æ•°æ®åˆ†ç»„çš„æ•°é‡ï¼Œæ˜¯ä¸€ç§è¿ç»­ARQåè®®</li><li>åœ¨åè®®çš„å·¥ä½œè¿‡ç¨‹ä¸­å‘é€çª—å£å’Œæ¥æ”¶çª—å£ä¸æ–­å‘å‰æ»‘åŠ¨ï¼Œå› æ­¤è¿™ç±»åè®®åˆç§°ä¸ºæ»‘åŠ¨çª—å£åè®®<ul><li>ç”±äºå›é€€Nå¸§åè®®çš„ç‰¹æ€§ï¼Œå½“é€šä¿¡çº¿è·¯è´¨é‡ä¸å¥½æ—¶ï¼Œå…¶ä¿¡é“åˆ©ç”¨ç‡å¹¶ä¸æ¯”åœæ­¢-ç­‰å¾…åè®®é«˜</li></ul></li></ul><h3 id="4-2-3-é€‰æ‹©é‡ä¼ åè®®SR-Selective-Request"><a href="#4-2-3-é€‰æ‹©é‡ä¼ åè®®SR-Selective-Request" class="headerlink" title="4.2.3 é€‰æ‹©é‡ä¼ åè®®SR(Selective Request)"></a>4.2.3 é€‰æ‹©é‡ä¼ åè®®SR(Selective Request)</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012203638722.png" alt="image-20201012203638722"></p><p><a href="https://www.bilibili.com/video/BV1c4411d7jb?p=27">å…·ä½“æµç¨‹è¯·çœ‹è§†é¢‘ï¼ï¼ï¼</a></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/ab2d1c59f757ffc79330fdd2a40ff90.png" alt="image-20201012203638722"></p><blockquote><p>å¦‚æœå‘é€çª—å£å’Œæ¥æ”¶çª—å£è¶…è¿‡æœ€å¤§å€¼ï¼Œä¼šå‡ºç°æ¥æ”¶æ–¹æ— æ³•åˆ†è¾¨æ–°ã€æ—§æ•°æ®åˆ†ç»„ï¼Œè¿›è€Œå‡ºç°åˆ†ç»„é‡å¤è¿™ç§å·®é”™ã€‚</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/14adb997c61c313ea80e93110da4d84.png" alt="image-20201012203638722"></p><p><strong>ä¹ é¢˜</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012205250996.png" alt="image-20201012205250996"></p><p><strong>æ€»ç»“</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012204742870.png" alt="image-20201012204742870"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012205133924.png" alt="image-20201012205133924"></p><hr><h1 id="äº”ã€ç‚¹å¯¹ç‚¹åè®®PPP"><a href="#äº”ã€ç‚¹å¯¹ç‚¹åè®®PPP" class="headerlink" title="äº”ã€ç‚¹å¯¹ç‚¹åè®®PPP"></a>äº”ã€ç‚¹å¯¹ç‚¹åè®®PPP</h1><ul><li>ç‚¹å¯¹ç‚¹åè®®PPPï¼ˆPoint-to-Point Protocolï¼‰æ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ç‚¹å¯¹ç‚¹æ•°æ®é“¾è·¯å±‚åè®®</li><li>PPPåè®®æ˜¯å› ç‰¹ç½‘å·¥ç¨‹ä»»åŠ¡ç»„IEIFåœ¨1992å¹´åˆ¶å®šçš„ã€‚ç»è¿‡1993å¹´å’Œ1994å¹´çš„ä¿®è®¢ï¼Œç°åœ¨çš„PPPåè®®å·²æˆä¸ºå› ç‰¹ç½‘çš„æ­£å¼æ ‡å‡†[RFC1661ï¼ŒRFC1662]</li><li>æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¸€ç§åè®®ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šç®€å•ï¼›åªæ£€æµ‹å·®é”™ï¼Œè€Œä¸æ˜¯çº æ­£å·®é”™ï¼›ä¸ä½¿ç”¨åºå·ï¼Œä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶ï¼›å¯åŒæ—¶æ”¯æŒå¤šç§ç½‘ç»œå±‚åè®®</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012210844629.png" alt="image-20201012210844629"></p><blockquote><p>ç‚¹å¯¹ç‚¹PPPåè®®ä¹Ÿå¹¿æ³›åº”ç”¨äºå¹¿åŸŸç½‘è·¯ç”±å™¨ä¹‹é—´çš„ä¸“ç”¨çº¿è·¯ã€‚</p></blockquote><ul><li>PPPoE æ˜¯ä¸ºå®½å¸¦ä¸Šç½‘çš„ä¸»æœºä½¿ç”¨çš„é“¾è·¯å±‚åè®®</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012211423528.png" alt="image-20201012211423528"></p><h2 id="5-1-å¸§æ ¼å¼"><a href="#5-1-å¸§æ ¼å¼" class="headerlink" title="5.1 å¸§æ ¼å¼"></a>5.1 å¸§æ ¼å¼</h2><p>å¿…é¡»è§„å®šç‰¹æ®Šçš„å­—ç¬¦ä½œä¸ºå¸§å®šç•Œç¬¦</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012211826281.png" alt="image-20201012211826281"></p><h2 id="5-2-é€æ˜ä¼ è¾“"><a href="#5-2-é€æ˜ä¼ è¾“" class="headerlink" title="5.2 é€æ˜ä¼ è¾“"></a>5.2 é€æ˜ä¼ è¾“</h2><p>å¿…é¡»ä¿è¯æ•°æ®ä¼ è¾“çš„é€æ˜æ€§ğŸ’¥</p><blockquote><p>å½“PPPå¸§çš„æ•°æ®éƒ¨åˆ†å‡ºç°å¸§é¦–å’Œå¸§å°¾ä¸­çš„æ ‡å¿—å­—æ®µæ—¶ï¼Œå¦‚æœä¸é‡‡å–æªæ–½ï¼Œåˆ™ä¼šé€ æˆæ¥æ”¶æ–¹å¯¹PPPå¸§æ˜¯å¦ç»“æŸçš„è¯¯åˆ¤ã€‚</p></blockquote><h4 id="å®ç°é€æ˜ä¼ è¾“çš„æ–¹æ³•ã€å–å†³äºæ‰€ä½¿ç”¨çš„é“¾è·¯çš„ç±»å‹ã€‘"><a href="#å®ç°é€æ˜ä¼ è¾“çš„æ–¹æ³•ã€å–å†³äºæ‰€ä½¿ç”¨çš„é“¾è·¯çš„ç±»å‹ã€‘" class="headerlink" title="å®ç°é€æ˜ä¼ è¾“çš„æ–¹æ³•ã€å–å†³äºæ‰€ä½¿ç”¨çš„é“¾è·¯çš„ç±»å‹ã€‘"></a>å®ç°é€æ˜ä¼ è¾“çš„æ–¹æ³•ã€å–å†³äºæ‰€ä½¿ç”¨çš„é“¾è·¯çš„ç±»å‹ã€‘</h4><ul><li>é¢å‘å­—èŠ‚çš„å¼‚æ­¥é“¾è·¯ï¼šå­—èŠ‚å¡«å……æ³•ï¼ˆæ’å…¥â€œè½¬ä¹‰å­—ç¬¦â€ï¼‰</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012212148803.png" alt="image-20201012212148803"></p><ul><li>é¢å‘æ¯”ç‰¹çš„åŒæ­¥é“¾è·¯ï¼šæ¯”ç‰¹å¡«å……æ³•ï¼ˆæ’å…¥â€œæ¯”ç‰¹0â€ï¼‰</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012212255550.png" alt="image-20201012212255550"></p><h2 id="5-3-å·®é”™æ£€æµ‹"><a href="#5-3-å·®é”™æ£€æµ‹" class="headerlink" title="5.3 å·®é”™æ£€æµ‹"></a>5.3 å·®é”™æ£€æµ‹</h2><p>èƒ½å¤Ÿå¯¹æ¥æ”¶ç«¯æ”¶åˆ°çš„å¸§è¿›è¡Œæ£€æµ‹ï¼Œå¹¶ç«‹å³ä¸¢å¼ƒæœ‰å·®é”™çš„å¸§ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012212558654.png" alt="image-20201012212558654"></p><h2 id="5-4-å·¥ä½œçŠ¶æ€"><a href="#5-4-å·¥ä½œçŠ¶æ€" class="headerlink" title="5.4 å·¥ä½œçŠ¶æ€"></a>5.4 å·¥ä½œçŠ¶æ€</h2><ul><li>å½“ç”¨æˆ·æ‹¨å·æ¥å…¥ ISP æ—¶ï¼Œè·¯ç”±å™¨çš„è°ƒåˆ¶è§£è°ƒå™¨å¯¹æ‹¨å·åšå‡ºç¡®è®¤ï¼Œå¹¶å»ºç«‹ä¸€æ¡ç‰©ç†è¿æ¥ã€‚</li><li>PC æœºå‘è·¯ç”±å™¨å‘é€ä¸€ç³»åˆ—çš„ LCP åˆ†ç»„ï¼ˆå°è£…æˆå¤šä¸ª PPP å¸§ï¼‰ã€‚</li><li>è¿™äº›åˆ†ç»„åŠå…¶å“åº”é€‰æ‹©ä¸€äº› PPP å‚æ•°ï¼Œå¹¶è¿›è¡Œç½‘ç»œå±‚é…ç½®ï¼ŒNCP ç»™æ–°æ¥å…¥çš„ PC æœº</li><li>åˆ†é…ä¸€ä¸ªä¸´æ—¶çš„ IP åœ°å€ï¼Œä½¿ PC æœºæˆä¸ºå› ç‰¹ç½‘ä¸Šçš„ä¸€ä¸ªä¸»æœºã€‚</li><li>é€šä¿¡å®Œæ¯•æ—¶ï¼ŒNCP é‡Šæ”¾ç½‘ç»œå±‚è¿æ¥ï¼Œæ”¶å›åŸæ¥åˆ†é…å‡ºå»çš„ IP åœ°å€ã€‚æ¥ç€ï¼ŒLCP é‡Šæ”¾æ•°æ®é“¾è·¯å±‚è¿æ¥ã€‚æœ€åé‡Šæ”¾çš„æ˜¯ç‰©ç†å±‚çš„è¿æ¥ã€‚</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201012213021860.png" alt="image-20201012213021860"></p><blockquote><p>å¯è§ï¼ŒPPP åè®®å·²ä¸æ˜¯çº¯ç²¹çš„æ•°æ®é“¾è·¯å±‚çš„åè®®ï¼Œå®ƒè¿˜åŒ…å«äº†ç‰©ç†å±‚å’Œç½‘ç»œå±‚çš„å†…å®¹ã€‚</p></blockquote><hr><h1 id="å…­ã€åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰â€”â€”å¹¿æ’­ä¿¡é“"><a href="#å…­ã€åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰â€”â€”å¹¿æ’­ä¿¡é“" class="headerlink" title="å…­ã€åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰â€”â€”å¹¿æ’­ä¿¡é“"></a>å…­ã€åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰â€”â€”å¹¿æ’­ä¿¡é“</h1><p><strong>åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰ä½¿ç”¨ä¸€å¯¹å¤šçš„å¹¿æ’­é€šä¿¡æ–¹å¼</strong></p><blockquote><p><strong>Medium Access Control</strong>ç¿»è¯‘æˆåª’ä½“æ¥å…¥æ§åˆ¶ï¼Œæœ‰äº›ç¿»è¯‘æˆä»‹è´¨è®¿é—®æ§åˆ¶</p></blockquote><p><strong>å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚</strong></p><ul><li>å±€åŸŸç½‘æœ€ä¸»è¦çš„<strong>ç‰¹ç‚¹</strong>æ˜¯ï¼š<ul><li>ç½‘ç»œä¸ºä¸€ä¸ªå•ä½æ‰€æ‹¥æœ‰ï¼›</li><li>åœ°ç†èŒƒå›´å’Œç«™ç‚¹æ•°ç›®å‡æœ‰é™ã€‚</li></ul></li><li>å±€åŸŸç½‘å…·æœ‰å¦‚ä¸‹<strong>ä¸»è¦ä¼˜ç‚¹</strong>ï¼š<ul><li>å…·æœ‰å¹¿æ’­åŠŸèƒ½ï¼Œä»ä¸€ä¸ªç«™ç‚¹å¯å¾ˆæ–¹ä¾¿åœ°è®¿é—®å…¨ç½‘ã€‚å±€åŸŸç½‘ä¸Šçš„ä¸»æœºå¯å…±äº«è¿æ¥åœ¨å±€åŸŸç½‘ä¸Šçš„å„ç§ç¡¬ä»¶å’Œè½¯ä»¶èµ„æºã€‚</li><li>ä¾¿äºç³»ç»Ÿçš„æ‰©å±•å’Œé€æ¸åœ°æ¼”å˜ï¼Œå„è®¾å¤‡çš„ä½ç½®å¯çµæ´»è°ƒæ•´å’Œæ”¹å˜ã€‚</li><li>æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ã€å¯ç”¨æ€§å’Œæ®‹å­˜æ€§ã€‚</li></ul></li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013201521915.png" alt="image-20201013201521915"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013201533445.png" alt="image-20201013201533445"></p><p><strong>æ•°æ®é“¾è·¯å±‚çš„ä¸¤ä¸ªå­å±‚</strong></p><p>ä¸ºäº†ä½¿æ•°æ®é“¾è·¯å±‚èƒ½æ›´å¥½åœ°é€‚åº”å¤šç§å±€åŸŸç½‘æ ‡å‡†ï¼ŒIEEE 802 å§”å‘˜ä¼šå°±å°†å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚æ‹†æˆ<strong>ä¸¤ä¸ªå­å±‚</strong>ï¼š</p><ol><li><strong>é€»è¾‘é“¾è·¯æ§åˆ¶</strong> LLC (Logical Link Control)å­å±‚ï¼›</li><li><strong>åª’ä½“æ¥å…¥æ§åˆ¶</strong> MAC (Medium Access Control)å­å±‚ã€‚</li></ol><p>ä¸æ¥å…¥åˆ°ä¼ è¾“åª’ä½“æœ‰å…³çš„å†…å®¹éƒ½æ”¾åœ¨ MACå­å±‚ï¼Œè€Œ LLC å­å±‚åˆ™ä¸ä¼ è¾“åª’ä½“æ— å…³ã€‚<br><strong>ä¸ç®¡é‡‡ç”¨ä½•ç§åè®®çš„å±€åŸŸç½‘ï¼Œå¯¹ LLC å­å±‚æ¥è¯´éƒ½æ˜¯é€æ˜çš„ã€‚</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013201133903.png" alt="image-20201013201133903"></p><h2 id="6-1-åŸºæœ¬æ¦‚å¿µ"><a href="#6-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="6.1 åŸºæœ¬æ¦‚å¿µ"></a>6.1 åŸºæœ¬æ¦‚å¿µ</h2><p>ä¸ºä»€ä¹ˆè¦åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰ï¼Ÿ</p><p><strong>å…±äº«ä¿¡é“å¸¦æ¥çš„é—®é¢˜</strong></p><p>è‹¥å¤šä¸ªè®¾å¤‡åœ¨å…±äº«ä¿¡é“ä¸ŠåŒæ—¶å‘é€æ•°æ®ï¼Œåˆ™ä¼šé€ æˆå½¼æ­¤å¹²æ‰°ï¼Œå¯¼è‡´å‘é€å¤±è´¥ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013152007335.png" alt="image-20201013152007335"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013152453425.png" alt="image-20201013152453425"></p><blockquote><p>éšç€æŠ€æœ¯çš„å‘å±•ï¼Œäº¤æ¢æŠ€æœ¯çš„æˆç†Ÿå’Œæˆæœ¬çš„é™ä½ï¼Œå…·æœ‰æ›´é«˜æ€§èƒ½çš„ä½¿ç”¨ç‚¹å¯¹ç‚¹é“¾è·¯å’Œé“¾è·¯å±‚äº¤æ¢æœºçš„äº¤æ¢å¼å±€åŸŸç½‘åœ¨æœ‰çº¿é¢†åŸŸå·²å®Œå…¨å–ä»£äº†å…±äº«å¼å±€åŸŸç½‘ï¼Œä½†ç”±äºæ— çº¿ä¿¡é“çš„å¹¿æ’­å¤©æ€§ï¼Œæ— çº¿å±€åŸŸç½‘ä»ç„¶ä½¿ç”¨çš„æ˜¯å…±äº«åª’ä½“æŠ€æœ¯ã€‚</p></blockquote><h2 id="6-2-é™æ€åˆ’åˆ†ä¿¡é“"><a href="#6-2-é™æ€åˆ’åˆ†ä¿¡é“" class="headerlink" title="6.2 é™æ€åˆ’åˆ†ä¿¡é“"></a>6.2 é™æ€åˆ’åˆ†ä¿¡é“</h2><h3 id="6-2-1-ä¿¡é“å¤ç”¨æ¦‚å¿µ"><a href="#6-2-1-ä¿¡é“å¤ç”¨æ¦‚å¿µ" class="headerlink" title="6.2.1 ä¿¡é“å¤ç”¨æ¦‚å¿µ"></a>6.2.1 ä¿¡é“å¤ç”¨æ¦‚å¿µ</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013153642544.png" alt="image-20201013153642544"></p><h3 id="6-2-2-å¸¸è§çš„ä¿¡é“å¤ç”¨æŠ€æœ¯"><a href="#6-2-2-å¸¸è§çš„ä¿¡é“å¤ç”¨æŠ€æœ¯" class="headerlink" title="6.2.2 å¸¸è§çš„ä¿¡é“å¤ç”¨æŠ€æœ¯"></a>6.2.2 å¸¸è§çš„ä¿¡é“å¤ç”¨æŠ€æœ¯</h3><p><strong>é¢‘åˆ†å¤ç”¨FDM (Frequency Division Multiplexing)</strong></p><ul><li><p>å°†æ•´ä¸ªå¸¦å®½åˆ†ä¸ºå¤šä»½ï¼Œç”¨æˆ·åœ¨åˆ†é…åˆ°ä¸€å®šçš„é¢‘å¸¦åï¼Œåœ¨é€šä¿¡è¿‡ç¨‹ä¸­è‡ªå§‹è‡³ç»ˆéƒ½å ç”¨è¿™ä¸ªé¢‘å¸¦ã€‚</p></li><li><p><strong>é¢‘åˆ†å¤ç”¨</strong>çš„æ‰€æœ‰ç”¨æˆ·åœ¨åŒæ ·çš„æ—¶é—´<strong>å ç”¨ä¸åŒçš„å¸¦å®½èµ„æº</strong>ï¼ˆè¯·æ³¨æ„ï¼Œè¿™é‡Œçš„â€œå¸¦å®½â€æ˜¯é¢‘ç‡å¸¦å®½è€Œä¸æ˜¯æ•°æ®çš„å‘é€é€Ÿç‡ï¼‰ã€‚</p></li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013153947668.png" alt="image-20201013153947668"></p><p><strong>æ—¶åˆ†å¤ç”¨TDM (Time Division Multiplexing)</strong></p><ul><li><strong>æ—¶åˆ†å¤ç”¨</strong>åˆ™æ˜¯å°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€æ®µæ®µç­‰é•¿çš„<strong>æ—¶åˆ†å¤ç”¨å¸§ï¼ˆTDMå¸§ï¼‰</strong>ã€‚æ¯ä¸€ä¸ªæ—¶åˆ†å¤ç”¨çš„ç”¨æˆ·åœ¨æ¯ä¸€ä¸ª TDM å¸§ä¸­å ç”¨å›ºå®šåºå·çš„æ—¶éš™ã€‚</li><li>æ¯ä¸€ä¸ªç”¨æˆ·æ‰€å ç”¨çš„æ—¶éš™æ˜¯<strong>å‘¨æœŸæ€§åœ°å‡ºç°</strong>ï¼ˆå…¶å‘¨æœŸå°±æ˜¯TDMå¸§çš„é•¿åº¦ï¼‰çš„ã€‚</li><li>TDM ä¿¡å·ä¹Ÿç§°ä¸º<strong>ç­‰æ—¶</strong> (isochronous) ä¿¡å·ã€‚</li><li><strong>æ—¶åˆ†å¤ç”¨çš„æ‰€æœ‰ç”¨æˆ·åœ¨ä¸åŒçš„æ—¶é—´å ç”¨åŒæ ·çš„é¢‘å¸¦å®½åº¦ã€‚</strong></li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013154142540.png" alt="image-20201013154142540"></p><p><strong>æ³¢åˆ†å¤ç”¨ WDM(Wavelength Division Multiplexing)</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013202218132.png" alt="image-20201013202218132"></p><blockquote><p>æ³¢åˆ†å¤ç”¨å°±æ˜¯å…‰çš„é¢‘åˆ†å¤ç”¨ï¼Œä½¿ç”¨ä¸€æ ¹å…‰çº¤æ¥åŒæ—¶ä¼ è¾“å¤šä¸ªå…‰è½½æ³¢ä¿¡å·</p><p>å…‰ä¿¡å·ä¼ è¾“ä¸€æ®µè·ç¦»åæ‚”è¡°å‡ï¼Œæ‰€ä»¥è¦ç”¨ æºé“’å…‰çº¤æ”¾å¤§å™¨ æ”¾å¤§å…‰ä¿¡å·</p></blockquote><p><strong>ç åˆ†å¤ç”¨ CDM  (Code Division Multiplexing)</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013203126625.png" alt="image-20201013203126625"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013203324709.png" alt="image-20201013203324709"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013203459640.png" alt="image-20201013203459640"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013203819578.png" alt="image-20201013203819578"></p><h2 id="6-3-åŠ¨æ€æ¥å…¥æ§åˆ¶"><a href="#6-3-åŠ¨æ€æ¥å…¥æ§åˆ¶" class="headerlink" title="6.3 åŠ¨æ€æ¥å…¥æ§åˆ¶"></a>6.3 åŠ¨æ€æ¥å…¥æ§åˆ¶</h2><p>å—æ§æ¥å…¥</p><p><strong>å—æ§æ¥å…¥åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨å¾—è¾ƒå°‘ï¼Œæœ¬ä¹¦ä¸å†è®¨è®º</strong></p><p><strong>éšæœºæ¥å…¥</strong></p><p><strong>é‡ç‚¹</strong></p><h3 id="å…³äºé€€é¿ç®—æ³•ï¼š"><a href="#å…³äºé€€é¿ç®—æ³•ï¼š" class="headerlink" title="å…³äºé€€é¿ç®—æ³•ï¼š"></a>å…³äºé€€é¿ç®—æ³•ï¼š</h3><blockquote><p>é€€é¿ç®—æ³•æ˜¯æŒ‡åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°å†²çªï¼ˆå³å¤šä¸ªè®¾å¤‡åŒæ—¶å‘é€æ•°æ®å¯¼è‡´å†²çªï¼‰ï¼Œåˆ™éœ€è¦è¿›è¡Œé€€é¿æ“ä½œã€‚é€€é¿æ“ä½œæŒ‡çš„æ˜¯å°†å½“å‰çš„æ•°æ®åŒ…å»¶è¿Ÿä¸€æ®µæ—¶é—´åå†æ¬¡å‘é€ï¼Œä»¥é¿å…å†æ¬¡å‘ç”Ÿå†²çªã€‚</p><p>é€€é¿ç®—æ³•é€šå¸¸ä¼šå‡ºç°åœ¨ä»¥å¤ªç½‘ä¸­ï¼Œå› ä¸ºä»¥å¤ªç½‘é‡‡ç”¨çš„æ˜¯CSMA&#x2F;CDåè®®ï¼Œå³è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®&#x2F;å†²çªæ£€æµ‹ã€‚å½“å¤šä¸ªè®¾å¤‡åŒæ—¶å‘é€æ•°æ®å¯¼è‡´å†²çªæ—¶ï¼Œå°±éœ€è¦è¿›è¡Œé€€é¿æ“ä½œã€‚</p><p>é€€é¿ç®—æ³•çš„ç›®çš„æ˜¯ä¸ºäº†é¿å…ç½‘ç»œä¸­çš„å†²çªï¼Œä»è€Œæé«˜ç½‘ç»œçš„æ•ˆç‡å’Œç¨³å®šæ€§ã€‚å¦‚æœæ²¡æœ‰é€€é¿ç®—æ³•ï¼Œå†²çªä¼šä¸æ–­å‘ç”Ÿï¼Œå¯¼è‡´ç½‘ç»œçš„ä¼ è¾“é€Ÿåº¦å˜æ…¢ï¼Œå½±å“ç½‘ç»œçš„æ­£å¸¸è¿è¡Œã€‚å› æ­¤ï¼Œé€€é¿ç®—æ³•æ˜¯ç½‘ç»œä¸­å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ã€‚</p></blockquote><h3 id="æ—¶éš™ä¸äº‰ç”¨æœŸï¼š"><a href="#æ—¶éš™ä¸äº‰ç”¨æœŸï¼š" class="headerlink" title="æ—¶éš™ä¸äº‰ç”¨æœŸï¼š"></a>æ—¶éš™ä¸äº‰ç”¨æœŸï¼š</h3><blockquote><p>æ—¶éš™å’Œäº‰ç”¨æœŸæ˜¯æ— çº¿é€šä¿¡ä¸­çš„ä¸¤ä¸ªé‡è¦æ¦‚å¿µã€‚</p><p>æ—¶éš™æ˜¯æ— çº¿é€šä¿¡ä¸­ç”¨äºä¼ è¾“æ•°æ®çš„æ—¶é—´æ®µï¼Œä¹Ÿç§°ä¸ºæ—¶é—´ç‰‡ã€‚ä¸€ä¸ªæ—¶éš™é€šå¸¸åŒ…æ‹¬å‘é€å’Œæ¥æ”¶æ•°æ®çš„æ—¶é—´ï¼Œä»¥åŠä¸€äº›å¿…è¦çš„æ§åˆ¶ä¿¡æ¯ã€‚</p><p>äº‰ç”¨æœŸæ˜¯æŒ‡å½“å¤šä¸ªè®¾å¤‡åœ¨åŒä¸€æ—¶éš™å†…è¯•å›¾ä¼ è¾“æ•°æ®æ—¶ï¼Œå®ƒä»¬ä¹‹é—´çš„ç«äº‰æ—¶é—´ã€‚åœ¨äº‰ç”¨æœŸå†…ï¼Œè®¾å¤‡ä¼šç«äº‰ä½¿ç”¨æ—¶éš™ï¼Œä»¥ä¾¿ä¼ è¾“æ•°æ®ã€‚å¦‚æœå¤šä¸ªè®¾å¤‡åŒæ—¶å°è¯•ä½¿ç”¨åŒä¸€æ—¶éš™ï¼Œå°±ä¼šå‘ç”Ÿå†²çªï¼Œå¯¼è‡´æ•°æ®ä¼ è¾“å¤±è´¥ã€‚</p><p>ä¸ºäº†é¿å…å†²çªå’Œæé«˜é€šä¿¡æ•ˆç‡ï¼Œé€šå¸¸ä¼šä½¿ç”¨ä¸€äº›åè®®å’ŒæŠ€æœ¯æ¥ç®¡ç†æ—¶éš™å’Œäº‰ç”¨æœŸã€‚ä¾‹å¦‚ï¼Œæ— çº¿å±€åŸŸç½‘ä¸­ä½¿ç”¨çš„CSMA&#x2F;CAåè®®å°±æ˜¯ä¸€ç§ç”¨äºç®¡ç†äº‰ç”¨æœŸçš„æŠ€æœ¯ã€‚åœ¨CSMA&#x2F;CAä¸­ï¼Œè®¾å¤‡åœ¨å‘é€æ•°æ®å‰ä¼šå…ˆç›‘å¬ä¿¡é“ï¼Œä»¥ç¡®ä¿ä¿¡é“ä¸Šæ²¡æœ‰å…¶ä»–è®¾å¤‡æ­£åœ¨ä¼ è¾“æ•°æ®ã€‚å¦‚æœä¿¡é“ç©ºé—²ï¼Œè®¾å¤‡å°±å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®ã€‚å¦‚æœä¿¡é“æœ‰å…¶ä»–è®¾å¤‡æ­£åœ¨ä¼ è¾“æ•°æ®ï¼Œè®¾å¤‡å°±ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡å°è¯•ä¼ è¾“ã€‚è¿™æ ·å¯ä»¥å‡å°‘å†²çªï¼Œæé«˜é€šä¿¡æ•ˆç‡ã€‚</p></blockquote><h2 id="6-4-éšæœºæ¥å…¥ï¼ˆCSMA-x2F-CDåè®®ï¼‰"><a href="#6-4-éšæœºæ¥å…¥ï¼ˆCSMA-x2F-CDåè®®ï¼‰" class="headerlink" title="6.4 éšæœºæ¥å…¥ï¼ˆCSMA&#x2F;CDåè®®ï¼‰"></a>6.4 éšæœºæ¥å…¥ï¼ˆCSMA&#x2F;CDåè®®ï¼‰</h2><p><strong>æ€»çº¿å±€åŸŸç½‘ä½¿ç”¨åè®®ï¼šCSMA&#x2F;CD</strong></p><h3 id="6-4-1-åŸºæœ¬æ¦‚å¿µ"><a href="#6-4-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="6.4.1 åŸºæœ¬æ¦‚å¿µ"></a>6.4.1 åŸºæœ¬æ¦‚å¿µ</h3><p><strong>æœ€åˆ</strong>çš„<strong>ä»¥å¤ªç½‘</strong>æ˜¯å°†è®¸å¤šè®¡ç®—æœºéƒ½è¿æ¥åˆ°ä¸€æ ¹æ€»çº¿ä¸Šã€‚æ˜“äºå®ç°å¹¿æ’­é€šä¿¡ã€‚å½“åˆè®¤ä¸ºè¿™æ ·çš„è¿æ¥æ–¹æ³•æ—¢ç®€å•åˆå¯é ï¼Œå› ä¸ºæ€»çº¿ä¸Šæ²¡æœ‰æœ‰æºå™¨ä»¶ã€‚</p><blockquote><p><strong>ä»¥å¤ªç½‘ï¼ˆEthernetï¼‰</strong>æ˜¯ä¸€ç§è®¡ç®—æœº<strong>å±€åŸŸç½‘æŠ€æœ¯</strong>ã€‚IEEEç»„ç»‡çš„IEEE 802.3æ ‡å‡†åˆ¶å®šäº†<strong>ä»¥å¤ªç½‘ï¼ˆEthernetï¼‰</strong>çš„æŠ€æœ¯æ ‡å‡†</p><p>ä»¥å¤ªç½‘é‡‡ç”¨æ— è¿æ¥çš„å·¥ä½œæ–¹å¼ï¼Œå¯¹å‘é€çš„æ•°æ®å¸§ä¸è¿›è¡Œç¼–å·ï¼Œä¹Ÿä¸è¦æ±‚å¯¹æ–¹å‘å›ç¡®è®¤ã€‚ç›®çš„ç«™æ”¶åˆ°æœ‰å·®é”™å¸§å°±æŠŠå®ƒä¸¢å¼ƒï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åš</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013211620687.png" alt="image-20201013211620687"></p><p class='p red'>æ—©æœŸçš„å…±äº«å¼ä»¥å¤ªç½‘é‡‡ç”¨è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥/ç¢°æ’æ£€æµ‹ï¼Œä¹Ÿå°±æ˜¯CSMA/CDåè®®æ¥è§£å†³è¯¥é—®é¢˜ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013213102777.png" alt="image-20201013213102777"></p><blockquote><p>ä¸Šå›¾ä¸­çš„<code>96æ¯”ç‰¹æ—¶é—´</code>æ˜¯æŒ‡å‘é€96æ¯”ç‰¹æ‰€è€—è´¹çš„æ—¶é—´ï¼Œä¹Ÿç§°ä¸ºå¸§é—´æœ€å°é—´éš”ã€‚å…¶ä½œç”¨æ˜¯ä½¿æ¥æ”¶æ–¹å¯ä»¥æ£€æµ‹å‡ºä¸€ä¸ªå¸§çš„ç»“æŸï¼ŒåŒæ—¶ä¹Ÿèƒ½ä½¿å¾—å…¶ä»–ç«™ç‚¹éƒ½èƒ½æœ‰æœºä¼šå¹³ç­‰ç«äº‰ä¿¡é“å¹¶å‘é€å¸§ã€‚</p></blockquote><h3 id="6-4-2-å¤šå€æ¥å…¥MA"><a href="#6-4-2-å¤šå€æ¥å…¥MA" class="headerlink" title="6.4.2 å¤šå€æ¥å…¥MA"></a>6.4.2 å¤šå€æ¥å…¥MA</h3><p>è¡¨ç¤ºè®¸å¤šä¸»æœºä»¥å¤šç‚¹æ¥å…¥çš„æ–¹å¼è¿æ¥åœ¨ä¸€æ ¹æ€»çº¿ä¸Šã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013215400688.png" alt="image-20201013215400688"></p><h3 id="6-4-3-è½½æ³¢ç›‘å¬CS"><a href="#6-4-3-è½½æ³¢ç›‘å¬CS" class="headerlink" title="6.4.3 è½½æ³¢ç›‘å¬CS"></a>6.4.3 è½½æ³¢ç›‘å¬CS</h3><p>æ˜¯æŒ‡æ¯ä¸€ä¸ªç«™åœ¨å‘é€æ•°æ®ä¹‹å‰å…ˆè¦æ£€æµ‹ä¸€ä¸‹æ€»çº¿ä¸Šæ˜¯å¦æœ‰å…¶ä»–è®¡ç®—æœºåœ¨å‘é€æ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æš‚æ—¶ä¸è¦å‘é€æ•°æ®ï¼Œä»¥å…å‘ç”Ÿç¢°æ’ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013215530979.png" alt="image-20201013215530979"></p><p>æ€»çº¿ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆâ€œè½½æ³¢â€ã€‚å› æ­¤ï¼Œ <strong>â€œè½½æ³¢ç›‘å¬â€å°±æ˜¯ç”¨ç”µå­æŠ€æœ¯æ£€æµ‹æ€»çº¿ä¸Šæœ‰æ²¡æœ‰å…¶ä»–è®¡ç®—æœºå‘é€çš„æ•°æ®ä¿¡å·ã€‚</strong></p><h3 id="6-4-4-ç¢°æ’æ£€æµ‹CD"><a href="#6-4-4-ç¢°æ’æ£€æµ‹CD" class="headerlink" title="6.4.4 ç¢°æ’æ£€æµ‹CD"></a>6.4.4 ç¢°æ’æ£€æµ‹CD</h3><ul><li><strong>â€œç¢°æ’æ£€æµ‹â€</strong>å°±æ˜¯è®¡ç®—æœº<strong>è¾¹å‘é€æ•°æ®è¾¹æ£€æµ‹</strong>ä¿¡é“ä¸Šçš„ä¿¡å·ç”µå‹å¤§å°ã€‚</li><li>å½“å‡ ä¸ªç«™åŒæ—¶åœ¨æ€»çº¿ä¸Šå‘é€æ•°æ®æ—¶ï¼Œæ€»çº¿ä¸Šçš„ä¿¡å·ç”µå‹æ‘†åŠ¨å€¼å°†ä¼šå¢å¤§ï¼ˆäº’ç›¸å åŠ ï¼‰ã€‚</li><li>å½“ä¸€ä¸ªç«™æ£€æµ‹åˆ°çš„ä¿¡å·ç”µå‹æ‘†åŠ¨å€¼è¶…è¿‡ä¸€å®šçš„é—¨é™å€¼æ—¶ï¼Œå°±è®¤ä¸ºæ€»çº¿ä¸Šè‡³å°‘æœ‰ä¸¤ä¸ªç«™åŒæ—¶åœ¨å‘é€æ•°æ®ï¼Œè¡¨æ˜äº§ç”Ÿäº†ç¢°æ’ã€‚</li><li><strong>æ‰€è°“â€œç¢°æ’â€å°±æ˜¯å‘ç”Ÿäº†å†²çªã€‚å› æ­¤â€œç¢°æ’æ£€æµ‹â€ä¹Ÿç§°ä¸ºâ€œå†²çªæ£€æµ‹â€ã€‚</strong></li><li>åœ¨å‘ç”Ÿç¢°æ’æ—¶ï¼Œæ€»çº¿ä¸Šä¼ è¾“çš„ä¿¡å·äº§ç”Ÿäº†ä¸¥é‡çš„å¤±çœŸï¼Œæ— æ³•ä»ä¸­æ¢å¤å‡ºæœ‰ç”¨çš„ä¿¡æ¯æ¥ã€‚</li><li><strong>æ¯ä¸€ä¸ªæ­£åœ¨å‘é€æ•°æ®çš„ç«™ï¼Œä¸€æ—¦å‘ç°æ€»çº¿ä¸Šå‡ºç°äº†ç¢°æ’ï¼Œå°±è¦ç«‹å³åœæ­¢å‘é€ï¼Œå…å¾—ç»§ç»­æµªè´¹ç½‘ç»œèµ„æºï¼Œç„¶åç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å‘é€ã€‚</strong></li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013221240514.png" alt="image-20201013221240514"></p><blockquote><p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œç¢°æ’æ£€æµ‹ï¼Ÿ å› ä¸ºä¿¡å·ä¼ æ’­æ—¶å»¶å¯¹è½½æ³¢ç›‘å¬äº§ç”Ÿäº†å½±å“</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013221834942.png" alt="image-20201013221834942"></p><p>A éœ€è¦å•ç¨‹ä¼ æ’­æ—¶å»¶çš„ 2 å€çš„æ—¶é—´ï¼Œæ‰èƒ½æ£€æµ‹åˆ°ä¸ B çš„å‘é€äº§ç”Ÿäº†å†²çª</p></blockquote><h3 id="6-4-5-CSMA-x2F-CD-åè®®å·¥ä½œæµç¨‹"><a href="#6-4-5-CSMA-x2F-CD-åè®®å·¥ä½œæµç¨‹" class="headerlink" title="6.4.5 CSMA&#x2F;CD åè®®å·¥ä½œæµç¨‹"></a>6.4.5 CSMA&#x2F;CD åè®®å·¥ä½œæµç¨‹</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013221705893.png" alt="image-20201013221705893"></p><h3 id="6-4-6-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”äº‰ç”¨æœŸï¼ˆç¢°æ’çª—å£ï¼‰"><a href="#6-4-6-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”äº‰ç”¨æœŸï¼ˆç¢°æ’çª—å£ï¼‰" class="headerlink" title="6.4.6 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”äº‰ç”¨æœŸï¼ˆç¢°æ’çª—å£ï¼‰"></a>6.4.6 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”äº‰ç”¨æœŸï¼ˆç¢°æ’çª—å£ï¼‰</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013223235305.png" alt="image-20201013223235305"></p><h3 id="6-4-7-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”æœ€å°å¸§é•¿"><a href="#6-4-7-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”æœ€å°å¸§é•¿" class="headerlink" title="6.4.7 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”æœ€å°å¸§é•¿"></a>6.4.7 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”æœ€å°å¸§é•¿</h3><p>â€‹å‡è®¾ä¸»æœºAæ­£åœ¨ç»™ä¸»æœºDå‘é€ä¸€ä¸ªå¾ˆçŸ­çš„å¸§ï¼Œè¾¹å‘é€è¾¹æ£€æµ‹ç¢°æ’ï¼Œä¸»æœºAå¾ˆå¿«å°±å°†è¯¥å¸§å‘é€å®Œæ¯•äº†ï¼Œä¹‹åå°±ä¸å†é’ˆå¯¹è¯¥å¸§æ£€æµ‹ç¢°æ’ã€‚åœ¨è¯¥å¸§çš„ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¸»æœºCä¹Ÿè¦å‘é€å¸§ï¼Œä¸»æœºCæ£€æµ‹åˆ°æ€»çº¿ç©ºé—²96æ¯”ç‰¹æ—¶é—´åå°±ç«‹å³å‘é€å¸§å°½ç®¡æ€»çº¿ç°åœ¨å®é™…ä¸Šå¹¶ä¸ç©ºé—²ï¼Œè¿™å¿…ç„¶ä¼šäº§ç”Ÿç¢°æ’ã€‚ä¸»æœºDæœ€ç»ˆä¼šæ”¶åˆ°ä¸»æœºAå‘é€çš„ã€å¹¶é­é‡ç¢°æ’çš„å¸§ï¼Œä¸»æœºDä¼šå°†è¯¥å¸§ä¸¢å¼ƒã€‚ä½†å¯¹äºä¸»æœºAè€Œè¨€ï¼Œå®ƒå¹¶ä¸çŸ¥é“è‡ªå·±å·²å‘é€å®Œæ¯•çš„è¯¥å¸§ï¼Œåœ¨æ€»çº¿ä¸Šä¼ è¾“çš„è¿‡ç¨‹ä¸­é­é‡äº†ç¢°æ’ï¼Œå› æ­¤ä¸ä¼šé‡å‘è¯¥å¸§ã€‚å› æ­¤ä½¿ç”¨CSMA&#x2F;CDåè®®çš„ä»¥å¤ªç½‘çš„å¸§é•¿ä¸èƒ½å¤ªçŸ­ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013224051932.png" alt="image-20201013224051932"></p><blockquote><p>æ ¹æ®ç«¯åˆ°ç«¯æ—¶å»¶ï¼Œå¯ä»¥æ±‚å‡ºäº‰ç”¨æœŸï¼Œå†ä¹˜ä»¥æ•°æ®ä¼ è¾“é€Ÿç‡ï¼Œå³ä¸ºæœ€å°å¸§é•¿ã€‚</p></blockquote><h3 id="6-4-8-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”æœ€å¤§å¸§é•¿"><a href="#6-4-8-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”æœ€å¤§å¸§é•¿" class="headerlink" title="6.4.8 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”æœ€å¤§å¸§é•¿"></a>6.4.8 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”æœ€å¤§å¸§é•¿</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013225400777.png" alt="image-20201013225400777"></p><h3 id="6-4-9-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”æˆªæ–­äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•"><a href="#6-4-9-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”æˆªæ–­äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•" class="headerlink" title="6.4.9 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”æˆªæ–­äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•"></a>6.4.9 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”æˆªæ–­äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•</h3><p>ğŸ“Œæ­¤å°èŠ‚ä»‹ç»é€€é¿æ—¶é—´çš„è®¡ç®—æ–¹æ³•</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013230717856.png" alt="image-20201013230717856"></p><h3 id="6-4-10-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”ä¿¡é“åˆ©ç”¨ç‡"><a href="#6-4-10-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”ä¿¡é“åˆ©ç”¨ç‡" class="headerlink" title="6.4.10 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”ä¿¡é“åˆ©ç”¨ç‡"></a>6.4.10 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”ä¿¡é“åˆ©ç”¨ç‡</h3><blockquote><p>å‘é€æˆåŠŸåï¼Œè¿˜æœ‰ä¿¡é“ä¸­ç«¯åˆ°ç«¯çš„ä¼ æ’­æ—¶å»¶ï¼Œæ‰€ä»¥è¿˜ä¼šå¤šä¸€ä¸ªt</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013231430295.png" alt="image-20201013231430295"></p><h3 id="6-4-11-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”å¸§å‘é€æµç¨‹"><a href="#6-4-11-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”å¸§å‘é€æµç¨‹" class="headerlink" title="6.4.11 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”å¸§å‘é€æµç¨‹"></a>6.4.11 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”å¸§å‘é€æµç¨‹</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/4122fc42639b194625028bce9779b2e.png" alt="image-20201013231703302"></p><h3 id="6-4-12-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”å¸§æ¥æ”¶æµç¨‹"><a href="#6-4-12-CSMA-x2F-CD-åè®®å·¥ä½œâ€”â€”å¸§æ¥æ”¶æµç¨‹" class="headerlink" title="6.4.12 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”å¸§æ¥æ”¶æµç¨‹"></a>6.4.12 CSMA&#x2F;CD åè®®å·¥ä½œâ€”â€”å¸§æ¥æ”¶æµç¨‹</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201013231703302.png" alt="image-20201013231703302"></p><h3 id="6-4-13-CSMA-x2F-CD-åè®®çš„é‡è¦ç‰¹æ€§"><a href="#6-4-13-CSMA-x2F-CD-åè®®çš„é‡è¦ç‰¹æ€§" class="headerlink" title="6.4.13 CSMA&#x2F;CD åè®®çš„é‡è¦ç‰¹æ€§"></a>6.4.13 CSMA&#x2F;CD åè®®çš„é‡è¦ç‰¹æ€§</h3><ul><li>ä½¿ç”¨ CSMA&#x2F;CD åè®®çš„ä»¥å¤ªç½‘ä¸èƒ½è¿›è¡Œå…¨åŒå·¥é€šä¿¡è€Œ<strong>åªèƒ½è¿›è¡ŒåŒå‘äº¤æ›¿é€šä¿¡ï¼ˆåŠåŒå·¥é€šä¿¡ï¼‰ã€‚</strong></li><li>æ¯ä¸ªç«™åœ¨å‘é€æ•°æ®ä¹‹åçš„ä¸€å°æ®µæ—¶é—´å†…ï¼Œå­˜åœ¨ç€é­é‡ç¢°æ’çš„å¯èƒ½æ€§ã€‚</li><li>è¿™ç§<strong>å‘é€çš„ä¸ç¡®å®šæ€§</strong>ä½¿æ•´ä¸ªä»¥å¤ªç½‘çš„å¹³å‡é€šä¿¡é‡è¿œå°äºä»¥å¤ªç½‘çš„æœ€é«˜æ•°æ®ç‡ã€‚</li></ul><blockquote><p>CSMA&#x2F;CDåè®®æ›¾ç»ç”¨äºå„ç§æ€»çº¿ç»“æ„ä»¥å¤ªç½‘å’ŒåŒç»çº¿ä»¥å¤ªç½‘çš„æ—©èµ·ç‰ˆæœ¬ä¸­ã€‚</p><p><strong>ç°åœ¨çš„ä»¥å¤ªç½‘åŸºäºäº¤æ¢æœºå’Œå…¨åŒå·¥è¿æ¥ï¼Œä¸ä¼šæœ‰ç¢°æ’ï¼Œå› æ­¤æ²¡æœ‰å¿…è¦ä½¿ç”¨CSMA&#x2F;CSåè®®</strong></p></blockquote><h2 id="6-5-éšæœºæ¥å…¥ï¼ˆCSMA-x2F-CAåè®®ï¼‰"><a href="#6-5-éšæœºæ¥å…¥ï¼ˆCSMA-x2F-CAåè®®ï¼‰" class="headerlink" title="6.5 éšæœºæ¥å…¥ï¼ˆCSMA&#x2F;CAåè®®ï¼‰"></a>6.5 éšæœºæ¥å…¥ï¼ˆCSMA&#x2F;CAåè®®ï¼‰</h2><p><strong>æ— çº¿å±€åŸŸç½‘ä½¿ç”¨çš„åè®®ï¼šCSMA&#x2F;CA</strong></p><h3 id="6-5-1-ä¸ºä»€ä¹ˆæ— çº¿å±€åŸŸç½‘è¦ä½¿ç”¨CSMA-x2F-CAåè®®"><a href="#6-5-1-ä¸ºä»€ä¹ˆæ— çº¿å±€åŸŸç½‘è¦ä½¿ç”¨CSMA-x2F-CAåè®®" class="headerlink" title="6.5.1 ä¸ºä»€ä¹ˆæ— çº¿å±€åŸŸç½‘è¦ä½¿ç”¨CSMA&#x2F;CAåè®®"></a>6.5.1 ä¸ºä»€ä¹ˆæ— çº¿å±€åŸŸç½‘è¦ä½¿ç”¨CSMA&#x2F;CAåè®®</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014192811760.png" alt="image-20201014192811760"></p><h3 id="6-5-2-å¸§é—´é—´éš”IFSï¼ˆInterFrame-Spaceï¼‰"><a href="#6-5-2-å¸§é—´é—´éš”IFSï¼ˆInterFrame-Spaceï¼‰" class="headerlink" title="6.5.2 å¸§é—´é—´éš”IFSï¼ˆInterFrame Spaceï¼‰"></a>6.5.2 å¸§é—´é—´éš”IFSï¼ˆInterFrame Spaceï¼‰</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014200149717.png" alt="image-20201014200149717"></p><h3 id="6-5-3-CSMA-x2F-CAåè®®çš„å·¥ä½œåŸç†"><a href="#6-5-3-CSMA-x2F-CAåè®®çš„å·¥ä½œåŸç†" class="headerlink" title="6.5.3 CSMA&#x2F;CAåè®®çš„å·¥ä½œåŸç†"></a>6.5.3 CSMA&#x2F;CAåè®®çš„å·¥ä½œåŸç†</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014200833233.png" alt="image-20201014200833233"></p><blockquote><p><strong>æºç«™ä¸ºä»€ä¹ˆåœ¨æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²åè¿˜è¦å†ç­‰å¾…ä¸€æ®µæ—¶é—´DIFSï¼Ÿ</strong></p><ul><li>è€ƒè™‘åˆ°å¯èƒ½æœ‰å…¶ä»–çš„ç«™æœ‰é«˜ä¼˜å…ˆçº§çš„å¸§è¦å‘é€ã€‚è‹¥æœ‰ï¼Œå°±è¦è®©é«˜ä¼˜å…ˆçº§å¸§å…ˆå‘é€</li></ul><p><strong>ç›®çš„ç«™ä¸ºä»€ä¹ˆæ­£ç¡®æ¥æ”¶æ•°æ®å¸§åè¿˜è¦ç­‰å¾…ä¸€æ®µæ—¶é—´SIFSæ‰èƒ½å‘é€ACKå¸§ï¼Ÿ</strong></p><ul><li>SIFSæ˜¯æœ€çŸ­çš„å¸§é—´é—´éš”ï¼Œç”¨æ¥åˆ†éš”å¼€å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œä¸€ä¸ªç«™ç‚¹åº”å½“èƒ½å¤Ÿä»å‘é€æ–¹å¼åˆ‡æ¢åˆ°æ¥æ”¶æ–¹å¼</li></ul></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014201511741.png" alt="image-20201014201511741"></p><blockquote><p><strong>ä¿¡é“ç”±å¿™è½¬ä¸ºç©ºé—²ä¸”ç»è¿‡DIFSæ—¶é—´åï¼Œè¿˜è¦é€€é¿ä¸€æ®µéšæœºæ—¶é—´æ‰èƒ½ä½¿ç”¨ä¿¡é“ï¼Ÿ</strong></p><p>é˜²æ­¢å¤šä¸ªç«™ç‚¹åŒæ—¶å‘é€æ•°æ®è€Œäº§ç”Ÿç¢°æ’</p></blockquote><p><strong>ä½¿ç”¨é€€é¿ç®—æ³•çš„æ—¶æœº</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014201927680.png" alt="image-20201014201927680"></p><h3 id="6-5-4-CSMA-x2F-CAåè®®çš„é€€é¿ç®—æ³•"><a href="#6-5-4-CSMA-x2F-CAåè®®çš„é€€é¿ç®—æ³•" class="headerlink" title="6.5.4 CSMA&#x2F;CAåè®®çš„é€€é¿ç®—æ³•"></a>6.5.4 CSMA&#x2F;CAåè®®çš„é€€é¿ç®—æ³•</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014202213766.png" alt="image-20201014202213766"></p><p><strong>é€€é¿ç®—æ³•çš„ç¤ºä¾‹</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014202819851.png" alt="image-20201014202819851"></p><p>ä¸Šå›¾Aã€Bã€Cã€Dã€Eæ˜¯äº”ä¸ªæ— çº¿ç«™ç‚¹ï¼Œæ¨ªåæ ‡ä¸ºæ—¶é—´ï¼Œå‡è®¾Aæ­£åœ¨å ç”¨æ— çº¿ä¿¡é“å‘é€å¸§ï¼Œåœ¨Açš„å‘é€è¿‡ç¨‹ä¸­ï¼ŒBã€Cã€Dä¹Ÿè¦å‘é€å¸§ï¼Œæˆ‘ä»¬ç”¨å‘ä¸Šçš„ç®­å¤´æ¥è¡¨ç¤ºï¼Œäºæ˜¯è¿›è¡Œè½½æ³¢ç›‘å¬ï¼Œå‘ç°ä¿¡é“å¿™ï¼Œéœ€è¦é€€é¿ï¼Œæ ¹æ®é€€é¿ç®—æ³•é€‰æ‹©å‡ºä¸€ä¸ªéšæœºæ—¶é—´ï¼Œå¹¶åœ¨æ¯ä¸ªæ—¶éš™å¯¹ä¿¡é“è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œå½“æ£€æµ‹åˆ°ä¿¡é“ç”±å¿™è½¬ä¸ºç©ºé—²çŠ¶æ€ï¼Œä¸”ç»è¿‡å¸§é—´é—´éš”DIFSåï¼Œé€€é¿è®¡æ—¶å™¨å¼€å§‹å€’è®¡æ—¶ï¼Œå‡è®¾Cçš„é€€é¿æ—¶é—´æœ€çŸ­ï¼Œå½“Cçš„é€€é¿è®¡æ—¶å™¨åˆ°æ—¶åï¼ŒCç«‹å³å¼€å§‹å‘é€å¸§ï¼Œæ­¤æ—¶ä¿¡é“ç”±ç©ºé—²çŠ¶æ€è½¬æ¢ä¸ºå¿™çŠ¶æ€ï¼Œå½“Bå’ŒDæ£€æµ‹åˆ°ä¿¡é“å¿™åï¼Œå°±å†»ç»“å„è‡ªå‰©ä½™çš„é€€é¿æ—¶é—´ã€‚å½“Bå’ŒDæ£€æµ‹åˆ°ä¿¡é“ç”±å¿™è½¬åŒ–ä¸ºç©ºé—²çŠ¶æ€ä¸”ç»è¿‡å¸§é—´é—´éš”DIFSåï¼Œé€€é¿è®¡æ—¶å™¨é‡æ–°å¼€å§‹ä»ä¸Šæ¬¡å†»ç»“çš„é€€é¿å‰©ä½™æ—¶é—´å¼€å§‹å€’è®¡æ—¶ï¼Œå€’è®¡æ—¶ç»“æŸåï¼Œå†ç«‹å³å‘é€å¸§ã€‚</p><h3 id="6-5-5-CSMA-x2F-CAåè®®çš„ä¿¡é“é¢„çº¦å’Œè™šæ‹Ÿè½½æ³¢ç›‘å¬"><a href="#6-5-5-CSMA-x2F-CAåè®®çš„ä¿¡é“é¢„çº¦å’Œè™šæ‹Ÿè½½æ³¢ç›‘å¬" class="headerlink" title="6.5.5 CSMA&#x2F;CAåè®®çš„ä¿¡é“é¢„çº¦å’Œè™šæ‹Ÿè½½æ³¢ç›‘å¬"></a>6.5.5 CSMA&#x2F;CAåè®®çš„ä¿¡é“é¢„çº¦å’Œè™šæ‹Ÿè½½æ³¢ç›‘å¬</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014203119710.png" alt="image-20201014203119710"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014203506878.png" alt="image-20201014203506878"></p><p><strong>è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶èƒ½å‡å°‘éšè”½ç«™å¸¦æ¥çš„ç¢°æ’é—®é¢˜çš„ç¤ºä¾‹</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014203859033.png" alt=" "></p><hr><h1 id="ä¸ƒã€MACåœ°å€ã€IPåœ°å€ä»¥åŠARPåè®®"><a href="#ä¸ƒã€MACåœ°å€ã€IPåœ°å€ä»¥åŠARPåè®®" class="headerlink" title="ä¸ƒã€MACåœ°å€ã€IPåœ°å€ä»¥åŠARPåè®®"></a>ä¸ƒã€MACåœ°å€ã€IPåœ°å€ä»¥åŠARPåè®®</h1><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014222831663.png" alt="image-20201014222831663"></p><h2 id="7-1-MACåœ°å€"><a href="#7-1-MACåœ°å€" class="headerlink" title="7.1 MACåœ°å€"></a>7.1 MACåœ°å€</h2><blockquote><ul><li>ä½¿ç”¨ç‚¹å¯¹ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚ä¸éœ€è¦ä½¿ç”¨åœ°å€å°±å¯ä»¥é€šä¿¡ï¼Œå› æ­¤è¿æ¥åœ¨ä¿¡é“ä¸Šçš„ä¸»æœºåªæœ‰å®ƒä»¬ä¸¤ä¸ªã€‚</li><li>ä½¿ç”¨å…±äº«ä¿¡é“çš„æ€»çº¿å‹å±€åŸŸç½‘ï¼šä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚å¿…é¡»ä½¿ç”¨åœ°å€æ¥åŒºåˆ†å„ä¸»æœºã€‚</li></ul></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014223659993.png" alt="image-20201014223659993"></p><h3 id="7-1-1-å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚å¿…é¡»ä½¿ç”¨åœ°å€ï¼ˆMACï¼‰"><a href="#7-1-1-å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚å¿…é¡»ä½¿ç”¨åœ°å€ï¼ˆMACï¼‰" class="headerlink" title="7.1.1 å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚å¿…é¡»ä½¿ç”¨åœ°å€ï¼ˆMACï¼‰"></a>7.1.1 å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚å¿…é¡»ä½¿ç”¨åœ°å€ï¼ˆMACï¼‰</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014224732019.png" alt="image-20201014224732019"></p><blockquote><p>ğŸ“Œæ’å…¥ä¸€äº›åŸºç¡€çŸ¥è¯†</p><p><code>ç½‘ç»œé€‚é…å™¨</code>ï¼ˆnetwork adapterï¼‰æ˜¯ä¸€ç§ç¡¬ä»¶è®¾å¤‡ï¼Œä¹Ÿç§°ä¸ºç½‘ç»œæ¥å£å¡ï¼ˆNetwork Interface Cardï¼ŒNICï¼‰ï¼Œå®ƒå…è®¸è®¡ç®—æœºä¸ç½‘ç»œé€šä¿¡ã€‚å®ƒé€šå¸¸å®‰è£…åœ¨è®¡ç®—æœºçš„ä¸»æ¿ä¸Šï¼Œé€šè¿‡ç½‘ç»œçº¿è¿æ¥åˆ°è®¡ç®—æœºå’Œç½‘ç»œä¹‹é—´ã€‚ç½‘ç»œé€‚é…å™¨çš„ä¸»è¦ä½œç”¨æ˜¯å°†è®¡ç®—æœºçš„æ•°å­—ä¿¡å·è½¬æ¢ä¸ºèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­ä¼ è¾“çš„æ¨¡æ‹Ÿä¿¡å·ï¼ŒåŒæ—¶ä¹Ÿå°†ä»ç½‘ç»œä¸­æ¥æ”¶åˆ°çš„æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºè®¡ç®—æœºå¯ä»¥ç†è§£çš„æ•°å­—ä¿¡å·ã€‚ç½‘ç»œé€‚é…å™¨å¯ä»¥æ”¯æŒä¸åŒçš„ç½‘ç»œåè®®å’Œé€Ÿç‡ï¼Œå¦‚ä»¥å¤ªç½‘ã€æ— çº¿å±€åŸŸç½‘ç­‰ã€‚</p><p><code>äº¤æ¢æœº</code>ï¼ˆSwitchï¼‰æ˜¯ä¸€ç§ç½‘ç»œè®¾å¤‡ï¼Œç”¨äºåœ¨å±€åŸŸç½‘ï¼ˆLANï¼‰ä¸­ä¼ è¾“æ•°æ®ã€‚äº¤æ¢æœºå¯ä»¥å°†ä¼ å…¥çš„æ•°æ®åŒ…è§£æå¹¶å°†å…¶å‘é€åˆ°ç›®æ ‡è®¾å¤‡ï¼Œä»è€Œå®ç°ç½‘ç»œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚äº¤æ¢æœºå¯ä»¥æä¾›å¤šä¸ªç«¯å£ï¼Œä»¥æ”¯æŒå¤šä¸ªè®¾å¤‡è¿æ¥åˆ°åŒä¸€ä¸ªå±€åŸŸç½‘ã€‚äº¤æ¢æœºé€šå¸¸ä½¿ç”¨MACåœ°å€ï¼ˆMedia Access Control Addressï¼‰æ¥è¯†åˆ«å’Œè½¬å‘æ•°æ®åŒ…ã€‚å®ƒæ˜¯ç°ä»£è®¡ç®—æœºç½‘ç»œçš„å…³é”®è®¾å¤‡ä¹‹ä¸€ï¼Œè¢«å¹¿æ³›åº”ç”¨äºä¼ä¸šã€å­¦æ ¡ã€åŒ»é™¢ã€æ”¿åºœæœºæ„ç­‰ç»„ç»‡çš„å±€åŸŸç½‘ä¸­ã€‚</p><p><code>äº¤æ¢æœº</code>é€šå¸¸æ˜¯ä¸€ç§ç±»ä¼¼äºè·¯ç”±å™¨çš„è®¾å¤‡ï¼Œå®ƒé€šå¸¸æ˜¯ä¸€ä¸ªæ–¹å½¢çš„ç›’å­ï¼Œæœ‰å¤šä¸ªç«¯å£å’ŒæŒ‡ç¤ºç¯ã€‚äº¤æ¢æœºçš„å¤–è§‚å’Œå¤§å°å¯ä»¥å› å‚å•†å’Œå‹å·è€Œå¼‚ï¼Œä½†å¤§å¤šæ•°äº¤æ¢æœºéƒ½å…·æœ‰ç±»ä¼¼çš„ç‰¹å¾ã€‚å®ƒä»¬é€šå¸¸è¢«å®‰è£…åœ¨æœºæˆ¿æˆ–ç½‘ç»œä¸­å¿ƒçš„æœºæŸœä¸­ï¼Œä»¥ä¾¿ç®¡ç†å’Œç»´æŠ¤ã€‚</p><p><code>è·¯ç”±å™¨</code>é€šå¸¸æ˜¯ä¸€ä¸ªå°ç›’å­ï¼Œä¸Šé¢æœ‰ä¸€äº›è¿æ¥å£ï¼Œå¦‚WANå£ã€LANå£ã€USBå£ã€ç”µæºå£ç­‰ã€‚å®ƒçš„å¤–å½¢å’Œå¤§å°å› å“ç‰Œå’Œå‹å·è€Œå¼‚ã€‚è·¯ç”±å™¨æ˜¯ä¸€ç§ç½‘ç»œè®¾å¤‡ï¼Œç”¨äºå°†å¤šä¸ªç½‘ç»œè¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´è½¬å‘æ•°æ®åŒ…ï¼Œä½¿å¾—æ•°æ®èƒ½å¤Ÿåœ¨ä¸åŒçš„ç½‘ç»œä¹‹é—´ä¼ é€’ã€‚</p><p><code>äº¤æ¢æœº</code>å’Œ<code>è·¯ç”±å™¨</code>æ˜¯ä¸åŒçš„è®¾å¤‡ã€‚äº¤æ¢æœºä¸»è¦ç”¨äºåœ¨å±€åŸŸç½‘å†…è¿æ¥å¤šä¸ªè®¾å¤‡ï¼Œå®ç°è®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚è€Œè·¯ç”±å™¨åˆ™æ˜¯ç”¨äºè¿æ¥ä¸åŒç½‘ç»œä¹‹é—´çš„è®¾å¤‡ï¼Œå®ç°ä¸åŒç½‘ç»œä¹‹é—´çš„é€šä¿¡ï¼ˆå¹¿åŸŸç½‘å¿…é¡»ä½¿ç”¨ï¼‰ã€‚äº¤æ¢æœºå’Œè·¯ç”±å™¨çš„å¤–å½¢å’ŒåŠŸèƒ½ä¹Ÿæœ‰æ‰€ä¸åŒã€‚äº¤æ¢æœºé€šå¸¸åªæœ‰å±€åŸŸç½‘çš„æ¥å£ï¼Œè€Œè·¯ç”±å™¨åˆ™æœ‰è¿æ¥ä¸åŒç½‘ç»œçš„æ¥å£ã€‚</p><p><code>å¹¿æ’­åœ°å€ã€å•æ’­å¯¹ç«‹ã€‘</code>æ˜¯æŒ‡ä¸€ä¸ªç½‘ç»œä¸­æ‰€æœ‰ä¸»æœºéƒ½èƒ½æ¥æ”¶åˆ°å¹¿æ’­æ¶ˆæ¯çš„åœ°å€ã€‚åœ¨IPv4ç½‘ç»œä¸­ï¼Œå¹¿æ’­åœ°å€é€šå¸¸æ˜¯è¯¥ç½‘ç»œçš„æœ€åä¸€ä¸ªIPåœ°å€ï¼Œä¾‹å¦‚ï¼Œå¯¹äº192.168.1.0&#x2F;24ç½‘ç»œï¼Œå¹¿æ’­åœ°å€ä¸º192.168.1.255ã€‚åœ¨IPv6ç½‘ç»œä¸­ï¼Œå¹¿æ’­åœ°å€ä½¿ç”¨ç‰¹æ®Šçš„åœ°å€æ ¼å¼ï¼Œä¾‹å¦‚ï¼Œå¯¹äºfe80::&#x2F;10ç½‘ç»œï¼Œå¹¿æ’­åœ°å€ä¸ºff02::1ã€‚<em>å¹¿æ’­åœ°å€é€šå¸¸ç”¨äºå‘ç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºå‘é€æ¶ˆæ¯</em>ï¼Œä¾‹å¦‚DHCPè¯·æ±‚ã€ARPè¯·æ±‚ç­‰ã€‚</p></blockquote><blockquote><p><strong>MACåœ°å€åˆç§°ä¸ºç¡¬ä»¶åœ°å€æˆ–ç‰©ç†åœ°å€</strong>ã€‚è¯·æ³¨æ„ï¼šä¸è¦è¢« â€œç‰©ç†â€ äºŒå­—è¯¯å¯¼è®¤ä¸ºç‰©ç†åœ°å€å±äºç‰©ç†å±‚èŒƒç•´ï¼Œç‰©ç†åœ°å€å±äºæ•°æ®é“¾è·¯å±‚èŒƒç•´</p></blockquote><h3 id="7-1-2-IEEE-802å±€åŸŸç½‘çš„MACåœ°å€æ ¼å¼"><a href="#7-1-2-IEEE-802å±€åŸŸç½‘çš„MACåœ°å€æ ¼å¼" class="headerlink" title="7.1.2 IEEE 802å±€åŸŸç½‘çš„MACåœ°å€æ ¼å¼"></a>7.1.2 IEEE 802å±€åŸŸç½‘çš„MACåœ°å€æ ¼å¼</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014225358570.png" alt="image-20201014225358570"></p><blockquote><p><strong>ç»„ç»‡å”¯ä¸€æ ‡è¯†ç¬¦OUI</strong></p><ul><li>ç”Ÿäº§ç½‘ç»œè®¾å¤‡çš„å‚å•†ï¼Œéœ€è¦å‘IEEEçš„æ³¨å†Œç®¡ç†æœºæ„ç”³è¯·ä¸€ä¸ªæˆ–å¤šä¸ªOUI</li></ul><p><strong>ç½‘ç»œæ¥å£æ ‡è¯†ç¬¦</strong></p><ul><li>ç”±è·å¾—OUIçš„å‚å•†è‡ªè¡Œéšæ„åˆ†é…</li></ul><p><strong>EUI-48</strong></p><ul><li>48æ˜¯è¿™ä¸ªMACåœ°å€çš„ä½æ•°</li></ul></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014230248959.png" alt="image-20201014230248959"></p><blockquote><p>å¯¹äºä½¿ç”¨EUI-48ç©ºé—´çš„åº”ç”¨ç¨‹åºï¼ŒIEEEçš„ç›®æ ‡å¯¿å‘½ä¸º100å¹´ï¼ˆç›´åˆ°2080å¹´ï¼‰ï¼Œä½†æ˜¯é¼“åŠ±é‡‡ç”¨EUI-64ä½œä¸ºæ›¿ä»£</p></blockquote><p><strong>å…³äºæ— æ•ˆçš„ MAC å¸§</strong></p><ul><li>æ•°æ®å­—æ®µçš„é•¿åº¦ä¸é•¿åº¦å­—æ®µçš„å€¼ä¸ä¸€è‡´ï¼›</li><li>å¸§çš„é•¿åº¦ä¸æ˜¯æ•´æ•°ä¸ªå­—èŠ‚ï¼›</li><li>ç”¨æ”¶åˆ°çš„å¸§æ£€éªŒåºåˆ— FCS æŸ¥å‡ºæœ‰å·®é”™ï¼›</li><li>æ•°æ®å­—æ®µçš„é•¿åº¦ä¸åœ¨ 46 ~ 1500 å­—èŠ‚ä¹‹é—´ã€‚</li><li>æœ‰æ•ˆçš„ MAC å¸§é•¿åº¦ä¸º 64 ~ 1518 å­—èŠ‚ä¹‹é—´ã€‚</li></ul><blockquote><p><strong>å¯¹äºæ£€æŸ¥å‡ºçš„æ— æ•ˆ</strong> <strong>MAC</strong> <strong>å¸§å°±ç®€å•åœ°ä¸¢å¼ƒã€‚ä»¥å¤ªç½‘ä¸è´Ÿè´£é‡ä¼ ä¸¢å¼ƒçš„å¸§ã€‚</strong></p></blockquote><h3 id="7-1-3-IEEE-802å±€åŸŸç½‘çš„MACåœ°å€å‘é€é¡ºåº"><a href="#7-1-3-IEEE-802å±€åŸŸç½‘çš„MACåœ°å€å‘é€é¡ºåº" class="headerlink" title="7.1.3 IEEE 802å±€åŸŸç½‘çš„MACåœ°å€å‘é€é¡ºåº"></a>7.1.3 IEEE 802å±€åŸŸç½‘çš„MACåœ°å€å‘é€é¡ºåº</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014230625182.png" alt="image-20201014230625182"></p><h3 id="7-1-4-å•æ’­MACåœ°å€ä¸¾ä¾‹"><a href="#7-1-4-å•æ’­MACåœ°å€ä¸¾ä¾‹" class="headerlink" title="7.1.4 å•æ’­MACåœ°å€ä¸¾ä¾‹"></a>7.1.4 å•æ’­MACåœ°å€ä¸¾ä¾‹</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014230822305.png" alt="image-20201014230822305"></p><blockquote><p>ä¸»æœºBç»™ä¸»æœºCå‘é€<strong>å•æ’­å¸§</strong>ï¼Œä¸»æœºBé¦–å…ˆè¦æ„å»ºè¯¥<strong>å•æ’­å¸§</strong>ï¼Œ<strong>åœ¨å¸§é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€å­—æ®µå¡«å…¥ä¸»æœºCçš„MACåœ°å€</strong>ï¼Œæºåœ°å€å­—æ®µå¡«å…¥è‡ªå·±çš„MACåœ°å€ï¼Œå†åŠ ä¸Šå¸§é¦–éƒ¨çš„å…¶ä»–å­—æ®µã€æ•°æ®è½½è·ä»¥åŠå¸§å°¾éƒ¨ï¼Œå°±æ„æˆäº†è¯¥<strong>å•æ’­å¸§</strong></p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014231244655.png" alt="image-20201014231244655"></p><blockquote><p>ä¸»æœºBå°†è¯¥<strong>å•æ’­å¸§</strong>å‘é€å‡ºå»ï¼Œä¸»æœºAå’ŒCéƒ½ä¼šæ”¶åˆ°è¯¥<strong>å•æ’­å¸§</strong></p><p>ä¸»æœºAçš„ç½‘å¡å‘ç°è¯¥<strong>å•æ’­å¸§</strong>çš„ç›®çš„MACåœ°å€ä¸è‡ªå·±çš„MACåœ°å€ä¸åŒ¹é…ï¼Œä¸¢å¼ƒè¯¥å¸§</p><p>ä¸»æœºCçš„ç½‘å¡å‘ç°è¯¥<strong>å•æ’­å¸§</strong>çš„ç›®çš„MACåœ°å€ä¸è‡ªå·±çš„MACåœ°å€åŒ¹é…ï¼Œæ¥å—è¯¥å¸§,å¹¶å°†è¯¥å¸§äº¤ç»™å…¶ä¸Šå±‚å¤„ç†ã€‚</p></blockquote><h3 id="7-1-5-å¹¿æ’­MACåœ°å€ä¸¾ä¾‹"><a href="#7-1-5-å¹¿æ’­MACåœ°å€ä¸¾ä¾‹" class="headerlink" title="7.1.5 å¹¿æ’­MACåœ°å€ä¸¾ä¾‹"></a>7.1.5 å¹¿æ’­MACåœ°å€ä¸¾ä¾‹</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014231754669.png" alt="image-20201014231754669"></p><blockquote><p>å‡è®¾ä¸»æœºBè¦å‘é€ä¸€ä¸ª<strong>å¹¿æ’­å¸§</strong>ï¼Œä¸»æœºBé¦–å…ˆè¦æ„å»ºè¯¥<strong>å¹¿æ’­å¸§</strong>ï¼Œ<strong>åœ¨å¸§é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€å­—æ®µå¡«å…¥å¹¿æ’­åœ°å€</strong>ï¼Œä¹Ÿå°±æ˜¯åå…­è¿›åˆ¶çš„å…¨Fï¼Œæºåœ°å€å­—æ®µå¡«å…¥è‡ªå·±çš„MACåœ°å€ï¼Œå†åŠ ä¸Šå¸§é¦–éƒ¨ä¸­çš„å…¶ä»–å­—æ®µã€æ•°æ®è½½è·ä»¥åŠå¸§å°¾éƒ¨ï¼Œå°±æ„æˆäº†è¯¥<strong>å¹¿æ’­å¸§</strong></p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014232132424.png" alt="image-20201014232132424"></p><blockquote><p>ä¸»æœºBè®²è¯¥<strong>å¹¿æ’­å¸§</strong>å‘é€å‡ºå»ï¼Œä¸»æœºAå’ŒCéƒ½ä¼šæ”¶åˆ°è¯¥<strong>å¹¿æ’­å¸§</strong>ï¼Œ<strong>å‘ç°è¯¥å¸§é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€å­—æ®µçš„å†…å®¹æ˜¯å¹¿æ’­åœ°å€</strong>ï¼Œå°±çŸ¥é“è¯¥å¸§æ˜¯<strong>å¹¿æ’­å¸§</strong>ï¼Œä¸»æœºAå’Œä¸»æœºCéƒ½æ¥å—è¯¥å¸§ï¼Œå¹¶å°†è¯¥å¸§äº¤ç»™ä¸Šå±‚å¤„ç†</p></blockquote><h3 id="7-1-6-å¤šæ’­MACåœ°å€ä¸¾ä¾‹"><a href="#7-1-6-å¤šæ’­MACåœ°å€ä¸¾ä¾‹" class="headerlink" title="7.1.6 å¤šæ’­MACåœ°å€ä¸¾ä¾‹"></a>7.1.6 å¤šæ’­MACåœ°å€ä¸¾ä¾‹</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201014232714791.png" alt="image-20201014232714791"></p><blockquote><p>å‡è®¾ä¸»æœºAè¦å‘é€<strong>å¤šæ’­å¸§</strong>ç»™è¯¥<strong>å¤šæ’­åœ°å€</strong>ã€‚å°†è¯¥<strong>å¤šæ’­åœ°å€</strong>çš„å·¦èµ·ç¬¬ä¸€ä¸ªå­—èŠ‚å†™æˆ8ä¸ªæ¯”ç‰¹ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€ä½æ¯”ç‰¹ä½æ˜¯1ï¼Œè¿™å°±è¡¨æ˜è¯¥åœ°å€æ˜¯<strong>å¤šæ’­åœ°å€</strong>ã€‚</p><p>ğŸ“¢å¿«é€Ÿåˆ¤æ–­åœ°å€æ˜¯ä¸æ˜¯<strong>å¤šæ’­åœ°å€</strong>ï¼Œå°±æ˜¯ä¸Šå›¾æ‰€ç¤ºç®­å¤´æ‰€æŒ‡çš„ç¬¬åå…­è¿›åˆ¶æ•°ä¸èƒ½æ•´é™¤2ï¼ˆ1,3,5,7,9,B,D,Fï¼‰ï¼Œåˆ™è¯¥åœ°å€æ˜¯<strong>å¤šæ’­åœ°å€</strong></p><p>å‡è®¾ä¸»æœºBï¼ŒCå’ŒDæ”¯æŒå¤šæ’­ï¼Œå„ç”¨æˆ·ç»™è‡ªå·±çš„ä¸»æœºé…ç½®å¤šæ’­ç»„åˆ—è¡¨<strong>å¦‚ä¸‹æ‰€ç¤º</strong></p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015001243584.png" alt="image-20201015001243584"></p><blockquote><p>ä¸»æœºBå±äºä¸¤ä¸ªå¤šæ’­ç»„ï¼Œä¸»æœºCä¹Ÿå±äºä¸¤ä¸ªå¤šæ’­ç»„ï¼Œè€Œä¸»æœºDä¸å±äºä»»ä½•å¤šæ’­ç»„</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015001535528.png" alt="image-20201015001535528"></p><blockquote><p>ä¸»æœºAé¦–å…ˆè¦æ„å»ºè¯¥<strong>å¤šæ’­å¸§</strong>ï¼Œ<strong>åœ¨å¸§é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€å­—æ®µå¡«å…¥è¯¥å¤šæ’­åœ°å€</strong>ï¼Œæºåœ°å€ç‚¹å¡«å…¥è‡ªå·±çš„MACåœ°å€ï¼Œå†åŠ ä¸Šå¸§é¦–éƒ¨ä¸­çš„å…¶ä»–å­—æ®µã€æ•°æ®è½½è·ä»¥åŠå¸§å°¾éƒ¨ï¼Œå°±æ„æˆäº†è¯¥<strong>å¤šæ’­å¸§</strong></p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015002054876.png" alt="image-20201015002054876"></p><blockquote><p>ä¸»æœºAå°†è¯¥<strong>å¤šæ’­å¸§</strong>å‘é€å‡ºå»ï¼Œä¸»æœºBã€Cã€Déƒ½ä¼šæ”¶åˆ°è¯¥<strong>å¤šæ’­å¸§</strong></p><p><strong>ä¸»æœºBå’ŒCå‘ç°è¯¥å¤šæ’­å¸§çš„ç›®çš„MACåœ°å€åœ¨è‡ªå·±çš„å¤šæ’­ç»„åˆ—è¡¨ä¸­</strong>ï¼Œä¸»æœºBå’ŒCéƒ½ä¼šæ¥å—è¯¥å¸§ï¼Œå¹¶é€äº¤ä¸Šå±‚å¤„ç†ã€‚</p><p>ä¸»æœºDå‘ç°è¯¥<strong>å¤šæ’­å¸§</strong>çš„ç›®çš„MACåœ°å€ä¸åœ¨è‡ªå·±å¾—å¤šæ’­ç»„åˆ—è¡¨ä¸­ï¼Œåˆ™ä¸¢å¼ƒè¯¥<strong>å¤šæ’­å¸§</strong></p></blockquote><blockquote><p>ç»™ä¸»æœºé…ç½®å¤šæ’­ç»„åˆ—è¡¨è¿›è¡Œç§æœ‰åº”ç”¨æ—¶ï¼Œä¸å¾—ä½¿ç”¨å…¬æœ‰çš„æ ‡å‡†å¤šæ’­åœ°å€</p></blockquote><h3 id="7-1-7-å…³äºéšæœºMACåœ°å€"><a href="#7-1-7-å…³äºéšæœºMACåœ°å€" class="headerlink" title="7.1.7 å…³äºéšæœºMACåœ°å€"></a>7.1.7 å…³äºéšæœºMACåœ°å€</h3><p>â€‹æ®æ–¯è¯ºç™»çˆ†æ–™ï¼Œç¾å›½å›½å®¶å®‰å…¨å±€æœ‰ä¸€å¥—ç³»ç»Ÿï¼Œé€šè¿‡ç›‘è§†ç”µå­è®¾å¤‡çš„MACåœ°å€ï¼Œæ¥è·Ÿè¸ªåŸå¸‚ä¸­æ¯ä¸ªäººçš„è¡ŒåŠ¨ã€‚å› æ­¤å¼€å§‹å‡ºç°æä¾›éšæœºMACåœ°å€åŠŸèƒ½çš„å…¬å¸ã€‚ç›®å‰å¤§å¤šæ•°ç§»åŠ¨è®¾å¤‡å·²ç»é‡‡ç”¨äº†éšæœºMACåœ°å€æŠ€æœ¯ã€‚</p><h2 id="7-2-IPåœ°å€"><a href="#7-2-IPåœ°å€" class="headerlink" title="7.2 IPåœ°å€"></a>7.2 IPåœ°å€</h2><p>IPåœ°å€å±äºç½‘ç»œå±‚çš„èŒƒç•´ï¼Œä¸å±äºæ•°æ®é“¾è·¯å±‚çš„èŒƒç•´&#x3D;</p><p>ä¸‹é¢å†…å®¹è®²çš„æ˜¯IPåœ°å€çš„ä½¿ç”¨ï¼Œè¯¦ç»†çš„IPåœ°å€å†…å®¹åœ¨ç½‘ç»œå±‚ä¸­ä»‹ç»</p><h3 id="7-2-1-åŸºæœ¬æ¦‚å¿µ"><a href="#7-2-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="7.2.1 åŸºæœ¬æ¦‚å¿µ"></a>7.2.1 åŸºæœ¬æ¦‚å¿µ</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015104441580.png" alt="image-20201015104441580"></p><h3 id="7-2-2-ä»ç½‘ç»œä½“ç³»ç»“æ„çœ‹IPåœ°å€ä¸MACåœ°å€"><a href="#7-2-2-ä»ç½‘ç»œä½“ç³»ç»“æ„çœ‹IPåœ°å€ä¸MACåœ°å€" class="headerlink" title="7.2.2 ä»ç½‘ç»œä½“ç³»ç»“æ„çœ‹IPåœ°å€ä¸MACåœ°å€"></a>7.2.2 ä»ç½‘ç»œä½“ç³»ç»“æ„çœ‹IPåœ°å€ä¸MACåœ°å€</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015104913755.png" alt="image-20201015104913755"></p><h3 id="7-2-3-æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ä¸­IPåœ°å€ä¸MACåœ°å€çš„å˜åŒ–æƒ…å†µ"><a href="#7-2-3-æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ä¸­IPåœ°å€ä¸MACåœ°å€çš„å˜åŒ–æƒ…å†µ" class="headerlink" title="7.2.3 æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ä¸­IPåœ°å€ä¸MACåœ°å€çš„å˜åŒ–æƒ…å†µ"></a>7.2.3 æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ä¸­IPåœ°å€ä¸MACåœ°å€çš„å˜åŒ–æƒ…å†µ</h3><p>å›¾ä¸Šå„ä¸»æœºå’Œè·¯ç”±å™¨å„æ¥å£çš„IPåœ°å€å’ŒMACåœ°å€ç”¨ç®€å•çš„æ ‡è¯†ç¬¦æ¥è¡¨ç¤º</p><p>å‡è®¾ä¸»æœºH1è¦ç»™ä¸»æœºH2å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼›</p><p>æ³¨æ„ğŸ“¢ï¼šä¸»æœºä¸­æœ‰å®Œæ•´çš„ç½‘ç»œä½“ç³»ç»“æ„ï¼Œè€Œè·¯ç”±å™¨çš„æœ€é«˜å±‚ä¸ºç½‘ç»œå±‚ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015105455043.png" alt="image-20201015105455043"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20210103212224961.png" alt="image-20210103212224961"></p><blockquote><p>å¦‚ä½•ä»IPåœ°å€æ‰¾å‡ºå…¶å¯¹åº”çš„MACåœ°å€ï¼Ÿ</p><p>ARPåè®®</p></blockquote><h2 id="7-3-ARPåè®®"><a href="#7-3-ARPåè®®" class="headerlink" title="7.3 ARPåè®®"></a>7.3 ARPåè®®</h2><p>å¦‚ä½•ä»IPåœ°å€æ‰¾å‡ºå…¶å¯¹åº”çš„MACåœ°å€ï¼Ÿ</p><p>ARPï¼ˆåœ°å€è§£æåè®®ï¼‰</p><h3 id="7-3-1-æµç¨‹"><a href="#7-3-1-æµç¨‹" class="headerlink" title="7.3.1 æµç¨‹"></a>7.3.1 æµç¨‹</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015113826197.png" alt="image-20201015113826197"></p><p>ARPé«˜é€Ÿç¼“å­˜è¡¨</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015114052206.png" alt="image-20201015114052206"></p><blockquote><p>å½“ä¸»æœºBè¦ç»™ä¸»æœºCå‘é€æ•°æ®åŒ…æ—¶ï¼Œä¼šé¦–å…ˆåœ¨è‡ªå·±çš„ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸­æŸ¥æ‰¾ä¸»æœºCçš„IPåœ°å€æ‰€å¯¹åº”çš„MACåœ°å€ï¼Œä½†æœªæ‰¾åˆ°ï¼Œå› æ­¤ï¼Œä¸»æœºBéœ€è¦å‘é€ARPè¯·æ±‚æŠ¥æ–‡ï¼Œæ¥è·å–ä¸»æœºCçš„MACåœ°å€</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015114444263.png" alt="image-20201015114444263"></p><blockquote><p>ARPè¯·æ±‚æŠ¥æ–‡æœ‰å…·ä½“çš„æ ¼å¼ï¼Œä¸Šå›¾çš„åªæ˜¯ç®€å•æè¿°</p><p>ARPè¯·æ±‚æŠ¥æ–‡è¢«å°è£…åœ¨MACå¸§ä¸­å‘é€ï¼Œç›®çš„åœ°å€ä¸ºå¹¿æ’­åœ°å€</p><p>ä¸»æœºBå‘é€å°è£…æœ‰ARPè¯·æ±‚æŠ¥æ–‡çš„å¹¿æ’­å¸§ï¼Œæ€»çº¿ä¸Šçš„å…¶ä»–ä¸»æœºéƒ½èƒ½æ”¶åˆ°è¯¥å¹¿æ’­å¸§</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015114811501.png" alt="image-20201015114811501"></p><blockquote><p>æ”¶åˆ°ARPè¯·æ±‚æŠ¥æ–‡çš„ä¸»æœºAå’Œä¸»æœºCä¼šæŠŠARPè¯·æ±‚æŠ¥æ–‡äº¤ç»™ä¸Šå±‚çš„ARPè¿›ç¨‹</p><p>ä¸»æœºAå‘ç°æ‰€è¯¢é—®çš„IPåœ°å€ä¸æ˜¯è‡ªå·±çš„IPåœ°å€ï¼Œå› æ­¤ä¸ç”¨ç†ä¼š</p><p>ä¸»æœºCçš„å‘ç°æ‰€è¯¢é—®çš„IPåœ°å€æ˜¯è‡ªå·±çš„IPåœ°å€ï¼Œéœ€è¦è¿›è¡Œç›¸åº”å¤„ç†ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015115212170.png" alt="image-20201015115212170"></p><blockquote><p>ä¸»æœºCç»™ä¸»æœºBå‘é€å°è£…æœ‰ARPå“åº”æŠ¥æ–‡çš„å•æ’­å¸§ï¼Œæ€»çº¿ä¸Šçš„å…¶ä»–ä¸»æœºéƒ½èƒ½æ”¶åˆ°è¯¥å•æ’­å¸§ã€‚ä¸»æœºAçš„ç½‘å¡æ”¶åˆ°è¯¥å•æ’­å¸§åï¼Œå‘ç°å…¶ç›®çš„MACåœ°å€ä¸è‡ªå·±çš„MACåœ°å€ä¸åŒ¹é…ï¼Œç›´æ¥ä¸¢å¼ƒè¯¥å¸§ã€‚</p><p>ä¸»æ§Bçš„ç½‘å¡æ”¶åˆ°è¯¥å•æ’­å¸§åï¼Œå‘ç°å…¶ç›®çš„MACåœ°å€å°±æ˜¯è‡ªå·±çš„MACåœ°å€ï¼Œå°†å…¶äº¤ä»˜ä¸Šå±‚å¤„ç†ã€‚ä¸Šå±‚çš„ARPè¿›ç¨‹è§£æARPå“åº”æŠ¥æ–‡ï¼Œå°†å…¶æ‰€åŒ…å«çš„ä¸»æœºCçš„ipåœ°å€ä¸MACåœ°å€è®°å½•åˆ°è‡ªå·±çš„ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸­ã€‚</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015115236673.png" alt="image-20201015115236673"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015115252972.png" alt="image-20201015115252972"></p><p><strong>åŠ¨æ€ä¸é™æ€çš„åŒºåˆ«</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015115831543.png" alt="image-20201015115831543"></p><p><strong>ARPåè®®åªèƒ½åœ¨ä¸€æ®µé“¾è·¯æˆ–ä¸€ä¸ªç½‘ç»œä¸Šä½¿ç”¨ï¼Œè€Œä¸èƒ½è·¨ç½‘ç»œä½¿ç”¨</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015120108028.png" alt="image-20201015120108028"></p><blockquote><p>ARPåè®®çš„ä½¿ç”¨æ˜¯é€æ®µé“¾è·¯è¿›è¡Œçš„</p></blockquote><h3 id="7-3-2-æ€»ç»“"><a href="#7-3-2-æ€»ç»“" class="headerlink" title="7.3.2 æ€»ç»“"></a>7.3.2 æ€»ç»“</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015120707150.png" alt="image-20201015120707150"></p><blockquote><p>ARPè¡¨ä¸­çš„IPåœ°å€ä¸MACåœ°å€çš„å¯¹åº”å…³ç³»è®°å½•ï¼Œæ˜¯<strong>ä¼šå®šæœŸè‡ªåŠ¨åˆ é™¤çš„</strong>ï¼Œ<strong>å› ä¸ºIPåœ°å€ä¸MACåœ°å€çš„å¯¹åº”å…³ç³»ä¸æ˜¯æ°¸ä¹…æ€§çš„</strong></p></blockquote><hr><h1 id="å…«ã€é›†çº¿å™¨ä¸äº¤æ¢æœºçš„åŒºåˆ«"><a href="#å…«ã€é›†çº¿å™¨ä¸äº¤æ¢æœºçš„åŒºåˆ«" class="headerlink" title="å…«ã€é›†çº¿å™¨ä¸äº¤æ¢æœºçš„åŒºåˆ«"></a>å…«ã€é›†çº¿å™¨ä¸äº¤æ¢æœºçš„åŒºåˆ«</h1><h2 id="8-1-é›†çº¿å™¨-åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘"><a href="#8-1-é›†çº¿å™¨-åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘" class="headerlink" title="8.1 é›†çº¿å™¨-åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘"></a>8.1 é›†çº¿å™¨-åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘</h2><h3 id="8-1-1-æ¦‚å¿µ"><a href="#8-1-1-æ¦‚å¿µ" class="headerlink" title="8.1.1 æ¦‚å¿µ"></a>8.1.1 æ¦‚å¿µ</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015144628691.png" alt="image-20201015144628691"></p><blockquote><ul><li>ä¼ ç»Ÿä»¥å¤ªç½‘æœ€åˆæ˜¯ä½¿ç”¨ç²—åŒè½´ç”µç¼†ï¼Œåæ¥æ¼”è¿›åˆ°ä½¿ç”¨æ¯”è¾ƒä¾¿å®œçš„ç»†åŒè½´ç”µç¼†ï¼Œæœ€åå‘å±•ä¸ºä½¿ç”¨æ›´ä¾¿å®œå’Œæ›´çµæ´»çš„åŒç»çº¿ã€‚</li><li>é‡‡ç”¨åŒç»çº¿çš„ä»¥å¤ªç½‘é‡‡ç”¨æ˜Ÿå½¢æ‹“æ‰‘ï¼Œåœ¨æ˜Ÿå½¢çš„ä¸­å¿ƒåˆ™å¢åŠ äº†ä¸€ç§å¯é æ€§éå¸¸é«˜çš„è®¾å¤‡ï¼Œå«åš<strong>é›†çº¿å™¨</strong> (hub)ã€‚</li><li><strong>é›†çº¿å™¨</strong>æ˜¯ä¹Ÿå¯ä»¥çœ‹åšå¤šå£ä¸­ç»§å™¨ï¼Œæ¯ä¸ªç«¯å£éƒ½å¯ä»¥æˆä¸ºä¸€ä¸ªä¸­ç»§å™¨ï¼Œä¸­ç»§å™¨æ˜¯å¯¹å‡å¼±çš„ä¿¡å·è¿›è¡Œæ”¾å¤§å’Œå‘é€çš„è®¾å¤‡ã€‚</li><li><strong>é›†çº¿å™¨</strong>çš„ä»¥å¤ªç½‘åœ¨é€»è¾‘ä¸Šä»æ˜¯ä¸ª<code>æ€»çº¿</code>ç½‘ï¼Œéœ€è¦ä½¿ç”¨CSMA&#x2F;CDåè®®æ¥åè°ƒå„ä¸»æœºäº‰ç”¨æ€»çº¿ï¼Œåªèƒ½å·¥ä½œåœ¨åŠåŒå·¥æ¨¡å¼ï¼Œæ”¶å‘å¸§ä¸èƒ½åŒæ—¶è¿›è¡Œã€‚</li></ul></blockquote><h3 id="8-1-2-é›†çº¿å™¨HUBåœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘"><a href="#8-1-2-é›†çº¿å™¨HUBåœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘" class="headerlink" title="8.1.2 é›†çº¿å™¨HUBåœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘"></a>8.1.2 é›†çº¿å™¨HUBåœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘</h3><p>é›†çº¿å™¨åªå·¥ä½œåœ¨ç‰©ç†å±‚ã€‚</p><p><strong>ä½¿ç”¨é›†çº¿å™¨æ‰©å±•</strong>ï¼šå°†å¤šä¸ªä»¥å¤ªç½‘æ®µè¿æˆæ›´å¤§çš„ã€å¤šçº§æ˜Ÿå½¢ç»“æ„çš„ä»¥å¤ªç½‘</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015145732275.png" alt="image-20201015145732275"></p><blockquote><ul><li><strong>ä¼˜ç‚¹</strong><ol><li>ä½¿åŸæ¥å±äºä¸åŒç¢°æ’åŸŸçš„ä»¥å¤ªç½‘ä¸Šçš„è®¡ç®—æœºèƒ½å¤Ÿè¿›è¡Œè·¨ç¢°æ’åŸŸçš„é€šä¿¡ã€‚</li><li>æ‰©å¤§äº†ä»¥å¤ªç½‘è¦†ç›–çš„åœ°ç†èŒƒå›´ã€‚</li></ol></li><li><strong>ç¼ºç‚¹</strong><ol><li>ç¢°æ’åŸŸå¢å¤§äº†ï¼Œä½†æ€»çš„ååé‡å¹¶æœªæé«˜ã€‚</li><li>å¦‚æœä¸åŒçš„ç¢°æ’åŸŸä½¿ç”¨ä¸åŒçš„æ•°æ®ç‡ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ç”¨é›†çº¿å™¨å°†å®ƒä»¬äº’è¿èµ·æ¥ã€‚</li></ol></li></ul></blockquote><p><strong>ç¢°æ’åŸŸ</strong></p><ul><li><strong>ç¢°æ’åŸŸï¼ˆcollision domainï¼‰</strong>åˆç§°ä¸º<strong>å†²çªåŸŸ</strong>ï¼Œæ˜¯æŒ‡ç½‘ç»œä¸­ä¸€ä¸ªç«™ç‚¹å‘å‡ºçš„å¸§ä¼šä¸å…¶ä»–ç«™ç‚¹å‘å‡ºçš„å¸§äº§ç”Ÿç¢°æ’æˆ–å†²çªçš„é‚£éƒ¨åˆ†ç½‘ç»œã€‚</li><li>ç¢°æ’åŸŸè¶Šå¤§ï¼Œå‘ç”Ÿç¢°æ’çš„æ¦‚ç‡è¶Šé«˜ã€‚</li></ul><h2 id="8-2-ä»¥å¤ªç½‘äº¤æ¢æœº-åœ¨æ•°æ®é“¾è·¯å±‚æ‰©å±•ä»¥å¤ªç½‘"><a href="#8-2-ä»¥å¤ªç½‘äº¤æ¢æœº-åœ¨æ•°æ®é“¾è·¯å±‚æ‰©å±•ä»¥å¤ªç½‘" class="headerlink" title="8.2 ä»¥å¤ªç½‘äº¤æ¢æœº-åœ¨æ•°æ®é“¾è·¯å±‚æ‰©å±•ä»¥å¤ªç½‘"></a>8.2 ä»¥å¤ªç½‘äº¤æ¢æœº-åœ¨æ•°æ®é“¾è·¯å±‚æ‰©å±•ä»¥å¤ªç½‘</h2><h3 id="8-2-1-æ¦‚å¿µ"><a href="#8-2-1-æ¦‚å¿µ" class="headerlink" title="8.2.1 æ¦‚å¿µ"></a>8.2.1 æ¦‚å¿µ</h3><ul><li>æ‰©å±•ä»¥å¤ªç½‘æ›´å¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨æ•°æ®é“¾è·¯å±‚è¿›è¡Œã€‚</li><li>æ—©æœŸä½¿ç”¨<strong>ç½‘æ¡¥</strong>ï¼Œç°åœ¨ä½¿ç”¨<strong>ä»¥å¤ªç½‘äº¤æ¢æœº</strong>ã€‚</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015150620067.png" alt="image-20201015150620067"></p><blockquote><p><strong>ç½‘æ¡¥</strong></p><ul><li>ç½‘æ¡¥å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ã€‚</li><li>å®ƒæ ¹æ® MAC å¸§çš„ç›®çš„åœ°å€å¯¹æ”¶åˆ°çš„å¸§è¿›è¡Œè½¬å‘å’Œè¿‡æ»¤ã€‚</li><li>å½“ç½‘æ¡¥æ”¶åˆ°ä¸€ä¸ªå¸§æ—¶ï¼Œå¹¶ä¸æ˜¯å‘æ‰€æœ‰çš„æ¥å£è½¬å‘æ­¤å¸§ï¼Œè€Œæ˜¯å…ˆæ£€æŸ¥æ­¤å¸§çš„ç›®çš„MAC åœ°å€ï¼Œç„¶åå†ç¡®å®šå°†è¯¥å¸§è½¬å‘åˆ°å“ªä¸€ä¸ªæ¥å£ï¼Œæˆ–æŠŠå®ƒä¸¢å¼ƒã€‚</li></ul><p><strong>äº¤æ¢æœº</strong></p><ul><li>1990 å¹´é—®ä¸–çš„äº¤æ¢å¼é›†çº¿å™¨ (switching hub) å¯æ˜æ˜¾åœ°æé«˜ä»¥å¤ªç½‘çš„æ€§èƒ½ã€‚</li><li>äº¤æ¢å¼é›†çº¿å™¨å¸¸ç§°ä¸º<strong>ä»¥å¤ªç½‘äº¤æ¢æœº</strong> (switch) æˆ–<strong>ç¬¬äºŒå±‚äº¤æ¢æœº</strong> (L2 switch)ï¼Œå¼ºè°ƒè¿™ç§äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ã€‚</li><li>ä»¥å¤ªç½‘äº¤æ¢æœºå®è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª<strong>å¤šæ¥å£çš„ç½‘æ¡¥</strong></li></ul></blockquote><h3 id="8-2-2-é›†çº¿å™¨HUBä¸äº¤æ¢æœºSWITCHåŒºåˆ«"><a href="#8-2-2-é›†çº¿å™¨HUBä¸äº¤æ¢æœºSWITCHåŒºåˆ«" class="headerlink" title="8.2.2 é›†çº¿å™¨HUBä¸äº¤æ¢æœºSWITCHåŒºåˆ«"></a><strong>8.2.2 é›†çº¿å™¨HUBä¸äº¤æ¢æœºSWITCHåŒºåˆ«</strong></h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015152232158.png" alt="image-20201015152232158"></p><blockquote><p>ä½¿ç”¨<strong>é›†çº¿å™¨</strong>äº’è¿è€Œæˆçš„å…±äº«æ€»çº¿å¼ä»¥å¤ªç½‘ä¸Šçš„æŸä¸ªä¸»æœºï¼Œè¦ç»™å¦ä¸€ä¸ªä¸»æœºå‘é€å•æ’­å¸§ï¼Œè¯¥å•æ’­å¸§ä¼šé€šè¿‡å…±äº«æ€»çº¿ä¼ è¾“åˆ°<strong>æ€»çº¿ä¸Šçš„å…¶ä»–å„ä¸ªä¸»æœº</strong></p><p>ä½¿ç”¨äº¤æ¢æœºäº’è¿è€Œæˆçš„äº¤æ¢å¼ä»¥å¤ªç½‘ä¸Šçš„æŸä¸ªä¸»æœºï¼Œè¦ç»™å¦ä¸€ä¸ªä¸»æœºå‘é€å•æ’­å¸§ï¼Œè¯¥å•æ’­å¸§è¿›å…¥äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šå°†è¯¥å•æ’­å¸§è½¬å‘ç»™ç›®çš„ä¸»æœºï¼Œ<strong>è€Œä¸æ˜¯ç½‘ç»œä¸­çš„å…¶ä»–å„ä¸ªä¸»æœº</strong></p><p><strong>è¿™ä¸ªä¾‹å­çš„å‰ææ¡ä»¶æ˜¯å¿½ç•¥ARPè¿‡ç¨‹ï¼Œå¹¶å‡è®¾äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨å·²ç»å­¦ä¹ æˆ–é…ç½®å¥½äº†</strong></p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015152858146.png" alt="image-20201015152858146"></p><blockquote><p>å…¨å·¥ä½œæ–¹å¼ï¼šå‘é€å¸§å’Œæ¥æ”¶å¸§å¯ä»¥åŒæ—¶è¿›è¡Œã€‚</p></blockquote><blockquote><p><strong>ä»¥å¤ªç½‘äº¤æ¢æœºçš„äº¤æ¢æ–¹å¼</strong></p><ul><li>å­˜å‚¨è½¬å‘æ–¹å¼<ul><li>æŠŠæ•´ä¸ªæ•°æ®å¸§<strong>å…ˆç¼“å­˜</strong>åå†è¿›è¡Œå¤„ç†ã€‚</li></ul></li><li>ç›´é€š (cut-through) æ–¹å¼<ul><li>æ¥æ”¶æ•°æ®å¸§çš„åŒæ—¶å°±<strong>ç«‹å³æŒ‰æ•°æ®å¸§çš„ç›®çš„ MAC åœ°å€å†³å®šè¯¥å¸§çš„è½¬å‘æ¥å£</strong>ï¼Œå› è€Œæé«˜äº†å¸§çš„è½¬å‘é€Ÿåº¦ã€‚</li><li><strong>ç¼ºç‚¹</strong>æ˜¯å®ƒä¸æ£€æŸ¥å·®é”™å°±ç›´æ¥å°†å¸§è½¬å‘å‡ºå»ï¼Œå› æ­¤æœ‰å¯èƒ½ä¹Ÿå°†ä¸€äº›æ— æ•ˆå¸§è½¬å‘ç»™å…¶ä»–çš„ç«™ã€‚</li></ul></li></ul><p><strong>è¿™ä¸ªä¾‹å­çš„å‰ææ¡ä»¶æ˜¯å¿½ç•¥ARPè¿‡ç¨‹ï¼Œå¹¶å‡è®¾äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨å·²ç»å­¦ä¹ æˆ–é…ç½®å¥½äº†</strong></p></blockquote><p><strong>å¯¹æ¯”é›†çº¿å™¨å’Œäº¤æ¢æœº</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015153907268.png" alt="image-20201015153907268"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015154523036.png" alt="image-20201015154523036"></p><blockquote><p>å¤šå°ä¸»æœºåŒæ—¶ç»™å¦ä¸€å°ä¸»æœºå‘é€å•æ’­å¸§</p><p>é›†çº¿å™¨ä»¥å¤ªç½‘ï¼šä¼šäº§ç”Ÿç¢°æ’ï¼Œé­é‡ç¢°æ’çš„å¸§ä¼šä¼ æ’­åˆ°æ€»çº¿ä¸Šçš„å„ä¸»æœº</p><p>äº¤æ¢æœºä»¥å¤ªç½‘ï¼šä¼šå°†å®ƒä»¬ç¼“å­˜èµ·æ¥ï¼Œç„¶åé€ä¸ªè½¬å‘ç»™ç›®çš„ä¸»æœºï¼Œä¸ä¼šäº§ç”Ÿç¢°æ’</p><p><strong>è¿™ä¸ªä¾‹å­çš„å‰ææ¡ä»¶æ˜¯å¿½ç•¥ARPè¿‡ç¨‹ï¼Œå¹¶å‡è®¾äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨å·²ç»å­¦ä¹ æˆ–é…ç½®å¥½äº†</strong></p></blockquote><p><strong>é›†çº¿å™¨æ‰©å±•ä»¥å¤ªç½‘å’Œäº¤æ¢æœºæ‰©å±•ä»¥å¤ªç½‘åŒºåˆ«</strong></p><p><strong>å•æ’­</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015155408692.png" alt="image-20201015155408692"></p><p><strong>å¹¿æ’­</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015155440402.png" alt="image-20201015155440402"></p><p><strong>å¤šä¸ªå•æ’­</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015155526386.png" alt="image-20201015155526386"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015155706698.png" alt="image-20201015155706698"></p><p>å¹¿æ’­åŸŸï¼ˆbroadcast domainï¼‰ï¼šæŒ‡è¿™æ ·ä¸€éƒ¨åˆ†ç½‘ç»œï¼Œå…¶ä¸­ä»»ä½•ä¸€å°è®¾å¤‡å‘å‡ºçš„å¹¿æ’­é€šä¿¡éƒ½èƒ½è¢«è¯¥éƒ¨åˆ†ç½‘ç»œä¸­çš„æ‰€æœ‰å…¶ä»–è®¾å¤‡æ‰€æ¥æ”¶ã€‚</p><h2 id="8-3-æ€»ç»“"><a href="#8-3-æ€»ç»“" class="headerlink" title="8.3 æ€»ç»“"></a>8.3 æ€»ç»“</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015160146482.png" alt="image-20201015160146482"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015160526999.png" alt="image-20201015160526999"></p><blockquote><p>å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚çš„ä»¥å¤ªç½‘äº¤æ¢æœºï¼Œå…¶æ€§èƒ½è¿œè¿œè¶…è¿‡å·¥ä½œåœ¨ç‰©ç†å±‚çš„é›†çº¿å™¨ï¼Œè€Œä¸”ä»·æ ¼å¹¶ä¸è´µï¼Œè¿™å°±ä½¿å¾—é›†çº¿å™¨é€æ¸è¢«å¸‚åœºæ·˜æ±°</p></blockquote><hr><h1 id="ä¹ã€ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„æµç¨‹"><a href="#ä¹ã€ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„æµç¨‹" class="headerlink" title="ä¹ã€ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„æµç¨‹"></a>ä¹ã€ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„æµç¨‹</h1><h2 id="9-1-æ¦‚å¿µ"><a href="#9-1-æ¦‚å¿µ" class="headerlink" title="9.1 æ¦‚å¿µ"></a>9.1 æ¦‚å¿µ</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015161015165.png" alt="image-20201015161015165"></p><h2 id="9-2-è‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„ä¾‹å­"><a href="#9-2-è‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„ä¾‹å­" class="headerlink" title="9.2 è‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„ä¾‹å­"></a>9.2 è‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„ä¾‹å­</h2><p>ä»¥ä¸‹ä¾‹å­å‡è®¾å„ä¸»æœºçŸ¥é“ç½‘ç»œä¸­å…¶ä»–å„ä¸»æœºçš„MACåœ°å€ï¼ˆæ— éœ€é¦–å…ˆè¿›è¡ŒARPæ¥è·å–ç›®çš„ä¸»æœºçš„MACåœ°å€ï¼‰</p><p><strong><span style="color:red;">A -&gt; B</span></strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015161458528.png" alt="image-20201015161458528"></p><blockquote><ol><li>A å…ˆå‘ B å‘é€ä¸€å¸§ã€‚è¯¥å¸§ä»æ¥å£ 1 è¿›å…¥åˆ°äº¤æ¢æœº</li><li>äº¤æ¢æœºæ”¶åˆ°å¸§åï¼Œå…ˆæŸ¥æ‰¾ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ã€‚æ²¡æœ‰æŸ¥åˆ°åº”ä»å“ªä¸ªæ¥å£è½¬å‘è¿™ä¸ªå¸§ç»™ B</li><li>äº¤æ¢æœºæŠŠè¿™ä¸ªå¸§çš„æºåœ°å€ A å’Œæ¥å£ 1 å†™å…¥ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ä¸­</li><li>äº¤æ¢æœºå‘é™¤æ¥å£ 1 ä»¥å¤–çš„æ‰€æœ‰çš„æ¥å£å¹¿æ’­è¿™ä¸ªå¸§</li><li>æ¥å£ 4åˆ°æ¥å£ 2ï¼Œå…ˆæŸ¥æ‰¾ï¼ˆå›¾ä¸­å³è¾¹ï¼‰äº¤æ¢è¡¨ã€‚æ²¡æœ‰æŸ¥åˆ°åº”ä»å“ªä¸ªæ¥å£è½¬å‘è¿™ä¸ªå¸§ç»™ B</li><li>äº¤æ¢æœºæŠŠè¿™ä¸ªå¸§çš„æºåœ°å€ A å’Œæ¥å£ 1 å†™å…¥ï¼ˆå›¾ä¸­å³è¾¹ï¼‰äº¤æ¢è¡¨ä¸­</li><li>é™¤Bä¸»æœºä¹‹å¤–ä¸è¯¥å¸§çš„ç›®çš„åœ°å€ä¸ç›¸ç¬¦ï¼Œå°†ä¸¢å¼ƒè¯¥å¸§</li><li>ä¸»æœºBå‘ç°æ˜¯ç»™è‡ªå·±çš„å¸§ï¼Œæ¥å—è¯¥å¸§</li></ol></blockquote><p><strong><span style="color:red;">B-&gt; A</span></strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015162310922.png" alt="image-20201015162310922"></p><blockquote><ol><li>B å‘ A å‘é€ä¸€å¸§ã€‚è¯¥å¸§ä»æ¥å£ 3 è¿›å…¥åˆ°äº¤æ¢æœº</li><li>äº¤æ¢æœºæ”¶åˆ°å¸§åï¼Œå…ˆæŸ¥æ‰¾ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ã€‚å‘ç°ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ä¸­çš„ MAC åœ°å€æœ‰ Aï¼Œè¡¨æ˜è¦å‘é€ç»™Açš„å¸§åº”ä»æ¥å£1è½¬å‘å‡ºå»ã€‚äºæ˜¯å°±æŠŠè¿™ä¸ªå¸§ä¼ é€åˆ°æ¥å£ 1 è½¬å‘ç»™ Aã€‚</li><li>ä¸»æœº A å‘ç°ç›®çš„åœ°å€æ˜¯å®ƒï¼Œå°±æ¥å—è¯¥å¸§</li><li>äº¤æ¢æœºæŠŠè¿™ä¸ªå¸§çš„æºåœ°å€ B å’Œæ¥å£ 3 å†™å…¥ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ä¸­</li></ol></blockquote><p><strong><span style="color:red;">E -&gt; A</span></strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015162622462.png" alt="image-20201015162622462"></p><blockquote><ol><li>E å‘ Aå‘é€ä¸€å¸§</li><li>äº¤æ¢æœºæ”¶åˆ°å¸§åï¼Œå…ˆæŸ¥æ‰¾ï¼ˆå›¾ä¸­å³è¾¹ï¼‰äº¤æ¢è¡¨ã€‚å‘ç°ï¼ˆå›¾ä¸­å³è¾¹ï¼‰äº¤æ¢è¡¨ä¸­çš„ MAC åœ°å€æœ‰ Aï¼Œè¡¨æ˜è¦å‘é€ç»™Açš„å¸§åº”ä»æ¥å£2è½¬å‘å‡ºå»ã€‚äºæ˜¯å°±æŠŠè¿™ä¸ªå¸§ä¼ é€åˆ°æ¥å£ 2 è½¬å‘ç»™ æ¥å£ 4ã€‚</li><li>äº¤æ¢æœºæŠŠè¿™ä¸ªå¸§çš„æºåœ°å€ E å’Œæ¥å£ 3 å†™å…¥ï¼ˆå›¾ä¸­å³è¾¹ï¼‰äº¤æ¢è¡¨ä¸­</li><li>æ¥å£ 4 åˆ° å·¦è¾¹çš„äº¤æ¢æœºï¼Œå…ˆæŸ¥æ‰¾ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ã€‚å‘ç°ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ä¸­çš„ MAC åœ°å€æœ‰ Aï¼Œè¡¨æ˜è¦å‘é€ç»™Açš„å¸§åº”ä»æ¥å£1è½¬å‘å‡ºå»ã€‚äºæ˜¯å°±æŠŠè¿™ä¸ªå¸§ä¼ é€åˆ°æ¥å£ 1 è½¬å‘ç»™ Aã€‚</li><li>äº¤æ¢æœºæŠŠè¿™ä¸ªå¸§çš„æºåœ°å€ E å’Œæ¥å£ 4 å†™å…¥ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨ä¸­</li><li>ä¸»æœº A å‘ç°ç›®çš„åœ°å€æ˜¯å®ƒï¼Œå°±æ¥å—è¯¥å¸§</li></ol></blockquote><p><strong><span style="color:red;">G -&gt; A</span></strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015163157140.png" alt="image-20201015163157140"></p><blockquote><p>ä¸»æœº Aã€ä¸»æœº Gã€äº¤æ¢æœº 1çš„æ¥å£ 1å°±å…±äº«åŒä¸€æ¡æ€»çº¿ï¼ˆç›¸å½“äºæ€»çº¿å¼ç½‘ç»œï¼Œå¯ä»¥æƒ³è±¡æˆç”¨é›†çº¿å™¨è¿æ¥äº†ï¼‰</p><ol><li>ä¸»æœº G å‘é€ç»™ ä¸»æœº A ä¸€ä¸ªå¸§</li><li>ä¸»æœº A å’Œ äº¤æ¢æœºæ¥å£ 1éƒ½èƒ½æ¥æ”¶åˆ°</li><li>ä¸»æœº A çš„ç½‘å¡æ”¶åˆ°åï¼Œæ ¹æ®å¸§çš„ç›®çš„MACåœ°å€Aï¼Œå°±çŸ¥é“æ˜¯å‘é€ç»™è‡ªå·±çš„å¸§ï¼Œå°±æ¥å—è¯¥å¸§</li><li>äº¤æ¢æœº 1æ”¶åˆ°è¯¥å¸§åï¼Œé¦–å…ˆè¿›è¡Œç™»è®°å·¥ä½œ</li><li>ç„¶åäº¤æ¢æœº 1å¯¹è¯¥å¸§è¿›è¡Œè½¬å‘ï¼Œè¯¥å¸§çš„MACåœ°å€æ˜¯Aï¼Œåœ¨ï¼ˆå›¾ä¸­å·¦è¾¹ï¼‰äº¤æ¢è¡¨æŸ¥æ‰¾MAC åœ°å€æœ‰ A</li><li>MAC åœ°å€ä¸º Açš„æ¥å£å·æ˜¯1ï¼Œä½†æ˜¯è¯¥å¸§æ­£æ˜¯ä»æ¥å£ 1 è¿›å…¥äº¤æ¢æœºçš„ï¼Œäº¤æ¢æœºä¸ä¼šå†ä»è¯¥æ¥å£ 1 å°†å¸§è½¬å‘å‡ºå»ï¼Œå› ä¸ºè¿™æ˜¯æ²¡æœ‰å¿…è¦ï¼Œäºæ˜¯ä¸¢å¼ƒè¯¥å¸§</li></ol></blockquote><p>éšç€ç½‘ç»œä¸­å„ä¸»æœºéƒ½å‘é€äº†å¸§åï¼Œç½‘ç»œä¸­çš„å„äº¤æ¢æœºå°±å¯ä»¥å­¦ä¹ åˆ°å„ä¸»æœºçš„MACåœ°å€ï¼Œä»¥åŠå®ƒä»¬ä¸è‡ªå·±å„æ¥å£çš„å¯¹åº”å…³ç³»</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015164210543.png" alt="image-20201015164210543"></p><blockquote><p>è€ƒè™‘åˆ°å¯èƒ½æœ‰æ—¶è¦åœ¨äº¤æ¢æœºçš„æ¥å£æ›´æ¢ä¸»æœºï¼Œæˆ–è€…ä¸»æœºè¦æ›´æ¢å…¶ç½‘ç»œé€‚é…å™¨ï¼Œè¿™å°±éœ€è¦æ›´æ”¹äº¤æ¢è¡¨ä¸­çš„é¡¹ç›®ã€‚ä¸ºæ­¤ï¼Œåœ¨äº¤æ¢è¡¨ä¸­æ¯ä¸ªé¡¹ç›®éƒ½è®¾æœ‰ä¸€å®šçš„<strong>æœ‰æ•ˆæ—¶é—´</strong>ã€‚<strong>è¿‡æœŸçš„é¡¹ç›®å°±è‡ªåŠ¨è¢«åˆ é™¤</strong>ã€‚</p><p><strong>ä»¥å¤ªç½‘äº¤æ¢æœºçš„è¿™ç§è‡ªå­¦ä¹ æ–¹æ³•ä½¿å¾—ä»¥å¤ªç½‘äº¤æ¢æœºèƒ½å¤Ÿå³æ’å³ç”¨ï¼Œä¸å¿…äººå·¥è¿›è¡Œé…ç½®ï¼Œå› æ­¤éå¸¸æ–¹ä¾¿ã€‚</strong></p></blockquote><h2 id="9-3-æ€»ç»“"><a href="#9-3-æ€»ç»“" class="headerlink" title="9.3 æ€»ç»“"></a>9.3 æ€»ç»“</h2><p><strong>äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„æ­¥éª¤å½’çº³</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015170656500.png" alt="image-20201015170656500"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015170739679.png" alt="image-20201015170739679"></p><hr><h1 id="åã€ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP"><a href="#åã€ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP" class="headerlink" title="åã€ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP"></a>åã€ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP</h1><h2 id="10-1-å¦‚ä½•æé«˜ä»¥å¤ªç½‘çš„å¯é æ€§"><a href="#10-1-å¦‚ä½•æé«˜ä»¥å¤ªç½‘çš„å¯é æ€§" class="headerlink" title="10.1 å¦‚ä½•æé«˜ä»¥å¤ªç½‘çš„å¯é æ€§"></a>10.1 å¦‚ä½•æé«˜ä»¥å¤ªç½‘çš„å¯é æ€§</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015171453001.png" alt="image-20201015171453001"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015171515481.png" alt="image-20201015171515481"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015171900775.png" alt="image-20201015171900775"></p><p><strong>å¹¿æ’­é£æš´ğŸ“Œ</strong></p><blockquote><p>å¦‚å›¾æ‰€ç¤ºï¼Œä¾‹å¦‚å¹¿æ’­ä»H1ä¸»æœºå‘é€å‡ºå»ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„è½¬å‘ï¼Œè¯¥å¹¿æ’­å¸§å°†åœ¨å„äº¤æ¢æœºä¹‹é—´åå¤è½¬å‘ï¼Œåˆ†åˆ«æŒ‰é¡ºæ—¶é’ˆå’Œé€†æ—¶é’ˆæ–¹å‘åŒæ—¶å…œåœˆï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å¹¿æ’­é£æš´ï¼</p></blockquote><h2 id="10-2-ç”Ÿæˆæ ‘åè®®STP"><a href="#10-2-ç”Ÿæˆæ ‘åè®®STP" class="headerlink" title="10.2 ç”Ÿæˆæ ‘åè®®STP"></a>10.2 ç”Ÿæˆæ ‘åè®®STP</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015172204419.png" alt="image-20201015172204419"></p><blockquote><ul><li>IEEE 802.1D æ ‡å‡†åˆ¶å®šäº†ä¸€ä¸ª<strong>ç”Ÿæˆæ ‘åè®® STP</strong>  (Spanning Tree Protocol)ã€‚</li><li>å…¶<strong>è¦ç‚¹</strong>æ˜¯ï¼š<strong>ä¸æ”¹å˜</strong>ç½‘ç»œçš„å®é™…æ‹“æ‰‘ï¼Œä½†åœ¨é€»è¾‘ä¸Šåˆ™åˆ‡æ–­æŸäº›é“¾è·¯ï¼Œä½¿å¾—ä»ä¸€å°ä¸»æœºåˆ°æ‰€æœ‰å…¶ä»–ä¸»æœºçš„è·¯å¾„æ˜¯<strong>æ— ç¯è·¯çš„æ ‘çŠ¶ç»“æ„</strong>ï¼Œä»è€Œæ¶ˆé™¤äº†å…œåœˆå­ç°è±¡ã€‚</li></ul></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015202257756.png" alt="image-20201015202257756"></p><hr><h1 id="åä¸€ã€è™šæ‹Ÿå±€åŸŸç½‘VLAN"><a href="#åä¸€ã€è™šæ‹Ÿå±€åŸŸç½‘VLAN" class="headerlink" title="åä¸€ã€è™šæ‹Ÿå±€åŸŸç½‘VLAN"></a>åä¸€ã€è™šæ‹Ÿå±€åŸŸç½‘VLAN</h1><h2 id="11-1-ä¸ºä»€ä¹ˆè¦è™šæ‹Ÿå±€åŸŸç½‘VLAN"><a href="#11-1-ä¸ºä»€ä¹ˆè¦è™šæ‹Ÿå±€åŸŸç½‘VLAN" class="headerlink" title="11.1 ä¸ºä»€ä¹ˆè¦è™šæ‹Ÿå±€åŸŸç½‘VLAN"></a>11.1 ä¸ºä»€ä¹ˆè¦è™šæ‹Ÿå±€åŸŸç½‘VLAN</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015202859124.png" alt="image-20201015202859124"></p><p><strong>åˆ†å‰²å¹¿æ’­åŸŸçš„æ–¹æ³•</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015203113654.png" alt="image-20201015203113654"></p><blockquote><p>ğŸ“Œè·¯ç”±å™¨é»˜è®¤æƒ…å†µä¸‹ä¸å¯¹å¹¿æ’­æ•°æ®åŒ…è¿›è¡Œè½¬å‘ã€‚</p></blockquote><blockquote><p>ä¸ºäº†åˆ†å‰²å¹¿æ’­åŸŸï¼Œæ‰€ä»¥è™šæ‹Ÿå±€åŸŸç½‘VLANæŠ€æœ¯åº”è¿è€Œç”Ÿ</p></blockquote><h2 id="11-2-æ¦‚å¿µ"><a href="#11-2-æ¦‚å¿µ" class="headerlink" title="11.2 æ¦‚å¿µ"></a>11.2 æ¦‚å¿µ</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015203559548.png" alt="image-20201015203559548"></p><blockquote><ul><li>åˆ©ç”¨ä»¥å¤ªç½‘äº¤æ¢æœºå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°è™šæ‹Ÿå±€åŸŸç½‘ VLAN (Virtual LAN)ã€‚</li><li>IEEE 802.1Q å¯¹è™šæ‹Ÿå±€åŸŸç½‘ VLAN çš„<strong>å®šä¹‰</strong>ï¼š<br><strong>è™šæ‹Ÿå±€åŸŸç½‘ VLAN</strong> æ˜¯ç”±ä¸€äº›å±€åŸŸç½‘ç½‘æ®µæ„æˆçš„<strong>ä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„</strong>ï¼Œè€Œè¿™äº›ç½‘æ®µå…·æœ‰æŸäº›å…±åŒçš„éœ€æ±‚ã€‚æ¯ä¸€ä¸ª VLAN çš„å¸§éƒ½æœ‰ä¸€ä¸ªæ˜ç¡®çš„æ ‡è¯†ç¬¦ï¼ŒæŒ‡æ˜å‘é€è¿™ä¸ªå¸§çš„è®¡ç®—æœºæ˜¯å±äºå“ªä¸€ä¸ª VLANã€‚</li><li>åŒä¸€ä¸ªVLANå†…éƒ¨å¯ä»¥å¹¿æ’­é€šä¿¡ï¼Œä¸åŒVLANä¸å¯ä»¥å¹¿æ’­é€šä¿¡</li><li><strong>è™šæ‹Ÿå±€åŸŸç½‘å…¶å®åªæ˜¯å±€åŸŸç½‘ç»™ç”¨æˆ·æä¾›çš„ä¸€ç§æœåŠ¡ï¼Œè€Œå¹¶ä¸æ˜¯ä¸€ç§æ–°å‹å±€åŸŸç½‘ã€‚</strong></li><li>ç”±äºè™šæ‹Ÿå±€åŸŸç½‘æ˜¯ç”¨æˆ·å’Œç½‘ç»œèµ„æºçš„é€»è¾‘ç»„åˆï¼Œå› æ­¤å¯æŒ‰ç…§éœ€è¦å°†æœ‰å…³è®¾å¤‡å’Œèµ„æºéå¸¸æ–¹ä¾¿åœ°é‡æ–°ç»„åˆï¼Œä½¿ç”¨æˆ·ä»ä¸åŒçš„æœåŠ¡å™¨æˆ–æ•°æ®åº“ä¸­å­˜å–æ‰€éœ€çš„èµ„æºã€‚</li></ul></blockquote><h2 id="11-3-è™šæ‹Ÿå±€åŸŸç½‘VLANçš„å®ç°æœºåˆ¶"><a href="#11-3-è™šæ‹Ÿå±€åŸŸç½‘VLANçš„å®ç°æœºåˆ¶" class="headerlink" title="11.3 è™šæ‹Ÿå±€åŸŸç½‘VLANçš„å®ç°æœºåˆ¶"></a>11.3 è™šæ‹Ÿå±€åŸŸç½‘VLANçš„å®ç°æœºåˆ¶</h2><p>è™šæ‹Ÿå±€åŸŸç½‘VLANæŠ€æœ¯æ˜¯åœ¨äº¤æ¢æœºä¸Šå®ç°çš„ï¼Œéœ€è¦äº¤æ¢æœºèƒ½å¤Ÿå®ç°ä»¥ä¸‹åŠŸèƒ½</p><ul><li>èƒ½å¤Ÿå¤„ç†å¸¦æœ‰VLANæ ‡è®°çš„å¸§â€”â€”IEEE 802.1 Qå¸§</li><li>äº¤æ¢æœºçš„å„ç«¯å£å¯ä»¥æ”¯æŒä¸åŒçš„ç«¯å£ç±»å‹ï¼Œä¸åŒç«¯å£ç±»å‹çš„ç«¯å£å¯¹å¸§çš„å¤„ç†æ–¹å¼æœ‰æ‰€ä¸åŒ</li></ul><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015204639599.png" alt="image-20201015204639599"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015204749141.png" alt="image-20201015204749141"></p><h4 id="Accessç«¯å£"><a href="#Accessç«¯å£" class="headerlink" title="Accessç«¯å£"></a>Accessç«¯å£</h4><p>äº¤æ¢æœºä¸ç”¨æˆ·è®¡ç®—æœºä¹‹é—´çš„äº’è¿</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015205311757.png" alt="image-20201015205311757"></p><blockquote><p>åŒä¸€ä¸ªVLANå†…éƒ¨å¯ä»¥å¹¿æ’­é€šä¿¡ï¼Œä¸åŒVLANä¸å¯ä»¥å¹¿æ’­é€šä¿¡</p></blockquote><p><strong>ä¸¾ä¸ªä¾‹å­ğŸ¤“</strong></p><blockquote><p>å¦‚å›¾ï¼Œä¸»æœºAå‘é€ä¸€ä¸ªå¹¿æ’­å¸§ï¼Œè¯¥å¸§ä»äº¤æ¢æœºçš„ç«¯å£1è¿›å…¥äº¤æ¢æœºï¼Œç”±äºç«¯å£1çš„ç±»å‹ä¸ºAccessï¼Œå®ƒä¼šå¯¹æ¥å—åˆ°çš„â€œæœªæ‰“æ ‡ç­¾â€çš„æ™®é€šä»¥å¤ªç½‘MACå¸§â€œæ‰“æ ‡ç­¾â€ï¼Œä¹Ÿå°±æ˜¯æ’å…¥4å­—èŠ‚çš„VLANæ ‡è®°å­—æ®µã€‚å¦‚å›¾æ‰€ç¤ºï¼Œç”±äºç«¯å£1çš„PVIDå€¼ç­‰äº2ï¼Œå› æ­¤ï¼Œæ‰€æ’å…¥çš„4å­—èŠ‚VLANæ ‡è®°å­—æ®µä¸­çš„VIDçš„å€¼ä¹Ÿç­‰äº2ã€‚å¹¿æ’­å¸§ä¸­çš„VIDçš„å–å€¼ä¸ç«¯å£2çš„PVIDå–å€¼éƒ½ç­‰äº2ï¼Œå› æ­¤ï¼Œäº¤æ¢æœºä¼šä»ç«¯å£2å¯¹å¸§è¿›è¡Œâ€œå»æ ‡ç­¾â€è½¬å‘ï¼Œä½†å…¶ä»–ç«¯å£ä¸ä¼šã€‚</p></blockquote><h4 id="Truckç«¯å£"><a href="#Truckç«¯å£" class="headerlink" title="Truckç«¯å£"></a>Truckç«¯å£</h4><p>äº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿</p><blockquote><p>å‘é€è¿˜æœ‰ï¼šTrunkç«¯å£å¯¹VIDä¸ç­‰äºPVIDçš„å¸§æ˜¯ç›´æ¥è½¬å‘çš„ï¼ï¼ï¼</p><p>æ¥å—è¿˜æœ‰ï¼šæ¥æ‰‹â€œå·²æ‰“æ ‡ç­¾çš„å¸§â€ï¼Œç›´æ¥è¿›è¡Œå‘é€</p></blockquote><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015205947636.png" alt="image-20201015205947636"></p><p><strong><span style="color:red;">é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹å‡ºï¼šåœ¨ç”±å¤šä¸ªäº¤æ¢æœºäº’è¿è€Œæˆçš„äº¤æ¢å¼ä»¥å¤ªç½‘ä¸­åˆ’åˆ†VLANæ—¶ï¼Œè¿æ¥ä¸»æœºçš„äº¤æ¢æœºç«¯å£åº”è®¾ç½®ä¸º<code>Access</code>ç±»å‹ï¼Œäº¤æ¢æœºä¹‹é—´äº’è¿çš„ç«¯å£åº”è®¾ç½®ä¸º<code>Trunk</code>ç±»å‹ã€‚</span></strong></p><p><strong>å°ä¾‹é¢˜</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015210417695.png" alt="image-20201015210417695"></p><h4 id="åä¸ºäº¤æ¢æœºç§æœ‰çš„Hybridç«¯å£ç±»å‹"><a href="#åä¸ºäº¤æ¢æœºç§æœ‰çš„Hybridç«¯å£ç±»å‹" class="headerlink" title="åä¸ºäº¤æ¢æœºç§æœ‰çš„Hybridç«¯å£ç±»å‹"></a>åä¸ºäº¤æ¢æœºç§æœ‰çš„Hybridç«¯å£ç±»å‹</h4><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015211031361.png" alt="image-20201015211031361"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015211349531.png" alt="image-20201015211349531"></p><h2 id="11-4-æ€»ç»“"><a href="#11-4-æ€»ç»“" class="headerlink" title="11.4 æ€»ç»“"></a>11.4 æ€»ç»“</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%88%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%89.assets/image-20201015211512622.png" alt="image-20201015211512622"></p><blockquote><p><strong>è™šæ‹Ÿå±€åŸŸç½‘ä¼˜ç‚¹</strong></p><p>è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰æŠ€æœ¯å…·æœ‰ä»¥ä¸‹ä¸»è¦ä¼˜ç‚¹ï¼š</p><ol><li>æ”¹å–„äº†æ€§èƒ½</li><li>ç®€åŒ–äº†ç®¡ç†</li><li>é™ä½äº†æˆæœ¬</li><li>æ”¹å–„äº†å®‰å…¨æ€§</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»ŸåŸºæœ¬æ¦‚å¿µç»ƒä¹ é¢˜</title>
      <link href="/2023/04/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E7%BB%83%E4%B9%A0%E9%A2%98/"/>
      <url>/2023/04/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E7%BB%83%E4%B9%A0%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p class='p center logo huge black'>æ“ä½œç³»ç»Ÿ</p><div class="note success flat"><p>æœ¬ä¹ é¢˜æ˜¯XOSCATSXçš„åŸºæœ¬æ¦‚å¿µæµ‹è¯•é¢˜ï¼Œè®°å½•ä¸‹æ¥æ–¹ä¾¿åŠæ—¶å¤ä¹ ï¼ï¼ï¼</p></div><details class="folding-tag" blue><summary> åŸºæœ¬æ¦‚å¿µ_ALL </summary>              <div class='content'>              <ol><li>æ“ä½œç³»ç»Ÿçš„è®¾è®¡ç›®æ ‡ï¼š<code>æ–¹ä¾¿æ€§ã€æœ‰æ•ˆæ€§ã€å¯æ‰©å……æ€§ã€å¼€æ”¾æ€§</code>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾ï¼š<code>å¹¶å‘æ€§ã€å…±äº«æ€§ã€è™šæ‹Ÿæ€§ã€å¼‚æ­¥æ€§</code>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç±»å‹ï¼š<code>æ‰¹å¤„ç†ç³»ç»Ÿã€åˆ†æ—¶ç³»ç»Ÿã€å®æ—¶ç³»ç»Ÿ</code>ã€‚</li><li>è¿›ç¨‹ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼š<code>å°±ç»ªçŠ¶æ€ã€æ‰§è¡ŒçŠ¶æ€ã€é˜»å¡çŠ¶æ€</code>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ï¼š<code>å¤„ç†æœºç®¡ç†ã€å­˜å‚¨å™¨ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ã€ç”¨æˆ·æ¥å£</code>ã€‚</li><li>è¿›ç¨‹åŒæ­¥æœºåˆ¶åº”éµå¾ªçš„å‡†åˆ™ï¼š<code>ç©ºé—²è®©è¿›ã€å¿™åˆ™ç­‰å¾…ã€æœ‰é™ç­‰å¾…ã€è®©æƒç­‰å¸¦</code>ã€‚</li><li>äº§ç”Ÿè¿›ç¨‹æ­»é”çš„å¿…è¦æ¡ä»¶ï¼š<code>äº’æ–¥æ¡ä»¶ã€è¯·æ±‚å’Œä¿æŒæ¡ä»¶ã€ä¸å‰¥å¤ºæ¡ä»¶ã€ç¯è·¯ç­‰å¾…æ¡ä»¶</code>ã€‚</li><li>è®¾å¤‡åˆ†é…ä¸­çš„ä¸»è¦æ•°æ®ç»“æ„ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<code>DCTã€COCTã€CHCTã€SDT</code>ã€‚</li><li>ç›®å½•ç®¡ç†çš„ä¸»è¦åŠŸèƒ½ï¼š<code>æŒ‰åå­˜å–ã€æé«˜æ£€ç´¢é€Ÿåº¦ã€æ–‡ä»¶å…±äº«ã€å…è®¸æ–‡ä»¶é‡å</code>ã€‚</li><li>ç›®å‰æ¯”è¾ƒæµè¡Œçš„æ“ä½œç³»ç»Ÿï¼ˆå®ä¾‹ï¼‰ï¼š<code>Windowsã€UNIXã€Linux</code>ã€‚</li><li>å½±å“æ–‡ä»¶å®‰å…¨æ€§çš„ä¸»è¦å› ç´ ï¼š<code>äººä¸ºå› ç´ ã€ç³»ç»Ÿå› ç´ ã€è‡ªç„¶å› ç´ </code>ã€‚</li><li>è¿›ç¨‹ã€æ–‡ä»¶ã€çº¿ç¨‹åœ¨ç³»ç»Ÿä¸­å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<code>PCBã€FCBã€TCB</code>ã€‚</li><li>æŠ¢å å¼è¿›ç¨‹è°ƒåº¦æ–¹å¼åŸºäºçš„ä¸»è¦åŸåˆ™ï¼š<code>ä¼˜å…ˆæƒåŸåˆ™ã€çŸ­è¿›ç¨‹ä¼˜å…ˆåŸåˆ™ã€æ—¶é—´ç‰‡åŸåˆ™</code>ã€‚</li><li>1968å¹´ï¼ŒPeter J. Denning æŒ‡å‡ºç¨‹åºæ‰§è¡Œæ—¶å‘ˆç°å‡ºï¼š<code>æ—¶é—´å±€é™æ€§ã€ç©ºé—´å±€é™æ€§</code>ã€‚</li><li>è¯·æ±‚åˆ†é¡µç³»ç»Ÿçš„ä¸»è¦ç¡¬ä»¶æ”¯æŒï¼š<code>è¯·æ±‚é¡µè¡¨æœºåˆ¶ã€ç¼ºé¡µä¸­æ–­æœºæ„ã€åœ°å€å˜æ¢æœºæ„</code>ã€‚</li><li>é€šå¸¸é‡‡ç”¨è§£é™¤æ­»é”çš„ä¸¤ç§æ–¹æ³•ï¼š<code>å‰¥å¤ºèµ„æºã€æ’¤æ¶ˆè¿›ç¨‹</code>ã€‚</li><li>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå®ç°è¿›ç¨‹åŒæ­¥çš„æœºåˆ¶ï¼š<code>ä¿¡å·é‡æœºåˆ¶ã€ç®¡ç¨‹æœºåˆ¶</code>ã€‚</li><li>è§£å†³<code>é€šé“</code>â€œç“¶é¢ˆâ€é—®é¢˜æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯å¢åŠ è®¾å¤‡åˆ°ä¸»æœºé—´çš„<code>é€šè·¯</code>ã€‚</li><li>äº§ç”Ÿè¿›ç¨‹æ­»é”çš„åŸå› å¯å½’ç»“ä¸ºä¸¤ç‚¹ï¼š<code>ç«äº‰èµ„æºã€è¿›ç¨‹é—´æ¨è¿›é¡ºåºéæ³•</code>ã€‚</li><li>ç›®å‰ï¼Œå¸¸ç”¨çš„æ–‡ä»¶ï¼ˆå¤–å­˜ï¼‰åˆ†é…æ–¹æ³•ï¼š<code>è¿ç»­åˆ†é…ã€é“¾æ¥åˆ†é…ã€ç´¢å¼•åˆ†é…</code>ã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ï¼Œå°†I&#x2F;Oè®¾å¤‡åˆ†ä¸ºï¼š<code>ç‹¬å è®¾å¤‡ã€å…±äº«è®¾å¤‡ã€è™šæ‹Ÿè®¾å¤‡</code>ã€‚</li><li>ä¸ºäº†å®ç°è®¾å¤‡çš„ç‹¬ç«‹æ€§ï¼Œç³»ç»Ÿå¿…é¡»è®¾ç½®ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<code>LUT</code>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ¥å£ï¼š<code>å‘½ä»¤æ¥å£ã€ç¨‹åºæ¥å£ã€å›¾å½¢ç”¨æˆ·æ¥å£</code>ã€‚</li><li>UNIXç³»ç»Ÿæœ€æœ¬è´¨çš„ç‰¹å¾ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<code>OSI</code>ã€‚</li><li><code>UNIX</code>ç³»ç»Ÿçš„å†…æ ¸ç»“æ„å¯åˆ†æˆä¸¤å¤§éƒ¨åˆ†ï¼š<code>è¿›ç¨‹æ§åˆ¶å­ç³»ç»Ÿã€æ–‡ä»¶å­ç³»ç»Ÿ</code>ã€‚</li><li>å°†ä¸€å°ç‰©ç†I&#x2F;Oè®¾å¤‡è™šæ‹Ÿä¸ºå¤šå°é€»è¾‘I&#x2F;Oè®¾å¤‡çš„æŠ€æœ¯ï¼š<code>SPOOLing</code>ã€‚</li><li>è™šæ‹Ÿå­˜å‚¨å™¨çš„ç†è®ºä¾æ®ï¼š<code>å±€éƒ¨æ€§åŸç†</code>ã€‚</li><li>ä¿è¯æ–‡ä»¶ç³»ç»Ÿå®‰å…¨æ€§çš„ä¸»è¦æªæ–½ï¼š<code>å­˜å–æ§åˆ¶ã€å®¹é”™æŠ€æœ¯ã€åå¤‡ç³»ç»Ÿ</code>ã€‚</li><li><code>å¹¶å‘æ€§</code>å’Œ<code>å…±äº«æ€§</code>æ˜¯å¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿä¸¤ä¸ªæœ€åŸºæœ¬çš„ç‰¹å¾ã€‚</li><li><code>å¹¶å‘æ€§</code>æ˜¯å¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿæœ€é‡è¦çš„ç‰¹å¾ã€‚</li><li>é€šè¿‡å»ºç«‹<code>åå¤‡ç³»ç»Ÿ</code>ï¼Œé˜²æ­¢ç”±<code>è‡ªç„¶å› ç´ </code>æ‰€é€ æˆçš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸å®‰å…¨æ€§ã€‚</li><li>é€šè¿‡<code>å­˜å–æ§åˆ¶</code>æœºåˆ¶ï¼Œé˜²æ­¢ç”±<code>äººä¸ºå› ç´ </code>æ‰€é€ æˆçš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸å®‰å…¨æ€§ã€‚</li><li>é€šè¿‡é‡‡å–<code>å®¹é”™æŠ€æœ¯</code>ï¼Œé˜²æ­¢ç”±<code>ç³»ç»Ÿå› ç´ </code>æ‰€é€ æˆçš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸å®‰å…¨æ€§ã€‚</li><li>æ–¹ä¾¿æ€§<code>å’Œ</code>æœ‰æ•ˆæ€§&#96;æ˜¯æ“ä½œç³»ç»Ÿè®¾è®¡ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªç›®æ ‡ã€‚</li><li>1990å¹´åï¼Œ<code>å¼€æ”¾æ€§</code>å·²æˆä¸ºæ–°ç³»ç»Ÿæˆ–è½¯ä»¶èƒ½å¦è¢«å¹¿æ³›åº”ç”¨çš„è‡³å…³é‡è¦çš„å› ç´ ã€‚</li><li>åœ¨æ“ä½œç³»ç»ŸåŸºæœ¬ç±»å‹ä¸­ï¼Œå¯é æ€§æ˜¯<code>å®æ—¶ç³»ç»Ÿ</code>æœ€é‡è¦çš„ç‰¹å¾ã€‚</li><li>åœ¨<code>å±€éƒ¨æ€§åŸç†</code>ä¸­ï¼Œäº§ç”Ÿ<code>æ—¶é—´å±€é™æ€§</code>çš„å…¸å‹åŸå› æ˜¯åœ¨ç¨‹åºä¸­å­˜åœ¨ç€å¤§é‡çš„å¾ªç¯æ“ä½œã€‚</li><li>åœ¨<code>å±€éƒ¨æ€§åŸç†</code>ä¸­ï¼Œäº§ç”Ÿ<code>ç©ºé—´å±€é™æ€§</code>çš„å…¸å‹æƒ…å†µæ˜¯ç¨‹åºçš„é¡ºåºæ‰§è¡Œã€‚</li><li>åœ¨æ­»é”çš„æ¡ä»¶ä¸­ï¼Œ<code>ä¸å‰¥å¤ºæ¡ä»¶</code>æ˜¯æŒ‡è¿›ç¨‹å·²è·å¾—çš„èµ„æºåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾ã€‚</li><li>åœ¨æ­»é”çš„æ¡ä»¶ä¸­ï¼Œ<code>äº’æ–¥æ¡ä»¶</code>æ˜¯æŒ‡åœ¨ä¸€æ®µæ—¶é—´å†…ï¼ŒæŸèµ„æºåªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹å ç”¨ã€‚</li><li>è¿›ç¨‹æ‰€è¯·æ±‚çš„ä¸€æ¬¡I&#x2F;Oå®Œæˆå,å°†ä½¿è¿›ç¨‹çŠ¶æ€ä»<code>é˜»å¡çŠ¶æ€</code>å˜ä¸º<code>å°±ç»ªçŠ¶æ€</code>ã€‚</li><li>æ“ä½œç³»ç»Ÿä¸­å¤„äº<code>æ‰§è¡ŒçŠ¶æ€</code>çš„è¿›ç¨‹æ—¶é—´ç‰‡ç”¨å®Œå,è¿›ç¨‹çŠ¶æ€å°†è½¬å˜ä¸º<code>å°±ç»ªçŠ¶æ€</code>ã€‚</li><li>æ“ä½œç³»ç»Ÿä¸­å¤„äº<code>æ‰§è¡ŒçŠ¶æ€</code>çš„è¿›ç¨‹æå‡ºI&#x2F;Oè¯·æ±‚å,è¿›ç¨‹çŠ¶æ€å°†è½¬å˜ä¸º<code>é˜»å¡çŠ¶æ€</code>ã€‚</li><li>åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶å±æ€§ä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)<code>FCB</code>ä¸­ã€‚</li><li>åœ¨æ“ä½œç³»ç»Ÿæ¥å£ä¸­ï¼Œ<code>ç¨‹åºæ¥å£</code>äº¦ç§°ä¸º<code>ç³»ç»Ÿè°ƒç”¨</code>ã€‚</li><li>æ“ä½œç³»ç»Ÿåˆ©ç”¨æ•°æ®ç»“æ„ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰<code>PCB</code>æè¿°è¿›ç¨‹çš„åŸºæœ¬æƒ…å†µå’Œæ´»åŠ¨è¿‡ç¨‹ã€‚</li><li>èµ„æºçš„æŒ‰åºåˆ†é…æ³•æ˜¯æ‘’å¼ƒæ­»é”æ¡ä»¶ä¸­çš„<code>ç¯è·¯ç­‰å¾…æ¡ä»¶</code>æ¥é¢„é˜²æ­»é”çš„å‘ç”Ÿã€‚</li><li>ç°ä»£æ“ä½œç³»ç»Ÿäº§ç”Ÿæ­»é”çš„æ¡ä»¶ä¸­ï¼Œ<code>äº’æ–¥æ¡ä»¶</code>æ˜¯ä¸èƒ½è¢«æ‘’å¼ƒæ¥é¢„é˜²æ­»é”çš„å‘ç”Ÿã€‚</li><li>ç³»ç»Ÿå°†è¢«ä¸­æ–­è¿›ç¨‹çš„CPUç°åœºä¿¡æ¯ä¿å­˜åœ¨è¯¥è¿›ç¨‹çš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)<code>PCB</code>ä¸­ã€‚</li><li>åœ¨OSåŸºæœ¬ç‰¹å¾ä¸­ï¼Œ<code>å¼‚æ­¥æ€§</code>æ˜¯æŒ‡è¿›ç¨‹æ˜¯ä»¥äººä»¬ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›çš„ã€‚</li><li>1965å¹´ï¼Œè·å…°å­¦è€…Dijkstraæå‡ºçš„<code>ä¿¡å·é‡æœºåˆ¶</code>æ˜¯ä¸€ç§å“æœ‰æˆæ•ˆçš„è¿›ç¨‹åŒæ­¥å·¥å…·ã€‚</li><li>åŒæ­¥æœºåˆ¶å‡†åˆ™ä¸­ï¼Œ<code>è®©æƒç­‰å¾…</code>æ˜¯æŒ‡å½“è¿›ç¨‹ä¸èƒ½è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†æœºã€‚</li><li>è¿›ç¨‹ä¸‰ç§åŸºæœ¬çŠ¶æ€ä¸­ï¼Œ<code>å°±ç»ªçŠ¶æ€</code>æ˜¯æŒ‡è¿›ç¨‹å·²åˆ†é…åˆ°é™¤CPUä»¥å¤–çš„æ‰€æœ‰å¿…è¦èµ„æºã€‚</li><li>åœ¨ç´¢å¼•èŠ‚ç‚¹ä¸­è®¾ç½®é“¾æ¥å¼•ç”¨(links)è®¡æ•°çš„ç›®çš„æ˜¯ä¸ºäº†å®ç°ç›®å½•ç®¡ç†çš„<code>æ–‡ä»¶å…±äº«</code>åŠŸèƒ½ã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ä¸­ï¼Œ<code>ç‹¬å è®¾å¤‡</code>å±äºä¸´ç•Œèµ„æºï¼Œå³è¿›ç¨‹ä¸´ç•ŒåŒºè®¿é—®çš„èµ„æºã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ä¸­ï¼Œå…¸å‹çš„<code>ç‹¬å è®¾å¤‡</code>æœ‰æ‰“å°æœºã€ç£å¸¦æœºç­‰ã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ä¸­ï¼Œå…¸å‹çš„<code>å…±äº«è®¾å¤‡</code>æœ‰ç£ç›˜ã€å…‰ç›˜ç­‰ã€‚</li><li>åœ¨å‡è„±æœºæ‰“å°æœºç³»ç»Ÿä¸­ï¼ŒæŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ï¼Œæ˜¯å°†<code>ç‹¬å è®¾å¤‡</code>æ”¹é€ ä¸º<code>å…±äº«è®¾å¤‡</code>ã€‚</li><li>åœ¨å‡è„±æœºæ‰“å°æœºç³»ç»Ÿä¸­ï¼ŒæŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ï¼Œå®ç°äº†<code>è™šæ‹Ÿè®¾å¤‡</code>åŠŸèƒ½ã€‚</li><li><code>SPOOLing</code>æŠ€æœ¯æ˜¯å¯¹è„±æœºI&#x2F;Oç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œæˆ–ç§°ä¸ºå‡è„±æœºæŠ€æœ¯ã€‚</li><li>åœ¨è¯·æ±‚åˆ†é¡µç³»ç»Ÿçš„ç¡¬ä»¶æ”¯æŒä¸­ï¼Œå½“æ‰€è¦è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜æ—¶ï¼Œç”±<code>ç¼ºé¡µä¸­æ–­æœºæ„</code>å®ç°ã€‚</li><li>åœ¨è¯·æ±‚åˆ†é¡µç³»ç»Ÿçš„ç¡¬ä»¶æ”¯æŒä¸­ï¼Œé¡µé¢ç½®æ¢ç®—æ³•éœ€è¦åº”ç”¨<code>è¯·æ±‚é¡µè¡¨æœºåˆ¶</code>å®ç°ã€‚</li><li>åœ¨è®¾å¤‡åˆ†é…ä¸­ï¼Œç”¨äºè®°å½•æ¯ä¸€ä¸ªè®¾å¤‡æƒ…å†µçš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)ï¼š<code>DCT</code>ã€‚</li><li>åœ¨è®¾å¤‡åˆ†é…ä¸­ï¼Œç”¨äºè®°å½•å…¨éƒ¨è®¾å¤‡æƒ…å†µçš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)ï¼š<code>SDT</code>ã€‚</li><li>åœ¨è®¾å¤‡åˆ†é…ä¸­ï¼Œç”¨äºè®°å½•æ¯ä¸€ä¸ªæ§åˆ¶å™¨æƒ…å†µçš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)ï¼š<code>COCT</code>ã€‚</li><li>å®ç°â€œ<code>æŒ‰åå­˜å–</code>â€æ˜¯æ–‡ä»¶ç³»ç»Ÿç›®å½•ç®¡ç†ä¸­æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚</li><li>å®ç°â€œ<code>æŒ‰åå­˜å–</code>â€æ˜¯æ–‡ä»¶ç³»ç»Ÿå‘ç”¨æˆ·æä¾›çš„æœ€åŸºæœ¬çš„æœåŠ¡ã€‚</li></ol>              </div>            </details><details class="folding-tag" red><summary> åŸºæœ¬æ¦‚å¿µ_ALL_Practice </summary>              <div class='content'>              <ol><li>æ“ä½œç³»ç»Ÿçš„è®¾è®¡ç›®æ ‡ï¼š<psw>æ–¹ä¾¿æ€§ã€æœ‰æ•ˆæ€§ã€å¯æ‰©å……æ€§ã€å¼€æ”¾æ€§</psw>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾ï¼š<psw>å¹¶å‘æ€§ã€å…±äº«æ€§ã€è™šæ‹Ÿæ€§ã€å¼‚æ­¥æ€§</psw>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç±»å‹ï¼š<psw>æ‰¹å¤„ç†ç³»ç»Ÿã€åˆ†æ—¶ç³»ç»Ÿã€å®æ—¶ç³»ç»Ÿ</psw>ã€‚</li><li>è¿›ç¨‹ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼š<psw>å°±ç»ªçŠ¶æ€ã€æ‰§è¡ŒçŠ¶æ€ã€é˜»å¡çŠ¶æ€</psw>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ï¼š<psw>å¤„ç†æœºç®¡ç†ã€å­˜å‚¨å™¨ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ã€ç”¨æˆ·æ¥å£</psw>ã€‚</li><li>è¿›ç¨‹åŒæ­¥æœºåˆ¶åº”éµå¾ªçš„å‡†åˆ™ï¼š<psw>ç©ºé—²è®©è¿›ã€å¿™åˆ™ç­‰å¾…ã€æœ‰é™ç­‰å¾…ã€è®©æƒç­‰å¸¦</psw>ã€‚</li><li>äº§ç”Ÿè¿›ç¨‹æ­»é”çš„å¿…è¦æ¡ä»¶ï¼š<psw>äº’æ–¥æ¡ä»¶ã€è¯·æ±‚å’Œä¿æŒæ¡ä»¶ã€ä¸å‰¥å¤ºæ¡ä»¶ã€ç¯è·¯ç­‰å¾…æ¡ä»¶</psw>ã€‚</li><li>è®¾å¤‡åˆ†é…ä¸­çš„ä¸»è¦æ•°æ®ç»“æ„ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<psw>DCTã€COCTã€CHCTã€SDT</psw>ã€‚</li><li>ç›®å½•ç®¡ç†çš„ä¸»è¦åŠŸèƒ½ï¼š<psw>æŒ‰åå­˜å–ã€æé«˜æ£€ç´¢é€Ÿåº¦ã€æ–‡ä»¶å…±äº«ã€å…è®¸æ–‡ä»¶é‡å</psw>ã€‚</li><li>ç›®å‰æ¯”è¾ƒæµè¡Œçš„æ“ä½œç³»ç»Ÿï¼ˆå®ä¾‹ï¼‰ï¼š<psw>Windowsã€UNIXã€Linux</psw>ã€‚</li><li>å½±å“æ–‡ä»¶å®‰å…¨æ€§çš„ä¸»è¦å› ç´ ï¼š<psw>äººä¸ºå› ç´ ã€ç³»ç»Ÿå› ç´ ã€è‡ªç„¶å› ç´ </psw>ã€‚</li><li>è¿›ç¨‹ã€æ–‡ä»¶ã€çº¿ç¨‹åœ¨ç³»ç»Ÿä¸­å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<psw>PCBã€FCBã€TCB</psw>ã€‚</li><li>æŠ¢å å¼è¿›ç¨‹è°ƒåº¦æ–¹å¼åŸºäºçš„ä¸»è¦åŸåˆ™ï¼š<psw>ä¼˜å…ˆæƒåŸåˆ™ã€çŸ­è¿›ç¨‹ä¼˜å…ˆåŸåˆ™ã€æ—¶é—´ç‰‡åŸåˆ™</psw>ã€‚</li><li>1968å¹´ï¼ŒPeter J. Denning æŒ‡å‡ºç¨‹åºæ‰§è¡Œæ—¶å‘ˆç°å‡ºï¼š<psw>æ—¶é—´å±€é™æ€§ã€ç©ºé—´å±€é™æ€§</psw>ã€‚</li><li>è¯·æ±‚åˆ†é¡µç³»ç»Ÿçš„ä¸»è¦ç¡¬ä»¶æ”¯æŒï¼š<psw>è¯·æ±‚é¡µè¡¨æœºåˆ¶ã€ç¼ºé¡µä¸­æ–­æœºæ„ã€åœ°å€å˜æ¢æœºæ„</psw>ã€‚</li><li>é€šå¸¸é‡‡ç”¨è§£é™¤æ­»é”çš„ä¸¤ç§æ–¹æ³•ï¼š<psw>å‰¥å¤ºèµ„æºã€æ’¤æ¶ˆè¿›ç¨‹</psw>ã€‚</li><li>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå®ç°è¿›ç¨‹åŒæ­¥çš„æœºåˆ¶ï¼š<psw>ä¿¡å·é‡æœºåˆ¶ã€ç®¡ç¨‹æœºåˆ¶</psw>ã€‚</li><li>è§£å†³<psw>é€šé“</psw>â€œç“¶é¢ˆâ€é—®é¢˜æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯å¢åŠ è®¾å¤‡åˆ°ä¸»æœºé—´çš„<psw>é€šè·¯</psw>ã€‚</li><li>äº§ç”Ÿè¿›ç¨‹æ­»é”çš„åŸå› å¯å½’ç»“ä¸ºä¸¤ç‚¹ï¼š<psw>ç«äº‰èµ„æºã€è¿›ç¨‹é—´æ¨è¿›é¡ºåºéæ³•</psw>ã€‚</li><li>ç›®å‰ï¼Œå¸¸ç”¨çš„æ–‡ä»¶ï¼ˆå¤–å­˜ï¼‰åˆ†é…æ–¹æ³•ï¼š<psw>è¿ç»­åˆ†é…ã€é“¾æ¥åˆ†é…ã€ç´¢å¼•åˆ†é…</psw>ã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ï¼Œå°†I&#x2F;Oè®¾å¤‡åˆ†ä¸ºï¼š<psw>ç‹¬å è®¾å¤‡ã€å…±äº«è®¾å¤‡ã€è™šæ‹Ÿè®¾å¤‡</psw>ã€‚</li><li>ä¸ºäº†å®ç°è®¾å¤‡çš„ç‹¬ç«‹æ€§ï¼Œç³»ç»Ÿå¿…é¡»è®¾ç½®ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<psw>LUT</psw>ã€‚</li><li>æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ¥å£ï¼š<psw>å‘½ä»¤æ¥å£ã€ç¨‹åºæ¥å£ã€å›¾å½¢ç”¨æˆ·æ¥å£</psw>ã€‚</li><li>UNIXç³»ç»Ÿæœ€æœ¬è´¨çš„ç‰¹å¾ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰ï¼š<psw>OSI</psw>ã€‚</li><li><psw>UNIX</psw>ç³»ç»Ÿçš„å†…æ ¸ç»“æ„å¯åˆ†æˆä¸¤å¤§éƒ¨åˆ†ï¼š<psw>è¿›ç¨‹æ§åˆ¶å­ç³»ç»Ÿã€æ–‡ä»¶å­ç³»ç»Ÿ</psw>ã€‚</li><li>å°†ä¸€å°ç‰©ç†I&#x2F;Oè®¾å¤‡è™šæ‹Ÿä¸ºå¤šå°é€»è¾‘I&#x2F;Oè®¾å¤‡çš„æŠ€æœ¯ï¼š<psw>SPOOLing</psw>ã€‚</li><li>è™šæ‹Ÿå­˜å‚¨å™¨çš„ç†è®ºä¾æ®ï¼š<psw>å±€éƒ¨æ€§åŸç†</psw>ã€‚</li><li>ä¿è¯æ–‡ä»¶ç³»ç»Ÿå®‰å…¨æ€§çš„ä¸»è¦æªæ–½ï¼š<psw>å­˜å–æ§åˆ¶ã€å®¹é”™æŠ€æœ¯ã€åå¤‡ç³»ç»Ÿ</psw>ã€‚</li><li><psw>å¹¶å‘æ€§</psw>å’Œ<psw>å…±äº«æ€§</psw>æ˜¯å¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿä¸¤ä¸ªæœ€åŸºæœ¬çš„ç‰¹å¾ã€‚</li><li><psw>å¹¶å‘æ€§</psw>æ˜¯å¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿæœ€é‡è¦çš„ç‰¹å¾ã€‚</li><li>é€šè¿‡å»ºç«‹<psw>åå¤‡ç³»ç»Ÿ</psw>ï¼Œé˜²æ­¢ç”±<psw>è‡ªç„¶å› ç´ </psw>æ‰€é€ æˆçš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸å®‰å…¨æ€§ã€‚</li><li>é€šè¿‡<psw>å­˜å–æ§åˆ¶</psw>æœºåˆ¶ï¼Œé˜²æ­¢ç”±<psw>äººä¸ºå› ç´ </psw>æ‰€é€ æˆçš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸å®‰å…¨æ€§ã€‚</li><li>é€šè¿‡é‡‡å–<psw>å®¹é”™æŠ€æœ¯</psw>ï¼Œé˜²æ­¢ç”±<psw>ç³»ç»Ÿå› ç´ </psw>æ‰€é€ æˆçš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸å®‰å…¨æ€§ã€‚</li><li><psw>æ–¹ä¾¿æ€§</psw>å’Œ<psw>æœ‰æ•ˆæ€§</psw>æ˜¯æ“ä½œç³»ç»Ÿè®¾è®¡ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªç›®æ ‡ã€‚</li><li>1990å¹´åï¼Œ<psw>å¼€æ”¾æ€§</psw>å·²æˆä¸ºæ–°ç³»ç»Ÿæˆ–è½¯ä»¶èƒ½å¦è¢«å¹¿æ³›åº”ç”¨çš„è‡³å…³é‡è¦çš„å› ç´ ã€‚</li><li>åœ¨æ“ä½œç³»ç»ŸåŸºæœ¬ç±»å‹ä¸­ï¼Œå¯é æ€§æ˜¯<psw>å®æ—¶ç³»ç»Ÿ</psw>æœ€é‡è¦çš„ç‰¹å¾ã€‚</li><li>åœ¨<psw>å±€éƒ¨æ€§åŸç†</psw>ä¸­ï¼Œäº§ç”Ÿ <psw>æ—¶é—´å±€é™æ€§</psw>çš„å…¸å‹åŸå› æ˜¯åœ¨ç¨‹åºä¸­å­˜åœ¨ç€å¤§é‡çš„å¾ªç¯æ“ä½œã€‚</li><li>åœ¨<psw>å±€éƒ¨æ€§åŸç†</psw>ä¸­ï¼Œäº§ç”Ÿ<psw>ç©ºé—´å±€é™æ€§</psw>çš„å…¸å‹æƒ…å†µæ˜¯ç¨‹åºçš„é¡ºåºæ‰§è¡Œã€‚</li><li>åœ¨æ­»é”çš„æ¡ä»¶ä¸­ï¼Œ<psw>ä¸å‰¥å¤ºæ¡ä»¶</psw>æ˜¯æŒ‡è¿›ç¨‹å·²è·å¾—çš„èµ„æºåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾ã€‚</li><li>åœ¨æ­»é”çš„æ¡ä»¶ä¸­ï¼Œ<psw>äº’æ–¥æ¡ä»¶</psw>æ˜¯æŒ‡åœ¨ä¸€æ®µæ—¶é—´å†…ï¼ŒæŸèµ„æºåªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹å ç”¨ã€‚</li><li>è¿›ç¨‹æ‰€è¯·æ±‚çš„ä¸€æ¬¡I&#x2F;Oå®Œæˆå,å°†ä½¿è¿›ç¨‹çŠ¶æ€ä»<psw>é˜»å¡çŠ¶æ€</psw>å˜ä¸º<psw>å°±ç»ªçŠ¶æ€</psw>ã€‚</li><li>æ“ä½œç³»ç»Ÿä¸­å¤„äº<psw>æ‰§è¡ŒçŠ¶æ€</psw>çš„è¿›ç¨‹æ—¶é—´ç‰‡ç”¨å®Œå,è¿›ç¨‹çŠ¶æ€å°†è½¬å˜ä¸º<psw>å°±ç»ªçŠ¶æ€</psw>ã€‚</li><li>æ“ä½œç³»ç»Ÿä¸­å¤„äº<psw>æ‰§è¡ŒçŠ¶æ€</psw>çš„è¿›ç¨‹æå‡ºI&#x2F;Oè¯·æ±‚å,è¿›ç¨‹çŠ¶æ€å°†è½¬å˜ä¸º<psw>é˜»å¡çŠ¶æ€</psw>ã€‚</li><li>åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶å±æ€§ä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)<psw>FCB</psw>ä¸­ã€‚</li><li>åœ¨æ“ä½œç³»ç»Ÿæ¥å£ä¸­ï¼Œ<psw>ç¨‹åºæ¥å£</psw>äº¦ç§°ä¸º<psw>ç³»ç»Ÿè°ƒç”¨</psw>ã€‚</li><li>æ“ä½œç³»ç»Ÿåˆ©ç”¨æ•°æ®ç»“æ„ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰<psw>PCB</psw>æè¿°è¿›ç¨‹çš„åŸºæœ¬æƒ…å†µå’Œæ´»åŠ¨è¿‡ç¨‹ã€‚</li><li>èµ„æºçš„æŒ‰åºåˆ†é…æ³•æ˜¯æ‘’å¼ƒæ­»é”æ¡ä»¶ä¸­çš„<psw>ç¯è·¯ç­‰å¾…æ¡ä»¶</psw>æ¥é¢„é˜²æ­»é”çš„å‘ç”Ÿã€‚</li><li>ç°ä»£æ“ä½œç³»ç»Ÿäº§ç”Ÿæ­»é”çš„æ¡ä»¶ä¸­ï¼Œ<psw>äº’æ–¥æ¡ä»¶</psw>æ˜¯ä¸èƒ½è¢«æ‘’å¼ƒæ¥é¢„é˜²æ­»é”çš„å‘ç”Ÿã€‚</li><li>ç³»ç»Ÿå°†è¢«ä¸­æ–­è¿›ç¨‹çš„CPUç°åœºä¿¡æ¯ä¿å­˜åœ¨è¯¥è¿›ç¨‹çš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)<psw>PCB</psw>ä¸­ã€‚</li><li>åœ¨OSåŸºæœ¬ç‰¹å¾ä¸­ï¼Œ<psw>å¼‚æ­¥æ€§</psw>æ˜¯æŒ‡è¿›ç¨‹æ˜¯ä»¥äººä»¬ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›çš„ã€‚</li><li>1965å¹´ï¼Œè·å…°å­¦è€…Dijkstraæå‡ºçš„<psw>ä¿¡å·é‡æœºåˆ¶</psw>æ˜¯ä¸€ç§å“æœ‰æˆæ•ˆçš„è¿›ç¨‹åŒæ­¥å·¥å…·ã€‚</li><li>åŒæ­¥æœºåˆ¶å‡†åˆ™ä¸­ï¼Œ<psw>è®©æƒç­‰å¾…</psw>æ˜¯æŒ‡å½“è¿›ç¨‹ä¸èƒ½è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†æœºã€‚</li><li>è¿›ç¨‹ä¸‰ç§åŸºæœ¬çŠ¶æ€ä¸­ï¼Œ<psw>å°±ç»ªçŠ¶æ€</psw>æ˜¯æŒ‡è¿›ç¨‹å·²åˆ†é…åˆ°é™¤CPUä»¥å¤–çš„æ‰€æœ‰å¿…è¦èµ„æºã€‚</li><li>åœ¨ç´¢å¼•èŠ‚ç‚¹ä¸­è®¾ç½®é“¾æ¥å¼•ç”¨(links)è®¡æ•°çš„ç›®çš„æ˜¯ä¸ºäº†å®ç°ç›®å½•ç®¡ç†çš„<psw>æ–‡ä»¶å…±äº«</psw>åŠŸèƒ½ã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ä¸­ï¼Œ<psw>ç‹¬å è®¾å¤‡</psw>å±äºä¸´ç•Œèµ„æºï¼Œå³è¿›ç¨‹ä¸´ç•ŒåŒºè®¿é—®çš„èµ„æºã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ä¸­ï¼Œå…¸å‹çš„<psw>ç‹¬å è®¾å¤‡</psw>æœ‰æ‰“å°æœºã€ç£å¸¦æœºç­‰ã€‚</li><li>æŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ä¸­ï¼Œå…¸å‹çš„<psw>å…±äº«è®¾å¤‡</psw>æœ‰ç£ç›˜ã€å…‰ç›˜ç­‰ã€‚</li><li>åœ¨å‡è„±æœºæ‰“å°æœºç³»ç»Ÿä¸­ï¼ŒæŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ï¼Œæ˜¯å°†<psw>ç‹¬å è®¾å¤‡</psw>æ”¹é€ ä¸º<psw>å…±äº«è®¾å¤‡</psw>ã€‚</li><li>åœ¨å‡è„±æœºæ‰“å°æœºç³»ç»Ÿä¸­ï¼ŒæŒ‰è®¾å¤‡çš„å›ºæœ‰å±æ€§åˆ†ç±»ï¼Œå®ç°äº†<psw>è™šæ‹Ÿè®¾å¤‡</psw>åŠŸèƒ½ã€‚</li><li><psw>SPOOLing</psw>æŠ€æœ¯æ˜¯å¯¹è„±æœºI&#x2F;Oç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œæˆ–ç§°ä¸ºå‡è„±æœºæŠ€æœ¯ã€‚</li><li>åœ¨è¯·æ±‚åˆ†é¡µç³»ç»Ÿçš„ç¡¬ä»¶æ”¯æŒä¸­ï¼Œå½“æ‰€è¦è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜æ—¶ï¼Œç”±<psw>ç¼ºé¡µä¸­æ–­æœºæ„</psw>å®ç°ã€‚</li><li>åœ¨è¯·æ±‚åˆ†é¡µç³»ç»Ÿçš„ç¡¬ä»¶æ”¯æŒä¸­ï¼Œé¡µé¢ç½®æ¢ç®—æ³•éœ€è¦åº”ç”¨<psw>è¯·æ±‚é¡µè¡¨æœºåˆ¶</psw>å®ç°ã€‚</li><li>åœ¨è®¾å¤‡åˆ†é…ä¸­ï¼Œç”¨äºè®°å½•æ¯ä¸€ä¸ªè®¾å¤‡æƒ…å†µçš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)ï¼š<psw>DCT</psw>ã€‚</li><li>åœ¨è®¾å¤‡åˆ†é…ä¸­ï¼Œç”¨äºè®°å½•å…¨éƒ¨è®¾å¤‡æƒ…å†µçš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)ï¼š<psw>SDT</psw>ã€‚</li><li>åœ¨è®¾å¤‡åˆ†é…ä¸­ï¼Œç”¨äºè®°å½•æ¯ä¸€ä¸ªæ§åˆ¶å™¨æƒ…å†µçš„æ•°æ®ç»“æ„(è‹±æ–‡ç¼©å†™)ï¼š<psw>COCT</psw>ã€‚</li><li>å®ç°â€œ<psw>æŒ‰åå­˜å–</psw>â€æ˜¯æ–‡ä»¶ç³»ç»Ÿç›®å½•ç®¡ç†ä¸­æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚</li><li>å®ç°â€œ<psw>æŒ‰åå­˜å–</psw>â€æ˜¯æ–‡ä»¶ç³»ç»Ÿå‘ç”¨æˆ·æä¾›çš„æœ€åŸºæœ¬çš„æœåŠ¡ã€‚</li></ol>              </div>            </details><details class="folding-tag" yellow><summary> åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜ </summary>              <div class='content'>              <div class="tabs" id="åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-1">ä¸“é¢˜1</button></li><li class="tab"><button type="button" data-href="#åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-2">ä¸“é¢˜2</button></li><li class="tab"><button type="button" data-href="#åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-3">ä¸“é¢˜3</button></li><li class="tab"><button type="button" data-href="#åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-4">ä¸“é¢˜4</button></li><li class="tab"><button type="button" data-href="#åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-5">ä¸“é¢˜5</button></li><li class="tab"><button type="button" data-href="#åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-6">ä¸“é¢˜6</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-1"><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.png" alt="ä¸“é¢˜1"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-2"><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.png" alt="ä¸“é¢˜2"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-3"><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3.png" alt="ä¸“é¢˜3"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-4"><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4.png" alt="ä¸“é¢˜4"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-5"><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5.png" alt="ä¸“é¢˜5"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åŸºæœ¬æ¦‚å¿µ_åˆ†ä¸“é¢˜-6"><p><img src="https://picbed.dai2yutou.space/article_img/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/6.png" alt="ä¸“é¢˜6"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><p><img src="https://picbed.dai2yutou.space/article_img/æ“ä½œç³»ç»Ÿ/cover.png" style="width:800px"></img></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡å¿ƒä¸€è¨€ä¸Šæ‰‹ä½“éªŒ</title>
      <link href="/2023/04/04/%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E4%B8%8A%E6%89%8B%E4%BD%93%E9%AA%8C/"/>
      <url>/2023/04/04/%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E4%B8%8A%E6%89%8B%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/16.png" alt="img"></p><p>æ—¶éš”äº†18å¤©ï¼Œç»ˆäºæ”¶åˆ°äº†çŸ­ä¿¡ï¼Œ2023-4-4</p><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/11.png" alt="æ–‡å¿ƒä¸€è¨€"></p><p>ä¸»è¦æƒ³ç”¨ä¸€ä¸‹å®ƒçš„ä½œå›¾åŠŸèƒ½ï¼Œé‚£ä¹ˆå°±ä½“éªŒä¸€ä¸‹å§â€¦â€¦â€¦</p><h4 id="ç”»å‡ºæ–‡å¿ƒä¸€è¨€çš„logo"><a href="#ç”»å‡ºæ–‡å¿ƒä¸€è¨€çš„logo" class="headerlink" title="ç”»å‡ºæ–‡å¿ƒä¸€è¨€çš„logo"></a>ç”»å‡ºæ–‡å¿ƒä¸€è¨€çš„logo</h4><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/12.png" alt="ç”»å‡ºæ–‡å¿ƒä¸€è¨€çš„logo"></p><h4 id="å¸®æˆ‘ç”»é¸¡è›‹çŒé¥¼-åˆ›æ„å›¾"><a href="#å¸®æˆ‘ç”»é¸¡è›‹çŒé¥¼-åˆ›æ„å›¾" class="headerlink" title="å¸®æˆ‘ç”»é¸¡è›‹çŒé¥¼#åˆ›æ„å›¾#"></a>å¸®æˆ‘ç”»é¸¡è›‹çŒé¥¼#åˆ›æ„å›¾#</h4><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/13.png" alt="å¸®æˆ‘ç”»é¸¡è›‹çŒé¥¼#åˆ›æ„å›¾#"></p><h4 id="ç»™æˆ‘ç”»ä¸€ä¸ªä»¥ç¯®çƒã€ç¯®ç­ã€å¤©ç©ºä¸ºä¸»é¢˜ï¼Œ3Dï¼Œå…·æœ‰å‘å¾€è¿œæ–¹æ„ä¹‰"><a href="#ç»™æˆ‘ç”»ä¸€ä¸ªä»¥ç¯®çƒã€ç¯®ç­ã€å¤©ç©ºä¸ºä¸»é¢˜ï¼Œ3Dï¼Œå…·æœ‰å‘å¾€è¿œæ–¹æ„ä¹‰" class="headerlink" title="ç»™æˆ‘ç”»ä¸€ä¸ªä»¥ç¯®çƒã€ç¯®ç­ã€å¤©ç©ºä¸ºä¸»é¢˜ï¼Œ3Dï¼Œå…·æœ‰å‘å¾€è¿œæ–¹æ„ä¹‰"></a>ç»™æˆ‘ç”»ä¸€ä¸ªä»¥ç¯®çƒã€ç¯®ç­ã€å¤©ç©ºä¸ºä¸»é¢˜ï¼Œ3Dï¼Œå…·æœ‰å‘å¾€è¿œæ–¹æ„ä¹‰</h4><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/14.png" alt="ç»™æˆ‘ç”»ä¸€ä¸ªä»¥ç¯®çƒã€ç¯®ç­ã€å¤©ç©ºä¸ºä¸»é¢˜ï¼Œ3Dï¼Œå…·æœ‰å‘å¾€è¿œæ–¹æ„ä¹‰"></p><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/15.png" alt="ç»™æˆ‘ç”»ä¸€ä¸ªä»¥ç¯®çƒã€ç¯®ç­ã€å¤©ç©ºä¸ºä¸»é¢˜ï¼Œ3Dï¼Œå…·æœ‰å‘å¾€è¿œæ–¹æ„ä¹‰#åˆ›æ„å›¾#"></p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>ç”»å›¾æ–¹é¢å¯¹æˆ‘è‡ªå·±æ¥è¯´æ„Ÿè§‰èƒ½ç”¨ä½†ä¸å¤šï¼Œåº”è¯¥å¯¹æˆ‘è¿‘æœŸä¹Ÿä¼šæœ‰äº›æœ‰å¸®åŠ©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ—¥å¸¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡å¿ƒä¸€è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºç›¸å¯¹å®šä½å’Œç»å¯¹å®šä½çš„åŒºåˆ«</title>
      <link href="/2023/03/31/%E5%85%B3%E4%BA%8E%E7%9B%B8%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%92%8C%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2023/03/31/%E5%85%B3%E4%BA%8E%E7%9B%B8%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%92%8C%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/21.png" alt="1"></p><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/caseywei/article/details/81049536">å…³äºç›¸å¯¹å®šä½ä¸ç»å¯¹å®šä½çš„åŒºåˆ«_ç›¸å¯¹å®šä½å’Œç»å¯¹å®šä½çš„åŒºåˆ«_CaseyWeiçš„åšå®¢-CSDNåšå®¢</a></p></div><h2 id="ä¸€ã€ç†è®ºè§£é‡Š"><a href="#ä¸€ã€ç†è®ºè§£é‡Š" class="headerlink" title="ä¸€ã€ç†è®ºè§£é‡Š"></a>ä¸€ã€ç†è®ºè§£é‡Š</h2><p><strong>ç›¸å¯¹å®šä½</strong>ï¼šè¯¥å…ƒç´ ç›¸å¯¹äºè‡ªå·±åŸæœ‰ä½ç½®ï¼Œåç§»ä¸€å®šè·ç¦»ã€‚ç›¸å¯¹çš„æ˜¯è‡ªå·±ã€‚</p><p><strong>ç»å¯¹å®šä½</strong>ï¼šè¯¥å…ƒç´ ç›¸å¯¹äºå…¶çˆ¶å…ƒç´ ï¼Œåç§»ä¸€å®šè·ç¦»ã€‚ç›¸å¯¹çš„æ˜¯çˆ¶å…ƒç´ ï¼Œé‡ç‚¹æ˜¯è¿™ä¸ªçˆ¶å…ƒç´ ä¹Ÿéœ€è¦æ˜¯è®¾ç½®äº†positionå±æ€§ã€‚ä»æœ€è¿‘çš„çˆ¶å…ƒç´ å¼€å§‹æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°bodyä½ç½®ä¸ºæ­¢ã€‚</p><h2 id="äºŒã€ä¾‹å­"><a href="#äºŒã€ä¾‹å­" class="headerlink" title="äºŒã€ä¾‹å­"></a>äºŒã€ä¾‹å­</h2><h3 id="1ï¼‰ç›¸å¯¹å®šä½"><a href="#1ï¼‰ç›¸å¯¹å®šä½" class="headerlink" title="1ï¼‰ç›¸å¯¹å®šä½"></a>1ï¼‰ç›¸å¯¹å®šä½</h3><blockquote><p>p1è“è‰²ï¼Œp2é»„è‰²</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>ç›¸å¯¹å®šä½ï¼šç›¸å¯¹äºè‡ªå·±åŸæ¥çš„ä½ç½®ï¼Œåç§»ä¸€äº›è·ç¦»<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>ç›¸å¯¹å®šä½,ç›¸å¯¹çš„æ˜¯è‡ªå·±<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#test</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background</span>: gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*pæ ‡ç­¾æœ¬èº«ä¼šæœ‰paddingå’Œmarginå€¼*/</span></span><br><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p1</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">11</span>, <span class="number">187</span>, <span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">223</span>, <span class="number">200</span>, <span class="number">20</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œåæ•ˆæœæ˜¯ï¼š(è¿™æ—¶æ²¡æœ‰è®¾ç½®positionå±æ€§å‘¢)</p><p><img src="https://picbed.dai2yutou.space/article_img/css/3.png" alt="1"></p><p>ç„¶åï¼Œç»™p1è®¾ç½®ç›¸å¯¹å®šä½,ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.p1</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">11</span>, <span class="number">187</span>, <span class="number">200</span>);</span><br><span class="line">    <span class="comment">/*è®¾ç½®ç›¸å¯¹å®šä½*/</span></span><br><span class="line">+   <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="comment">/*ç›¸å¯¹äºå·¦è¾¹åç§»20px,ç›¸å¯¹äºä¸Šè¾¹åç§»20px*/</span></span><br><span class="line">+   <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">+   <span class="attribute">top</span>:<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œåæ•ˆæœå¦‚ä¸‹ï¼š </p><p><img src="https://picbed.dai2yutou.space/article_img/css/4.png" alt="1"></p><p>å¦‚å›¾æˆ‘ä»¬å‘ç°ï¼Œp1æ–¹å—å‘å·¦ç§»åŠ¨äº†20pxï¼Œå‘ä¸‹ç§»åŠ¨äº†20pxï¼Œå¹¶ä¸”æ˜¯ç›¸å¯¹äºè‡ªèº«åŸæ¥çš„ä½ç½®ã€‚</p><span class='p red'>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šp1è™½ç„¶ç§»åŠ¨äº†ï¼Œä½†è¿˜æ˜¯å ç€åŸæ¥çš„ä½ç½®ï¼Œå³åé¢çš„å…ƒç´ å¹¶ä¸ä¼šè¡¥ä¸Šå»ã€‚</span><h3 id="2ï¼‰ç»å¯¹å®šä½"><a href="#2ï¼‰ç»å¯¹å®šä½" class="headerlink" title="2ï¼‰ç»å¯¹å®šä½"></a>2ï¼‰ç»å¯¹å®šä½</h3><blockquote><p>p1è“è‰²ï¼Œp2é»„è‰²ï¼Œp3ç²‰è‰²ï¼Œp4ç»¿è‰²</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>ç›¸å¯¹å®šä½ï¼šç›¸å¯¹äºè‡ªå·±åŸæ¥çš„ä½ç½®ï¼Œåç§»ä¸€äº›è·ç¦»<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>ç›¸å¯¹å®šä½,ç›¸å¯¹çš„æ˜¯è‡ªå·±<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p3&quot;</span>&gt;</span>ç»å¯¹å®šä½ï¼šç›¸å¯¹äºè‡ªå·±çˆ¶å…ƒç´ çš„ä½ç½®ï¼Œåç§»ä¸€äº›è·ç¦»<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p4&quot;</span>&gt;</span>ç»å¯¹å®šä½,ç›¸å¯¹çš„æ˜¯çˆ¶å…ƒç´ <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#test</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background</span>: gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*pæ ‡ç­¾æœ¬èº«ä¼šæœ‰paddingå’Œmarginå€¼*/</span></span><br><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p1</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">11</span>, <span class="number">187</span>, <span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">223</span>, <span class="number">200</span>, <span class="number">20</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#test2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">67</span>, <span class="number">62</span>, <span class="number">63</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p3</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">231</span>, <span class="number">116</span>, <span class="number">150</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p4</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">90px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">79</span>, <span class="number">163</span>, <span class="number">105</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬åˆæ–°å¢äº†ä¸€ä¸ªç›’å­ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªp1ï¼Œå°†p1çš„ç›¸å¯¹å®šä½åˆ é™¤ï¼Œæœ€ç»ˆå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/css/5.png" alt="1"></p><p>ç„¶åæˆ‘ä»¬åœ¨ç»™p3è®¾ç½®ç»å¯¹å®šä½</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.p3</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">231</span>, <span class="number">116</span>, <span class="number">150</span>);</span><br><span class="line">    <span class="comment">/* è¨­ç½®ç»å¯¹å®šä½ */</span></span><br><span class="line">+   <span class="attribute">position</span>: absolute;</span><br><span class="line">+   <span class="attribute">left</span>: <span class="number">30px</span>;</span><br><span class="line">+   <span class="attribute">top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/css/6.png" alt="1"></p><p>å¦‚å›¾æˆ‘ä»¬å‘ç°è·Ÿæˆ‘ä»¬æƒ³çš„å¥½åƒä¸ä¸€æ ·ï¼Œp3æ–¹å—æ€ä¹ˆè·‘ä¸Šè¾¹å»äº†ï¼Ÿï¼Ÿï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼šè™½ç„¶text2æ˜¯p3çš„çˆ¶çº§å…ƒç´ ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“è®¾ç½®ç»å¯¹å®šä½åï¼Œç§»åŠ¨çš„ä½ç½®æ˜¯ç›¸å¯¹çˆ¶ç±»çš„ï¼Œä½†æ˜¯æ­¤æ—¶text2å¹¶æ²¡æœ‰è®¾ç½®positionå±æ€§ï¼Œæ‰€æœ‰p3å°±ä¼šç»§ç»­å¾€ä¸Šæ‰¾ï¼Œæ‰¾text2çš„çˆ¶å…ƒç´ ï¼Œå¦‚æœä¸€ç›´æ²¡æœ‰positionå±æ€§ï¼Œé‚£ä¹ˆå°±æ‰¾åˆ°bodyåœæ­¢ï¼Œç„¶åä»¥bodyä½œä¸ºç›¸å¯¹å…ƒç´ ç§»åŠ¨ï¼Œäºæ˜¯å°±å‡ºç°äº†ä¸Šé¢çš„æ•ˆæœã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦p3ç›¸å¯¹äºtext2åç§»ï¼Œé‚£ä¹ˆåªéœ€è¦å¯¹text2è®¾ç½®positionå±æ€§å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#test2</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">67</span>, <span class="number">62</span>, <span class="number">63</span>);</span><br><span class="line">+   <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬å¢åŠ äº†position:relativeå±æ€§ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p><span class='p red'>æ³¨æ„ï¼šç»å¯¹å®šä½ä¸å æ®åŸæ¥çš„ä½ç½®ï¼Œæ‰€ä»¥ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°p4å›¾ç‰‡åœ¨text2å·¦ä¸Šè§’ï¼Œä¹Ÿå°±æ˜¯p3åŸæ¥çš„ä½ç½®ã€‚</span>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡äº‘å¼€å‘ä¸­çš„å¢åˆ æŸ¥æ”¹æ“ä½œ</title>
      <link href="/2023/03/30/%E5%BE%AE%E4%BF%A1%E4%BA%91%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9%E6%93%8D%E4%BD%9C/"/>
      <url>/2023/03/30/%E5%BE%AE%E4%BF%A1%E4%BA%91%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/20.png" alt="1"></p><div class="note success simple"><p><strong>å®˜æ–¹æ–‡æ¡£ğŸ“¢ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/Collection.html">Collection | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></strong></p></div><h2 id="ä¸€ã€åº•å±‚åŸç†"><a href="#ä¸€ã€åº•å±‚åŸç†" class="headerlink" title="ä¸€ã€åº•å±‚åŸç†"></a>ä¸€ã€åº•å±‚åŸç†</h2><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>åœ¨å­¦ä¹ å¾®ä¿¡äº‘å¼€å‘ä¸­çš„å¢åˆ æŸ¥æ”¹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦äº†è§£å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“åº•å±‚åŸç†ã€‚</p></div><p>å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“åº•å±‚åŸç†ä½¿ç”¨çš„æ˜¯è…¾è®¯äº‘çš„äº‘æ•°æ®åº“æœåŠ¡ã€‚äº‘æ•°æ®åº“æ˜¯ä¸€ç§åŸºäºäº‘è®¡ç®—çš„æ•°æ®åº“æœåŠ¡ï¼Œæä¾›äº†é«˜å¯ç”¨æ€§ã€é«˜å¯æ‰©å±•æ€§ã€è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ç­‰åŠŸèƒ½ã€‚å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡æ˜¯åœ¨è…¾è®¯äº‘çš„äº‘æ•°æ®åº“æœåŠ¡ä¸Šè¿›è¡Œçš„å°è£…å’Œå®šåˆ¶ï¼Œä½¿å…¶æ›´ç¬¦åˆå¾®ä¿¡å°ç¨‹åºçš„å¼€å‘éœ€æ±‚ã€‚</p><p>å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡é‡‡ç”¨çš„æ˜¯éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨æ¨¡å‹ï¼Œå³NoSQLã€‚NoSQLæ•°æ®åº“ä¸ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ä¸åŒï¼Œä¸ä½¿ç”¨ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨å…¶ä»–æ•°æ®æŸ¥è¯¢è¯­è¨€æˆ–APIæ¥è®¿é—®å’Œç®¡ç†æ•°æ®ã€‚å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡ä½¿ç”¨çš„æ˜¯æ–‡æ¡£å‹æ•°æ®åº“ï¼Œå³ä½¿ç”¨JSONæ ¼å¼å­˜å‚¨æ•°æ®ï¼Œæ¯ä¸ªæ–‡æ¡£ç›¸å½“äºä¸€æ¡è®°å½•ã€‚</p><p>å¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“æœåŠ¡æ”¯æŒå®æ—¶åŒæ­¥å’Œæ•°æ®è®¿é—®æƒé™æ§åˆ¶ç­‰åŠŸèƒ½ã€‚åŒæ—¶ï¼Œå®ƒè¿˜æ”¯æŒäº‘å‡½æ•°è§¦å‘å™¨ï¼Œå¯ä»¥åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘äº‘å‡½æ•°ã€‚è¿™ç§è§¦å‘å™¨å¯ä»¥ç”¨äºå®ç°å®æ—¶é€šçŸ¥ã€è‡ªåŠ¨åŒ–å¤„ç†å’Œæ•°æ®åˆ†æç­‰åŠŸèƒ½ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå¾®ä¿¡äº‘å¼€å‘ä¸­çš„æ•°æ®åº“åº•å±‚åŸç†é‡‡ç”¨äº†è…¾è®¯äº‘çš„äº‘æ•°æ®åº“æœåŠ¡ï¼Œä½¿ç”¨æ–‡æ¡£å‹æ•°æ®åº“å­˜å‚¨æ¨¡å‹ï¼Œæ”¯æŒå®æ—¶åŒæ­¥å’Œæ•°æ®è®¿é—®æƒé™æ§åˆ¶ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜æ”¯æŒäº‘å‡½æ•°è§¦å‘å™¨ã€‚</p><h2 id="äºŒã€åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ"><a href="#äºŒã€åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ" class="headerlink" title="äºŒã€åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ"></a>äºŒã€åŸºæœ¬å¢åˆ æŸ¥æ”¹æ“ä½œ</h2><p>æˆ‘ä»¬åœ¨äº‘æ•°æ®åº“ä¸­å®šä¹‰äº†<code>getData</code>é›†åˆï¼Œé‡Œé¢åˆå§‹æ”¾äº†ä¸¤æ¡è®°å½•ï¼Œæ¯æ¡è®°å½•æœ‰ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä¸º<code>_idã€usernameã€password</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/1.png" alt="1"></p><p>æˆ‘ä»¬åœ¨jsæ–‡ä»¶ä¸­å®šä¹‰äº†å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰dbå˜é‡è¿æ¥æ•°æ®åº“ï¼Œå¹¶è¿æ¥åˆ°getDataè¿™ä¸ªè¡¨</span></span><br><span class="line"><span class="keyword">const</span> db = wx.<span class="property">cloud</span>.<span class="title function_">database</span>().<span class="title function_">collection</span>(<span class="string">&quot;getData&quot;</span>)</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">//é¡µé¢çš„åˆå§‹æ•°æ®</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&quot;&quot;</span>,<span class="comment">//åˆå§‹åŒ–usernameæ•°æ®ï¼Œç”¨æ¥åˆ°æ•°æ®åº“ä¸­ä¼ å‚usernameå­—æ®µ</span></span><br><span class="line">    <span class="attr">psd</span>:<span class="string">&quot;&quot;</span><span class="comment">//åˆå§‹åŒ–psdæ•°æ®ï¼Œç”¨æ¥åˆ°æ•°æ®åº“ä¸­ä¼ å‚passwordå­—æ®µ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="2-1-å¢åŠ "><a href="#2-1-å¢åŠ " class="headerlink" title="2.1 å¢åŠ "></a>2.1 å¢åŠ </h3><p>wxmlæ–‡ä»¶ï¼Œä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œä¸€ä¸ªæ·»åŠ æŒ‰é’®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥è´¦å·&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;addName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥å¯†ç &quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;addPsd&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;addData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">   <span class="comment">//è·å–æ·»åŠ çš„è´¦å·</span></span><br><span class="line">  <span class="attr">addName</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">username</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//è·å–æ·»åŠ çš„å¯†ç </span></span><br><span class="line">  <span class="attr">addPsd</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">psd</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//ç‚¹å‡»æ·»åŠ æŒ‰é’®æ·»åŠ æ“ä½œ</span></span><br><span class="line">  <span class="comment">//å…¶ä¸­dataé‡Œè¾¹ä¸ºä¼ å…¥çš„å‚æ•°ï¼Œä¸ºjsonæ ¼å¼ï¼Œï¼šå‰é¢çš„ä¸ºæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œåé¢çš„ä¸ºè¦ä¼ å…¥çš„å€¼ï¼Œ</span></span><br><span class="line">  <span class="comment">//æ­¤æ—¶å°±å¯ä»¥å°†æ•°æ®æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">  <span class="attr">addData</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    db.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">username</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">username</span>,</span><br><span class="line">        <span class="attr">password</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">psd</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>,res);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ·»åŠ å¤±è´¥&quot;</span>,err);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†è¾“å…¥è´¦å·å’Œå¯†ç åï¼Œç‚¹å‡»æ·»åŠ æŒ‰é’®ï¼Œä¼šåœ¨getDataé›†åˆä¸­ç”Ÿæˆä¸€ä¸ªæ–°çš„è®°å½•ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼Œ_idä¸ºè‡ªåŠ¨ç”Ÿæˆï¼Œusernameã€passwordä¸ºæˆ‘ä»¬è¾“å…¥çš„å†…å®¹ã€‚</p></blockquote><p>æ·»åŠ æˆåŠŸçš„ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/3.png" alt="1"></p><h3 id="2-2-åˆ é™¤"><a href="#2-2-åˆ é™¤" class="headerlink" title="2.2 åˆ é™¤"></a>2.2 åˆ é™¤</h3><p>wxmlæ–‡ä»¶ï¼Œä¸ºä¸€ä¸ªè¾“å…¥è´¦å·çš„inputå’Œä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼›</p><p>æˆ‘ä»¬é€‰æ‹©é€šè¿‡è¾“å…¥çš„è´¦å·åˆ é™¤</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥è´¦å·&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;del&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;delData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> &gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">delData</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">  db.<span class="title function_">where</span>(&#123;</span><br><span class="line">    <span class="comment">//è¿™æ˜¯æ˜¯æ ¹æ®whereè¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢é›†åˆä¸­usernameå­—æ®µçš„å€¼ä¸ºthis.data.usernameçš„è®°å½•</span></span><br><span class="line">    <span class="attr">username</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">username</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">remove</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>,res)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤å¤±è´¥&quot;</span>,err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬åœ¨è¾“å…¥è´¦å·æ—¶ï¼Œä¼šè°ƒç”¨delå‡½æ•°ï¼Œå°†è¾“å…¥çš„è´¦å·èµ‹å€¼ç»™äº†dataé‡Œè¾¹çš„usernameï¼Œå½“æˆ‘ä»¬ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œä¼šè°ƒç”¨delDataæ–¹æ³•ï¼Œæ ¹æ®dataé‡Œé¢çš„usernameï¼Œåˆ°æ•°æ®åº“ä¸­æ‰¾usernameå­—æ®µç›¸ç­‰çš„è®°å½•ï¼Œå¹¶æ‰§è¡Œremove()å‡½æ•°ï¼Œåˆ é™¤æ­¤æ¡æ•°æ®ï¼Œ.thenæ˜¯åˆ é™¤æˆåŠŸåæ‰§è¡Œçš„ï¼Œ.catchæ˜¯åˆ é™¤å¤±è´¥æ‰§è¡Œçš„ã€‚</p></blockquote><p>åˆ é™¤æˆåŠŸçš„ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/2.png" alt="1"></p><h3 id="2-3-ä¿®æ”¹"><a href="#2-3-ä¿®æ”¹" class="headerlink" title="2.3 ä¿®æ”¹"></a>2.3 ä¿®æ”¹</h3><p>wxmlæ–‡ä»¶ï¼Œä¸¤ä¸ªinputï¼Œä¸€ä¸ªä¿®æ”¹æŒ‰é’®ï¼Œç¬¬ä¸€ä¸ªinputéœ€å¡«å…¥è¦ä¿®æ”¹çš„è´¦å·ï¼Œç¬¬äºŒä¸ªå¡«å…¥ä¿®æ”¹åçš„å¯†ç ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥è¦ä¿®æ”¹è´¦å·çš„ç”¨æˆ·å&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;updUsername&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥ä¿®æ”¹åçš„å¯†ç &quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;updPsd&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;updData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> &gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">updUsername</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">username</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">updPsd</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">psd</span>:e.<span class="property">detail</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">updData</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    db.<span class="title function_">where</span>(&#123;</span><br><span class="line">      <span class="attr">username</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">username</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">update</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">password</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">psd</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>,res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¿®æ”¹å¤±è´¥&quot;</span>,err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬è¾“å…¥è´¦å·åå’Œå¯†ç æ—¶ï¼Œä¼šè°ƒç”¨updUsernameå’ŒupdPsdå‡½æ•°ï¼Œå°†è¾“å…¥çš„å†…å®¹èµ‹å€¼åˆ°dataé‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬ç‚¹å‡»ä¿®æ”¹æŒ‰é’®åï¼Œä¼šè°ƒç”¨updDataå‡½æ•°ï¼Œç„¶åæ ¹æ®whereæŸ¥è¯¢è¯­å¥ï¼Œåœ¨getDataé›†åˆä¸­æŸ¥æ‰¾usernamå­—æ®µçš„å€¼ä¸åˆšåˆšè¾“å…¥çš„è´¦å·åç›¸ç­‰çš„è®°å½•ï¼Œå¹¶æ ¹æ®updata()å‡½æ•°å°†passwordå­—æ®µçš„å€¼ä¿®æ”¹ä¸ºthis.data.psdã€‚</p></blockquote><p>ä¿®æ”¹æˆåŠŸçš„ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/4.png" alt="1"></p><h3 id="2-4-æŸ¥è¯¢"><a href="#2-4-æŸ¥è¯¢" class="headerlink" title="2.4 æŸ¥è¯¢"></a>2.4 æŸ¥è¯¢</h3><p>wxmlæ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;getData&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getData</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    db.<span class="title function_">get</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span>,res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æŸ¥è¯¢å¤±è´¥&quot;</span>,err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬ç‚¹å‡»æŸ¥è¯¢æŒ‰é’®åï¼Œä¼šå¾—åˆ°æ‰€ä»¥ç»“æœï¼Œç»“æœä¼šå­˜æ”¾åœ¨resçš„dataä¸‹</p></blockquote><p>æŸ¥è¯¢æˆåŠŸç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/5.png" alt="1"></p><h2 id="ä¸‰ã€whereæ¡ä»¶æŸ¥è¯¢"><a href="#ä¸‰ã€whereæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="ä¸‰ã€whereæ¡ä»¶æŸ¥è¯¢"></a>ä¸‰ã€whereæ¡ä»¶æŸ¥è¯¢</h2><div class="note success simple"><p>å…·ä½“æŸ¥çœ‹ğŸ“¢ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/Command.html">Command | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p></div><div class="note warning flag flat"><p>è¿™æ˜¯æˆ‘ä»¬å®šä¹‰äº†<code>db=wx.cloud.database()</code>ï¼Œä¸ä¸Šæ–‡ä¸åŒ</p></div><p>å¾®ä¿¡å°ç¨‹åºçš„å¢åˆ æŸ¥æ”¹æ“ä½œéœ€è¦ä½¿ç”¨å°ç¨‹åºäº‘å¼€å‘çš„æ•°æ®åº“ APIï¼Œåœ¨ä½¿ç”¨ where æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ã€æ›´æ–°æˆ–åˆ é™¤æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>1.where æ¡ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§åä¸ºå­—æ®µåï¼Œå±æ€§å€¼ä¸ºåŒ¹é…æ¡ä»¶ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ name å­—æ®µç­‰äºâ€œå¼ ä¸‰â€çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>2.where æ¡ä»¶å¯ä»¥ä½¿ç”¨å¤šä¸ªå±æ€§ï¼Œå¤šä¸ªå±æ€§ä¹‹é—´çš„å…³ç³»æ˜¯â€œä¸â€çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ name å­—æ®µç­‰äºâ€œå¼ ä¸‰â€ä¸” age å­—æ®µå¤§äºç­‰äº 18 çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: db.<span class="property">command</span>.<span class="title function_">gte</span>(<span class="number">18</span>)</span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.command.gte(18) è¡¨ç¤º age å¤§äºç­‰äº 18ã€‚</p><p>3.where æ¡ä»¶æ”¯æŒå¤šç§æ¯”è¾ƒæ“ä½œç¬¦ï¼ŒåŒ…æ‹¬ï¼šç­‰äºï¼ˆeqï¼‰ã€ä¸ç­‰äºï¼ˆneqï¼‰ã€å°äºï¼ˆltï¼‰ã€å°äºç­‰äºï¼ˆlteï¼‰ã€å¤§äºï¼ˆgtï¼‰ã€å¤§äºç­‰äºï¼ˆgteï¼‰ã€åŒ…å«äºï¼ˆinï¼‰ã€ä¸åŒ…å«äºï¼ˆninï¼‰ã€ä»¥ä»€ä¹ˆå¼€å¤´ï¼ˆregexï¼‰ã€ä»¥ä»€ä¹ˆç»“å°¾ï¼ˆregexï¼‰ã€åŒ…å«ï¼ˆandï¼‰ã€æˆ–è€…ï¼ˆorï¼‰ç­‰ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ age å­—æ®µå¤§äºç­‰äº 18 ä¸”å°äºç­‰äº 30 çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">age</span>: db.<span class="property">command</span>.<span class="title function_">and</span>(db.<span class="property">command</span>.<span class="title function_">gte</span>(<span class="number">18</span>), db.<span class="property">command</span>.<span class="title function_">lte</span>(<span class="number">30</span>))</span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.command.and() è¡¨ç¤ºâ€œä¸â€çš„å…³ç³»ï¼Œdb.command.gte() è¡¨ç¤ºå¤§äºç­‰äºï¼Œdb.command.lte() è¡¨ç¤ºå°äºç­‰äºã€‚</p><p>4.where æ¡ä»¶æ”¯æŒåµŒå¥—ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡åµŒå¥—çš„æ–¹å¼è¡¨ç¤ºå¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ age å­—æ®µå¤§äºç­‰äº 18 ä¸”å°äºç­‰äº 30ï¼Œä¸” (name å­—æ®µç­‰äºâ€œå¼ ä¸‰â€æˆ–è€… gender å­—æ®µç­‰äºâ€œå¥³â€) çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">age</span>: db.<span class="property">command</span>.<span class="title function_">and</span>(db.<span class="property">command</span>.<span class="title function_">gte</span>(<span class="number">18</span>), db.<span class="property">command</span>.<span class="title function_">lte</span>(<span class="number">30</span>)),</span><br><span class="line">  db.<span class="property">command</span>.<span class="title function_">or</span>([&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;å¥³&#x27;</span></span><br><span class="line">  &#125;])</span><br><span class="line">&#125;).<span class="title function_">get</span>()</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.command.or() è¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»ï¼Œå¯ä»¥å°†å¤šä¸ªæ¡ä»¶ç”¨æ•°ç»„è¡¨ç¤ºã€‚</p><h2 id="å››ã€å¦‚ä½•è·å–å‰ç«¯é¡µé¢ç‚¹å‡»çš„æŸæ¡è®°å½•çš„ä¿¡æ¯ï¼Ÿ"><a href="#å››ã€å¦‚ä½•è·å–å‰ç«¯é¡µé¢ç‚¹å‡»çš„æŸæ¡è®°å½•çš„ä¿¡æ¯ï¼Ÿ" class="headerlink" title="å››ã€å¦‚ä½•è·å–å‰ç«¯é¡µé¢ç‚¹å‡»çš„æŸæ¡è®°å½•çš„ä¿¡æ¯ï¼Ÿ"></a>å››ã€å¦‚ä½•è·å–å‰ç«¯é¡µé¢ç‚¹å‡»çš„æŸæ¡è®°å½•çš„ä¿¡æ¯ï¼Ÿ</h2><blockquote><p>å½“æˆ‘ä»¬å°†æ•°æ®åº“ä¸­ä¸€ä¸ªé›†åˆçš„æ•°æ®åˆ©ç”¨forå¾ªç¯åˆ°å‰ç«¯é¡µé¢å±•ç¤ºçš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬æƒ³ç‚¹å‡»ååˆ é™¤å¯¹åº”çš„è®°å½•ï¼Œå¦‚ä½•æ“ä½œï¼Ÿ</p></blockquote><p>å¯ä»¥ç»™æ¯ä¸ªå±•ç¤ºçš„æ•°æ®ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è·å–è¢«ç‚¹å‡»çš„æ•°æ®çš„ä¿¡æ¯ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾å±•ç¤ºçš„æ•°æ®æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥åœ¨æ¨¡æ¿ä¸­ç»™æ¯ä¸ªæ•°æ®é¡¹ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;dataList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.age&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>dataList</code> æ˜¯æ•°æ®æ•°ç»„ï¼Œ<code>item</code> æ˜¯æ¯ä¸ªæ•°æ®é¡¹ï¼Œ<code>handleClick</code> æ˜¯ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><p>äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ <code>event</code> å‚æ•°è·å–å½“å‰ç‚¹å‡»çš„æ•°æ®é¡¹çš„ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">handleClick</span>: <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> item = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">item</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>è·å–åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åå°è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œäº†ï¼</p><p>å…¶ä¸­ï¼Œ<code>event.currentTarget</code> è¡¨ç¤ºå½“å‰è§¦å‘äº‹ä»¶çš„ç»„ä»¶ï¼Œ<code>dataset</code> æ˜¯ç»„ä»¶ä¸Šçš„è‡ªå®šä¹‰æ•°æ®é›†åˆï¼Œå¯ä»¥é€šè¿‡ <code>event.currentTarget.dataset</code> è·å–åˆ°å½“å‰ç»„ä»¶çš„è‡ªå®šä¹‰æ•°æ®ã€‚åœ¨ä¸Šé¢çš„æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªæ•°æ®é¡¹ä¸Šç»‘å®šä¸€ä¸ª <code>data-item</code> å±æ€§ï¼Œå­˜å‚¨å½“å‰æ•°æ®é¡¹çš„ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="attr">wx</span>:<span class="keyword">for</span>=<span class="string">&quot;&#123;&#123;dataList&#125;&#125;&quot;</span> <span class="attr">wx</span>:key=<span class="string">&quot;id&quot;</span> bindtap=<span class="string">&quot;handleClick&quot;</span> data-item=<span class="string">&quot;&#123;&#123;item&#125;&#125;&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.age&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œå°±å¯ä»¥é€šè¿‡ <code>event.currentTarget.dataset.item</code> è·å–å½“å‰ç‚¹å‡»çš„æ•°æ®é¡¹çš„ä¿¡æ¯äº†ã€‚</p><h2 id="äº”ã€è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹"><a href="#äº”ã€è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹" class="headerlink" title="äº”ã€è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹"></a>äº”ã€è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹</h2><h3 id="5-1-wx-cloud-callFunction"><a href="#5-1-wx-cloud-callFunction" class="headerlink" title="5.1 wx.cloud.callFunction"></a>5.1 wx.cloud.callFunction</h3><p><code>wx.cloud.callFunction</code> æ˜¯å¾®ä¿¡å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°çš„æ–¹æ³•ï¼Œå®ƒçš„å‚æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ul><li><code>name</code>ï¼šäº‘å‡½æ•°åç§°ï¼Œå¿…å¡«é¡¹ã€‚</li><li><code>data</code>ï¼šä¼ é€’ç»™äº‘å‡½æ•°çš„å‚æ•°ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>config</code>ï¼šé…ç½®é€‰é¡¹ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>success</code>ï¼šæˆåŠŸå›è°ƒå‡½æ•°ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>fail</code>ï¼šå¤±è´¥å›è°ƒå‡½æ•°ï¼Œå¯é€‰é¡¹ã€‚</li><li><code>complete</code>ï¼šå®Œæˆå›è°ƒå‡½æ•°ï¼Œå¯é€‰é¡¹ã€‚</li></ul><p>å…¶ä¸­ï¼Œ<code>name</code> å‚æ•°æŒ‡å®šè¦è°ƒç”¨çš„äº‘å‡½æ•°çš„åç§°ï¼Œæ˜¯å¿…å¡«é¡¹ã€‚<code>data</code> å‚æ•°æ˜¯ä¼ é€’ç»™äº‘å‡½æ•°çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ç­‰ã€‚<code>config</code> å‚æ•°æ˜¯é…ç½®é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®è¶…æ—¶æ—¶é—´ã€ç¯å¢ƒ ID ç­‰ã€‚<code>success</code>ã€<code>fail</code> å’Œ <code>complete</code> å‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œåˆ†åˆ«åœ¨è°ƒç”¨æˆåŠŸã€è°ƒç”¨å¤±è´¥å’Œè°ƒç”¨å®Œæˆæ—¶æ‰§è¡Œã€‚</p><p>ğŸ“Œå…·ä½“æ¥è¯´ï¼Œ<code>config</code> å‚æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªé€‰é¡¹ï¼š</p><ul><li><code>env</code>ï¼šæŒ‡å®šäº‘ç¯å¢ƒ IDï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨å½“å‰å°ç¨‹åºçš„äº‘ç¯å¢ƒ IDã€‚</li><li><code>timeout</code>ï¼šè°ƒç”¨äº‘å‡½æ•°çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œé»˜è®¤ä¸º 3000 æ¯«ç§’ã€‚</li></ul><p>ğŸ“Œâ€‹<code>data</code>å‚æ•°å…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><code>action</code>ï¼šè¡¨ç¤ºè¦æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚<code>action: &#39;add&#39;</code>æˆ–è€…<code>action:&#39;delete&#39;</code>ç­‰ç­‰</li><li><code>data</code>ï¼šè¡¨ç¤ºè¦å¤„ç†çš„æ•°æ®ï¼Œä¾‹å¦‚ <code>&#123;name: &#39;å°æ˜&#39;, age: 18&#125;</code> è¡¨ç¤ºè¦æ·»åŠ çš„æ•°æ®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†åå­—å’Œå¹´é¾„ä¸¤ä¸ªå±æ€§ã€‚</li></ul><h3 id="5-2-äº‘å‡½æ•°"><a href="#5-2-äº‘å‡½æ•°" class="headerlink" title="5.2 äº‘å‡½æ•°"></a>5.2 äº‘å‡½æ•°</h3><p>å¾®ä¿¡å°ç¨‹åºä¸­çš„äº‘å‡½æ•°æ˜¯ä¸€ç§åœ¨äº‘ç«¯è¿è¡Œçš„ JavaScript ä»£ç ï¼Œå®ƒå¯ä»¥è¢«å°ç¨‹åºè°ƒç”¨ï¼Œç”¨äºå¤„ç†ä¸€äº›å¤æ‚çš„ä¸šåŠ¡é€»è¾‘æˆ–éœ€è¦è®¿é—®æ•æ„Ÿæ•°æ®çš„æ“ä½œã€‚ä¸ä¼ ç»Ÿçš„å®¢æˆ·ç«¯ä»£ç ä¸åŒï¼Œäº‘å‡½æ•°ä¸ä¼šè¢«æ‰“åŒ…åˆ°å°ç¨‹åºä¸­ï¼Œè€Œæ˜¯åœ¨äº‘ç«¯è¿è¡Œï¼Œå¯ä»¥åœ¨å¤šä¸ªå°ç¨‹åºä¸­å…±äº«ä½¿ç”¨ã€‚</p><p>é€šè¿‡äº‘å‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å°ç¨‹åºä¸­ä½¿ç”¨äº‘ç«¯æ•°æ®åº“ã€äº‘å­˜å‚¨ã€äº‘å‡½æ•°ç­‰äº‘æœåŠ¡ï¼Œå¹¶åœ¨äº‘ç«¯å®Œæˆæ•°æ®çš„å¢åˆ æŸ¥æ”¹ç­‰æ“ä½œã€‚äº‘å‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨äº‘æœåŠ¡ APIï¼Œä¹Ÿå¯ä»¥é€šè¿‡äº‘å‡½æ•° SDK æ¥è®¿é—®äº‘æœåŠ¡ã€‚</p><p>ä½¿ç”¨äº‘å‡½æ•°å¯ä»¥å°†ä¸€äº›å¤æ‚çš„è®¡ç®—ã€æ•°æ®å¤„ç†ã€ä¸šåŠ¡é€»è¾‘ç­‰æ“ä½œä»å®¢æˆ·ç«¯ç§»åŠ¨åˆ°äº‘ç«¯ï¼Œå‡è½»å®¢æˆ·ç«¯çš„è´Ÿæ‹…ï¼Œæé«˜å°ç¨‹åºçš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚åŒæ—¶ï¼Œäº‘å‡½æ•°çš„è¿è¡Œç¯å¢ƒæ˜¯åœ¨å¾®ä¿¡çš„å®‰å…¨æ²™ç®±ä¸­ï¼Œä¿è¯äº†ä»£ç çš„å®‰å…¨æ€§ï¼Œå¯ä»¥è®¿é—®å°ç¨‹åºçš„æ•æ„Ÿæ•°æ®è€Œä¸ä¼šæ³„éœ²ã€‚</p><p>ä½¿ç”¨äº‘å‡½æ•°éœ€è¦å…ˆåœ¨å°ç¨‹åºç®¡ç†åå°å¼€é€šäº‘å¼€å‘åŠŸèƒ½ï¼Œå¹¶åœ¨å¼€å‘å·¥å…·ä¸­åˆ›å»ºäº‘å‡½æ•°ã€‚ç„¶åï¼Œå¼€å‘è€…å¯ä»¥åœ¨äº‘å‡½æ•°ä¸­ç¼–å†™ JavaScript ä»£ç ï¼Œä½¿ç”¨äº‘å‡½æ•° SDK è®¿é—®äº‘æœåŠ¡ï¼Œæˆ–ç›´æ¥è°ƒç”¨äº‘æœåŠ¡ APIã€‚åœ¨å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°æ—¶ï¼Œå¯ä»¥ä¼ é€’å‚æ•°ç»™äº‘å‡½æ•°ï¼Œäº‘å‡½æ•°å¯ä»¥æ¥æ”¶å¹¶å¤„ç†å‚æ•°ï¼Œç„¶åè¿”å›ç»“æœç»™å°ç¨‹åºã€‚</p><p>åœ¨äº‘å‡½æ•°ä¸­ï¼Œå…¥å£å‡½æ•°çš„å‚æ•°åŒ…æ‹¬ <code>event</code> å’Œ <code>context</code> ä¸¤ä¸ªå‚æ•°ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨äº†å½“å‰äº‘å‡½æ•°è¢«è§¦å‘æ—¶çš„äº‹ä»¶å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ<code>event</code> å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«äº†äº‹ä»¶ä¿¡æ¯çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†è°ƒç”¨äº‘å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°ï¼Œä¾‹å¦‚å°ç¨‹åºè°ƒç”¨äº‘å‡½æ•°æ—¶ä¼ é€’çš„ <code>data</code> å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>event</code> å‚æ•°æ¥è·å–ä¼ é€’çš„æ•°æ®ï¼Œç„¶åæ ¹æ®ä¸åŒçš„æ“ä½œè¿›è¡Œå¤„ç†ã€‚</p><p>è€Œ <code>context</code> å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«äº†ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†å½“å‰äº‘å‡½æ•°çš„ä¸€äº›å…ƒæ•°æ®ï¼Œä¾‹å¦‚æ‰€å±ç¯å¢ƒ IDã€å½“å‰æ—¶é—´æˆ³ã€è¯·æ±‚ ID ç­‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>context</code> å‚æ•°æ¥è·å–å½“å‰äº‘å‡½æ•°çš„ä¸€äº›å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚è·å–å½“å‰æ—¶é—´æˆ³ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªäº‘å‡½æ•°çš„å…¥å£å‡½æ•°ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(event) <span class="comment">// æ‰“å°ä¼ é€’çš„å‚æ•°</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(context) <span class="comment">// æ‰“å°ä¸Šä¸‹æ–‡ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> å¤„ç†ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>console.log</code> æ‰“å°äº† <code>event</code> å’Œ <code>context</code> ä¸¤ä¸ªå‚æ•°ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æ¥è·å–ä¼ é€’çš„æ•°æ®å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç„¶åæ ¹æ®ä¸åŒçš„æ“ä½œè¿›è¡Œå¤„ç†ã€‚</p><h3 id="5-3-ç¤ºä¾‹"><a href="#5-3-ç¤ºä¾‹" class="headerlink" title="5.3 ç¤ºä¾‹"></a>5.3 ç¤ºä¾‹</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¾®ä¿¡å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œå¢åˆ æŸ¥æ”¹çš„ä»£ç ç¤ºä¾‹ï¼š</p><ol><li>åœ¨å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨é¡µé¢ä¸­è°ƒç”¨äº‘å‡½æ•°</span></span><br><span class="line">wx.<span class="property">cloud</span>.<span class="title function_">callFunction</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;crud&#x27;</span>, <span class="comment">// äº‘å‡½æ•°åç§°</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">action</span>: <span class="string">&#x27;add&#x27;</span>, <span class="comment">// è¦æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚æ·»åŠ æ•°æ®</span></span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="comment">// è¦æ·»åŠ çš„æ•°æ®</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å°æ˜&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">result</span>) <span class="comment">// æ‰“å°äº‘å‡½æ•°è¿”å›çš„ç»“æœ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨äº‘å‡½æ•°ä¸­å¤„ç†æ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> cloud = <span class="built_in">require</span>(<span class="string">&#x27;wx-server-sdk&#x27;</span>)</span><br><span class="line">cloud.<span class="title function_">init</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = cloud.<span class="title function_">database</span>() <span class="comment">// è·å–æ•°æ®åº“å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‘å‡½æ•°å…¥å£å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">main</span> = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> action = event.<span class="property">action</span> <span class="comment">// è·å–è¦æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line">  <span class="keyword">const</span> data = event.<span class="property">data</span> <span class="comment">// è·å–è¦å¤„ç†çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (action) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">addData</span>(data) <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;delete&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">deleteData</span>(data) <span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;update&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">updateData</span>(data) <span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;get&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">getData</span>(data) <span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;unknown action&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">addData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">deleteData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">doc</span>(data.<span class="property">_id</span>).<span class="title function_">remove</span>()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">doc</span>(data.<span class="property">_id</span>).<span class="title function_">update</span>(&#123;</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;users&#x27;</span>).<span class="title function_">where</span>(data).<span class="title function_">get</span>()</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å°ç¨‹åºä¸­è°ƒç”¨äº‘å‡½æ•°æ—¶ä¼ å…¥äº†è¦æ‰§è¡Œçš„æ“ä½œå’Œè¦å¤„ç†çš„æ•°æ®ï¼Œç„¶ååœ¨äº‘å‡½æ•°ä¸­æ ¹æ®ä¸åŒçš„æ“ä½œè¿›è¡Œå¢åˆ æŸ¥æ”¹çš„æ“ä½œï¼Œå¹¶è¿”å›æ“ä½œç»“æœã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹å’Œæ‰©å±•ã€‚</p><h2 id="å…­ã€æ¨¡ç³ŠæŸ¥è¯¢"><a href="#å…­ã€æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="å…­ã€æ¨¡ç³ŠæŸ¥è¯¢"></a>å…­ã€æ¨¡ç³ŠæŸ¥è¯¢</h2><h3 id="6-1-åŸºæœ¬åŸç†ä»£ç "><a href="#6-1-åŸºæœ¬åŸç†ä»£ç " class="headerlink" title="6.1 åŸºæœ¬åŸç†ä»£ç "></a>6.1 åŸºæœ¬åŸç†ä»£ç </h3><p><strong>å¾®ä¿¡å°ç¨‹åºæ¨¡ç³ŠæŸ¥è¯¢å¯ä»¥é€šè¿‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><ol><li>è·å–éœ€è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²å’ŒæŸ¥è¯¢çš„å…³é”®å­—ã€‚</li><li>æ„é€ æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†å…³é”®å­—è½¬åŒ–ä¸ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶æ·»åŠ æ¨¡ç³ŠåŒ¹é…ç¬¦å·ã€‚</li><li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ï¼Œè¿”å›åŒ¹é…ç»“æœã€‚</li></ol><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// è·å–éœ€è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²å’ŒæŸ¥è¯¢çš„å…³é”®å­—</span><br><span class="line">let str = &quot;hello world, hello everyone&quot;;</span><br><span class="line">let keyword = &quot;hello&quot;;</span><br><span class="line"></span><br><span class="line">// æ„é€ æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">let regStr = `.*$&#123;keyword&#125;.*`;</span><br><span class="line">let reg = new RegExp(regStr, &quot;g&quot;);</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…</span><br><span class="line">let result = str.match(reg);</span><br><span class="line"></span><br><span class="line">console.log(result); // [&quot;hello world&quot;, &quot;hello everyone&quot;]</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥å®ç°ç®€å•çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚å¿½ç•¥å¤§å°å†™ã€æ”¯æŒå¤šå…³é”®å­—æŸ¥è¯¢ç­‰ã€‚</p><h3 id="6-2-requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢"><a href="#6-2-requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="6.2 requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢"></a>6.2 requestè¯·æ±‚æ¨¡ç³ŠæŸ¥è¯¢</h3><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://example.com/api/search&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">keyword</span>: <span class="string">&#x27;å…³é”®è¯&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œurl ä¸ºè¦è¯·æ±‚çš„æ¥å£åœ°å€ï¼Œmethod ä¸ºè¯·æ±‚æ–¹æ³•ï¼Œdata ä¸ºè¯·æ±‚å‚æ•°ï¼ŒåŒ…æ‹¬è¦åŒ¹é…çš„å…³é”®è¯ã€‚åœ¨æ¥å£çš„åç«¯ä»£ç ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼ä»¥ä¸‹çš„ä»£ç è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> keyword = req.<span class="property">query</span>.<span class="property">keyword</span>;</span><br><span class="line"><span class="keyword">const</span> regex = <span class="keyword">new</span> <span class="title class_">RegExp</span>(keyword, <span class="string">&#x27;i&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> results = <span class="keyword">await</span> db.<span class="title function_">collection</span>(<span class="string">&#x27;collectionName&#x27;</span>).<span class="title function_">where</span>(&#123; <span class="attr">name</span>: regex &#125;).<span class="title function_">get</span>();</span><br><span class="line">res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(results);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œreq.query.keyword ä¸ºå‰ç«¯ä¼ é€’çš„å…³é”®è¯ï¼Œregex ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œi è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œdb.collection(â€˜collectionNameâ€™) ä¸ºæ•°æ®åº“é›†åˆå¯¹è±¡ï¼Œname ä¸ºè¦åŒ¹é…çš„å­—æ®µåã€‚æœ€ç»ˆå°†æŸ¥è¯¢ç»“æœä»¥ JSON æ ¼å¼è¿”å›ç»™å‰ç«¯ã€‚</p><h3 id="6-3-äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢"><a href="#6-3-äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="6.3 äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢"></a>6.3 äº‘æ•°æ®åº“æ¨¡ç³ŠæŸ¥è¯¢</h3><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> db = wx.<span class="property">cloud</span>.<span class="title function_">database</span>();</span><br><span class="line"><span class="keyword">const</span> keyword = <span class="string">&#x27;å…³é”®è¯&#x27;</span>;</span><br><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;collectionName&#x27;</span>).<span class="title function_">where</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: db.<span class="title class_">RegExp</span>(&#123;</span><br><span class="line">    <span class="attr">regexp</span>: keyword,</span><br><span class="line">    <span class="attr">options</span>: <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).<span class="title function_">get</span>(&#123;</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œdb.RegExp ä¸ºäº‘æ•°æ®åº“çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œregexp ä¸ºè¦åŒ¹é…çš„å…³é”®è¯ï¼Œoptions ä¸ºæ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹ï¼Œâ€™iâ€™ è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ã€‚æœ€ç»ˆå°†æŸ¥è¯¢ç»“æœä»¥ JSON æ ¼å¼è¿”å›ç»™å‰ç«¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²</title>
      <link href="/2023/03/29/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2023/03/29/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/18.png" alt="1"></p><p>åœ¨å°ç¨‹åºä¸­ï¼Œå¯ä»¥ä½¿ç”¨JavaScriptä¸­çš„<code>String</code>å¯¹è±¡çš„<code>includes()</code>æ–¹æ³•æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p><code>includes()</code>æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœè¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²åŒ…å«è¿™ä¸ªå‚æ•°ï¼Œåˆ™è¿”å›<code>true</code>ï¼Œå¦åˆ™è¿”å›<code>false</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨å°ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">&#x27;World&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (str1.<span class="title function_">includes</span>(str2)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;str1åŒ…å«str2&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;str1ä¸åŒ…å«str2&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>str1</code>åŒ…å«<code>str2</code>ï¼Œå› æ­¤ä¼šè¾“å‡º<code>str1åŒ…å«str2</code>ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>includes()</code>æ–¹æ³•æ˜¯ES6ä¸­æ–°å¢çš„æ–¹æ³•ï¼Œå¦‚æœéœ€è¦åœ¨ä½ç‰ˆæœ¬çš„å¾®ä¿¡å°ç¨‹åºä¸­ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–æ–¹æ³•ä»£æ›¿ï¼Œä¾‹å¦‚ä½¿ç”¨<code>indexOf()</code>æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (str1.<span class="title function_">indexOf</span>(str2) !== -<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;str1åŒ…å«str2&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;str1ä¸åŒ…å«str2&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœ<code>str2</code>åœ¨<code>str1</code>ä¸­å‡ºç°ï¼Œåˆ™<code>indexOf()</code>æ–¹æ³•ä¼šè¿”å›<code>str2</code>åœ¨<code>str1</code>ä¸­çš„ä½ç½®ï¼Œå¦åˆ™è¿”å›<code>-1</code>ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡åˆ¤æ–­<code>indexOf()</code>æ–¹æ³•çš„è¿”å›å€¼æ˜¯å¦ä¸º<code>-1</code>æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºä¸­å¦‚ä½•å¾—åˆ°è‡ªå·±é€‰æ‹©çš„viewçš„å±æ€§ç­‰ä¿¡æ¯</title>
      <link href="/2023/03/29/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%A6%82%E4%BD%95%E5%BE%97%E5%88%B0%E8%87%AA%E5%B7%B1%E9%80%89%E6%8B%A9%E7%9A%84view%E7%9A%84%E5%B1%9E%E6%80%A7%E7%AD%89%E4%BF%A1%E6%81%AF/"/>
      <url>/2023/03/29/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%A6%82%E4%BD%95%E5%BE%97%E5%88%B0%E8%87%AA%E5%B7%B1%E9%80%89%E6%8B%A9%E7%9A%84view%E7%9A%84%E5%B1%9E%E6%80%A7%E7%AD%89%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/18.png" alt="1"></p><p>æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ª<code>view</code>è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œç„¶ååœ¨ç‚¹å‡»äº‹ä»¶ä¸­è·å–å½“å‰ç‚¹å‡»çš„<code>view</code>çš„æ ‡è¯†ç¬¦ã€‚</p><p>å…·ä½“å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š</p><ol><li>åœ¨<code>wxml</code>ä¸­ä¸ºæ¯ä¸ª<code>view</code>è®¾ç½®ä¸€ä¸ª<code>data-id</code>å±æ€§ï¼Œå€¼ä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ï¼š</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">&quot;view1&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;onTap&quot;</span>&gt;</span>View 1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">&quot;view2&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;onTap&quot;</span>&gt;</span>View 2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">&quot;view3&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;onTap&quot;</span>&gt;</span>View 3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨<code>js</code>æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>event.currentTarget.dataset.id</code>è·å–å½“å‰ç‚¹å‡»çš„<code>view</code>çš„æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">onTap</span>: <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> viewId = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">id</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked view id: &quot;</span> + viewId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥åœ¨ç‚¹å‡»äº‹ä»¶ä¸­è·å–å½“å‰ç‚¹å‡»çš„viewçš„æ ‡è¯†ç¬¦äº†ã€‚</p><p>é™¤äº†<code>data-id</code>å±æ€§å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®å…¶ä»–è‡ªå®šä¹‰å±æ€§ï¼Œä¾‹å¦‚<code>data-name</code>ã€<code>data-type</code>ç­‰ï¼Œç”¨æ³•å’Œ<code>data-id</code>ç±»ä¼¼ã€‚åœ¨ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡<code>event.currentTarget.dataset</code>è·å–æ‰€æœ‰è‡ªå®šä¹‰å±æ€§çš„å€¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;view data-id=<span class="string">&quot;view1&quot;</span> data-name=<span class="string">&quot;View One&quot;</span> data-type=<span class="string">&quot;primary&quot;</span> bindtap=<span class="string">&quot;onTap&quot;</span>&gt;<span class="title class_">View</span> <span class="number">1</span>&lt;/view&gt;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">onTap</span>: <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> viewId = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">id</span>;</span><br><span class="line">    <span class="keyword">var</span> viewName = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">name</span>;</span><br><span class="line">    <span class="keyword">var</span> viewType = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">type</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked view id: &quot;</span> + viewId);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked view name: &quot;</span> + viewName);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked view type: &quot;</span> + viewType);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥åœ¨ç‚¹å‡»äº‹ä»¶ä¸­è·å–æ‰€æœ‰è‡ªå®šä¹‰å±æ€§çš„å€¼äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°å¿…åº”åœ¨DEVä¸­æ— æ³•ä½¿ç”¨è§£å†³æ–¹æ³•</title>
      <link href="/2023/03/26/%E6%96%B0%E5%BF%85%E5%BA%94%E5%9C%A8DEV%E4%B8%AD%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
      <url>/2023/03/26/%E6%96%B0%E5%BF%85%E5%BA%94%E5%9C%A8DEV%E4%B8%AD%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/6.png" alt="1"></p><h2 id="ä¸€ã€é—®é¢˜æè¿°"><a href="#ä¸€ã€é—®é¢˜æè¿°" class="headerlink" title="ä¸€ã€é—®é¢˜æè¿°"></a>ä¸€ã€é—®é¢˜æè¿°</h2><p>ä¹‹å‰åœ¨<code>DEV</code>ä¸­å¯ä»¥å¼€å…¨å±€ä»£ç†å¯ä»¥æ­£å¸¸ä½¿ç”¨æ–°å¿…åº”çš„æœåŠ¡ï¼Œä½†æ˜¯æœ€è¿‘ä¸€ç›´å‡ºç°<code>Sorry, looks like your network settings are preventing access to this feature.</code>çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºå¾®è½¯çš„æ­¤åº”ç”¨å®Œå…¨å¯¹<code>China</code>ç¦æ­¢ï¼Œå¤šæ¬¡æ›´æ¢èŠ‚ç‚¹ä»ç„¶æ— æ³•è§£å†³ã€‚</p><h2 id="äºŒã€è§£å†³æ–¹æ³•"><a href="#äºŒã€è§£å†³æ–¹æ³•" class="headerlink" title="äºŒã€è§£å†³æ–¹æ³•"></a>äºŒã€è§£å†³æ–¹æ³•</h2><p>æˆ‘ä»¬è§£å†³çš„æ ¸å¿ƒå°±æ˜¯è®©<code>Bing</code>è®¤ä¸ºä½ æ˜¯ä¸€ä¸ªå½»å¤´å½»å°¾çš„ç¾å›½ç”¨æˆ·ï¼Œæ‰€ä»¥è§£å†³æ–¹æ¡ˆè¦å°½é‡åœ¨æ•´ä¸ªä½¿ç”¨è¿‡ç¨‹ä¸­ä¼ªè£…æˆç¾å›½ç”¨æˆ·ã€‚</p><ol><li><p>ä¿®æ”¹å…¨å±€è‡³ç¾å›½åœ°åŒºï¼Œç¡®ä¿æä¾›çš„æœåŠ¡ç½‘ç»œçŠ¶æ€è¾ƒå¥½ã€‚</p></li><li><p>å°†å¾®è½¯è´¦å·è®¾ç½®ä¸ºç¾å›½åœ°åŒº</p><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/8.png" alt="1"></p></li><li><p>ç”¨<code>Header Editor</code>æ’ä»¶æ›´æ”¹è¯·æ±‚ä¸­çš„DNSï¼Œå°†å¤´å†…å®¹ä¿®æ”¹ä¸º<code>1.1.1.1</code></p><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/7.png" alt="1"></p></li></ol><h2 id="ä¸‰ã€æ•ˆæœå±•ç¤º"><a href="#ä¸‰ã€æ•ˆæœå±•ç¤º" class="headerlink" title="ä¸‰ã€æ•ˆæœå±•ç¤º"></a>ä¸‰ã€æ•ˆæœå±•ç¤º</h2><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/9.png" alt="1"></p>]]></content>
      
      
      <categories>
          
          <category> bugè®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–°å¿…åº” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVAWEBä¸­è®¿é—®ä¸€ä¸ªServletç±»å‡ºç°404çš„ä¸€ç§å¥‡è‘©åŸå› </title>
      <link href="/2023/03/25/JAVAWEB%E4%B8%AD%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AAServlet%E7%B1%BB%E5%87%BA%E7%8E%B0404%E7%9A%84%E4%B8%80%E7%A7%8D%E5%A5%87%E8%91%A9%E5%8E%9F%E5%9B%A0/"/>
      <url>/2023/03/25/JAVAWEB%E4%B8%AD%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AAServlet%E7%B1%BB%E5%87%BA%E7%8E%B0404%E7%9A%84%E4%B8%80%E7%A7%8D%E5%A5%87%E8%91%A9%E5%8E%9F%E5%9B%A0/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/16.jpg" alt="1"></p><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åœ¨<code>servlet</code>æŠ€æœ¯ä¸­ï¼Œå¦‚æœåœ¨ä¸€ä¸ªé¡¹ç›®åå­—ä¸º<code>aaa</code>çš„ç›®å½•çš„<code>src</code>çš„æ–°å»ºç«‹äº†ä¸€ä¸ª<code>User_login</code>çš„åŒ…ï¼Œåœ¨åŒ…é‡Œå»ºç«‹äº†ä¸€ä¸ªåå­—ä¸º<code>LoginServlet</code>çš„ç±»ï¼Œæ³¨è§£ä¸º<code>@WebServlet(name = &quot;LoginServlet&quot;,urlPatterns = &quot;/User_login/LoginServlet&quot;)ï¼›</code>ç„¶ååˆåœ¨æ ¹ç›®å½•çš„<code>src</code>ä¸‹ç›´æ¥å»ºç«‹äº†ä¸€ä¸ªåä¸º<code>LoginServlet</code>çš„ç±»ï¼Œæ³¨è§£ä¸º<code>@WebServlet(name = &quot;LoginServlet&quot;,urlPatterns = &quot;/LoginServlet&quot;)</code>ã€‚</p><p><strong>ç»“æ„å¦‚ä¸‹ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- aaa</span><br><span class="line">- src</span><br><span class="line">- User_login</span><br><span class="line">- LoginServlet</span><br><span class="line">- LoginServlet</span><br></pre></td></tr></table></figure><p><strong>User_loginåŒ…ä¸‹çš„<code>LoginServlet</code>:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">@WebServlet(name = &quot;LoginServlet&quot;,urlPatterns = &quot;/User_login/LoginServlet&quot;)</span><br><span class="line">public class LoginServlet extends HttpServlet &#123;</span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse rep) throws IOException &#123;</span><br><span class="line">        rep.getWriter().print(&quot;æˆ‘æ˜¯User_loginåŒ…ä¸‹çš„LoginServlet!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse rep) throws IOException &#123;</span><br><span class="line">        doGet(req,rep);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ ¹ç›®å½•ä¸‹çš„<code>LoginServlet</code>:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">@WebServlet(name = &quot;LoginServlet&quot;,urlPatterns = &quot;/LoginServlet&quot;)</span><br><span class="line">public class LoginServlet extends HttpServlet &#123;</span><br><span class="line">    public void doGet(HttpServletRequest req, HttpServletResponse rep) throws IOException &#123;</span><br><span class="line">        rep.getWriter().print(&quot;æˆ‘æ˜¯æ ¹ç›®å½•ä¸‹çš„LoginServlet!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void doPost(HttpServletRequest req, HttpServletResponse rep) throws IOException &#123;</span><br><span class="line">        doGet(req,rep);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬è®¿é—®<code>http://localhost:8080/aaa/User_login/LoginServlet</code>ä¼šæŠ¥é”™404ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img//JAVA/11.png" alt="1"></p><p>è€Œèƒ½è®¿é—®<code>http://localhost:8080/aaa/LoginServlet</code>ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/12.png" alt="1"></p><h2 id="é—®é¢˜åŸå› "><a href="#é—®é¢˜åŸå› " class="headerlink" title="é—®é¢˜åŸå› "></a>é—®é¢˜åŸå› </h2><p>å½“æˆ‘ä»¬åˆ©ç”¨<code>@WebServlet</code>æ³¨è§£è®¿é—®<code>url</code>çš„æ˜ å°„åœ°å€æ—¶ï¼Œå¦‚æœ<code>name</code>ä¸º<code>LoginServlet</code>ï¼Œ<code>JAVA</code>ä¼šä»æ ¹ç›®å½•ä¸‹ä¸€çº§ä¸€çº§çš„å¾€ä¸‹åŠ è½½ï¼Œå¯»æ‰¾ç±»åï¼Œå½“åŠ è½½åˆ°æ ¹ç›®å½•ä¸‹çš„<code>LoginServlet</code>æ—¶ï¼Œå°±ä¸ä¼šå¾€ä¸‹åŠ è½½äº†ï¼›</p><p>æ­¤æ—¶å½“è®¿é—®<code>http://localhost:8080/aaa/User_login/LoginServletæ—¶</code>ï¼Œä¼šå…ˆåŒ¹é…åˆ°<code>/User_login/LoginServlet</code>ï¼Œä½†æ˜¯åœ¨<code>User_login</code>åŒ…ä¸‹çš„<code>LoginServlet</code>ç±»å¹¶æ²¡æœ‰è¢«åŠ è½½ï¼Œå› ä¸ºåœ¨æ ¹ç›®å½•ä¸‹çš„<code>LoginServlet</code>ç±»å·²ç»è¢«åŠ è½½äº†ï¼Œæ‰€ä»¥ä¼šç›´æ¥è°ƒç”¨æ ¹ç›®å½•ä¸‹çš„<code>LoginServlet</code>ç±»ã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>å¦‚æœæƒ³è¦è®¿é—®<code>http://localhost:8080/aaa/User_login/LoginServlet</code></p><ul><li>å¯ä»¥å°†æ ¹ç›®å½•ä¸‹çš„<code>LoginServlet</code>çš„ç±»åˆ é™¤ã€‚</li><li>å¯ä»¥ä¿®æ”¹<code>@WebServlet</code>æ³¨è§£ä¸­çš„<code>name</code>å€¼ï¼Œä½¿ä¸¤è€…ä¸åŒã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> bugè®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVAWEB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å¼€å§‹çš„è®¡ç½‘å­¦ä¹ â€”â€”è®¡ç®—æœºç½‘ç»œç‰©ç†å±‚</title>
      <link href="/2023/03/23/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E7%89%A9%E7%90%86%E5%B1%82/"/>
      <url>/2023/03/23/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E7%89%A9%E7%90%86%E5%B1%82/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/17.png" alt="1"></p><p>å‚è€ƒåšå®¢ï¼š<div class="tag link"><a class="link-card" title="Nimrod" href="https://blog.csdn.net/Nimrod__/article/details/113271631"><div class="left"><img src="https://profile.csdnimg.cn/F/6/8/1_nimrod__"/></div><div class="right"><p class="text">Nimrod</p><p class="url">https://blog.csdn.net/Nimrod__/article/details/113271631</p></div></a></div></p><p>æœ¬ç¬”è®°æ¥æºäºï¼š<a href="https://www.bilibili.com/video/BV1c4411d7jb">è®¡ç®—æœºç½‘ç»œå¾®è¯¾å ‚â€”â€”æ¹–ç§‘å¤§</a></p><div class="note warning flat"><p>ç‰©ç†å±‚çš„åè®®ä¼—å¤šï¼Œè¿™æ˜¯å› ä¸ºç‰©ç†å±‚çš„è¿æ¥æ–¹å¼æ¯”è¾ƒå¤šï¼Œç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“ä¹Ÿæ¯”è¾ƒå¤šï¼Œå› æ­¤å†å­¦ä¹ ç‰©ç†å±‚æ—¶ï¼Œæˆ‘ä»¬åº”å°†é‡ç‚¹æ”¾åœ¨ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µä¸Šï¼Œè€Œä¸æ˜¯å±€é™äºæŸä¸€ä¸ªå…·ä½“çš„ç‰©ç†å±‚åè®®ã€‚</p></div><h2 id="ä¸€ã€ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¸€ã€ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¸€ã€ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ"></a>ä¸€ã€ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ</h2><h3 id="1-1-æ¦‚è¿°"><a href="#1-1-æ¦‚è¿°" class="headerlink" title="1.1 æ¦‚è¿°"></a>1.1 æ¦‚è¿°</h3><p>ç‰©ç†å±‚æ˜¯è®¡ç®—æœºç½‘ç»œçš„ç¬¬ä¸€å±‚ï¼Œæ˜¯æ•´ä¸ªè®¡ç®—æœºç½‘ç»œç³»ç»Ÿçš„åŸºç¡€ï¼Œä¸ºæ•°æ®ä¼ è¾“æä¾›å¯é çš„ç¯å¢ƒã€‚</p><p>ç‰©ç†å±‚è¦è§£å†³çš„åŸºæœ¬é—®é¢˜ï¼šå¦‚ä½•åœ¨å„ç§ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ¯”ç‰¹0å’Œ1çš„é—®é¢˜ã€‚è¿›è€Œç»™æ•°æ®é“¾è·¯å±‚æä¾›é€æ˜ä¼ è¾“æ¯”ç‰¹æµçš„æœåŠ¡ã€‚</p><p>ç‰©ç†å±‚ä¸ºæ•°æ®é“¾è·¯å±‚å±è”½äº†å„ç§ä¼ è¾“åª’ä½“çš„å·®å¼‚ï¼Œä½¿æ•°æ®é“¾è·¯å±‚åªéœ€è¦è€ƒè™‘å¦‚ä½•å®Œæˆæœ¬å±‚çš„åè®®å’ŒæœåŠ¡ï¼Œè€Œä¸å¿…è€ƒè™‘ç½‘ç»œå…·ä½“çš„ä¼ è¾“åª’ä½“æ˜¯ä»€ä¹ˆã€‚</p><h3 id="1-2-ç‰©ç†å±‚åè®®çš„ä¸»è¦ä»»åŠ¡"><a href="#1-2-ç‰©ç†å±‚åè®®çš„ä¸»è¦ä»»åŠ¡" class="headerlink" title="1.2 ç‰©ç†å±‚åè®®çš„ä¸»è¦ä»»åŠ¡"></a>1.2 ç‰©ç†å±‚åè®®çš„ä¸»è¦ä»»åŠ¡</h3><p>å®šä¹‰ç‰©ç†å±‚çš„å››ä¸ªç‰¹æ€§ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/34.png" alt="1"></p><p>ç”±äºä¼ è¾“åª’ä½“ç§ç±»ä¼—å¤šï¼ˆåŒç»çº¿ã€å…‰çº¤ç­‰ï¼‰ï¼Œç‰©ç†è¿æ¥æ–¹å¼ä¹Ÿå¾ˆå¤šï¼ˆç‚¹å¯¹ç‚¹è¿æ¥ã€å¹¿æ’­è¿æ¥ç­‰ï¼‰ï¼Œå› æ­¤ç‰©ç†åè®®æœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯<strong>æ¯ä¸€ç§éƒ½éœ€è¦åŒ…æ‹¬ä»¥ä¸Šå››ä¸ªç‰¹æ€§ã€‚</strong></p><h2 id="äºŒã€ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“"><a href="#äºŒã€ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“" class="headerlink" title="äºŒã€ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“"></a>äºŒã€ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“</h2><h3 id="2-1-å¯¼å¼•å‹ä¼ è¾“åª’ä½“"><a href="#2-1-å¯¼å¼•å‹ä¼ è¾“åª’ä½“" class="headerlink" title="2.1 å¯¼å¼•å‹ä¼ è¾“åª’ä½“"></a>2.1 å¯¼å¼•å‹ä¼ è¾“åª’ä½“</h3><p>åœ¨å¯¼å¼•å‹ä¼ è¾“åª’ä½“ä¸­ï¼Œ<strong>ç”µç£æ³¢è¢«å¯¼å¼•æ²¿ç€å›ºä½“ä¼ æ’­åª’ä½“ä¼ æ’­ã€‚</strong></p><p>å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“ï¼š</p><div class="tabs" id="å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-1">åŒè½´ç”µç¼†</button></li><li class="tab"><button type="button" data-href="#å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-2">åŒç»çº¿</button></li><li class="tab"><button type="button" data-href="#å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-3">å…‰çº¤</button></li><li class="tab"><button type="button" data-href="#å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-4">ç”µåŠ›çº¿</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-1"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/35.png" alt="1"></p><p>ç”Ÿæ´»ä¸­æœ€å¸¸è§çš„å°±æ˜¯ç”µè§†çº¿ã€‚ç”¨äº<strong>æ¨¡æ‹Ÿä¼ è¾“</strong>ã€‚<br>ä»·æ ¼è¾ƒè´µï¼Œå¸ƒçº¿ä¸å¤Ÿçµæ´»æ–¹ä¾¿ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-2"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/36.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/37.png" alt="1"></p><p>åŒç»çº¿æ˜¯æœ€å¤è€åˆå¸¸ç”¨çš„ä¼ è¾“åª’ä½“ã€‚ä¹Ÿå°±æ˜¯ç”Ÿæ´»ä¸­æœ€å¸¸è§çš„ç½‘çº¿ã€‚</p><p>åŒç»çº¿çš„æ„æˆå°±æ˜¯æŠŠä¸¤ä¸ªäº’ç›¸ç»ç¼˜çš„é“œå¯¼çº¿å¹¶æ’æ”¾åœ¨ä¸€èµ·ã€‚ æŒ‰ç…§ä¸€å®šè§„åˆ™ç»åˆèµ·æ¥ã€‚å› æ­¤ç§°ä¸ºåŒç»çº¿ã€‚</p><p>ç»åˆçš„ä½œç”¨ï¼š</p><ul><li>æŠµå¾¡éƒ¨åˆ†æ¥è‡ªå¤–ç•Œçš„ç”µç£æ³¢å¹²æ‰°ã€‚</li><li>å‡å°‘æ¥è‡ªç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°ã€‚</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-3"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/38.png" alt="1"></p><p>æ¯ä¸€æ ¹å…‰çº¤æ˜¯éå¸¸ç»†çš„ï¼Œå› æ­¤éœ€è¦å°†ä»–åšæˆå¾ˆç»“å®çš„å…‰ç¼†ï¼Œä¸€æ ¹å…‰ç¼†å°‘åˆ™åªæœ‰ä¸€æ ¹å…‰çº¤ï¼Œå¤šåˆ™å¯èƒ½æœ‰æ•°åæ ¹ç”šè‡³æ•°ç™¾è·Ÿå…‰çº¤ã€‚ å…‰çº¤çš„èŠ¯éå¸¸ç»†ã€‚</p><p><strong>å…‰çº¤ä¼˜ç¼ºç‚¹ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/39.png" alt="1"></p><p><strong>å…‰çº¤çš„å·¥ä½œåŸç†ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/40.png" alt="1"></p><p>é‡å¤è¿›è¡Œæ­¤è¿‡ç¨‹ï¼Œä½¿å…‰ä¸€ç›´ä¸æ–­åœ°å…¨åå°„æŒ‡å¯¼åˆ°è¾¾ç»ˆç‚¹ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¸¸è§çš„å¯¼å¼•å‹ä¼ æ’­åª’ä½“-4"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/41.png" alt="1"></p><p>ç”µåŠ›çº¿æ˜¯ä¸€ç§æ¯”è¾ƒå¤è€çš„æŠ€æœ¯ã€‚</p><p>åº”ç”¨ç”µåŠ›çº¿ä¼ è¾“ä¿¡å·çš„å®ä¾‹æœ€æ—©ä½¿ç”µåŠ›çº¿ç”µè¯ã€‚</p><p>ä½†æ˜¯åœ¨ç›®å‰ï¼Œä»¥ç”µåŠ›çº¿æ„å»ºå±€åŸŸç½‘å·²ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-2-éå¯¼å¼•å‹ä¼ è¾“åª’ä½“"><a href="#2-2-éå¯¼å¼•å‹ä¼ è¾“åª’ä½“" class="headerlink" title="2.2 éå¯¼å¼•å‹ä¼ è¾“åª’ä½“"></a>2.2 éå¯¼å¼•å‹ä¼ è¾“åª’ä½“</h3><p><strong>éå¯¼å¼•å‹çš„ä¼ æ’­åª’ä½“æ˜¯è‡ªç”±ç©ºé—´ã€‚</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/42.png" alt="1"></p><p>ç”µç£æ³¢é¢‘ç‡è¿‡å¤§å¯¹äººä½“æœ‰å®³ï¼Œå› æ­¤ä¸€èˆ¬ä½¿ç”¨ä»‹äºæ— çº¿ç”µæ³¢åˆ°çº¢å¤–çš„é¢‘ç‡æ¥è¿›è¡Œä¿¡æ¯ä¼ æ’­ã€‚</p><p>å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“ï¼š</p><div class="tabs" id="å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-1">æ— çº¿ç”µæ³¢</button></li><li class="tab"><button type="button" data-href="#å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-2">å¾®æ³¢</button></li><li class="tab"><button type="button" data-href="#å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-3">çº¢å¤–çº¿</button></li><li class="tab"><button type="button" data-href="#å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-4">å¯è§å…‰</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-1"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/43.png" alt="1"></p><p>æ— çº¿ç”µæ³¢ç”¨äº<strong>å›½é™…å¹¿æ’­ã€æµ·äº‹å’Œèˆªç©ºé€šè®¯</strong>ç­‰ã€‚</p><p>æ— çº¿ç”µæ³¢ä¸­çš„ä½é¢‘å’Œä¸­é¢‘ç«¯ä¸»è¦ä»¥åœ°é¢æ³¢å½¢å¼ä¼ æ’­ã€‚é«˜é¢‘å’Œç”šé«˜é¢‘ä¸»è¦ç”¨ç”µç¦»å±‚çš„åå°„ä¼ æ’­ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-2"><p>å¾®æ³¢ç”¨äº<strong>æ— çº¿ç”µè¯ã€æ— çº¿ç½‘ç»œ</strong>ã€é›·è¾¾ã€äººé€ å«æ˜Ÿæ¥å—ç­‰ã€‚åœ¨æ•°æ®é€šä¿¡ä¸­å æœ‰é‡è¦åœ°ä½ã€‚</p><p>å¾®æ³¢åœ¨ç©ºé—´ä¸­ä¸»è¦ä»¥ç›´çº¿ä¼ æ’­ã€‚</p><p>ä¼ ç»Ÿçš„å¾®æ³¢é€šä¿¡ä¸»è¦æœ‰<strong>åœ°é¢å¾®æ³¢æ¥åŠ›é€šä¿¡å’Œå«æ˜Ÿé€šä¿¡ã€‚</strong></p><p>å…¶ä¼ æ’­è·ç¦»ä¸€èˆ¬åªæœ‰50å…¬é‡Œå·¦å³ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-3"><p>åˆ©ç”¨çº¢å¤–çº¿ä¼ è¾“æ•°æ®ï¼Œä¾‹å¦‚ç”µè§†é¥æ§ç­‰ã€‚</p><p>çº¢å¤–é€šä¿¡å±äº<strong>ç‚¹å¯¹ç‚¹æ— çº¿ä¼ è¾“</strong>ã€‚</p><p>ä¸èƒ½è¶Šéšœï¼Œä¼ è¾“è·ç¦»çŸ­ï¼Œä¼ è¾“é€Ÿç‡ä½ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¸¸è§çš„éå¯¼å¼•å‹ä¼ æ’­åª’ä½“-4"><p>LIFIï¼Œå¯ä»¥å®ç°ä½¿ç”¨<strong>å¯è§å…‰é€šä¿¡</strong>ï¼Œä½†æ˜¯ç›®å‰è¿˜åœ¨å®éªŒå®¤é˜¶æ®µã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="æ— çº¿ç”µé¢‘è°±ç®¡ç†æœºæ„"><a href="#æ— çº¿ç”µé¢‘è°±ç®¡ç†æœºæ„" class="headerlink" title="æ— çº¿ç”µé¢‘è°±ç®¡ç†æœºæ„"></a>æ— çº¿ç”µé¢‘è°±ç®¡ç†æœºæ„</h4><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/44.png" alt="1"></p><h3 id="ä¸‰ã€ä¼ è¾“æ–¹å¼"><a href="#ä¸‰ã€ä¼ è¾“æ–¹å¼" class="headerlink" title="ä¸‰ã€ä¼ è¾“æ–¹å¼"></a>ä¸‰ã€ä¼ è¾“æ–¹å¼</h3><h3 id="3-1-ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“"><a href="#3-1-ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“" class="headerlink" title="3.1 ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“"></a>3.1 ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“</h3><div class="tabs" id="ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“-1">ä¸²è¡Œä¼ è¾“</button></li><li class="tab"><button type="button" data-href="#ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“-2">å¹¶è¡Œä¼ è¾“</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“-1"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/45.png" alt="1"></p><p>æ•°æ®é€šè¿‡ä¸€æ¡çº¿è·¯ä¼ è¾“ï¼Œä¸€ä¸ªä¸€ä¸ªæ¯”ç‰¹ä¾æ¬¡ä¼ é€ï¼Œå› æ­¤åªéœ€è¦ä¸€æ¡çº¿è·¯ã€‚</p><p>æ•°æ®åœ¨è¿›è¡Œ<strong>è¿œè·ç¦»ä¼ è¾“</strong>çš„æ—¶å€™ç”¨çš„æ˜¯<strong>ä¸²è¡Œä¼ è¾“ï¼Œä¸æ˜¯å¹¶è¡Œä¼ è¾“ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“-2"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/46.png" alt="1"></p><p>æ•°æ®é€šè¿‡å¤šæ¡çº¿è·¯ä¼ è¾“ã€‚</p><p>å¹¶è¡Œä¼ è¾“çš„ä¼˜ç‚¹æ˜¯é€Ÿåº¦ä¸º<strong>ä¸²è¡Œä¼ è¾“çš„nå€</strong>ã€‚</p><p>ç¼ºç‚¹æ˜¯<strong>æˆæœ¬é«˜</strong>ã€‚</p><p><strong>è®¡ç®—æœºå†…éƒ¨æ•°æ®çš„ä¼ è¾“ä¸€èˆ¬ä½¿ç”¨å¹¶è¡Œä¼ è¾“ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="3-2-åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“"><a href="#3-2-åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“" class="headerlink" title="3.2 åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“"></a>3.2 åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“</h3><div class="tabs" id="åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“-1">åŒæ­¥ä¼ è¾“</button></li><li class="tab"><button type="button" data-href="#åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“-2">å¼‚æ­¥ä¼ è¾“</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“-1"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/47.png" alt="1"></p><p>æ•°æ®åº“ä»¥ç¨³å®šçš„æ¯”ç‰¹æµå½¢å¼ä¼ è¾“ï¼Œå­—èŠ‚ä¹‹é—´æ²¡æœ‰é—´éš”ã€‚</p><p>æ¥æ”¶ç«¯åœ¨æ¯ä¸ªæ¯”ç‰¹ä¿¡å·çš„ä¸­é—´æ—¶åˆ»è¿›è¡Œæ£€æµ‹ï¼Œä»¥åˆ¤åˆ«æ¥æ”¶åˆ°çš„æ˜¯æ¯”ç‰¹0è¿˜æ˜¯æ¯”ç‰¹1ã€‚</p><p>ç”±äºä¸åŒè®¾å¤‡çš„æ—¶é’Ÿå‘¨æœŸå­˜åœ¨å·®å¼‚ï¼Œä¸èƒ½åšåˆ°å®Œå…¨ç›¸åŒï¼Œåœ¨ä¼ è¾“å¤§é‡æ•°æ®çš„è¿‡ç¨‹ä¸­åˆ¤åˆ«æ—¶åˆ»çš„ç´¯è®¡è¯¯å·®ä¼šå¯¼è‡´æ¥æ”¶ç«¯å¯¹æ¯”ç‰¹ä¿¡å·çš„åˆ¤åˆ«ä½ç½®é”™ä½ã€‚</p><p>å› æ­¤éœ€è¦é‡‡å–æ–¹æ³•ä½¿æ”¶å‘åŒæ–¹çš„å§‹ç»ˆä¿æŒåŒæ­¥ã€‚</p><p>æœ‰ä¸¤ç§åŒæ­¥æ–¹æ³•ï¼š</p><ul><li><strong>å¤–åŒæ­¥ï¼š</strong>åœ¨æ”¶å‘åŒæ–¹ä¹‹é—´æ·»åŠ ä¸€æ¡å•ç‹¬çš„æ—¶é’Ÿä¿¡å·çº¿ï¼›å‘é€ç«¯åœ¨å‘é€æ•°æ®ä¿¡å·çš„åŒæ—¶ï¼Œå¦å¤–å‘é€ä¸€æ¡æ—¶é’Ÿä¿¡å·ï¼Œæ¥æ”¶ç«¯æŒ‰ç…§åŒæ­¥ä¿¡å·çš„èŠ‚å¥æ¥æ¥å—æ•°æ®ã€‚</li><li><strong>å†…åŒæ­¥ï¼š</strong>å‘é€ç«¯å°†æ—¶é’ŸåŒæ­¥ä¿¡å·ç¼–ç åˆ°å‘é€æ•°æ®ä¸­ä¸€èµ·ä¼ è¾“ï¼ˆä¾‹å¦‚æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼‰ï¼›ä¼ ç»Ÿä»¥å¤ªç½‘é‡‡ç”¨çš„å°±æ˜¯æ›¼å½»æ–¯ç‰¹ç¼–ç çš„å†…åŒæ­¥æ–¹å¼ã€‚</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“-2"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/48.png" alt="1"></p><p>ä½¿ç”¨å¼‚æ­¥ä¼ è¾“æ–¹å¼æ—¶ï¼Œä»¥å­èŠ‚ä¸ºç‹¬ç«‹çš„ä¼ è¾“å•ä½ï¼Œ<strong>å­èŠ‚ä¹‹é—´çš„é—´éš”æ—¶é—´ä¸å›ºå®š</strong>çš„ï¼ˆå› æ­¤æˆä¸ºå¼‚æ­¥ä¼ è¾“ï¼‰ã€‚</p><p>æ¥æ”¶ç«¯ä»…åœ¨æ¯ä¸ªå­—èŠ‚çš„<strong>èµ·å§‹å¤„</strong>å¯¹å­èŠ‚å†…çš„æ¯”ç‰¹å®ç°åŒæ­¥ã€‚</p><p>ä¸ºæ­¤ï¼Œé€šå¸¸è¦åœ¨æ¯ä¸ªå­èŠ‚çš„å‰ååˆ†åˆ«åŠ ä¸Šèµ·å§‹ä½å’Œç»“æŸä½ã€‚</p><p><strong>å¼‚æ­¥æŒ‡çš„æ˜¯å­èŠ‚ä¹‹é—´å¼‚æ­¥ã€‚</strong></p><p><strong>å­—èŠ‚ä¹‹é—´çš„æ—¶é—´é—´éš”ä¸å›ºå®šã€‚</strong></p><p><strong>ä½†æ˜¯ï¼Œå­—èŠ‚ä¸­çš„æ¯ä¸ªæ¯”ç‰¹ä¾æ—§è¦åŒæ­¥ï¼Œå„ä¸ªæ¯”ç‰¹çš„æŒç»­æ—¶é—´è¦ç›¸åŒã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="3-3-å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡"><a href="#3-3-å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡" class="headerlink" title="3.3 å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡"></a>3.3 å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡</h3><div class="tabs" id="å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡-1">å•å·¥</button></li><li class="tab"><button type="button" data-href="#å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡-2">åŠåŒå·¥</button></li><li class="tab"><button type="button" data-href="#å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡-3">å…¨åŒé€šä¿¡</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡-1"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/49.png" alt="1"></p><p>é€šä¿¡åŒæ–¹åª<strong>æœ‰ä¸€ä¸ªæ•°æ®ä¼ è¾“æ–¹å‘</strong>ã€‚</p><p>ä¾‹å¦‚æ— çº¿ç”µã€å¹¿æ’­ã€‚</p><p><strong>åªéœ€è¦ä¸€æ¡ä¿¡é“ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡-2"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/50.png" alt="1"></p><p>é€šä¿¡åŒæ–¹æœ‰<strong>ä¸¤ä¸ªæ•°æ®ä¼ è¾“æ–¹å‘ï¼Œä½†æ˜¯ä¸å¯ä»¥åŒæ—¶é€šä¿¡ã€‚</strong></p><p><strong>éœ€è¦ä¸¤æ¡ä¿¡é“ã€‚</strong></p><p>ä¾‹å¦‚å¯¹è®²æœºå°±æ˜¯è¿™ç§é€šä¿¡æ–¹å¼ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å•å·¥ã€åŠåŒå·¥ã€å…¨åŒé€šä¿¡-3"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/51.png" alt="1"></p><p>é€šä¿¡åŒæ–¹æœ‰<strong>ä¸¤ä¸ªæ•°æ®ä¼ è¾“æ–¹å‘ï¼Œå¯ä»¥è¿›è¡ŒåŒæ—¶é€šä¿¡ã€‚</strong></p><p><strong>éœ€è¦ä¸¤æ¡ä¿¡é“ã€‚</strong></p><p>ä¾‹å¦‚å®æ—¶ç”µè¯å°±æ˜¯è¿™ç§é€šä¿¡æ–¹å¼ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="å››ã€ç¼–ç ä¸è°ƒåˆ¶"><a href="#å››ã€ç¼–ç ä¸è°ƒåˆ¶" class="headerlink" title="å››ã€ç¼–ç ä¸è°ƒåˆ¶"></a>å››ã€ç¼–ç ä¸è°ƒåˆ¶</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/52.png" alt="1"></p><p>ä¿¡å·åˆ†ä¸ºæ•°å­—åŸºå¸¦ä¿¡å·å’Œæ¨¡æ‹Ÿä¿¡å·ã€‚</p><p>æ•°å­—åŸºå¸¦ä¿¡å·ä¾‹å¦‚è®¡ç®—æœºå’ŒCPUä¸å†…å­˜ä¹‹é—´ä¼ è¾“çš„ä¿¡å·ã€‚</p><p>æ¨¡æ‹ŸåŸºå¸¦ä¿¡å·ä¾‹å¦‚éº¦å…‹é£æ”¶åˆ°å£°éŸ³åäº§ç”Ÿçš„éŸ³é¢‘ä¿¡å·ã€‚</p><p>ä¿¡å·éœ€è¦åœ¨ä¿¡é“ä¸­ä¼ è¾“ï¼Œä¿¡é“æœ‰æ•°å­—ä¿¡é“å’Œæ¨¡æ‹Ÿä¿¡é“ã€‚</p><h3 id="4-1-ç¼–ç "><a href="#4-1-ç¼–ç " class="headerlink" title="4.1 ç¼–ç "></a>4.1 ç¼–ç </h3><p>ç¼–ç å°±æ˜¯åœ¨ä¸æ”¹å˜ä¿¡å·æ€§è´¨çš„æƒ…å†µä¸‹ä»…å¯¹æ•°å­—åŸºå¸¦ä¿¡å·çš„æ³¢å½¢è¿›è¡Œå˜æ¢ã€‚ç¼–ç åäº§ç”Ÿçš„ä¿¡å·è®¤ä¸ºæ•°å­—ä¿¡å·ã€‚å¯ä»¥åœ¨ä¿¡é“ç§ä¼ è¾“ã€‚</p><p>æœ‰ä¸¤ç§æƒ…å†µï¼š</p><p>æ•°å­—ä¿¡å·è½¬æ¢ä¸ºå¦ä¸€ç§æ•°å­—ä¿¡å·ï¼Œ åœ¨æ•°å­—ä¿¡é“ä¸­ä¼ è¾“ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥å¤ªç½‘ä½¿ç”¨æ›¼å½»æ–¯ç‰¹ç¼–ç ã€4B&#x2F;5Bã€8B&#x2F;10Bç­‰ç¼–ç ã€‚</p><p>æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å· ï¼Œåœ¨æ•°å­—ä¿¡é“ä¸­ä¼ è¾“ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹éŸ³é¢‘ä¿¡å·è¿›è¡Œç¼–ç çš„è„‰ç è°ƒåˆ¶PCMã€‚</p><h3 id="4-2-è°ƒåˆ¶"><a href="#4-2-è°ƒåˆ¶" class="headerlink" title="4.2 è°ƒåˆ¶"></a>4.2 è°ƒåˆ¶</h3><p>æŠŠæ•°æ®åŸºå¸¦ä¿¡å·çš„é¢‘ç‡èŒƒå›´ï¼Œæ¬ç§»åˆ°è¾ƒé«˜çš„é¢‘æ®µï¼Œå¹¶è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œç§°ä¸ºè°ƒåˆ¶ã€‚è°ƒåˆ¶åäº§ç”Ÿæ¨¡æ‹Ÿä¿¡å·ï¼Œåœ¨æ¨¡æ‹Ÿä¿¡é“ç§ä¼ è¾“ã€‚</p><p>æœ‰ä¸¤ç§æƒ…å†µï¼š</p><p>æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œåœ¨æ¨¡æ‹Ÿä¿¡é“ä¸­ä¼ è¾“ã€‚</p><p>ä¾‹å¦‚WiFiï¼Œé‡‡ç”¨è¡¥ç é”®æ§CCK&#x2F;ç›´æ¥åºåˆ—æ‰©é¢‘DSSS&#x2F;æ­£äº¤é¢‘åˆ†å¤ç”¨OFDMç­‰è°ƒåˆ¶æ–¹å¼ã€‚</p><p>æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºå¦ä¸€ç§æ¨¡æ‹Ÿä¿¡å·ï¼Œåœ¨æ¨¡æ‹Ÿä¿¡é“ä¸­ä¼ è¾“ã€‚</p><p>ä¾‹å¦‚ï¼Œè¯­éŸ³æ•°æ®åŠ è½½åˆ°æ¨¡æ‹Ÿçš„è½½æ³¢ä¿¡å·ä¸­ä¼ è¾“ã€‚<br>é¢‘åˆ†å¤ç”¨FDMæŠ€æœ¯ï¼Œå……åˆ†åˆ©ç”¨å¸¦å®½èµ„æºã€‚</p><h3 id="4-3-å¸¸ç”¨ç¼–ç "><a href="#4-3-å¸¸ç”¨ç¼–ç " class="headerlink" title="4.3 å¸¸ç”¨ç¼–ç "></a>4.3 å¸¸ç”¨ç¼–ç </h3><p><strong>ç å…ƒï¼šæ„æˆä¿¡å·çš„ä¸€æ®µæ³¢å½¢ã€‚</strong></p><p><strong>ä¸å½’é›¶ç¼–ç ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/53.png" alt="1"></p><p>åœ¨æ•´ä¸ªç å…ƒæ—¶é—´å†…ï¼Œä¸ä¼šå‡ºç°é›¶ç”µå¹³ã€‚</p><p>ä¸ºäº†è¾¨åˆ«ç å…ƒä¸ªæ•°ï¼Œåœ¨å‘é€ä¿¡å·æ—¶éœ€è¦å‘é€æ–¹å’Œæ¥æ”¶æ–¹åšåˆ°<strong>ä¸¥æ ¼çš„åŒæ­¥</strong>ã€‚</p><p>ä¸€èˆ¬éœ€è¦<strong>é¢å¤–ä¸€æ ¹ä¼ è¾“çº¿æ¥ä¼ è¾“æ—¶é’Ÿä¿¡å·</strong>ï¼Œå®ç°åŒæ­¥çš„ç›®çš„ã€‚æ¥æ”¶æ–¹æŒ‰ç…§æ—¶é’Ÿä¿¡å·çš„èŠ‚æ‹æ¥é€ä¸ªæ¥æ”¶ç å…ƒã€‚</p><p>ä½†æ˜¯é¢å¤–ä¸€æ ¹çº¿èµ„æºé€ æˆæµªè´¹ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„æ•°æ®ä¼ è¾“ä¸€èˆ¬ä¸é‡‡ç”¨è¿™ç±»ç¼–ç ã€‚</p><p><strong>å½’é›¶ç¼–ç ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/54.png" alt="1"></p><p>åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œ<strong>æ¯ä¸ªç å…ƒä¼ è¾“ç»“æŸåéƒ½è¦â€å½’é›¶â€œ</strong>ã€‚<br>å› æ­¤æ¥æ”¶æ–¹åªè¦åœ¨ä¿¡å·å½’é›¶åè¿›è¡Œé‡‡æ ·ï¼Œè€Œä¸éœ€è¦å•ç‹¬çš„æ—¶é’Ÿä¿¡å·ã€‚</p><p>å½’é›¶ç¼–ç ç›¸å½“äºæŠŠæ—¶é’Ÿä¿¡å·ç”¨â€å½’é›¶â€œçš„æ–¹å¼æ”¾åœ¨äº†æ•°æ®ä¹‹å†…ï¼Œçœ‹ä½œä¸€ç§<strong>è‡ªåŒæ­¥</strong>çš„ä¿¡å·ã€‚</p><p>ä½†æ˜¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¤§éƒ¨åˆ†çš„æ•°æ®å¸¦å®½éƒ½ç”¨æ¥ä¼ è¾“é›¶ç”µå¹³æ•°æ®ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚ç¼–ç æ•ˆç‡ä½ã€‚</p><p><strong>æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/55.png" alt="1"></p><p>åœ¨<strong>ç å…ƒä¸­é—´æ—¶åˆ»ä¼šäº§ç”Ÿè·³å˜</strong>ï¼Œè·³å˜çš„å«ä¹‰å¯ä»¥è‡ªå·±å®šä¹‰ã€‚ä¾‹å¦‚ç”±ä½ç”µå¹³åˆ°é«˜ç”µå¹³ä»£è¡¨1&#x2F;0ä¿¡å·ï¼Œç”±é«˜ç”µå¹³åˆ°æ»´ç”µå¹³ä»£è¡¨0&#x2F;1ä¿¡å·ã€‚</p><p>ç å…ƒä¸­é—´æ—¶åˆ»çš„è·³å˜æ—¢ä»£è¡¨æ—¶é’Ÿï¼Œåˆä»£è¡¨æ•°æ®ã€‚</p><p>ä¼ ç»Ÿä»¥å¤ªç½‘ä½¿ç”¨çš„å°±æ˜¯æ»¡æµ‹æ–¯ç‰¹ç¼–ç ã€‚</p><p><strong>å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/56.png" alt="1"></p><p>åœ¨å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ä¸­é—´ä¹Ÿæœ‰è·³å˜ï¼Œä½†æ˜¯æ­¤è·³å˜åªä»£è¡¨æ—¶é’Ÿä¿¡å·ã€‚</p><p>å…·ä½“çš„æ•°æ®ç”±ç å…ƒå¼€å§‹å¤„ç”µå¹³æ˜¯å¦å˜åŒ–æ¥è¡¨ç¤ºã€‚</p><p>ä¾‹å¦‚åœ¨<strong>ç å…ƒç»“æŸå’Œç å…ƒå¼€å§‹çš„æ—¶å€™ç”µå¹³åšå¯¹æ¯”ï¼Œæœ‰å˜åŒ–ä»£è¡¨0&#x2F;1ï¼Œæ— å˜åŒ–ä»£è¡¨1&#x2F;0</strong>ã€‚</p><h3 id="4-4-åŸºæœ¬è°ƒåˆ¶æ–¹æ³•"><a href="#4-4-åŸºæœ¬è°ƒåˆ¶æ–¹æ³•" class="headerlink" title="4.4 åŸºæœ¬è°ƒåˆ¶æ–¹æ³•"></a>4.4 åŸºæœ¬è°ƒåˆ¶æ–¹æ³•</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/57.png" alt="1"></p><h5 id="è°ƒå¹…ï¼š"><a href="#è°ƒå¹…ï¼š" class="headerlink" title="è°ƒå¹…ï¼š"></a>è°ƒå¹…ï¼š</h5><p>å¯¹åŸºå¸¦ä¿¡å·çš„æ³¢å¹…è¿›è¡Œè°ƒæ•´ï¼Œä¾‹å¦‚å°†ä¸Šå›¾çš„1ä¿¡å·æ³¢å¹…è¿›è¡Œæ”¹å˜ï¼Œåœ¨æ¥æ”¶æ–¹è¯»å–æ—¶æœ‰è½½æ³¢è¾“å‡ºä¸º1.</p><h5 id="è°ƒé¢‘ï¼š"><a href="#è°ƒé¢‘ï¼š" class="headerlink" title="è°ƒé¢‘ï¼š"></a>è°ƒé¢‘ï¼š</h5><p>å¯¹åŸºå¸¦ä¿¡å·é¢‘ç‡è¿›è¡Œè°ƒæ•´ï¼Œä¾‹å¦‚å°†0ä¿¡å·è°ƒåˆ¶ä¸ºé¢‘ç‡f1ï¼Œ1ä¿¡å·è°ƒåˆ¶ä¸ºé¢‘ç‡f2ã€‚</p><h5 id="è°ƒç›¸ï¼š"><a href="#è°ƒç›¸ï¼š" class="headerlink" title="è°ƒç›¸ï¼š"></a>è°ƒç›¸ï¼š</h5><p>å¯¹åŸºå¸¦ä¿¡å·ç›¸ä½è¿›è¡Œè°ƒåˆ¶ï¼Œä¾‹å¦‚å°†0ä¿¡å·çš„åˆç›¸ä½è°ƒæ•´ä¸º0åº¦ï¼Œ1ä¿¡å·çš„åˆç›¸ä½è°ƒæ•´ä¸º180åº¦ã€‚</p><p><strong>ä½†æ˜¯åœ¨ä»¥ä¸ŠåŸºæœ¬è°ƒåˆ¶æ–¹æ³•ä¸­ï¼Œ1ä¸ªç å…ƒåªèƒ½åŒ…å«1ä¸ªæ¯”ç‰¹ä¿¡æ¯ã€‚</strong></p><h5 id="æ··åˆè°ƒåˆ¶ï¼š"><a href="#æ··åˆè°ƒåˆ¶ï¼š" class="headerlink" title="æ··åˆè°ƒåˆ¶ï¼š"></a>æ··åˆè°ƒåˆ¶ï¼š</h5><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/58.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/59.png" alt="1"></p><p><strong>æ­£äº¤æŒ¯å¹…è°ƒåˆ¶QAMï¼š</strong></p><p>QAM-16ï¼š</p><p>åœ¨QAM-16ä¸­æœ‰12ç§ç›¸ä½ï¼Œæ¯ç§ç›¸ä½æœ‰1æˆ–2ç§æŒ¯å¹…å¯é€‰æ‹©ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/60.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/65.png" alt="1"></p><p>ç”±äºæ­¤è°ƒåˆ¶æ–¹æ³•å¯ä»¥è°ƒåˆ¶å‡º16ç§ç å…ƒï¼Œè¦å®Œæ•´çš„è¡¨ç¤ºè¿™16ç§æƒ…å†µï¼Œç å…ƒå†…æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå› æ­¤è‡³å°‘éœ€è¦4ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œä¹Ÿå°±æ˜¯4ä¸ªæ¯”ç‰¹æ•°æ®ï¼Œå› æ­¤<strong>åœ¨QAM-16è°ƒåˆ¶æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªç å…ƒå¯ä»¥è¡¨ç¤º4ä¸ªæ¯”ç‰¹æ•°æ®</strong>ã€‚</p><p>ä¸ºäº†é˜²æ­¢ä¼ è¾“å‡ºé”™å¯¼è‡´é”™è¯¯ï¼Œç›¸é‚»ç å…ƒä¹‹é—´çš„å¯¹åº”å…³ç³»ä½¿ç”¨<strong>æ ¼é›·ç </strong>ï¼ˆç›¸é‚»äºŒè¿›åˆ¶æ•°åªæœ‰ä¸€ä½ä¸åŒï¼‰ã€‚</p><h2 id="äº”ã€ä¿¡é“çš„æé™å®¹é‡"><a href="#äº”ã€ä¿¡é“çš„æé™å®¹é‡" class="headerlink" title="äº”ã€ä¿¡é“çš„æé™å®¹é‡"></a>äº”ã€ä¿¡é“çš„æé™å®¹é‡</h2><h3 id="5-1-æ¦‚è¿°"><a href="#5-1-æ¦‚è¿°" class="headerlink" title="5.1 æ¦‚è¿°"></a>5.1 æ¦‚è¿°</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/61.png" alt="1"></p><p>åœ¨å®é™…ä¼ è¾“è¿‡ç¨‹ä¸­ç”±äºé€šä¿¡è´¨é‡çš„é—®é¢˜ä¼šå¯¼è‡´ä¼ è¾“ä¿¡å·è¢«å¹²æ‰°ï¼Œå¯¼è‡´ä¿¡å·æ³¢å½¢å‡ºç°äº†ç å…ƒä¹‹é—´çš„æ¸…æ™°ç•Œé™ï¼Œè¿™ç§ç°è±¡å«ç å…ƒä¸²æ‰°ã€‚</p><h3 id="5-2-äº§ç”Ÿå¤±çœŸçš„å› ç´ ä¸»è¦æœ‰"><a href="#5-2-äº§ç”Ÿå¤±çœŸçš„å› ç´ ä¸»è¦æœ‰" class="headerlink" title="5.2 äº§ç”Ÿå¤±çœŸçš„å› ç´ ä¸»è¦æœ‰"></a>5.2 äº§ç”Ÿå¤±çœŸçš„å› ç´ ä¸»è¦æœ‰</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/62.png" alt="1"></p><p>å…¶ä¸­ç å…ƒä¼ è¾“é€Ÿç‡ï¼ˆä¸è°ƒåˆ¶æ–¹æ³•æœ‰å…³ï¼‰</p><p>å› ä¸ºä»¥ä¸Šæƒ…å†µï¼Œé˜²æ­¢ä¿¡é“æ•°æ®è¿‡å¤§å¯¼è‡´ç é—´ä¸²æ‰°ï¼Œå› æ­¤åšå‡ºäº†ä¿¡å·æé™å®¹é‡çš„é¢„æµ‹ã€‚</p><p>å…¶ä¸­æœ€è‘—åçš„å°±æ˜¯å¥ˆæ°å‡†åˆ™ã€‚</p><h5 id="å¥ˆæ°å‡†åˆ™ï¼š"><a href="#å¥ˆæ°å‡†åˆ™ï¼š" class="headerlink" title="å¥ˆæ°å‡†åˆ™ï¼š"></a>å¥ˆæ°å‡†åˆ™ï¼š</h5><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/63.png" alt="1"></p><p>ç”±äºå¥ˆæ°å‡†åˆ™æ˜¯ä¸€ç§ç†æƒ³ç¯å¢ƒä¸‹çš„æƒ…å†µï¼Œåœ¨å®é™…ä¸­æé™å®¹é‡è¦æ˜æ˜¾å°äºè¯¥å€¼ã€‚</p><h5 id="é¦™å†œå…¬å¼ï¼š"><a href="#é¦™å†œå…¬å¼ï¼š" class="headerlink" title="é¦™å†œå…¬å¼ï¼š"></a>é¦™å†œå…¬å¼ï¼š</h5><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/64.png" alt="1"></p><p>ç”±äºåœ¨å®é™…ä¿¡é“ä¸­ï¼Œä¿¡å·è¿˜æœ‰æ”¶åˆ°å…¶ä»–çš„ä¸€äº›æŸä¼¤ï¼Œä¾‹å¦‚ä¸ªè„‰å†²å¹²æ‰°ç­‰ï¼Œå› æ­¤å®é™…ä¿¡é“èƒ½è¾¾æˆçš„ä¿¡æ¯é€Ÿç‡è¦æ¯”è®¡ç®—å‡ºæ¥çš„æé™é€Ÿç‡è¿˜è¦å°ã€‚</p><p><strong>ç»¼åˆæ¥çœ‹ï¼šåœ¨ä¿¡é“å¸¦å®½ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å¥ˆæ°å‡†åˆ™å’Œé¦™å†œå…¬å¼ï¼Œæƒ³è¦æé«˜ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡å¿…é¡»é‡‡ç”¨å¤šå…ƒåˆ¶æˆ–è€…æ›´å¥½çš„è°ƒåˆ¶æ–¹æ³•ï¼Œä»¥åŠåŠªåŠ›æé«˜ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”ã€‚</strong></p><h2 id="å…­ã€ç›¸å…³ä¹ é¢˜"><a href="#å…­ã€ç›¸å…³ä¹ é¢˜" class="headerlink" title="å…­ã€ç›¸å…³ä¹ é¢˜"></a>å…­ã€ç›¸å…³ä¹ é¢˜</h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/66.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/67.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/68.png" alt="1"></p><p>å¦‚æœé¢˜ç›®ä¸­æ²¡æœ‰æŒ‡æ˜ä¿¡é“æ˜¯å¸¦é€šä¿¡é“ï¼Œä¹Ÿå°±æ˜¯ç»™å‡ºäº†ä¿¡é“é¢‘ç‡çš„ä¸Šä¸‹é™,åˆ™ä¿¡é“å±äºä½é€šä¿¡é“ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/69.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/70.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/71.png" alt="1"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å¼€å§‹çš„è®¡ç½‘å­¦ä¹ â€”â€”è®¡ç®—æœºç½‘ç»œæ¦‚è¿°</title>
      <link href="/2023/03/23/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%A6%82%E8%BF%B0/"/>
      <url>/2023/03/23/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/17.png" alt="1"></p><p>å‚è€ƒåšå®¢ï¼š<div class="tag link"><a class="link-card" title="Nimrod" href="https://blog.csdn.net/Nimrod__/article/details/113127311#comments_25526717"><div class="left"><img src="https://profile-avatar.csdnimg.cn/92b5cd2dc5c148d78574e480109516d3_nimrod__.jpg!1"/></div><div class="right"><p class="text">Nimrod</p><p class="url">https://blog.csdn.net/Nimrod__/article/details/113127311#comments_25526717</p></div></a></div></p><p>æœ¬ç¬”è®°æ¥æºäºï¼š<a href="https://www.bilibili.com/video/BV1c4411d7jb">è®¡ç®—æœºç½‘ç»œå¾®è¯¾å ‚â€”â€”æ¹–ç§‘å¤§</a></p><h2 id="ä¸€ã€è®¡ç®—æœºç½‘ç»œä¸­åœ¨ä¿¡æ¯æ—¶ä»£çš„ä½œç”¨"><a href="#ä¸€ã€è®¡ç®—æœºç½‘ç»œä¸­åœ¨ä¿¡æ¯æ—¶ä»£çš„ä½œç”¨" class="headerlink" title="ä¸€ã€è®¡ç®—æœºç½‘ç»œä¸­åœ¨ä¿¡æ¯æ—¶ä»£çš„ä½œç”¨"></a>ä¸€ã€è®¡ç®—æœºç½‘ç»œä¸­åœ¨ä¿¡æ¯æ—¶ä»£çš„ä½œç”¨</h2><p>è®¡ç®—æœºç½‘ç»œå·²ç”±ä¸€ç§é€šä¿¡åŸºç¡€è®¾æ–½å‘å±•æˆä¸ºä¸€ç§é‡è¦çš„ä¿¡æ¯æœåŠ¡åŸºç¡€è®¾æ–½ã€‚</p><p>è®¡ç®—æœºç½‘ç»œå·²ç»æˆä¸ºåƒæ°´ã€ç”µè¿™äº›åŸºç¡€è®¾æ—¶ä¸€æ ·ï¼Œæˆä¸ºæˆ‘ä»¬ç”Ÿæ´»é‡ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p><h2 id="äºŒã€å› ç‰¹ç½‘æ¦‚è¿°"><a href="#äºŒã€å› ç‰¹ç½‘æ¦‚è¿°" class="headerlink" title="äºŒã€å› ç‰¹ç½‘æ¦‚è¿°"></a>äºŒã€å› ç‰¹ç½‘æ¦‚è¿°</h2><h3 id="2-1ç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘"><a href="#2-1ç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘" class="headerlink" title="2.1ç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘"></a>2.1ç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘</h3><p>ç½‘ç»œï¼šç½‘ç»œç”±<strong>è‹¥å¹²èŠ‚ç‚¹å’Œè¿æ¥è¿™äº›èŠ‚ç‚¹çš„é“¾è·¯</strong>ç»„æˆã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.png" alt="1"></p><p>äº’è”ç½‘ï¼šæ˜¯ä¸€ä¸ªè¦†ç›–èŒƒå›´æ›´å¤§çš„ç½‘ç»œï¼Œç”±å¤šä¸ªç½‘ç»œè¿˜å¯ä»¥é€šè¿‡è·¯ç”±å™¨è¿æ¥èµ·æ¥ï¼Œå¯ä»¥ç†è§£ä¸º<strong>äº’è”ç½‘å°±æ˜¯ç½‘ç»œçš„ç½‘ç»œ</strong>ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2.png" alt="1"></p><p>å› ç‰¹ç½‘ï¼šå°±æ˜¯<strong>ä¸–ç•Œä¸Šæœ€å¤§çš„äº’è”ç½‘</strong>ã€‚</p><p><strong>åŒºåˆ†ï¼š</strong></p><p>internetï¼šäº’è”ç½‘ï¼Œè¿™æ˜¯ä¸€ä¸ªé€šç”¨åè¯ï¼Œæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è”è€Œæˆçš„ç½‘ç»œï¼Œç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®å¯ä»¥æ˜¯ä»»æ„çš„ã€‚</p><p>Internetï¼šå› ç‰¹ç½‘ï¼Œä¸“æœ‰åè¯ï¼ŒæŒ‡å½“å‰å…¨çƒæœ€å¤§çš„ã€å¼€æ”¾çš„ã€ç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šè®¡ç®—æœºç½‘ç»œï¼Œæ˜¯é‡‡ç”¨TCP&#x2F;IPå†™ä¸€æ—ä½œä¸ºé€šä¿¡çš„è§„åˆ™ã€‚</p><h3 id="2-2å› ç‰¹ç½‘å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ"><a href="#2-2å› ç‰¹ç½‘å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ" class="headerlink" title="2.2å› ç‰¹ç½‘å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ"></a>2.2å› ç‰¹ç½‘å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3.png" alt="1"></p><p><strong>å› ç‰¹ç½‘æœåŠ¡æä¾›è€…ISP(Internet Service Provider)</strong></p><p>æä¾›ç»™ç”¨æˆ·IPåœ°å€çš„è§’è‰²ï¼Œæ¯ä¸ªç”¨æˆ·é€šè¿‡ISPæä¾›çš„IPåœ°å€ä½¿ç”¨äº’è”ç½‘ï¼Œæ²¡æœ‰IPåœ°å€ä¸å¯ä»¥ä½¿ç”¨äº’è”ç½‘ã€‚</p><p>ç”Ÿæ´»ä¸­ç”µä¿¡ç­‰ä¾¿æ˜¯æœ€ç»å…¸çš„ä¾‹å­ï¼Œå…¶ä¸­åœ¨äº’è”ç½‘ä¸­æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥æ˜¯ISPã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.png" alt="1"></p><p>åŸºäºISPçš„ä¸‰ä¸ªç»“æ„äº’è”ç½‘</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.png" alt="1"></p><h3 id="2-3å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ"><a href="#2-3å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ" class="headerlink" title="2.3å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ"></a>2.3å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6.png" alt="1"></p><h3 id="2-4å› ç‰¹ç½‘çš„ç»„æˆ"><a href="#2-4å› ç‰¹ç½‘çš„ç»„æˆ" class="headerlink" title="2.4å› ç‰¹ç½‘çš„ç»„æˆ"></a>2.4å› ç‰¹ç½‘çš„ç»„æˆ</h3><p>è¾¹ç¼˜éƒ¨åˆ†ï¼šç”±æ‰€æœ‰è¿æ¥åœ¨å› ç‰¹ç½‘çš„ä¸»æœºç»„æˆï¼Œæ˜¯ç”¨æˆ·<strong>ç›´æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥é€šä¿¡å’Œèµ„æºå…±äº«çš„è®¾å¤‡</strong>ã€‚</p><p>æ ¸å¿ƒéƒ¨åˆ†ï¼šç”±<strong>å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆ</strong>ï¼Œè¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜æœåŠ¡æä¾›æœåŠ¡çš„ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/7.png" alt="1"></p><h2 id="ä¸‰ã€ä¸‰ç§äº¤æ¢æ–¹å¼"><a href="#ä¸‰ã€ä¸‰ç§äº¤æ¢æ–¹å¼" class="headerlink" title="ä¸‰ã€ä¸‰ç§äº¤æ¢æ–¹å¼"></a>ä¸‰ã€ä¸‰ç§äº¤æ¢æ–¹å¼</h2><h3 id="3-1-ä¸‰ç§äº¤æ¢æ¦‚è¿°"><a href="#3-1-ä¸‰ç§äº¤æ¢æ¦‚è¿°" class="headerlink" title="3.1 ä¸‰ç§äº¤æ¢æ¦‚è¿°"></a>3.1 ä¸‰ç§äº¤æ¢æ¦‚è¿°</h3><div class="tabs" id="ä¸‰ç§äº¤æ¢æ¦‚è¿°"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¸‰ç§äº¤æ¢æ¦‚è¿°-1">ç”µè·¯äº¤æ¢</button></li><li class="tab"><button type="button" data-href="#ä¸‰ç§äº¤æ¢æ¦‚è¿°-2">åˆ†ç»„äº¤æ¢</button></li><li class="tab"><button type="button" data-href="#ä¸‰ç§äº¤æ¢æ¦‚è¿°-3">æŠ¥æ–‡äº¤æ¢</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¸‰ç§äº¤æ¢æ¦‚è¿°-1"><p>ç”µè¯äº¤æ¢æœºæ¥é€šç”µè¯çº¿çš„æ–¹å¼ç§°ä¸ºç”µè·¯ã€‚</p><p>ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹ï¼Œäº¤æ¢å°±æ˜¯æŒ‰ç…§æŸç§æ–¹å¼<strong>åŠ¨æ€çš„åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æº</strong>ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/8.png" alt="1"></p><p>åœ¨å›¾ä¸­ï¼Œæ¯ä¸ªç”µè·¯äº¤æ¢éƒ½éœ€è¦å»ºç«‹ä¸€æ¡ç‰©ç†é€šè·¯ï¼Œæ¯æ¡è¿æ¥éƒ½æ˜¯ä¸å¯æŠ¢å ï¼Œä¸€ç›´å­˜åœ¨çš„ã€‚</p><p><strong>ç”µè·¯äº¤æ¢çš„æ­¥éª¤ï¼š</strong></p><ul><li>å»ºç«‹è¿æ¥ï¼ˆåˆ†é…é€šä¿¡èµ„æºï¼‰</li><li>é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰</li><li>é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰</li></ul><p>åœ¨å»ºç«‹åä¸è®ºé€šä¿¡èµ„æºæœ‰æ²¡æœ‰ä½¿ç”¨ï¼Œéƒ½ä¸ä¼šè¿›è¡Œä¸­æ–­ï¼Œé™¤éç”¨æˆ·ä¸­æ–­ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸‰ç§äº¤æ¢æ¦‚è¿°-2"><p>æŠŠæ•´å—æ•°æ®&#x2F;ä¿¡æ¯åˆ†ä¸ºå¤šä¸ªæ•°æ®æ®µï¼ˆç›¸å¯¹äºæŠ¥æ–‡ä¼ è¾“è€Œè¨€ï¼‰ï¼Œæ•°æ®æ®µåˆ†å¼€ä¼ è¾“ã€‚åœ¨æ•°æ®æ®µå‰é¢åŠ ä¸Šé¦–éƒ¨åï¼Œæˆä¸ºä¸€ä¸ªåˆ†ç»„ã€‚ä»¥åˆ†ç»„ä¸ºå•ä½ä¼ è¾“ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/9.png" alt="1"></p><p>åœ¨å›¾ä¸­å„ä¸ªèŠ‚ç‚¹æœ‰<strong>å­˜å‚¨è½¬å‘</strong>çš„åŠŸèƒ½ã€‚</p><p>å„ä¸ªåˆ†ç»„äº¤æ¢æœºä¼šæŠŠåˆ†ç»„å…ˆå­˜å‚¨ä¸‹æ¥ï¼Œç„¶åæ ¹æ®å…¶å¤´éƒ¨ä¿¡æ¯ç§çš„ç›®çš„åœ°åœ°å€ï¼Œå‘é€ç»™ä¸‹ä¸€ä¸ªäº¤æ¢æœºã€‚å„ä¸ªäº¤æ¢æœºè¿›è¡Œå¯¹åˆ†ç»„ä¿¡æ¯çš„å‚¨å­˜è½¬å‘åï¼Œæœ€ç»ˆåˆ°è¾¾ä¸»æœºH2ã€‚</p><p>ç›®çš„åœ°å¤„ç†åŠå†å»é™¤åˆ†ç»„é¦–éƒ¨ï¼Œè¿˜åŸå‡ºæŠ¥æ–‡ã€‚ä¼ è¾“å®Œæˆã€‚</p><p><strong>åœ¨è½¬å‘è¿‡ç¨‹ä¸­æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</strong></p><ul><li><strong>å„åˆ†ç»„ä»æºç«™åˆ°è¾¾ç›®çš„åœ°å¯ä»¥èµ°ä¸åŒçš„è·¯å¾„</strong>ã€‚</li><li><strong>åˆ†ç»„åˆ°è¾¾ç›®çš„ç«™çš„é¡ºåºä¸å®šï¼Œå¯èƒ½å‡ºç°é¡ºåºå˜åŒ–</strong>ã€‚</li></ul><p><strong>åœ¨åˆ†ç»„ä¼ è¾“ä¸­å„ä¸ªè§’è‰²ä¸»è¦åŠŸèƒ½ï¼š</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/10.png" alt="1"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸‰ç§äº¤æ¢æ¦‚è¿°-3"><p>æ¯ä¸€ä¸ªç»“ç‚¹æ¥æ”¶æ•´ä¸ªæŠ¥æ–‡ï¼Œæ£€æŸ¥ç›®æ ‡ç»“ç‚¹åœ°å€ï¼Œç„¶åæ ¹æ®ç½‘ç»œä¸­çš„é€šä¿¡æƒ…å†µåœ¨é€‚å½“çš„æ—¶å€™è½¬å‘åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚ç»è¿‡å¤šæ¬¡çš„å­˜å‚¨â€”â€”è½¬å‘ï¼Œæœ€ååˆ°è¾¾ç›®æ ‡ï¼Œå› è€Œè¿™æ ·çš„ç½‘ç»œå«å­˜å‚¨â€”â€”è½¬å‘ç½‘ç»œã€‚å…¶ä¸­çš„äº¤æ¢ç»“ç‚¹è¦æœ‰è¶³å¤Ÿå¤§çš„å­˜å‚¨ç©ºé—´ï¼ˆä¸€èˆ¬æ˜¯ç£ç›˜ï¼‰ï¼Œç”¨ä»¥ç¼“å†²æ”¶åˆ°çš„é•¿æŠ¥æ–‡ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="3-2-ä¸‰ç§äº¤æ¢å¯¹æ¯”"><a href="#3-2-ä¸‰ç§äº¤æ¢å¯¹æ¯”" class="headerlink" title="3.2 ä¸‰ç§äº¤æ¢å¯¹æ¯”"></a>3.2 ä¸‰ç§äº¤æ¢å¯¹æ¯”</h3><div class="tabs" id="ä¸‰ç§äº¤æ¢å¯¹æ¯”"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¸‰ç§äº¤æ¢å¯¹æ¯”-1">ç”µè·¯äº¤æ¢</button></li><li class="tab"><button type="button" data-href="#ä¸‰ç§äº¤æ¢å¯¹æ¯”-2">æŠ¥æ–‡äº¤æ¢</button></li><li class="tab"><button type="button" data-href="#ä¸‰ç§äº¤æ¢å¯¹æ¯”-3">åˆ†ç»„äº¤æ¢</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¸‰ç§äº¤æ¢å¯¹æ¯”-1"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/11.png" alt="1"></p><p>åœ¨ç”µè·¯äº¤æ¢è¿‡ç¨‹ä¸­è¦å…ˆè¿›è¡Œå»ºç«‹è¿æ¥ï¼Œè¿æ¥å»ºç«‹å®Œæˆåç›´æ¥è¿›è¡ŒæŠ¥æ–‡ä¼ è¾“ï¼Œä¼ è¾“å®Œæˆåé‡Šæ”¾è¿æ¥ã€‚ä¼ è¾“æ—¶ä»¥<strong>æ¯”ç‰¹æµç›´é€šå½¢å¼</strong>ä¼ è¾“ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸‰ç§äº¤æ¢å¯¹æ¯”-2"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/12.png" alt="1"></p><p>åœ¨æŠ¥æ–‡äº¤æ¢ä¸­ï¼ŒæŠŠæ•´ä¸ªæŠ¥æ–‡å…ˆä¼ é€åˆ°ç›¸é‚»èŠ‚ç‚¹äº¤æ¢æœºï¼ŒèŠ‚ç‚¹äº¤æ¢æœºè¿›è¡Œå‚¨å­˜ä¸‹æ¥åè¿›è¡ŒæŸ¥è¡¨è½¬å‘ï¼Œè½¬å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢æœºã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸‰ç§äº¤æ¢å¯¹æ¯”-3"><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/13.png" alt="1"></p><p>åˆ†ç»„äº¤æ¢å¯ä»¥éšæ—¶å‘é€åˆ†ç»„ï¼Œä¸éœ€è¦äº‹å…ˆå»ºç«‹è¿æ¥ã€‚<br>å°†åŸå§‹æŠ¥æ–‡æ‹†åˆ†æˆä¸€ä¸ªä¸ªåˆ†ç»„ï¼Œä¾æ¬¡åœ¨å„èŠ‚ç‚¹äº¤æ¢æœºä¸Šå‚¨å­˜è½¬å‘ã€‚å„èŠ‚ç‚¹åœ¨å‘é€åˆ†ç»„çš„åŒæ—¶è¿˜éœ€è¦ç¼“å­˜åˆ†ç»„ï¼Œæå‡æ•ˆç‡ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="3-3-ä¼˜ç¼ºç‚¹å¯¹æ¯”"><a href="#3-3-ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="headerlink" title="3.3 ä¼˜ç¼ºç‚¹å¯¹æ¯”"></a>3.3 ä¼˜ç¼ºç‚¹å¯¹æ¯”</h3><div class="tabs" id="ä¼˜ç¼ºç‚¹å¯¹æ¯”"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¼˜ç¼ºç‚¹å¯¹æ¯”-1">ç”µè·¯äº¤æ¢</button></li><li class="tab"><button type="button" data-href="#ä¼˜ç¼ºç‚¹å¯¹æ¯”-2">æŠ¥æ–‡äº¤æ¢</button></li><li class="tab"><button type="button" data-href="#ä¼˜ç¼ºç‚¹å¯¹æ¯”-3">åˆ†ç»„äº¤æ¢</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¼˜ç¼ºç‚¹å¯¹æ¯”-1"><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>é€šä¿¡æ—¶å»¶å°ï¼Œé€‚åˆä¼ è¾“å¤§é‡æ•°æ®</li><li>æœ‰åºä¼ è¾“ï¼Œåªåœ¨ä¸€æ¡å›ºå®šçº¿è·¯ä¼ è¾“ï¼Œä¸ä¼šå¤±åº</li><li>æ²¡æœ‰å†²çªï¼Œåªåœ¨ä¸€æ¡çº¿è·¯ä¼ è¾“ï¼Œä¸ä¼šå¼•å‘å†²çª</li><li>é€‚ç”¨èŒƒå›´å¹¿ï¼Œé€‚åˆæ¨¡æ‹Ÿä¿¡å·å’Œæ•°å­—ä¿¡å·</li><li>å®æ—¶æ€§å¼º</li><li>æ§åˆ¶ç®€å•ï¼Œç»“æ„ç®€å•ï¼Œæ˜“äºæ§åˆ¶</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>å»ºç«‹è¿æ¥æ—¶é—´é•¿</li><li>çº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½</li><li>çµæ´»æ€§å·®</li><li>éš¾ä»¥è§„æ ¼åŒ–</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¼˜ç¼ºç‚¹å¯¹æ¯”-2"><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>æ— éœ€å»ºç«‹è¿æ¥ï¼Œå¯ä»¥éšæ—¶å‘é€æŠ¥æ–‡</li><li>åŠ¨æ€åˆ†é…çº¿è·¯</li><li>æé«˜çº¿è·¯å¯é æ€§ï¼Œè‹¥çº¿è·¯æ•…éšœä¼šé€‰æ‹©æ­£å¸¸çº¿è·¯</li><li>æé«˜çº¿è·¯åˆ©ç”¨ç‡</li><li>æä¾›å¤šç›®æ ‡æœåŠ¡ï¼Œä¸€ä¸ªæŠ¥æ–‡å¯ä»¥åŒæ—¶å‘é€ç»™å¤šä¸ªåœ°å€</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>å¼•å‘äº†è½¬å‘æ—¶å»¶ï¼Œåœ¨èŠ‚ç‚¹ä¸­è½¬å‘å‚¨å­˜æ—¶é—´èŠ±è´¹å¤š</li><li>éœ€è¦è¾ƒå¤§å‚¨å­˜ç¼“å­˜ç©ºé—´</li><li>éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡ï¼ŒæŠ¥æ–‡ä¸­æœ‰æºåœ°å€ç‚¹å¤šä½™ä¿¡æ¯</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¼˜ç¼ºç‚¹å¯¹æ¯”-3"><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>æ— éœ€å»ºç«‹è¿æ¥</li><li>çº¿è·¯åˆ©ç”¨ç‡é«˜</li><li>ç®€åŒ–äº†å‚¨å­˜ç®¡ç†ï¼Œåˆ†ç»„é•¿åº¦å›ºå®šï¼Œç¼“å†²åŒºå›ºå®šï¼Œæ˜“äºç®¡ç†</li><li>åŠ é€Ÿä¼ è¾“ï¼ŒèŠ‚ç‚¹çš„è½¬å‘å’Œç¼“å­˜åŒæ—¶è¿›è¡Œï¼Œæé«˜é€Ÿåº¦</li><li>å‡å°‘å‡ºé”™æ¦‚ç‡å’Œé‡å‘æ•°æ®é‡</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>å¼•å‘äº†è½¬å‘æ—¶å»¶</li><li>éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡ï¼Œåˆ†ç»„ä¸­æœ‰æºåœ°å€ç­‰é¢å¤–ä¿¡æ¯é‡</li><li>å¯¹äºæ•°æ®æŠ¥æœåŠ¡ï¼Œå¤„åœ¨å¤±åºã€ä¸¢å¤±è´§é‡å¤åˆ†ç»„çš„é—®é¢˜</li><li>å¯¹äºè™šç”µè·¯æœåŠ¡ï¼Œå­˜åœ¨å‘¼å«å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œè™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="å››ã€è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»"><a href="#å››ã€è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»" class="headerlink" title="å››ã€è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»"></a>å››ã€è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»</h2><h3 id="å®šä¹‰ï¼š"><a href="#å®šä¹‰ï¼š" class="headerlink" title="å®šä¹‰ï¼š"></a>å®šä¹‰ï¼š</h3><p>è®¡ç®—æœºåœ¨å®é™…ä¸Š<strong>æ²¡æœ‰ç²¾ç¡®ç»Ÿä¸€çš„å®šä¹‰</strong>ã€‚</p><p>ä½†æ˜¯æœ‰ä¸€ä¸ªæœ€ç®€å•çš„å®šä¹‰ï¼š<strong>äº’è¿ã€è‡ªæ²»çš„è®¡ç®—æœºé›†åˆã€‚</strong><br>å…¶ä¸­ï¼š</p><ul><li><strong>äº’è¿</strong>æŒ‡çš„æ˜¯è®¡ç®—æœºä¹‹é—´å¯ä»¥é€šè¿‡æœ‰çº¿æˆ–è€…æ— çº¿çš„æ–¹å¼è¿›è¡Œæ•°æ®é€šä¿¡ã€‚</li><li><strong>è‡ªæ²»</strong>æŒ‡çš„æ˜¯ç‹¬ç«‹çš„å­ç®—è®¡ï¼Œæ‹¥æœ‰è‡ªå·±çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚</li><li><strong>è®¡ç®—æœºé›†åˆ</strong>æŒ‡çš„æ˜¯è‡³å°‘è¦æœ‰ä¸¤å°è®¡ç®—æœºã€‚</li></ul><p>æ¯”è¾ƒå…¨é¢çš„å®šä¹‰æ˜¯ï¼š</p><p>è®¡ç®—æœºç½‘ç»œä¸»è¦æ˜¯ä¸€äº›é€šç”¨çš„ã€å¯ç¼–ç¨‹çš„ç¡¬ä»¶äº’è¿è€Œæˆçš„ï¼Œè€Œç¡¬ä»¶å¹¶éä¸“é—¨ç”¨æ¥å®ç°æŸä¸€ç‰¹å®šç›®çš„çš„ï¼Œè¿™äº›å¯ç¼–ç¨‹çš„ç¡¬ä»¶èƒ½å¤Ÿç”¨æ¥ä¼ é€å¤šç§ä¸åŒç±»å‹çš„æ•°æ®ï¼ˆå¦‚éŸ³é¢‘ã€æ•°æ®ï¼‰ï¼Œè¿™äº›å¯ç¼–ç¨‹çš„è½¯ä»¶èƒ½æ”¯æŒå¹¿æ³›å’Œæ—¥ç›Šå¢é•¿çš„åº”ç”¨ã€‚</p><p>åœ¨å®é™…ç”Ÿæ´»ä¸­ä¸åŒçš„å‘å±•é˜¶æ®µå¯¹è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰ä¸åŒï¼Œå¯¹å…¶çš„å®šä¹‰ååº”äº†å½“æ—¶çš„ç½‘ç»œæŠ€æœ¯å‘å±•æ°´å¹³ã€‚</p><h3 id="åˆ†ç±»ï¼š"><a href="#åˆ†ç±»ï¼š" class="headerlink" title="åˆ†ç±»ï¼š"></a>åˆ†ç±»ï¼š</h3><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/14.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/15.png" alt="1"></p><p>å…¬ç”¨ç½‘æŒ‡çš„æ˜¯ç”µä¿¡å…¬å¸æ„å»ºçš„å¤§å‹ç½‘ç»œï¼Œ<strong>é¢å¯¹å…¬ä¼—å¼€æ”¾</strong>ï¼Œåªè¦äº¤é’±æ—¢å¯ä½¿ç”¨ï¼Œåˆå«å…¬ä¼—ç½‘ã€‚</p><p>ä¸“ç”¨ç½‘æŒ‡çš„æ˜¯æŸä¸ªéƒ¨é—¨ä¸ºæœ¬å•ä½çš„ç‰¹æ®Šä¸šåŠ¡å·¥ä½œéœ€è¦è€Œå»ºé€ çš„ç½‘ç»œã€‚ä¾‹å¦‚é“è·¯éƒ¨é—¨ã€ç”µä¿¡éƒ¨é—¨<strong>ä¸“é—¨ä¸ºè‡ªå·±æ„å»ºçš„ï¼Œä¸å¯¹å¤–å¼€æ”¾</strong>çš„ç½‘ç»œã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/16.png" alt="1"></p><p>æœ‰çº¿ç½‘ç»œä¸»è¦åŒç»çº¿(æ—¥å¸¸ä½¿ç”¨ç½‘çº¿)ã€å…‰çº¤ã€‚</p><p>æ— çº¿ç½‘ç»œä¸»è¦æ˜¯WIFIã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/17.png" alt="1"></p><p>å¹¿åŸŸç½‘WANï¼šè¦†ç›–é¢ç§¯é€šå¸¸ä¸ºå‡ åå…¬é‡Œåˆ°å‡ åƒå…¬é‡Œï¼Œå¯ä»¥è¦†ç›–å›½å®¶èŒƒå›´ã€æ´²é™…èŒƒå›´ï¼Œæœ‰æ—¶ä¹Ÿæˆä¸ºè¿œç¨‹ç½‘ã€‚è´Ÿè´£äº’è¿åˆ†å¸ƒåœ¨ä¸åŒåŒºåŸŸçš„åŸåŸŸç½‘å’Œå±€åŸŸç½‘ï¼Œæ˜¯æœ€å¤§èŒƒå›´çš„ç½‘ç»œã€‚</p><p>åŸåŸŸç½‘MANï¼šè¦†ç›–èŒƒå›´ä¸€èˆ¬æ˜¯ä¸€ä¸ªåŸå¸‚ã€‚ä½œç”¨è·ç¦»ä¸º5åˆ°50å…¬é‡Œã€‚é€šå¸¸ä½œä¸ºåŸå¸‚éª¨å¹²ç½‘ï¼Œäº’è¿å¤§é‡ä¼ä¸šã€æœºæ„ã€å­¦æ ¡ã€‚</p><p>å±€åŸŸç½‘LAN:å±€åŸŸç½‘ä¸€èˆ¬æ˜¯å¾®ä¿¡è®¡ç®—æœºæˆ–å·¥ä½œç«™é€šè¿‡å‘Šè¯‰çº¿è·¯ç›¸è¿ï¼ŒèŒƒå›´ä¸€èˆ¬æ˜¯ä¸€ä¸ªå®éªŒå®¤ã€ä¸€æ ‹æ¥¼æˆ–ä¸€ä¸ªæ ¡å›­ã€‚é€šå¸¸ç”±æŸä¸ªå•ä½å•ç‹¬æ‹¥æœ‰ã€ä½¿ç”¨å’Œç»´æŠ¤ã€‚</p><p>ä¸ªåŸŸç½‘PANï¼šä¸ªäººåŒºåŸŸç½‘ç»œã€‚éç”¨æ¥è¿æ¥æ™®é€šè®¡ç®—æœºï¼Œè€³å¼åœ¨ä¸ªäººå·¥ä½œçš„åœ°æ–¹æŠŠä¸ªäººä½¿ç”¨çš„ç”µå­è®¾å¤‡ï¼Œé¼ æ ‡ã€é”®ç›˜ã€è€³æœºç­‰ç”¨æ— çº¿çš„æ–¹å¼è¿æ¥èµ·æ¥å½¢æˆçš„ä¸ªäººç½‘ç»œç³»ç»Ÿã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/18.png" alt="1"></p><p>æ€»çº¿å‹ç½‘ç»œï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/19.png" alt="1"></p><p>æ€»çº¿å‹ç½‘ç»œç”¨<strong>å•æ ¹ä¼ è¾“çº¿</strong>æŠŠè®¡ç®—æœºè¿æ¥èµ·æ¥ã€‚</p><p>ä¼˜ç‚¹æ˜¯<strong>å»ºç½‘å®¹æ˜“ï¼Œå¢å‡èŠ‚ç‚¹æ–¹ä¾¿ï¼ŒèŠ‚çœçº¿è·¯</strong>ã€‚</p><p>ç¼ºç‚¹æ˜¯<strong>é‡è´Ÿè½½æ—¶é€šä¿¡æ•ˆç‡ä¸é«˜ï¼Œä»»æ„ä¸€å¤„å‡ºç°æ•…éšœåå…¨ç½‘ç˜«ç—ª</strong>ã€‚</p><p>æ˜Ÿå‹ç»“æ„ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/20.png" alt="1"></p><p>æ˜Ÿå‹ç½‘ç»œæ˜¯å°†æ¯ä¸ªè®¡ç®—æœºéƒ½ä»¥å•ç‹¬çš„çº¿è·¯ä¸ä¸­å¤®è®¾å¤‡ç›¸è¿ã€‚ä¸­å¤®è®¾å¤‡ç°åœ¨ä¸€èˆ¬æ˜¯äº¤æ¢æœºã€‚</p><p>ä¼˜ç‚¹ï¼šä¾¿äºç½‘ç»œçš„<strong>é›†ä¸­æ§åˆ¶å’Œç®¡ç†</strong>ã€‚</p><p>ç¼ºç‚¹ï¼š<strong>æˆæœ¬é«˜ï¼Œä¸­å¤®è®¾å¤‡å¯¹æ•…éšœæ•æ„Ÿ</strong>ã€‚</p><p>ç¯å½¢ç»“æ„ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/21.png" alt="1"></p><p>ç¯å½¢ç½‘ç»œæ˜¯å°†æ‰€æœ‰è®¡ç®—æœºç½‘ç»œæ¥å£è¿æ¥æˆä¸€ä¸ªç¯ã€‚ç¯å¯ä»¥æ˜¯å•ç¯æˆ–è€…åŒç¯ï¼Œç¯ä¸­ä¿¡å·æ˜¯å•é¡¹ä¼ è¾“çš„ã€‚</p><p>ç½‘çŠ¶å‹ç»“æ„ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/22.png" alt="1"></p><p>åœ¨ç½‘çŠ¶ç»“æ„ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹è‡³å°‘ç”±ä¸¤æ¡è·¯å¾„ä¸å…¶ä»–èŠ‚ç‚¹ç›¸è¿æ¥ï¼Œå¤šç”¨åœ¨å¹¿åŸŸç½‘ä¸­ã€‚</p><p>ä¼˜ç‚¹ï¼š<strong>å¯é æ€§é«˜</strong>ã€‚</p><p>ç¼ºç‚¹ï¼š<strong>æ§åˆ¶å¤æ‚ï¼Œçº¿è·¯æˆæœ¬é«˜</strong>ã€‚</p><p><strong>åœ¨ä»¥ä¸Šå››ç§ç»“æ„ä¸­å¯ä»¥ç»„åˆä»»æ„çš„æ›´åŠ å¤æ‚æœ‰æ•ˆçš„ç»“æ„ã€‚</strong></p><h2 id="äº”ã€è®¡ç®—æœºç½‘ç»œä¸­çš„æ€§èƒ½æŒ‡æ ‡"><a href="#äº”ã€è®¡ç®—æœºç½‘ç»œä¸­çš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="äº”ã€è®¡ç®—æœºç½‘ç»œä¸­çš„æ€§èƒ½æŒ‡æ ‡"></a>äº”ã€è®¡ç®—æœºç½‘ç»œä¸­çš„æ€§èƒ½æŒ‡æ ‡</h2><p>æ€§èƒ½æŒ‡æ ‡å¯ä»¥ä»ä¸åŒçš„æ–¹é¢æ¥åº¦é‡è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½ã€‚</p><p>å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡æœ‰8ä¸ª â¬‡</p><div class="tabs" id="æ€§èƒ½æŒ‡æ ‡"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-1">é€Ÿç‡</button></li><li class="tab"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-2">å¸¦å®½</button></li><li class="tab"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-3">ååé‡</button></li><li class="tab"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-4">æ—¶å»¶</button></li><li class="tab"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-5">æ—¶å»¶å®½å¸¦ç§¯</button></li><li class="tab"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-6">å¾€è¿”æ—¶é—´RTT</button></li><li class="tab"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-7">åˆ©ç”¨ç‡</button></li><li class="tab"><button type="button" data-href="#æ€§èƒ½æŒ‡æ ‡-8">ä¸¢åŒ…ç‡</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="æ€§èƒ½æŒ‡æ ‡-1"><p>é¦–å…ˆå…ˆäº†è§£æ¯”ç‰¹ï¼š</p><p>æ¯”ç‰¹ï¼šè®¡ç®—æœºä¸­<strong>æ•°æ®é‡çš„å•ä½</strong>ï¼Œä¹Ÿæ˜¯ä¿¡æ¯è®ºä¸­ä¿¡æ¯é‡çš„å•ä½ã€‚ä¸€ä¸ªæ¯”ç‰¹å°±æ˜¯äºŒè¿›åˆ¶æ•°å­—ä¸­çš„ä¸€ä¸ª1æˆ–0ã€‚</p><p>åŸºæœ¬å•ä½ï¼šbit(b) æ¯”ç‰¹<br>å¸¸ç”¨å•ä½ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">8 bit = 1 Byte</span><br><span class="line">KB = 2^10B</span><br><span class="line">MB = K KB = 2^20 B</span><br><span class="line">GB = K MB = 2^30 B</span><br><span class="line">TB = K GB = 2^40 B</span><br></pre></td></tr></table></figure><p>é€Ÿç‡å°±æ˜¯<strong>è¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šä¼ é€æ¯”ç‰¹çš„é€Ÿç‡</strong>ï¼Œä¹Ÿç§°ä¸º<strong>æ¯”ç‰¹ç‡æˆ–æ•°æ®ç‡</strong>ã€‚</p><p>åŸºæœ¬å•ä½ï¼šbit&#x2F;s(b&#x2F;sï¼Œbps)</p><p>å¸¸ç”¨å•ä½ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kb/s = 10^3b/s</span><br><span class="line">Mb/s = K Kb/s = 10^6 b/s</span><br><span class="line">Gb/s = k Mb/s = 10^9 b/s</span><br><span class="line">Tb/s = k Gb/s = 10^12 b/s</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ï¼</p><p><strong>æ•°æ®å•ä½bitä¸­K &#x3D; 2^10B</strong></p><p><strong>æ•°æ®å•ä½bitä¸­K &#x3D; 10^3B</strong></p><p>æ‰€ä»¥åœ¨è®¡ç®—è¿‡ç¨‹ä¸­äºŒè€…å­˜åœ¨ä¸€å®šå·®è·ï¼Œä¸è¦å¼„é”™äº†ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ€§èƒ½æŒ‡æ ‡-2"><p>å¸¦å®½åœ¨æ¨¡æ‹Ÿä¿¡å·ç³»ç»Ÿä¸­è¡¨ç¤ºçš„æ˜¯ä¿¡å·æ‰€åŒ…å«çš„å„ç§ä¸åŒé¢‘ç‡æˆåˆ†æ‰€å æ®çš„é¢‘ç‡èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯ä¼ è¾“è¿‡ç¨‹ä¸­æœ€å¤§é¢‘ç‡ä¸æœ€å°é¢‘ç‡çš„èŒƒå›´ã€‚</p><p>å¸¦å®½ä¸­è®¡ç®—æœºç½‘ç»œä¸­çš„æ„ä¹‰ï¼š</p><p>ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ï¼Œå› æ­¤ç½‘ç»œå¸¦å®½è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ä¸ªç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡ã€‚</p><p>å•ä½ï¼šb&#x2F;s(kb&#x2F;s, Mb&#x2F;s, Gb&#x2F;s, Tb&#x2F;s)ï¼Œä¸é€Ÿç‡ç›¸åŒã€‚</p><p>åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­çš„å®½å¸¦å¸¦å®½é™¤ä»¥8ï¼Œä¸€èˆ¬å°±æ˜¯å¹³æ—¶ä½¿ç”¨ä¸­çš„æœ€é«˜ä¼ è¾“é€Ÿç‡ã€‚ï¼ˆ1B &#x3D; 8bitï¼‰</p><p>æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„è®¡ç®—æœºç½‘ç»œæ€§èƒ½æŒ‡æ ‡ã€‚ç›´æ¥å…³ç³»ç½‘ç»œçš„åº”ç”¨ä½“éªŒã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ€§èƒ½æŒ‡æ ‡-3"><p>ååé‡è¡¨ç¤º<strong>åœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚</strong></p><p>ååé‡è¢«ç»å¸¸ç”¨äºå¯¹ç°å®ä¸–ç•Œä¸­çš„ç½‘ç»œçš„ä¸€ç§æµ‹é‡ï¼Œä»¥ä¾¿çŸ¥é“å®é™…ä¸Šåˆ°åº•<strong>æœ‰å¤šå°‘æ•°æ®é‡èƒ½å¤Ÿé€šè¿‡ç½‘ç»œ</strong>ã€‚</p><p>ååé‡å—ç½‘ç»œçš„<strong>å¸¦å®½æˆ–é¢å®šé€Ÿç‡</strong>çš„é™åˆ¶ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ€§èƒ½æŒ‡æ ‡-4"><p>å‘é€æ—¶å»¶ï¼šæºä¸»æœºå°†åˆ†ç»„å‘é€å‡ºå»äº§ç”Ÿçš„æ—¶å»¶ã€‚</p><p>è®¡ç®—æ–¹å¼ï¼š åˆ†ç»„é•¿åº¦(b) &#x2F; å‘é€é€Ÿç‡(b&#x2F;s)ã€‚</p><p>å‘é€é€Ÿç‡ &#x3D; min[ç½‘å¡å‘é€é€Ÿç‡ï¼Œä¿¡é“å¸¦å®½ï¼Œäº¤æ¢æœºæˆ–è·¯ç”±å™¨çš„æ¥å£é€Ÿç‡]</p><p>å‘é€æ•ˆç‡æ˜¯ä¸€ä¸ªçŸ­æ¿æ•ˆåº”ï¼Œç”±é€Ÿç‡æœ€ä½çš„æ¨¡å—å†³å®šï¼Œæ‰€ä»¥åœ¨é€‰æ‹©ç½‘çº¿ã€è·¯ç”±å™¨ç­‰è®¾å¤‡æ—¶ï¼Œè¦è€ƒè™‘åˆ°æ•´ä½“çš„é€Ÿç‡å¹³è¡¡é—®é¢˜ã€‚</p><p>ä¼ æ’­æ—¶å»¶:åˆ†ç»„åœ¨çº¿è·¯ä¸­ä¼ æ’­äº§ç”Ÿçš„æ—¶å»¶ã€‚</p><p>è®¡ç®—æ–¹å¼ï¼šä¿¡é“é•¿åº¦(m) &#x2F; ç”µç£æ³¢ä¼ æ’­é€Ÿç‡(m&#x2F;s)</p><p>å¤„ç†æ—¶å»¶ï¼šè·¯ç”±å™¨æ”¶åˆ°åˆ†ç»„åå¯¹å…¶è¿›è¡Œå­˜å‚¨è½¬å‘äº§ç”Ÿçš„æ—¶å»¶ã€‚</p><p>ä¸€èˆ¬ä¸æ–¹ä¾¿è®¡ç®—ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ€§èƒ½æŒ‡æ ‡-5"><p>ä¼ æ’­æ—¶å»¶å’Œå¸¦å®½çš„ä¹˜ç§¯ã€‚</p><p>è‹¥å‘é€ç«¯è¿ç»­å‘é€æ•°æ®ï¼Œåˆ™åœ¨æ‰€å‘é€çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹å³å°†åˆ°è¾¾ç»ˆç‚¹æ—¶ï¼Œå‘é€ç«¯å°±å·²ç»å‘é€äº†æ—¶å»¶å¸¦å®½ç§¯ä¸ªæ¯”ç‰¹ã€‚</p><p>å®é™…ä¸Šå°±æ˜¯<strong>ä¸€ä¸ªæ¯”ç‰¹åˆ°è¾¾ç»ˆç‚¹çš„å•ä½æ—¶é—´å†…ä¼ è¾“çš„æ¯”ç‰¹ä¸ªæ•°</strong>ã€‚</p><p>é“¾è·¯çš„æ—¶å»¶å¸¦å®½ç§¯åˆç§°ä¸ºä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ€§èƒ½æŒ‡æ ‡-6"><p>ä¸€ä¸ªç½‘ç»œè¯·æ±‚åŒå‘äº¤äº’ä¸€æ¬¡æ‰€éœ€çš„æ—¶é—´ã€‚</p><p>å¾€è¿”æ—¶é—´RTTä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½æŒ‡æ ‡</p><p>å¯ä»¥æ›´å¥½çš„äº†è§£åˆ°ç½‘ç»œçš„æƒ…å†µã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ€§èƒ½æŒ‡æ ‡-7"><p><strong>ä¿¡é“åˆ©ç”¨ç‡</strong>ï¼šç”¨æ¥è¡¨ç¤ºæŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„ï¼ˆæœ‰æ•°æ®é€šè¿‡ï¼‰ã€‚</p><p><strong>ç½‘ç»œåˆ©ç”¨ç‡</strong>æ˜¯å…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡ã€‚</p><p>æ ¹æ®æ’é˜Ÿè®ºï¼Œå½“æŸä¿¡é“çš„åˆ©ç”¨ç‡å¢å¤§æ—¶ï¼Œè¯¥ä¿¡é“å¼•èµ·çš„æ—¶å»¶ä¹Ÿä¼šè¿…é€Ÿå¢å¤§ã€‚å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/23.png" alt="1"></p><p>å½“ç½‘ç»œåˆ©ç”¨ç‡è¾¾åˆ°50ï¼…æ—¶ï¼Œæ—¶å»¶å°±è¦åŠ å€ã€‚</p><p>å½“ç½‘ç»œåˆ©ç”¨ç‡è¶…è¿‡50ï¼…æ—¶ï¼Œæ—¶å»¶å°±æ€¥å‰§å¢å¤§ã€‚</p><p>å½“ç½‘ç»œåˆ©ç”¨ç‡æ¥è¿‘100ï¼…æ—¶ï¼Œæ—¶å»¶è¶‹äºæ— ç©·å¤§ã€‚</p><p>å› æ­¤è¦æ§åˆ¶ä¿¡é“åˆ©ç”¨ç‡ä¸è¶…è¿‡50ï¼…ï¼Œå¦åˆ™å°±è¦å‡†å¤‡æ‰©å®¹ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="æ€§èƒ½æŒ‡æ ‡-8"><p>ä¸¢åŒ…ç‡å³åˆ†ç»„ä¸¢å¤±ç‡ï¼Œæ˜¯æŒ‡åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡ã€‚</p><p>ä¸¢åŒ…ç‡å…·ä½“å¯åˆ†ä¸ºæ¥å£ä¸¢åŒ…ç‡ã€ç»“ç‚¹ä¸¢åŒ…ç‡ã€é“¾è·¯ä¸¢åŒ…ç‡ã€è·¯å¾„ä¸¢åŒ…ç‡ã€ç½‘ç»œä¸¢åŒ…ç‡ç­‰ã€‚</p><p>åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«ç»“ç‚¹ä¸¢å¼ƒã€‚</p><p>åˆ†ç»„åˆ°è¾¾ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶è¢«ä¸¢å¼ƒï¼Œåœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å°±å¯èƒ½é€ æˆç½‘ç»œæ‹¥å¡ã€‚</p><p>ä¸¢åŒ…ç‡åæ˜ äº†ç½‘ç»œçš„æ‹¥å¡æƒ…å†µã€‚</p><p>æ— æ‹¥å¡æ—¶ä¸¢åŒ…ç‡ä¸º0</p><p>è½»åº¦æ‹¥å¡æ—¶ä¸¢åŒ…ç‡ä¸º1ï¼…â€”4ï¼…</p><p>ä¸¥é‡æ‹¥å¡æ—¶ä¸¢åŒ…ç‡ä¸º5ï¼…-15ï¼…</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="å…­ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"><a href="#å…­ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„" class="headerlink" title="å…­ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"></a>å…­ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„</h2><h3 id="6-1-å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"><a href="#6-1-å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„" class="headerlink" title="6.1 å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"></a>6.1 å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„</h3><h5 id="OSIä½“ç³»ç»“æ„ï¼šæ˜¯æ³•å¾‹ä¸Šçš„å›½é™…æ ‡å‡†ã€‚"><a href="#OSIä½“ç³»ç»“æ„ï¼šæ˜¯æ³•å¾‹ä¸Šçš„å›½é™…æ ‡å‡†ã€‚" class="headerlink" title="OSIä½“ç³»ç»“æ„ï¼šæ˜¯æ³•å¾‹ä¸Šçš„å›½é™…æ ‡å‡†ã€‚"></a><strong>OSIä½“ç³»ç»“æ„</strong>ï¼š<strong>æ˜¯æ³•å¾‹ä¸Šçš„å›½é™…æ ‡å‡†ã€‚</strong></h5><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/24.png" alt="1"></p><h5 id="TCP-x2F-IPä½“ç³»ç»“æ„ï¼šæ˜¯å®é™…ä¸Šçš„å›½é™…æ ‡å‡†ã€‚"><a href="#TCP-x2F-IPä½“ç³»ç»“æ„ï¼šæ˜¯å®é™…ä¸Šçš„å›½é™…æ ‡å‡†ã€‚" class="headerlink" title="TCP&#x2F;IPä½“ç³»ç»“æ„ï¼šæ˜¯å®é™…ä¸Šçš„å›½é™…æ ‡å‡†ã€‚"></a><strong>TCP&#x2F;IPä½“ç³»ç»“æ„</strong>ï¼š<strong>æ˜¯å®é™…ä¸Šçš„å›½é™…æ ‡å‡†ã€‚</strong></h5><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/25.png" alt="1"></p><p>TCP&#x2F;IPä½“ç³»ç»“æ„ç›¸å½“äºï¼š</p><p>å°†OSIç»“æ„çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åˆå¹¶æˆä¸ºç½‘ç»œæ¥å£å±‚ï¼Œå»æ‰äº†ä¼šè¯å±‚å’Œè¡¨ç¤ºå±‚ã€‚</p><p>åœ¨TCP&#x2F;IPåè®®ä¸­çš„ç½‘ç»œæ¥å£å±‚å¹¶æ²¡æœ‰è§„å®šä»€ä¹ˆå…·ä½“çš„å†…å®¹ï¼Œç›®çš„æ˜¯ä¸ºäº†å…è®¸ä»»ä½•å½¢å¼çš„ç½‘ç»œæ¥å£ä½¿ç”¨TCP&#x2F;IPåè®®ã€‚</p><p>æ‰€ä»¥å®é™…ä¸ŠTCP&#x2F;IPåè®®åªæœ‰ä¸‰å±‚ï¼šç½‘é™…å±‚ã€è¿è¾“å±‚ã€åº”ç”¨å±‚ã€‚</p><p>å…¶ä¸­ï¼š</p><p>ç½‘é™…å±‚æ ¸å¿ƒåè®®æ˜¯IPåè®®ã€‚</p><p>è¿è¾“å±‚çš„ä¸¤ä¸ªé‡è¦åè®®ï¼šTCP(å¯é ä¼ è¾“)ã€UDP(ä¸å¯é ä¼ è¾“)ã€‚</p><p>åº”ç”¨å±‚æœ‰å¤§é‡çš„åº”ç”¨åè®®ï¼šHTTPã€SMTPç­‰ç­‰ã€‚</p><p>å±‚æ¬¡ä¹‹é—´å…³ç³»ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/26.png" alt="1"></p><h5 id="åŸç†ä½“ç³»ç»“æ„"><a href="#åŸç†ä½“ç³»ç»“æ„" class="headerlink" title="åŸç†ä½“ç³»ç»“æ„"></a>åŸç†ä½“ç³»ç»“æ„</h5><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/27.png" alt="1"></p><p>æ­¤ç§ç»“æ„çš„å‡ºç°æ—¶ä¾¿äºå­¦ä¹ ã€‚</p><p>æ­¤ç§ç»“æ„ç›¸å½“äºæŠŠTCP&#x2F;IPåè®®ä¸­çš„ç½‘ç»œæ¥å£å±‚è¿˜åŸæˆæ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ã€‚ç½‘é™…å±‚è¿˜åŸæˆç½‘ç»œå±‚ã€‚</p><p><strong>åœ¨æ¥ä¸‹æ¥çš„å­¦ä¹ ä¸­ä¸»è¦ä½¿ç”¨è¯¥ç§æ¨¡å‹ã€‚</strong></p><h3 id="6-2-è®¡ç®—æœºç½‘ç»œç»“æ„åˆ†å±‚çš„å¿…è¦æ€§"><a href="#6-2-è®¡ç®—æœºç½‘ç»œç»“æ„åˆ†å±‚çš„å¿…è¦æ€§" class="headerlink" title="6.2 è®¡ç®—æœºç½‘ç»œç»“æ„åˆ†å±‚çš„å¿…è¦æ€§"></a>6.2 è®¡ç®—æœºç½‘ç»œç»“æ„åˆ†å±‚çš„å¿…è¦æ€§</h3><ol><li>è®¡ç®—æœºç½‘ç»œæ˜¯ä¸ªéå¸¸å¤æ‚çš„ç³»ç»Ÿ</li><li>â€œåˆ†å±‚â€å¯å°†åºå¤§è€Œå¤æ‚çš„é—®é¢˜ï¼Œè½¬åŒ–ä¸ºè‹¥å¹²è¾ƒå°çš„å±€éƒ¨é—®é¢˜</li></ol><p>åŸºäºä»¥ä¸ŠåŸå› é€‰æ‹©å¯¹è®¡ç®—æœºç½‘ç»œè¿›è¡Œåˆ†å±‚ã€‚</p><h5 id="å…¶ä¸­å„å±‚çš„ä¸»è¦è§£å†³é—®é¢˜ï¼š"><a href="#å…¶ä¸­å„å±‚çš„ä¸»è¦è§£å†³é—®é¢˜ï¼š" class="headerlink" title="å…¶ä¸­å„å±‚çš„ä¸»è¦è§£å†³é—®é¢˜ï¼š"></a>å…¶ä¸­å„å±‚çš„ä¸»è¦è§£å†³é—®é¢˜ï¼š</h5><div class="tabs" id="å„å±‚è§£å†³é—®é¢˜"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å„å±‚è§£å†³é—®é¢˜-1">ç‰©ç†å±‚</button></li><li class="tab"><button type="button" data-href="#å„å±‚è§£å†³é—®é¢˜-2">æ•°æ®é“¾è·¯å±‚</button></li><li class="tab"><button type="button" data-href="#å„å±‚è§£å†³é—®é¢˜-3">ç½‘ç»œå±‚</button></li><li class="tab"><button type="button" data-href="#å„å±‚è§£å†³é—®é¢˜-4">è¿è¾“å±‚</button></li><li class="tab"><button type="button" data-href="#å„å±‚è§£å†³é—®é¢˜-5">åº”ç”¨å±‚</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å„å±‚è§£å†³é—®é¢˜-1"><ul><li>é‡‡ç”¨æ€æ ·çš„ä¼ è¾“åª’ä½“ï¼ˆä»‹è´¨ï¼‰ï¼Ÿ</li><li>é‡‡ç”¨æ€æ ·çš„ç‰©ç†æ¥å£ï¼Ÿ</li><li>ä½¿ç”¨æ€æ ·çš„ä¿¡å·è¡¨ç¤ºæ¯”ç‰¹0å’Œ1ï¼Ÿ</li></ul><p><strong>è§£å†³ä»¥ä¸Šé—®é¢˜åå°±å¯ä»¥å®ç°01ä¿¡å·åœ¨è®¡ç®—æœºä¹‹é—´çš„ä¼ è¾“ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å„å±‚è§£å†³é—®é¢˜-2"><ul><li>å¦‚ä½•æ ‡è¯†ç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆä¸»æœºç¼–å€é—®é¢˜ï¼Œä¾‹å¦‚MACåœ°å€ï¼‰ï¼Ÿ</li><li>å¦‚ä½•ä»ä¿¡å·æ‰€è¡¨ç¤ºçš„ä¸€è¿ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºåœ°å€å’Œæ•°æ®ï¼Ÿ</li><li>å¦‚ä½•åè°ƒå„ä¸»æœºé€šä¿¡ï¼ˆä¾‹å¦‚ï¼Œå„ä¸»æœºäº‰ç”¨æ€»çº¿ï¼Œäº¤æ¢æœºçš„å®ç°åŸç†ï¼‰ï¼Ÿ</li></ul><p><strong>è§£å†³æ­¤é—®é¢˜åå¯ä»¥å®ç°åˆ†ç»„åœ¨ä¸€ä¸ªç½‘ç»œä¸Šä¼ è¾“ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å„å±‚è§£å†³é—®é¢˜-3"><ul><li>å¦‚ä½•æ ‡è¯†å„ç½‘ç»œä»¥åŠç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆç½‘ç»œå’Œä¸»æœºå…±åŒç¼–å€çš„é—®é¢˜ï¼Œä¾‹å¦‚IPåœ°å€ï¼‰ï¼Ÿ</li><li>è·¯ç”±å™¨å¦‚ä½•è½¬å‘åˆ†ç»„ï¼Œå¦‚ä½•è¿›è¡Œè·¯ç”±é€‰æ‹©?</li></ul><p><strong>è§£å†³æ­¤é—®é¢˜åå¯ä»¥å®ç°åˆ†ç»„åœ¨ç½‘ç»œé—´ä¼ è¾“ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å„å±‚è§£å†³é—®é¢˜-4"><ul><li>å¦‚ä½•è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡ï¼Ÿ</li><li>å‡ºç°ä¼ è¾“é”™è¯¯æ—¶å¦‚ä½•å¤„ç†ï¼Ÿ</li></ul><p><strong>è§£å†³æ­¤é—®é¢˜åå¯ä»¥å®ç°è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å„å±‚è§£å†³é—®é¢˜-5"><p>é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šçš„ç½‘ç»œåº”ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼šæ”¯æŒä¸‡ç»´ç½‘åº”ç”¨çš„HTTPåè®®ï¼Œæ”¯æŒç”µå­é‚®ä»¶çš„SMTPåè®®ï¼Œæ”¯æŒæ–‡ä»¶ä¼ é€çš„FTPåè®®ã€‚</p><p><strong>è§£å†³æ­¤é—®é¢˜åå¯ä»¥å®ç°è®¡ç®—æœºç½‘ç»œæ‰€è§£å†³çš„æ‰€æœ‰é—®é¢˜ã€‚</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><em>åœ¨æ­¤ä¸€å±‚ä¸€å±‚çš„é—®é¢˜è§£å†³ä¸­è¾¹é€æ­¥ä»ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€è¿è¾“å±‚ã€åº”ç”¨å±‚ç»“å±€é—®é¢˜ï¼Œå®ç°ç›®çš„ï¼Œè¿™ä¹Ÿæ˜¯åˆ†å±‚æ€æƒ³è§£å†³é—®é¢˜çš„æœ€å¥½æç°ã€‚</em></p><h3 id="6-3-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚æ€æƒ³ä¸¾ä¾‹"><a href="#6-3-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚æ€æƒ³ä¸¾ä¾‹" class="headerlink" title="6.3 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚æ€æƒ³ä¸¾ä¾‹"></a>6.3 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚æ€æƒ³ä¸¾ä¾‹</h3><p>ä»¥æ˜“äºå­¦ä¹ çš„äº”å±‚ç»“æ„æ€æƒ³ä¸ºä¾‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/28.png" alt="1"></p><p>åœ¨äº”å±‚ç»“æ„ä¸­ï¼Œå„å±‚è´Ÿè´£ä»»åŠ¡å¦‚ä¸‹ï¼š</p><p>åº”ç”¨å±‚ï¼šæŒ‰ç…§httpè¯·æ±‚çš„åè®®ï¼Œæ„å»ºæŠ¥æ–‡ã€‚ç„¶åäº¤ä»˜ç»™è¿è¾“å±‚å¤„ç†ã€‚</p><p>è¿è¾“å±‚ï¼šç»™httpè¯·æ±‚åŠ ä¸Šä¸€ä¸ªå¤´éƒ¨ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªTOPæŠ¥æ–‡æ®µã€‚å…¶å¤´éƒ¨çš„ä½œç”¨æ˜¯è¯†åˆ«è¿›ç¨‹å’Œå®ç°å¯é ä¼ è¾“ï¼ˆTCPçš„ç‰¹ç‚¹ï¼‰ã€‚è€Œåäº¤ç»™ç½‘ç»œå±‚å¤„ç†ã€‚</p><p>ç½‘ç»œå±‚ï¼šç»™TCPæŠ¥æ–‡æ®µåŠ ä¸Šä¸€ä¸ªIPå¤´éƒ¨ï¼Œä½¿å…¶æˆä¸ºIPæ•°æ®æŠ¥ã€‚å…¶é¦–éƒ¨ä½œç”¨æ˜¯ä¸ºäº†ä½¿è¯¥æ•°æ®æ®µå¯ä»¥åœ¨äº’è”ç½‘ä¸Šä¼ è¾“ã€‚è€Œåå°†å…¶äº¤ä»˜ç»™æ•°æ®é“¾è·¯å±‚å¤„ç†ã€‚</p><p>æ•°æ®é“¾è·¯å±‚ï¼šç»™IPæ•°æ®æŠ¥æ·»åŠ ä¸€ä¸ªé¦–éƒ¨å’Œä¸€ä¸ªå°¾éƒ¨ï¼Œä½¿å…¶æˆä¸ºå¸§ï¼ˆæŒ‰å¸§ä¼ è¾“ï¼‰ã€‚</p><p>å…¶é¦–éƒ¨çš„ä½œç”¨æ˜¯ä½¿å…¶èƒ½å¤Ÿåœ¨ä¸€æ®µé“¾è·¯æˆ–è€…ç½‘ç»œä¸Šä¼ è¾“ï¼Œä»¥åŠè¢«ç›®çš„äº¤æ¢æœºæ¥æ”¶å¹¶å¤„ç†ã€‚</p><p>å…¶å°¾éƒ¨çš„ä½œç”¨æ˜¯ä¸ºäº†è®©ç›®çš„ä¸»æœºæ£€æŸ¥æ˜¯å¦æœ‰è¯¯ç ã€‚</p><p>æœ€åå°†å…¶äº¤ç»™ç‰©ç†å±‚ã€‚</p><p>ç‰©ç†å±‚ï¼šå°†å¸§çœ‹ä½œæ˜¯æ¯”ç‰¹æµï¼ˆ01ç¼–ç ï¼‰ï¼Œç”±äºæ˜¯åœ¨ä»¥å¤ªç½‘ä¼ è¾“ï¼Œå› è€Œç»™å…¶åŠ ä¸Šå‰å¯¼ç ï¼Œä¾¿äºä¼ è¾“ã€‚å¹¶ä¸”å°†å…¶å˜æˆç›¸åº”çš„ä¿¡å·å‘é€åˆ°ä¼ è¾“åª’ä½“ã€‚</p><p>æ­¤æ—¶ï¼Œå‘é€ç«¯å¤„ç†ç»“æŸã€‚</p><p>ç”±äºæ¥æ”¶ç«¯çš„è¿‡ç¨‹å°±æ˜¯å‘é€ç«¯çš„é€†è¿‡ç¨‹ï¼Œä¸å†è¿›è¡Œå•°å—¦ã€‚</p><h3 id="6-4-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„æœ¯è¯­"><a href="#6-4-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„æœ¯è¯­" class="headerlink" title="6.4 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„æœ¯è¯­"></a>6.4 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„æœ¯è¯­</h3><h5 id="å®ä½“ï¼š"><a href="#å®ä½“ï¼š" class="headerlink" title="å®ä½“ï¼š"></a>å®ä½“ï¼š</h5><p>å®ä½“æ˜¯æŒ‡<strong>ä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹ã€‚</strong></p><p>å¯¹ç­‰å®ä½“æ˜¯æŒ‡<strong>é€šä¿¡åŒæ–¹ç›¸åŒå±‚æ¬¡ä¸­çš„å®ä½“ã€‚</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/29.png" alt="1"></p><p>åœ¨æ­¤å›¾ä¸­ï¼ŒAã€Bç­‰æ˜¯å®ä½“ï¼ŒAã€Hæ˜¯å¯¹ç­‰å®ä½“ã€‚</p><h5 id="åè®®ï¼š"><a href="#åè®®ï¼š" class="headerlink" title="åè®®ï¼š"></a>åè®®ï¼š</h5><p>åè®®æ˜¯<strong>æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€»è¾‘é€šä¿¡çš„è§„åˆ™çš„é›†åˆ</strong>ï¼Œä¾‹å¦‚TCP&#x2F;IPåè®®ã€‚</p><p>åè®®çš„ä¸‰è¦ç´ ï¼šè¯­æ³•ï¼Œè¯­ä¹‰ï¼ŒåŒæ­¥ã€‚</p><p>è¯­æ³•å®šä¹‰æ‰€äº¤æ¢ä¿¡æ¯çš„æ ¼å¼ã€‚ä¾‹å¦‚ï¼ŒIPæ•°æ®æŠ¥çš„æ ¼å¼ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/30.png" alt="1"></p><p>è¯­æ³•å®šä¹‰äº†æ‰€äº¤æ¢ä¿¡æ¯ç”±é‚£äº›å­—æ®µä»¥åŠä½•ç§é¡ºåºæ„æˆã€‚</p><p>è¯­ä¹‰å®šä¹‰é€šä¿¡åŒæ–¹æ‰€è¦å®Œæˆçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œä¸»æœºHTTPçš„GETè¯·æ±‚ç»™WebæœåŠ¡å™¨ï¼ŒWebæœåŠ¡å™¨æ”¶åˆ°åæ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œç„¶åç»™ä¸»æœºå‘å›HTTPçš„å“åº”ã€‚</p><p>åŒæ­¥å®šä¹‰é€šä¿¡åŒæ–¹çš„æ—¶åºå…³ç³»ã€‚ä¾‹å¦‚ï¼ŒTCPçš„â€œä¸‰æŠ¥æ–‡æ¡æ‰‹â€å»ºç«‹è¿æ¥ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/31.png" alt="1"></p><p>å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…ç§°ä¸ºè¯¥å±‚çš„åè®®æ•°æ®å•å…ƒPDUã€‚<br>ä¸¾ä¾‹ï¼š</p><p>åº”ç”¨å±‚ï¼šæŠ¥æ–‡(message)</p><p>è¿è¾“å±‚ï¼šTCPæŠ¥æ–‡æ®µ(segment)æˆ–UDPç”¨æˆ·æ•° æ®æŠ¥(datagram)</p><p>ç½‘ç»œå±‚ï¼šåˆ†ç»„(packet)æˆ–IPæ•°æ®æŠ¥</p><p>æ•°æ®é“¾è·¯å±‚ï¼šå¸§(frame)</p><p>ç‰©ç†å±‚ï¼šæ¯”ç‰¹æµ(bit stram)</p><p>ä»¥ä¸Šçš„ä¾¿æ˜¯å„å±‚çš„åè®®æ•°æ®å•å…ƒPDUã€‚</p><p>åè®®å¯¹äºå®ä½“æ¥è¯´æ˜¯æŠ½è±¡çš„ï¼Œçœ‹ä¸è§å†…åœ¨ï¼Œåªèƒ½çœ‹è§æä¾›çš„åŠŸèƒ½ã€‚</p><h5 id="æœåŠ¡ï¼š"><a href="#æœåŠ¡ï¼š" class="headerlink" title="æœåŠ¡ï¼š"></a>æœåŠ¡ï¼š</h5><p>åœ¨åè®®ä¸­ï¼Œæ¯å±‚ä¸ä½†è¦å®ç°æœ¬å±‚åè®®ï¼Œè¿˜è¦ä½¿ç”¨ä¸‹ä¸€å±‚æ‰€æä¾›çš„æœåŠ¡ã€‚</p><p>å¹¶ä¸”åœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€»è¾‘é€šä¿¡è¦æ˜¯çš„æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚</p><p>åè®®æ˜¯<strong>æ°´å¹³</strong>çš„ï¼ŒæœåŠ¡æ˜¯<strong>å‚ç›´çš„</strong>ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/32.png" alt="1"></p><p>æœåŠ¡è®¿é—®ç‚¹ï¼šåœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>æ•°æ®é“¾è·¯å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºå¸§çš„â€œç±»å‹â€å­—æ®µã€‚</p><p>ç½‘ç»œå±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºIPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„â€œåè®®å­—æ®µâ€ã€‚</p><p>è¿è¾“å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºâ€œç«¯å£å·â€ã€‚</p><h5 id="æœåŠ¡åŸè¯­ï¼š"><a href="#æœåŠ¡åŸè¯­ï¼š" class="headerlink" title="æœåŠ¡åŸè¯­ï¼š"></a>æœåŠ¡åŸè¯­ï¼š</h5><p>ä¸Šå±‚ä½¿ç”¨ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡å¿…é¡»é€šè¿‡ä¸ä¸‹å±‚äº¤æ¢ä¸€äº›å‘½ä»¤ã€‚</p><h5 id="æœåŠ¡æ•°æ®å•å…ƒSDUï¼š"><a href="#æœåŠ¡æ•°æ®å•å…ƒSDUï¼š" class="headerlink" title="æœåŠ¡æ•°æ®å•å…ƒSDUï¼š"></a>æœåŠ¡æ•°æ®å•å…ƒSDUï¼š</h5><p>åŒä¸€ç³»ç»Ÿå†…ï¼Œå±‚ä¸å±‚ä¹‹é—´äº¤æ¢çš„æ•°æ®åŒ…ã€‚</p><p>å¤šä¸ªSDUå¯ä»¥åˆæˆä¸ºä¸€ä¸ªPDUï¼›ä¸€ä¸ªSDUä¹Ÿå¯åˆ’åˆ†ä¸ºå‡ ä¸ªPDUã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/33.png" alt="1"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github_copilotä½¿ç”¨</title>
      <link href="/2023/03/21/github-copilot%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/03/21/github-copilot%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/5.png" alt="1"></p><p>å‰å‡ å¤©<code>gpt-4</code>å‘å¸ƒä¼šå±•å‡ºå…¨æ–°çš„äººå·¥æ™ºèƒ½ï¼Œå†™ä»£ç èƒ½åŠ›è¶…å¼ºï¼Œå¯¼è‡´å°ç ´ç«™ä¸Šåˆäººæ‰æµæµçš„è®¨è®ºï¼Œå®ƒçš„è¶…å¼ºåŠŸèƒ½åœ¨ä»£ç æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯ä¸ªæœˆ<strong>10ç¾å…ƒ</strong>çš„è´¹ç”¨å®åœ¨æ˜¯æ¶ˆè´¹ä¸èµ·ï¼Œäºæ˜¯æˆ‘åˆå…³æ³¨åˆ°äº†<code>github copilot</code>ï¼Œä¹Ÿæ˜¯æˆåŠŸä½¿ç”¨äº†ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œä½¿ç”¨<code>vscode</code>å€ŸåŠ©è¿™ä¸ªå·¥å…·æ„Ÿè§‰è¿˜è›®å¥½ç”¨çš„ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/3.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/4.png" alt="1"></p><h2 id="Github-Copilotæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Github-Copilotæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Github Copilotæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Github Copilotæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>GitHub Copilot</code>æ˜¯ä¸€æ¬¾åŸºäºäººå·¥æ™ºèƒ½çš„ä»£ç è‡ªåŠ¨ç”Ÿæˆå·¥å…·ï¼Œå®ƒç”±<code>GitHub</code>å’Œ<code>OpenAI</code>è”åˆå¼€å‘ã€‚å®ƒä½¿ç”¨äº†ä¸€ä¸ªåºå¤§çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œå³<code>OpenAI</code>çš„<code>GPT</code>æ¨¡å‹ï¼Œæ¥ç†è§£ç¨‹åºå‘˜æ‰€è¾“å…¥çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œå¹¶ç”Ÿæˆä¸æè¿°ç›¸å…³çš„ä»£ç ç‰‡æ®µã€‚ä½¿ç”¨<code>Copilot</code>ï¼Œç¨‹åºå‘˜å¯ä»¥é€šè¿‡è¾“å…¥è‡ªç„¶è¯­è¨€æè¿°æ¥ç”Ÿæˆä»£ç ï¼Œä»è€Œæé«˜ç¼–å†™ä»£ç çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚<code>Copilot</code>å¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­ç”Ÿæˆä»£ç ï¼Œå¹¶å¯ä»¥è‡ªåŠ¨å®Œæˆå‡½æ•°ã€ç±»ã€å˜é‡ç­‰çš„å®šä¹‰å’Œå‘½åï¼Œè¿˜å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡ç”Ÿæˆæ›´åŠ ç²¾ç¡®çš„ä»£ç ã€‚<code>Copilot</code>è¿˜å¯ä»¥åœ¨<code>GitHub</code>ä¸Šçš„ä»£ç åº“ä¸­æœç´¢ç›¸å…³çš„ä»£ç ç‰‡æ®µï¼Œå¹¶æ ¹æ®ä¸Šä¸‹æ–‡æ¨èæœ€ä½³çš„ä»£ç å®ç°æ–¹å¼ã€‚Copilotæ˜¯ä¸€ä¸ªéå¸¸æœ‰æ½œåŠ›çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ç¨‹åºå‘˜æ›´å¿«ã€æ›´å‡†ç¡®åœ°ç¼–å†™ä»£ç ï¼Œå¹¶å¯èƒ½æ”¹å˜æœªæ¥ç¼–ç¨‹çš„æ–¹å¼ã€‚</p><h2 id="å¦‚ä½•åœ¨VsCodeä¸­ä½¿ç”¨ï¼Ÿ"><a href="#å¦‚ä½•åœ¨VsCodeä¸­ä½¿ç”¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨VsCodeä¸­ä½¿ç”¨ï¼Ÿ"></a>å¦‚ä½•åœ¨VsCodeä¸­ä½¿ç”¨ï¼Ÿ</h2><blockquote><p>å…¶ä»–çš„ä¾‹å¦‚JetBrainsä¸­ä½¿ç”¨æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œå¤§å·®ä¸å·®ï¼</p></blockquote><p>é¦–å…ˆå·²ç»åœ¨vscodeä¸­ä¸‹è½½äº†æ’ä»¶ï¼Œå¹¶ç™»å½•æˆåŠŸï¼</p><p><code>GitHub Copilot</code>æ˜¯ä¸€æ¬¾åŸºäºäººå·¥æ™ºèƒ½æŠ€æœ¯çš„ä»£ç åŠ©æ‰‹ï¼Œå®ƒå¯ä»¥ä¸ºä½ è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œå¹¶æä¾›ä¸€äº›ä»£ç æç¤ºã€‚å½“ä½ åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œ<code>Copilot</code>ä¼šåœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºä¸€äº›æµ…è‰²çš„ä»£ç æç¤ºï¼Œå¹¶åœ¨ä½ æŒ‰ä¸‹<code>Tab</code>é”®æ—¶è‡ªåŠ¨è¡¥å…¨ä»£ç ã€‚</p><p>å¦‚æœä½ å¸Œæœ›<code>Copilot</code>è‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä»£ç ï¼Œå¯ä»¥åœ¨å‘½ä»¤é¢æ¿ä¸­æœç´¢â€œ<strong>GitHub Copilot: å»ºè®®ä¸‹ä¸€è¡Œ</strong>â€æˆ–â€œ<strong>GitHub Copilot: å»ºè®®ä¸‹ä¸€ä¸ªç‰‡æ®µ</strong>â€ï¼Œç„¶åé€‰æ‹©ä½ æƒ³è¦çš„å»ºè®®ã€‚<code>Copilot</code>å°†ä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä»£ç ï¼Œå¹¶åœ¨å…‰æ ‡ä½ç½®æ’å…¥ã€‚</p><p>å¦‚æœä½ å‘ç°<code>Copilot</code>çš„ä»£ç æç¤ºé¢œè‰²å¤ªæµ…ï¼Œéš¾ä»¥çœ‹æ¸…ï¼Œä½ å¯ä»¥å°è¯•æ›´æ”¹ç¼–è¾‘å™¨çš„ä¸»é¢˜æˆ–è°ƒæ•´<code>Copilot</code>çš„é¢œè‰²è®¾ç½®ã€‚ä½ å¯ä»¥åœ¨<code>VS Code</code>çš„è®¾ç½®ä¸­æœç´¢<code>â€œcopilotâ€</code>ï¼Œç„¶åæ›´æ”¹ç›¸åº”çš„è®¾ç½®ï¼Œä¾‹å¦‚<code>â€œcopilot.showSuggestionDecorationsâ€</code>å’Œ<code>â€œcopilot.suggestionDecorationColorâ€</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> copilot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Verceléƒ¨ç½²ç½‘ç«™</title>
      <link href="/2023/03/14/Vercel%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99/"/>
      <url>/2023/03/14/Vercel%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/16.jpg" alt="1"></p><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ç”¨æ¥è®°å½•ä¸€ä¸‹å°†ç½‘ç«™ä»£ç æäº¤åˆ°Githubä¸Šï¼Œå¹¶ä½¿ç”¨Vercelè¿›è¡Œéƒ¨ç½²ï¼Œè¿›è¡Œæœ‰æ•ˆç®¡ç†ï¼ğŸ˜</p></div><div class="note info simple"><p><strong>å‚è€ƒ: <a href="https://www.fomal.cc/posts/d7fb1ba1.html">å…è´¹å›¾åºŠç»¼åˆæ•™ç¨‹ | FomalhautğŸ¥</a></strong></p></div><h2 id="ä¸€ã€å»ºç«‹Githubä»“åº“cloneåˆ°æœ¬åœ°"><a href="#ä¸€ã€å»ºç«‹Githubä»“åº“cloneåˆ°æœ¬åœ°" class="headerlink" title="ä¸€ã€å»ºç«‹Githubä»“åº“cloneåˆ°æœ¬åœ°"></a>ä¸€ã€å»ºç«‹Githubä»“åº“cloneåˆ°æœ¬åœ°</h2><ol><li>è¿›å…¥<a href="https://github.com/">Githubå®˜ç½‘</a>æ³¨å†Œå¹¶ç™»å½•è‡ªå·±çš„è´¦å·ï¼Œåˆ°è‡ªå·±çš„ä¸ªäººä¸»é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„<code>+</code>ï¼Œå¹¶é€‰æ‹©<code>New Repository</code>åˆ›å»ºè‡ªå·±çš„ä»“åº“ã€‚</li></ol><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/1.jpg" alt="1"></p><ol start="2"><li>ä»“åº“åå­—éšæ„ï¼Œæè¿°ä¹Ÿå¯ä»¥è‡ªç”±å‘æŒ¥ï¼Œå¯è§æ€§æœ€å¥½é€‰<code>public</code>ï¼Œ<code>Readme</code>æ–‡ä»¶å¯ä»¥åˆ›å»ºï¼Œç„¶åç‚¹å‡»<code>Create Repository</code>åˆ›å»ºä»“åº“ã€‚</li></ol><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/2.jpg" alt="1"></p><ol start="3"><li><p>è®©ä½ çš„è®¡ç®—æœºä¸Githubå»ºç«‹é€šä¿¡ï¼Œä¸»è¦æ˜¯<code>åˆ›å»ºå…¬é’¥</code>ã€<code>ä¸Šä¼ å…¬é’¥</code>ã€<code>æ£€æŸ¥é€šä¿¡</code>è¿™å‡ æ­¥ï¼Œç¡®ä¿è®¡ç®—æœºæœ‰æƒé™è®¿é—®è¿œç¨‹ä»“åº“ï¼Œè¿™äº›å·²ç»å…ˆå‰åˆ›å»ºå¥½ã€‚</p></li><li><p>å…ˆåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä½ç½®å’Œåå­—éšæ„å°±å¯ä»¥ï¼Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹åå³é”®æ‰“å¼€<code>Git Bash</code>ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹ä»£ç æŠŠä¹‹å‰åˆ›å»ºçš„ä»“åº“æ‹·è´ä¸‹æ¥ï¼Œå…¶ä¸­<code>git clone</code>åé¢çš„ä¸œè¥¿è¦æ›¿æ¢æˆè‡ªå·±çš„ä»“åº“ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡è‡ªå·±ä»“åº“çš„sshé“¾æ¥æ¥è·å–ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:xiaoyutoua/blog.git</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/3.jpg" alt="1"></p></li></ol><h2 id="äºŒã€é¡¹ç›®æ¨é€"><a href="#äºŒã€é¡¹ç›®æ¨é€" class="headerlink" title="äºŒã€é¡¹ç›®æ¨é€"></a>äºŒã€é¡¹ç›®æ¨é€</h2><p>æˆ‘ä»¬åœ¨å¸¦æœ‰<code>Readme.md</code>æ–‡ä»¶å¤¹å³å‡»æ‰“å¼€<code>Git Bash</code>ï¼ˆæ³¨æ„çœ‹æ¸…æ¥šæ˜¯ä»€ä¹ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œå°†éœ€è¦pushåˆ°githubä¸Šçš„æ–‡ä»¶å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸‹æˆ–è€…å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ç­‰æ“ä½œï¼Œç„¶åä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŠŠæ›´æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œæœ€åä¸€æ­¥ä¸æˆåŠŸå¯èƒ½è¦å¤šè¯•å‡ æ¬¡ã€‚</p><p>æ³¨æ„ğŸ“Œ:</p><blockquote><p>å…³é”®æ–‡ä»¶æ˜¯.gitæ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ä¸githubä¸­ä½ çš„ä»“åº“å…³è”</p></blockquote><p>â—â—â—</p><blockquote><p>å¦‚æœä½ çš„ç›®çš„æ˜¯éƒ¨ç½²ç½‘ç«™ï¼Œé‚£ä¹ˆåªéœ€è¦ä¸Šä¼ é™æ€é¡µé¢æ–‡ä»¶ï¼Œå¹¶åˆ©ç”¨Verelä¸€é”®éƒ¨ç½²ï¼Œå…¶ä»–çš„å…¨éƒ¨ä»£ç æ–‡ä»¶æœ¬åœ°ä¿®æ”¹ï¼Œä¹‹åç”Ÿæˆé™æ€é¡µé¢æ–‡ä»¶å³å¯ã€‚<br>githubä»“åº“ä¸­å’Œvercelä¸­éƒ½åªæ˜¯é™æ€é¡µé¢æ–‡ä»¶<br>å¦‚æœéœ€è¦æ¨é€å…¨éƒ¨çš„ä»£ç æ–‡ä»¶åˆ°githubä¸Šå­˜å‚¨ï¼Œé‚£ä¹ˆéœ€è¦å†æ–°å»ºç«‹ä¸€ä¸ªåº“ï¼Œcloneåˆ°æœ¬åœ°ï¼Œå¹¶æ¨é€å…¨éƒ¨ä»£ç æ–‡ä»¶ç­‰ï¼ï¼ï¼</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†æ›´æ”¹æäº¤</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;å¡«å…¥ä½ æ­¤æ¬¡æ›´æ”¹çš„å†…å®¹å•¥çš„ï¼ˆå•¥éƒ½å¯ä»¥ï¼‰&quot;</span></span><br><span class="line"><span class="comment"># æ¨é€è‡³githubä»“åº“</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>æœ€åçœ‹è§å¦‚ä¸‹ä¿¡æ¯å°±ä»£è¡¨æ¨é€æˆåŠŸäº†</p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/4.jpeg" alt="1"></p><p>æˆ‘ä»¬å¯ä»¥åœ¨Githubä¸Šçœ‹åˆ°æ­¤æ¬¡æ¨é€çš„å†…å®¹</p><p>ä»¥åæˆ‘ä»¬åœ¨æœ¬åœ°æ›´æ”¹æ­¤é¡¹ç›®åï¼Œç›´æ¥æ‰§è¡Œä¸Šè¿°å‘½ä»¤å³å¯ä¿®æ”¹Githubä¸Šçš„å†…å®¹ã€‚</p><h2 id="ä¸‰ã€Staticaly-CDNåŠ é€Ÿ"><a href="#ä¸‰ã€Staticaly-CDNåŠ é€Ÿ" class="headerlink" title="ä¸‰ã€Staticaly CDNåŠ é€Ÿ"></a>ä¸‰ã€Staticaly CDNåŠ é€Ÿ</h2><p>ç›´æ¥è®¿é—®Githubä»“åº“çš„èµ„æºæ˜¯éå¸¸æ…¢çš„ï¼å› æ­¤æˆ‘ä»¬è¦ç”¨ä¸€äº›å…è´¹çš„CDNè¿›è¡ŒåŠ é€Ÿï¼Œ<code>Staticaly CDN</code>æ˜¯ç›®å‰å…è´¹CDNä¸­æ¯”è¾ƒå¥½ç”¨çš„å•¦ï¼Œä»–çš„åº”ç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æ ¼å¼ å…¶ä¸­ useræ˜¯ç”¨æˆ·å  repoæ˜¯ä»“åº“å  versionä»£è¡¨ç‰ˆæœ¬(tagæˆ–è€…åˆ†æ”¯ é»˜è®¤ä¸ºmain)  flieæ˜¯æ–‡ä»¶è·¯å¾„ </span><br><span class="line">https://cdn.staticaly.com/gh/user/repo@version/file</span><br><span class="line"></span><br><span class="line"># æ¯”å¦‚æˆ‘çš„ç¤ºä¾‹ä»“åº“å°±æ˜¯åŠ é€Ÿåœ°å€å°±æ˜¯è¿™ä¸ªå¤§å®¶å¯ä»¥å‚è€ƒå‚è€ƒ</span><br><span class="line">https://cdn.staticaly.com/gh/fomalhaut1998/pic_bed@main/img/p2.webp</span><br></pre></td></tr></table></figure><h2 id="å››ã€Vercel-éƒ¨ç½²"><a href="#å››ã€Vercel-éƒ¨ç½²" class="headerlink" title="å››ã€Vercel éƒ¨ç½²"></a>å››ã€Vercel éƒ¨ç½²</h2><p><strong>4.1 è¿›å…¥<a href="https://vercel.com/dashboard">Vercelæ§åˆ¶é¢æ¿</a>æ–°å»ºé¡¹ç›®ï¼Œå¹¶<code>é€šè¿‡Githubç»§ç»­</code>ï¼Œé€‰æ‹©å¯¼å…¥åˆšåˆšåˆ›å»ºçš„ä»“åº“ï¼Œç„¶åç›´æ¥éƒ¨ç½²å³å¯</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/5.jpeg" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/6.jpeg" alt="1"></p><p><strong>4.2 åœ¨è¿›å…¥è¯¥é¡¹ç›®æ§åˆ¶å°åï¼Œé€‰æ‹©å³ä¸Šè§’çš„<code>View Domains</code>æ·»åŠ è‡ªå®šä¹‰åŸŸå</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/7.jpg" alt="1"></p><p>ç„¶ååœ¨è¿™é‡Œè¾“å…¥ä½ éœ€è¦ç»‘å®šçš„åŸŸåã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/8.jpg" alt="1"></p><p>å¦‚æœä½ æ˜¯äºŒçº§åŸŸåï¼Œåˆ™æ·»åŠ åä»–ä¼šæç¤ºä½ æ·»åŠ ä¸€æ¡DNSè§£æè®°å½•ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/10.jpg" alt="1"></p><p>å¦‚æœä½ æ˜¯æ–°ä¹°çš„åŸŸåï¼Œç›´æ¥è¾“å…¥ä½ æ–°ä¹°çš„ä¸€çº§åŸŸåå³å¯ï¼Œä¾‹å¦‚<code>demo123.com</code>ï¼Œä»–ä¼šæ¨èä½ å°†<code>demo123.com</code>é‡å®šå‘è‡³<code>www.demo123.com</code>ï¼Œç‚¹<code>ADD</code>å³å¯ï¼Œç„¶åä»–ä¼šæç¤ºä½ æ·»åŠ ä¸¤æ¡è§£æè®°å½•ï¼Œä¸€ä¸ªæ˜¯<code>@</code>å¼€å¤´çš„å’Œ<code>CNAME</code>å¼€å¤´çš„ï¼Œæ·»åŠ è®°å½•çš„æ–¹æ³•å’ŒäºŒçº§åŸŸåä¸€è‡´ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/9.jpg" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/11.jpg" alt="1"></p><p><strong>4.3 åŸŸåè§£æ</strong></p><p>åœ¨<strong>é˜¿é‡Œäº‘</strong>æˆ–è€…<strong>è…¾è®¯äº‘</strong>åŸŸåè§£æè®°å½•é‡Œé¢æ·»åŠ å¦‚ä¸‹è®°å½•ï¼Œå…¶ä¸­è®°å½•ç±»å‹å¯¹åº”<code>Type</code>ï¼Œä¸»æœºè®°å½•å¯¹åº”<code>Name</code>ï¼Œè®°å½•å€¼å¯¹åº”<code>Value</code>ï¼Œå…¶ä»–çš„è®¾ç½®é»˜è®¤å³å¯ã€‚</p><p>ä»¥ä¸‹ä»¥ç¤ºä¾‹åœ¨è…¾è®¯äº‘è§£ææ­¥éª¤ï¼š</p><ul><li><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/12.jpg" alt="1"></p></li><li><p>ç‚¹å‡»è§£æå-&gt;æ·»åŠ è®°å½•</p></li><li><p>è®°å½•ç±»å‹ä¸º<code>Type</code>ï¼Œä¸»æœºè®°å½•ä¸º<code>Name</code>ï¼Œè®°å½•å€¼ä¸º<code>Value</code></p><p><img src="https://picbed.dai2yutou.space/article_img/Vercel%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/13.jpg" alt="1"></p></li></ul><p><strong>4.4 å›åˆ°VercelåˆšåˆšæŸ¥çœ‹åŸŸåçš„åœ°æ–¹ï¼Œå¦‚æœæ“ä½œæ²¡é—®é¢˜ï¼Œåº”è¯¥ä¼šæ˜¾ç¤ºåŸŸåé…ç½®æˆåŠŸçš„æç¤ºï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡è‡ªå®šä¹‰åŸŸåæ¥è®¿é—®æˆ‘ä»¬ç½‘ç«™æˆ–å›¾ç‰‡ç­‰èµ„æºäº†.</strong></p><p><strong>4.5 è®¿é—®</strong></p><p>ç›´æ¥è¾“å…¥åŸŸåè¿›è¡Œè®¿é—®ï¼Œå¦‚æœéœ€è¦è®¿é—®å…¶ä¸­å†…éƒ¨çš„å›¾ç‰‡æ–‡ä»¶ï¼Œæ¯”å¦‚ä½ çš„ç½‘ç«™æ˜¯ç”¨æ¥ä½œä¸ºå›¾åºŠä½œç”¨çš„ï¼Œåˆ™å¯ä»¥ç›´æ¥åŸŸå&#x2F;æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶â€¦</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vercel </tag>
            
            <tag> ç½‘ç«™éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ¿å­—ç¬¦ä¸²</title>
      <link href="/2023/03/08/%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2023/03/08/%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/15.png" alt="1"></p><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆTemplate Stringsï¼‰æ˜¯ JavaScript ä¸­ä¸€ç§ç‰¹æ®Šçš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥å®šä¹‰å¤æ‚çš„å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œæ”¯æŒå˜é‡æ›¿æ¢å’Œç‰¹å®šè¯­æ³•ã€‚å®ƒä»¬é€šå¸¸ä¹Ÿè¢«ç§°ä¸ºå­—ç¬¦ä¸²æ’å€¼ï¼ˆString Interpolationï¼‰ã€‚</p><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>æ¨¡æ¿å­—ç¬¦ä¸²æœ‰åŠ©äºåœ¨å­—ç¬¦ä¸²æ¨¡æ¿ä¸­ä½¿ç”¨å˜é‡ã€è¡¨è¾¾å¼ã€ä»¥åŠå‡½æ•°ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å¤æ‚çš„å­—ç¬¦ä¸²æ‹¼æ¥ã€‚</p><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><p>æ¨¡æ¿å­—ç¬¦ä¸²ä½¿ç”¨åå¼•å·ï¼ˆ&#96;ï¼‰æ¥ä»£æ›¿æ™®é€šå­—ç¬¦ä¸²ä¸­çš„å¼•å·ï¼ˆâ€™ æˆ– â€œï¼‰ï¼Œå˜é‡ä½¿ç”¨ ${} æ¥ä»£æ›¿æ™®é€šå­—ç¬¦ä¸²ä¸­çš„å˜é‡</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;Jack&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">22</span>;</span><br><span class="line"><span class="keyword">let</span> message = <span class="string">`My name is <span class="subst">$&#123;name&#125;</span>, and I am <span class="subst">$&#123;age&#125;</span> years old.`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ServletæŠ€æœ¯</title>
      <link href="/2023/03/08/Servlet%E6%8A%80%E6%9C%AF/"/>
      <url>/2023/03/08/Servlet%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/web_img/14.png" alt="1"></p><h3 id="1ã€åˆ›å»ºservletç±»ï¼Œå¹¶åœ¨é¡µé¢è¾“å‡ºHello-World"><a href="#1ã€åˆ›å»ºservletç±»ï¼Œå¹¶åœ¨é¡µé¢è¾“å‡ºHello-World" class="headerlink" title="1ã€åˆ›å»ºservletç±»ï¼Œå¹¶åœ¨é¡µé¢è¾“å‡ºHello World"></a>1ã€åˆ›å»ºservletç±»ï¼Œå¹¶åœ¨é¡µé¢è¾“å‡ºHello World</h3><p>æˆ‘ä»¬åœ¨é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>JAVA</code>é¡¹ç›®ï¼Œå¹¶è¿›è¡Œ<code>JAVAWEB</code>å’Œ<code>Tomcat</code>çš„é…ç½®</p><p>ç„¶ååœ¨<code>src</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>servlet</code>çš„<code>Servlet</code>ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/6.png" alt="1"></p><p>å®šä¹‰<code>@WebServlet(urlPatterns=&quot;/login.do&quot;)</code>ï¼Œå³å°†æ­¤<code>Servlet</code>ç±»æ˜ å°„ä¸º<code>login.do</code>ï¼Œç„¶åè¿è¡Œæ­¤<code>Servlet</code>ç±»ï¼Œ</p><p>å°†ç½‘å€è·¯å¾„æ”¹ä¸º<strong>localhost:8000&#x2F;é¡¹ç›®å&#x2F;login.do</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/7.png" alt="1"></p><p>å¯ä»¥çœ‹åˆ°åœ¨é¡µé¢ä¸Šè¾“å‡ºäº†<code>Hello World</code>ã€‚</p><h3 id="2ã€åˆ›å»ºè¡¨å•é¡µé¢å¹¶æäº¤åˆ°Servletç±»ä¸­"><a href="#2ã€åˆ›å»ºè¡¨å•é¡µé¢å¹¶æäº¤åˆ°Servletç±»ä¸­" class="headerlink" title="2ã€åˆ›å»ºè¡¨å•é¡µé¢å¹¶æäº¤åˆ°Servletç±»ä¸­"></a>2ã€åˆ›å»ºè¡¨å•é¡µé¢å¹¶æäº¤åˆ°Servletç±»ä¸­</h3><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p>é¦–å…ˆåœ¨é¡¹ç›®ç›®å½•ä¸‹çš„<code>WEB</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>html</code>é¡µé¢ï¼Œä¾‹å¦‚<code>a.html</code>ï¼Œç„¶åå†™ä¸Šè¡¨å•é¡¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/Test/login.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;psd&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä¸Šå›¾ä¸­çš„<code>action</code>è·¯å¾„ä¸º<code>/Test/login.do</code>ï¼Œè¿™æ˜¯<strong>ç»å¯¹è·¯å¾„</strong>çš„å†™æ³•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥&#x2F;login.do</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>ç›¸å¯¹è·¯å¾„</strong>çš„å†™æ³•ï¼š<code>../login.do</code>ï¼Œæ‰¾åˆ°ä¸Šä¸€çº§ç›®å½•çº§webæ–‡ä»¶å¤¹æ‰€åœ¨ç›®å½•ï¼Œç„¶åç›´æ¥æ‰¾åˆ°<code>login.do</code>çš„urlæ‰€åœ¨çš„ç±»ï¼›ä¹Ÿå¯ä»¥ç›´æ¥<code>login.do</code>ï¼Œå› ä¸ºè¿™ä¸ªç±»ä¸è¿™ä¸ªhtmlçš„è¡¨å•é¡µé¢æ˜¯åŒçº§çš„ï¼ï¼ï¼</p></blockquote><p>ç„¶ååœ¨é¡¹ç›®ç›®å½•ä¸‹çš„<code>src</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>Servlet</code>ç±»ï¼Œç”¨æ¥æ¥æ”¶ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œå¤„ç†ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>Test</code>çš„é¡¹ç›®ï¼Œå¹¶åœ¨å…¶<code>src</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>Servlet01</code>çš„<code>Servlet</code>ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns=&quot;/login.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        PrintWriter out = response.getWriter();</span></span><br><span class="line"><span class="comment">//        out.println(&quot;hello Servlet&quot;);</span></span><br><span class="line">        String name=request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">psd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;psd&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è´¦å·ä¸ºï¼š&quot;</span>+name+<span class="string">&quot;ï¼Œå¯†ç ä¸ºï¼š&quot;</span>+psd);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨åˆ›å»º<code>Servlet</code>ç±»çš„æ—¶å€™ï¼Œåœ¨ç±»å‰é¢åŠ äº†ä¸€ä¸ªæ³¨è§£<code>@WebServlet(urlPatterns=&quot;/login.do&quot;)</code>ï¼Œå³å°†æ­¤Servletç±»æ˜ å°„ä¸ºè·¯å¾„<code>login.do</code>ï¼Œç„¶ååœ¨è¡¨å•ä¸­<code>action=â€œ/Test/login.doâ€</code>ï¼Œæ­¤æ—¶åœ¨è¡¨å•ä¸­è¾“å…¥çš„å†…å®¹ä¾¿ä¼šå‘é€åˆ°æ­¤<code>Servlet</code>ç±»ä¸­ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚</p><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/8.png" alt="1"></p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/9.png" alt="1"></p><h4 id="åº•å±‚åŸç†ï¼š"><a href="#åº•å±‚åŸç†ï¼š" class="headerlink" title="åº•å±‚åŸç†ï¼š"></a>åº•å±‚åŸç†ï¼š</h4><p>è‹¥æƒ³è®©<code>Servlet</code>æ­£ç¡®çš„è¿è¡Œåœ¨æœåŠ¡å™¨ä¸­å¹¶å¤„ç†è¯·æ±‚ä¿¡æ¯ï¼Œæˆ‘ä»¬å¿…é¡»è¿›è¡Œé€‚å½“çš„é…ç½®ã€‚<code>Servlet</code>çš„é…ç½®ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><h5 id="â­•ä½¿ç”¨web-xmlé…ç½®Servlet"><a href="#â­•ä½¿ç”¨web-xmlé…ç½®Servlet" class="headerlink" title="â­•ä½¿ç”¨web.xmlé…ç½®Servlet"></a>â­•ä½¿ç”¨<code>web.xml</code>é…ç½®<code>Servlet</code></h5><p>åœ¨<code>web.xml</code>æ–‡ä»¶ä¸­ï¼Œé€šè¿‡<code>&lt;servlet&gt;</code>æ ‡ç­¾è¿›è¡Œæ³¨å†Œ</p><ul><li>åœ¨<code>&lt;servlet&gt;</code>æ ‡ç­¾ä¸‹ï¼Œä½¿ç”¨<code>&lt;servlet-name&gt;</code>æŒ‡å®šè¯¥<code>servlet</code>çš„åç§°ï¼Œä¸€èˆ¬ä¸<code>Servlet</code>ç±»åç›¸åŒï¼Œä¸”å”¯ä¸€ï¼›</li><li>ç„¶ååœ¨<code>&lt;servlet&gt;</code>æ ‡ç­¾ä¸‹ï¼Œç»§ç»­ä½¿ç”¨<code>&lt;servlet-class&gt;</code>æŒ‡å®šè¯¥<code>Servlet</code>ç±»çš„ä½ç½®ï¼ŒåŒ…æ‹¬åŒ…åå’Œç±»åã€‚</li></ul><p>åœ¨<code>web.xml</code>æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>&lt;servlet-mapping&gt;</code>æ ‡ç­¾è¿›è¡Œæ˜ å°„ï¼Œå°†<code>Servlet</code>æ˜ å°„åˆ°<code>URL</code>åœ°å€</p><ul><li>ä½¿ç”¨<code>&lt;servlet-name&gt;</code>å­æ ‡ç­¾æŒ‡å®šè¦æ˜ å°„çš„Servletåç§°ï¼Œåç§°è¦å’Œä¹‹å‰åœ¨<code>&lt;servlet&gt;</code>æ ‡ç­¾ä¸‹æ³¨å†Œçš„ç›¸åŒï¼›</li><li>ä½¿ç”¨<code>&lt;url-pattern&gt;</code>å­æ ‡ç­¾æ˜ å°„urlåœ°å€ï¼Œåœ°å€å‰å¿…é¡»åŠ â€œ&#x2F;â€ï¼Œå¦åˆ™è®¿é—®ä¸åˆ°ã€‚</li></ul><p>ä¾‹å¦‚ä¸Šç¤ºä¾‹ç”¨<code>web.xml</code>é…ç½®<code>Servlet</code>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Servlet01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servet-class</span>&gt;</span>Servlet01<span class="tag">&lt;/<span class="name">servet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Servlet01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/Test/login.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨è¡¨å•è¿›è¡Œæ•°æ®å‘é€çš„æ—¶å€™ï¼Œ<code>action=â€œ/Test/login.doâ€</code>ï¼Œ<code>JAVA</code>ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ°<code>web.xml</code>å»æ‰¾<code>&lt;servlet-mapping&gt;</code>æ ‡ç­¾ä¸‹çš„<code>&lt;url-pattern&gt;</code>æ ‡ç­¾ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”çš„<code>servlet-name</code>ï¼Œç„¶åå†åˆ°<code>&lt;servlet&gt;</code>æ ‡ç­¾æ‰¾åˆ°å¯¹åº”çš„<code>servlet-name</code>ï¼Œç„¶åæ ¹æ®è¿™ä¸ªæ‰¾åˆ°<code>&lt;servet-class&gt;</code>æ ‡ç­¾æ”¾çš„ç±»çš„ä½ç½®ï¼Œå³å¯å°†æ•°æ®å‘é€åˆ°æ­¤<code>Servlet</code>ç±»ä¸­ã€‚</p><h5 id="â­•ä½¿ç”¨-WebServletæ³¨è§£é…ç½®Servlet"><a href="#â­•ä½¿ç”¨-WebServletæ³¨è§£é…ç½®Servlet" class="headerlink" title="â­•ä½¿ç”¨@WebServletæ³¨è§£é…ç½®Servlet"></a>â­•ä½¿ç”¨<code>@WebServlet</code>æ³¨è§£é…ç½®<code>Servlet</code></h5><p>å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„<code>@WebServlet(name=&quot;Servlet01&quot;,urlPatterns=&quot;/login.do&quot;)</code></p><p>æˆ‘ä»¬å†ä½¿ç”¨æ—¶ä»…ä½¿ç”¨<code>name</code>å’Œ<code>urlPatterns</code>å³å¯ï¼›</p><p>å…¶ä¸­<code>name</code>ä¸ºå±æ€§å€¼æŒ‡å®š<code>Servlet</code>çš„<code>name</code>å±æ€§ï¼Œç­‰ä»·äº<code>&lt;Servlet-name&gt;</code>ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®<code>name</code>å±æ€§ï¼Œå…¶é»˜è®¤å€¼æ˜¯<code>Servlet</code>ç±»çš„å®Œæ•´åç§°ã€‚</p><p><code>urlPatterns</code>å±æ€§å€¼ç”¨äºæŒ‡å®šä¸€ç»„<code>Servlet</code>çš„<code>URL</code>çš„åŒ¹é…æ¨¡å¼ï¼Œç­‰ä»·äº<code>&lt;url-pattern&gt;</code>æ ‡ç­¾ã€‚</p><h3 id="3ã€è¡¨å•actionè·¯å¾„æ–¹æ³•"><a href="#3ã€è¡¨å•actionè·¯å¾„æ–¹æ³•" class="headerlink" title="3ã€è¡¨å•actionè·¯å¾„æ–¹æ³•"></a>3ã€è¡¨å•actionè·¯å¾„æ–¹æ³•</h3><blockquote><p><code>servlet</code>æ˜¯åŒ…åï¼Œåœ¨<code>myapp</code>è¿™ä¸ªé¡¹ç›®çš„<code>src</code>ä¸‹æ–°å»ºäº†ä¸€ä¸ªåä¸º<code>servlet</code>çš„åŒ…ï¼Œé‡Œé¢æ”¾äº†åä¸º<code>HelloServlet</code>çš„ç±»</p></blockquote><p>è¡¨å•çš„actionè·¯å¾„å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ¥æŒ‡å®šï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„æ–¹å¼ï¼š</p><ol><li>ç›¸å¯¹è·¯å¾„</li></ol><p>ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰é¡µé¢çš„è·¯å¾„æ¥æŒ‡å®šçš„ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;servlet/HelloServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    //...</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è¡¨ç¤ºå°†è¡¨å•æäº¤çš„æ•°æ®å‘é€åˆ°ç›¸å¯¹è·¯å¾„ä¸ºservlet&#x2F;HelloServletçš„Servletä¸Šã€‚</p><ol start="2"><li>ç»å¯¹è·¯å¾„</li></ol><p>ç»å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºWebåº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•æ¥æŒ‡å®šçš„ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/servlet/HelloServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    //...</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è¡¨ç¤ºå°†è¡¨å•æäº¤çš„æ•°æ®å‘é€åˆ°ç»å¯¹è·¯å¾„ä¸º&#x2F;servlet&#x2F;HelloServletçš„Servletä¸Šã€‚</p><ol start="3"><li>å®Œæ•´URLåœ°å€</li></ol><p>ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šå®Œæ•´çš„URLåœ°å€ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/myapp/servlet/HelloServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    //...</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è¡¨ç¤ºå°†è¡¨å•æäº¤çš„æ•°æ®å‘é€åˆ°å®Œæ•´çš„URLåœ°å€ä¸º<a href="http://localhost:8080/myapp/servlet/HelloServlet%E7%9A%84Servlet%E4%B8%8A%E3%80%82">http://localhost:8080/myapp/servlet/HelloServletçš„Servletä¸Šã€‚</a></p><p>å½“è¡¨å•æäº¤æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå‘æŒ‡å®šçš„URLåœ°å€å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®URLåœ°å€æ‰¾åˆ°å¯¹åº”çš„Servletï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„doGetæˆ–doPostæ–¹æ³•ï¼Œä»è€Œè·å¾—è¡¨å•æäº¤çš„æ•°æ®ã€‚å› æ­¤ï¼Œé€šè¿‡URLåœ°å€è®¿é—®åˆ°Servletæ—¶ï¼Œéœ€è¦åœ¨@WebServletæ³¨è§£ä¸­æŒ‡å®šè¯¥Servletæ‰€æ˜ å°„çš„URLåœ°å€ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet/HelloServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è¡¨ç¤ºå°†HelloServletç±»æ˜ å°„åˆ°URLåœ°å€ä¸º&#x2F;servlet&#x2F;HelloServletçš„èµ„æºä¸Šã€‚</p><h3 id="4ã€å…³äºServletConfigå’ŒServletContext"><a href="#4ã€å…³äºServletConfigå’ŒServletContext" class="headerlink" title="4ã€å…³äºServletConfigå’ŒServletContext"></a>4ã€å…³äºServletConfigå’ŒServletContext</h3><p>ä¸‹é¢çš„å›¾ç”¨æ¥åŠ å¼ºç†è§£ï¼Œä¸ç»™å‡ºå…·ä½“ä»£ç </p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/10.png" alt="1"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVAWEB </tag>
            
            <tag> Servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>box-sizingçš„å±æ€§åŠä½œç”¨è¯¦ç»†ä»‹ç»ã€CSS3ã€‘</title>
      <link href="/2023/03/06/box-sizing%E7%9A%84%E5%B1%9E%E6%80%A7%E5%8F%8A%E4%BD%9C%E7%94%A8%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%E3%80%90CSS3%E3%80%91/"/>
      <url>/2023/03/06/box-sizing%E7%9A%84%E5%B1%9E%E6%80%A7%E5%8F%8A%E4%BD%9C%E7%94%A8%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%E3%80%90CSS3%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬å†…å®¹å‚è€ƒè‡ªï¼š<a href="http://t.csdn.cn/fXtR4">è®©ä½ äº”è¡Œä»£ç </a></strong></p><details class="folding-tag" green><summary> åšä¸»å‰è¨€ </summary>              <div class='content'>              <p>å› ä¸ºæœ¬äººè·Ÿç€åŸä¸“ä¸šçš„å‡ ä½åŒå­¦å‚åŠ äº†ä»Šå¹´çš„äº’è”ç½‘+æ¯”èµ›ï¼Œæˆ‘çš„ä»»åŠ¡å°±æ˜¯å®Œæˆä¸€ä¸ªå…³äºé¡¹ç›®çš„å°ç¨‹åºï¼Œæ‰€ä»¥é‡æ–°æ¡èµ·äº†å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘ï¼Œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å‘ç°äº†<code>box-sizing</code>è¿™ä¸ªå±æ€§ï¼Œç”±äºåœ¨å­¦ä¹ webå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰ç”¨åˆ°è¿‡<code>box-sizing</code>è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥å¯¹æ­¤å¾ˆé™Œç”Ÿï¼Œå› æ­¤ç ”ç©¶äº†ä¸€ä¸‹ã€‚</p><p>è¿™ä¸ªä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼Œå°±æ˜¯ä¸€ä¸ªå…³äºç›’å­æ¨¡å‹çš„å±æ€§ï¼Œæˆ‘è®°å½•ä¸‹æ¥ï¼Œé˜²æ­¢é—å¿˜ã€‚</p>              </div>            </details><p><strong>W3Cæ ‡å‡†ç›’å­æ¨¡å‹</strong></p><p>æ ‡å‡†æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªå—çš„å®½åº¦ &#x3D; width+padding(å†…è¾¹è·)+border(è¾¹æ¡†)+margin(å¤–è¾¹è·)<br><strong>IEç›’å­æ¨¡å‹</strong></p><p>æ€ªå¼‚æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªå—çš„å®½åº¦ &#x3D; width+margin(å¤–è¾¹è·) ï¼ˆå³æ€ªå¼‚æ¨¡å¼ä¸‹ï¼ŒwidthåŒ…å«äº†borderä»¥åŠpadding</p><p>å½“ä¸€ä¸ªç›’å­çš„æ€»å®½åº¦ç¡®å®šä¹‹åï¼Œè¦æƒ³ç»™ç›’å­æ·»åŠ è¾¹æ¡†æˆ–<a href="https://so.csdn.net/so/search?q=%E5%86%85%E8%BE%B9%E8%B7%9D&spm=1001.2101.3001.7020">å†…è¾¹è·</a>ï¼Œå¾€å¾€éœ€è¦æ›´æ”¹ widthå±æ€§å€¼ï¼Œæ‰èƒ½ä¿è¯ç›’å­æ€»å®½åº¦ä¸å˜ï¼Œæ“ä½œèµ·æ¥çƒ¦çä¸”å®¹æ˜“å‡ºé”™ï¼Œè¿ç”¨CSS3çš„box-sizingå±æ€§å¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚box-sizingå±æ€§ç”¨äºå®šä¹‰ç›’å­çš„å®½åº¦å€¼å’Œé«˜åº¦å€¼æ˜¯å¦åŒ…å«å…ƒç´ çš„å†…è¾¹è·å’Œè¾¹æ¡†ï¼Œå…¶åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">box-sizing</span>: content-box/border-box;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„è¯­æ³•æ ¼å¼ä¸­ï¼Œ<a href="https://so.csdn.net/so/search?q=box-sizing%E5%B1%9E%E6%80%A7&spm=1001.2101.3001.7020">box-sizingå±æ€§</a>çš„å–å€¼å¯ä»¥ä¸ºcontent-boxæˆ–border-boxã€inheritï¼Œå¯¹å®ƒä»¬çš„è§£é‡Šå¦‚ä¸‹ã€‚</p><ul><li>content-boxï¼šæµè§ˆå™¨å¯¹ç›’æ¨¡å‹çš„è§£é‡Šéµä»W3Cæ ‡å‡†ï¼Œå½“å®šä¹‰widthå’Œheightæ—¶ï¼Œå®ƒçš„å‚æ•°å€¼ä¸åŒ…æ‹¬borderå’Œpaddingï¼Œæ­¤æ—¶å°†é‡‡ç”¨æ ‡å‡†æ¨¡å¼çš„ç›’å­æ¨¡å‹æ ‡å‡†ã€‚</li><li>border-boxï¼šå½“å®šä¹‰widthå’Œheightæ—¶ï¼Œborderå’Œpaddingçš„å‚æ•°å€¼è¢«åŒ…å«åœ¨widthå’Œheightä¹‹å†…ï¼Œæ­¤æ—¶å°†é‡‡ç”¨æ€ªå¼‚æ¨¡å¼çš„ç›’å­æ¨¡å‹æ ‡å‡†ã€‚</li><li>inheritï¼šè§„å®šåº”ä»çˆ¶å…ƒç´ ç»§æ‰¿ box-sizing å±æ€§çš„å€¼ã€‚</li></ul><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹å¯¹box-sizingå±æ€§è¿›è¡Œæ¼”ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>box-sizingå±æ€§ç”¨æ³•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#F90</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: content-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#F90</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>content_boxå±æ€§<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>border_boxå±æ€§<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢æ¡ˆä¾‹ä¸­å®šä¹‰äº†ä¸¤ä¸ªç›’å­ï¼Œå¹¶å¯¹å®ƒä»¬è®¾ç½®ç›¸åŒçš„å®½ã€é«˜ã€å³å†…è¾¹è·å’Œè¾¹æ¡†æ ·å¼ã€‚å¹¶ä¸”ï¼Œå¯¹ç¬¬ä¸€ä¸ªç›’å­å®šä¹‰â€œbox-sizing: content-box;â€æ ·å¼ï¼Œå¯¹ç¬¬äºŒä¸ªç›’å­å®šä¹‰â€œbox-sizing: border-box;â€æ ·å¼ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/css/1.jpeg" alt="1"></p><p>å¯ä»¥å‘ç°åº”ç”¨äº†â€œbox-sizing: content-box;â€æ ·å¼çš„ç›’å­1ï¼Œå®½åº¦æ¯”widthå‚æ•°å€¼å¤šå‡º30pxï¼Œæ€»å®½åº¦å˜ä¸º330px;è€Œåº”ç”¨äº†â€œbox-sizing: border-box;â€æ ·å¼çš„ç›’å­ 2ï¼Œå®½åº¦ç­‰äºwidthå‚æ•°å€¼ï¼Œæ€»å®½åº¦ä»ä¸º300pxã€‚åº”ç”¨â€œbox-sizing: border-box;â€æ ·å¼åï¼Œç›’å­borderå’Œpaddingçš„å‚æ•°å€¼æ˜¯è¢«åŒ…å«åœ¨widthå’Œheightä¹‹å†…çš„ã€‚ </p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®Œç¾è§£å†³ideaé…ç½®JavaWebç¯å¢ƒå¹¶æˆåŠŸè¿è¡Œï¼Œä¸€éƒ¨åˆ°åº•ï¼</title>
      <link href="/2023/03/04/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3idea%E9%85%8D%E7%BD%AEJavaWeb%E7%8E%AF%E5%A2%83%E5%B9%B6%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%B8%80%E9%83%A8%E5%88%B0%E5%BA%95%EF%BC%81/"/>
      <url>/2023/03/04/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3idea%E9%85%8D%E7%BD%AEJavaWeb%E7%8E%AF%E5%A2%83%E5%B9%B6%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%B8%80%E9%83%A8%E5%88%B0%E5%BA%95%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>æœ¬åšä¸»çœ‹åˆ°åˆ«äººå¸–å­æ€»ç»“çš„ï¼Œè‡ªç”¨ï¼</p></div><details class="folding-tag" cyan><summary> å‰è¨€ </summary>              <div class='content'>              <p>æäº†ä¸€ä¸ªæ™šä¸Šç»ˆäºæˆåŠŸå†™å‡ºäº†JavaWebæ–‡ä»¶</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/1.png" alt="1"></p><p>é…ç½®ç¯å¢ƒçœŸçš„çœŸçš„å¤ªéš¾å—äº†ï¼Œè¿™çœŸæ˜¯æ¯æ¬¡æƒ³å­¦ä¹ ä¸€ä¸ªæ–°çš„ä¸œè¥¿çš„æ—¶å€™æœ€ä¸æƒ³ç»å†çš„ã€‚</p><p>åœ¨ä¹‹å‰å­¦ä¹ JavaSEçš„æ—¶å€™ï¼Œæ²¡æœ‰æ ¹æ®è€å¸ˆçš„ç»™çš„ideaå’Œjdkçš„ç‰ˆæœ¬æ¥ä¸‹è½½ï¼Œç›´æ¥å»å®˜ç½‘å’Œç½‘ä¸Šæ‰¾åˆ°äº†æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå¤§äºŒä¸‹å­¦æœŸå¼€JavaWebè¯¾çš„æ—¶å€™çš„æ—¶å€™ç¯å¢ƒä¸€ç›´é…ä¸å¥½ã€‚idea2022ç‰ˆæˆ‘æ ¹æœ¬æ˜¯é…ç½®ä¸äº†è¿™ä¸ªwebç¯å¢ƒï¼Œä¸æ˜¯ç¼ºè¿™å°±ç¼ºé‚£ï¼Œé‚£ä¹ˆå¹²è„†ç›´æ¥é™ä½ideaçš„ç‰ˆæœ¬ï¼Œä¸‹é¢ä¸ºé™ä½ç‰ˆæœ¬ï¼Œå¹¶è¿›è¡Œç›¸å…³webæ–‡ä»¶çš„åˆ›å»ºå’Œç¯å¢ƒé…ç½®çš„è¿‡ç¨‹æ•´ç†ï¼Œæ–¹ä¾¿æ—¥åæŸ¥çœ‹ğŸ˜ªã€‚</p><p>é‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ˜¯tomcatå‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>tomcatæ˜¯ä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†htmlæ–‡ä»¶éƒ¨ç½²åˆ°è¿™ä¸ªwebæœåŠ¡å™¨ä¸Šï¼Œç„¶åæˆ‘ä»¬åœ¨è®¿é—®æ­¤htmlé¡µé¢æ—¶å°±å¯ä»¥é€šè¿‡è®¿é—®ä¸€ä¸ªç±»ä¼¼ç½‘å€çš„ä¸œè¥¿è®¿é—®ï¼Œæ‰€æœ‰ä½ åœ¨è®¿é—®æ­¤é¡µé¢çš„æ—¶å€™ï¼Œtomcatä¸èƒ½å…³é—­ã€‚</p>              </div>            </details><details class="folding-tag" cyan><summary> æ–¹æ³•ä¸€ </summary>              <div class='content'>              <h2 id="ä¸€ã€é™ä½ideaç‰ˆæœ¬"><a href="#ä¸€ã€é™ä½ideaç‰ˆæœ¬" class="headerlink" title="ä¸€ã€é™ä½ideaç‰ˆæœ¬"></a>ä¸€ã€é™ä½ideaç‰ˆæœ¬</h2><p>ç›´æ¥åˆ é™¤ç”µè„‘åŸæœ‰çš„2022ç‰ˆæœ¬ï¼Œå¹¶åˆ é™¤<strong>æ³¨å†Œè¡¨</strong>ä¸­çš„å†…å®¹ã€‚</p><p>ç„¶åå»ç½‘ä¸Šå¯»æ‰¾2020å¹´çš„ç ´è§£ç‰ˆæœ¬ï¼ˆå½“ç„¶æ”¯æŒæ­£ç‰ˆğŸ’ªï¼‰ï¼Œç›´æ¥ä¸‹è½½å³å¯ã€‚<br>æˆ‘çš„å‚è€ƒï¼š<a href="https://www.cnblogs.com/technicist/p/15229615.html">https://www.cnblogs.com/technicist/p/15229615.html</a></p><h2 id="äºŒã€é™ä½jdkç‰ˆæœ¬"><a href="#äºŒã€é™ä½jdkç‰ˆæœ¬" class="headerlink" title="äºŒã€é™ä½jdkç‰ˆæœ¬"></a>äºŒã€é™ä½jdkç‰ˆæœ¬</h2><p class='p red'>è¿™é‡Œæˆ‘ä»¬éœ€è¦é€‰æ‹©é€‚åˆå½“å‰ä½¿ç”¨çš„ideaç‰ˆæœ¬çš„jdkç‰ˆæœ¬ã€‚</p><p>å¦åˆ™æˆ‘ä»¬åœ¨ideaè½¯ä»¶ä¸Šè¿è¡Œjavaé¡¹ç›®çš„æ—¶å€™ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error:Cannot determine path to â€˜tools.jarâ€˜ library for 16</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è‡ªå·±ideaä¸Šå¯¹åº”çš„jdkæœ€é«˜çš„ç‰ˆæœ¬ï¼ï¼ï¼</p><h3 id="æŸ¥çœ‹ideaå¯¹åº”çš„jdkæœ€é«˜ç‰ˆæœ¬"><a href="#æŸ¥çœ‹ideaå¯¹åº”çš„jdkæœ€é«˜ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ideaå¯¹åº”çš„jdkæœ€é«˜ç‰ˆæœ¬"></a>æŸ¥çœ‹ideaå¯¹åº”çš„jdkæœ€é«˜ç‰ˆæœ¬</h3><p>æ‰“å¼€IDEA ç‚¹å‡»å³ä¸Šè§’çš„file å†ç‚¹å‡»Project Structure </p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/23.png" alt="2"></p><p>ä¹‹åç‚¹å‡»ç¬¬ä¸€ä¸ªç¬¬ä¸€æ¡ï¼ŒProject æŸ¥çœ‹Project language level æ‰“å¼€ä¸‹æ‹‰æ¡ï¼ŒæŸ¥çœ‹ä½ çš„IDEAèƒ½æ”¯æŒçš„JDKæœ€é«˜ç‰ˆæœ¬</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/24.png" alt="3"></p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/25.png" alt="4"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘çš„è¿™ä¸ªæœ€é«˜æ”¯æŒåˆ°14ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½¿ç”¨JDK16æ˜¯ä¸å¯ä»¥çš„ï¼Œå¯ä»¥ä¸‹è½½14ä»¥ä¸‹ç‰ˆæœ¬çš„JDK</p><p>åœ¨Project SDK ä¸­é€‰æ‹©ä½ åˆé€‚çš„jdkæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨Project language levelä¸­é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬å·ï¼Œ</p><p>æ‰€ä»¥å½“ä½¿ç”¨jdk16æ—¶ï¼ŒProject language levelä¸­æ²¡æœ‰å¯¹åº”çš„16ç‰ˆæœ¬å¯¼è‡´äº†å‡ºç°è¿™ç§é”™è¯¯</p><p class='p yellow'>ä¸Šè¿°å†…å®¹è½¬è½½é“¾æ¥å¦‚ä¸‹ï¼š</p><div class="tag link"><a class="link-card" title="å–å¥³å­©çš„å°ç«æŸ´à¸„à¸´à¸”à¸–à¸¶à¸‡" href="https://blog.csdn.net/WEASYD/article/details/118032654"><div class="left"><img src="https://profile.csdnimg.cn/D/8/A/1_weasyd"/></div><div class="right"><p class="text">å–å¥³å­©çš„å°ç«æŸ´à¸„à¸´à¸”à¸–à¸¶à¸‡</p><p class="url">https://blog.csdn.net/WEASYD/article/details/118032654</p></div></a></div><p>ç„¶åç›´æ¥åˆ°å®˜ç½‘ä¸Šä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„JDKï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡JAVA_HOMEç­‰ï¼Œè‡ªè¡Œå»ç™¾åº¦ï¼<br>å¦‚æœä½ ä¹‹å‰ä¸‹è½½äº†å…¶ä»–ç‰ˆæœ¬çš„JDKï¼Œåˆ™æ–°ä¸‹è½½çš„ä¼šè‡ªåŠ¨è¦†ç›–ä¹‹å‰çš„ï¼Œä½†ä¹Ÿè¦ä¿®æ”¹ç¯å¢ƒå˜é‡ã€æ³¨å†Œè¡¨ç­‰ç­‰ã€‚</p><h2 id="ä¸‰ã€åˆ›å»ºä¸€ä¸ªJava-webé¡¹ç›®å¹¶é…ç½®TomcatæœåŠ¡å™¨"><a href="#ä¸‰ã€åˆ›å»ºä¸€ä¸ªJava-webé¡¹ç›®å¹¶é…ç½®TomcatæœåŠ¡å™¨" class="headerlink" title="ä¸‰ã€åˆ›å»ºä¸€ä¸ªJava webé¡¹ç›®å¹¶é…ç½®TomcatæœåŠ¡å™¨"></a>ä¸‰ã€åˆ›å»ºä¸€ä¸ªJava webé¡¹ç›®å¹¶é…ç½®TomcatæœåŠ¡å™¨</h2><p class='p yellow'>ä¸‹è¿°å†…å®¹è½¬è½½é“¾æ¥å¦‚ä¸‹ï¼š</p><div class="tag link"><a class="link-card" title="æ˜¯å°å´”å´”å´”å´”å´”" href="https://blog.csdn.net/weixin_43716048/article/details/108639475"><div class="left"><img src="https://profile.csdnimg.cn/7/4/6/1_weixin_43716048"/></div><div class="right"><p class="text">æ˜¯å°å´”å´”å´”å´”å´”</p><p class="url">https://blog.csdn.net/weixin_43716048/article/details/108639475</p></div></a></div><h3 id="1ã€åˆ›å»ºJava-Webé¡¹ç›®"><a href="#1ã€åˆ›å»ºJava-Webé¡¹ç›®" class="headerlink" title="1ã€åˆ›å»ºJava Webé¡¹ç›®"></a>1ã€åˆ›å»ºJava Webé¡¹ç›®</h3><p>æ‰“å¼€IDEAä¹‹åæ–°å»ºä¸€ä¸ªæ™®é€šçš„Javaé¡¹ç›®</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/26.png" alt="5"></p><p>é€‰ä¸­çº¢æ¡†ä¹‹åç‚¹<code>next</code></p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/27.png" alt="6"></p><p>é€‰æ‹©ä½ç½®,å·¥ç¨‹å.ç„¶åç‚¹<code>finish</code></p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/28.png" alt="6"></p><p><strong>é‡ç‚¹:<code>æ‰¾åˆ°åˆšæ‰æ–°å»ºçš„Javaé¡¹ç›®,ç„¶åå³é”®,ç‚¹å‡» Add Framework Support...</code></strong></p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/29.png" alt="7"></p><p><strong>ç„¶åå‹¾é€‰Web Application,ç‚¹å‡»ok</strong></p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/30.png" alt="8"></p><p>è¿™ä¸ªæ—¶å€™Java webé¡¹ç›®å°±åˆ›å»ºå¥½äº†</p><h3 id="2ã€é…ç½®Tomcat"><a href="#2ã€é…ç½®Tomcat" class="headerlink" title="2ã€é…ç½®Tomcat"></a>2ã€é…ç½®Tomcat</h3><p class='p red'>é¦–å…ˆç›´æ¥å»å®˜ç½‘ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„Tomcatï¼Œç„¶åé…ç½®ç›¸åº”çš„ç¯å¢ƒå˜é‡ï¼</p><p>ç‚¹å‡»å¯¼èˆªæ çš„<code>Run</code>-&gt;<code>Edit Configurations...</code></p><p>ä¹Ÿå¯ä»¥ç›´æ¥ç‚¹å‡»ç»¿è‰²å°é”¤å­ğŸ”¨æ—è¾¹çš„ç»“æ„é…ç½®å³å¯ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/31.png" alt="9"></p><p>ç‚¹å‡»+æ·»åŠ ï¼Œä¸‹æ»‘æ‰¾åˆ°<code>Tomcat</code>ï¼ˆæ³¨æ„è¿™é‡Œä¸æ˜¯<code>tomEE</code>ï¼Œç„¶åä¸€å®šè¦é€‰æ‹©<code>Local</code>ğŸ“Œï¼‰</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/32.png" alt="10"></p><p>æŒ‰ç…§å›¾ä¸Šçš„æ ‡æ³¨è¿›è¡Œé€‰æ‹©ï¼Œå…¶ä¸­<code>Configure...</code>ç‚¹åè¦é€‰ä¸­Tomcatçš„å®‰è£…è·¯å¾„</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/2.png" alt="11"></p><p>ä¸‹æ–¹æœ‰æŠ¥é”™çš„è¯ç›´æ¥ç‚¹å‡»Fixï¼Œç”±äºç¼ºå°‘ä¸€ä¸ªjaråŒ…å¯¼è‡´ï¼Œç‚¹å‡»Fixä¹‹åèƒ½ç›´æ¥è‡ªåŠ¨è·å–ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/33.png" alt="12"></p><p><strong>æ³¨æ„ğŸ“Œ</strong>ï¼šæ›´æ”¹<code>Application context</code>ä¸º<code>/+é¡¹ç›®å</code>ï¼Œä¾‹å¦‚é¡¹ç›®åå¦‚æœä¸ºtextï¼Œåˆ™ä¸º<code>/text</code></p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/4.png" alt="1"></p><p>ç„¶åç‚¹å‡»okå³é…ç½®æˆåŠŸã€‚</p><h3 id="3ã€é…ç½®å®Œæˆä¹‹åè¿è¡Œé¡¹ç›®"><a href="#3ã€é…ç½®å®Œæˆä¹‹åè¿è¡Œé¡¹ç›®" class="headerlink" title="3ã€é…ç½®å®Œæˆä¹‹åè¿è¡Œé¡¹ç›®"></a>3ã€é…ç½®å®Œæˆä¹‹åè¿è¡Œé¡¹ç›®</h3><p>ç‚¹é¡¹ç›®æ ¹æ–‡ä»¶ï¼Œç„¶åç‚¹å‡»<code>Run Tomcat 8.5.57</code></p><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>æ³¨æ„:åœ¨è¿è¡ŒJava Webé¡¹ç›®çš„æ—¶å€™ï¼Œä¸è¦æå‰è¿è¡Œäº†tomcatğŸ±</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>æ³¨æ„:æ¯æ¬¡åœ¨å»ºç«‹ä¸€ä¸ªæ–°çš„Java Webé¡¹ç›®çš„æ—¶å€™</p>            </div><h3 id="4ã€æŠ¥é”™è§£å†³æ–¹æ³•"><a href="#4ã€æŠ¥é”™è§£å†³æ–¹æ³•" class="headerlink" title="4ã€æŠ¥é”™è§£å†³æ–¹æ³•"></a>4ã€æŠ¥é”™è§£å†³æ–¹æ³•</h3><h4 id="4-1-IntelliJ-IDEAå…³äºâ€œcannot-resolve-symbol-servletâ€çš„è§£å†³"><a href="#4-1-IntelliJ-IDEAå…³äºâ€œcannot-resolve-symbol-servletâ€çš„è§£å†³" class="headerlink" title="4.1 IntelliJ IDEAå…³äºâ€œcannot resolve symbol servletâ€çš„è§£å†³"></a>4.1 IntelliJ IDEAå…³äºâ€œcannot resolve symbol servletâ€çš„è§£å†³</h4><p>å¦‚æœæˆ‘ä»¬é‡åˆ°äº†<code>cannot resolve symbol servlet</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/5.png" alt="1"></p><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ç¼ºå°‘servlet-api.jaråŒ…é€ æˆçš„ã€‚</p><ol><li><p>å³é”®é¡¹ç›®-&gt;open module setting</p></li><li><p>libraries-&gt; + -&gt;Java-&gt;é€‰æ‹©è·¯å¾„ï¼ˆtomcatå®‰è£…ç›®å½•ä¸‹lib-&gt;tomcat-api.jarï¼‰</p></li></ol><p>å®Œæˆä¹‹åå°±æ²¡æœ‰cannot resolve symbol servletçš„æç¤ºé”™è¯¯äº†</p>              </div>            </details><details class="folding-tag" cyan><summary> æ–¹æ³•äºŒ </summary>              <div class='content'>              <p><strong>ä¸€ã€æ–°å»ºWebé¡¹ç›®</strong></p><p>é€‰æ‹©IDEAä¸»é¡µçš„â€œCreate New Projectâ€é€‰é¡¹ï¼Œè¿›å…¥æ–°å»ºé¡¹ç›®çš„ç•Œé¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/13.png" alt="1"></p><p>åœ¨New Projecç•Œé¢ä¸­ï¼Œé€‰æ‹©å·¦ä¾§æ çš„â€œJavaâ€é€‰é¡¹ï¼Œç„¶åå‹¾é€‰â€Web Applicationâ€é€‰é¡¹ã€‚é€‰æ‹©å®Œæ¯•ä¹‹åï¼Œå•å‡»â€Nextâ€æŒ‰é’®è¿›å…¥å¡«å†™é¡¹ç›®ä¿¡æ¯çš„ç•Œé¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/14.png" alt="1"></p><p>åœ¨New Projecç•Œé¢ä¸­ï¼Œâ€Project nameâ€é€‰é¡¹ç”¨äºæŒ‡é¡¹ç›®çš„åç§°ï¼Œâ€Project localtionâ€é€‰é¡¹ç”¨äºæŒ‡å®šWebé¡¹ç›®çš„æ ¹ç›®å½•ã€‚è¿™é‡Œé‡‡ç”¨é»˜è®¤è®¾ç½®çš„ç›®å½•ï¼Œå°†chapter04ä½œä¸ºWebé¡¹ç›®çš„åç§°ã€‚è®¾ç½®å®Œæˆä¹‹åï¼Œå•å‡»â€œFinishâ€æŒ‰é’®ï¼Œè¿›å…¥å¼€å‘ç•Œé¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/15.png" alt="1"></p><p><strong>äºŒã€æ·»åŠ Tomcatçš„Servlet-api.jaråŒ…</strong></p><p>åˆ›å»ºå¥½Webé¡¹ç›®åï¼Œæ¥ä¸‹æ¥ï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ Tomcatçš„Servlet-api.jaråŒ…ï¼Œå•å‡»IDEAå¼€å‘å·¥å…·å³ä¸Šè§’çš„â€œ   â€æŒ‰é’®ï¼Œè¿›å…¥Project Structureç•Œé¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/16.png" alt="1"></p><p>åœ¨Project Structureç•Œé¢ä¸­ï¼Œå•å‡»ã€Librariesã€‘â†’ã€+ã€‘â†’ã€Javaã€‘ï¼Œå¼¹å‡ºSelect Library Filesç•Œé¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/17.png" alt="1"></p><p>åœ¨Select Library Filesç•Œé¢ï¼Œé€‰æ‹©é¡¹ç›®æ‰€åœ¨çš„ç›®å½•åå•å‡»â€OKâ€æŒ‰é’®ï¼Œå¼¹å‡ºé€‰æ‹©é¡¹ç›®ç±»å‹ç•Œé¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/18.png" alt="1"></p><p>åœ¨é€‰æ‹©é¡¹ç›®ç±»å‹ç•Œé¢ï¼Œé€‰ä¸­Classesé€‰é¡¹ï¼Œå•å‡»â€œOKâ€æŒ‰é’®ï¼Œä¼šæ˜¾ç¤ºé¡¹ç›®åç§°ç•Œé¢â€œChoose Modulesâ€ï¼Œåœ¨â€œChoose Modulesâ€ç•Œé¢ç›´æ¥å•å‡»â€OKâ€æŒ‰é’®ï¼Œæ­¤æ—¶é¡¹ç›®chapter04å°±åŠ è½½åˆ°IDEAå¼€å‘å·¥å…·ä¸­äº†ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/19.png" alt="1"></p><p>å•å‡»æ ‡è®°çš„â€œ+â€æŒ‰é’®ï¼ŒæŸ¥æ‰¾Tomcat åŒ…ä¸‹libåŒ…çš„Servlet-api.jarï¼Œå°†å…¶å¯¼å…¥åˆ°chapter04é¡¹ç›®ä¸­ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/20.png" alt="1"></p><p>åœ¨å•å‡»â€OKâ€æŒ‰é’®åï¼Œå°±å¯ä»¥å°†Servlet-api.jaræ·»åŠ åˆ°chapter04çš„é¡¹ç›®ä¸­ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/21.png" alt="1"></p><p>å³å‡»chapter04é¡¹ç›®çš„srcæ–‡ä»¶ï¼Œé€‰æ‹©ã€newã€‘â†’ã€Create New Servletã€‘é€‰é¡¹ï¼Œè¿›å…¥åˆ›å»ºServletç±»çš„ç•Œé¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/JAVA/22.png" alt="1"></p><p><strong>ä¸‰ã€åˆ›å»ºServletç±»</strong></p><p>æ­¤æ—¶IDEAå·¥å…·ä¼šè‡ªåŠ¨ç”ŸæˆServletä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;TestServlet01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestServlet01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span><br><span class="line"><span class="params">                 response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span><br><span class="line"><span class="params">                 response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p><img src="https://picbed.dai2yutou.space/article_img/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/2.jpg" alt="13"></p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVAWEB </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Error:listen EADDRINUSE:address already in use :::4000</title>
      <link href="/2023/03/02/node%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8/"/>
      <url>/2023/03/02/node%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>æœ¬äººäº²æµ‹æœ‰æ•ˆï¼</p></div><p>ä»Šå¤©åœ¨å¯¹æœ¬äººçš„åšå®¢ç›®å½•ä¸‹è¿è¡Œ<code>hexo s</code>å‘½ä»¤çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸€ä¸ªæŠ¥é”™ã€‚</p><p>æŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: listen EADDRINUSE: address already in use :::4000</span><br></pre></td></tr></table></figure><h4 id="é—®é¢˜åŸå› ï¼š"><a href="#é—®é¢˜åŸå› ï¼š" class="headerlink" title="é—®é¢˜åŸå› ï¼š"></a>é—®é¢˜åŸå› ï¼š</h4><p><code>hexo s</code>å‘½ä»¤æ˜¯<code>hexo server</code>å‘½ä»¤çš„ç¼©å†™ï¼Œä½œç”¨æ˜¯æœ¬åœ°å¯åŠ¨åšå®¢æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¿é—®çš„ç½‘å€ä¸º<a href="http://localhost:4000/%EF%BC%8C%E5%87%BA%E7%8E%B0%E4%B8%8A%E8%BF%B0%E5%8E%9F%E5%9B%A0%E6%98%AF%E6%88%91%E4%BB%AC%E5%B7%B2%E7%BB%8F%E5%90%AF%E5%8A%A8%E8%BF%87%E4%B8%80%E6%AC%A1%E5%8D%9A%E5%AE%A2%EF%BC%8C%E5%AF%BC%E8%87%B44000%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8%EF%BC%8C%E7%84%B6%E5%90%8E%E6%88%91%E4%BB%AC%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%E6%97%B6%E6%AD%A4%E7%AB%AF%E5%8F%A3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%87%BA%E7%8E%B0%E6%8A%A5%E9%94%99%E3%80%82">http://localhost:4000/ï¼Œå‡ºç°ä¸Šè¿°åŸå› æ˜¯æˆ‘ä»¬å·²ç»å¯åŠ¨è¿‡ä¸€æ¬¡åšå®¢ï¼Œå¯¼è‡´4000ç«¯å£è¢«å ç”¨ï¼Œç„¶åæˆ‘ä»¬å†æ¬¡å¯åŠ¨è¿›è¡Œè®¿é—®æ—¶æ­¤ç«¯å£æ— æ³•è®¿é—®ï¼Œå‡ºç°æŠ¥é”™ã€‚</a></p><p class='p red'>æ³¨æ„ï¼šè¿™é‡Œ4000çš„ç«¯å£åªæ˜¯ä¸€ä¸ªç«¯å£å·ï¼Œæ¯ä¸ªäººçš„ä¸åŒï¼Œä¸æ˜¯å›ºå®šå€¼ã€‚</p><h4 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h4><p>1ã€åœ¨å½“å‰æ–‡ä»¶çš„ç»ˆç«¯ä¸‹æŸ¥çœ‹ç«¯å£å ç”¨çš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç”µè„‘çš„å‘½ä»¤è¡Œçª—å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano</span><br></pre></td></tr></table></figure><p>2ã€æ‰¾åˆ°å¯¹åº”4000ç«¯å£çš„è¿›ç¨‹çš„PIDå€¼ï¼ˆä¾‹å¦‚æ˜¯5327ï¼‰</p><p>3ã€æ‰§è¡Œå¦‚ä¸‹è¯­å¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill -f /pid 5327</span><br></pre></td></tr></table></figure><p>4ã€æœ€åé‡å¯è¿›ç¨‹å³å¯</p><h4 id=""><a href="#" class="headerlink" title=""></a><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ä¸€å¤©ä¸€ä¸ªå°bug</p>            </div></h4><p><img src="https://picbed.dai2yutou.space/article_img/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/1.jpg" alt="ä¸€å¤©ä¸€ä¸ªå°bug"></p>]]></content>
      
      
      <categories>
          
          <category> bugè®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHPé¡µé¢é—´ä¼ å€¼çš„å‡ ç§æ–¹æ³•</title>
      <link href="/2023/02/28/PHP%E9%A1%B5%E9%9D%A2%E9%97%B4%E4%BC%A0%E5%80%BC%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"/>
      <url>/2023/02/28/PHP%E9%A1%B5%E9%9D%A2%E9%97%B4%E4%BC%A0%E5%80%BC%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸¤å¤©æˆ‘ä¸€ä¸ªéƒ¨é—¨çš„å­¦å¼Ÿåœ¨åˆ©ç”¨åŸç”Ÿå†™æ³•å®Œæˆä¸€ç¯‡åšå®¢ï¼Œå®ƒé—®æˆ‘å¦‚ä½•åœ¨PHPé¡µé¢ç‚¹å‡»ä¸€ä¸ªæ¡†å°†å€¼ä¼ åˆ°å¦ä¸€ä¸ªé¡µé¢ä¸­ï¼Œè¿™ä¹Ÿå°±æ˜¯PHPä¼ å€¼ï¼Œæ‰€æœ‰æˆ‘ä¹Ÿå€Ÿæ­¤æœºä¼šå†æ¬¡å­¦ä¹ äº†ä¸€ä¸‹ï¼Œä»¥ä¸‹ä¸ºæˆ‘æ€»ç»“çš„PHPä¼ å€¼çš„å‡ ç§æ–¹æ³•ã€‚</p><h2 id="æ–¹æ³•1ï¼šåˆ©ç”¨require-onceæ¥å®ç°"><a href="#æ–¹æ³•1ï¼šåˆ©ç”¨require-onceæ¥å®ç°" class="headerlink" title="æ–¹æ³•1ï¼šåˆ©ç”¨require_onceæ¥å®ç°"></a>æ–¹æ³•1ï¼šåˆ©ç”¨require_onceæ¥å®ç°</h2><p>åˆ©ç”¨<code>require_once</code>æ¥å®ç°PHPé¡µé¢é—´ä¼ å€¼çš„æ–¹æ³•æ˜¯ï¼šé€šè¿‡<code>require_once</code>è¯­å¥ï¼Œå¯ä»¥å°†ä¸€ä¸ªPHPè„šæœ¬çš„å†…å®¹å¼•å…¥å¦ä¸€ä¸ªPHPè„šæœ¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªPHPæ–‡ä»¶a.phpå’Œb.phpï¼Œå…¶ä¸­<code>a.php</code>ä¸­æœ‰ä¸€ä¸ªå˜é‡<code>$var = &quot;hello world&quot;</code>ï¼Œé‚£ä¹ˆåœ¨<code>b.php</code>ä¸­å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">&quot;a.php&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$var</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œè®¿é—®b.phpä¼šå¾—åˆ°ï¼šhello worldï¼ã€‚è¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯å¯ä»¥é¿å…å› å¤±è¯¯è€Œå¯¼è‡´çš„é‡å¤å¼•å…¥Â²ã€‚</p><h2 id="æ–¹æ³•2ï¼šGETæ–¹æ³•"><a href="#æ–¹æ³•2ï¼šGETæ–¹æ³•" class="headerlink" title="æ–¹æ³•2ï¼šGETæ–¹æ³•"></a>æ–¹æ³•2ï¼šGETæ–¹æ³•</h2><p>ä½¿ç”¨ GET æ–¹æ³•å¯ä»¥é€šè¿‡ URL å‚æ•°å°†æ•°æ®ä¼ é€’ç»™å¦ä¸€ä¸ªé¡µé¢ã€‚åœ¨å‘é€æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ PHP çš„ <code>http_build_query()</code> å‡½æ•°å°†æ•°æ®æ„å»ºæˆä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶é™„åŠ åˆ° URL ä¸Šã€‚åœ¨æ¥æ”¶æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>$_GET</code> æ•°ç»„è·å–æ•°æ®ã€‚</p><p>å‘é€æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$data</span> = <span class="keyword">array</span>(<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">30</span>);</span><br><span class="line"><span class="variable">$query_string</span> = <span class="title function_ invoke__">http_build_query</span>(<span class="variable">$data</span>);</span><br><span class="line"><span class="variable">$url</span> = <span class="string">&#x27;http://example.com/receive.php?&#x27;</span> . <span class="variable">$query_string</span>;</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: &#x27;</span> . <span class="variable">$url</span>);</span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$name = $_GET[&#x27;name&#x27;];</span><br><span class="line">$age = $_GET[&#x27;age&#x27;];</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•3ï¼šPOSTæ–¹æ³•-è¡¨å•"><a href="#æ–¹æ³•3ï¼šPOSTæ–¹æ³•-è¡¨å•" class="headerlink" title="æ–¹æ³•3ï¼šPOSTæ–¹æ³•(è¡¨å•)"></a>æ–¹æ³•3ï¼šPOSTæ–¹æ³•(è¡¨å•)</h2><p>ä½¿ç”¨ POST æ–¹æ³•å¯ä»¥å°†æ•°æ®ä½œä¸º HTTP è¯·æ±‚çš„ä¸»ä½“å‘é€ç»™å¦ä¸€ä¸ªé¡µé¢ã€‚åœ¨å‘é€æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ HTML çš„ <code>&lt;form&gt;</code> å…ƒç´ æ¥åˆ›å»ºä¸€ä¸ªè¡¨å•ï¼Œå¹¶å°†æ•°æ®ä½œä¸ºè¡¨å•å­—æ®µçš„å€¼æäº¤åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚åœ¨æ¥æ”¶æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>$_POST</code> æ•°ç»„è·å–æ•°æ®ã€‚</p><p>å‘é€æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;http://example.com/receive.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;John&quot;</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;30&quot;</span>&gt;</span><br><span class="line">  &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;Submit&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$name</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="variable">$age</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;age&#x27;</span>];</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•4ï¼šä½¿ç”¨è¶…é“¾æ¥æ¥ä¼ é€’å‚æ•°"><a href="#æ–¹æ³•4ï¼šä½¿ç”¨è¶…é“¾æ¥æ¥ä¼ é€’å‚æ•°" class="headerlink" title="æ–¹æ³•4ï¼šä½¿ç”¨è¶…é“¾æ¥æ¥ä¼ é€’å‚æ•°"></a>æ–¹æ³•4ï¼šä½¿ç”¨è¶…é“¾æ¥æ¥ä¼ é€’å‚æ•°</h2><p>ä½¿ç”¨è¶…é“¾æ¥æ¥ä¼ é€’å‚æ•°PHPçš„æ–¹æ³•æ˜¯ï¼šåœ¨è¶…é“¾æ¥çš„hrefå±æ€§ä¸­æ·»åŠ é—®å·å’Œå‚æ•°å&#x3D;å‚æ•°å€¼çš„å½¢å¼ï¼Œç„¶ååœ¨ç›®æ ‡é¡µé¢ä¸­ç”¨$_GETæ•°ç»„æ¥è·å–å‚æ•°å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªPHPæ–‡ä»¶a.phpå’Œb.phpï¼Œå…¶ä¸­a.phpä¸­æœ‰ä¸€ä¸ªè¶…é“¾æ¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;b.php?name=å¼ ä¸‰&amp;age=18&quot;</span>&gt;</span>ç‚¹å‡»è·³è½¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆåœ¨b.phpä¸­å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$name</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="variable">$age</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;age&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;ä½ å¥½ï¼Œ<span class="subst">$name</span>ï¼Œä½ çš„å¹´é¾„æ˜¯<span class="subst">$age</span>&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œç‚¹å‡»è·³è½¬åä¼šå¾—åˆ°ï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼Œä½ çš„å¹´é¾„æ˜¯18ã€‚è¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯ç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å‚æ•°ä¼šæš´éœ²åœ¨åœ°å€æ ä¸­ã€‚</p><h2 id="æ–¹æ³•5ï¼šåˆ©ç”¨SESSIONä¼šè¯æ¥å®ç°"><a href="#æ–¹æ³•5ï¼šåˆ©ç”¨SESSIONä¼šè¯æ¥å®ç°" class="headerlink" title="æ–¹æ³•5ï¼šåˆ©ç”¨SESSIONä¼šè¯æ¥å®ç°"></a>æ–¹æ³•5ï¼šåˆ©ç”¨SESSIONä¼šè¯æ¥å®ç°</h2><p>ï¼ˆSESSIONæ˜¯å…¨å±€å˜é‡ï¼Œåªè¦è¢«å£°æ˜ï¼Œåœ¨ä¸å…³é—­ç½‘é¡µæˆ–è€…æ²¡æœ‰åˆ°SESSIONçš„å‘¨æœŸåœ¨æ‰€æœ‰é¡µé¢éƒ½æ˜¯å¯ç”¨çš„ï¼Œè€ŒPOSTå’ŒGETåªè¦phpæ‰§è¡Œå®Œæ¯•å°±ä¼šç«‹åˆ»è¢«é‡Šæ”¾æ²¡æœ‰ï¼‰ã€‚ä½¿ç”¨ SESSION æ–¹æ³•å¯ä»¥åœ¨ä¸åŒé¡µé¢ä¹‹é—´å…±äº«æ•°æ®ã€‚åœ¨å‘é€æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥å°†æ•°æ®å­˜å‚¨åœ¨ <code>$_SESSION</code> å˜é‡ä¸­ã€‚åœ¨æ¥æ”¶æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ä» <code>$_SESSION</code> å˜é‡ä¸­è·å–æ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ SESSION æ–¹æ³•éœ€è¦å…ˆè°ƒç”¨ <code>session_start()</code> å‡½æ•°ã€‚</p><p>å‘é€æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;John&#x27;</span>;</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;age&#x27;</span>] = <span class="number">30</span>;</span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"><span class="variable">$name</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="variable">$age</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;age&#x27;</span>];</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•6ï¼šåˆ©ç”¨COOKIE-æ–¹æ³•æ¥å®ç°"><a href="#æ–¹æ³•6ï¼šåˆ©ç”¨COOKIE-æ–¹æ³•æ¥å®ç°" class="headerlink" title="æ–¹æ³•6ï¼šåˆ©ç”¨COOKIE æ–¹æ³•æ¥å®ç°"></a>æ–¹æ³•6ï¼šåˆ©ç”¨COOKIE æ–¹æ³•æ¥å®ç°</h2><p>cookieæ˜¯å­˜æ”¾åœ¨å®¢æˆ·ç«¯ä¸Šï¼ˆä¹Ÿæ˜¯å…¨å±€å˜é‡ï¼‰ï¼Œsessionæ˜¯å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œè¿™æ˜¯ä¸¤è€…å”¯ä¸€çš„ä¸åŒã€‚ä½¿ç”¨ COOKIE æ–¹æ³•å°†æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå¹¶åœ¨ä¸åŒé¡µé¢ä¹‹é—´å…±äº«æ•°æ®ã€‚åœ¨å‘é€æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ PHP çš„ <code>setcookie()</code> å‡½æ•°è®¾ç½®ä¸€ä¸ª cookieã€‚åœ¨æ¥æ”¶æ•°æ®çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>$_COOKIE</code> æ•°ç»„è·å– cookie çš„å€¼ã€‚</p><p>å‘é€æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;John&#x27;</span>, <span class="title function_ invoke__">time</span>() + <span class="number">3600</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªåä¸ºnameçš„cookieå˜é‡ï¼Œå®ƒçš„å€¼æ˜¯jojnã€‚å®ƒå°†åœ¨ä¸€ä¸ªå°æ—¶ä»¥åè¿‡æœŸï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è®¿é—®äº†</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;age&#x27;</span>, <span class="number">30</span>, <span class="title function_ invoke__">time</span>() + <span class="number">3600</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªåä¸ºageçš„cookieå˜é‡ï¼Œå®ƒçš„å€¼æ˜¯30ã€‚å®ƒå°†åœ¨ä¸€ä¸ªå°æ—¶ä»¥åè¿‡æœŸï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è®¿é—®äº†</span></span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„é¡µé¢ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨æ„éœ€è¦åˆ·æ–°ä¸€ä¸‹æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="variable">$name</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="variable">$age</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;age&#x27;</span>];</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•7ï¼šå­˜å…¥æ•°æ®åº“å†å–å‡º"><a href="#æ–¹æ³•7ï¼šå­˜å…¥æ•°æ®åº“å†å–å‡º" class="headerlink" title="æ–¹æ³•7ï¼šå­˜å…¥æ•°æ®åº“å†å–å‡º"></a>æ–¹æ³•7ï¼šå­˜å…¥æ•°æ®åº“å†å–å‡º</h2><p>å­˜å…¥æ•°æ®åº“å†å–å‡ºPHPçš„æ–¹æ³•æ˜¯ï¼šä½¿ç”¨MySQLiæˆ–PDOæ‰©å±•æ¥è¿æ¥MySQLæ•°æ®åº“ï¼Œç„¶åä½¿ç”¨SQLè¯­å¥æ¥æ’å…¥å’ŒæŸ¥è¯¢æ•°æ®Â¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªMySQLæ•°æ®åº“myDBï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªè¡¨MyGuestsï¼Œæœ‰ä¸‰ä¸ªå­—æ®µidï¼Œnameå’Œageï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// åˆ›å»ºè¿æ¥</span></span><br><span class="line"><span class="variable">$conn</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>, <span class="string">&quot;myDB&quot;</span>);</span><br><span class="line"><span class="comment">// æ£€æµ‹è¿æ¥</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;connect_error) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;è¿æ¥å¤±è´¥: &quot;</span> . <span class="variable">$conn</span>-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;INSERT INTO MyGuests (name, age) VALUES (&#x27;å¼ ä¸‰&#x27;, 18)&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>) === <span class="literal">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æ’å…¥æˆåŠŸ&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æ’å…¥å¤±è´¥: &quot;</span> . <span class="variable">$conn</span>-&gt;error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;SELECT id, name, age FROM MyGuests&quot;</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$result</span>-&gt;num_rows &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// è¾“å‡ºæ•°æ®</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="variable">$row</span> = <span class="variable">$result</span>-&gt;<span class="title function_ invoke__">fetch_assoc</span>()) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;id: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;id&quot;</span>]. <span class="string">&quot;, name: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;name&quot;</span>]. <span class="string">&quot;, age: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;age&quot;</span>]. <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æ²¡æœ‰ç»“æœ&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line"><span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œè¿è¡Œåä¼šå¾—åˆ°ï¼š</p><p>æ’å…¥æˆåŠŸ</p><p>id: 1, name: å¼ ä¸‰, age: 18</p><p><strong>å¥½å¤„</strong>ï¼šå¯ä»¥æŒä¹…åŒ–ä¿å­˜æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œå¤æ‚çš„æŸ¥è¯¢å’Œæ“ä½œã€‚</p><p><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦é¢å¤–çš„æ•°æ®åº“æœåŠ¡å™¨å’Œé…ç½®ï¼Œè€—è´¹èµ„æºå¤§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ChatGPTä¸æ–°å¿…åº”ç®€å•ä½“éªŒ</title>
      <link href="/2023/02/28/OpenAI-new%E5%BF%85%E5%BA%94/"/>
      <url>/2023/02/28/OpenAI-new%E5%BF%85%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<h3 id="é¦–å…ˆç®€å•è¯´æ˜ä¸€ä¸‹æˆ‘ä»æ¥è§¦ChatGPTä¸æ–°å¿…åº”åˆ°ä½¿ç”¨çš„è¿‡ç¨‹"><a href="#é¦–å…ˆç®€å•è¯´æ˜ä¸€ä¸‹æˆ‘ä»æ¥è§¦ChatGPTä¸æ–°å¿…åº”åˆ°ä½¿ç”¨çš„è¿‡ç¨‹" class="headerlink" title="é¦–å…ˆç®€å•è¯´æ˜ä¸€ä¸‹æˆ‘ä»æ¥è§¦ChatGPTä¸æ–°å¿…åº”åˆ°ä½¿ç”¨çš„è¿‡ç¨‹"></a>é¦–å…ˆç®€å•è¯´æ˜ä¸€ä¸‹æˆ‘ä»æ¥è§¦ChatGPTä¸æ–°å¿…åº”åˆ°ä½¿ç”¨çš„è¿‡ç¨‹</h3><p>åœ¨2022å¹´å¯’å‡çš„æ—¶å€™ï¼Œåœ¨çœ‹bç«™çš„æ—¶å€™å‘ç°ChatGPTå¼€å§‹å‡ºç°åœ¨è§†é‡ä¸­ï¼Œä¹Ÿæ˜¯å‡ºäºå¥½å¥‡ï¼Œäº†è§£äº†ä¸€ä¸‹ï¼Œä½†å½“æ—¶æ„Ÿè§‰éœ€æ±‚ä¸æ˜¯å¾ˆå¤§ï¼Œè€Œä¸”æœ‰å¾ˆå¤šåˆ«çš„ä»»åŠ¡ï¼Œä¹Ÿæ²¡æœ‰åœ¨å…³æ³¨å®ƒã€‚</p><p>åœ¨å¯’å‡ç»“æŸçš„æ—¶å€™çªç„¶æƒ³èµ·æ¥å¥³æœ‹å‹è®©æˆ‘å¸®å¿™å†™çš„ä¸€ä¸ªçˆ¬è™«ä½œä¸šï¼Œç”±äºå¯¹pythonçˆ¬è™«çš„æŠ€æœ¯æ²¡æœ‰æ¥è§¦è¿‡ï¼Œæƒ³åˆ°äº†ChatGPTï¼Œå°±å»ç ”ç©¶å¹¶æ³¨å†Œäº†ä¸€ä¸ªè´¦å·ã€‚</p><p><strong>ç»“æœå¦‚ä¸‹ï¼š</strong></p><blockquote><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/1.png" alt="1"></p><p>ç¼–å†™ç½‘ç»œçˆ¬è™«éœ€è¦ä¸€å®šçš„ç¼–ç¨‹èƒ½åŠ›å’Œç½‘ç»œåŸºç¡€çŸ¥è¯†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Python ç½‘ç»œçˆ¬è™«ç¨‹åºï¼Œå¯ä»¥ç”¨äºé‡‡é›†å±±ä¸œçœå„åŸå¸‚æœªæ¥7å¤©çš„å¤©æ°”é¢„æŠ¥æ•°æ®ã€‚</p><p>é¦–å…ˆï¼Œéœ€è¦å®‰è£… <code>requests</code> å’Œ <code>beautifulsoup4</code> ä¸¤ä¸ª Python åŒ…ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥å®ç°çˆ¬è™«ç¨‹åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–åŸå¸‚åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_city_list</span>():</span><br><span class="line">    url = <span class="string">&#x27;http://www.weather.com.cn/textFC/hb.shtml&#x27;</span></span><br><span class="line">    response = requests.get(url, headers=headers)</span><br><span class="line">    response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    city_list = soup.find(<span class="string">&#x27;div&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;lqcontentBoxheader&#x27;</span>&#125;).find_all(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    city_dict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> city <span class="keyword">in</span> city_list:</span><br><span class="line">        city_name = city.get_text()</span><br><span class="line">        city_url = city[<span class="string">&#x27;href&#x27;</span>]</span><br><span class="line">        city_dict[city_name] = city_url</span><br><span class="line">    <span class="keyword">return</span> city_dict</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–åŸå¸‚å¤©æ°”ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_city_weather</span>(<span class="params">city_url</span>):</span><br><span class="line">    url = city_url</span><br><span class="line">    response = requests.get(url, headers=headers)</span><br><span class="line">    response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    weather_list = []</span><br><span class="line">    weather_div = soup.find(<span class="string">&#x27;div&#x27;</span>, &#123;<span class="string">&#x27;id&#x27;</span>: <span class="string">&#x27;7d&#x27;</span>&#125;)</span><br><span class="line">    ul = weather_div.find(<span class="string">&#x27;ul&#x27;</span>)</span><br><span class="line">    li_list = ul.find_all(<span class="string">&#x27;li&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">        date = li.find(<span class="string">&#x27;h1&#x27;</span>).get_text()</span><br><span class="line">        weather = li.find_all(<span class="string">&#x27;p&#x27;</span>)</span><br><span class="line">        weather_info = weather[<span class="number">0</span>].get_text().strip()</span><br><span class="line">        temperature_info = weather[<span class="number">1</span>].get_text().strip()</span><br><span class="line">        wind_info = weather[<span class="number">2</span>].get_text().strip()</span><br><span class="line">        weather_list.append(&#123;<span class="string">&#x27;date&#x27;</span>: date, <span class="string">&#x27;weather_info&#x27;</span>: weather_info, <span class="string">&#x27;temperature_info&#x27;</span>: temperature_info, <span class="string">&#x27;wind_info&#x27;</span>: wind_info&#125;)</span><br><span class="line">    <span class="keyword">return</span> weather_list</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ‰€æœ‰åŸå¸‚çš„å¤©æ°”ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_weather_info</span>():</span><br><span class="line">    city_dict = get_city_list()</span><br><span class="line">    weather_info_dict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> city_name, city_url <span class="keyword">in</span> city_dict.items():</span><br><span class="line">        weather_info_dict[city_name] = get_city_weather(city_url)</span><br><span class="line">    <span class="keyword">return</span> weather_info_dict</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºå¤©æ°”ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_weather_info</span>(<span class="params">weather_info_dict</span>):</span><br><span class="line">    <span class="keyword">for</span> city_name, weather_info_list <span class="keyword">in</span> weather_info_dict.items():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;åŸå¸‚ï¼š<span class="subst">&#123;city_name&#125;</span>&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> weather_info <span class="keyword">in</span> weather_info_list:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;æ—¥æœŸï¼š<span class="subst">&#123;weather_info[<span class="string">&quot;date&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;å¤©æ°”ï¼š<span class="subst">&#123;weather_info[<span class="string">&quot;weather_info&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;æ¸©åº¦ï¼š<span class="subst">&#123;weather_info[<span class="string">&quot;temperature_info&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;é£åŠ›ï¼š<span class="subst">&#123;weather_info[<span class="string">&quot;wind_info&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç¨‹åº</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    weather_info_dict = get_weather_info()</span><br><span class="line">    print_weather_info(weather_info_dict)</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><p>ä¹Ÿæ˜¯å‘ç°äº†ChatGPTçš„å¼ºå¤§ä¹‹å¤„ï¼Œç„¶åç´§æ¥ç€æ–°å¿…åº”å‡ºç°äº†ï¼Œç”±äºå¼€å­¦å‰ä¸€å¤©ç”µè„‘å……ç”µå™¨åäº†ï¼Œç„¶åç”µè„‘å¥½å‡ å¤©æ²¡æœ‰å¼€æœºï¼Œæœ€è¿‘æ‰æ”¶åˆ°æ–°å¿…åº”çš„ç”³è¯·é€šè¿‡é‚®ä»¶ï¼Œå¹¶ç«‹å³å»ä½“éªŒäº†ä¸€ä¸‹ï¼Œä½“éªŒæ„Ÿä¹Ÿæ˜¯éå¸¸çš„å¥½ã€‚</p><p>æ–°å¿…åº”&#x3D;å¿…åº”+chatGPTğŸ˜‚</p><p><img src="https://picbed.dai2yutou.space/article_img/OpenAI/2.png" alt="2"></p><h3 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h3><p>å¯¹äºè¿™ä¸¤ä¸ªäººå·¥æ™ºèƒ½ï¼Œéƒ½éœ€è¦æˆ‘ä»¬ç§‘å­¦ä¸Šç½‘ï¼Œå¹¶å»ºè®®åœ¨æ³¨å†ŒChatGPTæ—¶ä½¿ç”¨è°·æ­Œé‚®ç®±æ³¨å†Œï¼ï¼ï¼</p><h3 id="æ„Ÿè§¦"><a href="#æ„Ÿè§¦" class="headerlink" title="æ„Ÿè§¦"></a>æ„Ÿè§¦</h3><p>æ„Ÿè§‰ChatGPTå’Œæ–°å¿…åº”å°†æ¥å¯¹æˆ‘è¿‘æ•°æœˆçš„è®¡ç®—æœºå­¦ä¹ å’Œå¼€å‘æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</p><p>æ–°å¿…åº”å’ŒchatGPTä¼˜åŠ¿å„ä¸ç›¸åŒï¼Œæ–°å¿…åº”å¯èƒ½æ›´åŠ çŸ¥è¯†æ¸Šåšï¼Œå¹¶ä¸”èƒ½åšå¤é€šä»Šã€‚è®¡ç®—èƒ½åŠ›ä¹Ÿæ˜¯å‡†ç¡®çš„ï¼Œä¸ä¼šç¼–çè¯ï¼Œæœ‰è‡ªå·±çš„ç«‹åœºå’ŒåšæŒã€‚è€ŒchatGPTæ›´åƒæ˜¯ä¸ªå·¥å…·äººï¼Œä»¥ä½ ä¸ºä¸­å¿ƒï¼Œä½ å¯ä»¥è®­ç»ƒä»–è®©ä»–å˜å¾—æ›´åŠ è¶æ‰‹ï¼Œä½†æ˜¯ä¸èƒ½ä½œä¸ºè®¡ç®—å™¨ï¼Œæ»¡å˜´è·‘ç«è½¦ï¼Œæ“…é•¿è¯´æ— ç”¨çš„åºŸè¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ—¥å¸¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenAI </tag>
            
            <tag> æ–°å¿…åº” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WampServerè¿è¡Œå‘ˆæ©™è‰²è¯¥æ€ä¹ˆåŠï¼Ÿ</title>
      <link href="/2023/02/06/WampServer%E5%9B%BE%E6%A0%87%E9%BB%84%E8%89%B2/"/>
      <url>/2023/02/06/WampServer%E5%9B%BE%E6%A0%87%E9%BB%84%E8%89%B2/</url>
      
        <content type="html"><![CDATA[<p><img src="https://picbed.dai2yutou.space/article_img/PHP/1.png" alt="image-20230206001037121"></p><h3 id="ä¸€ã€é—®é¢˜æè¿°"><a href="#ä¸€ã€é—®é¢˜æè¿°" class="headerlink" title="ä¸€ã€é—®é¢˜æè¿°"></a>ä¸€ã€é—®é¢˜æè¿°</h3><p>â€‹å½“ä½ æ‰“ç®—ä½¿ç”¨<code>WordPress</code>æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢æˆ–è€…æƒ³å­¦ä¹ <code>php</code>æ—¶ï¼Œé¿å…ä¸äº†è¦å®‰è£…<code>wampserver</code>é›†æˆç¯å¢ƒï¼Œåœ¨å®‰è£…æ­¤ç¯å¢ƒä¹‹å‰ï¼Œå¯èƒ½æœ‰äº›äººå·²ç»å®‰è£…è¿‡Apacheã€PHPã€MySqlï¼Œæ­¤æ—¶å¯èƒ½ä¼šå‡ºç°<code>WampServer</code>å›¾æ ‡å‘ˆç°çº¢è‰²ï¼Œæˆ–è€…é»„è‰²ã€‚</p><h3 id="äºŒã€è§£å†³æ–¹æ³•"><a href="#äºŒã€è§£å†³æ–¹æ³•" class="headerlink" title="äºŒã€è§£å†³æ–¹æ³•"></a>äºŒã€è§£å†³æ–¹æ³•</h3><p>è¿™é‡Œç›´æ¥æš´åŠ›è§£å†³å³å¯ï¼</p><p>é¦–å…ˆæ‰“è¿è¡Œ<code>WampServer</code>ç¯å¢ƒï¼Œå‘ç°å›¾æ ‡å‘ˆç°çº¢è‰²æˆ–è€…é»„è‰²ã€‚</p><ul><li>çº¢è‰²ä¸€èˆ¬ä¸ºApacheã€PHPã€MySqlæ­¤ä¸‰ä¸ªæœåŠ¡æœªæ‰“å¼€ã€‚</li><li>é»„è‰²ä¸€èˆ¬ä¸ºApacheã€PHPã€MySqlæ­¤ä¸‰ä¸ªæœåŠ¡ç«¯å£è¢«å…¶ä»–ç¨‹åºå ç”¨ã€‚</li></ul><h4 id="ç¬¬ä¸€æ­¥ï¼š"><a href="#ç¬¬ä¸€æ­¥ï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼š"></a>ç¬¬ä¸€æ­¥ï¼š</h4><p>1.<code>win+Q</code>æ‰“å¼€ç”µè„‘æœç´¢ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/PHP/2.png" alt="image-20230205235602889"></p><p>2.ç„¶åè¾“å…¥<strong>æœåŠ¡</strong>è¿›è¡Œæœç´¢ã€‚</p><p>3.æ‰¾åˆ°<code>wampapache</code>ã€<code>wampmariadb</code>ã€<code>wampmysqld</code>ï¼Œè§‚å¯Ÿç¬¬ä¸‰åˆ—æ˜¯å¦æ˜¾ç¤ºæ­£åœ¨è¿è¡Œï¼Œå¦‚ä¸æ˜¯ï¼Œåˆ™å³å‡»ç„¶åç‚¹å‡»å¯åŠ¨å³å¯ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/PHP/3.png" alt="image-20230205235812819"></p><p>4.å¯¹<code>WampServer</code>å³å‡»åˆ·æ–°ï¼Œå¦‚æœªå˜æˆç»¿è‰²è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><h4 id="ç¬¬äºŒæ­¥ï¼š"><a href="#ç¬¬äºŒæ­¥ï¼š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼š"></a>ç¬¬äºŒæ­¥ï¼š</h4><p>åœ¨<strong>æœåŠ¡</strong>ä¸­æ‰¾åˆ°å·²ç»å®‰è£…çš„<code>mysql</code>ï¼Œå¦‚æ˜¾ç¤ºæ­£åœ¨è¿è¡Œï¼Œå³å‡»åœæ­¢ï¼Œå¹¶å»ºè®®é€‰æ‹©æ‰‹åŠ¨ï¼Œä¸æ˜¯è‡ªåŠ¨æ‰“å¼€ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/PHP/4.png" alt="image-20230206000350082"></p><p>ç„¶åå¯¹<code>WampServer</code>å³å‡»åˆ·æ–°ï¼Œå¦‚æœªå˜æˆç»¿è‰²å†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><h4 id="ç¬¬ä¸‰æ­¥ï¼š"><a href="#ç¬¬ä¸‰æ­¥ï¼š" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼š"></a>ç¬¬ä¸‰æ­¥ï¼š</h4><p>1.<strong>win+Q</strong>æ‰“å¼€ç”µè„‘æœç´¢ã€‚</p><p>2.è¾“å…¥<strong>è®¡ç®—æœºç®¡ç†</strong>è¿›è¡Œæœæœã€‚</p><p>3.ç‚¹å‡»æœåŠ¡å’Œåº”ç”¨ç¨‹åºï¼Œç„¶åç‚¹å‡»<strong>IISç®¡ç†å™¨</strong>ï¼Œå¦‚æœæ˜¾ç¤ºæ­£åœ¨è¿è¡Œï¼Œåˆ™ç‚¹å‡»åœæ­¢ï¼Œç„¶åé‡æ–°åˆ·æ–°<code>WampServer</code>ã€‚</p><p><img src="https://picbed.dai2yutou.space/article_img/PHP/5.png" alt="image-20230206000607935"></p><p><img src="https://picbed.dai2yutou.space/article_img/PHP/6.png" alt="image-20230206000751059"></p><p>4.åˆ·æ–°æˆåŠŸåï¼Œå»ºè®®å†é‡æ–°å¯åŠ¨<code>IIS</code>ã€‚</p><h3 id="ä¸‰ã€é—®é¢˜è§£å†³ğŸ¥°"><a href="#ä¸‰ã€é—®é¢˜è§£å†³ğŸ¥°" class="headerlink" title="ä¸‰ã€é—®é¢˜è§£å†³ğŸ¥°"></a>ä¸‰ã€é—®é¢˜è§£å†³ğŸ¥°</h3>]]></content>
      
      
      <categories>
          
          <category> bugè®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> WampServer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‹±æ–‡æ°´å¹³ä¸é«˜ï¼Œå’‹ç¿»è¯‘è®ºæ–‡ï¼Ÿ</title>
      <link href="/2023/02/02/%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/"/>
      <url>/2023/02/02/%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>å‚è€ƒï¼š<a href="https://mp.weixin.qq.com/s/YODR8nYweL6iRMVJ13HGDg">è‹±æ–‡æ°´å¹³ä¸é«˜ï¼Œå’‹ç¿»è¯‘è®ºæ–‡ï¼Ÿ</a></p></div><h2 id="ä¸€ã€DeepLç¿»è¯‘-å…¨ä¸–ç•Œæœ€å‡†ç¡®çš„ç¿»è¯‘ï¼ˆè‡ªç§°ï¼‰"><a href="#ä¸€ã€DeepLç¿»è¯‘-å…¨ä¸–ç•Œæœ€å‡†ç¡®çš„ç¿»è¯‘ï¼ˆè‡ªç§°ï¼‰" class="headerlink" title="ä¸€ã€DeepLç¿»è¯‘:å…¨ä¸–ç•Œæœ€å‡†ç¡®çš„ç¿»è¯‘ï¼ˆè‡ªç§°ï¼‰"></a><strong>ä¸€ã€DeepLç¿»è¯‘:å…¨ä¸–ç•Œæœ€å‡†ç¡®çš„ç¿»è¯‘ï¼ˆè‡ªç§°ï¼‰</strong></h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/1.png" alt="Deel"></p><p>ç½‘å€ï¼š<a href="https://www.deepl.com/translator">https://www.deepl.com/translator</a></p><ul><li>ä¼˜ç‚¹ï¼šåœ¨<strong>ä¸“æœ‰åè¯</strong>ç¿»è¯‘æ–¹é¢å¾ˆå‡†ç¡®ï¼Œ<strong>é€‚åˆå­¦æœ¯è®ºæ–‡</strong>,å¯å…è´¹å…¨æ–‡ä»¶ç¿»è¯‘</li><li>ç¼ºç‚¹ï¼šå…¨æ–‡ä»¶ç¿»è¯‘æ—¶æ ¼å¼è¾ƒä¹±ï¼Œä¸è¿‡å¯ä»¥ç”¨äºå¸®åŠ©åˆæ­¥ç†è§£ç¾èµ›è®ºæ–‡</li></ul><h2 id="äºŒã€ç¿»è¯‘ç‹—ï¼šåª²ç¾äººå·¥ç¿»è¯‘çš„æ–‡æ¡£ç¿»è¯‘å¹³å°ï¼ˆè‡ªç§°ï¼‰"><a href="#äºŒã€ç¿»è¯‘ç‹—ï¼šåª²ç¾äººå·¥ç¿»è¯‘çš„æ–‡æ¡£ç¿»è¯‘å¹³å°ï¼ˆè‡ªç§°ï¼‰" class="headerlink" title="äºŒã€ç¿»è¯‘ç‹—ï¼šåª²ç¾äººå·¥ç¿»è¯‘çš„æ–‡æ¡£ç¿»è¯‘å¹³å°ï¼ˆè‡ªç§°ï¼‰"></a><strong>äºŒã€ç¿»è¯‘ç‹—ï¼šåª²ç¾äººå·¥ç¿»è¯‘çš„æ–‡æ¡£ç¿»è¯‘å¹³å°ï¼ˆè‡ªç§°ï¼‰</strong></h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/2.png" alt="ç¿»è¯‘ç‹—"></p><p>ç½‘å€ï¼š<a href="https://www.fanyigou.com/">https://www.fanyigou.com/</a></p><ul><li>ä¼˜ç‚¹ï¼šå¯å…¨æ–‡ä»¶ç¿»è¯‘ä¸”<strong>é€Ÿåº¦å¿«</strong>ï¼Œ<strong>æ’ç‰ˆ</strong>æ•ˆæœå¾ˆå¥½ï¼Œ<strong>åŒè¯­å¯¹æ¯”å¹¶ä¿æŒåŒæ­¥é¡µé¢æŸ¥çœ‹</strong></li><li>ç¼ºç‚¹ï¼šå¤šæ¬¡ä½¿ç”¨æ”¶è´¹ï¼Œä¸è¿‡äº§å“ä½“éªŒä»¥åŠå”®åæœåŠ¡è¾ƒå¥½</li></ul><h2 id="ä¸‰ã€grammarlyè¯­æ³•æ£€æµ‹ï¼šè¯­æ³•çº é”™å’Œæ ¡å¯¹"><a href="#ä¸‰ã€grammarlyè¯­æ³•æ£€æµ‹ï¼šè¯­æ³•çº é”™å’Œæ ¡å¯¹" class="headerlink" title="ä¸‰ã€grammarlyè¯­æ³•æ£€æµ‹ï¼šè¯­æ³•çº é”™å’Œæ ¡å¯¹"></a><strong>ä¸‰ã€grammarlyè¯­æ³•æ£€æµ‹ï¼šè¯­æ³•çº é”™å’Œæ ¡å¯¹</strong></h2><p><img src="https://picbed.dai2yutou.space/article_img/%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/3.png" alt="grammarlè¯­æ³•æ£€æµ‹"></p><p>ç½‘å€ï¼š<a href="https://app.grammarly.com/">https://app.grammarly.com/</a></p><ul><li>ä¼˜ç‚¹ï¼šæ¯æ¡æ‰¹æ³¨ä¸‹é¢éƒ½ä¼šé…æœ‰è¯¦ç»†çš„è§£é‡Šï¼Œå‘Šè¯‰ä½ å“ªé‡Œé”™äº†ï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·ä¿®æ”¹</li><li>ç¼ºç‚¹ï¼šæ›´ç»†èŠ‚çš„æ£€é”™éœ€è¦ä»˜è´¹ï¼Œä¸è¿‡å¤§å­¦ç”Ÿä¸€èˆ¬ä¸éœ€è¦</li></ul><h2 id="å››ã€æ³¨æ„äº‹é¡¹"><a href="#å››ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="å››ã€æ³¨æ„äº‹é¡¹"></a>å››ã€æ³¨æ„äº‹é¡¹</h2><p>ç«èµ›æ—¶ï¼Œä¸è¦å°†å†™å¥½çš„å®Œæ•´çš„è‹±æ–‡è®ºæ–‡æäº¤åˆ°ä»»ä½•ç¿»è¯‘æˆ–æŸ¥é‡&#x2F;æ¶¦è‰²çš„ç½‘ç«™ï¼Œé˜²æ­¢è¢«æŸ¥é‡ä»è€Œå¤±å»è¯„å¥–èµ„æ ¼ã€‚</p><p>å†™ä¸è¯»è‹±æ–‡è®ºæ–‡ï¼Œè¦å§‹ç»ˆä¿æŒè€å¿ƒï¼Œä»»ä½•è½¯ä»¶éƒ½æ˜¯å·¥å…·ï¼Œåœ¨æ ¹æœ¬ä¸Šè¿˜æ˜¯é è‡ªå·±ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Echartsç¤¾åŒºåœ°å€</title>
      <link href="/2023/01/24/Echarts%E7%A4%BE%E5%8C%BA%E5%9C%B0%E5%9D%80/"/>
      <url>/2023/01/24/Echarts%E7%A4%BE%E5%8C%BA%E5%9C%B0%E5%9D%80/</url>
      
        <content type="html"><![CDATA[<p>Echartså®˜æ–¹ç¤¾åŒºå·²åœæ­¢è¿è¥ï¼Œä½†æœ‰è®¸å¤šå¤§ä½¬çš„å¼€æºç½‘ç«™ã€‚</p><ul><li><a href="https://www.isqqw.com/#/homepage">www.isqqw.com/#/homepage</a></li><li><a href="http://www.ppchart.com/">http://www.ppchart.com</a></li><li><a href="https://www.makeapie.cn/echarts">www.makeapie.cn/echarts</a>[æ¨è]</li><li><a href="http://echarts.zhangmuchen.top/">http://echarts.zhangmuchen.top</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®å¯è§†åŒ–Echarts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoå‘ç”Ÿerrorï¼šspawn failedé”™è¯¯çš„è§£å†³æ–¹æ³•</title>
      <link href="/2023/01/20/erro_spawn_failed/"/>
      <url>/2023/01/20/erro_spawn_failed/</url>
      
        <content type="html"><![CDATA[<div class="note info simple"><p>Hexoå‘ç”Ÿerrorï¼šspawn failedé”™è¯¯çš„è§£å†³æ–¹æ³•</p></div><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>å½“æˆ‘ä»¬å°†åšå®¢é€šè¿‡ä¸‰è¿éƒ¨ç½²åˆ°<code>github</code>ä¸Šæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°<code>errorï¼šspawn</code>çš„é”™è¯¯ã€‚</p><p>è¿™ç§é—®é¢˜å¤§å¤šæ•°æ˜¯å› ä¸ºä½¿ç”¨<code>git</code>è¿›è¡Œ<code>push</code>æˆ–è€…ä½¿ç”¨<code>hexo d</code>çš„æ—¶å€™æ”¹å˜äº†ä¸€äº›<code>.deploy_git</code>æ–‡ä»¶ä¸‹çš„å†…å®¹ã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ol><li>åˆ é™¤<code>.deploy_git</code>æ–‡ä»¶å¤¹</li><li>ç„¶åï¼Œä¾æ¬¡æ‰§è¡Œï¼š<br><code>hexo clean</code><br><code>hexo g</code><br><code>hexo d</code></li></ol><p>æ­¤æ—¶ä¼šå‘ç°åšå®¢éƒ¨ç½²æˆåŠŸï¼Œé—®é¢˜è§£å†³ï¼Œæš´åŠ›ç›´æ¥ä¸”æœ‰æ•ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> bugè®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterflyå¤–æŒ‚æ ‡ç­¾</title>
      <link href="/2023/01/20/Butterfly%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/"/>
      <url>/2023/01/20/Butterfly%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>å‚è€ƒï¼š<a href="https://www.fomal.cc/posts/2013454d.html">Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€» | FomalhautğŸ¥</a></p></div><div class="note success simple"><p>æç¤ºï¼šä½¿ç”¨å‰éœ€è¦åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æˆ–ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼•å…¥å¤–æŒ‚æ ‡ç­¾</p></div><blockquote><p>hexoåšå®¢æ–‡ç« æ’°å†™æ”¯æŒmarkdownè¯­æ³•å’Œå¤–æŒ‚æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Typoraç­‰è½¯ä»¶ç¼–å†™æ–‡ç« ï¼Œå¤–æŒ‚æ ‡ç­¾ä½œä¸ºåŠ å·¥ä½œç”¨ï¼Œæ–¹ä¾¿é˜…è¯»å’ŒæŸ¥çœ‹ã€‚</p></blockquote><h1 id="Markdownè¯­æ³•"><a href="#Markdownè¯­æ³•" class="headerlink" title="Markdownè¯­æ³•"></a>Markdownè¯­æ³•</h1><h2 id="Markdownè¯­æ³•æ”¯æŒçš„HTMLæ ‡ç­¾å¦‚ä¸‹ï¼š"><a href="#Markdownè¯­æ³•æ”¯æŒçš„HTMLæ ‡ç­¾å¦‚ä¸‹ï¼š" class="headerlink" title="Markdownè¯­æ³•æ”¯æŒçš„HTMLæ ‡ç­¾å¦‚ä¸‹ï¼š"></a>Markdownè¯­æ³•æ”¯æŒçš„HTMLæ ‡ç­¾å¦‚ä¸‹ï¼š</h2><ul><li><code>&lt;span&gt;</code>ï¼šè¡¨ç¤ºè¡Œå†…æ–‡å­—</li><li><code>&lt;p&gt;</code>ï¼šè¡¨ç¤ºæ®µè½</li><li><code>&lt;strong&gt;</code> æˆ– <code>&lt;b&gt;</code>ï¼šè¡¨ç¤ºåŠ ç²—</li><li><code>&lt;em&gt;</code> æˆ– <code>&lt;i&gt;</code>ï¼šè¡¨ç¤ºæ–œä½“</li><li><code>&lt;del&gt;</code>ï¼šè¡¨ç¤ºåˆ é™¤çº¿</li><li><code>&lt;a&gt;</code>ï¼šè¡¨ç¤ºé“¾æ¥ï¼Œå¯ä»¥ä½¿ç”¨<code>[é“¾æ¥æ–‡æœ¬](é“¾æ¥åœ°å€)</code>çš„æ ¼å¼è¿›è¡Œå¿«æ·è¾“å…¥</li><li><code>&lt;img&gt;</code>ï¼šè¡¨ç¤ºæ’å…¥å›¾ç‰‡ï¼Œå¯ä»¥ä½¿ç”¨<code>![å›¾ç‰‡æè¿°](å›¾ç‰‡åœ°å€)</code>çš„æ ¼å¼è¿›è¡Œå¿«æ·è¾“å…¥</li><li><code>&lt;h1&gt;</code> åˆ° <code>&lt;h6&gt;</code>ï¼šè¡¨ç¤ºæ ‡é¢˜ï¼Œå¯ä»¥ä½¿ç”¨<code>#</code>ç¬¦å·è¿›è¡Œå¿«æ·è¾“å…¥</li><li><code>&lt;ul&gt;</code> å’Œ <code>&lt;li&gt;</code>ï¼šè¡¨ç¤ºæ— åºåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨<code>-</code>ç¬¦å·è¿›è¡Œå¿«æ·è¾“å…¥</li><li><code>&lt;ol&gt;</code> å’Œ <code>&lt;li&gt;</code>ï¼šè¡¨ç¤ºæœ‰åºåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨æ•°å­—å’Œ<code>.</code>ç¬¦å·è¿›è¡Œå¿«æ·è¾“å…¥</li><li><code>&lt;blockquote&gt;</code>ï¼šè¡¨ç¤ºå¼•ç”¨å—</li><li><code>&lt;code&gt;</code>ï¼šè¡¨ç¤ºè¡Œå†…ä»£ç </li><li><code>&lt;pre&gt;</code> å’Œ <code>&lt;code&gt;</code>ï¼šè¡¨ç¤ºä»£ç å—ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰ä¸ªåå¼•å·è¿›è¡Œå¿«æ·è¾“å…¥</li></ul><h1 id="Butterflyå¤–æŒ‚æ ‡ç­¾"><a href="#Butterflyå¤–æŒ‚æ ‡ç­¾" class="headerlink" title="Butterflyå¤–æŒ‚æ ‡ç­¾"></a>Butterflyå¤–æŒ‚æ ‡ç­¾</h1><h2 id="1-è¡Œå†…æ–‡æœ¬æ ·å¼-text"><a href="#1-è¡Œå†…æ–‡æœ¬æ ·å¼-text" class="headerlink" title="1 è¡Œå†…æ–‡æœ¬æ ·å¼ text"></a>1 è¡Œå†…æ–‡æœ¬æ ·å¼ text</h2><details class="folding-tag" blue><summary> è¡Œå†…æ–‡æœ¬æ ·å¼ text </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% emp æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% wavy æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% del æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% kbd æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% psw æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> å¸¦ &#123;% u ä¸‹åˆ’çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">2.</span> å¸¦ &#123;% emp ç€é‡å· %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">3.</span> å¸¦ &#123;% wavy æ³¢æµªçº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">4.</span> å¸¦ &#123;% del åˆ é™¤çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">5.</span> é”®ç›˜æ ·å¼çš„æ–‡æœ¬ &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š&#123;% psw è¿™é‡Œæ²¡æœ‰éªŒè¯ç  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><ol><li>å¸¦ <u>ä¸‹åˆ’çº¿</u> çš„æ–‡æœ¬</li><li>å¸¦ <emp>ç€é‡å·</emp> çš„æ–‡æœ¬</li><li>å¸¦ <wavy>æ³¢æµªçº¿</wavy> çš„æ–‡æœ¬</li><li>å¸¦ <del>åˆ é™¤çº¿</del> çš„æ–‡æœ¬</li><li>é”®ç›˜æ ·å¼çš„æ–‡æœ¬ <kbd>command</kbd> + <kbd>D</kbd></li><li>å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š<psw>è¿™é‡Œæ²¡æœ‰éªŒè¯ç </psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="2-è¡Œå†…æ–‡æœ¬-span"><a href="#2-è¡Œå†…æ–‡æœ¬-span" class="headerlink" title="2 è¡Œå†…æ–‡æœ¬ span"></a>2 è¡Œå†…æ–‡æœ¬ span</h2><details class="folding-tag" blue><summary> è¡Œå†…æ–‡æœ¬æ ·å¼ span </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ol><li><code>å­—ä½“ï¼š</code>logoï¼Œcode</li><li><code>é¢œè‰²ï¼š</code>red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°ï¼š</code>small,h4,h3,h2,h1,large,huge,ultra</li><li><code>å¯¹é½æ–¹å‘ï¼š</code>left,center,right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">  åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% span red, çº¢è‰² %&#125;ã€&#123;% span yellow, é»„è‰² %&#125;ã€&#123;% span green, ç»¿è‰² %&#125;ã€&#123;% span cyan, é’è‰² %&#125;ã€&#123;% span blue, è“è‰² %&#125;ã€&#123;% span gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">  æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">  &#123;% span center logo large, Volantis %&#125;</span><br><span class="line">  &#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<span class='p red'>çº¢è‰²</span>ã€<span class='p yellow'>é»„è‰²</span>ã€<span class='p green'>ç»¿è‰²</span>ã€<span class='p cyan'>é’è‰²</span>ã€<span class='p blue'>è“è‰²</span>ã€<span class='p gray'>ç°è‰²</span>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="3-æ®µè½æ–‡æœ¬-p"><a href="#3-æ®µè½æ–‡æœ¬-p" class="headerlink" title="3 æ®µè½æ–‡æœ¬ p"></a>3 æ®µè½æ–‡æœ¬ p</h2><details class="folding-tag" blue><summary> æ®µè½æ–‡æœ¬ p </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% p æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ol><li><code>å­—ä½“ï¼š</code>logoï¼Œcode</li><li><code>é¢œè‰²ï¼š</code>red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°ï¼š</code>small,h4,h3,h2,h1,large,huge,ultra</li><li><code>å¯¹é½æ–¹å‘ï¼š</code>left,center,right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% p red, çº¢è‰² %&#125;ã€&#123;% p yellow, é»„è‰² %&#125;ã€&#123;% p green, ç»¿è‰² %&#125;ã€&#123;% p cyan, é’è‰² %&#125;ã€&#123;% p blue, è“è‰² %&#125;ã€&#123;% p gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<p class='p red'>çº¢è‰²</p>ã€<p class='p yellow'>é»„è‰²</p>ã€<p class='p green'>ç»¿è‰²</p>ã€<p class='p cyan'>é’è‰²</p>ã€<p class='p blue'>è“è‰²</p>ã€<p class='p gray'>ç°è‰²</p>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚<p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="4-å¼•ç”¨note"><a href="#4-å¼•ç”¨note" class="headerlink" title="4 å¼•ç”¨note"></a>4 å¼•ç”¨note</h2><details class="folding-tag" blue><summary> å¼•ç”¨note </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">é€šç”¨é…ç½®</button></li><li class="tab"><button type="button" data-href="#test-2">è¯­æ³•æ ¼å¼</button></li><li class="tab"><button type="button" data-href="#test-3">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#test-4">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-5">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">simple</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p><strong>1. è‡ªå¸¦icon</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p><strong>2. å¤–éƒ¨icon</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p><strong>1. è‡ªå¸¦icon</strong></p><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">class</td><td align="center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default &#x2F; primary &#x2F; success &#x2F; info &#x2F; warning &#x2F; danger ï¼‰</td></tr><tr><td align="center">no-icon</td><td align="center">ã€å¯é€‰ã€‘ä¸æ˜¾ç¤º icon</td></tr><tr><td align="center">style</td><td align="center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple&#x2F;modern&#x2F;flat&#x2F;disabledï¼‰</td></tr></tbody></table><p><strong>2. å¤–éƒ¨icon</strong></p><table><thead><tr><th align="center"><strong>å‚æ•°</strong></th><th align="center"><strong>ç”¨æ³•</strong></th></tr></thead><tbody><tr><td align="center">class</td><td align="center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green ï¼‰</td></tr><tr><td align="center">icon</td><td align="center">ã€å¯é€‰ã€‘å¯é…ç½®è‡ªå®šä¹‰ icon (åªæ”¯æŒ fontawesome å›¾æ ‡, ä¹Ÿå¯ä»¥é…ç½® no-icon )</td></tr><tr><td align="center">style</td><td align="center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple&#x2F;modern&#x2F;flat&#x2F;disabledï¼‰</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><details class="folding-tag" gray><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" gray><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-5"><details class="folding-tag" gray><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note simple"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default simple"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary simple"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success simple"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info simple"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning simple"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger simple"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>2.<code>modern</code>æ ·å¼</p><div class="note modern"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default modern"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary modern"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success modern"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info modern"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning modern"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger modern"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note disabled"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default disabled"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary disabled"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success disabled"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info disabled"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning disabled"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger disabled"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default no-icon flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary no-icon flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success no-icon flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info no-icon flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning no-icon flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger no-icon flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div>              </div>            </details><details class="folding-tag" gray><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>2.<code>modern</code>æ ·å¼</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue no-icon flat"><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink no-icon flat"><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red no-icon flat"><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple no-icon flat"><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green no-icon flat"><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="5-ä¸Šæ ‡æ ‡ç­¾-tip"><a href="#5-ä¸Šæ ‡æ ‡ç­¾-tip" class="headerlink" title="5 ä¸Šæ ‡æ ‡ç­¾ tip"></a>5 ä¸Šæ ‡æ ‡ç­¾ tip</h2><details class="folding-tag" blue><summary> ä¸Šæ ‡æ ‡ç­¾tip </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;è‡ªå®šä¹‰font awesomeå›¾æ ‡&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>è‡ªå®šä¹‰font awesomeå›¾æ ‡</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="6-åŠ¨æ€æ ‡ç­¾-anima"><a href="#6-åŠ¨æ€æ ‡ç­¾-anima" class="headerlink" title="6 åŠ¨æ€æ ‡ç­¾ anima"></a>6 åŠ¨æ€æ ‡ç­¾ anima</h2><details class="folding-tag" blue><summary> åŠ¨æ€æ ‡ç­¾ anima </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div><p>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦</p><div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div><p>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div><p>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="7-å¤é€‰åˆ—è¡¨-checkbox"><a href="#7-å¤é€‰åˆ—è¡¨-checkbox" class="headerlink" title="7 å¤é€‰åˆ—è¡¨ checkbox"></a>7 å¤é€‰åˆ—è¡¨ checkbox</h2><details class="folding-tag" blue><summary> å¤é€‰åˆ—è¡¨ checkbox </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">æ ·å¼</td><td align="center">é»˜è®¤ä¸ºâˆšï¼Œplus, minus, times</td></tr><tr><td align="center">é¢œè‰²</td><td align="center">é»˜è®¤ä¸ºä¸»é¢˜é¢œè‰²ï¼Œred,yellow,green,cyan,blue,gray</td></tr><tr><td align="center">é€‰ä¸­çŠ¶æ€</td><td align="center">é»˜è®¤ä¸ºä¸é€‰ä¸­ï¼Œchecked</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% checkbox checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% checkbox red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% checkbox green checked, ç»¿è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, é»„è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, é’è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox blue checked, è“è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, å¢åŠ  %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, å‡å°‘ %&#125;</span><br><span class="line">&#123;% checkbox times red checked, å‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><div class='checkbox'><input type="checkbox" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç»¿è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>é»„è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>é’è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>è“è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>å¢åŠ </p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>å‡å°‘</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>å‰</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="8-å•é€‰åˆ—è¡¨-radio"><a href="#8-å•é€‰åˆ—è¡¨-radio" class="headerlink" title="8 å•é€‰åˆ—è¡¨ radio"></a>8 å•é€‰åˆ—è¡¨ radio</h2><details class="folding-tag" blue><summary> å•é€‰åˆ—è¡¨ radio </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center"><code>é¢œè‰²</code></td><td align="center">red,yellow,green,cyan,blue,gray</td></tr><tr><td align="center"><code>é€‰ä¸­çŠ¶æ€</code></td><td align="center">checked</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% radio checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% radio red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% radio green, ç»¿è‰² %&#125;</span><br><span class="line">&#123;% radio yellow, é»„è‰² %&#125;</span><br><span class="line">&#123;% radio cyan, é’è‰² %&#125;</span><br><span class="line">&#123;% radio blue, è“è‰² %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><div class='checkbox'><input type="radio" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="radio" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green'><input type="radio" />            <p>ç»¿è‰²</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>é»„è‰²</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>é’è‰²</p>            </div><div class='checkbox blue'><input type="radio" />            <p>è“è‰²</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="9-æ—¶é—´è½´-timeline"><a href="#9-æ—¶é—´è½´-timeline" class="headerlink" title="9 æ—¶é—´è½´ timeline"></a>9 æ—¶é—´è½´ timeline</h2><details class="folding-tag" blue><summary> æ—¶é—´è½´ timeline </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´çº¿æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰[,color] %&#125;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">title</td><td align="center">æ ‡é¢˜&#x2F;æ—¶é—´çº¿</td></tr><tr><td align="center">color</td><td align="center"><code>timeline</code>é¢œè‰²:default(ç•™ç©º) &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´è½´æ ·å¼,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å¦‚æœæœ‰ <span class="code">`hexo-lazyload-image`</span> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <span class="code">`lazyload.isSPA: true`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> 2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <span class="code">`use_cdn: true`</span> åˆ™éœ€è¦åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">3.</span> 2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</span><br><span class="line"><span class="bullet">4.</span> 2.x ç‰ˆæœ¬çš„ç½®é¡¶ <span class="code">`top: true`</span> æ”¹ä¸ºäº† <span class="code">`pin: true`</span>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <span class="code">`layout: page`</span> çš„é¡µé¢ã€‚</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœä½¿ç”¨äº† <span class="code">`hexo-offline`</span> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å…¨å±€æœç´¢ <span class="code">`seotitle`</span> å¹¶æ›¿æ¢ä¸º <span class="code">`seo_title`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<span class="code">`group: group_name`</span> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <span class="code">`group_name`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <span class="code">`short_title`</span> å…¶æ¬¡æ˜¯ <span class="code">`title`</span>ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>æ—¶é—´è½´æ ·å¼</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>å¦‚æœæœ‰ <code>hexo-lazyload-image</code> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <code>lazyload.isSPA: true</code>ã€‚</li><li>2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <code>use_cdn: true</code> åˆ™éœ€è¦åˆ é™¤ã€‚</li><li>2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</li><li>2.x ç‰ˆæœ¬çš„ç½®é¡¶ <code>top: true</code> æ”¹ä¸ºäº† <code>pin: true</code>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <code>layout: page</code> çš„é¡µé¢ã€‚</li><li>å¦‚æœä½¿ç”¨äº† <code>hexo-offline</code> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>å…¨å±€æœç´¢ <code>seotitle</code> å¹¶æ›¿æ¢ä¸º <code>seo_title</code>ã€‚</li><li>group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<code>group: group_name</code> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <code>group_name</code>ã€‚</li><li>group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <code>short_title</code> å…¶æ¬¡æ˜¯ <code>title</code>ã€‚</li></ol></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="10-é“¾æ¥å¡ç‰‡-link"><a href="#10-é“¾æ¥å¡ç‰‡-link" class="headerlink" title="10 é“¾æ¥å¡ç‰‡ link"></a>10 é“¾æ¥å¡ç‰‡ link</h2><details class="folding-tag" blue><summary> é“¾æ¥å¡ç‰‡ link </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡é“¾æ¥ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link å°æ¼å¤´è®°å½•, https://www.dai2yutou.space/, https://www.dai2yutou.space/img/avatar.jpg %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><div class="tag link"><a class="link-card" title="å°æ¼å¤´è®°å½•" href="https://www.dai2yutou.space/"><div class="left"><img src="https://www.dai2yutou.space/img/avatar.jpg"/></div><div class="right"><p class="text">å°æ¼å¤´è®°å½•</p><p class="url">https://www.dai2yutou.space/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="11-æŒ‰é’®-btns"><a href="#11-æŒ‰é’®-btns" class="headerlink" title="11 æŒ‰é’® btns"></a>11 æŒ‰é’® btns</h2><details class="folding-tag" blue><summary> æŒ‰é’® btns </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns æ ·å¼å‚æ•° %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ol><li><p>åœ†è§’æ ·å¼ï¼šrounded, circle</p></li><li><p>å¢åŠ æ–‡å­—æ ·å¼ï¼šå¯ä»¥åœ¨å®¹å™¨å†…å¢åŠ  <code>æ ‡é¢˜</code>å’Œ<code>æè¿°æ–‡å­—</code></p></li><li><p>å¸ƒå±€æ–¹å¼ï¼š<br>é»˜è®¤ä¸ºè‡ªåŠ¨å®½åº¦ï¼Œé€‚åˆè§†é‡å†…åªæœ‰ä¸€ä¸¤ä¸ªçš„æƒ…å†µã€‚</p><table><thead><tr><th align="center">å‚æ•°</th><th align="center">å«ä¹‰</th></tr></thead><tbody><tr><td align="center">wide</td><td align="center">å®½ä¸€ç‚¹çš„æŒ‰é’®</td></tr><tr><td align="center">fill</td><td align="center">å¡«å……å¸ƒå±€ï¼Œè‡ªåŠ¨é“ºæ»¡è‡³å°‘ä¸€è¡Œï¼Œå¤šäº†ä¼šæ¢è¡Œ</td></tr><tr><td align="center">center</td><td align="center">å±…ä¸­ï¼ŒæŒ‰é’®ä¹‹é—´æ˜¯å›ºå®šé—´è·</td></tr><tr><td align="center">around</td><td align="center">å±…ä¸­åˆ†æ•£</td></tr><tr><td align="center">grid2</td><td align="center">ç­‰å®½æœ€å¤š2åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td align="center">grid3</td><td align="center">ç­‰å®½æœ€å¤š3åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td align="center">grid4</td><td align="center">ç­‰å®½æœ€å¤š4åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td align="center">grid5</td><td align="center">ç­‰å®½æœ€å¤š5åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr></tbody></table></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell ä¸‹è½½æºç , /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, ä¸“ä¸šç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, å…è´¹ç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><div class="btns circle grid5">            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>          </div><p>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®</p><div class="btns rounded grid5">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fas fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fas fa-book-open'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div><p>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­</p><div class="btns circle center grid5">            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>  <i class='fab fa-apple'></i> <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p red'>ä¸“ä¸šç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p green'>å…è´¹ç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png'></a>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="12-githubå¡ç‰‡-ghcard"><a href="#12-githubå¡ç‰‡-ghcard" class="headerlink" title="12 githubå¡ç‰‡ ghcard"></a>12 githubå¡ç‰‡ ghcard</h2><details class="folding-tag" blue><summary> githubå¡ç‰‡ ghcard </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="13-githubå¾½æ ‡-ghbdage"><a href="#13-githubå¾½æ ‡-ghbdage" class="headerlink" title="13 githubå¾½æ ‡ ghbdage"></a>13 githubå¾½æ ‡ ghbdage</h2><details class="folding-tag" blue><summary> githubå¾½æ ‡ ghbdage </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">left</td><td align="center">å¾½æ ‡å·¦è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ã€‚</td></tr><tr><td align="center">right</td><td align="center">å¾½æ ‡å³è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ï¼Œ</td></tr><tr><td align="center">logo</td><td align="center">å¾½æ ‡å›¾æ ‡ï¼Œå›¾æ ‡åç§°è¯¦è§<a href="https://simpleicons.org/">simpleicons</a>ï¼Œå¯é€‰å‚æ•°ã€‚</td></tr><tr><td align="center">color</td><td align="center">å¾½æ ‡å³è¾¹çš„é¢œè‰²ï¼Œå¯é€‰å‚æ•°ã€‚</td></tr><tr><td align="center">link</td><td align="center">æŒ‡å‘çš„é“¾æ¥ï¼Œå¯é€‰å‚æ•°ã€‚</td></tr><tr><td align="center">title</td><td align="center">å¾½æ ‡çš„é¢å¤–ä¿¡æ¯ï¼Œå¯é€‰å‚æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–SEOï¼Œä½†<code>object</code>æ ‡ç­¾ä¸ä¼šåƒ<code>a</code>æ ‡ç­¾ä¸€æ ·åœ¨é¼ æ ‡æ‚¬åœæ˜¾ç¤º<code>title</code>ä¿¡æ¯ã€‚</td></tr><tr><td align="center">option</td><td align="center">è‡ªå®šä¹‰å‚æ•°ï¼Œæ”¯æŒ<a href="https://shields.io/">shields.io</a>çš„å…¨éƒ¨APIå‚æ•°æ”¯æŒï¼Œå…·ä½“å‚æ•°å¯ä»¥å‚çœ‹ä¸Šæ–‡ä¸­çš„æ‹“å±•å†™æ³•ç¤ºä¾‹ã€‚å½¢å¼ä¸º<code>name1=value2&amp;name2=value2</code>ã€‚</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object></p><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object><br>&#x2F;&#x2F;å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object></p><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br>&#x2F;&#x2F;å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="14-ç½‘ç«™å¡ç‰‡-sites"><a href="#14-ç½‘ç«™å¡ç‰‡-sites" class="headerlink" title="14 ç½‘ç«™å¡ç‰‡ sites"></a>14 ç½‘ç«™å¡ç‰‡ sites</h2><details class="folding-tag" blue><summary> ç½‘ç«™å¡ç‰‡ sites </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png, description=ç®€çº¦é£æ ¼ %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><div class="site-card-group"><a class="site-card" href="https://xaoxuu.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png"/><span class="title">xaoxuu</span><span class="desc">ç®€çº¦é£æ ¼</span></div></a><a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a> </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="15-è¡Œå†…å›¾ç‰‡-inlineimage"><a href="#15-è¡Œå†…å›¾ç‰‡-inlineimage" class="headerlink" title="15 è¡Œå†…å›¾ç‰‡ inlineimage"></a>15 è¡Œå†…å›¾ç‰‡ inlineimage</h2><details class="folding-tag" blue><summary> è¡Œå†…å›¾ç‰‡ inlineimage </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineimage å›¾ç‰‡é“¾æ¥, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ol><li><code>é«˜åº¦</code>ï¼šheight&#x3D;20px</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; ä¸€æ®µè¯ã€‚</span><br><span class="line"></span><br><span class="line">è¿™åˆæ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; ä¸€æ®µè¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>è¿™æ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> ä¸€æ®µè¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="16-å•å¼ å›¾ç‰‡-image"><a href="#16-å•å¼ å›¾ç‰‡-image" class="headerlink" title="16 å•å¼ å›¾ç‰‡ image"></a>16 å•å¼ å›¾ç‰‡ image</h2><details class="folding-tag" blue><summary> å•å¼ å›¾ç‰‡ image </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image é“¾æ¥, width=å®½åº¦ï¼ˆå¯é€‰ï¼‰, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰, alt=æè¿°ï¼ˆå¯é€‰ï¼‰, bg=å ä½é¢œè‰²ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">å›¾ç‰‡å®½åº¦é«˜åº¦</td><td align="center">width&#x3D;300px, height&#x3D;32px</td></tr><tr><td align="center">å›¾ç‰‡æè¿°</td><td align="center">alt&#x3D;å›¾ç‰‡æè¿°ï¼ˆbutterflyéœ€è¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯å›¾ç‰‡æè¿°ï¼‰</td></tr><tr><td align="center">å ä½èƒŒæ™¯è‰²</td><td align="center">bg&#x3D;#f2f2f2</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p>1.æ·»åŠ æè¿°</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://www.dai2yutou.space/img/avatar.jpg, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>2.æŒ‡å®šå®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://www.dai2yutou.space/img/avatar.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><p>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://www.dai2yutou.space/img/avatar.jpg, width=400px, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>4.è®¾ç½®å ä½èƒŒæ™¯è‰²</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://www.dai2yutou.space/img/avatar.jpg, width=400px, bg=#1D0C04, alt=ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>1.æ·»åŠ æè¿°</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://www.dai2yutou.space/img/avatar.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div><p>2.æŒ‡å®šå®½åº¦</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://www.dai2yutou.space/img/avatar.jpg" style="width:400px;"/></div></div><p>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://www.dai2yutou.space/img/avatar.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚" style="width:400px;"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div><p>4.è®¾ç½®å ä½èƒŒæ™¯è‰²</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="17-éŸ³é¢‘-audio"><a href="#17-éŸ³é¢‘-audio" class="headerlink" title="17 éŸ³é¢‘ audio"></a>17 éŸ³é¢‘ audio</h2><details class="folding-tag" blue><summary> éŸ³é¢‘ audio </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio éŸ³é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="18-è§†é¢‘-video"><a href="#18-è§†é¢‘-video" class="headerlink" title="18 è§†é¢‘ video"></a>18 è§†é¢‘ video</h2><details class="folding-tag" blue><summary> è§†é¢‘ video </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos,åˆ—æ•° %&#125;</span><br><span class="line">&#123;% video è§†é¢‘é“¾æ¥ %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ol><li><code>å¯¹é½æ–¹å‘</code>ï¼šleft, center, right</li><li><code>åˆ—æ•°</code>ï¼šé€—å·åé¢ç›´æ¥å†™åˆ—æ•°ï¼Œæ”¯æŒ 1 ï½ 4 åˆ—ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><ol><li><p>100%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>50%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure></li><li><p>25%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>1.100%å®½åº¦</p>   <div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><p>2.50%å®½åº¦</p>   <div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><p>3.25%å®½åº¦</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="19-ç›¸å†Œ-gallery"><a href="#19-ç›¸å†Œ-gallery" class="headerlink" title="19 ç›¸å†Œ gallery"></a>19 ç›¸å†Œ gallery</h2><details class="folding-tag" blue><summary> ç›¸å†Œ gallery </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><ol><li><p>gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown å›¾ç‰‡æ ¼å¼</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ul><li><p>gallerygroup ç›¸å†Œå›¾åº“</p><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">name</td><td align="center">å›¾åº“åå­—</td></tr><tr><td align="center">description</td><td align="center">å›¾åº“æè¿°</td></tr><tr><td align="center">link</td><td align="center">é“¾æ¥åˆ°å¯¹åº”ç›¸å†Œçš„åœ°å€</td></tr><tr><td align="center">img-url</td><td align="center">å›¾åº“å°é¢</td></tr></tbody></table></li><li><p>gallery ç›¸å†Œ</p><p>åŒºåˆ«äºæ—§ç‰ˆçš„Galleryç›¸å†Œ,æ–°çš„Galleryç›¸å†Œä¼šè‡ªåŠ¨æ ¹æ®å›¾ç‰‡é•¿åº¦è¿›è¡Œæ’ç‰ˆï¼Œä¹¦å†™ä¹Ÿæ›´åŠ æ–¹ä¾¿ï¼Œä¸markdownæ ¼å¼ä¸€æ ·ã€‚å¯æ ¹æ®éœ€è¦æ’å…¥åˆ°ç›¸åº”çš„mdã€‚æ— éœ€å†è‡ªå·±é…ç½®é•¿å®½ã€‚<strong>å»ºè®®åœ¨ç²˜è´´æ—¶æ•…æ„ä½¿ç”¨é•¿çŸ­ã€å¤§å°ã€æ¨ªç«–ä¸ä¸€çš„å›¾ç‰‡</strong>ï¼Œä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚ï¼ˆå°ºå¯¸å®Œå…¨ç›¸åŒçš„å›¾ç‰‡åªä¼šå¹³é“ºè¾“å‡ºï¼Œæ•ˆæœå¾ˆç³Ÿç³•ï¼‰</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><ol><li><p>gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹ &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup Gundam å“¦å’§å“‡gundamå“’ï¼ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§ &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><ol><li><p>gallerygroup ç›¸å†Œå›¾åº“</p></li><li><p>gallery ç›¸å†Œ</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="20-æŠ˜å æ¡†-folding"><a href="#20-æŠ˜å æ¡†-folding" class="headerlink" title="20 æŠ˜å æ¡† folding"></a>20 æŠ˜å æ¡† folding</h2><details class="folding-tag" blue><summary> æŠ˜å æ¡† folding </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ ‡é¢˜ %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">é¢œè‰²</td><td align="center">blue, cyan, green, yellow, red</td></tr><tr><td align="center">çŠ¶æ€</td><td align="center">çŠ¶æ€å¡«å†™ open ä»£è¡¨é»˜è®¤æ‰“å¼€ã€‚</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† %&#125;</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, æŸ¥çœ‹ä»£ç æµ‹è¯• %&#125;</span><br><span class="line">å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, æŸ¥çœ‹åµŒå¥—æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><details class="folding-tag" ><summary> æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• </summary>              <div class='content'>              <p><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg"></p>              </div>            </details><details class="folding-tag" cyan open><summary> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</p>              </div>            </details><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç æµ‹è¯• </summary>              <div class='content'>              <p>å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</p>              </div>            </details><details class="folding-tag" yellow><summary> æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯• </summary>              <div class='content'>              <details class="folding-tag" blue><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="21-åˆ†æ -tab"><a href="#21-åˆ†æ -tab" class="headerlink" title="21 åˆ†æ  tab"></a>21 åˆ†æ  tab</h2><details class="folding-tag" blue><summary> åˆ†æ  tab </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><ol><li><p>Unique name :</p><ul><li>é€‰é¡¹å¡å—æ ‡ç­¾çš„å”¯ä¸€åç§°ï¼Œä¸å¸¦é€—å·ã€‚</li><li>å°†åœ¨#idä¸­ç”¨ä½œæ¯ä¸ªæ ‡ç­¾åŠå…¶ç´¢å¼•å·çš„å‰ç¼€ã€‚</li><li>å¦‚æœåç§°ä¸­åŒ…å«ç©ºæ ¼ï¼Œåˆ™å¯¹äºç”Ÿæˆ#idï¼Œæ‰€æœ‰ç©ºæ ¼å°†ç”±ç ´æŠ˜å·ä»£æ›¿ã€‚</li><li>ä»…å½“å‰å¸–å­&#x2F;é¡µé¢çš„URLå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼</li></ul></li><li><p>[index]:</p><ul><li>æ´»åŠ¨é€‰é¡¹å¡çš„ç´¢å¼•å·ã€‚</li><li>å¦‚æœæœªæŒ‡å®šï¼Œå°†é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼ˆ1ï¼‰ã€‚</li><li>å¦‚æœindexä¸º-1ï¼Œåˆ™ä¸ä¼šé€‰æ‹©ä»»ä½•é€‰é¡¹å¡ã€‚</li><li>å¯é€‰å‚æ•°ã€‚</li></ul></li><li><p>[Tab caption]:</p><ul><li>å½“å‰é€‰é¡¹å¡çš„æ ‡é¢˜ã€‚</li><li>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œåˆ™å¸¦æœ‰åˆ¶è¡¨ç¬¦ç´¢å¼•åç¼€çš„å”¯ä¸€åç§°å°†ç”¨ä½œåˆ¶è¡¨ç¬¦çš„æ ‡é¢˜ã€‚</li><li>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œä½†æŒ‡å®šäº†å›¾æ ‡ï¼Œåˆ™æ ‡é¢˜å°†ä¸ºç©ºã€‚</li><li>å¯é€‰å‚æ•°ã€‚</li></ul></li><li><p>[@icon]:</p><ul><li>FontAwesomeå›¾æ ‡åç§°ï¼ˆå…¨åï¼Œçœ‹èµ·æ¥åƒâ€œ fas fa-fontâ€ï¼‰</li><li>å¯ä»¥æŒ‡å®šå¸¦ç©ºæ ¼æˆ–ä¸å¸¦ç©ºæ ¼ï¼›</li><li>ä¾‹å¦‚â€™Tab caption @iconâ€™ å’Œ â€˜Tab caption@iconâ€™.</li><li>å¯é€‰å‚æ•°ã€‚</li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><ol><li>Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>Demo 2 - é¢„è®¾é€‰æ‹©tabs</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line"><span class="strong">**tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**åå­—+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><ol><li><p>Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li><li><p>Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li><li><p>Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li><li><p>Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">ç¬¬ä¸€ä¸ªTab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>åå­—+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="22-è¯—è¯æ ‡ç­¾-poem"><a href="#22-è¯—è¯æ ‡ç­¾-poem" class="headerlink" title="22 è¯—è¯æ ‡ç­¾ poem"></a>22 è¯—è¯æ ‡ç­¾ poem</h2><details class="folding-tag" blue><summary> è¯—è¯æ ‡ç­¾ poem </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem title,author %&#125;</span><br><span class="line">å†…å®¹</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">title</td><td align="center">è¯—è¯æ ‡é¢˜</td></tr><tr><td align="center">author</td><td align="center">ä½œè€…ï¼Œå¯ä»¥ä¸å†™</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem æ°´è°ƒæ­Œå¤´,è‹è½¼ %&#125;</span><br><span class="line">ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚</span><br><span class="line">æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚</span><br><span class="line">ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ</span><br><span class="line">æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚</span><br><span class="line">èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚</span><br><span class="line">ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ</span><br><span class="line">äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚</span><br><span class="line">ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><div class='poem'><div class='poem-title'>æ°´è°ƒæ­Œå¤´</div><div class='poem-author'>è‹è½¼</div><p>ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚<br>æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚<br>ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ<br>æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚<br>èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</p><p>è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚<br>ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ<br>äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚<br>ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="23-é˜¿é‡Œå›¾æ ‡-icon"><a href="#23-é˜¿é‡Œå›¾æ ‡-icon" class="headerlink" title="23 é˜¿é‡Œå›¾æ ‡ icon"></a>23 é˜¿é‡Œå›¾æ ‡ icon</h2><details class="folding-tag" blue><summary> é˜¿é‡Œå›¾æ ‡ icon </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">icon-xxxx</td><td align="center">è¡¨ç¤ºå›¾æ ‡<code>font-class</code>,å¯ä»¥åœ¨è‡ªå·±çš„é˜¿é‡ŒçŸ¢é‡å›¾æ ‡åº“é¡¹ç›®çš„<code>font-class</code>å¼•ç”¨æ–¹æ¡ˆå†…æŸ¥è¯¢å¹¶å¤åˆ¶ã€‚</td></tr><tr><td align="center">font-size</td><td align="center">è¡¨ç¤ºå›¾æ ‡å¤§å°ï¼Œç›´æ¥å¡«å†™æ•°å­—å³å¯ï¼Œå•ä½ä¸º<code>em</code>ã€‚å›¾æ ‡å¤§å°é»˜è®¤å€¼ä¸º<code>1em</code>ã€‚</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="24-ç‰¹æ•ˆæ ‡ç­¾wow"><a href="#24-ç‰¹æ•ˆæ ‡ç­¾wow" class="headerlink" title="24 ç‰¹æ•ˆæ ‡ç­¾wow"></a>24 ç‰¹æ•ˆæ ‡ç­¾wow</h2><details class="folding-tag" blue><summary> ç‰¹æ•ˆæ ‡ç­¾wow </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">å†…å®¹</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">animate</td><td align="center">åŠ¨ç”»æ ·å¼ï¼Œæ•ˆæœè¯¦è§<a href="https://animate.style/">animate.csså‚è€ƒæ–‡æ¡£</a></td></tr><tr><td align="center">duration</td><td align="center">é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</td></tr><tr><td align="center">delay</td><td align="center">é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»å¼€å§‹çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</td></tr><tr><td align="center">offset</td><td align="center">é€‰å¡«é¡¹ï¼Œå¼€å§‹åŠ¨ç”»çš„è·ç¦»ï¼ˆç›¸å¯¹æµè§ˆå™¨åº•éƒ¨ï¼‰</td></tr><tr><td align="center">iteration</td><td align="center">é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»é‡å¤çš„æ¬¡æ•°</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__fip,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶`5s`ï¼Œé‡å¤`10`æ¬¡ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><div class='wow animate__fip' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ã€‚</p></div></div><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶<code>5s</code>ï¼Œé‡å¤<code>10</code>æ¬¡ã€‚</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="25-è¿›åº¦æ¡-progress"><a href="#25-è¿›åº¦æ¡-progress" class="headerlink" title="25 è¿›åº¦æ¡ progress"></a>25 è¿›åº¦æ¡ progress</h2><details class="folding-tag" blue><summary> è¿›åº¦æ¡ progress </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">width</td><td align="center">0åˆ°100çš„é˜¿æ‹‰ä¼¯æ•°å­—</td></tr><tr><td align="center">color</td><td align="center">é¢œè‰²ï¼Œå–å€¼æœ‰red,yellow,green,cyan,blue,gray</td></tr><tr><td align="center">text</td><td align="center">è¿›åº¦æ¡ä¸Šçš„æ–‡å­—å†…å®¹</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 30 yellow è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 50 green è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 70 cyan è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 90 blue è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 100 gray è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="26-æ³¨é‡Š-notation"><a href="#26-æ³¨é‡Š-notation" class="headerlink" title="26 æ³¨é‡Š notation"></a>26 æ³¨é‡Š notation</h2><details class="folding-tag" blue><summary> æ³¨é‡Š notation </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">label</td><td align="center">æ³¨é‡Šè¯æ±‡</td></tr><tr><td align="center">text</td><td align="center">æ‚¬åœæ˜¾ç¤ºçš„å†…å®¹</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯• ,å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p><span class='nota' data-nota='å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ '>æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯•</span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="27-æ°”æ³¡æ³¨é‡Š-bubble"><a href="#27-æ°”æ³¡æ³¨é‡Š-bubble" class="headerlink" title="27 æ°”æ³¡æ³¨é‡Š bubble"></a>27 æ°”æ³¡æ³¨é‡Š bubble</h2><details class="folding-tag" blue><summary> æ°”æ³¡æ³¨é‡Š bubble </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">content</td><td align="center">æ³¨é‡Šè¯æ±‡</td></tr><tr><td align="center">notation</td><td align="center">æ‚¬åœæ˜¾ç¤ºçš„æ³¨é‡Šå†…å®¹</td></tr><tr><td align="center">background-color</td><td align="center">å¯é€‰ï¼Œæ°”æ³¡èƒŒæ™¯è‰²ï¼Œé»˜è®¤ä¸ºâ€œ#71a4e3â€</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„&#123;% bubble å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨,&quot;ä¾‹å¦‚ h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;ï¼Œ&#123;% bubble flexå¸ƒå±€,&quot;Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸º&quot;å¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;,&quot;#ec5830&quot; %&#125;ï¼Œ&#123;% bubble transformå˜æ¢,&quot;transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚&quot;,&quot;#1db675&quot; %&#125;ï¼Œanimationçš„&#123;% bubble è´å¡å°”é€Ÿåº¦æ›²çº¿,&quot;è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹&quot;,&quot;#de4489&quot; %&#125;å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„&#123;% bubble clip-path,&quot;clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚&quot;,&quot;#868fd7&quot; %&#125;å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„<span class="bubble-content">å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">ä¾‹å¦‚ h1 + p {margin-top:50px;}</span></span>ï¼Œ<span class="bubble-content">flexå¸ƒå±€</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºå¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§â€</span></span>ï¼Œ<span class="bubble-content">transformå˜æ¢</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚</span></span>ï¼Œanimationçš„<span class="bubble-content">è´å¡å°”é€Ÿåº¦æ›²çº¿</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹</span></span>å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚</span></span>å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="28-PDFå±•ç¤º"><a href="#28-PDFå±•ç¤º" class="headerlink" title="28 PDFå±•ç¤º"></a>28 PDFå±•ç¤º</h2><details class="folding-tag" blue><summary> PDFå±•ç¤º </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf æ–‡ä»¶è·¯å¾„ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">æ–‡ä»¶è·¯å¾„</td><td align="center">å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–è€…æ˜¯åœ¨çº¿é“¾æ¥</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.åœ¨çº¿é“¾æ¥</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf %&#125;</span><br><span class="line"></span><br><span class="line">å®é™…æºç ï¼š</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;550&quot;</span> <span class="attr">type</span>=<span class="string">&quot;application/pdf&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="29-å¼•ç”¨æ–‡çŒ®-reference"><a href="#29-å¼•ç”¨æ–‡çŒ®-reference" class="headerlink" title="29 å¼•ç”¨æ–‡çŒ® reference"></a>29 å¼•ç”¨æ–‡çŒ® reference</h2><details class="folding-tag" blue><summary> å¼•ç”¨æ–‡çŒ® reference </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#test-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># referto å¼•ç”¨ä¸Šæ ‡</span></span><br><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line"><span class="section"># referfrom å¼•ç”¨å‡ºå¤„</span></span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>1.referto å¼•ç”¨ä¸Šæ ‡</p><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">ä¸Šæ ‡åºå·å†…å®¹ï¼Œéœ€ä¸referfromæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç°è·³è½¬</td></tr><tr><td align="center">literature</td><td align="center">å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</td></tr></tbody></table><p>2.referfrom å¼•ç”¨å‡ºå¤„</p><table><thead><tr><th align="center">å‚æ•°</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">åºå·å†…å®¹ï¼Œéœ€ä¸refertoæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç° è·³è½¬</td></tr><tr><td align="center">literature</td><td align="center">å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</td></tr><tr><td align="center">url</td><td align="center">å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®é“¾æ¥ï¼Œå¯çœç•¥</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27; %&#125;ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶&#123;% referto &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27; %&#125;ï¼ŒButterflyä¸»é¢˜&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">æœ¬é¡¹ç›®å‚è€ƒäº†Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27; %&#125;çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<span class="code">`[tag].js`</span>ï¼Œå¹¶é’ˆå¯¹<span class="code">`butterfly`</span>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<span class="code">`[tag].styl`</span>ã€‚åœ¨æ­¤é¸£è°¢<span class="code">`Volantis`</span>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚</span><br><span class="line">ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£&#123;% referto &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27; %&#125;</span><br><span class="line">Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-4"><p>Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexoä¸­æ–‡æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼ŒButterflyä¸»é¢˜<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><p>æœ¬é¡¹ç›®å‚è€ƒäº†Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<code>[tag].js</code>ï¼Œå¹¶é’ˆå¯¹<code>butterfly</code>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<code>[tag].styl</code>ã€‚åœ¨æ­¤é¸£è°¢<code>Volantis</code>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚<br>ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><br>Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexoä¸­æ–‡æ–‡æ¡£</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="30-Hexo-tag-map-æ’ä»¶"><a href="#30-Hexo-tag-map-æ’ä»¶" class="headerlink" title="30 Hexo-tag-map æ’ä»¶"></a>30 Hexo-tag-map æ’ä»¶</h2><details class="folding-tag" blue><summary> Hexo-tag-map æ’ä»¶ </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% + æ ‡ç­¾å€¼ + ç»åº¦ + çº¬åº¦ + æ–‡æœ¬ + ç¼©æ”¾ç­‰çº§ + å®½ + é«˜ + é»˜è®¤å›¾å±‚ + %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><p>æ¸²æŸ“å¥½åƒå‡ºç‚¹äº†é—®é¢˜ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰è°ƒè¯•~ä¸æ€¥</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="31-éšè—å—"><a href="#31-éšè—å—" class="headerlink" title="31 éšè—å—"></a>31 éšè—å—</h2><details class="folding-tag" blue><summary> éšè—å— </summary>              <div class='content'>              <div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#test-2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#test-3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock ç‚¹æˆ‘é¢„è§ˆ, blue %&#125;</span><br><span class="line">è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://picbed.dai2yutou.space/web_img/web_background2.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-3"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">ç‚¹æˆ‘é¢„è§ˆ    </button><div class="hide-content"><p>è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š<br><img src="https://picbed.dai2yutou.space/web_img/web_background2.jpg" alt="image (1)" style="zoom:67%;" /></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœè½¦åœºç®¡ç†æ¨¡æ‹Ÿç³»ç»Ÿ</title>
      <link href="/2023/01/07/%E5%81%9C%E8%BD%A6%E5%9C%BA%E7%AE%A1%E7%90%86%E6%A8%A1%E6%8B%9F%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/01/07/%E5%81%9C%E8%BD%A6%E5%9C%BA%E7%AE%A1%E7%90%86%E6%A8%A1%E6%8B%9F%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<details class="folding-tag" ><summary> åšä¸»å¿ƒå¾—ğŸ™„ </summary>              <div class='content'>              <p>æœ¬æ¬¡å®è®­æˆ‘ä»¬ç»„è¢«åˆ†é…çš„æ˜¯<strong>åœè½¦åœºæ¨¡æ‹Ÿç³»ç»Ÿ</strong>ï¼Œæ„Ÿè§‰ç›¸æ¯”å…¶ä»–ç»„çš„ä»»åŠ¡æ¥è¯´ï¼Œæˆ‘ä»¬çš„è¿˜æ˜¯ç›¸å¯¹å®¹æ˜“çš„å“ˆå“ˆå“ˆå“ˆã€‚</p><p><strong>å…¶ä»–ç»„çš„æœ‰ï¼š</strong></p><ul><li>åŸºäºA*ç®—æ³•çš„è¿·å®«å°æ¸¸æˆå¼€å‘</li><li>æ¬¢ä¹è¿è¿çœ‹æ¸¸æˆè®¾è®¡</li><li>å±±ä¸œç†å·¥å¤§å­¦æ–°ç”Ÿæ ¡å›­å¯¼æ¸¸ç¨‹åº</li><li>æ™¯åŒºä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</li><li>ç”µæ¢¯æ¨¡æ‹Ÿ</li><li>æœºç¥¨ç®¡ç†ç³»ç»Ÿ</li><li>å¼ åº—åŒºå¸‚å†…å…¬äº¤æŸ¥è¯¢ç³»ç»Ÿ</li><li>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</li></ul><p>ç«Ÿç„¶è¿˜æœ‰å¼€å‘æ¸¸æˆçš„ï¼Œè¿™ä¸æ‘†ç­‰ä»€ä¹ˆçš„ã€å¼€ä¸ªç©ç¬‘å•¦ğŸ˜‚ã€‘</p><p>æœ¬æ¬¡å®è®­å†æ—¶å››å‘¨å·¦å³ï¼Œä½†æˆ‘ä»¬ç»„çœŸæ­£æ„ä¹‰ä¸Šä¹Ÿå°±èŠ±äº†åå¤©å·¦å³ï¼Œä»£ç å¤§éƒ¨åˆ†éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººå¼€å‘å‡ºæ¥çš„ï¼Œå› ä¸ºæˆ‘æ˜¯ç»„é•¿æ‰€ä»¥ç›¸å¯¹æ¥è¯´è´£ä»»æ¯”è¾ƒå¤§ï¼ˆå½“ç»„é•¿éš¾å•Šå‘œå‘œå‘œğŸ˜­ï¼‰ã€‚</p><p>ç­”è¾©çš„æ—¶å€™ä¹Ÿå‡ºäº†ç‚¹æ„å¤–ï¼Œ9ç‚¹éœ€è¦è¿›è…¾è®¯ä¼šè®®ï¼Œç„¶åå¼€å§‹ä¸€ç»„æ¥ç€ä¸€ç»„å¼€å§‹ç­”è¾©ï¼Œåœ¨ç­”è¾©å‰ä¸€å¤©æ™šä¸Šï¼Œæˆ‘åœ¨å’Œæˆ‘çš„å¥³æœ‹å‹æ‰“ç€ç”µè¯ï¼ˆğŸ’ï¼‰ï¼Œç¡è§‰ä¹Ÿæ²¡æœ‰æŒ‚ï¼Œä¸€ç›´æ‰“çš„ï¼Œæˆ‘æƒ³è¿™è®¢äº†å››äº”ä¸ªé—¹é“ƒåº”è¯¥èƒ½èµ·æ¥å§ã€æˆ‘æ™šä¸Šä¸€èˆ¬ç¡çš„æ¯”è¾ƒæ™šï¼Œéƒ½12ç‚¹1ã€2ç‚¹ç¡è§‰ï¼Œç„¶åç™½å¤©ç¡åˆ°è‡ªç„¶é†’åç‚¹åä¸€ç‚¹é‚£æ ·çš„ã€‘ï¼Œç»“æœæ‰‹æœºå¿˜è®°è¿ç€å……ç”µå™¨äº†ï¼Œå¯¼è‡´ç¬¬äºŒå¤©è¿Ÿåˆ°äº†äºŒåå‡ åˆ†é’Ÿï¼Œæœ€åè¿˜æ˜¯æˆ‘è€å¦ˆå«æˆ‘èµ·æ¥åƒé¥­æˆ‘æ‰é†’çš„ã€‚ç»“æœè®©ç­”è¾©è€å¸ˆçŸ¥é“äº†ï¼Œæˆ‘ä»¬ç»„çš„å¦ä¸€ä¸ªæˆå‘˜è¯´è€å¸ˆç‚¹åå°±å«äº†ä¸¤ä¸ªäººï¼Œå…¨æ˜¯æˆ‘ä»¬ç»„çš„ï¼Œå¯æ€•çš„æ˜¯æˆ‘ä¸¤éƒ½è¿Ÿåˆ°äº†ï¼Œå¯¼è‡´æˆ‘ä»¬ç­”è¾©çš„æ—¶å€™æ•ˆæœç‰¹åˆ«å·®ï¼Œè€å¸ˆå¾ˆç”Ÿæ°”ï¼Œæˆ‘ä½œä¸ºç»„é•¿è¿˜å‘è€å¸ˆå’Œæ‰€æœ‰åŒå­¦é“äº†æ­‰ï¼ˆå¥½ä¸¢äººğŸ˜°ï¼‰ï¼Œå¸Œæœ›è€å¸ˆèƒ½ç»™æˆ‘ä»¬ä¸€ä¸ªå¥½çš„æˆç»©ğŸ˜­ã€‚</p><p>ä¸å¤šå­å­ï¼Œä¸‹é¢çœ‹ä»£ç +å®è®­æŠ¥å‘Š~</p>              </div>            </details><h1 id="ä¸€ã€é¢˜ç›®è¦æ±‚"><a href="#ä¸€ã€é¢˜ç›®è¦æ±‚" class="headerlink" title="ä¸€ã€é¢˜ç›®è¦æ±‚"></a>ä¸€ã€é¢˜ç›®è¦æ±‚</h1><h2 id="1-1-é—®é¢˜æè¿°"><a href="#1-1-é—®é¢˜æè¿°" class="headerlink" title="1.1 é—®é¢˜æè¿°"></a>1.1 é—®é¢˜æè¿°</h2><p>æ¨¡æ‹Ÿä¸€ä¸ªåœè½¦åœºç³»ç»Ÿã€‚åœè½¦åœºæ ¹æ®åœè½¦çš„å åœ°é¢ç§¯è¿›è¡Œæ”¶è´¹ã€‚æˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœè½¦åœºå­˜åœ¨å¤§ã€ä¸­ã€å°ä¸‰ç§è½¦å‹çš„åœè½¦ä½ï¼ˆä¸åŒç±»å‹çš„åœè½¦ä½æ”¶è´¹æ ‡å‡†ä¸åŒï¼Œä¸”ä¸Šä¸€çº§åˆ«çš„è½¦ä¸èƒ½åœ¨ä¸‹ä¸€çº§åˆ«çš„åœè½¦ä½åœè½¦ï¼‰ã€‚å½“æœ‰è½¦è¾†è¿›å…¥åœè½¦åœºæ—¶ï¼Œç™»è®°è½¦çš„å‹å·ï¼Œè½¦ç‰Œä»¥åŠæ—¶é—´ï¼Œå¹¶å°†è½¦åœæ”¾åœ¨åœè½¦åœºå†…ã€‚å½“å–è½¦æ—¶ï¼Œè¾“å…¥è½¦ç‰Œå·ï¼Œå–å‡ºç›¸åº”çš„è½¦ï¼Œå¹¶è®°å½•ç°åœ¨æ—¶é—´ï¼Œæ ¹æ®åœè½¦æ—¶é—´åŠè½¦ä½ç±»å‹æ”¶å–è´¹ç”¨ã€‚å½“åœè½¦åœºæ»¡æ—¶ï¼Œåœ¨åœè½¦åœºå¤–çš„ä¸€ä¸ªé•¿åº¦ä¸ºNçš„å€™è½¦é“ç­‰å¾…è¿›å…¥åœè½¦åœºåœè½¦ã€‚</p><p>è®¾åœè½¦åœºæ˜¯ä¸€ä¸ªå¯åœæ”¾nè¾†æ±½è½¦çš„ç‹­é•¿é€šé“ï¼Œä¸”åªæœ‰ä¸€ä¸ªå¤§é—¨å¯ä¾›æ±½è½¦è¿›å‡ºã€‚æ±½è½¦åœ¨åœè½¦åœºå†…æŒ‰è½¦è¾†åˆ°è¾¾æ—¶é—´çš„å…ˆåé¡ºåºï¼Œä¾æ¬¡ç”±åŒ—å‘å—æ’åˆ—ï¼ˆå¤§é—¨åœ¨æœ€å—ç«¯ï¼Œæœ€å…ˆåˆ°è¾¾çš„ç¬¬ä¸€è¾†è½¦åœæ”¾åœ¨è½¦åœºçš„æœ€åŒ—ç«¯ï¼‰ï¼Œè‹¥è½¦åœºå†…å·²åœæ»¡nè¾†æ±½è½¦ï¼Œåˆ™åæ¥çš„æ±½è½¦åªèƒ½åœ¨é—¨å¤–çš„ä¾¿é“ä¸Šç­‰å€™ï¼Œä¸€æ—¦æœ‰è½¦å¼€èµ°ï¼Œåˆ™æ’åœ¨ä¾¿é“ä¸Šçš„ç¬¬ä¸€è¾†è½¦å³å¯å¼€å…¥ï¼›å½“åœè½¦åœºå†…æŸè¾†è½¦è¦ç¦»å¼€æ—¶ï¼Œåœ¨å®ƒä¹‹åå¼€å…¥çš„è½¦è¾†å¿…é¡»å…ˆé€€å‡ºè½¦åœºä¸ºå®ƒè®©è·¯ï¼Œå¾…è¯¥è¾†è½¦å¼€å‡ºå¤§é—¨å¤–ï¼Œå…¶å®ƒè½¦è¾†å†æŒ‰åŸæ¬¡åºè¿›å…¥è½¦åœºã€‚</p><h2 id="1-2-åŸºæœ¬è¦æ±‚"><a href="#1-2-åŸºæœ¬è¦æ±‚" class="headerlink" title="1.2 åŸºæœ¬è¦æ±‚"></a>1.2 åŸºæœ¬è¦æ±‚</h2><p><strong>ï¼ˆ1ï¼‰å‰æè¦æ±‚</strong></p><p>â€‹ä»¥æ ˆæ¨¡æ‹Ÿåœè½¦åœºï¼Œä»¥é˜Ÿåˆ—æ¨¡æ‹Ÿè½¦åœºå¤–çš„ä¾¿é“ï¼ŒæŒ‰ç…§ä»ç»ˆç«¯è¯»å…¥çš„è¾“å…¥æ•°æ®åºåˆ—è¿›è¡Œæ¨¡æ‹Ÿç®¡ç†ã€‚æ¯ä¸€ç»„è¾“å…¥æ•°æ®åŒ…æ‹¬ä¸‰ä¸ªæ•°æ®é¡¹ï¼šæ±½è½¦â€œåˆ°è¾¾â€æˆ–â€œç¦»å»â€ä¿¡æ¯ã€æ±½è½¦ç‰Œç…§å·ç åŠåˆ°è¾¾æˆ–ç¦»å»çš„æ—¶åˆ»ï¼Œå¯¹æ¯ä¸€ç»„è¾“å…¥æ•°æ®è¿›è¡Œæ“ä½œåçš„è¾“å‡ºæ•°æ®ä¸ºï¼šè‹¥æ˜¯è½¦è¾†åˆ°è¾¾ï¼Œåˆ™è¾“å‡ºæ±½è½¦åœ¨åœè½¦åœºå†…æˆ–ä¾¿é“ä¸Šçš„åœè½¦ä½ç½®ï¼›è‹¥æ˜¯è½¦ç¦»å»ï¼›åˆ™è¾“å‡ºæ±½è½¦åœ¨åœè½¦åœºå†…åœç•™çš„æ—¶é—´å’Œåº”äº¤çº³çš„è´¹ç”¨ï¼ˆåœ¨ä¾¿é“ä¸Šåœç•™çš„æ—¶é—´ä¸æ”¶è´¹ï¼‰ã€‚æ ˆä»¥é¡ºåºç»“æ„å®ç°ï¼Œé˜Ÿåˆ—ä»¥é“¾è¡¨å®ç°ã€‚</p><p><strong>(2) æµ‹è¯•æ•°æ®</strong></p><p>â€‹è®¾n&#x3D;2,è¾“å…¥æ•°æ®ä¸ºï¼šï¼ˆâ€˜Aâ€™ï¼Œ1ï¼Œ5ï¼‰ï¼Œï¼ˆâ€˜Aâ€™ï¼Œ2ï¼Œ10ï¼‰ï¼Œï¼ˆâ€˜Dâ€™ï¼Œ1ï¼Œ15ï¼‰ï¼Œï¼ˆâ€˜Aâ€™ï¼Œ3ï¼Œ 20ï¼‰ï¼Œ ï¼ˆâ€˜Aâ€™ï¼Œ4ï¼Œ25ï¼‰ï¼Œï¼ˆâ€˜Aâ€™ï¼Œ5ï¼Œ30ï¼‰ï¼Œï¼ˆâ€˜Dâ€™ï¼Œ2ï¼Œ35ï¼‰ï¼Œï¼ˆâ€˜Dâ€™ï¼Œ4ï¼Œ40ï¼‰ï¼Œï¼ˆâ€˜Eâ€™ï¼Œ0ï¼Œ0ï¼‰ã€‚æ¯ä¸€ç»„è¾“å…¥æ•°æ®åŒ…æ‹¬ä¸‰ä¸ªæ•°æ®é¡¹ï¼šæ±½è½¦â€œåˆ°è¾¾â€æˆ–â€œç¦»å»â€ä¿¡æ¯ã€æ±½è½¦ç‰Œç…§å·ç åŠåˆ°è¾¾æˆ–ç¦»å»çš„æ—¶åˆ»ï¼Œå…¶ä¸­ï¼Œâ€˜Aâ€™è¡¨ç¤ºåˆ°è¾¾ï¼›â€˜Dâ€™è¡¨ç¤ºç¦»å»ï¼Œâ€˜Eâ€™è¡¨ç¤ºè¾“å…¥ç»“æŸã€‚</p><p><strong>(3) å®ç°æç¤º</strong></p><p>â€‹éœ€å¦è®¾ä¸€ä¸ªæ ˆï¼Œä¸´æ—¶åœæ”¾ä¸ºç»™è¦ç¦»å»çš„æ±½è½¦è®©è·¯è€Œä»åœè½¦åœºé€€å‡ºæ¥çš„æ±½è½¦ï¼Œä¹Ÿç”¨é¡ºåºå­˜å‚¨ç»“æ„å®ç°ã€‚è¾“å…¥æ•°æ®æŒ‰åˆ°è¾¾æˆ–ç¦»å»çš„æ—¶åˆ»æœ‰åºã€‚æ ˆä¸­æ¯ä¸ªå…ƒç´ è¡¨ç¤ºä¸€è¾†æ±½è½¦ï¼ŒåŒ…å«ä¸¤ä¸ªæ•°æ®é¡¹ï¼šæ±½è½¦çš„ç‰Œç…§å·ç å’Œè¿›å…¥åœè½¦åœºçš„æ—¶åˆ»ã€‚</p><p><strong>(4) åŠŸèƒ½è¦æ±‚ï¼š</strong></p><ul><li>ç”¨æ–‡ä»¶ä¿å­˜åœè½¦åœºå’Œå€™è½¦é“çš„åŸºæœ¬æ•°æ®</li><li>åœè½¦ï¼šå¯é€‰æ‹©è½¦ä½ï¼Œè¾“å…¥è½¦ç‰Œå·ï¼Œå°†è½¦çš„åŸºæœ¬ä¿¡æ¯å­˜å…¥è½¦ä½ä¸­ </li><li>å–è½¦ï¼šè¾“å…¥è½¦ç‰Œï¼Œè·å–æ—¶é—´ï¼Œè®¡ç®—è´¹ç”¨ </li><li>æŸ¥è¯¢ï¼šåœ¨åœè½¦æ—¶ï¼Œå¯ä»¥æŸ¥è¯¢åœè½¦åœºçš„æ•´ä½“æƒ…å†µ</li><li>ç©ºä½æç¤ºï¼šä¸€æ—¦å–è½¦ååœè½¦åœºå‡ºç°ç©ºä½ï¼Œéœ€è¦å°†ä¿¡æ¯ä¼ é€’ç»™å€™è½¦é“ã€‚å€™è½¦é“é˜Ÿåˆ—å‡ºåˆ— </li><li>æ»¡ä½æç¤ºï¼šä¸€æ—¦åœè½¦å‚ä½æ»¡ï¼Œåˆ™éœ€è¦å†å€™è½¦é“åœè½¦ï¼Œå³å€™è½¦é“å…¥é˜Ÿåˆ—ã€‚</li></ul><h2 id="1-3-é€‰åšå†…å®¹"><a href="#1-3-é€‰åšå†…å®¹" class="headerlink" title="1.3 é€‰åšå†…å®¹"></a>1.3 é€‰åšå†…å®¹</h2><p>æœ‰ä½™åŠ›çš„åŒå­¦å¯ä»¥è€ƒè™‘ç”¨å›¾å½¢ç•Œé¢å®ç°åœè½¦åœºçš„çŠ¶æ€æ˜¾ç¤º</p><h1 id="äºŒã€å®è®­æŠ¥å‘Š"><a href="#äºŒã€å®è®­æŠ¥å‘Š" class="headerlink" title="äºŒã€å®è®­æŠ¥å‘Š"></a>äºŒã€å®è®­æŠ¥å‘Š</h1><details class="folding-tag" ><summary> å®è®­æŠ¥å‘Š </summary>              <div class='content'>              <div class="row">   <embed src="https://picbed.dai2yutou.space/PDF/ç¨‹åºè®¾è®¡ä¸æ•°æ®ç»“æ„åœè½¦åœºæ¨¡æ‹Ÿç®¡ç†å®è®­æŠ¥å‘Š.pdf" width="100%" height="550" type="application/pdf"></div>              </div>            </details><h1 id="ä¸‰ã€ä»£ç å±•ç¤º"><a href="#ä¸‰ã€ä»£ç å±•ç¤º" class="headerlink" title="ä¸‰ã€ä»£ç å±•ç¤º"></a>ä¸‰ã€ä»£ç å±•ç¤º</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//******å¤´æ–‡ä»¶******</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœè½¦åœºæ¨¡æ‹Ÿç³»ç»Ÿ</span></span><br><span class="line"><span class="comment">// æœ¬åœè½¦åœºå¯åœå¤§ã€ä¸­ã€å°å‹ä¸‰ç§å‹å·çš„è½¦è¾†</span></span><br><span class="line"><span class="comment">// æ”¶è´¹è§„åˆ™ï¼šæŒ‰åˆ†é’Ÿæ”¶è´¹ã€‚å¤§ã€0.2ã€‘ ä¸­ã€0.1ã€‘ å°ã€0.05ã€‘</span></span><br><span class="line"><span class="comment">// æœ¬åœè½¦åœºåœæ”¾çš„è½¦è¾†æœ€å¤šä¸ºMAXSIZE</span></span><br><span class="line"><span class="comment">// åœè½¦åœºçš„è½¦ä½æ•°é™åˆ¶ï¼Œä½†ä¾¿é“å¯æ— é™åœè½¦</span></span><br><span class="line"><span class="comment">// è½¦ç‰Œå·è§„å®šä½æ±‰å­—+å¤§å†™å­—æ¯+5ä¸ªé˜¿æ‹‰ä¼¯æ•°å­—</span></span><br><span class="line"><span class="comment">//ç³»ç»Ÿè¯­å¥é¢œè‰²ï¼š3 æ¹–è“è‰² åŠ äº®</span></span><br><span class="line"><span class="comment">//æç¤ºè¯­å¥ï¼š4 çº¢è‰² åŠ äº®</span></span><br><span class="line"><span class="comment">//ç»“æœè¯­å¥ï¼š9 æ·¡æµ…ç»¿è‰² åŠ äº®</span></span><br><span class="line"><span class="comment">//è¾“å…¥è¯­å¥ï¼š7 ç™½è‰² åŠ äº®</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//******å®å®šä¹‰ï¼Œè§„å®šåœè½¦åœºçš„è½¦ä½æ•°é‡******</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXSIZE 6<span class="comment">//åœè½¦åœºæœ€å¤šå¯åœç•™æ±½è½¦è¾†æ•°</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//******å…¨å±€å˜é‡*****</span></span><br><span class="line"><span class="comment">//ä¸‹é¢æ˜¯æ¯åˆ†é’Ÿåœè½¦è´¹ç”¨ï¼Œæˆ‘ä»¬æŒ‰åˆ†é’Ÿæ”¶è´¹,åˆ†å¤§ä¸­å°ä¸‰ç§è½¦å‹</span></span><br><span class="line"><span class="type">const</span> <span class="type">float</span> price_1 = <span class="number">0.2</span>;<span class="comment">//å¤§</span></span><br><span class="line"><span class="type">const</span> <span class="type">float</span> price_2 = <span class="number">0.1</span>;<span class="comment">//ä¸­</span></span><br><span class="line"><span class="type">const</span> <span class="type">float</span> price_3 = <span class="number">0.05</span>;<span class="comment">//å°</span></span><br><span class="line">string Car_Type;<span class="comment">//æ±½è½¦çš„å‹å·</span></span><br><span class="line"><span class="type">int</span> i;<span class="comment">//æ±½è½¦åœ¨ä¾¿é“ä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="type">int</span> number=<span class="number">0</span>; <span class="comment">//è®¡æ•°å™¨ï¼šè®°å½•åœè½¦æ—¶çš„æ€»è¾“å…¥é‡</span></span><br><span class="line"><span class="type">int</span> number_SeqList=<span class="number">0</span>; <span class="comment">//è®¡æ•°å™¨ï¼šè®°å½•å½“å‰åœè½¦åœºå·²æœ‰çš„è½¦è¾†æ•°</span></span><br><span class="line"><span class="type">int</span> number_LQueue=<span class="number">0</span>;  <span class="comment">//è®¡æ•°å™¨ï¼šè®°å½•å½“å‰ä¾¿é“ä¸Šå·²æœ‰çš„åœè½¦æ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//*******å®šä¹‰ç»“æ„ä½“å­˜å‚¨ä¿¡æ¯******</span></span><br><span class="line"><span class="comment">//æ—¶é—´</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">time</span> &#123;</span><br><span class="line"><span class="type">int</span> h, m;<span class="comment">//å°æ—¶ åˆ†é’Ÿ</span></span><br><span class="line">&#125;Time;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">car</span> &#123;</span><br><span class="line">Time t1, t2;<span class="comment">//åˆ°è¾¾æ—¶é—´å’Œç¦»å¼€æ—¶é—´</span></span><br><span class="line">string num;<span class="comment">//è½¦ç‰Œå·</span></span><br><span class="line"><span class="type">int</span> p1, p2;<span class="comment">//æ±½è½¦åœ¨åœè½¦åœºæˆ–è€…ä¾¿é“åœç•™ä½ç½®</span></span><br><span class="line">string type;    <span class="comment">//æ±½è½¦çš„å‹å·</span></span><br><span class="line">&#125;Car;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœè½¦åœº</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">Car data[MAXSIZE];</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line">&#125;SeqList;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœè½¦åœºè½¦ä½</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">    <span class="type">int</span> space;</span><br><span class="line">    <span class="type">int</span> flag;</span><br><span class="line">&#125;Car_space;</span><br><span class="line">Car_space Car_Space[MAXSIZE];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¾¿é“</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">qnode</span> &#123;</span><br><span class="line">Car data;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">qnode</span>* next;</span><br><span class="line">&#125;QNode;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">lqueue</span> &#123;</span><br><span class="line">QNode* front, * rear;</span><br><span class="line">&#125;LQueue;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//******å‡½æ•°å£°æ˜******</span></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line"><span class="function">SeqList* <span class="title">Init_SeqList</span><span class="params">()</span></span>;<span class="comment">//åˆå§‹åŒ–åœè½¦åœº</span></span><br><span class="line"><span class="function">LQueue* <span class="title">Init_LQueue</span><span class="params">()</span></span>;<span class="comment">//åˆå§‹åŒ–ä¾¿é“</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Init_Car_Space</span><span class="params">()</span></span>;  <span class="comment">//åˆå§‹åŒ–åœè½¦åœºè½¦ä½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åœè½¦é—®é¢˜å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Car_In</span><span class="params">(SeqList* p, LQueue* q)</span></span>;<span class="comment">//æ±½è½¦åˆ°è¾¾</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push_SeqList</span><span class="params">(SeqList* s, Car x)</span></span>;<span class="comment">//æ±½è½¦è¿›å…¥åœè½¦åœº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">In_LQueue</span><span class="params">(LQueue* q, Car x)</span></span>;<span class="comment">//åœè½¦åœºæ»¡çš„æ—¶å€™è¿›å…¥ä¾¿é“</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Traverse_LQueue</span><span class="params">(LQueue* q)</span></span>;    <span class="comment">//ä¾¿é“ç¬¬ä¸€è¾†è½¦è¿›å…¥åœè½¦åœºåï¼Œå¯¹åé¢è½¦è¾†å‰ç§»</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å–è½¦é—®é¢˜å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Car_Out</span><span class="params">(SeqList* p, LQueue* q)</span></span>;<span class="comment">//æ±½è½¦ç¦»å»</span></span><br><span class="line"><span class="function">Car <span class="title">Pop_SeqList</span><span class="params">(SeqList* s)</span></span>;<span class="comment">//æ±½è½¦ç¦»å¼€åœè½¦åœº</span></span><br><span class="line"><span class="function">Car <span class="title">Out_LQueue</span><span class="params">(LQueue* q)</span></span>;<span class="comment">//åœè½¦åœºæœ‰è½¦ç¦»å¼€æœ‰ç©ºä½æ—¶ä¾¿é“ä¸Šçš„è½¦è¾†æŒ‰ç…§åˆ°è¾¾é¡ºåºä¾æ¬¡ç¦»å¼€ä¾¿é“å¹¶è¿›å…¥åœè½¦åœº</span></span><br><span class="line"><span class="function">Car <span class="title">Traverse_SeqList</span><span class="params">(SeqList *q,<span class="type">int</span> top,string num)</span></span>;     <span class="comment">////æ ˆçš„éå†ç”¨æ¥å¯»æ‰¾å‡ºæ ˆçš„è½¦è¾†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥è¯¢æœ‰å…³å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Display</span><span class="params">(SeqList* p)</span></span>;<span class="comment">//æ˜¾ç¤ºåœè½¦åœºå†…è½¦è¾†ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸­é—´è¡”æ¥å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Car_Condition</span><span class="params">(SeqList* p, LQueue* q)</span></span>;<span class="comment">//è·å–è½¦è¾†çš„å‹å·å’Œè¿›å…¥/ç¦»å¼€åœè½¦åœºçš„ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Str_strcmp</span><span class="params">(string str1,string str2)</span></span>;  <span class="comment">//å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€éªŒæ“ä½œå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Car_if</span><span class="params">(SeqList* p, Car c)</span></span>;<span class="comment">//æ£€éªŒåœè½¦åœºå†…æ˜¯å¦æœ‰è¯¥è½¦è¾†</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkNum</span><span class="params">(string s)</span></span>;        <span class="comment">//æ£€æŸ¥è½¦è¾†çš„è½¦ç‰Œå·æ ¼å¼æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkTime</span><span class="params">(<span class="type">int</span> h,<span class="type">int</span> m)</span></span>;    <span class="comment">//æ£€æŸ¥è½¦è¾†çš„æ—¶é—´æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Check_TimeOut</span><span class="params">(<span class="type">int</span> h1,<span class="type">int</span> h2,<span class="type">int</span> m1,<span class="type">int</span> m2)</span></span>;        <span class="comment">//æ£€æŸ¥æ±½è½¦ç¦»å¼€å‡ºæ ˆçš„æ—¶é—´æ˜¯å¦åˆæ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–‡ä»¶æ“ä½œå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LQueue_Input</span><span class="params">(string Car_Type, Car car)</span></span>;<span class="comment">//å‘ä¾¿é“æ–‡ä»¶å†™å…¥è½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LQueue_Delete</span><span class="params">(Car car)</span></span>;<span class="comment">//åˆ é™¤ä¾¿é“æ–‡ä»¶ä¸­ç¦»å¼€ä¾¿é“çš„è½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SeqList_Input</span><span class="params">(string Car_Type, Car car)</span></span>;<span class="comment">//å‘åœè½¦åœºå†™å…¥è½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SeqList_Delete</span><span class="params">(Car car)</span></span>;<span class="comment">//åˆ é™¤åœè½¦åœºè½¦è¾†æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é¡µé¢å¯è§†åŒ–æ“ä½œå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">color</span><span class="params">(<span class="type">int</span> m)</span></span>;   <span class="comment">//ä¿®æ”¹å­—ä½“é¢œè‰²</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">menu_load</span><span class="params">()</span></span>;<span class="comment">//ç¨‹åºåˆšå¼€å§‹è¿è¡Œæ—¶çš„åŠ è½½è¿‡ç¨‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">menu</span><span class="params">()</span></span>;<span class="comment">//ç³»ç»Ÿä¸»èœå•é¡µé¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_1</span><span class="params">()</span></span>;<span class="comment">//åŠ è½½ç™¾åˆ†æ¯”å¯è§†åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_2</span><span class="params">()</span></span>;<span class="comment">//ç³»ç»Ÿé€€å‡ºç™¾åˆ†æ¯”å¯è§†åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_3</span><span class="params">()</span></span>;<span class="comment">//è¿›å…¥ç³»ç»ŸåŠ è½½ç•Œé¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_4</span><span class="params">()</span></span>;<span class="comment">//è¿›å…¥åœè½¦åœºåŠ è½½ç•Œé¢</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//******ä¸»å‡½æ•°******</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é¦–å…ˆæ¸…ç©ºä¸Šæ¬¡åœè½¦åœºåœå…¥çš„æ±½è½¦å’Œä¾¿é“ä¸­çš„æ±½è½¦</span></span><br><span class="line">FILE *file;</span><br><span class="line">file = <span class="built_in">fopen</span>(<span class="string">&quot;SeqList.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="built_in">fclose</span>(file);</span><br><span class="line">file = <span class="built_in">fopen</span>(<span class="string">&quot;LQueue.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="built_in">fclose</span>(file);</span><br><span class="line">file = <span class="built_in">fopen</span>(<span class="string">&quot;temp.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="built_in">fclose</span>(file);</span><br><span class="line"><span class="built_in">Init_Car_Space</span>();   <span class="comment">//åˆå§‹åŒ–åœè½¦åœºè½¦ä½</span></span><br><span class="line"><span class="comment">//å¼€å§‹åŠ è½½å¹¶è¿›å…¥åœè½¦ç®¡ç†ç³»ç»Ÿç³»ç»Ÿ</span></span><br><span class="line">    <span class="built_in">menu_load</span>();</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//******å…¨éƒ¨å‡½æ•°******</span></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åœè½¦åœº</span></span><br><span class="line"><span class="function">SeqList* <span class="title">Init_SeqList</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SeqList* s;</span><br><span class="line">s = <span class="keyword">new</span> SeqList;</span><br><span class="line">s-&gt;top = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åœè½¦åœºè½¦ä½</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Init_Car_Space</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;MAXSIZE;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        Car_Space[j].space = j+<span class="number">1</span>;</span><br><span class="line">        Car_Space[j].flag = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–ä¾¿é“</span></span><br><span class="line"><span class="function">LQueue* <span class="title">Init_LQueue</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LQueue* q;</span><br><span class="line">QNode* p;</span><br><span class="line">q = <span class="keyword">new</span> lqueue;</span><br><span class="line">p = <span class="keyword">new</span> qnode;</span><br><span class="line">p-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">q-&gt;front = p;</span><br><span class="line">q-&gt;rear = p;</span><br><span class="line"><span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘ä¾¿é“æ–‡ä»¶å†™å…¥è½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LQueue_Input</span><span class="params">(string Car_Type, Car car)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">FILE* fp;</span><br><span class="line"><span class="keyword">if</span> ((fp = <span class="built_in">fopen</span>(<span class="string">&quot;LQueue.txt&quot;</span>, <span class="string">&quot;at+&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span>&lt;&lt;endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">string st1 = <span class="string">&quot;è½¦ç‰Œå·: &quot;</span>+ car.num + <span class="string">&quot;; å‹å·: &quot;</span>+car.type + <span class="string">&quot;; &quot;</span>;</span><br><span class="line"><span class="type">int</span> h = car.t1.h;</span><br><span class="line"><span class="type">int</span> m = car.t1.m;</span><br><span class="line"><span class="type">int</span> locate = car.p2;</span><br><span class="line">    <span class="type">char</span> st2[st1.<span class="built_in">length</span>()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;st1.<span class="built_in">length</span>();j++)</span><br><span class="line">    &#123;</span><br><span class="line">        st2[j] = st1[j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%sä¾¿é“è½¦ä½00%d; åœå…¥ä¾¿é“æ—¶é—´: %dæ—¶%dåˆ†ã€‚\n&quot;</span>,st2,locate,h,m);</span><br><span class="line">    <span class="comment">//fputs(st2,fp);</span></span><br><span class="line"><span class="built_in">fclose</span>(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤ä¾¿é“æ–‡ä»¶ä¸­ç¦»å¼€ä¾¿é“çš„è½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LQueue_Delete</span><span class="params">(Car car)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE *fp1,*fp2;</span><br><span class="line">    <span class="type">char</span> strLine[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">if</span> ((fp1 = <span class="built_in">fopen</span>(<span class="string">&quot;LQueue.txt&quot;</span>, <span class="string">&quot;rt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ((fp2 = <span class="built_in">fopen</span>(<span class="string">&quot;temp.txt&quot;</span>, <span class="string">&quot;wt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†è½¦ç‰Œå·å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">    string st1 = car.num;</span><br><span class="line">    <span class="type">char</span> st2[st1.<span class="built_in">length</span>()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;st1.<span class="built_in">length</span>();j++)</span><br><span class="line">    &#123;</span><br><span class="line">        st2[j] = st1[j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">fscanf</span>(fp1,<span class="string">&quot;%[^\n]&quot;</span>,strLine)!=EOF)<span class="comment">//å¾ªç¯è¯»å–æ¯ä¸€è¡Œï¼Œç›´åˆ°æ–‡ä»¶å°¾</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">fgetc</span>(fp1);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strstr</span>(strLine,st2)==<span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(fp2,<span class="string">&quot;%s\n&quot;</span>,strLine);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">fclose</span>(fp1);</span><br><span class="line"><span class="built_in">fclose</span>(fp2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((fp1 = <span class="built_in">fopen</span>(<span class="string">&quot;temp.txt&quot;</span>, <span class="string">&quot;rt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ((fp2 = <span class="built_in">fopen</span>(<span class="string">&quot;LQueue.txt&quot;</span>, <span class="string">&quot;wt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">fscanf</span>(fp1,<span class="string">&quot;%[^\n]&quot;</span>,strLine)!=EOF)<span class="comment">//å¾ªç¯è¯»å–æ¯ä¸€è¡Œï¼Œç›´åˆ°æ–‡ä»¶å°¾</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">fgetc</span>(fp1);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp2,<span class="string">&quot;%s\n&quot;</span>,strLine);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp1);</span><br><span class="line"><span class="built_in">fclose</span>(fp2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘åœè½¦åœºå†™å…¥è½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SeqList_Input</span><span class="params">(string Car_Type, Car car)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">FILE* fp;</span><br><span class="line"><span class="keyword">if</span> ((fp = <span class="built_in">fopen</span>(<span class="string">&quot;SeqList.txt&quot;</span>, <span class="string">&quot;at+&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">string st1 = <span class="string">&quot;è½¦ç‰Œå·: &quot;</span>+ car.num + <span class="string">&quot;; å‹å·: &quot;</span>+car.type + <span class="string">&quot;; &quot;</span>;</span><br><span class="line"><span class="type">int</span> h = car.t1.h;</span><br><span class="line"><span class="type">int</span> m = car.t1.m;</span><br><span class="line"><span class="type">int</span> locate = car.p1;</span><br><span class="line">    <span class="type">char</span> st2[st1.<span class="built_in">length</span>()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;st1.<span class="built_in">length</span>();j++)</span><br><span class="line">    &#123;</span><br><span class="line">        st2[j] = st1[j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%såœè½¦åœºè½¦ä½00%d; åœè½¦æ—¶é—´: %dæ—¶%dåˆ†ã€‚\n&quot;</span>,st2,locate,h,m);</span><br><span class="line"><span class="comment">//fputs(st2, fp);</span></span><br><span class="line"><span class="built_in">fclose</span>(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤åœè½¦åœºè½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SeqList_Delete</span><span class="params">(Car car)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE *fp1,*fp2;</span><br><span class="line">    <span class="type">char</span> strLine[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">if</span> ((fp1 = <span class="built_in">fopen</span>(<span class="string">&quot;SeqList.txt&quot;</span>, <span class="string">&quot;rt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ((fp2 = <span class="built_in">fopen</span>(<span class="string">&quot;temp.txt&quot;</span>, <span class="string">&quot;wt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†è½¦ç‰Œå·å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">    string st1 = car.num;</span><br><span class="line">    <span class="type">char</span> st2[st1.<span class="built_in">length</span>()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;st1.<span class="built_in">length</span>();j++)</span><br><span class="line">    &#123;</span><br><span class="line">        st2[j] = st1[j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">fscanf</span>(fp1,<span class="string">&quot;%[^\n]&quot;</span>,strLine)!=EOF)   <span class="comment">//å¾ªç¯è¯»å–æ¯ä¸€è¡Œï¼Œç›´åˆ°æ–‡ä»¶å°¾</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">fgetc</span>(fp1);    <span class="comment">//å°†fpæ‰€æŒ‡å‘çš„æ–‡ä»¶ä¸€è¡Œå†…å®¹è¯»åˆ°strLineç¼“å†²åŒº</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strstr</span>(strLine,st2)==<span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(fp2,<span class="string">&quot;%s\n&quot;</span>,strLine);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">fclose</span>(fp1);</span><br><span class="line"><span class="built_in">fclose</span>(fp2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((fp1 = <span class="built_in">fopen</span>(<span class="string">&quot;temp.txt&quot;</span>, <span class="string">&quot;rt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ((fp2 = <span class="built_in">fopen</span>(<span class="string">&quot;SeqList.txt&quot;</span>, <span class="string">&quot;wt&quot;</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸èƒ½æ‰“å¼€æ–‡ä»¶&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">fscanf</span>(fp1,<span class="string">&quot;%[^\n]&quot;</span>,strLine)!=EOF)<span class="comment">//å¾ªç¯è¯»å–æ¯ä¸€è¡Œï¼Œç›´åˆ°æ–‡ä»¶å°¾</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">fgetc</span>(fp1);    <span class="comment">//å°†fpæ‰€æŒ‡å‘çš„æ–‡ä»¶ä¸€è¡Œå†…å®¹è¯»åˆ°strLineç¼“å†²åŒº</span></span><br><span class="line">        <span class="built_in">fprintf</span>(fp2,<span class="string">&quot;%s\n&quot;</span>,strLine);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp1);</span><br><span class="line"><span class="built_in">fclose</span>(fp2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦è¿›å…¥åœè½¦åœº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push_SeqList</span><span class="params">(SeqList* s, Car x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">s-&gt;top++;</span><br><span class="line">s-&gt;data[s-&gt;top] = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦ç¦»å¼€åœè½¦åœº</span></span><br><span class="line"><span class="function">Car <span class="title">Pop_SeqList</span><span class="params">(SeqList* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Car x = s-&gt;data[s-&gt;top];</span><br><span class="line">s-&gt;top--;</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœè½¦åœºæ»¡çš„æ—¶å€™è¿›å…¥ä¾¿é“</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">In_LQueue</span><span class="params">(LQueue* q, Car x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">QNode* p;</span><br><span class="line">p = <span class="keyword">new</span> qnode;</span><br><span class="line">p-&gt;data = x;</span><br><span class="line">p-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">q-&gt;rear-&gt;next = p;</span><br><span class="line">q-&gt;rear = p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¾¿é“ç¬¬ä¸€è¾†è½¦è¿›å…¥åœè½¦åœºåï¼Œå¯¹åé¢è½¦è¾†å‰ç§»</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Traverse_LQueue</span><span class="params">(LQueue* q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(q-&gt;front!=q-&gt;rear)</span><br><span class="line">    &#123;</span><br><span class="line">        q-&gt;front = q-&gt;front-&gt;next;</span><br><span class="line">        q-&gt;front-&gt;data.p2--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœè½¦åœºæœ‰è½¦ç¦»å¼€æœ‰ç©ºä½æ—¶ä¾¿é“ä¸Šçš„è½¦è¾†æŒ‰ç…§åˆ°è¾¾é¡ºåºä¾æ¬¡ç¦»å¼€ä¾¿é“å¹¶è¿›å…¥åœè½¦åœº</span></span><br><span class="line"><span class="function">Car <span class="title">Out_LQueue</span><span class="params">(LQueue* q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Car x;</span><br><span class="line">QNode* p;</span><br><span class="line">p = q-&gt;front-&gt;next;</span><br><span class="line">q-&gt;front-&gt;next = p-&gt;next;</span><br><span class="line">x = p-&gt;data;</span><br><span class="line"><span class="keyword">delete</span> p;</span><br><span class="line"><span class="keyword">if</span> (q-&gt;front-&gt;next == <span class="literal">NULL</span>)<span class="comment">//åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå‡ºé˜Ÿåé˜Ÿç©ºï¼Œæ­¤æ—¶è¿˜è¦ä¿®æ”¹é˜Ÿå°¾æŒ‡é’ˆ</span></span><br><span class="line">&#123;</span><br><span class="line">q-&gt;front-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">q-&gt;rear = q-&gt;front;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€éªŒåœè½¦åœºå†…æ˜¯å¦æœ‰è¯¥è½¦è¾†</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Car_if</span><span class="params">(SeqList* p, Car c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> t=p-&gt;top;</span><br><span class="line"><span class="keyword">while</span> (!<span class="built_in">Str_strcmp</span>(c.num,p-&gt;data[t].num))</span><br><span class="line">&#123;</span><br><span class="line">        t--;</span><br><span class="line"><span class="keyword">if</span>(t==<span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (t == <span class="number">-1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦åˆ°è¾¾</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Car_In</span><span class="params">(SeqList* p, LQueue* q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Car c;</span><br><span class="line">    string num; <span class="comment">//ä¸´æ—¶å‚¨å­˜è½¦ç‰Œå·</span></span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æ±½è½¦çš„å‹å·[small/mid/large]:\n&quot;</span>;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; Car_Type;</span><br><span class="line">c.type = Car_Type;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æ±½è½¦è½¦ç‰Œå·:\n&quot;</span>;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; num;</span><br><span class="line"><span class="keyword">while</span>(!<span class="built_in">checkNum</span>(num))  <span class="comment">//æ£€éªŒè½¦ç‰Œå·çš„æ ¼å¼,å¦‚æœè¾“å…¥é”™è¯¯åˆ™éœ€è¦é‡æ–°è¾“å…¥</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-----------------------------------------------------------------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;| æ³¨æ„ï¼šè½¦ç‰Œå·æ ¼å¼ä¸ºæ™®é€šè½¦ç‰Œå·æ ¼å¼ã€ç¬¬ä¸€ä½ä¸ºçœä»½ï¼Œç¬¬äºŒä½ä¸ºå‘è¯æœºå…³A~H|J~N|P~Yï¼Œç¬¬ä¸‰~ä¸ƒä½ä¸ºå·ç 0~9|A~H|J~N|P~Zã€‘ |&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-----------------------------------------------------------------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·é‡æ–°è¾“å…¥æ±½è½¦è½¦ç‰Œå·:\n&quot;</span>;</span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">    &#125;</span><br><span class="line">    c.num = num;</span><br><span class="line">    <span class="keyword">if</span>(p-&gt;top!=<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">Car_if</span>(p,c))     <span class="comment">//åˆ¤æ–­è½¦ç‰Œå·æ˜¯å¦é‡å¤</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;ä½ è¾“å…¥çš„è½¦ç‰Œå·å·²ç»åœ¨è½¦åº“å½“ä¸­äº†ï¼Œè¯·æ£€æŸ¥ä½ çš„è½¦ç‰Œå·æ˜¯å¦æ­£ç¡®ï¼š\n&quot;</span>;</span><br><span class="line">            <span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">            cin &gt;&gt; c.num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æ±½è½¦çš„åˆ°è¾¾æ—¶é—´ï¼ˆæ ¼å¼ï¼šå°æ—¶+ç©ºæ ¼+åˆ†é’Ÿï¼‰:\n&quot;</span>;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; c.t1.h &gt;&gt; c.t1.m;</span><br><span class="line"><span class="keyword">while</span>(!<span class="built_in">checkTime</span>(c.t1.h,c.t1.m))    <span class="comment">//åˆ¤æ–­è¾“å…¥çš„åˆ°è¾¾æ—¶é—´æ˜¯å¦ç¬¦åˆè¦æ±‚</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;---------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;| æ³¨æ„ï¼šæˆ‘ä»¬çš„æ—¶é—´è¦æ±‚æ˜¯24å°æ—¶çš„æ ‡å‡†æ—¶é—´,æ³¨æ„ä¸­é—´çš„ç©ºæ ¼ |&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;---------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·é‡æ–°è¾“å…¥æ±½è½¦çš„åˆ°è¾¾æ—¶é—´ï¼ˆæ ¼å¼ï¼šå°æ—¶+ç©ºæ ¼+åˆ†é’Ÿï¼‰:\n&quot;</span>;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">        cin &gt;&gt; c.t1.h &gt;&gt; c.t1.m;</span><br><span class="line">    &#125;</span><br><span class="line">number++;   <span class="comment">//åˆ°æ­¤è¾“å…¥çš„ä¿¡æ¯+1</span></span><br><span class="line"><span class="keyword">if</span> (p-&gt;top == MAXSIZE - <span class="number">1</span>)  <span class="comment">//å½“åœè½¦åœºæ»¡æ—¶</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¿›å…¥ä¾¿é“</span></span><br><span class="line">c.p2 = ++i;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç”Ÿæ„ç«çˆ†ï¼Œåœè½¦åœºå·²æ»¡ï¼Œè¿›å…¥ä¾¿é“ç­‰å¾…ï¼Œä½ç½®ä¸ºï¼š00&quot;</span> &lt;&lt; c.p2 &lt;&lt; endl;</span><br><span class="line">number_LQueue++;    <span class="comment">//ä¾¿é“ä¸Šç­‰å¾…çš„è½¦è¾†+1</span></span><br><span class="line"><span class="built_in">In_LQueue</span>(q, c);</span><br><span class="line"><span class="built_in">LQueue_Input</span>(Car_Type,c);<span class="comment">//å‘ä¾¿é“æ–‡ä»¶å†™å…¥è½¦è¾†æ•°æ®</span></span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">2000</span>);</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//è¿›å…¥åœè½¦åœº</span></span><br><span class="line">        <span class="type">int</span> flag = <span class="number">1</span>;   <span class="comment">//æ ‡è®°è¾“å…¥è½¦ä½æ˜¯å¦é”™è¯¯ï¼Œè¾“å…¥æ­£ç¡®ç½®ä¸º0</span></span><br><span class="line">        <span class="type">int</span> arr[MAXSIZE];   <span class="comment">//ä¸´æ—¶è®°å½•åœè½¦åœºçš„ç©ºä½</span></span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;åœè½¦åœºæœªæ»¡ï¼Œæ­£åœ¨è¿›å…¥åœè½¦åœº~&quot;</span> &lt;&lt;endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å½“å‰ç©ºé—²è½¦ä½æœ‰:&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;MAXSIZE;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(Car_Space[j].flag == <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot; &quot;</span>&lt;&lt; Car_Space[j].space;     <span class="comment">//è¾“å‡ºåœè½¦åœºçš„ç©ºä½</span></span><br><span class="line">                arr[j] = Car_Space[j].space;    <span class="comment">//å°†ç©ºä½ä¿¡æ¯å­˜åˆ°arræ•°ç»„ä¸­ï¼Œæ–¹ä¾¿åç»­æ£€æŸ¥</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout&lt;&lt;endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·é€‰æ‹©è½¦ä½~  &quot;</span>&lt;&lt;endl;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; c.p1;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;MAXSIZE;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(c.p1==arr[j] &amp;&amp; c.p1!=<span class="number">0</span>)  flag = <span class="number">0</span>;   <span class="comment">//åˆ¤æ–­è¾“å…¥è½¦ä½æ˜¯å¦ç©ºé—²æˆ–è€…å­˜åœ¨ï¼Œç¬¦åˆè¦æ±‚ï¼Œflagç½®ä¸º0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©è½¦ä½~  &quot;</span>&lt;&lt;endl;</span><br><span class="line">            <span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">            cin &gt;&gt; c.p1;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;MAXSIZE;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(c.p1==arr[j] &amp;&amp; c.p1!=<span class="number">0</span>)  flag = <span class="number">0</span>;   <span class="comment">//åˆ¤æ–­è¾“å…¥è½¦ä½æ˜¯å¦ç©ºé—²æˆ–è€…å­˜åœ¨ï¼Œç¬¦åˆè¦æ±‚ï¼Œflagç½®ä¸º0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ­£åœ¨åœè½¦ï¼Œä½ç½®ä¸ºï¼š00&quot;</span> &lt;&lt; c.p1 &lt;&lt; endl; <span class="comment">//è¾“å…¥æ­£ç¡®è¿›å…¥åœè½¦åœº</span></span><br><span class="line"><span class="built_in">color</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">load_4</span>();   <span class="comment">//åœè½¦åŠ è½½åŠ¨ç”»</span></span><br><span class="line">Car_Space[c.p1<span class="number">-1</span>].flag = <span class="number">0</span>; <span class="comment">//æ­¤ä½ç½®å·²åœè½¦ï¼Œflagç½®ä¸º0</span></span><br><span class="line">number_SeqList++;   <span class="comment">//åœè½¦åœºå·²ç»åœçš„è½¦è¾†+1</span></span><br><span class="line"><span class="built_in">Push_SeqList</span>(p, c);</span><br><span class="line"><span class="built_in">SeqList_Input</span>(Car_Type,c);<span class="comment">//å‘åœè½¦åœºæ–‡ä»¶å†™å…¥è½¦è¾†æ•°æ®</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Car_Condition</span>(p,q); <span class="comment">//å†è¿›è¡Œä¸‹ä¸€æ¬¡çš„è¾“å…¥åˆ¤æ–­</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æŸ¥è½¦è¾†çš„è½¦ç‰Œå·æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkNum</span><span class="params">(string S)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> s[S.<span class="built_in">length</span>()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;S.<span class="built_in">length</span>();j++)</span><br><span class="line">    &#123;</span><br><span class="line">        s[j] = S[j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n = S.<span class="built_in">length</span>(); <span class="comment">//è½¦ç‰Œçš„é•¿åº¦</span></span><br><span class="line">    <span class="type">char</span> *ch; <span class="comment">//ç”¨æ¥æ”¾è½¦ç‰Œå·çš„æ±‰å­—</span></span><br><span class="line">    <span class="built_in">strncpy</span>(ch,s,<span class="number">2</span>);    <span class="comment">//æˆªå–å­—ç¬¦ä¸²çš„å‰ä¸¤ä¸ªå­—ç¬¦ï¼Œæ±‰å­—å ä¸¤ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="keyword">if</span>(n!=<span class="number">8</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>((<span class="built_in">strcmp</span>(ch,<span class="string">&quot;äº¬&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æ´¥&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æ™‹&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;å†€&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;è’™&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;è¾½&quot;</span>)!=<span class="number">0</span>)&amp;&amp;</span><br><span class="line">       (<span class="built_in">strcmp</span>(ch,<span class="string">&quot;å‰&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;é»‘&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æ²ª&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;è‹&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æµ™&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;çš–&quot;</span>)!=<span class="number">0</span>)&amp;&amp;</span><br><span class="line">       (<span class="built_in">strcmp</span>(ch,<span class="string">&quot;é—½&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;èµ£&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;é²&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;è±«&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;é„‚&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æ¹˜&quot;</span>)!=<span class="number">0</span>)&amp;&amp;</span><br><span class="line">       (<span class="built_in">strcmp</span>(ch,<span class="string">&quot;ç²¤&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æ¡‚&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;ç¼&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æ¸&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;å·&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;è´µ&quot;</span>)!=<span class="number">0</span>)&amp;&amp;</span><br><span class="line">       (<span class="built_in">strcmp</span>(ch,<span class="string">&quot;äº‘&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;è—&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;é™•&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;ç”˜&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;é’&quot;</span>)!=<span class="number">0</span>)&amp;&amp;(<span class="built_in">strcmp</span>(ch,<span class="string">&quot;å®&quot;</span>)!=<span class="number">0</span>)&amp;&amp;</span><br><span class="line">       (<span class="built_in">strcmp</span>(ch,<span class="string">&quot;æ–°&quot;</span>)!=<span class="number">0</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">2</span>]&lt;<span class="string">&#x27;A&#x27;</span> || s[<span class="number">2</span>]&gt;<span class="string">&#x27;Z&#x27;</span> || s[<span class="number">2</span>]==<span class="string">&#x27;I&#x27;</span> || s[<span class="number">2</span>]==<span class="string">&#x27;O&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!(s[<span class="number">3</span>]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s[<span class="number">3</span>]&lt;=<span class="string">&#x27;9&#x27;</span>) &amp;&amp; !(s[<span class="number">3</span>]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; s[<span class="number">3</span>]&lt;=<span class="string">&#x27;H&#x27;</span>) &amp;&amp; !(s[<span class="number">3</span>]&gt;=<span class="string">&#x27;J&#x27;</span> &amp;&amp; s[<span class="number">3</span>]&lt;=<span class="string">&#x27;N&#x27;</span>) &amp;&amp; !(s[<span class="number">3</span>]&gt;=<span class="string">&#x27;P&#x27;</span> &amp;&amp; s[<span class="number">3</span>]&lt;=<span class="string">&#x27;Z&#x27;</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!(s[<span class="number">4</span>]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s[<span class="number">4</span>]&lt;=<span class="string">&#x27;9&#x27;</span>) &amp;&amp; !(s[<span class="number">4</span>]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; s[<span class="number">4</span>]&lt;=<span class="string">&#x27;H&#x27;</span>) &amp;&amp; !(s[<span class="number">4</span>]&gt;=<span class="string">&#x27;J&#x27;</span> &amp;&amp; s[<span class="number">4</span>]&lt;=<span class="string">&#x27;N&#x27;</span>) &amp;&amp; !(s[<span class="number">4</span>]&gt;=<span class="string">&#x27;P&#x27;</span> &amp;&amp; s[<span class="number">4</span>]&lt;=<span class="string">&#x27;Z&#x27;</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!(s[<span class="number">5</span>]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s[<span class="number">5</span>]&lt;=<span class="string">&#x27;9&#x27;</span>) &amp;&amp; !(s[<span class="number">5</span>]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; s[<span class="number">5</span>]&lt;=<span class="string">&#x27;H&#x27;</span>) &amp;&amp; !(s[<span class="number">5</span>]&gt;=<span class="string">&#x27;J&#x27;</span> &amp;&amp; s[<span class="number">5</span>]&lt;=<span class="string">&#x27;N&#x27;</span>) &amp;&amp; !(s[<span class="number">5</span>]&gt;=<span class="string">&#x27;P&#x27;</span> &amp;&amp; s[<span class="number">5</span>]&lt;=<span class="string">&#x27;Z&#x27;</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!(s[<span class="number">6</span>]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s[<span class="number">6</span>]&lt;=<span class="string">&#x27;9&#x27;</span>) &amp;&amp; !(s[<span class="number">6</span>]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; s[<span class="number">6</span>]&lt;=<span class="string">&#x27;H&#x27;</span>) &amp;&amp; !(s[<span class="number">6</span>]&gt;=<span class="string">&#x27;J&#x27;</span> &amp;&amp; s[<span class="number">6</span>]&lt;=<span class="string">&#x27;N&#x27;</span>) &amp;&amp; !(s[<span class="number">6</span>]&gt;=<span class="string">&#x27;P&#x27;</span> &amp;&amp; s[<span class="number">6</span>]&lt;=<span class="string">&#x27;Z&#x27;</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æŸ¥è½¦è¾†çš„æ—¶é—´æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkTime</span><span class="params">(<span class="type">int</span> h,<span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="number">0</span>&lt;=h&amp;&amp;h&lt;<span class="number">24</span> &amp;&amp; <span class="number">0</span>&lt;=m&amp;&amp;m&lt;<span class="number">60</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦ç¦»å»</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Car_Out</span><span class="params">(SeqList* p, LQueue* q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Car c, x1, first, x2 , car;</span><br><span class="line"><span class="type">int</span> flag = <span class="number">0</span>;   <span class="comment">//æ ‡è®°ä½œç”¨ï¼šç”¨æ¥æ ‡è®°ä¾¿é“ä¸­æ˜¯å¦æœ‰è½¦ã€0è¡¨ç¤ºæ²¡æœ‰ï¼Œ1è¡¨ç¤ºæœ‰ã€‘</span></span><br><span class="line">string num;    <span class="comment">//ä¸´æ—¶å­˜å‚¨æ±½è½¦è½¦ç‰Œå·</span></span><br><span class="line"><span class="keyword">if</span> (p-&gt;top == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//åœè½¦åœºæ— è½¦</span></span><br><span class="line"><span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å½“å‰åœè½¦åœºæ— è½¦~&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (p-&gt;top == MAXSIZE - <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å½“åœè½¦åº“æ»¡äº†çš„æ—¶å€™åˆ¤æ–­ä¾¿é“æ˜¯å¦æœ‰è½¦</span></span><br><span class="line"><span class="keyword">if</span> (q-&gt;front == q-&gt;rear) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">first = <span class="built_in">Out_LQueue</span>(q);<span class="comment">//ä¾¿é“å†…ç¬¬ä¸€è¾†è½¦</span></span><br><span class="line">flag = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">SeqList* temp = <span class="built_in">Init_SeqList</span>();<span class="comment">//ä¸´æ—¶æ ˆï¼Œä¿ç•™æœ‰è½¦ç¦»å¼€è®©è½¦æ—¶ä»åœè½¦åœºé€€å‡ºçš„è½¦è¾†</span></span><br><span class="line"><span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æ±½è½¦è½¦ç‰Œå·:\n&quot;</span>;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; num;</span><br><span class="line"><span class="keyword">while</span>(!<span class="built_in">checkNum</span>(num))  <span class="comment">//æ£€éªŒè½¦ç‰Œå·çš„æ ¼å¼,å¦‚æœè¾“å…¥é”™è¯¯åˆ™éœ€è¦é‡æ–°è¾“å…¥</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-----------------------------------------------------------------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;| æ³¨æ„ï¼šè½¦ç‰Œå·æ ¼å¼ä¸ºæ™®é€šè½¦ç‰Œå·æ ¼å¼ã€ç¬¬ä¸€ä½ä¸ºçœä»½ï¼Œç¬¬äºŒä½ä¸ºå‘è¯æœºå…³A~H|J~N|P~Yï¼Œç¬¬ä¸‰~ä¸ƒä½ä¸ºå·ç 0~9|A~H|J~N|P~Zã€‘ |&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-----------------------------------------------------------------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·é‡æ–°è¾“å…¥æ±½è½¦è½¦ç‰Œå·:\n&quot;</span>;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">    &#125;</span><br><span class="line">    c.num = num;</span><br><span class="line"><span class="comment">//åˆ¤æ–­åœè½¦åœºå†…æ˜¯å¦æœ‰è¯¥è½¦è¾†</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">Car_if</span>(p,c))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯¥åœè½¦åœºå†…æ²¡æœ‰è¯¥è½¦è¾†~&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">Car_Condition</span>(p,q); <span class="comment">//å†è¿›è¡Œä¸‹ä¸€æ¬¡çš„è¾“å…¥åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æ±½è½¦çš„ç¦»å¼€æ—¶é—´ï¼ˆæ ¼å¼ï¼šå°æ—¶+ç©ºæ ¼+åˆ†é’Ÿï¼‰:\n&quot;</span>;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; c.t2.h &gt;&gt; c.t2.m;</span><br><span class="line"><span class="keyword">while</span>(!<span class="built_in">checkTime</span>(c.t2.h,c.t2.m))    <span class="comment">//åˆ¤æ–­è¾“å…¥çš„ç¦»å¼€æ—¶é—´æ˜¯å¦ç¬¦åˆè¦æ±‚</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;---------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;| æ³¨æ„ï¼šæˆ‘ä»¬çš„æ—¶é—´è¦æ±‚æ˜¯24å°æ—¶çš„æ ‡å‡†æ—¶é—´,æ³¨æ„ä¸­é—´çš„ç©ºæ ¼ |&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;---------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·é‡æ–°è¾“å…¥æ±½è½¦çš„åˆ°è¾¾æ—¶é—´ï¼ˆæ ¼å¼ï¼šå°æ—¶+ç©ºæ ¼+åˆ†é’Ÿï¼‰:\n&quot;</span>;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">        cin &gt;&gt; c.t2.h &gt;&gt; c.t2.m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> location = p-&gt;top;</span><br><span class="line">    car = <span class="built_in">Traverse_SeqList</span>(p,location,num);     <span class="comment">//å¾—åˆ°ç›®æ ‡è½¦é‡</span></span><br><span class="line">    <span class="keyword">while</span>(!<span class="built_in">Check_TimeOut</span>(car.t1.h,c.t2.h,car.t1.m,c.t2.m))     <span class="comment">//åˆ¤æ–­ç›®æ ‡è½¦è¾†çš„ç¦»å¼€æ—¶é—´æ˜¯å¦åˆæ³•</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        <span class="comment">//ä¸åˆæ³•éœ€è¦é‡æ–°è¾“å…¥</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ—¶é—´ä¸åˆæ³•ï¼Œè¯·é‡æ–°è¾“å…¥:\n&quot;</span>;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">        cin &gt;&gt; c.t2.h &gt;&gt; c.t2.m;</span><br><span class="line">    &#125;</span><br><span class="line">    number++;   <span class="comment">//è½¦è¾†ç¦»å¼€ä¿¡æ¯è¾“å…¥æˆåŠŸï¼Œè¾“å…¥æ•°æ®+1</span></span><br><span class="line"><span class="keyword">while</span> (c.num != p-&gt;data[p-&gt;top].num)</span><br><span class="line">&#123;</span><br><span class="line">x1 = <span class="built_in">Pop_SeqList</span>(p);</span><br><span class="line"><span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è½¦ç‰Œå·ä¸º&quot;</span> &lt;&lt; x1.num &lt;&lt; <span class="string">&quot;çš„è½¦è®©è·¯&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">Push_SeqList</span>(temp, x1);</span><br><span class="line">&#125;</span><br><span class="line">x1 = <span class="built_in">Pop_SeqList</span>(p);<span class="comment">//ç›®æ ‡è½¦è¾†,å³å‡†å¤‡å¼€å‡ºçš„è½¦è¾†</span></span><br><span class="line">x1.t2.h = c.t2.h, x1.t2.m = c.t2.m;</span><br><span class="line"><span class="type">int</span> t = (x1.t2.h - x1.t1.h) * <span class="number">60</span> + x1.t2.m - x1.t1.m; <span class="comment">//æ€»åœç•™åˆ†é’Ÿ</span></span><br><span class="line"><span class="type">int</span> t1, t2;</span><br><span class="line"><span class="keyword">if</span> (x1.t2.m &gt;= x1.t1.m)</span><br><span class="line">&#123;</span><br><span class="line">t2 = x1.t2.m - x1.t1.m;</span><br><span class="line">t1 = x1.t2.h - x1.t1.h;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">t2 = x1.t2.m + <span class="number">60</span> - x1.t1.m;</span><br><span class="line">t1 = x1.t2.h - x1.t1.h - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è½¦ç‰Œå·ä¸º&quot;</span> &lt;&lt; x1.num &lt;&lt; <span class="string">&quot;çš„è½¦å¼€å‡º&quot;</span> &lt;&lt; endl;</span><br><span class="line">Car_Space[x1.p1<span class="number">-1</span>].flag = <span class="number">1</span>;    <span class="comment">//è½¦è¾†ç¦»å¼€ï¼Œåœè½¦åœºçš„è½¦ä½ç©ºå‡ºï¼Œflagç½®ä¸º1ã€‚</span></span><br><span class="line">number_SeqList--;   <span class="comment">//åœè½¦åœºçš„è½¦è¾†æ•°ç›®å‡å°‘</span></span><br><span class="line"><span class="built_in">SeqList_Delete</span>(x1);<span class="comment">//åœè½¦åœºæ–‡ä»¶åˆ é™¤æ­¤è½¦è¾†</span></span><br><span class="line"><span class="comment">//åˆšæ‰è®©å‡ºçš„è½¦è¾†æŒ‰ç…§åŸæ¥çš„é¡ºåºä¾æ¬¡å¼€å…¥åœè½¦åœº</span></span><br><span class="line"><span class="keyword">while</span> (temp-&gt;top != <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">x2 = <span class="built_in">Pop_SeqList</span>(temp);</span><br><span class="line"><span class="comment">//x.p1 = p-&gt;top + 2;</span></span><br><span class="line"><span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è½¦ç‰Œå·ä¸º&quot;</span> &lt;&lt; x2.num &lt;&lt; <span class="string">&quot;çš„è½¦å¼€å…¥&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">Push_SeqList</span>(p, x2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è‹¥ä¾¿é“æœ‰è½¦åˆ™è®©ä¾¿é“ä¸Šç¬¬ä¸€è¾†è½¦è¿›å…¥åœè½¦åœº</span></span><br><span class="line"><span class="keyword">if</span> (flag)</span><br><span class="line">&#123;</span><br><span class="line">first.p1 = x1.p1;    <span class="comment">//å°†ç¦»å¼€çš„è½¦ä½ç»™ä¾¿é“ä¸Šå¼€å…¥çš„æ±½è½¦</span></span><br><span class="line">Car_Space[x1.p1<span class="number">-1</span>].flag = <span class="number">0</span>;    <span class="comment">//ä¾¿é“çš„ä¸Šè½¦å¼€å…¥ï¼Œåœè½¦åœºçš„è½¦ä½è¢«å ç”¨ï¼Œflagç½®ä¸º0</span></span><br><span class="line">first.t1.h = x1.t2.h;    <span class="comment">//æ›´æ–°ä¾¿é“ä¸Šå¼€å…¥çš„æ±½è½¦çš„å¼€å§‹åœè½¦çš„æ—¶é—´ã€ä¾¿é“ä¸Šåœè½¦çš„æ—¶é—´ä¸æ”¶è´¹ã€‘</span></span><br><span class="line">first.t1.m = x1.t2.m;</span><br><span class="line"><span class="built_in">Push_SeqList</span>(p, first);</span><br><span class="line"><span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è½¦ç‰Œå·ä¸º&quot;</span> &lt;&lt; first.num &lt;&lt; <span class="string">&quot;çš„è½¦å¼€å…¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">i--;    <span class="comment">//å¯¹ä¾¿é“ä¸Šçš„è½¦ä½æ ‡ç­¾-1</span></span><br><span class="line"><span class="built_in">Traverse_LQueue</span>(q);     <span class="comment">//ä¾¿é“ç¬¬ä¸€è¾†è½¦è¿›å…¥åœè½¦åœºåï¼Œå¯¹åé¢è½¦è¾†å‰ç§»</span></span><br><span class="line">number_SeqList++;       <span class="comment">//ä¾¿é“ä¸Šçš„è½¦å¼€å…¥åœè½¦åœºï¼Œåœè½¦åœºçš„è½¦è¾†æ•°ç›®+1</span></span><br><span class="line">number_LQueue--;        <span class="comment">//ä¾¿é“ä¸Šçš„è½¦å¼€å…¥åœè½¦åœºï¼Œä¾¿é“ä¸Šçš„è½¦è¾†æ•°ç›®-1</span></span><br><span class="line"><span class="built_in">LQueue_Delete</span>(first);<span class="comment">//åˆ é™¤ä¾¿é“æ–‡ä»¶çš„ç¬¬ä¸€è¾†è½¦</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¡ç®—è½¦è´¹</span></span><br><span class="line">Car_Type = x1.type;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line"><span class="keyword">if</span> (!Car_Type.<span class="built_in">compare</span>(<span class="string">&quot;large&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨çš„è½¦è¾†å‹å·ç¬¦åˆå¤§è½¦å‹ï¼Œæˆ‘ä»¬å¯¹ä½ è¿›è¡Œ0.2ï¿¥/åˆ†é’Ÿçš„æ”¶è´¹æ ‡å‡†è¿›è¡Œæ”¶è´¹&quot;</span>&lt;&lt;endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœç•™æ—¶é—´ï¼š&quot;</span> &lt;&lt; t1 &lt;&lt; <span class="string">&quot;å°æ—¶&quot;</span> &lt;&lt; t2 &lt;&lt; <span class="string">&quot;åˆ†é’Ÿ&quot;</span> &lt;&lt; <span class="string">&quot;    æ”¶è´¹ï¼š&quot;</span> &lt;&lt; t * price_1 &lt;&lt; <span class="string">&quot;å…ƒ\n&quot;</span> &lt;&lt; <span class="string">&quot;æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´~&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (!Car_Type.<span class="built_in">compare</span>(<span class="string">&quot;mid&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨çš„è½¦è¾†å‹å·ç¬¦åˆä¸­è½¦å‹ï¼Œæˆ‘ä»¬å¯¹ä½ è¿›è¡Œ0.1ï¿¥/åˆ†é’Ÿçš„æ”¶è´¹æ ‡å‡†è¿›è¡Œæ”¶è´¹&quot;</span>&lt;&lt;endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœç•™æ—¶é—´ï¼š&quot;</span> &lt;&lt; t1 &lt;&lt; <span class="string">&quot;å°æ—¶&quot;</span> &lt;&lt; t2 &lt;&lt; <span class="string">&quot;åˆ†é’Ÿ&quot;</span> &lt;&lt; <span class="string">&quot;    æ”¶è´¹ï¼š&quot;</span> &lt;&lt; t * price_2 &lt;&lt; <span class="string">&quot;å…ƒ\n&quot;</span> &lt;&lt; <span class="string">&quot;æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´~&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (!Car_Type.<span class="built_in">compare</span>(<span class="string">&quot;small&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨çš„è½¦è¾†å‹å·ç¬¦åˆå¤§è½¦å‹ï¼Œæˆ‘ä»¬å¯¹ä½ è¿›è¡Œ0.05ï¿¥/åˆ†é’Ÿçš„æ”¶è´¹æ ‡å‡†è¿›è¡Œæ”¶è´¹&quot;</span>&lt;&lt;endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœç•™æ—¶é—´ï¼š&quot;</span> &lt;&lt; t1 &lt;&lt; <span class="string">&quot;å°æ—¶&quot;</span> &lt;&lt; t2 &lt;&lt; <span class="string">&quot;åˆ†é’Ÿ&quot;</span> &lt;&lt; <span class="string">&quot;    æ”¶è´¹ï¼š&quot;</span> &lt;&lt; t * price_3 &lt;&lt; <span class="string">&quot;å…ƒ\n&quot;</span> &lt;&lt; <span class="string">&quot;æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´~&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨çš„è½¦å‹ä¸ç¬¦åˆæˆ‘ä»¬çš„è§„èŒƒæˆ‘ä»¬å°†å¯¹ä½ æŒ‰0.5ï¿¥/åˆ†é’Ÿçš„æ”¶è´¹æ ‡å‡†è¿›è¡Œæ”¶è´¹&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœç•™æ—¶é—´ï¼š&quot;</span> &lt;&lt; t1 &lt;&lt; <span class="string">&quot;å°æ—¶&quot;</span> &lt;&lt; t2 &lt;&lt; <span class="string">&quot;åˆ†é’Ÿ&quot;</span> &lt;&lt; <span class="string">&quot;    æ”¶è´¹ï¼š&quot;</span> &lt;&lt; t * <span class="number">0.5</span> &lt;&lt; <span class="string">&quot;å…ƒ\n&quot;</span> &lt;&lt; <span class="string">&quot;å»ºè®®æ¢ä¸ªåœè½¦åœºï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">500</span>);</span><br><span class="line"><span class="built_in">Car_Condition</span>(p,q); <span class="comment">//å†è¿›è¡Œä¸‹ä¸€æ¬¡çš„è¾“å…¥åˆ¤æ–­</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºåœè½¦åœºå†…è½¦è¾†ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Display</span><span class="params">(SeqList* p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Car x;</span><br><span class="line">SeqList* temp = <span class="built_in">Init_SeqList</span>();</span><br><span class="line"><span class="keyword">if</span> (p-&gt;top == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å½“å‰åœè½¦åœºæ— è½¦ï¼Œç”Ÿæ„æƒ¨æ·¡TvT~&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">2000</span>);</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">while</span> (p-&gt;top != <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">x = <span class="built_in">Pop_SeqList</span>(p);</span><br><span class="line"><span class="built_in">Push_SeqList</span>(temp, x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å½“å‰åœæ”¾çš„è½¦è¾†ä¿¡æ¯:&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">while</span> (temp-&gt;top != <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">x = <span class="built_in">Pop_SeqList</span>(temp);</span><br><span class="line"><span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœè½¦ä½ç½®ä¸ºï¼š00&quot;</span> &lt;&lt; x.p1 &lt;&lt; <span class="string">&quot;  è½¦ç‰Œå·ç :&quot;</span> &lt;&lt; x.num &lt;&lt; <span class="string">&quot;  åœè½¦æ—¶é—´ï¼š&quot;</span> &lt;&lt; x.t1.h &lt;&lt; <span class="string">&quot;ç‚¹&quot;</span> &lt;&lt; x.t1.m &lt;&lt; <span class="string">&quot;åˆ†&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">Push_SeqList</span>(p, x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">4000</span>);</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–è½¦è¾†è¿›å…¥/ç¦»å¼€åœè½¦åœºçš„ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Car_Condition</span><span class="params">(SeqList* p, LQueue* q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string x;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">9</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å½“å‰å·²ç»è¾“å…¥&quot;</span>&lt;&lt;number&lt;&lt;<span class="string">&quot;ç»„æ•°æ®&quot;</span> &lt;&lt; <span class="string">&quot;è¿™æ˜¯ç¬¬&quot;</span>&lt;&lt;number+<span class="number">1</span>&lt;&lt;<span class="string">&quot;æ¬¡è¾“å…¥ä¿¡æ¯&quot;</span>&lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å½“å‰åœè½¦åœºå·²åœæœ‰&quot;</span>&lt;&lt;number_SeqList&lt;&lt;<span class="string">&quot;è¾†è½¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å½“å‰ä¾¿é“ä¸Šå·²æœ‰&quot;</span>&lt;&lt;number_LQueue&lt;&lt;<span class="string">&quot;è¾†è½¦åœ¨ç­‰å¾…&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è½¦è¾†è¿›å…¥æˆ–ç¦»å¼€çš„ä¿¡æ¯[Aè¡¨ç¤ºè¿›å…¥åœè½¦åœº/Dè¡¨ç¤ºç¦»å¼€åœè½¦åœº/Eè¡¨ç¤ºç»ˆæ­¢è¾“å…¥]:\n&quot;</span>;\</span><br><span class="line"><span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; x;</span><br><span class="line"><span class="keyword">if</span>(!x.<span class="built_in">compare</span>(<span class="string">&quot;A&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Car_In</span>(p, q);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(!x.<span class="built_in">compare</span>(<span class="string">&quot;D&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Car_Out</span>(p, q);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(!x.<span class="built_in">compare</span>(<span class="string">&quot;E&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¾“å…¥ç»ˆæ­¢&quot;</span> &lt;&lt;endl;</span><br><span class="line">        <span class="built_in">Sleep</span>(<span class="number">1000</span>);</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¾“å…¥ä¿¡æ¯æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼ï¼ï¼&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="built_in">Sleep</span>(<span class="number">300</span>);</span><br><span class="line">        <span class="built_in">Car_Condition</span>(p,q);     <span class="comment">//é€’å½’è°ƒç”¨Car_Conditionå‡½æ•°ï¼Œé‡æ–°è¾“å…¥ä¿¡æ¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿®æ”¹å­—ä½“é¢œè‰²</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">color</span><span class="params">(<span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">SetConsoleTextAttribute</span>(<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE),m|<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¨‹åºåˆšå¼€å§‹è¿è¡Œæ—¶çš„åŠ è½½è¿‡ç¨‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">menu_load</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">color</span>(<span class="number">3</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n\n\n\t\t\t\t================æ¬¢è¿ä½¿ç”¨åœè½¦åœº===================&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;\t\t\t\t*\t\t\t\t\t\t&quot;</span>&lt;&lt;<span class="string">&quot;*&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;\t\t\t\t*\t  å½“å‰æ­£åœ¨åŠ è½½ï¼Œè¯·è€å¿ƒç­‰å¾…\t\t&quot;</span>&lt;&lt;<span class="string">&quot;*&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;\t\t\t\t*\t\t\t\t\t\t&quot;</span>&lt;&lt;<span class="string">&quot;*&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\t\t\t\t=================================================&quot;</span> &lt;&lt; endl&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">Sleep</span>(<span class="number">500</span>);</span><br><span class="line">    <span class="built_in">load_3</span>();</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">Sleep</span>(<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">load_1</span>();</span><br><span class="line">    <span class="built_in">Sleep</span>(<span class="number">500</span>);</span><br><span class="line">    <span class="built_in">menu</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç³»ç»Ÿä¸»èœå•é¡µé¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">menu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> flag = <span class="number">1</span>;</span><br><span class="line">    SeqList* p = <span class="built_in">Init_SeqList</span>();</span><br><span class="line">LQueue* q = <span class="built_in">Init_LQueue</span>();</span><br><span class="line">    <span class="keyword">while</span> (flag)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n\n\n\t\t\t=========================æ¬¢è¿ä½¿ç”¨åœè½¦åœº===========================&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||\t\t\t\t\t\t\t\t||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||\t\t   æœ¬åœè½¦åœºæœ€å¤šå¯åœæ”¾&quot;</span> &lt;&lt; MAXSIZE &lt;&lt; <span class="string">&quot;è¾†æ±½è½¦&quot;</span> &lt;&lt; <span class="string">&quot;\t\t\t||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||\t\t\t\t\t\t\t\t||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||   æœ¬åœè½¦åœºå¯åœå¤§[large]ã€ä¸­[mid]ã€å°[small]ä¸‰ç§å‹å·çš„è½¦è¾†&quot;</span> &lt;&lt; <span class="string">&quot;    ||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||\t\t\t\t\t\t\t\t||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||  æ”¶è´¹æ ‡å‡†ï¼šå¤§[0.2ï¿¥/åˆ†é’Ÿ]ï¼Œå¤§[0.1ï¿¥/åˆ†é’Ÿ]ï¼Œå°[0.05ï¿¥/åˆ†é’Ÿ]&quot;</span> &lt;&lt; <span class="string">&quot;   ||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||\t\t\t\t\t\t\t\t||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||\t   å¦‚æœæ‚¨ä¸å¹¸ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼ŒæŒ‰æ¯åˆ†é’Ÿ0.5ï¿¥æ”¶è´¹&quot;</span>&lt;&lt; <span class="string">&quot;\t||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t||\t\t\t\t\t\t\t\t||&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t==================================================================&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\t\t\t    **********1.è¾“å…¥æ±½è½¦ä¿¡æ¯   2.æŸ¥çœ‹è½¦åº“  3.é€€å‡ºç³»ç»Ÿ**********&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">color</span>(<span class="number">4</span>);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·è¿›è¡Œé€‰æ‹©[è¾“å…¥åºå·å³å¯]:\n&quot;</span>;</span><br><span class="line"><span class="type">char</span> i;</span><br><span class="line"><span class="built_in">color</span>(<span class="number">7</span>);</span><br><span class="line">cin &gt;&gt; i;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">getchar</span>() != <span class="string">&#x27;\n&#x27;</span>);<span class="comment">//æ¸…é™¤ç¼“å†²åŒº</span></span><br><span class="line"><span class="keyword">switch</span> (i)</span><br><span class="line">&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:number=<span class="number">0</span>;<span class="built_in">Car_Condition</span>(p, q); <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span>:<span class="built_in">Display</span>(p); <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;3&#x27;</span>:flag = <span class="number">0</span>; <span class="built_in">color</span>(<span class="number">3</span>);<span class="built_in">load_2</span>(); <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:cout &lt;&lt; <span class="string">&quot;è¾“å…¥é”™è¯¯å•¦~è¯·é‡æ–°è¾“å…¥æ•°å­—1--3~&quot;</span> &lt;&lt; endl; <span class="built_in">Sleep</span>(<span class="number">1000</span>); <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>); <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ è½½ç™¾åˆ†æ¯”å¯è§†åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\nè¯·ç¨å...... &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++)  <span class="comment">// æ‰“å°ç™¾åˆ†æ¯”</span></span><br><span class="line">    &#123;</span><br><span class="line">        std::cout.<span class="built_in">width</span>(<span class="number">3</span>);  <span class="comment">// içš„è¾“å‡ºä¸º3ä½å®½</span></span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot;%&quot;</span>;</span><br><span class="line">        <span class="built_in">Sleep</span>(<span class="number">15</span>);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\b\b\b\b&quot;</span>;  <span class="comment">//å›åˆ ä¸‰ä¸ªå­—ç¬¦ï¼Œä½¿æ•°å­—åœ¨åŸåœ°å˜åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\t\t\t\t\t\t\t\t&quot;</span> &lt;&lt; <span class="string">&quot;\n\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;åŠ è½½å®Œæˆï¼&quot;</span>;</span><br><span class="line">    <span class="built_in">Sleep</span>(<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç³»ç»Ÿé€€å‡ºç™¾åˆ†æ¯”å¯è§†åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\nè¯·ç¨å...... &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++)  <span class="comment">// æ‰“å°ç™¾åˆ†æ¯”</span></span><br><span class="line">    &#123;</span><br><span class="line">        std::cout.<span class="built_in">width</span>(<span class="number">3</span>);  <span class="comment">// içš„è¾“å‡ºä¸º3ä½å®½</span></span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot;%&quot;</span>;</span><br><span class="line">        <span class="built_in">Sleep</span>(<span class="number">15</span>);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\b\b\b\b&quot;</span>;  <span class="comment">//å›åˆ ä¸‰ä¸ªå­—ç¬¦ï¼Œä½¿æ•°å­—åœ¨åŸåœ°å˜åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\t\t\t\t\t\t\t\t&quot;</span> &lt;&lt; <span class="string">&quot;\n\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç³»ç»Ÿé€€å‡ºæˆåŠŸï¼&quot;</span>;</span><br><span class="line">    <span class="built_in">Sleep</span>(<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿›å…¥ç³»ç»ŸåŠ è½½ç•Œé¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string reading=<span class="string">&quot;æ­£åœ¨ä¸ºæ‚¨è¿›å…¥ç³»ç»Ÿ~~&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;reading.<span class="built_in">length</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;reading[i];</span><br><span class="line">        <span class="built_in">Sleep</span>(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœè½¦åŠ è½½ç™¾åˆ†æ¯”å¯è§†åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">load_4</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\nè¯·ç¨å...... &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++)  <span class="comment">// æ‰“å°ç™¾åˆ†æ¯”</span></span><br><span class="line">    &#123;</span><br><span class="line">        std::cout.<span class="built_in">width</span>(<span class="number">3</span>);  <span class="comment">// içš„è¾“å‡ºä¸º3ä½å®½</span></span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot;%&quot;</span>;</span><br><span class="line">        <span class="built_in">Sleep</span>(<span class="number">15</span>);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\b\b\b\b&quot;</span>;  <span class="comment">//å›åˆ ä¸‰ä¸ªå­—ç¬¦ï¼Œä½¿æ•°å­—åœ¨åŸåœ°å˜åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\t\t\t\t\t\t\t\t&quot;</span> &lt;&lt; <span class="string">&quot;\n\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;åœè½¦æˆåŠŸï¼&quot;</span>;</span><br><span class="line">    <span class="built_in">Sleep</span>(<span class="number">2000</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æŸ¥æ±½è½¦ç¦»å¼€å‡ºæ ˆçš„æ—¶é—´æ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Check_TimeOut</span><span class="params">(<span class="type">int</span> h1,<span class="type">int</span> h2,<span class="type">int</span> m1,<span class="type">int</span> m2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(((h2*<span class="number">60</span>+m2)-(h1*<span class="number">60</span>+m1))&gt;<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ˆçš„éå†ç”¨æ¥å¯»æ‰¾å‡ºæ ˆçš„è½¦è¾†</span></span><br><span class="line"><span class="function">Car <span class="title">Traverse_SeqList</span><span class="params">(SeqList *p,<span class="type">int</span> top,string num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(num!=p-&gt;data[top].num)</span><br><span class="line">    &#123;</span><br><span class="line">        top--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p-&gt;data[top];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Str_strcmp</span><span class="params">(string str1,string str2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!str1.<span class="built_in">compare</span>(str2)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼€æºåœ°å€ï¼š<a href="https://github.com/xiaoyutoua/Parking-lot-management-simulation-system">https://github.com/xiaoyutoua/Parking-lot-management-simulation-system</a></p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoåšå®¢å¤‡ä»½ä¸æ¢å¤</title>
      <link href="/2023/01/06/Hexo%E5%8D%9A%E5%AE%A2%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"/>
      <url>/2023/01/06/Hexo%E5%8D%9A%E5%AE%A2%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/</url>
      
        <content type="html"><![CDATA[<div class="tip key"><p>æœ¬æ–‡æ—¨åœ¨è§£å†³åœ¨ä¸åŒç”µè„‘ä¸Šéƒ½èƒ½ç»´æŠ¤åšå®¢æˆ–é…ç½®ã€å‘å¸ƒçš„å†…å®¹ä¸¢å¤±å¯æ¢å¤çš„é—®é¢˜ã€‚</p></div><details class="folding-tag" ><summary> å‚è€ƒåšå®¢Â© </summary>              <div class='content'>              <p>æœ¬æ–‡å‚è€ƒåšå®¢å¦‚ä¸‹ï¼Œå› ä¸ºå¤‡ä»½å¯¹åšå®¢æ¥è¯´æ¯”è¾ƒé‡è¦ï¼Œæ‰€ä»¥è®°å½•ä¸‹æ¥ï¼Œé˜²æ­¢åŸä½œè€…åˆ é™¤ã€‚</p><div class="tag link"><a class="link-card" title="Mupceet" href="https://mupceet.com/2019/09/backup-hexo-blog/"><div class="left"><img src="https://mupceet.com/images/avatar_me.png"/></div><div class="right"><p class="text">Mupceet</p><p class="url">https://mupceet.com/2019/09/backup-hexo-blog/</p></div></a></div>              </div>            </details><p>è§‚å¯Ÿéƒ¨ç½²åˆ°ä»“åº“çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šä¼ çš„å†…å®¹æ˜¯ <code>public</code> æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚äº‹å®ä¸Š <code>hexo-deploy-git</code> æ’ä»¶æ˜¯é€šè¿‡æ‹·è´ <code>public</code> æ–‡ä»¶å¤¹å†…å®¹åˆ° <code>.deploy_git</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åæäº¤æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šå®ç°äº†ç½‘ç«™æ–‡ä»¶çš„éƒ¨ç½²ã€‚</p><p>é‚£æˆ‘ä»¬çš„å¤‡ä»½æ€è·¯ä¹Ÿå¯ä»¥è¿™æ ·ï¼Œä¸Šä¼ ç›®å½•ä¸‹çš„å…¶ä»–æ‰€æœ‰æ–‡ä»¶å°±å¯ä»¥äº†ï¼ŒåŒæ—¶æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹åšå®¢çš„å‘å¸ƒåˆ†æ”¯ï¼Œå› æ­¤è€ƒè™‘å¤‡ä»½å…¶ä»–æ‰€æœ‰æ–‡ä»¶åˆ°æ–°åˆ†æ”¯ä¸­ã€‚</p><p>æœ€ç®€å•ç›´æ¥çš„æ–¹æ³•å°±æ˜¯åœ¨ä»“åº“åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼ŒæŠŠæœ¬åœ°æ‰€æœ‰çš„å†…å®¹éƒ½ä¸Šä¼ åˆ°è¯¥åˆ†æ”¯ä¸Šã€‚ä½†è¿™æ ·ä¼šå¤‡ä»½ä¸€éƒ¨åˆ†ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>public</code> æ–‡ä»¶å¤¹å†…å®¹ï¼Œå®ƒå¯ä»¥å†æ¬¡ç”Ÿæˆï¼Œå°±æ²¡æœ‰å¿…è¦å¤‡ä»½ã€‚</p><p>é‚£å…·ä½“è¦å¤‡ä»½å“ªäº›æ–‡ä»¶å‘¢ï¼Ÿ</p><h1 id="cd-å¤‡ä»½"><a href="#cd-å¤‡ä»½" class="headerlink" title=":cd:å¤‡ä»½"></a>:cd:å¤‡ä»½</h1><h2 id="1ã€å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨"><a href="#1ã€å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨" class="headerlink" title="1ã€å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨"></a>1ã€å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨</h2><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹ï¼Œç°åœ¨åšå®¢æ–‡ä»¶å¤¹éƒ½æœ‰ä»€ä¹ˆå†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ db.json</span><br><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">â””â”€â”€ themes</span><br><span class="line">    â”œâ”€â”€ next</span><br><span class="line">    â””â”€â”€ landscape</span><br></pre></td></tr></table></figure><p>è¿™å‡ ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„å†…å®¹åˆ†åˆ«æ˜¯ï¼š</p><ol><li><code>_config.yml</code> æ–‡ä»¶ï¼šç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œå¾ˆå¤šåŠŸèƒ½ã€æ’ä»¶éœ€è¦ä¿®æ”¹è¯¥é…ç½®æ–‡ä»¶åº”ç”¨ç”Ÿæ•ˆã€‚</li><li><code>node_modules</code> æ–‡ä»¶å¤¹ï¼šåŒ…å«ä¾èµ–çš„æ¨¡å—ã€‚</li><li><code>package.json</code> æ–‡ä»¶ï¼šä¾èµ–çš„æ¨¡å—åˆ—è¡¨ã€‚è¯´æ˜è§ï¼š<a href="https://www.npmjs.cn/files/package.json/">package.json:Specifics of npmâ€™s package.json handling</a></li><li><code>package-lock.json</code> æ–‡ä»¶ï¼šä¾èµ–çš„æ¨¡å—å®‰è£…è®°å½•ã€‚è¯´æ˜è§ï¼š<a href="https://www.npmjs.cn/files/package-locks/">npm-package-locks:An explanation of npm lockfiles</a></li><li><code>public</code> æ–‡ä»¶å¤¹ï¼šåŒ…å«ç”Ÿæˆçš„ç½‘é¡µé™æ€æ–‡ä»¶ã€‚</li><li><code>scaffolds</code> æ–‡ä»¶å¤¹ï¼šåŒ…å«åˆ›å»ºçš„æ–‡ç« ã€åˆ†ç±»ã€æ ‡ç­¾ç•Œé¢çš„æ¨¡æ¿ã€‚åšå®¢çš„å®šåˆ¶ä¿®æ”¹ä¼šå¯¹æ¨¡æ¿è¿›è¡Œä¿®æ”¹ã€‚</li><li><code>source</code> æ–‡ä»¶å¤¹ï¼šåŒ…å«ç”Ÿæˆç½‘é¡µæ‰€éœ€è¦çš„æºæ–‡ä»¶ï¼ŒåŒ…æ‹¬åŒ…å«æˆ‘ä»¬å¿ƒè¡€çš„ Markdown æ–‡ç¨¿ï¼Œè¿™ä¹Ÿæ˜¯æœ€é‡è¦çš„å†…å®¹ã€‚</li><li><code>themes</code> æ–‡ä»¶å¤¹ï¼šå…¶ä¸­ <code>landscape</code> æ˜¯é»˜è®¤çš„ä¸»é¢˜ï¼Œå…¶ä»–æ–‡ä»¶å¤¹æ˜¯å…‹éš†ä¸‹æ¥æ—¶çš„ä¸»é¢˜ã€‚</li></ol><p>æˆ‘ä»¬å¯ä»¥å‚è€ƒ Hexo åˆå§‹åŒ–ä½¿ç”¨çš„ä»“åº“çš„å¤‡ä»½åˆ—è¡¨ï¼Œå®ƒçš„ä»“åº“æ˜¯ <a href="https://github.com/hexojs/hexo-starter">hexojs&#x2F;hexo-starter</a>ã€‚æˆ‘ä»¬çœ‹ä¸‹å®ƒå¤‡ä»½äº†å“ªäº›å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scaffolds</span><br><span class="line">source</span><br><span class="line">themes</span><br><span class="line">.gitignore</span><br><span class="line">.gitmodules</span><br><span class="line">_config.yml</span><br><span class="line">package.json</span><br></pre></td></tr></table></figure><p>æ¯”å¯¹ä¸€ä¸‹ï¼Œå®ƒæŠ›å¼ƒäº†ï¼š</p><ol><li><code>node_modules</code> &amp; <code>package-lock.json</code>ï¼šè¿™ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œåªè¦ä¿ç•™ <code>package.json</code>ï¼Œæ‰§è¡Œ <code>npm install</code> å°±å¯ä»¥ä¸‹è½½ã€ç”Ÿæˆã€‚</li><li><code>public</code>ï¼šæ‰§è¡Œ <code>hexo g</code> å³å¯æ ¹æ®æºæ–‡ä»¶ç”Ÿæˆç½‘é¡µå†…å®¹ã€‚</li></ol><p>è¿™äº›å¯é‡æ–°ç”Ÿæˆçš„æ–‡ä»¶éƒ½å¯ä»¥ä¸ä¸Šä¼ ï¼Œå› ä¸ºå®ƒä»¬åªè¦ä½¿ç”¨ç‰¹å®šçš„å‘½ä»¤æ“ä½œå³å¯æ¢å¤ã€‚</p><p>å®ƒå¢åŠ äº† <code>.gitmodules</code>ï¼Œé‚£å®ƒçš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å® <code>hexojs/hexo-starter</code> æ˜¯é€šè¿‡ Git çš„ Submodule åŠŸèƒ½æ¥ä¸‹è½½ä¸»é¢˜æ¨¡å—ï¼Œæœ¬èº«ä»“åº“å¹¶ä¸å¤‡ä»½ä¸»é¢˜æ–‡ä»¶ã€‚è€ƒè™‘ä¸‹æˆ‘ä»¬éœ€è¦å¦‚ä½•å¤‡ä»½ä¸»é¢˜æ–‡ä»¶ç›®å½•ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼š</p><ol><li>ä¸€ä¸ªæ–¹æ¡ˆæ˜¯å°†å…¶å†…å®¹å…¨éƒ¨ä¸Šä¼ è¿›è¡Œå¤‡ä»½ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åŸä¸»é¢˜çš„æ›´æ–°ä¸ä¼šå½±å“ä½ åŸå…ˆé…ç½®çš„æ•ˆæœã€‚</li><li>å¦ä¸€ä¸ªæ–¹æ¡ˆæ˜¯åƒ <code>hexo-starter</code> ä»“åº“ä¸€æ ·é€šè¿‡ Git çš„ Submodule åŠŸèƒ½æ¥ç®¡ç†ï¼Œè¿™æ ·å¯ä»¥è¿›è¡Œä¸»é¢˜çš„æ›´æ–°ã€‚</li></ol><p>è¿™é‡Œæˆ‘é€‰æ‹©å’Œ Hexo åˆå§‹åŒ–ä»“åº“ä¸€æ ·ä½¿ç”¨ Git å­æ¨¡å—çš„æ–¹å¼è¿›è¡Œä¸»é¢˜çš„å¤‡ä»½å¤„ç†ã€‚ä¸è¿‡é€šè¿‡å­æ¨¡å—ç®¡ç†çš„æ–¹å¼æˆ‘ä»¬æ¢å¤æ—¶ä»…ä¼šåŒæ­¥åˆ° Next ä¸»é¢˜çš„åŸæ–‡ä»¶ï¼Œæ²¡æ³•ç›´æ¥åŒæ­¥æˆ‘ä»¬å¯¹ä¸»é¢˜é…ç½®æ–‡ä»¶æˆ–å…¶ä»–æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æƒé™æäº¤ä¿®æ”¹åˆ° Next ä»“åº“ä¸­ã€‚å› æ­¤æˆ‘åˆ›å»ºäº†äº†ä¸ª <code>themes_custom</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾å¯¹åº”ä¸»é¢˜çš„ä¿®æ”¹çš„å¤‡ä»½ï¼Œè¿™æ ·å­æˆ‘ä»¬åŒæ­¥ä¹‹åï¼Œåªéœ€è¦å¯¹æ¯”ä¸€ä¸‹å†…å®¹æ‰‹åŠ¨æŠŠè¿™äº›é…ç½®åº”ç”¨è¿‡å»å°±å¯ä»¥å¿«é€Ÿå®Œæˆå¯¹ä¸»é¢˜çš„é…ç½®ã€‚</p><p>æœ€ç»ˆå¤‡ä»½æ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scaffolds</span><br><span class="line">source</span><br><span class="line">themes</span><br><span class="line">themes_custom/next</span><br><span class="line">.gitignore</span><br><span class="line">.gitmodules</span><br><span class="line">_config.yml</span><br><span class="line">package.json</span><br></pre></td></tr></table></figure><h2 id="2ã€å…·ä½“æ“ä½œ"><a href="#2ã€å…·ä½“æ“ä½œ" class="headerlink" title="2ã€å…·ä½“æ“ä½œ"></a>2ã€å…·ä½“æ“ä½œ</h2><p>æœ‰äº†æ–¹æ¡ˆä¹‹åï¼Œæˆ‘ä»¬å¤‡ä»½çš„å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><ol><li><p>å…ˆä¿®æ”¹ <code>.gitignore</code> æ–‡ä»¶ï¼ŒæŸ¥çœ‹ä¹‹åç”±äºåŸæ–‡ä»¶å·²ç»å¿½ç•¥äº† <code>public</code> å’Œ <code>node_modules</code> æ–‡ä»¶å¤¹ï¼Œå› æ­¤ä»…éœ€è¦æ·»åŠ  <code>package-lock.json</code> åˆ°å¿½ç•¥æ¸…å•ä¸­ã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥åˆ é™¤ä¸ä½¿ç”¨çš„ä¸»é¢˜ <code>landscape</code> æˆ–è€…æŠŠä¸»é¢˜è·¯å¾„æ·»åŠ åˆ°å¿½ç•¥åˆ—è¡¨ä¸­ã€‚</p></li><li><p>åˆ›å»º <code>themes_custom/next</code> æ–‡ä»¶å¤¹ï¼Œå°†å¯¹ä¸»é¢˜è¿›è¡Œçš„é…ä»¶ä¿®æ”¹çš„æ–‡ä»¶æ‹·è´ä¸€ä»½åˆ°è¿™é‡Œ</p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨æœ¬åœ°åˆ›å»ºå¤‡ä»½ä»“åº“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> blog</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git init</span></span><br><span class="line">å·²åˆå§‹åŒ–ç©ºçš„ Git ä»“åº“äº blog/.git/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git submodule add https://github.com/theme-next/hexo-theme-next.git themes/next</span></span><br><span class="line">æ·»åŠ ä½äº &#x27;themes/next&#x27; çš„ç°å­˜ä»“åº“åˆ°ç´¢å¼•</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add .</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;init blog backup&quot;</span></span></span><br></pre></td></tr></table></figure></li><li><p>å°†å¤‡ä»½å†…å®¹ push åˆ°è¿œç¨‹ä»“åº“çš„å¤‡ä»½åˆ†æ”¯ <code>hexo</code> ä¸Šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -m master hexo</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote add origin https://github.com/Mupceet/mupceet.github.io.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push -u origin hexo:hexo</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œæˆ‘å¯¹åˆ†æ”¯è¿›è¡Œäº†é‡å‘½åä»¥å‡å°‘è®°å¿†è´Ÿæ‹…ã€‚</p></li></ol><p>ç»è¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¤‡ä»½äº†æ‰€æœ‰å¿…è¦çš„æ–‡ä»¶ã€‚åç»­æ›´æ–°åšå®¢ä¹Ÿè¦åŠæ—¶åœ°å°†è¿™äº›æ–‡ä»¶è¿›è¡Œæäº¤å¹¶ä¸Šä¼ å®Œæˆå¤‡ä»½ã€‚</p><h1 id="dvd-æ¢å¤"><a href="#dvd-æ¢å¤" class="headerlink" title=":dvd:æ¢å¤"></a>:dvd:æ¢å¤</h1><p>æœ‰äº†å¤‡ä»½ä¹‹åï¼Œåœ¨å¦ä¸€å°ç”µè„‘ä¸Šåˆ›å»ºåšå®¢ï¼Œæˆ–è€…æ˜¯æ¢å¤å¤‡ä»½æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘ä»¬å¤‡ä»½çš„å†…å®¹è¿›è¡Œæ“ä½œã€‚</p><ol><li><p>ç¯å¢ƒå‡†å¤‡</p><p>å…·ä½“è§<a href="https://www.fomal.cc/posts/e593433d.html">Hexoåšå®¢æ­å»ºåŸºç¡€æ•™ç¨‹(ä¸€) | FomalhautğŸ¥</a></p></li><li><p>å…‹éš†å¤‡ä»½çš„å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> --recursive -b hexo https://github.com/Mupceet/mupceet.github.io.git blog</span></span><br></pre></td></tr></table></figure></li><li><p>ä¸‹è½½ npm ä¾èµ–æ¨¡å—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> blog</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install</span></span><br></pre></td></tr></table></figure></li><li><p>æ¢å¤ä¸»é¢˜é…ç½®</p><p>å°† <code>themes_custom</code> æ–‡ä»¶å¤¹ä¸­å¯¹ä¸»é¢˜çš„é…ç½®çš„ä¿®æ”¹æ¢å¤åˆ°å¯¹åº”çš„ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­ï¼Œè¿™é‡Œå»ºè®®ä½¿ç”¨å¯¹æ¯”çš„æ–¹å¼å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç›´æ¥è¦†ç›–ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸»é¢˜çš„é…ç½®ã€‚</p></li><li><p>å…‹éš†åŸåšå®¢å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> blog</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/Mupceet/mupceet.github.io.git .deploy_git</span></span><br></pre></td></tr></table></figure></li><li><p>æ­£å¸¸æ›´æ–°åšå®¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo g</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"> hexo s</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo d</span></span><br></pre></td></tr></table></figure></li></ol><p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨å¤‡ä»½æ–‡ä»¶æ¢å¤åšå®¢çš„ç¯å¢ƒæ˜¯éå¸¸ç®€å•çš„ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶æ­å»ºå¥½åšå®¢ä¹‹åå¢åŠ ä¸€ä¸ªå¤‡ä»½æ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢å¤‡ä»½ä¸æ¢å¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 7.2-åŸºäºU-Netçš„KITTIé“è·¯åˆ†å‰²</title>
      <link href="/2023/01/04/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A07-2-%E5%9F%BA%E4%BA%8EU-Net%E7%9A%84KITTI%E9%81%93%E8%B7%AF%E5%88%86%E5%89%B2/"/>
      <url>/2023/01/04/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A07-2-%E5%9F%BA%E4%BA%8EU-Net%E7%9A%84KITTI%E9%81%93%E8%B7%AF%E5%88%86%E5%89%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºU-Netçš„KITTIé“è·¯åˆ†å‰²"><a href="#åŸºäºU-Netçš„KITTIé“è·¯åˆ†å‰²" class="headerlink" title="åŸºäºU-Netçš„KITTIé“è·¯åˆ†å‰²"></a>åŸºäºU-Netçš„KITTIé“è·¯åˆ†å‰²</h1><p><a href="https://www.cvlibs.net/datasets/kitti/eval_odometry.php">KITTIæ•°æ®é›†</a>æ˜¯ä¸€ä¸ªè‘—åçš„è‡ªåŠ¨é©¾é©¶æ•°æ®é›†ã€‚å®ƒåŒ…æ‹¬ä¸€æ‰¹å›¾ç‰‡ï¼Œå’Œè¯­ä¹‰åˆ†å‰²ã€å®ä¾‹åˆ†å‰²ç­‰å¤šç§ä»»åŠ¡çš„æ ‡ç­¾ã€‚ä¸‹å›¾å±•ç¤ºäº†KITTIæ•°æ®é›†çš„å…¸å‹æ ·æœ¬ï¼Œåˆ†ä¸º â€™Roadâ€™, â€™Cityâ€™, â€™Residentialâ€™, â€™Campusâ€™ å’Œâ€™Personâ€™äº”ç±»ã€‚åŸå§‹æ•°æ®é‡‡é›†äº2011å¹´çš„5å¤©ï¼Œå…±æœ‰180GBæ•°æ®ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f6e515987621426a8acdc6f67baefe8376044e25e03347159d44d3e74adcd73d" width = "600"  div align=center" width = "800"></center><center><br>å›¾1ï¼šKITTIæ•°æ®é›†æ ·æœ¬</br></center><p>KITTIæ•°æ®é›†ç”±å¾·å›½å¡å°”æ–¯é²å„ç†å·¥å­¦é™¢å’Œä¸°ç”°ç¾å›½æŠ€æœ¯ç ”ç©¶é™¢è”åˆåˆ›åŠï¼Œæ˜¯ç›®å‰å›½é™…ä¸Šæœ€å¤§çš„è‡ªåŠ¨é©¾é©¶åœºæ™¯ä¸‹çš„è®¡ç®—æœºè§†è§‰ç®—æ³•è¯„æµ‹æ•°æ®é›†ã€‚è¯¥æ•°æ®é›†ç”¨äºè¯„æµ‹ç«‹ä½“å›¾åƒ(stereo)ï¼Œå…‰æµ(optical flow)ï¼Œè§†è§‰æµ‹è·(visual odometry)ï¼Œ3Dç‰©ä½“æ£€æµ‹(object detection)å’Œ3Dè·Ÿè¸ª(tracking)ç­‰è®¡ç®—æœºè§†è§‰æŠ€æœ¯åœ¨è½¦è½½ç¯å¢ƒä¸‹çš„æ€§èƒ½ã€‚KITTIåŒ…å«å¸‚åŒºã€ä¹¡æ‘å’Œé«˜é€Ÿå…¬è·¯ç­‰åœºæ™¯é‡‡é›†çš„çœŸå®å›¾åƒæ•°æ®ï¼Œæ¯å¼ å›¾åƒä¸­æœ€å¤šè¾¾15è¾†è½¦å’Œ30ä¸ªè¡Œäººï¼Œè¿˜æœ‰å„ç§ç¨‹åº¦çš„é®æŒ¡ä¸æˆªæ–­ã€‚</p><h2 id="ä¸€ã€æ•°æ®å¤„ç†"><a href="#ä¸€ã€æ•°æ®å¤„ç†" class="headerlink" title="ä¸€ã€æ•°æ®å¤„ç†"></a>ä¸€ã€æ•°æ®å¤„ç†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image <span class="keyword">as</span> PilImage</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br></pre></td></tr></table></figure><h3 id="1ï¼‰è¯»å…¥æ•°æ®"><a href="#1ï¼‰è¯»å…¥æ•°æ®" class="headerlink" title="1ï¼‰è¯»å…¥æ•°æ®"></a>1ï¼‰è¯»å…¥æ•°æ®</h3><p>ä¸‹é¢åˆ†åˆ«å°†å›¾åƒåˆ†å‰²æ‰€éœ€çš„åŸå§‹å›¾åƒä¸æ ‡ç­¾å›¾åƒè¯»å…¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹æ•°æ®é›†</span></span><br><span class="line">!unzip -q -d ./work/data_kitti /home/aistudio/data/data170768/data_kitti.<span class="built_in">zip</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ•°æ®è§£å‹å®Œæˆ&quot;</span>)</span><br></pre></td></tr></table></figure><pre><code>æ•°æ®è§£å‹å®Œæˆ</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–ä¸€ä¸ªè®­ç»ƒå›¾ç‰‡å’Œå¯¹åº”çš„æ ‡ç­¾å›¾åƒå±•ç¤ºä¸€ä¸‹</span></span><br><span class="line">image = np.array(PilImage.<span class="built_in">open</span>(<span class="string">&#x27;work/data_kitti/training/image_2/000163_10.png&#x27;</span>))</span><br><span class="line">label = np.array(PilImage.<span class="built_in">open</span>(<span class="string">&#x27;work/data_kitti/training/semantic_road/000163_10.png&#x27;</span>))</span><br><span class="line">rgb_ = np.array(PilImage.<span class="built_in">open</span>(<span class="string">&#x27;work/data_kitti/training/semantic_rgb/000163_10.png&#x27;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>,<span class="number">5</span>))</span><br><span class="line"><span class="comment"># subplot åœ¨åŒä¸€ç”»é¢ä¸­åˆ›å»ºå’Œæ§åˆ¶å¤šä¸ªå›¾å½¢ä½ç½®</span></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line">plt.imshow(image)</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">plt.imshow(label, <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">plt.imshow(rgb_)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/79.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">train_images_path = <span class="string">&quot;work/data_kitti/training/image_2/&quot;</span></span><br><span class="line">label_images_path = <span class="string">&quot;work/data_kitti/training/semantic_road/&quot;</span></span><br><span class="line">image_count = <span class="built_in">len</span>([</span><br><span class="line">                    os.path.join(train_images_path, image_name)</span><br><span class="line">                    <span class="keyword">for</span> image_name <span class="keyword">in</span> os.listdir(train_images_path) <span class="comment"># listdir è®¿é—®è·¯å¾„ä¸‹æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">                    <span class="keyword">if</span> image_name.endswith(<span class="string">&#x27;.png&#x27;</span>) <span class="comment"># endswith è¿”å›åç¼€</span></span><br><span class="line">                    ])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å›¾åƒæ ·æœ¬çš„æ€»æ•°é‡æ˜¯:&quot;</span>, image_count)</span><br></pre></td></tr></table></figure><pre><code>å›¾åƒæ ·æœ¬çš„æ€»æ•°é‡æ˜¯: 200</code></pre><h3 id="2ï¼‰åˆ’åˆ†æ•°æ®é›†"><a href="#2ï¼‰åˆ’åˆ†æ•°æ®é›†" class="headerlink" title="2ï¼‰åˆ’åˆ†æ•°æ®é›†"></a>2ï¼‰åˆ’åˆ†æ•°æ®é›†</h3><p>å¯¹æ•°æ®é›†è¿›è¡Œå¤„ç†ï¼Œåˆ’åˆ†è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€‚</p><p>æˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯å¯¹åŸå§‹çš„æ•°æ®é›†è¿›è¡Œæ•´ç†ï¼Œå¾—åˆ°<strong>æ•°æ®é›†å’Œæ ‡ç­¾ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«ä¸€ä¸€å¯¹åº”</strong>ï¼Œåœ¨è¿™é‡Œæ˜¯ç”¨äº†ä¸€ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•ï¼ŒæŒ‰ç…§æ–‡ä»¶åç§°è¿›è¡Œæ’åºï¼Œè¿™æ ·å¯ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„æ‰¾åˆ°åŸå§‹æ•°æ®å’Œæ ‡ç­¾çš„å¯¹åº”å…³ç³»ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_sort_images</span>(<span class="params">image_dir, image_type</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å¯¹æ–‡ä»¶å¤¹å†…çš„å›¾åƒè¿›è¡ŒæŒ‰ç…§æ–‡ä»¶åæ’åº</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    files = []</span><br><span class="line">    <span class="keyword">for</span> image_name <span class="keyword">in</span> os.listdir(image_dir):</span><br><span class="line">        <span class="keyword">if</span> image_name.endswith(<span class="string">&#x27;.&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(image_type)) <span class="keyword">and</span> <span class="keyword">not</span> image_name.startswith(<span class="string">&#x27;.&#x27;</span>):</span><br><span class="line">            files.append(os.path.join(image_dir, image_name))</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sorted</span>(files)</span><br><span class="line"></span><br><span class="line">images = _sort_images(train_images_path, <span class="string">&#x27;png&#x27;</span>)</span><br><span class="line">labels = _sort_images(label_images_path, <span class="string">&#x27;png&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬å°†å›¾ç‰‡å’Œæ ‡ç­¾ä¸€ä¸€å¯¹åº”å†™å…¥æ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">eval_num = <span class="built_in">int</span>(image_count * <span class="number">0.15</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write_file</span>(<span class="params">mode, images, labels</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;work/data_kitti/&#123;&#125;.txt&#x27;</span>.<span class="built_in">format</span>(mode), <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(images)):</span><br><span class="line">            f.write(<span class="string">&#x27;&#123;&#125;\t&#123;&#125;\n&#x27;</span>.<span class="built_in">format</span>(images[i], labels[i]))</span><br><span class="line"></span><br><span class="line">write_file(<span class="string">&#x27;train&#x27;</span>, images[:-eval_num], labels[:-eval_num])</span><br><span class="line">write_file(<span class="string">&#x27;test&#x27;</span>, images[-eval_num:], labels[-eval_num:])</span><br><span class="line">write_file(<span class="string">&#x27;predict&#x27;</span>, images[-eval_num:], labels[-eval_num:])</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡ç»§æ‰¿é«˜çº§APIæä¾›çš„Datasetç±»ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªåˆ†å‰²æ•°æ®é›†ç±»PetDatasetã€‚ </p><ul><li>é€šè¿‡å®ç°_load_imgå‡½æ•°ï¼Œä½¿ç”¨ç»Ÿä¸€çš„å›¾åƒå¤„ç†æ¥å£å°è£…å›¾åƒå¤„ç†ç­–ç•¥ï¼Œç”¨äºè§„æ•´å›¾åƒå¤§å°å’Œé€šé“ï¼›</li><li>é€šè¿‡å®ç°__getitem__å‡½æ•°ï¼Œåˆ†åˆ«è¯»å…¥è®­ç»ƒå›¾ç‰‡å’Œæ ‡ç­¾ï¼ŒåŒæ—¶å¯¹è¾“å…¥å›¾åƒçš„RGBä¸‰ä¸ªé€šé“çš„å€¼åˆ†åˆ«åšæ ‡å‡†åŒ–ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> transforms <span class="keyword">as</span> T</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PetDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ•°æ®é›†å®šä¹‰</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, mode=<span class="string">&#x27;train&#x27;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.image_size = IMAGE_SIZE</span><br><span class="line">        self.mode = mode.lower()</span><br><span class="line">        <span class="keyword">assert</span> self.mode <span class="keyword">in</span> [<span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;predict&#x27;</span>], \</span><br><span class="line">        <span class="string">&quot;mode should be &#x27;train&#x27; or &#x27;test&#x27; or &#x27;predict&#x27;, but got &#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.mode)</span><br><span class="line">        self.train_images = []</span><br><span class="line">        self.label_images = []</span><br><span class="line">        <span class="comment"># è¯»å…¥è®­ç»ƒå›¾ç‰‡å’Œè®­ç»ƒæ ‡ç­¾</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;work/data_kitti/&#123;&#125;.txt&#x27;</span>.<span class="built_in">format</span>(self.mode), <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">                image, label = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">                self.train_images.append(image)</span><br><span class="line">                self.label_images.append(label)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_load_img</span>(<span class="params">self, path, color_mode=<span class="string">&#x27;rgb&#x27;</span>, transforms=[]</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ç»Ÿä¸€çš„å›¾åƒå¤„ç†æ¥å£å°è£…ï¼Œç”¨äºè§„æ•´å›¾åƒå¤§å°å’Œé€šé“</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            img = PilImage.<span class="built_in">open</span>(io.BytesIO(f.read()))</span><br><span class="line">            <span class="comment"># img.convert ç”¨ä»¥æŒ‡å®šä¸€ç§è‰²å½©æ¨¡å¼</span></span><br><span class="line">            <span class="keyword">if</span> color_mode == <span class="string">&#x27;grayscale&#x27;</span>:</span><br><span class="line">                <span class="keyword">if</span> img.mode <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;I;16&#x27;</span>, <span class="string">&#x27;I&#x27;</span>):</span><br><span class="line">                    img = img.convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">            <span class="keyword">elif</span> color_mode == <span class="string">&#x27;rgba&#x27;</span>:</span><br><span class="line">                <span class="keyword">if</span> img.mode != <span class="string">&#x27;RGBA&#x27;</span>:</span><br><span class="line">                    img = img.convert(<span class="string">&#x27;RGBA&#x27;</span>)</span><br><span class="line">            <span class="keyword">elif</span> color_mode == <span class="string">&#x27;rgb&#x27;</span>:</span><br><span class="line">                <span class="keyword">if</span> img.mode != <span class="string">&#x27;RGB&#x27;</span>:</span><br><span class="line">                    img = img.convert(<span class="string">&#x27;RGB&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(<span class="string">&#x27;color_mode must be &quot;grayscale&quot;, &quot;rgb&quot;, or &quot;rgba&quot;&#x27;</span>)</span><br><span class="line">            <span class="comment"># è¿”å›ç»„åˆçš„å›¾åƒå¤„ç†ç­–ç•¥</span></span><br><span class="line">            <span class="keyword">return</span> T.Compose([T.Resize(self.image_size)] + transforms)(img)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è¿”å› image, label</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        train_image = self._load_img(</span><br><span class="line">                            self.train_images[idx], </span><br><span class="line">                            transforms=[T.Transpose(), T.Normalize(mean=<span class="number">127.5</span>, std=<span class="number">127.5</span>)]</span><br><span class="line">                            ) <span class="comment"># è°ƒæ•´ç»´åº¦ï¼ŒRGBæ ‡å‡†åŒ–</span></span><br><span class="line">        label_image = self._load_img(</span><br><span class="line">                            self.label_images[idx], </span><br><span class="line">                            color_mode=<span class="string">&#x27;grayscale&#x27;</span>,</span><br><span class="line">                            transforms=[T.Grayscale()]</span><br><span class="line">                            ) <span class="comment"># æŒ‡å®šä¸€ç§è‰²å½©æ¨¡å¼ï¼Œå°†å›¾åƒè½¬æ¢ä¸ºç°åº¦</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment"># è¿”å›image, label</span></span><br><span class="line">        train_image = np.array(train_image, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">        label_image = np.array(label_image, dtype=<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line">        <span class="comment"># print(label_image)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> train_image, label_image</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è¿”å›æ•°æ®é›†æ€»æ•°</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.train_images)</span><br></pre></td></tr></table></figure><h2 id="äºŒã€U-Net"><a href="#äºŒã€U-Net" class="headerlink" title="äºŒã€U-Net"></a>äºŒã€U-Net</h2><p>U-Netæå‡ºçš„åˆè¡·æ˜¯ä¸ºäº†è§£å†³åŒ»å­¦å›¾åƒåˆ†å‰²çš„é—®é¢˜ï¼Œå®ƒä»¥ä¸€ç§Uå‹çš„ç½‘ç»œç»“æ„æ¥è·å–ä¸Šä¸‹æ–‡çš„ä¿¡æ¯å’Œä½ç½®ä¿¡æ¯ã€‚<br>U-Netå¯ä»¥è¯´æ˜¯æœ€å¸¸ç”¨ã€æœ€ç®€å•çš„ä¸€ç§åˆ†å‰²æ¨¡å‹äº†ï¼Œå®ƒç®€å•ã€é«˜æ•ˆã€æ˜“æ‡‚ã€å®¹æ˜“æ„å»ºã€å¯ä»¥ä»å°æ•°æ®é›†ä¸­è®­ç»ƒã€‚åœ¨U-Netä¹‹å‰ï¼Œåˆ™æ˜¯æ›´è€çš„FCNï¼ˆå…¨å·ç§¯ç¥ç»ç½‘ç»œï¼‰ç½‘ç»œï¼Œä¸è¿‡FCNç½‘ç»œçš„å‡†ç¡®åº¦è¾ƒä½ï¼Œä¸æ¯”U-Netå¥½ç”¨ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/82715fe9c1f242a08b16439f910c188bd5a1cf845d0847579635075d606eddc4" width = "600"  div align=center" width = "800"></center><center><br>å›¾2ï¼šU-Net</br></center><p>æˆ‘ä»¬å¯ä»¥æ•´ç†ä¸€ä¸‹U-Netç½‘ç»œçš„ç»“æ„ï¼š</p><ol><li>å…ˆå¯¹å›¾ç‰‡è¿›è¡Œå·ç§¯å’Œæ± åŒ–ï¼Œåœ¨U-Netè®ºæ–‡ä¸­æ˜¯æ± åŒ–4æ¬¡ï¼Œæ¯”æ–¹è¯´ä¸€å¼€å§‹çš„å›¾ç‰‡æ˜¯256x256çš„ï¼Œé‚£ä¹ˆå°±ä¼šå˜æˆ 128x128ï¼Œ64x64ï¼Œ32x32ï¼Œ16x16 å››ä¸ªä¸åŒå°ºå¯¸çš„ç‰¹å¾ï¼›</li><li>ç„¶åæˆ‘ä»¬å¯¹16x16çš„ç‰¹å¾å›¾åšä¸Šé‡‡æ ·æˆ–è€…åå·ç§¯ï¼Œå¾—åˆ°32x32çš„ç‰¹å¾å›¾ï¼Œè¿™ä¸ª32x32çš„ç‰¹å¾å›¾ä¸ä¹‹å‰çš„32x32çš„ç‰¹å¾å›¾è¿›è¡Œé€šé“ä¸Šçš„æ‹¼æ¥concatï¼›</li><li>ç„¶åå†å¯¹æ‹¼æ¥ä¹‹åçš„ç‰¹å¾å›¾åšå·ç§¯å’Œä¸Šé‡‡æ ·ï¼Œå¾—åˆ°64x64çš„ç‰¹å¾å›¾ï¼Œå†ä¸ä¹‹å‰çš„64x64çš„ç‰¹å¾æ‹¼æ¥ï¼Œå·ç§¯ï¼Œå†ä¸Šé‡‡æ ·ï¼›</li><li>ç»è¿‡å››æ¬¡ä¸Šé‡‡æ ·å¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸è¾“å…¥å›¾åƒå°ºå¯¸ç›¸åŒçš„256x256çš„é¢„æµ‹ç»“æœã€‚</li></ol><p>U-Netæœ‰æ•ˆçš„ç¼“è§£äº†FCNå¸¦æ¥çš„é—®é¢˜ï¼šé€šè¿‡åå·ç§¯å¾—åˆ°çš„æ›´å¤§çš„å°ºå¯¸çš„ç‰¹å¾å›¾çš„è¾¹ç¼˜ï¼Œæ˜¯ç¼ºå°‘ä¿¡æ¯çš„ï¼Œæ¯•ç«Ÿæ¯ä¸€æ¬¡ä¸‹é‡‡æ ·æç‚¼ç‰¹å¾çš„åŒæ—¶ï¼Œä¹Ÿå¿…ç„¶ä¼šæŸå¤±ä¸€äº›è¾¹ç¼˜ç‰¹å¾ï¼Œè€Œå¤±å»çš„ç‰¹å¾å¹¶ä¸èƒ½ä»ä¸Šé‡‡æ ·ä¸­æ‰¾å›ï¼Œå› æ­¤é€šè¿‡ç‰¹å¾çš„æ‹¼æ¥ï¼Œæ¥å®ç°è¾¹ç¼˜ç‰¹å¾çš„ä¸€ä¸ªæ‰¾å›ã€‚</p><h3 id="1ï¼‰å»ºç«‹æ¨¡å‹"><a href="#1ï¼‰å»ºç«‹æ¨¡å‹" class="headerlink" title="1ï¼‰å»ºç«‹æ¨¡å‹"></a><strong>1ï¼‰å»ºç«‹æ¨¡å‹</strong></h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰è®­ç»ƒæ•°æ®æ‰€éœ€è¦çš„ç½‘ç»œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line">paddle.set_device(<span class="string">&#x27;gpu&#x27;</span>)</span><br><span class="line">paddle.__version__</span><br></pre></td></tr></table></figure><pre><code>&#39;2.3.2&#39;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DoubleConv</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä¸¤æ¬¡å·ç§¯æ¨¡å—:</span></span><br><span class="line"><span class="string">    (convolution =&gt; [BN] =&gt; ReLU) * 2</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_channels, out_channels</span>):</span><br><span class="line">        <span class="built_in">super</span>(DoubleConv, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.double_conv = paddle.nn.Sequential(</span><br><span class="line">            paddle.nn.Conv2D(in_channels, out_channels, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">            paddle.nn.BatchNorm2D(out_channels),</span><br><span class="line">            paddle.nn.ReLU(),</span><br><span class="line">            paddle.nn.Conv2D(out_channels, out_channels, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">            paddle.nn.BatchNorm2D(out_channels),</span><br><span class="line">            paddle.nn.ReLU()</span><br><span class="line">        )</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="keyword">return</span> self.double_conv(x)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Down</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä¸‹é‡‡æ ·:</span></span><br><span class="line"><span class="string">    maxpool + DoubleConv</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_channels, out_channels</span>):</span><br><span class="line">        <span class="built_in">super</span>(Down, self).__init__()</span><br><span class="line">        self.maxpool_conv = paddle.nn.Sequential(</span><br><span class="line">            paddle.nn.MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>, padding=<span class="number">0</span>),</span><br><span class="line">            DoubleConv(in_channels, out_channels)</span><br><span class="line">        )</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="keyword">return</span> self.maxpool_conv(x)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Up</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä¸Šé‡‡æ ·:</span></span><br><span class="line"><span class="string">    Upsample + DoubleConv</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_channels, out_channels, bilinear=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(Up, self).__init__()</span><br><span class="line">        <span class="keyword">if</span> bilinear: <span class="comment"># åŒçº¿æ€§æ’å€¼</span></span><br><span class="line">            <span class="comment"># paddle.nn.Upsampleï¼šç”¨äºè°ƒæ•´ä¸€ä¸ª batch ä¸­å›¾ç‰‡çš„å¤§å°</span></span><br><span class="line">            self.up = paddle.nn.Upsample(scale_factor=<span class="number">2</span>, mode=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>: <span class="comment"># äºŒç»´è½¬ç½®å·ç§¯</span></span><br><span class="line">            self.up = paddle.nn.Conv2DTranspose(in_channels // <span class="number">2</span>, in_channels // <span class="number">2</span>, kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line">        self.conv = DoubleConv(in_channels, out_channels)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x1, x2</span>):</span><br><span class="line">        x1 = self.up(x1)</span><br><span class="line">        <span class="comment"># print(x2.shape, x1.shape)</span></span><br><span class="line">        <span class="comment"># print(x2.shape[2] - x1.shape[2])</span></span><br><span class="line">        <span class="comment"># æ±‚åŸå›¾å’Œä¸Šé‡‡æ ·å›¾çš„å·®å€¼</span></span><br><span class="line">        diffY = paddle.to_tensor([x2.shape[<span class="number">2</span>] - x1.shape[<span class="number">2</span>]])</span><br><span class="line">        diffX = paddle.to_tensor([x2.shape[<span class="number">3</span>] - x1.shape[<span class="number">3</span>]])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># paddle.vision.transforms.Padï¼šä½¿ç”¨æ±‚è§£çš„å·®å€¼//2ï¼Œå¯¹è¾“å…¥å›¾åƒè¿›è¡Œå¡«å……</span></span><br><span class="line">        x1 = F.pad(x1, [diffX // <span class="number">2</span>, diffX - diffX // <span class="number">2</span>, diffY // <span class="number">2</span>, diffY - diffY // <span class="number">2</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¯¹ä¿®æ”¹å®Œå°ºå¯¸çš„å›¾ç‰‡è¿›è¡Œè”ç»“</span></span><br><span class="line">        x = paddle.concat([x2, x1], axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> self.conv(x)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æ¨¡å‹çš„æ•´ä½“ç»“æ„ï¼ŒåŒæ—¶æ‰“å°æ¨¡å‹å„ä¸ªå±‚çš„è¾“å‡ºå‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ•´ä½“ç»“æ„</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">U_Net</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes, bilinear=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(U_Net, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.num_classes = num_classes</span><br><span class="line">        self.bilinear = bilinear</span><br><span class="line">        self.inc = DoubleConv(<span class="number">3</span>, <span class="number">64</span>)</span><br><span class="line">        self.down1 = Down(<span class="number">64</span>, <span class="number">128</span>)</span><br><span class="line">        self.down2 = Down(<span class="number">128</span>, <span class="number">256</span>)</span><br><span class="line">        self.down3 = Down(<span class="number">256</span>, <span class="number">512</span>)</span><br><span class="line">        self.down4 = Down(<span class="number">512</span>, <span class="number">512</span>)</span><br><span class="line">        self.up1 = Up(<span class="number">1024</span>, <span class="number">256</span>, bilinear)</span><br><span class="line">        self.up2 = Up(<span class="number">512</span>, <span class="number">128</span>, bilinear)</span><br><span class="line">        self.up3 = Up(<span class="number">256</span>, <span class="number">64</span>, bilinear)</span><br><span class="line">        self.up4 = Up(<span class="number">128</span>, <span class="number">64</span>, bilinear)</span><br><span class="line">        self.output_conv = paddle.nn.Conv2D(<span class="number">64</span>, num_classes, kernel_size=<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        x1 = self.inc(inputs)</span><br><span class="line">        x2 = self.down1(x1)</span><br><span class="line">        x3 = self.down2(x2)</span><br><span class="line">        x4 = self.down3(x3)</span><br><span class="line">        x5 = self.down4(x4)</span><br><span class="line">        x = self.up1(x5, x4)</span><br><span class="line">        x = self.up2(x, x3)</span><br><span class="line">        x = self.up3(x, x2)</span><br><span class="line">        x = self.up4(x, x1)</span><br><span class="line">        y = self.output_conv(x)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ‰“å°æ¨¡å‹å‚æ•°</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">num_classes = <span class="number">2</span></span><br><span class="line">network = U_Net(num_classes)</span><br><span class="line">model = paddle.Model(network)</span><br><span class="line"><span class="comment"># æ¨¡å‹å¯è§†åŒ–</span></span><br><span class="line">IMAGE_SIZE = (<span class="number">160</span>, <span class="number">160</span>)</span><br><span class="line">model.summary((<span class="number">1</span>, <span class="number">3</span>, <span class="number">160</span>, <span class="number">160</span>))</span><br></pre></td></tr></table></figure><pre><code>&#123;&#39;total_params&#39;: 13403330, &#39;trainable_params&#39;: 13387458&#125;</code></pre><h3 id="2ï¼‰è®­ç»ƒæ¨¡å‹"><a href="#2ï¼‰è®­ç»ƒæ¨¡å‹" class="headerlink" title="2ï¼‰è®­ç»ƒæ¨¡å‹"></a><strong>2ï¼‰è®­ç»ƒæ¨¡å‹</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">train_dataset = PetDataset(mode=<span class="string">&#x27;train&#x27;</span>) <span class="comment"># è®­ç»ƒæ•°æ®é›†</span></span><br><span class="line">val_dataset = PetDataset(mode=<span class="string">&#x27;test&#x27;</span>) <span class="comment"># éªŒè¯æ•°æ®é›†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹³æ–¹æ¢¯åº¦çš„ç§»åŠ¨å¹³å‡å€¼</span></span><br><span class="line">optim = paddle.optimizer.RMSProp(</span><br><span class="line">                                learning_rate=<span class="number">0.001</span>, </span><br><span class="line">                                rho=<span class="number">0.9</span>, </span><br><span class="line">                                momentum=<span class="number">0.0</span>, </span><br><span class="line">                                epsilon=<span class="number">1e-07</span>, </span><br><span class="line">                                parameters=model.parameters()</span><br><span class="line">                                )</span><br><span class="line"></span><br><span class="line">model.prepare(optim, paddle.nn.CrossEntropyLoss(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">model.fit(</span><br><span class="line">        train_dataset, </span><br><span class="line">        val_dataset, </span><br><span class="line">        epochs=<span class="number">5</span>, </span><br><span class="line">        batch_size=<span class="number">16</span>, </span><br><span class="line">        verbose=<span class="number">1</span>, <span class="comment"># æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line">        save_dir=<span class="string">&#x27;./model/UNet_1&#x27;</span>, </span><br><span class="line">        save_freq=<span class="number">1</span> <span class="comment"># ä¿å­˜æ¯ä¸€æ­¥æ¨¡å‹çš„å‚æ•°</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">model_path = <span class="string">&quot;./model/UNet_1&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># load</span></span><br><span class="line"><span class="comment"># layer_state_dict = paddle.load(&quot;linear_net.pdparams&quot;)</span></span><br><span class="line"><span class="comment"># opt_state_dict = paddle.load(&quot;opt.pdopt&quot;)</span></span><br><span class="line"><span class="comment"># layer.set_state_dict(layer_state_dict)</span></span><br><span class="line"><span class="comment"># opt.set_state_dict(opt_state_dict)</span></span><br></pre></td></tr></table></figure><h3 id="3ï¼‰è¯„ä¼°æ¨¡å‹"><a href="#3ï¼‰è¯„ä¼°æ¨¡å‹" class="headerlink" title="3ï¼‰è¯„ä¼°æ¨¡å‹"></a><strong>3ï¼‰è¯„ä¼°æ¨¡å‹</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.evaluate(val_dataset, batch_size=<span class="number">64</span>, verbose=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><pre><code>&#123;&#39;loss&#39;: [0.1808225]&#125;</code></pre><h3 id="4ï¼‰æ¨¡å‹é¢„æµ‹ä¸å¯è§†åŒ–"><a href="#4ï¼‰æ¨¡å‹é¢„æµ‹ä¸å¯è§†åŒ–" class="headerlink" title="4ï¼‰æ¨¡å‹é¢„æµ‹ä¸å¯è§†åŒ–"></a><strong>4ï¼‰æ¨¡å‹é¢„æµ‹ä¸å¯è§†åŒ–</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">diceCoeff</span>(<span class="params">preds, gts, eps=<span class="number">1e-5</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; </span></span><br><span class="line"><span class="string">    å›¾åƒåˆ†å‰²çš„DiceæŸå¤±ï¼š</span></span><br><span class="line"><span class="string">    dice = (2 * (pred âˆ© gt)) / (pred âˆª gt)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># å°†é¢„æµ‹ç»“æœä¸çœŸå®ç»“æœåˆ†åˆ«éå†å‡ºæ¥ï¼Œå¹¶åœ¨æ‰¹é‡ç»´ä¸Šè”ç»“</span></span><br><span class="line">    pred = np.concatenate([np.expand_dims(pred,<span class="number">0</span>) <span class="keyword">for</span> pred <span class="keyword">in</span> preds], axis=<span class="number">0</span>)</span><br><span class="line">    gt = np.concatenate([np.expand_dims(gt,<span class="number">0</span>) <span class="keyword">for</span> gt <span class="keyword">in</span> gts], axis=<span class="number">0</span>)</span><br><span class="line">    c = data.shape[<span class="number">2</span>] <span class="comment"># é€šé“æ•°</span></span><br><span class="line">    num = pred.shape[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># æ”¹å˜Tensorçš„å½¢çŠ¶</span></span><br><span class="line">    pred_flat = pred.reshape(num, -<span class="number">1</span>)</span><br><span class="line">    gt_flat = gt.reshape(num, -<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    eval_results = <span class="number">0</span>    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, c):</span><br><span class="line">        unionset = np.<span class="built_in">sum</span>(pred_flat==i, <span class="number">1</span>) + np.<span class="built_in">sum</span>(gt_flat==i, <span class="number">1</span>) <span class="comment"># å¹¶é›†</span></span><br><span class="line">        pred_tmp, gt_tmp = pred_flat, gt_flat</span><br><span class="line">        pred_tmp[pred_tmp==i]=<span class="number">1</span></span><br><span class="line">        pred_tmp[pred_tmp!=i]=<span class="number">0</span></span><br><span class="line">        gt_tmp[gt_tmp==i]=<span class="number">1</span></span><br><span class="line">        gt_tmp[gt_tmp!=i]=<span class="number">0</span></span><br><span class="line">        intersection = np.<span class="built_in">sum</span>(pred_tmp * gt_tmp, <span class="number">1</span>) <span class="comment"># äº¤é›†--&gt; è®¡æ•°æ¯”è¾ƒç»“æœä¸º1çš„</span></span><br><span class="line">        eval_results +=  (<span class="number">2</span> * intersection + eps) / (unionset + eps)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> eval_results/(c-<span class="number">1</span>)/num</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">predict_dataset = PetDataset(mode=<span class="string">&#x27;predict&#x27;</span>)</span><br><span class="line">predict_results = model.predict(predict_dataset)</span><br><span class="line"><span class="comment"># è¯»å–1000ä¸ªé¢„æµ‹ç»“æœä¸­çš„ç¬¬ä¸€å¼ å›¾ç‰‡çš„åˆ†å‰²ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">print</span>(predict_results[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>].shape)</span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">7</span>))</span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">mask_idx = <span class="number">0</span></span><br><span class="line">pred_list = []</span><br><span class="line">gt_list = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;work/data_kitti/predict.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">        image_path, label_path = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        resize_t = T.Compose([ T.Resize(IMAGE_SIZE)])</span><br><span class="line">        image = resize_t(PilImage.<span class="built_in">open</span>(image_path))</span><br><span class="line">        label = resize_t(PilImage.<span class="built_in">open</span>(label_path))</span><br><span class="line">        image = np.array(image).astype(<span class="string">&#x27;uint8&#x27;</span>)</span><br><span class="line">        label = np.array(label).astype(<span class="string">&#x27;uint8&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">8</span>: </span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ¨¡å‹åªæœ‰ä¸€ä¸ªè¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡predict_results[0]æ¥å–å‡º1000ä¸ªé¢„æµ‹çš„ç»“æœ</span></span><br><span class="line">        <span class="comment"># æ˜ å°„åŸå§‹å›¾ç‰‡çš„indexæ¥å–å‡ºé¢„æµ‹ç»“æœï¼Œæå–maskè¿›è¡Œå±•ç¤º</span></span><br><span class="line">        <span class="comment"># (2, 160, 160)--&gt;(160, 160, 2)</span></span><br><span class="line">        data = predict_results[<span class="number">0</span>][mask_idx][<span class="number">0</span>].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>))</span><br><span class="line">        mask = np.argmax(data, axis=-<span class="number">1</span>)</span><br><span class="line">        pred_list.append(mask)</span><br><span class="line">        gt_list.append(label)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è¶Šæ¥è¿‘1ï¼Œæ•ˆæœè¶Šå¥½</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;diceæŒ‡æ ‡ç»“æœï¼š&#x27;</span>, diceCoeff(pred_list, gt_list))</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># subplot(è¡Œæ•°ï¼Œåˆ—æ•°ï¼Œä½æ•°)</span></span><br><span class="line">        <span class="comment"># ç»˜åˆ¶åŸå›¾</span></span><br><span class="line">        plt.subplot(<span class="number">3</span>, <span class="number">3</span>, i + <span class="number">1</span>)</span><br><span class="line">        plt.imshow(image)</span><br><span class="line">        plt.title(<span class="string">&#x27;Input Image&#x27;</span>)</span><br><span class="line">        plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">        <span class="comment"># ç»˜åˆ¶æ ‡ç­¾</span></span><br><span class="line">        plt.subplot(<span class="number">3</span>, <span class="number">3</span>, i + <span class="number">2</span>)</span><br><span class="line">        plt.imshow(label, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">        plt.title(<span class="string">&#x27;Label&#x27;</span>)</span><br><span class="line">        plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">        <span class="comment"># ç»˜åˆ¶é¢„æµ‹å›¾</span></span><br><span class="line">        plt.subplot(<span class="number">3</span>, <span class="number">3</span>, i + <span class="number">3</span>)</span><br><span class="line">        plt.imshow(mask.astype(<span class="string">&#x27;uint8&#x27;</span>), cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">        plt.title(<span class="string">&#x27;Predict&#x27;</span>)</span><br><span class="line">        plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line"></span><br><span class="line">        i += <span class="number">3</span></span><br><span class="line">        mask_idx += <span class="number">1</span></span><br><span class="line">        pred_list=[]</span><br><span class="line">        gt_list=[]</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>Predict begin...step 30/30 [==============================] - 25ms/step        Predict samples: 30(2, 160, 160)diceæŒ‡æ ‡ç»“æœï¼š [0.79124088]diceæŒ‡æ ‡ç»“æœï¼š [0.70802263]diceæŒ‡æ ‡ç»“æœï¼š [0.73505523]</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/80.png" alt="png"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ é«˜çº§_è®¡ç®—æœºè§†è§‰ä¹‹å›¾åƒåˆ†å‰² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 7.1-å›¾åƒåˆ†å‰²ä»»åŠ¡çš„å®ç°</title>
      <link href="/2023/01/04/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A07-1-%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2023/01/04/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A07-1-%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å›¾åƒåˆ†å‰²"><a href="#ä¸€ã€å›¾åƒåˆ†å‰²" class="headerlink" title="ä¸€ã€å›¾åƒåˆ†å‰²"></a>ä¸€ã€å›¾åƒåˆ†å‰²</h1><p>:label:<code>sec_semantic_segmentation</code></p><p><strong>å›¾åƒåˆ†å‰²ï¼ˆimage segmentationï¼‰</strong> ä»»åŠ¡çš„å®šä¹‰æ˜¯ï¼šæ ¹æ®æŸäº›è§„åˆ™å°†å›¾ç‰‡åˆ†æˆè‹¥å¹²ä¸ªç‰¹å®šçš„ã€å…·æœ‰ç‹¬ç‰¹æ€§è´¨çš„åŒºåŸŸï¼Œå¹¶æå‡ºæ„Ÿå…´è¶£ç›®æ ‡çš„æŠ€æœ¯å’Œè¿‡ç¨‹ã€‚ç›®å‰å›¾åƒåˆ†å‰²ä»»åŠ¡å‘å±•å‡ºäº†ä»¥ä¸‹å‡ ä¸ªå­é¢†åŸŸï¼š<strong>è¯­ä¹‰åˆ†å‰²ï¼ˆsemantic segmentationï¼‰</strong>ã€<strong>å®ä¾‹åˆ†å‰²ï¼ˆinstance segmentationï¼‰</strong> ä»¥åŠ2018å¹´å…´èµ·çš„æ–°é¢†åŸŸ<strong>å…¨æ™¯åˆ†å‰²ï¼ˆpanoptic segmentationï¼‰</strong>ã€‚</p><p>è€Œæƒ³è¦ç†æ¸…ä¸‰ä¸ªå­é¢†åŸŸçš„åŒºåˆ«å°±ä¸å¾—ä¸æåˆ°å…³äºå›¾åƒåˆ†å‰²ä¸­ things å’Œ stuff çš„åŒºåˆ«ï¼šå›¾åƒä¸­çš„å†…å®¹å¯ä»¥æŒ‰ç…§æ˜¯å¦æœ‰å›ºå®šå½¢çŠ¶åˆ†ä¸º things ç±»åˆ«å’Œ stuff ç±»åˆ«ï¼Œå…¶ä¸­ï¼Œäººï¼Œè½¦ç­‰æœ‰å›ºå®šå½¢çŠ¶çš„ç‰©ä½“å±äº things ç±»åˆ«ï¼ˆå¯æ•°åè¯é€šå¸¸å±äº thingsï¼‰ï¼›å¤©ç©ºï¼Œè‰åœ°ç­‰æ²¡æœ‰å›ºå®šå½¢çŠ¶çš„ç‰©ä½“å±äº stuff ç±»åˆ«ï¼ˆä¸å¯æ•°åè¯å±äº stuffï¼‰ã€‚</p><p>è¯­ä¹‰åˆ†å‰²æ›´æ³¨é‡ã€Œç±»åˆ«ä¹‹é—´çš„åŒºåˆ†ã€ï¼Œè€Œå®ä¾‹åˆ†å‰²æ›´æ³¨é‡ã€Œä¸ªä½“ä¹‹é—´çš„åŒºåˆ†ã€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¯­ä¹‰åˆ†å‰²ä¼šé‡ç‚¹å°†å‰æ™¯é‡Œçš„äººç¾¤å’ŒèƒŒæ™¯é‡Œæ ‘æœ¨ã€å¤©ç©ºå’Œè‰åœ°åˆ†å‰²å¼€ï¼Œä½†æ˜¯å®ƒä¸åŒºåˆ†äººç¾¤çš„å•ç‹¬ä¸ªä½“ï¼Œå¦‚å›¾ä¸­çš„äººå…¨éƒ¨æ ‡è®°ä¸ºçº¢è‰²ï¼Œå¯¼è‡´å³è¾¹é»„è‰²æ¡†ä¸­çš„äººæ— æ³•è¾¨åˆ«æ˜¯ä¸€ä¸ªäººè¿˜æ˜¯ä¸åŒçš„äººï¼›è€Œå®ä¾‹åˆ†å‰²ä¼šé‡ç‚¹å°†äººç¾¤é‡Œçš„æ¯ä¸€ä¸ªäººåˆ†å‰²å¼€ï¼Œä½†æ˜¯ä¸åœ¨ä¹è‰åœ°ã€æ ‘æœ¨å’Œå¤©ç©ºçš„åˆ†å‰²ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/dab09d5c8bec4632801d73dfde33b2f34aa54a394edd43b2b9003d7463af1ee2" width = "800"  div align=center" width = "800"></center><center><br>å›¾1ï¼šå›¾åƒåˆ†å‰²ä¸åŒçš„é¢†åŸŸ</br></center><p><br></br></p><p>å…¨æ™¯åˆ†å‰²å¯ä»¥è¯´æ˜¯è¯­ä¹‰åˆ†å‰²å’Œå®ä¾‹åˆ†å‰²çš„ç»“åˆï¼Œæ¯ä¸ª stuff ç±»åˆ«ä¸ things ç±»åˆ«éƒ½è¢«åˆ†å‰²å¼€ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œthings ç±»åˆ«çš„ä¸åŒä¸ªä½“ä¹Ÿè¢«å½¼æ­¤åˆ†å‰²å¼€äº†ã€‚</p><h2 id="è¯­ä¹‰åˆ†å‰²"><a href="#è¯­ä¹‰åˆ†å‰²" class="headerlink" title="è¯­ä¹‰åˆ†å‰²"></a><strong>è¯­ä¹‰åˆ†å‰²</strong></h2><p>åœ¨ä¹‹å‰è®¨è®ºçš„ç›®æ ‡æ£€æµ‹é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨æ–¹å½¢è¾¹ç•Œæ¡†æ¥æ ‡æ³¨å’Œé¢„æµ‹å›¾åƒä¸­çš„ç›®æ ‡ã€‚æœ¬èŠ‚å°†æ¢è®¨è¯­ä¹‰åˆ†å‰²é—®é¢˜ï¼Œå®ƒé‡ç‚¹å…³æ³¨äºå¦‚ä½•å°†å›¾åƒåˆ†å‰²æˆå±äºä¸åŒè¯­ä¹‰ç±»åˆ«çš„åŒºåŸŸã€‚ä¸ç›®æ ‡æ£€æµ‹ä¸åŒï¼Œè¯­ä¹‰åˆ†å‰²å¯ä»¥è¯†åˆ«å¹¶ç†è§£å›¾åƒä¸­æ¯ä¸€ä¸ª<strong>åƒç´ </strong>çš„å†…å®¹ï¼šå…¶è¯­ä¹‰åŒºåŸŸçš„æ ‡æ³¨å’Œé¢„æµ‹æ˜¯åƒç´ çº§çš„ã€‚</p><p>è¯­ä¹‰åˆ†å‰²æä¾›æœ‰å…³é“è·¯ä¸Šè‡ªç”±ç©ºé—´çš„ä¿¡æ¯ï¼Œä»¥åŠæ£€æµ‹è½¦é“æ ‡è®°å’Œäº¤é€šæ ‡å¿—ç­‰ä¿¡æ¯ã€‚ </p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/320c215536fe4f7489796ea3adffd3f1910171e2ff1b422eb24382d36e5e43b2" width = "600"  div align=center" width = "800"></center><center><br>å›¾2ï¼šé©¾é©¶åœºæ™¯åˆ†å‰²</br></center><p><br></br></p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/076d232f7da04178a4d4644602919462eeeff9f9a0614ea6948c46f7998fe432" width = "600"  div align=center" width = "800"></center><center><br>å›¾3ï¼šäººåƒåˆ†å‰²</br></center><p><br></br></p><p> é¢éƒ¨çš„è¯­ä¹‰åˆ†å‰²é€šå¸¸æ¶‰åŠè¯¸å¦‚çš®è‚¤ã€å¤´å‘ã€çœ¼ç›ã€é¼»å­ã€å˜´å·´å’ŒèƒŒæ™¯ç­‰çš„åˆ†ç±»ã€‚ é¢éƒ¨åˆ†å‰²åœ¨è®¡ç®—æœºè§†è§‰çš„è®¸å¤šé¢éƒ¨åº”ç”¨ä¸­æ˜¯æœ‰ç”¨çš„ï¼Œä¾‹å¦‚æ€§åˆ«ã€è¡¨æƒ…ã€å¹´é¾„å’Œç§æ—çš„ä¼°è®¡ã€‚</p><h2 id="Pascal-VOC2012-è¯­ä¹‰åˆ†å‰²æ•°æ®é›†"><a href="#Pascal-VOC2012-è¯­ä¹‰åˆ†å‰²æ•°æ®é›†" class="headerlink" title="Pascal VOC2012 è¯­ä¹‰åˆ†å‰²æ•°æ®é›†"></a><strong>Pascal VOC2012 è¯­ä¹‰åˆ†å‰²æ•°æ®é›†</strong></h2><p>æœ€é‡è¦çš„è¯­ä¹‰åˆ†å‰²æ•°æ®é›†ä¹‹ä¸€æ˜¯<a href="http://host.robots.ox.ac.uk/pascal/VOC/voc2012/">Pascal VOC2012</a>ã€‚ä¸‹é¢æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹è¿™ä¸ªæ•°æ®é›†ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/9921bc85efee4507a62bc2e34df1fd8260a04eb408ed4fdcb8163c6af3900ce7" width = "800"  div align=center" width = "800"></center><center><br>å›¾4ï¼šVOC2012 è¯­ä¹‰åˆ†å‰²æ•°æ®é›†</br></center><hr><p>VOC2012æ•°æ®é›†æœ‰å¤šç§ç”¨é€”ï¼Œé‡Œé¢çš„æ•°æ®æœ‰äº›å¯ä»¥ç”¨äºåˆ†å‰²ã€åŠ¨ä½œè¯†åˆ«ç­‰ã€‚å…±æœ‰äºŒåä¸ªç±»åˆ«ï¼š</p><p>Person:person</p><p>Animal: bird, cat, cow, dog, horse, sheep</p><p>Vehicle:aeroplane, bicycle, boat, bus, car, motorbike, train</p><p>Indoor: bottle, chair, dining table, potted plant, sofa, tv&#x2F;monitor</p><p>ä¸»è¦æœ‰å››ä¸ªå¤§ç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯äººã€å¸¸è§åŠ¨ç‰©ã€äº¤é€šè½¦è¾†ã€å®¤å†…å®¶å…·ç”¨å“ã€‚ä¸»è¦ä¸ºå›¾åƒåˆ†ç±»ã€å¯¹è±¡æ£€æµ‹è¯†åˆ«ã€å›¾åƒåˆ†å‰²ä¸‰ç±»ä»»åŠ¡æœåŠ¡ã€‚å…¶ä¸­ï¼š</p><p>ï¼ˆ1ï¼‰<strong>Annotationsæ–‡ä»¶å¤¹</strong>ï¼šé‡Œé¢æ˜¯å›¾åƒå¯¹åº”çš„XMLæ ‡æ³¨ä¿¡æ¯ã€‚æ¯å¼ å›¾åƒå¯¹åº”ä¸€ä¸ªXMLæ–‡ä»¶ã€‚XMLæ–‡ä»¶å£°æ˜äº†å›¾åƒæ•°æ®çš„æ¥æºã€å¤§å°ç­‰ä¿¡æ¯ã€‚</p><p>ï¼ˆ2ï¼‰<strong>ImageSetsæ–‡ä»¶å¤¹</strong>ï¼š</p><ul><li>Actionï¼šå­˜æ”¾äººçš„è¡Œä¸ºåŠ¨ä½œçš„å›¾åƒä¿¡æ¯ï¼›</li><li>Layoutï¼šå­˜æ”¾çš„æ˜¯å…·æœ‰äººä½“éƒ¨ä½çš„æ•°æ®ï¼ˆäººçš„headã€handã€feetç­‰ç­‰ï¼‰ï¼›</li><li>Mainï¼šå­˜æ”¾çš„æ˜¯ç›®æ ‡æ£€æµ‹çš„æ•°æ®ï¼Œæ€»å…±åˆ†ä¸º20ç±»ï¼›</li><li>Segmentationï¼šæ˜¯å¯ä»¥ç”¨äºåˆ†å‰²çš„å›¾åƒæ•°æ®ï¼ŒåŒ…å«val.txtã€train.txtç­‰ã€‚</li></ul><p>ï¼ˆ3ï¼‰<strong>JPEGImages</strong>ï¼šæ‰€æœ‰çš„åŸå§‹å›¾åƒæ–‡ä»¶ï¼Œæ ¼å¼å¿…é¡»æ˜¯JPGæ ¼å¼ã€‚</p><p>ï¼ˆ4ï¼‰<strong>SegmentationClass</strong>ï¼šç±»åˆ«åˆ†å‰²labelå›¾ã€‚æ³¨æ„Classçš„æ„æ€å°±æ˜¯å¯¹æ‰€æœ‰å›¾åƒä¸­çš„ç›¸åŒç±»åˆ«ä½¿ç”¨ä¸€ä¸ªé¢œè‰²ï¼Œæ¯”å¦‚ï¼Œé£æœºä½¿ç”¨æ£çº¢è‰²ï¼Œé‚£ä¹ˆæ‰€æœ‰å›¾åƒä¸­é£æœºçš„åˆ†å‰²labelæ ‡æ³¨å°±æ˜¯æ£çº¢è‰²ã€‚</p><p>ï¼ˆ5ï¼‰<strong>SegmentationObject</strong>ï¼šå®ä¾‹åˆ†å‰²labelå›¾ã€‚ä¸€ç§å›¾ä¸­è¯†åˆ«å‡ºæ‰€æœ‰çš„objectä¹‹åï¼Œå¯¹objectä½¿ç”¨ä¸åŒçš„é¢œè‰²è¿›è¡Œå¡«å……ã€‚</p><hr><h3 id="åŠ è½½æ•°æ®"><a href="#åŠ è½½æ•°æ®" class="headerlink" title="åŠ è½½æ•°æ®"></a><strong>åŠ è½½æ•°æ®</strong></h3><p>è¿›å…¥è·¯å¾„<code>VOCdevkit/VOC2012</code>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°æ®é›†çš„ä¸åŒç»„ä»¶ã€‚<code>ImageSets/Segmentation</code>è·¯å¾„åŒ…å«ç”¨äºè®­ç»ƒå’Œæµ‹è¯•æ ·æœ¬çš„æ–‡æœ¬æ–‡ä»¶ï¼Œè€Œ<code>JPEGImages</code>å’Œ<code>SegmentationClass</code>è·¯å¾„åˆ†åˆ«å­˜å‚¨ç€æ¯ä¸ªç¤ºä¾‹çš„è¾“å…¥å›¾åƒå’Œæ ‡ç­¾ã€‚æ­¤å¤„çš„æ ‡ç­¾ä¹Ÿé‡‡ç”¨å›¾åƒæ ¼å¼ï¼Œå…¶å°ºå¯¸å’Œå®ƒæ‰€æ ‡æ³¨çš„è¾“å…¥å›¾åƒçš„å°ºå¯¸ç›¸åŒã€‚æ­¤å¤–ï¼Œæ ‡ç­¾ä¸­é¢œè‰²ç›¸åŒçš„åƒç´ å±äºåŒä¸€ä¸ªè¯­ä¹‰ç±»åˆ«ã€‚<br>ä¸‹é¢å°†<code>read_voc_images</code>å‡½æ•°å®šä¹‰ä¸ºå°†æ‰€æœ‰è¾“å…¥çš„å›¾åƒå’Œæ ‡ç­¾è¯»å…¥å†…å­˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!tar -xf /home/aistudio/data/data150715/VOCtrainval_11-May-<span class="number">2012.</span>tar</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">voc_dir = <span class="string">&quot;VOCdevkit/VOC2012&quot;</span><span class="comment"># æ•°æ®é›†è§£å‹åçš„ç›®å½•</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_voc_images</span>(<span class="params">voc_dir, is_train=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯»å–æ‰€æœ‰VOCå›¾åƒå¹¶æ ‡æ³¨&quot;&quot;&quot;</span></span><br><span class="line">    txt_fname = os.path.join(voc_dir, </span><br><span class="line">                            <span class="string">&#x27;ImageSets&#x27;</span>, </span><br><span class="line">                            <span class="string">&#x27;Segmentation&#x27;</span>, </span><br><span class="line">                            <span class="string">&#x27;train.txt&#x27;</span> <span class="keyword">if</span> is_train <span class="keyword">else</span> <span class="string">&#x27;val.txt&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(txt_fname, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        images = f.read().split()</span><br><span class="line">    features, labels = [], []</span><br><span class="line">    <span class="keyword">for</span> i, fname <span class="keyword">in</span> <span class="built_in">enumerate</span>(images):</span><br><span class="line">        <span class="comment"># è¯»å…¥å›¾ç‰‡ &#x27;JPEGImages&#x27;</span></span><br><span class="line">        feature_load = np.asarray(vision.image_load(os.path.join(voc_dir, </span><br><span class="line">                                                <span class="string">&#x27;JPEGImages&#x27;</span>, </span><br><span class="line">                                                <span class="string">f&#x27;<span class="subst">&#123;fname&#125;</span>.jpg&#x27;</span>))).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">        features.append(feature_load)</span><br><span class="line">        <span class="comment"># æŠŠåƒç´ æ ‡ç­¾ä¹Ÿå­˜æˆå›¾ç‰‡ &#x27;SegmentationClass&#x27;</span></span><br><span class="line">        label_load = np.asarray(vision.image_load(os.path.join(voc_dir, </span><br><span class="line">                                <span class="string">&#x27;SegmentationClass&#x27;</span>, </span><br><span class="line">                                <span class="string">f&#x27;<span class="subst">&#123;fname&#125;</span>.png&#x27;</span>)).convert(<span class="string">&#x27;RGB&#x27;</span>)).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">        labels.append(label_load)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> features, labels</span><br><span class="line"></span><br><span class="line">train_features, train_labels = read_voc_images(voc_dir, <span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬ç»˜åˆ¶å‰5ä¸ªè¾“å…¥å›¾åƒåŠå…¶æ ‡ç­¾ã€‚åœ¨æ ‡ç­¾å›¾åƒä¸­ï¼Œç™½è‰²å’Œé»‘è‰²åˆ†åˆ«è¡¨ç¤ºè¾¹æ¡†å’ŒèƒŒæ™¯ï¼Œè€Œå…¶ä»–é¢œè‰²åˆ™å¯¹åº”ä¸åŒçš„ç±»åˆ«ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">5</span></span><br><span class="line">imgs = train_features[<span class="number">0</span>:n] + train_labels[<span class="number">0</span>:n]</span><br><span class="line"><span class="comment"># å‚æ•°imgçš„æ ¼å¼ä¸º(channels,imagesize,imagesize)ï¼Œ</span></span><br><span class="line"><span class="comment"># show_imagesåœ¨ç°å®çš„æ—¶å€™è¾“å…¥çš„æ˜¯(imagesize,imagesize,channels)</span></span><br><span class="line">imgs = [img.transpose((<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>)) <span class="keyword">for</span> img <span class="keyword">in</span> imgs]</span><br><span class="line">ppl.show_images(imgs, <span class="number">2</span>, n, scale=<span class="number">2.5</span>);</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/75.png" alt="png"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ—ä¸¾RGBé¢œè‰²å€¼å’Œç±»åã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">VOC_COLORMAP = [[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">128</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">128</span>, <span class="number">0</span>], [<span class="number">128</span>, <span class="number">128</span>, <span class="number">0</span>],</span><br><span class="line">                [<span class="number">0</span>, <span class="number">0</span>, <span class="number">128</span>], [<span class="number">128</span>, <span class="number">0</span>, <span class="number">128</span>], [<span class="number">0</span>, <span class="number">128</span>, <span class="number">128</span>], [<span class="number">128</span>, <span class="number">128</span>, <span class="number">128</span>],</span><br><span class="line">                [<span class="number">64</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">192</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">64</span>, <span class="number">128</span>, <span class="number">0</span>], [<span class="number">192</span>, <span class="number">128</span>, <span class="number">0</span>],</span><br><span class="line">                [<span class="number">64</span>, <span class="number">0</span>, <span class="number">128</span>], [<span class="number">192</span>, <span class="number">0</span>, <span class="number">128</span>], [<span class="number">64</span>, <span class="number">128</span>, <span class="number">128</span>], [<span class="number">192</span>, <span class="number">128</span>, <span class="number">128</span>],</span><br><span class="line">                [<span class="number">0</span>, <span class="number">64</span>, <span class="number">0</span>], [<span class="number">128</span>, <span class="number">64</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">192</span>, <span class="number">0</span>], [<span class="number">128</span>, <span class="number">192</span>, <span class="number">0</span>],</span><br><span class="line">                [<span class="number">0</span>, <span class="number">64</span>, <span class="number">128</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">VOC_CLASSES = [<span class="string">&#x27;background&#x27;</span>, <span class="string">&#x27;aeroplane&#x27;</span>, <span class="string">&#x27;bicycle&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>, <span class="string">&#x27;boat&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;bottle&#x27;</span>, <span class="string">&#x27;bus&#x27;</span>, <span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;chair&#x27;</span>, <span class="string">&#x27;cow&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;diningtable&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;horse&#x27;</span>, <span class="string">&#x27;motorbike&#x27;</span>, <span class="string">&#x27;person&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;potted plant&#x27;</span>, <span class="string">&#x27;sheep&#x27;</span>, <span class="string">&#x27;sofa&#x27;</span>, <span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;tv/monitor&#x27;</span>]</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢å®šä¹‰çš„ä¸¤ä¸ªå¸¸é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°æŸ¥æ‰¾æ ‡ç­¾ä¸­æ¯ä¸ªåƒç´ çš„ç±»ç´¢å¼•ã€‚æˆ‘ä»¬å®šä¹‰äº†<code>voc_colormap2label</code>å‡½æ•°æ¥æ„å»ºä»RGBåˆ°VOCç±»åˆ«ç´¢å¼•çš„æ˜ å°„ï¼Œè€Œ<code>voc_label_indices</code>å‡½æ•°å°†VOCæ ‡ç­¾ä¸­çš„RGBå€¼æ˜ å°„åˆ°å®ƒä»¬çš„ç±»åˆ«ç´¢å¼•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">voc_colormap2label</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ„å»ºä»RGBåˆ°VOCç±»åˆ«ç´¢å¼•çš„æ˜ å°„&quot;&quot;&quot;</span></span><br><span class="line">    colormap2label = paddle.zeros((<span class="number">256</span> ** <span class="number">3</span>, ), dtype=paddle.int64) <span class="comment"># å ä½</span></span><br><span class="line">    <span class="keyword">for</span> i, colormap <span class="keyword">in</span> <span class="built_in">enumerate</span>(VOC_COLORMAP):</span><br><span class="line">        <span class="comment"># æŠŠRGBæ¢ç®—æˆä¸€ä¸ªæ•´æ•°ï¼ˆä½¿ä¸ç±»åˆ«çš„æ•´æ•°å€¼å¯¹åº”ï¼‰</span></span><br><span class="line">        idx = (colormap[<span class="number">0</span>] * <span class="number">256</span> + colormap[<span class="number">1</span>]) * <span class="number">256</span> + colormap[<span class="number">2</span>]</span><br><span class="line">        colormap2label[idx] = i<span class="comment"># iä¸ºRGBç±»åˆ«ç´¢å¼•ï¼Œidxä¸ºRGBç±»åˆ«è½¬æ¢ä¸ºçš„ä¸€ä¸ªæ•°</span></span><br><span class="line">        <span class="comment">#print(idx, i)</span></span><br><span class="line">    <span class="keyword">return</span> colormap2label <span class="comment"># è¿”å›ä¸€ä¸ªå­—å…¸</span></span><br><span class="line">voc_colormap2label()</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[16777216], dtype=int64, place=Place(gpu:0), stop_gradient=True,       [0, 0, 0, ..., 0, 0, 0])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># colormap = train_labels</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">voc_label_indices</span>(<span class="params">colormap, colormap2label</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å°†VOCæ ‡ç­¾ä¸­çš„RGBå€¼æ˜ å°„åˆ°å®ƒä»¬çš„ç±»åˆ«ç´¢å¼•&quot;&quot;&quot;</span></span><br><span class="line">    colormap = colormap.transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)).astype(<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">    <span class="comment">#print(colormap)</span></span><br><span class="line">    idx = ((colormap[:, :, <span class="number">0</span>] * <span class="number">256</span> + colormap[:, :, <span class="number">1</span>]) * <span class="number">256</span></span><br><span class="line">           + colormap[:, :, <span class="number">2</span>]) <span class="comment"># å°†RGBå€¼æ¢æˆä¸€ä¸ªä¸‹æ ‡idx,å°†idxç›´æ¥ç»™å­—å…¸å³æ¯ä¸ªåƒç´ å¯¹åº”çš„æ ‡å·æ‰¾åˆ°ã€‚</span></span><br><span class="line">    <span class="comment">#print(idx)</span></span><br><span class="line">    <span class="keyword">return</span> colormap2label[idx]</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œåœ¨ç¬¬ä¸€å¼ æ ·æœ¬å›¾åƒä¸­ï¼Œé£æœºå¤´éƒ¨åŒºåŸŸçš„ç±»åˆ«ç´¢å¼•ä¸º1ï¼Œè€ŒèƒŒæ™¯ç´¢å¼•ä¸º0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨äº†idxæ¥ä»£æ›¿RGB</span></span><br><span class="line">colormap2label = voc_colormap2label()</span><br><span class="line">y = voc_label_indices(train_labels[<span class="number">0</span>], colormap2label)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(y[<span class="number">105</span>:<span class="number">115</span>, <span class="number">130</span>:<span class="number">140</span>], VOC_CLASSES[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[10, 10], dtype=int64, place=Place(gpu:0), stop_gradient=True,       [[0, 0, 0, 0, 0, 0, 0, 0, 0, 1],        [0, 0, 0, 0, 0, 0, 0, 1, 1, 1],        [0, 0, 0, 0, 0, 0, 1, 1, 1, 1],        [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],        [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],        [0, 0, 0, 0, 1, 1, 1, 1, 1, 1],        [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],        [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],        [0, 0, 0, 0, 0, 0, 1, 1, 1, 1],        [0, 0, 0, 0, 0, 0, 0, 0, 1, 1]]) aeroplane</code></pre><h3 id="é¢„å¤„ç†æ•°æ®"><a href="#é¢„å¤„ç†æ•°æ®" class="headerlink" title="é¢„å¤„ç†æ•°æ®"></a>é¢„å¤„ç†æ•°æ®</h3><p>åœ¨ä¹‹å‰çš„å®éªŒï¼Œæˆ‘ä»¬é€šè¿‡å†ç¼©æ”¾å›¾åƒä½¿å…¶ç¬¦åˆæ¨¡å‹çš„è¾“å…¥å½¢çŠ¶ã€‚ç„¶è€Œåœ¨è¯­ä¹‰åˆ†å‰²ä¸­ï¼Œè¿™æ ·åšéœ€è¦å°†é¢„æµ‹çš„åƒç´ ç±»åˆ«é‡æ–°æ˜ å°„å›åŸå§‹å°ºå¯¸çš„è¾“å…¥å›¾åƒã€‚è¿™æ ·çš„æ˜ å°„å¯èƒ½ä¸å¤Ÿç²¾ç¡®ï¼Œå°¤å…¶åœ¨ä¸åŒè¯­ä¹‰çš„åˆ†å‰²åŒºåŸŸã€‚</p><p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†å›¾åƒè£å‰ªä¸ºå›ºå®šå°ºå¯¸ï¼Œè€Œä¸æ˜¯å†ç¼©æ”¾ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨å›¾åƒå¢å¹¿ä¸­çš„éšæœºè£å‰ªï¼Œè£å‰ªè¾“å…¥å›¾åƒå’Œæ ‡ç­¾çš„ç›¸åŒåŒºåŸŸã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">voc_rand_crop</span>(<span class="params">feature, label, height, width</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;éšæœºè£å‰ªç‰¹å¾å’Œæ ‡ç­¾å›¾åƒ&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># rectä¸ºéšæœºè£å‰ªåçš„ä¸€ä¸ªçš„æ¡†ï¼Œget_paramè¿”å›æŒ‡å®šæ¨¡å‹æˆ–æ¨¡å—å¯¹è±¡çš„æŒ‡å®šå‚æ•°çš„åç§°æˆ–å€¼</span></span><br><span class="line">    rect = vision.transforms.RandomCrop(</span><br><span class="line">            size=(height, width))._get_param(img=feature,output_size=(height, width))</span><br><span class="line">    <span class="comment"># crop åœ¨å›¾åƒåˆ†å‰²æ—¶ï¼Œå‡è®¾å¯¹å›¾ç‰‡è£å‰ªåå¯¹æ ‡å·ä¹Ÿè¦åšç›¸åº”è£å‰ªï¼Œæ‰èƒ½ä½¿æ ‡å·è¿˜èƒ½å¯¹åº”ä½å›¾ç‰‡ã€‚</span></span><br><span class="line">    feature = vision.transforms.functional.crop(feature, *rect)</span><br><span class="line">    label = vision.transforms.functional.crop(label, *rect)</span><br><span class="line">    <span class="comment"># print(feature.shape, label.shape)</span></span><br><span class="line">    <span class="keyword">return</span> feature, label</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">5</span></span><br><span class="line">imgs = []</span><br><span class="line"><span class="built_in">print</span>(train_features[<span class="number">0</span>].shape) <span class="comment"># å›¾åƒå°ºå¯¸ä¸ä¸€è‡´</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    imgs += voc_rand_crop(train_features[<span class="number">0</span>].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)), </span><br><span class="line">                            train_labels[<span class="number">0</span>].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)), <span class="number">200</span>, <span class="number">300</span>)</span><br><span class="line">imgs = [img <span class="keyword">for</span> img <span class="keyword">in</span> imgs]</span><br><span class="line">ppl.show_images(imgs[::<span class="number">2</span>] + imgs[<span class="number">1</span>::<span class="number">2</span>], <span class="number">2</span>, n, scale=<span class="number">2.5</span>);</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">3</span>, <span class="number">281</span>, <span class="number">500</span>)<span class="comment"># ç¬¬ä¸€å¼ å›¾ç‰‡çš„å°ºå¯¸å¤§å°</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/76.png" alt="png"></p><h3 id="è‡ªå®šä¹‰è¯­ä¹‰åˆ†å‰²æ•°æ®é›†ç±»"><a href="#è‡ªå®šä¹‰è¯­ä¹‰åˆ†å‰²æ•°æ®é›†ç±»" class="headerlink" title="è‡ªå®šä¹‰è¯­ä¹‰åˆ†å‰²æ•°æ®é›†ç±»"></a><strong>è‡ªå®šä¹‰è¯­ä¹‰åˆ†å‰²æ•°æ®é›†ç±»</strong></h3><p>æˆ‘ä»¬é€šè¿‡ç»§æ‰¿é«˜çº§APIæä¾›çš„<code>Dataset</code>ç±»ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªè¯­ä¹‰åˆ†å‰²æ•°æ®é›†ç±»<code>VOCSegDataset</code>ã€‚é€šè¿‡å®ç°<code>__getitem__</code>å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„è®¿é—®æ•°æ®é›†ä¸­ç´¢å¼•ä¸º<code>idx</code>çš„è¾“å…¥å›¾åƒåŠå…¶æ¯ä¸ªåƒç´ çš„ç±»åˆ«ç´¢å¼•ã€‚ç”±äºæ•°æ®é›†ä¸­æœ‰äº›å›¾åƒçš„å°ºå¯¸å¯èƒ½å°äºéšæœºè£å‰ªæ‰€æŒ‡å®šçš„è¾“å‡ºå°ºå¯¸ï¼Œè¿™äº›æ ·æœ¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„<code>filter</code>å‡½æ•°ç§»é™¤æ‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†<code>normalize_image</code>å‡½æ•°ï¼Œä»è€Œå¯¹è¾“å…¥å›¾åƒçš„RGBä¸‰ä¸ªé€šé“çš„å€¼åˆ†åˆ«åšæ ‡å‡†åŒ–ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VOCSegDataset</span>(paddle.io.Dataset):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸€ä¸ªç”¨äºåŠ è½½VOCæ•°æ®é›†çš„è‡ªå®šä¹‰æ•°æ®é›†&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, is_train, crop_size, voc_dir</span>):</span><br><span class="line">        self.transform = vision.transforms.Normalize(mean=[<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>], std=[<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])</span><br><span class="line">        self.crop_size = crop_size</span><br><span class="line">        features, labels = read_voc_images(voc_dir, is_train=is_train)</span><br><span class="line">        self.features = [self.normalize_image(feature) <span class="keyword">for</span> feature <span class="keyword">in</span> self.<span class="built_in">filter</span>(features)]</span><br><span class="line">        self.labels = self.<span class="built_in">filter</span>(labels)</span><br><span class="line">        self.colormap2label = voc_colormap2label()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;read &#x27;</span> + <span class="built_in">str</span>(<span class="built_in">len</span>(self.features)) + <span class="string">&#x27; examples&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¯¹è¾“å…¥å›¾åƒçš„RGBä¸‰ä¸ªé€šé“çš„å€¼åˆ†åˆ«åšæ ‡å‡†åŒ–</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">normalize_image</span>(<span class="params">self, img</span>):</span><br><span class="line">        <span class="keyword">return</span> self.transform(img / <span class="number">255</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¯”è¾ƒå›¾åƒçš„å°ºå¯¸å’Œéšæœºè£å‰ªæ‰€æŒ‡å®šçš„è¾“å‡ºå°ºå¯¸ï¼Œå¦‚å°äºåˆ™å‰”é™¤ã€‚</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">filter</span>(<span class="params">self, imgs</span>):</span><br><span class="line">        <span class="keyword">return</span> [img <span class="keyword">for</span> img <span class="keyword">in</span> imgs <span class="keyword">if</span> (</span><br><span class="line">            img.shape[<span class="number">1</span>] &gt;= self.crop_size[<span class="number">0</span>] <span class="keyword">and</span></span><br><span class="line">            img.shape[<span class="number">2</span>] &gt;= self.crop_size[<span class="number">1</span>])]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># éšæœºè£å‰ªç‰¹å¾å’Œæ ‡ç­¾å›¾åƒï¼Œè¿”å›ç´¢å¼•ä¸ºidxçš„è¾“å…¥å›¾åƒåŠå…¶æ¯ä¸ªåƒç´ çš„ç±»åˆ«ç´¢å¼•ã€‚</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        feature, label = voc_rand_crop(</span><br><span class="line">            self.features[idx].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)), </span><br><span class="line">            self.labels[idx].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)),</span><br><span class="line">            *self.crop_size</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> (feature, voc_label_indices(label.transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>)), self.colormap2label))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.features)</span><br></pre></td></tr></table></figure><h3 id="è¯»å–æ•°æ®é›†"><a href="#è¯»å–æ•°æ®é›†" class="headerlink" title="è¯»å–æ•°æ®é›†"></a><strong>è¯»å–æ•°æ®é›†</strong></h3><p>æˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰çš„<code>VOCSegDataset</code>ç±»æ¥åˆ†åˆ«åˆ›å»ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„å®ä¾‹ã€‚å‡è®¾æˆ‘ä»¬æŒ‡å®šéšæœºè£å‰ªçš„è¾“å‡ºå›¾åƒçš„å½¢çŠ¶ä¸º$320\times 480$ï¼Œä¸‹é¢æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ‰€ä¿ç•™çš„æ ·æœ¬ä¸ªæ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crop_size = (<span class="number">320</span>, <span class="number">480</span>)</span><br><span class="line"><span class="comment">#ç”±äºæ•°æ®é›†è¿‡å¤§ï¼Œæ•´ä½“è¿è¡Œä¼šè¶…æ˜¾å­˜ï¼Œè¯·åœ¨è¿è¡Œåˆ°è¿™ä¸€æ­¥çš„æ—¶å€™é‡å¯å†…æ ¸ã€‚</span></span><br><span class="line">voc_train = VOCSegDataset(<span class="literal">True</span>, crop_size, voc_dir)<span class="comment"># trueè¡¨ç¤ºå¼€å§‹è®­ç»ƒ</span></span><br></pre></td></tr></table></figure><pre><code>read 1114 examples</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">voc_test = VOCSegDataset(<span class="literal">False</span>, crop_size, voc_dir)</span><br></pre></td></tr></table></figure><pre><code>read 1078 examples</code></pre><p>è®¾æ‰¹é‡å¤§å°ä¸º64ï¼Œæˆ‘ä»¬å®šä¹‰è®­ç»ƒé›†çš„è¿­ä»£å™¨ã€‚<br>æ‰“å°ç¬¬ä¸€ä¸ªå°æ‰¹é‡çš„å½¢çŠ¶ä¼šå‘ç°ï¼šä¸å›¾åƒåˆ†ç±»æˆ–ç›®æ ‡æ£€æµ‹ä¸åŒï¼Œè¿™é‡Œçš„æ ‡ç­¾<code>Y</code>æ˜¯ä¸€ä¸ªä¸‰ç»´æ•°ç»„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">batch_size = <span class="number">64</span></span><br><span class="line">train_iter = paddle.io.DataLoader(voc_train, </span><br><span class="line">                                    batch_size=batch_size, </span><br><span class="line">                                    shuffle=<span class="literal">True</span>, </span><br><span class="line">                                    drop_last=<span class="literal">True</span>) <span class="comment"># æ‰”æ‰ä¸è¶³batchçš„æ ·æœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> X, Y <span class="keyword">in</span> train_iter:</span><br><span class="line">    <span class="built_in">print</span>(X.shape)</span><br><span class="line">    <span class="built_in">print</span>(Y.shape)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[64, 320, 480, 3]64æ‰¹é‡å¤§å° 329Ã—480åƒç´  3çš„é€šé“æ•°</span></span><br><span class="line"><span class="string">[64, 320, 480]#ç”±äºyæ¯ä¸€ä¸ªåƒç´ ç‚¹ä½ç½®å¯¹åº”çš„æ˜¯ç±»åˆ«çš„å–å€¼ï¼Œè€ŒåŸå›¾å¯¹åº”çš„æ˜¯RGB3ä¸ªæ•°å€¼ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯å•é€šé“</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="æ•´åˆæ‰€æœ‰ç»„ä»¶"><a href="#æ•´åˆæ‰€æœ‰ç»„ä»¶" class="headerlink" title="[æ•´åˆæ‰€æœ‰ç»„ä»¶]"></a>[<strong>æ•´åˆæ‰€æœ‰ç»„ä»¶</strong>]</h3><p>æœ€åï¼Œæˆ‘ä»¬å®šä¹‰ä»¥ä¸‹<code>load_data_voc</code>å‡½æ•°æ¥ä¸‹è½½å¹¶è¯»å–Pascal VOC2012è¯­ä¹‰åˆ†å‰²æ•°æ®é›†ã€‚å®ƒè¿”å›è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ•°æ®è¿­ä»£å™¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_data_voc</span>(<span class="params">batch_size, crop_size</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åŠ è½½VOCè¯­ä¹‰åˆ†å‰²æ•°æ®é›†&quot;&quot;&quot;</span></span><br><span class="line">    voc_dir =  <span class="string">&quot;VOCdevkit/VOC2012&quot;</span></span><br><span class="line">    train_iter = paddle.io.DataLoader(</span><br><span class="line">        VOCSegDataset(<span class="literal">True</span>, crop_size, voc_dir), </span><br><span class="line">        batch_size=batch_size,</span><br><span class="line">        shuffle=<span class="literal">True</span>, drop_last=<span class="literal">True</span>)</span><br><span class="line">    test_iter = paddle.io.DataLoader(</span><br><span class="line">        VOCSegDataset(<span class="literal">False</span>, crop_size, voc_dir), </span><br><span class="line">        batch_size=batch_size,</span><br><span class="line">        drop_last=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> train_iter, test_iter</span><br></pre></td></tr></table></figure><h1 id="äºŒã€è½¬ç½®å·ç§¯"><a href="#äºŒã€è½¬ç½®å·ç§¯" class="headerlink" title="äºŒã€è½¬ç½®å·ç§¯"></a>äºŒã€è½¬ç½®å·ç§¯</h1><p>:label:<code>sec_transposed_conv</code></p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€è§åˆ°çš„å·ç§¯ç¥ç»ç½‘ç»œå±‚ï¼Œä¾‹å¦‚å·ç§¯å±‚ï¼ˆ :numref:<code>sec_conv_layer</code>ï¼‰å’Œæ± åŒ–å±‚ï¼ˆ :numref:<code>sec_pooling</code>ï¼‰ï¼Œé€šå¸¸ä¼šå‡å°‘ä¸‹é‡‡æ ·è¾“å…¥å›¾åƒçš„ç©ºé—´ç»´åº¦ï¼ˆé«˜å’Œå®½ï¼‰ã€‚ç„¶è€Œå¦‚æœè¾“å…¥å’Œè¾“å‡ºå›¾åƒçš„ç©ºé—´ç»´åº¦ç›¸åŒï¼Œåœ¨ä»¥åƒç´ çº§åˆ†ç±»çš„è¯­ä¹‰åˆ†å‰²ä¸­å°†ä¼šå¾ˆæ–¹ä¾¿ã€‚ã€‘</p><p>ä¾‹å¦‚ï¼Œ<strong>è¾“å‡ºåƒç´ æ‰€å¤„çš„é€šé“ç»´å¯ä»¥ä¿æœ‰è¾“å…¥åƒç´ åœ¨åŒä¸€ä½ç½®ä¸Šçš„åˆ†ç±»ç»“æœ</strong>ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œå°¤å…¶æ˜¯åœ¨ç©ºé—´ç»´åº¦è¢«å·ç§¯ç¥ç»ç½‘ç»œå±‚ç¼©å°åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦ä¸€ç§ç±»å‹çš„å·ç§¯ç¥ç»ç½‘ç»œå±‚ï¼Œå®ƒå¯ä»¥å¢åŠ <strong>ä¸Šé‡‡æ ·</strong>ä¸­é—´å±‚ç‰¹å¾å›¾çš„ç©ºé—´ç»´åº¦ã€‚</p><p>åœ¨ç®—æ³•ä¸­å¸¸ç”¨çš„ä¸Šé‡‡æ ·æ–¹æ³•å°±æ˜¯åŒçº¿æ€§æ’å€¼ä»¥åŠè½¬ç½®å·ç§¯ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»<strong>è½¬ç½®å·ç§¯ï¼ˆtransposed convolutionï¼‰</strong> ï¼Œç”¨äºé€†è½¬ä¸‹é‡‡æ ·å¯¼è‡´çš„ç©ºé—´å°ºå¯¸å‡å°ï¼Œä½¿ç©ºé—´å°ºå¯¸æ”¾å¤§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> ppl</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a><strong>åŸºæœ¬æ“ä½œ</strong></h2><p>è®©æˆ‘ä»¬æš‚æ—¶å¿½ç•¥é€šé“ï¼Œä»åŸºæœ¬çš„è½¬ç½®å·ç§¯å¼€å§‹ï¼Œè®¾æ­¥å¹…ä¸º1ä¸”æ²¡æœ‰å¡«å……ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª$n_h \times n_w$çš„è¾“å…¥å¼ é‡å’Œä¸€ä¸ª$k_h \times k_w$çš„å·ç§¯æ ¸ã€‚ä»¥æ­¥å¹…ä¸º1æ»‘åŠ¨å·ç§¯æ ¸çª—å£ï¼Œæ¯è¡Œ$n_w$æ¬¡ï¼Œæ¯åˆ—$n_h$æ¬¡ï¼Œå…±äº§ç”Ÿ$n_h n_w$ä¸ªä¸­é—´ç»“æœã€‚æ¯ä¸ªä¸­é—´ç»“æœéƒ½æ˜¯ä¸€ä¸ª$(n_h + k_h - 1) \times (n_w + k_w - 1)$çš„å¼ é‡ï¼Œåˆå§‹åŒ–ä¸º0ã€‚ä¸ºäº†è®¡ç®—æ¯ä¸ªä¸­é—´å¼ é‡ï¼Œè¾“å…¥å¼ é‡ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è¦ä¹˜ä»¥å·ç§¯æ ¸ï¼Œä»è€Œä½¿æ‰€å¾—çš„$k_h \times k_w$å¼ é‡æ›¿æ¢ä¸­é—´å¼ é‡çš„ä¸€éƒ¨åˆ†ã€‚è¯·æ³¨æ„ï¼Œæ¯ä¸ªä¸­é—´å¼ é‡è¢«æ›¿æ¢éƒ¨åˆ†çš„ä½ç½®ä¸è¾“å…¥å¼ é‡ä¸­å…ƒç´ çš„ä½ç½®ç›¸å¯¹åº”ã€‚æœ€åï¼Œæ‰€æœ‰ä¸­é—´ç»“æœç›¸åŠ ä»¥è·å¾—æœ€ç»ˆç»“æœã€‚</p><p>ä¸‹å›¾è§£é‡Šäº†å¦‚ä½•ä¸º$2\times 2$çš„è¾“å…¥å¼ é‡è®¡ç®—å·ç§¯æ ¸ä¸º$2\times 2$çš„è½¬ç½®å·ç§¯ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4d0c75a3740d49b4b795d856fb4e652d021d20fcf72e495a8d2b7f12deb74b4b" width = "800"  div align=center" width = "800"></center><center><br>å›¾5ï¼šè½¬ç½®å·ç§¯</br></center><p>è¿™å°†æ˜¯ä¸€ä¸ªä¸€å¯¹å¤šï¼ˆone-to-manyï¼‰çš„æ˜ å°„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å¯¹è¾“å…¥çŸ©é˜µ<code>X</code>å’Œå·ç§¯æ ¸çŸ©é˜µ<code>K</code>(<strong>å®ç°åŸºæœ¬çš„è½¬ç½®å·ç§¯è¿ç®—</strong>)<code>trans_conv</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">trans_conv</span>(<span class="params">X, K</span>):</span><br><span class="line">    h, w = K.shape</span><br><span class="line">    Y = paddle.zeros((X.shape[<span class="number">0</span>] + h - <span class="number">1</span>, X.shape[<span class="number">1</span>] + w - <span class="number">1</span>)) <span class="comment"># è¾“å‡ºå½¢çŠ¶å…¬å¼</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(X.shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(X.shape[<span class="number">1</span>]):</span><br><span class="line">            Y[i:i+h, j:j+w] += X[i,j] * K </span><br><span class="line">    <span class="keyword">return</span> Y</span><br></pre></td></tr></table></figure><p>ä¸é€šè¿‡å·ç§¯æ ¸â€œå‡å°‘â€è¾“å…¥å…ƒç´ çš„å¸¸è§„å·ç§¯ï¼ˆåœ¨ :numref:<code>sec_conv_layer</code>ä¸­ï¼‰ç›¸æ¯”ï¼Œè½¬ç½®å·ç§¯é€šè¿‡å·ç§¯æ ¸â€œå¹¿æ’­â€è¾“å…¥å…ƒç´ ï¼Œä»è€Œäº§ç”Ÿå¤§äºè¾“å…¥çš„è¾“å‡ºã€‚æ­¤å®ç°æ˜¯åŸºæœ¬çš„äºŒç»´è½¬ç½®å·ç§¯è¿ç®—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">X = paddle.to_tensor([[<span class="number">0.0</span>, <span class="number">1.0</span>], [<span class="number">2.0</span>, <span class="number">3.0</span>]])</span><br><span class="line">K = paddle.to_tensor([[<span class="number">0.0</span>, <span class="number">1.0</span>], [<span class="number">2.0</span>, <span class="number">3.0</span>]])</span><br><span class="line">trans_conv(X, K)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[3, 3], dtype=float32, place=Place(gpu:0), stop_gradient=True,       [[0. , 0. , 1. ],        [0. , 4. , 6. ],        [4. , 12., 9. ]])</code></pre><p>æˆ–è€…ï¼Œå½“è¾“å…¥<code>X</code>å’Œå·ç§¯æ ¸<code>K</code>éƒ½æ˜¯å››ç»´å¼ é‡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é«˜çº§APIè·å¾—ç›¸åŒçš„ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">X, K = X.reshape((<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)), K.reshape((<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">class paddle.nn.Conv2DTranspose(</span></span><br><span class="line"><span class="string">                                in_channels, #è¾“å…¥é€šé“æ•°</span></span><br><span class="line"><span class="string">                                out_channels, #è¾“å‡ºé€šé“æ•°</span></span><br><span class="line"><span class="string">                                kernel_size, #å·ç§¯æ ¸çš„å¤§å°</span></span><br><span class="line"><span class="string">                                stride=1, </span></span><br><span class="line"><span class="string">                                padding=0, </span></span><br><span class="line"><span class="string">                                output_padding=0, # è¾“å‡ºå½¢çŠ¶ä¸Šä¸€ä¾§é¢å¤–æ·»åŠ çš„å¤§å°. é»˜è®¤å€¼: 0</span></span><br><span class="line"><span class="string">                                groups=1, # äºŒç»´å·ç§¯å±‚çš„ç»„æ•°</span></span><br><span class="line"><span class="string">                                dilation=1, # ç©ºæ´å¤§å°</span></span><br><span class="line"><span class="string">                                weight_attr=None, </span></span><br><span class="line"><span class="string">                                bias_attr=None, </span></span><br><span class="line"><span class="string">                                data_format=&#x27;NCHW&#x27;</span></span><br><span class="line"><span class="string">                                )</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">tconv = nn.Conv2DTranspose(<span class="number">1</span>, <span class="number">1</span>, kernel_size=<span class="number">2</span>, bias_attr=<span class="literal">False</span>)</span><br><span class="line">tconv.weight.set_value(K)</span><br><span class="line">tconv(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 1, 3, 3], dtype=float32, place=Place(gpu:0), stop_gradient=False,       [[[[0. , 0. , 1. ],          [0. , 4. , 6. ],          [4. , 12., 9. ]]]])</code></pre><h2 id="å¡«å……ã€æ­¥å¹…å’Œå¤šé€šé“"><a href="#å¡«å……ã€æ­¥å¹…å’Œå¤šé€šé“" class="headerlink" title="å¡«å……ã€æ­¥å¹…å’Œå¤šé€šé“"></a><strong>å¡«å……ã€æ­¥å¹…å’Œå¤šé€šé“</strong></h2><h3 id="å¡«å……"><a href="#å¡«å……" class="headerlink" title="å¡«å……"></a><strong>å¡«å……</strong></h3><p>ä¸å¸¸è§„å·ç§¯ä¸åŒï¼Œåœ¨è½¬ç½®å·ç§¯ä¸­ï¼Œå¡«å……è¢«åº”ç”¨äºçš„è¾“å‡ºï¼ˆå¸¸è§„å·ç§¯å°†å¡«å……åº”ç”¨äºè¾“å…¥ï¼‰ã€‚ä¾‹å¦‚ï¼Œå½“å°†é«˜å’Œå®½ä¸¤ä¾§çš„å¡«å……æ•°æŒ‡å®šä¸º1æ—¶ï¼Œè½¬ç½®å·ç§¯çš„è¾“å‡ºä¸­å°†åˆ é™¤ç¬¬ä¸€å’Œæœ€åçš„è¡Œä¸åˆ—ã€‚ï¼ˆä½ åŠ æˆ‘å°±å‡ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ å…¥äº†å¡«å……å®é™…ä¸Šä½¿å¾—è¾“å‡ºå°ºå¯¸å˜å°</span></span><br><span class="line">tconv = nn.Conv2DTranspose(<span class="number">1</span>, <span class="number">1</span>, kernel_size=<span class="number">2</span>, padding=<span class="number">1</span>, bias_attr=<span class="literal">False</span>)</span><br><span class="line">tconv.weight.set_value(K)</span><br><span class="line">tconv(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 1, 1, 1], dtype=float32, place=Place(gpu:0), stop_gradient=False,       [[[[4.]]]])</code></pre><h3 id="æ­¥å¹…"><a href="#æ­¥å¹…" class="headerlink" title="æ­¥å¹…"></a><strong>æ­¥å¹…</strong></h3><p>åœ¨è½¬ç½®å·ç§¯ä¸­ï¼Œæ­¥å¹…è¢«æŒ‡å®šä¸ºä¸­é—´ç»“æœï¼ˆè¾“å‡ºï¼‰ï¼Œè€Œä¸æ˜¯è¾“å…¥ã€‚ä½¿ç”¨ä¸Šå›¾ä¸­ç›¸åŒè¾“å…¥å’Œå·ç§¯æ ¸å¼ é‡ï¼Œå°†æ­¥å¹…ä»1æ›´æ”¹ä¸º2ä¼šå¢åŠ ä¸­é—´å¼ é‡çš„é«˜å’Œæƒé‡ï¼Œå…·ä½“ä¼šä½“ç°åœ¨è¾“å‡ºå›¾åƒä¸Šã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/1bfa009a5c01420da9747628011a0ec961986b86336f43618daf48b205c824ae" width = "600"  div align=center" width = "800"></center><center><br>å›¾6ï¼šæ­¥å¹…ä¸º2ä¸‹çš„è½¬ç½®å·ç§¯</br></center><p>ä»¥ä¸‹ä»£ç å¯ä»¥éªŒè¯æ­¥å¹…ä¸º2çš„è½¬ç½®å·ç§¯çš„è¾“å‡ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ å…¥äº†æ­¥å¹…å®é™…ä¸Šä½¿å¾—è¾“å‡ºå°ºå¯¸å˜å¤§</span></span><br><span class="line">tconv = nn.Conv2DTranspose(<span class="number">1</span>, <span class="number">1</span>, kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>, bias_attr=<span class="literal">False</span>)</span><br><span class="line">tconv.weight.set_value(K)</span><br><span class="line">tconv(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 1, 4, 4], dtype=float32, place=Place(gpu:0), stop_gradient=False,       [[[[0., 0., 0., 1.],          [0., 0., 2., 3.],          [0., 2., 0., 3.],          [4., 6., 6., 9.]]]])</code></pre><p>å¯¹äºå¤šä¸ªè¾“å…¥å’Œè¾“å‡ºé€šé“ï¼Œè½¬ç½®å·ç§¯ä¸å¸¸è§„å·ç§¯ä»¥ç›¸åŒæ–¹å¼è¿ä½œã€‚å‡è®¾è¾“å…¥æœ‰$c_i$ä¸ªé€šé“ï¼Œä¸”è½¬ç½®å·ç§¯ä¸ºæ¯ä¸ªè¾“å…¥é€šé“åˆ†é…äº†ä¸€ä¸ª$k_h\times k_w$çš„å·ç§¯æ ¸å¼ é‡ã€‚å½“æŒ‡å®šå¤šä¸ªè¾“å‡ºé€šé“æ—¶ï¼Œæ¯ä¸ªè¾“å‡ºé€šé“å°†æœ‰ä¸€ä¸ª$c_i\times k_h\times k_w$çš„å·ç§¯æ ¸ã€‚</p><p>å¸¸è§„å·ç§¯ä¸è½¬ç½®å·ç§¯å¯ä»¥ç›¸äº’è½¬åŒ–ã€‚å¦‚æœæˆ‘ä»¬å°†$\mathsf{X}$ä»£å…¥å·ç§¯å±‚$f$æ¥è¾“å‡º$\mathsf{Y}&#x3D;f(\mathsf{X})$ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªä¸$f$å…·æœ‰ç›¸åŒçš„è¶…å‚æ•°ã€ä½†è¾“å‡ºé€šé“æ•°é‡æ˜¯$\mathsf{X}$ä¸­é€šé“æ•°çš„è½¬ç½®å·ç§¯å±‚$g$ï¼Œé‚£$g(Y)$çš„å½¢çŠ¶å°†ä¸$\mathsf{X}$ç›¸åŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">X = paddle.rand(shape=(<span class="number">1</span>, <span class="number">10</span>, <span class="number">16</span>, <span class="number">16</span>))</span><br><span class="line">conv = nn.Conv2D(</span><br><span class="line">    <span class="number">10</span>, <span class="number">20</span>, kernel_size=<span class="number">5</span>, padding=<span class="number">2</span>, stride=<span class="number">3</span></span><br><span class="line">    )</span><br><span class="line">tconv = nn.Conv2DTranspose(</span><br><span class="line">    <span class="number">20</span>, <span class="number">10</span>, kernel_size=<span class="number">5</span>, padding=<span class="number">2</span>, stride=<span class="number">3</span></span><br><span class="line">    )</span><br><span class="line">tconv(conv(X)).shape == X.shape</span><br></pre></td></tr></table></figure><pre><code>True</code></pre><h1 id="ä¸‰ã€å…¨å·ç§¯ç½‘ç»œ"><a href="#ä¸‰ã€å…¨å·ç§¯ç½‘ç»œ" class="headerlink" title="ä¸‰ã€å…¨å·ç§¯ç½‘ç»œ"></a>ä¸‰ã€å…¨å·ç§¯ç½‘ç»œ</h1><p>:label:<code>sec_fcn</code></p><p>è¯­ä¹‰åˆ†å‰²æ˜¯å¯¹å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ åˆ†ç±»ã€‚<strong>å…¨å·ç§¯ç½‘ç»œï¼ˆfully convolutional networkï¼ŒFCNï¼‰</strong> é‡‡ç”¨å·ç§¯ç¥ç»ç½‘ç»œå®ç°äº†ä»å›¾åƒåƒç´ åˆ°åƒç´ ç±»åˆ«çš„å˜æ¢ã€‚ä¸æˆ‘ä»¬ä¹‹å‰åœ¨å›¾åƒåˆ†ç±»æˆ–ç›®æ ‡æ£€æµ‹éƒ¨åˆ†ä»‹ç»çš„å·ç§¯ç¥ç»ç½‘ç»œä¸åŒï¼Œå…¨å·ç§¯ç½‘ç»œå°†ä¸­é—´å±‚ç‰¹å¾å›¾çš„é«˜å’Œå®½å˜æ¢å›è¾“å…¥å›¾åƒçš„å°ºå¯¸ï¼šè¿™æ˜¯é€šè¿‡è½¬ç½®å·ç§¯å®ç°çš„ã€‚</p><p>å› æ­¤ï¼Œè¾“å‡ºçš„ç±»åˆ«é¢„æµ‹ä¸è¾“å…¥å›¾åƒåœ¨åƒç´ çº§åˆ«ä¸Šå…·æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»ï¼šé€šé“ç»´çš„è¾“å‡ºå³è¯¥ä½ç½®å¯¹åº”åƒç´ çš„ç±»åˆ«é¢„æµ‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure><h2 id="1-æ„é€ æ¨¡å‹"><a href="#1-æ„é€ æ¨¡å‹" class="headerlink" title="1. æ„é€ æ¨¡å‹"></a>1. æ„é€ æ¨¡å‹</h2><p>ä¸‹é¢æˆ‘ä»¬äº†è§£ä¸€ä¸‹å…¨å·ç§¯ç½‘ç»œæ¨¡å‹æœ€åŸºæœ¬çš„è®¾è®¡ã€‚å…¨å·ç§¯ç½‘ç»œå…ˆä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæŠ½å–å›¾åƒç‰¹å¾ï¼Œç„¶åé€šè¿‡$1\times 1$å·ç§¯å±‚å°†é€šé“æ•°å˜æ¢ä¸ºç±»åˆ«ä¸ªæ•°ï¼Œæœ€åé€šè¿‡è½¬ç½®å·ç§¯å±‚å°†ç‰¹å¾å›¾çš„é«˜å’Œå®½å˜æ¢ä¸ºè¾“å…¥å›¾åƒçš„å°ºå¯¸ã€‚å› æ­¤ï¼Œæ¨¡å‹è¾“å‡ºä¸è¾“å…¥å›¾åƒçš„é«˜å’Œå®½ç›¸åŒï¼Œä¸”æœ€ç»ˆè¾“å‡ºé€šé“åŒ…å«äº†è¯¥ç©ºé—´ä½ç½®åƒç´ çš„ç±»åˆ«é¢„æµ‹ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/036bdd31b81147f99d2e06665bf99de0dd6b41ed67e44fdd898a1c7f66f2be52" width = "800"  div align=center" width = "800"></center><center><br>å›¾7ï¼šå…¨å·ç§¯ç½‘ç»œ</br></center><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨åœ¨ImageNetæ•°æ®é›†ä¸Šé¢„è®­ç»ƒçš„ResNet-18æ¨¡å‹æ¥æå–å›¾åƒç‰¹å¾ï¼Œå¹¶å°†è¯¥ç½‘ç»œè®°ä¸º<code>pretrained_net</code>ã€‚ResNet-18æ¨¡å‹çš„æœ€åå‡ å±‚åŒ…æ‹¬å…¨å±€å¹³å‡æ± åŒ–å±‚å’Œå…¨è¿æ¥å±‚ï¼Œç„¶è€Œå…¨å·ç§¯ç½‘ç»œä¸­ä¸éœ€è¦å®ƒä»¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pretrained_net = vision.models.resnet18(pretrained=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">list</span>(pretrained_net.children())</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…¨å·ç§¯ç½‘ç»œ<code>net</code>ã€‚å®ƒå¤åˆ¶äº†ResNet-18ä¸­å¤§éƒ¨åˆ†çš„é¢„è®­ç»ƒå±‚ï¼Œé™¤äº†æœ€åçš„å…¨å±€å¹³å‡æ± åŒ–å±‚å’Œæœ€æ¥è¿‘è¾“å‡ºçš„å…¨è¿æ¥å±‚ã€‚<br>ç»™å®šé«˜åº¦ä¸º320å’Œå®½åº¦ä¸º480çš„è¾“å…¥ï¼Œ<code>net</code>çš„å‰å‘ä¼ æ’­å°†è¾“å…¥çš„é«˜å’Œå®½å‡å°è‡³åŸæ¥çš„$1&#x2F;32$ï¼Œå³10å’Œ15ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net = nn.Sequential(*<span class="built_in">list</span>(pretrained_net.children())[:-<span class="number">2</span>])</span><br><span class="line">X = paddle.rand(shape=(<span class="number">1</span>, <span class="number">3</span>, <span class="number">320</span>, <span class="number">480</span>))</span><br><span class="line">net(X).shape</span><br></pre></td></tr></table></figure><pre><code>[1, 512, 10, 15]</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨$1\times1$å·ç§¯å±‚å°†è¾“å‡ºé€šé“æ•°è½¬æ¢ä¸ºPascal VOC2012æ•°æ®é›†çš„ç±»æ•°ï¼ˆ21ç±»ï¼‰ã€‚æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†ç‰¹å¾å›¾çš„é«˜åº¦å’Œå®½åº¦å¢åŠ 32å€ï¼Œä»è€Œå°†å…¶å˜å›è¾“å…¥å›¾åƒçš„é«˜å’Œå®½ã€‚</p><p>å›æƒ³ä¸€ä¸‹ â€‹â€‹<code>sec_padding</code>ä¸­å·ç§¯å±‚è¾“å‡ºå½¢çŠ¶çš„è®¡ç®—æ–¹æ³•ï¼šç”±äº$(320-64+16\times2+32)&#x2F;32&#x3D;10$ä¸”$(480-64+16\times2+32)&#x2F;32&#x3D;15$ï¼Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªæ­¥å¹…ä¸º$32$çš„è½¬ç½®å·ç§¯å±‚ï¼Œå¹¶å°†å·ç§¯æ ¸çš„é«˜å’Œå®½è®¾ä¸º$64$ï¼Œå¡«å……ä¸º$16$ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚æœæ­¥å¹…ä¸º$s$ï¼Œå¡«å……ä¸º$s&#x2F;2$ï¼ˆå‡è®¾$s&#x2F;2$æ˜¯æ•´æ•°ï¼‰ä¸”å·ç§¯æ ¸çš„é«˜å’Œå®½ä¸º$2s$ï¼Œè½¬ç½®å·ç§¯æ ¸ä¼šå°†è¾“å…¥çš„é«˜å’Œå®½åˆ†åˆ«æ”¾å¤§$s$å€ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">num_classes = <span class="number">21</span></span><br><span class="line"><span class="comment"># æ·»åŠ ä¸€ä¸ªå­å±‚ add_sublayer</span></span><br><span class="line">net.add_sublayer(<span class="string">&#x27;final_conv&#x27;</span>, nn.Conv2D(<span class="number">512</span>, num_classes, kernel_size=<span class="number">1</span>))</span><br><span class="line">net.add_sublayer(<span class="string">&#x27;transpose_conv&#x27;</span>, </span><br><span class="line">                nn.Conv2DTranspose(</span><br><span class="line">                                num_classes, </span><br><span class="line">                                num_classes, </span><br><span class="line">                                kernel_size=<span class="number">64</span>, </span><br><span class="line">                                padding=<span class="number">16</span>, </span><br><span class="line">                                stride=<span class="number">32</span></span><br><span class="line">                                )</span><br><span class="line">                )</span><br><span class="line">net(X).shape</span><br></pre></td></tr></table></figure><pre><code>[1, 21, 320, 480]</code></pre><h2 id="2-åˆå§‹åŒ–è½¬ç½®å·ç§¯å±‚"><a href="#2-åˆå§‹åŒ–è½¬ç½®å·ç§¯å±‚" class="headerlink" title="2. åˆå§‹åŒ–è½¬ç½®å·ç§¯å±‚"></a>2. åˆå§‹åŒ–è½¬ç½®å·ç§¯å±‚</h2><p>åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶éœ€è¦å°†å›¾åƒæ”¾å¤§ï¼Œå³<strong>ä¸Šé‡‡æ ·ï¼ˆupsamplingï¼‰</strong>ã€‚<strong>åŒçº¿æ€§æ’å€¼ï¼ˆbilinear interpolationï¼‰</strong> æ˜¯å¸¸ç”¨çš„ä¸Šé‡‡æ ·æ–¹æ³•ä¹‹ä¸€ï¼Œå®ƒä¹Ÿç»å¸¸ç”¨äºåˆå§‹åŒ–è½¬ç½®å·ç§¯å±‚ã€‚</p><p>ä¸ºäº†è§£é‡ŠåŒçº¿æ€§æ’å€¼ï¼Œå‡è®¾ç»™å®šè¾“å…¥å›¾åƒï¼Œæˆ‘ä»¬æƒ³è¦è®¡ç®—ä¸Šé‡‡æ ·è¾“å‡ºå›¾åƒä¸Šçš„æ¯ä¸ªåƒç´ ã€‚é¦–å…ˆï¼Œå°†è¾“å‡ºå›¾åƒçš„åæ ‡$(x,y)$æ˜ å°„åˆ°è¾“å…¥å›¾åƒçš„åæ ‡$(xâ€™,yâ€™)$ä¸Šã€‚ä¾‹å¦‚ï¼Œæ ¹æ®è¾“å…¥ä¸è¾“å‡ºçš„å°ºå¯¸ä¹‹æ¯”æ¥æ˜ å°„ã€‚è¯·æ³¨æ„ï¼Œæ˜ å°„åçš„$xâ€²$å’Œ$yâ€²$æ˜¯å®æ•°ã€‚ç„¶åï¼Œåœ¨è¾“å…¥å›¾åƒä¸Šæ‰¾åˆ°ç¦»åæ ‡$(xâ€™,yâ€™)$æœ€è¿‘çš„4ä¸ªåƒç´ ã€‚æœ€åï¼Œè¾“å‡ºå›¾åƒåœ¨åæ ‡$(x,y)$ä¸Šçš„åƒç´ ä¾æ®è¾“å…¥å›¾åƒä¸Šè¿™4ä¸ªåƒç´ åŠå…¶ä¸$(xâ€™,yâ€™)$çš„ç›¸å¯¹è·ç¦»æ¥è®¡ç®—ã€‚åŒçº¿æ€§æ’å€¼çš„ä¸Šé‡‡æ ·å¯ä»¥é€šè¿‡è½¬ç½®å·ç§¯å±‚å®ç°ï¼Œå†…æ ¸ç”±ä»¥ä¸‹<code>bilinear_kernel</code>å‡½æ•°æ„é€ ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨<strong>ä¸­å¿ƒä½ç½®</strong>æ’å…¥äº†ä¸€ä¸ªå€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;åˆ©ç”¨åŒçº¿æ€§æ’å€¼æ¥åˆå§‹åŒ–å·ç§¯æ ¸å‚æ•°&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bilinear_kernel</span>(<span class="params">in_channels, out_channels, kernel_size</span>):</span><br><span class="line">    factor = (kernel_size + <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">    <span class="comment"># å¡«å……ä¸ªæ•°</span></span><br><span class="line">    <span class="built_in">print</span>(factor)</span><br><span class="line">    <span class="keyword">if</span> kernel_size % <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">        center = factor - <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        center = factor - <span class="number">0.5</span></span><br><span class="line">    <span class="comment"># ä¸­å¿ƒä½ç½®</span></span><br><span class="line">    <span class="built_in">print</span>(center)</span><br><span class="line">    <span class="comment"># è¡¨ç¤ºå‡ºkernel_sizeé•¿åº¦çš„åˆ—å‘é‡å’Œè¡Œå‘é‡</span></span><br><span class="line">    og = (paddle.arange(kernel_size).reshape((-<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">    paddle.arange(kernel_size).reshape((<span class="number">1</span>, -<span class="number">1</span>)))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;og&quot;</span>, og)</span><br><span class="line">    <span class="comment"># ä½¿ç”¨åæ ‡åŠç›¸å¯¹è·ç¦»è®¡ç®—</span></span><br><span class="line">    filt = (<span class="number">1</span> - paddle.<span class="built_in">abs</span>(og[<span class="number">0</span>] - center) / factor) * (<span class="number">1</span> - paddle.<span class="built_in">abs</span>(og[<span class="number">1</span>] - center) / factor)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span> - paddle.<span class="built_in">abs</span>(og[<span class="number">0</span>] - center) / factor)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span> - paddle.<span class="built_in">abs</span>(og[<span class="number">1</span>] - center) / factor)</span><br><span class="line">    </span><br><span class="line">    weight = paddle.zeros((in_channels, out_channels, kernel_size, kernel_size))</span><br><span class="line">    weight[<span class="built_in">range</span>(in_channels), <span class="built_in">range</span>(out_channels), :, :] = filt</span><br><span class="line">    <span class="built_in">print</span>(weight.shape)</span><br><span class="line">    <span class="keyword">return</span> weight</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ç”¨åŒçº¿æ€§æ’å€¼çš„ä¸Šé‡‡æ ·å®éªŒå®ƒç”±è½¬ç½®å·ç§¯å±‚å®ç°ã€‚æˆ‘ä»¬æ„é€ ä¸€ä¸ªå°†è¾“å…¥çš„é«˜å’Œå®½æ”¾å¤§2å€çš„è½¬ç½®å·ç§¯å±‚ï¼Œå¹¶å°†å…¶å·ç§¯æ ¸ç”¨<code>bilinear_kernel</code>å‡½æ•°åˆå§‹åŒ–ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conv_trans = nn.Conv2DTranspose(<span class="number">3</span>, <span class="number">3</span>, kernel_size=<span class="number">4</span>, padding=<span class="number">1</span>, stride=<span class="number">2</span>)</span><br><span class="line">conv_trans.weight.set_value(bilinear_kernel(<span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"><span class="comment"># [3, 3, 4, 4]--&gt; [é€šé“ï¼Œé€šé“ï¼Œæ ¸å¤§å°ï¼Œæ ¸å¤§å°]--&gt; 4x4å°±æ˜¯æƒé‡çš„æ•°é‡</span></span><br></pre></td></tr></table></figure><pre><code>21.5og (Tensor(shape=[4, 1], dtype=int64, place=Place(gpu:0), stop_gradient=True,       [[0],        [1],        [2],        [3]]), Tensor(shape=[1, 4], dtype=int64, place=Place(gpu:0), stop_gradient=True,       [[0, 1, 2, 3]]))Tensor(shape=[4, 1], dtype=float32, place=Place(gpu:0), stop_gradient=True,       [[0.25000000],        [0.75000000],        [0.75000000],        [0.25000000]])Tensor(shape=[1, 4], dtype=float32, place=Place(gpu:0), stop_gradient=True,       [[0.25000000, 0.75000000, 0.75000000, 0.25000000]])[3, 3, 4, 4]</code></pre><p>è¯»å–å›¾åƒ<code>X</code>ï¼Œå°†ä¸Šé‡‡æ ·çš„ç»“æœè®°ä½œ<code>Y</code>ã€‚ä¸ºäº†æ‰“å°å›¾åƒï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´é€šé“ç»´çš„ä½ç½®ã€‚<br>å¯ä»¥çœ‹åˆ°ï¼Œè½¬ç½®å·ç§¯å±‚å°†å›¾åƒçš„é«˜å’Œå®½åˆ†åˆ«æ”¾å¤§äº†2å€ã€‚é™¤äº†åæ ‡åˆ»åº¦ä¸åŒï¼ŒåŒçº¿æ€§æ’å€¼æ”¾å¤§çš„å›¾åƒå’Œåœ¨ :numref:<code>sec_bbox</code>ä¸­æ‰“å°å‡ºçš„åŸå›¾çœ‹ä¸Šå»æ²¡ä»€ä¹ˆä¸¤æ ·ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">img = vision.transforms.ToTensor()(ppl.Image.<span class="built_in">open</span>(<span class="string">&#x27;work/catdog.jpg&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(img.shape) <span class="comment"># [é€šé“ï¼Œé«˜ï¼Œå®½]</span></span><br><span class="line">X = img.unsqueeze(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(X.shape)</span><br><span class="line">Y = conv_trans(X) <span class="comment"># åŒçº¿æ€§æ’å€¼åè¾“å‡ºY--&gt; é«˜å®½æ”¾å¤§2å€</span></span><br><span class="line">out_img = Y[<span class="number">0</span>].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)).detach()</span><br><span class="line"><span class="built_in">print</span>(out_img.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;********************&quot;</span>)</span><br><span class="line"></span><br><span class="line">ppl.set_figsize()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;input image shape:&#x27;</span>, img.transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)).shape)</span><br><span class="line">ppl.plt.imshow(img.transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;output image shape:&#x27;</span>, out_img.shape)</span><br><span class="line">ppl.plt.imshow(out_img)</span><br></pre></td></tr></table></figure><pre><code>[3, 561, 728][1, 3, 561, 728][1122, 1456, 3]********************input image shape: [561, 728, 3]output image shape: [1122, 1456, 3]</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/77.png" alt="svg"></p><p>åœ¨å…¨å·ç§¯ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬ç”¨åŒçº¿æ€§æ’å€¼çš„ä¸Šé‡‡æ ·åˆå§‹åŒ–è½¬ç½®å·ç§¯å±‚ã€‚å¯¹äº$1\times 1$å·ç§¯å±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨Xavieråˆå§‹åŒ–å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">W = bilinear_kernel(num_classes, num_classes, <span class="number">64</span>)</span><br><span class="line">net.transpose_conv.weight.set_value(W)</span><br></pre></td></tr></table></figure><h2 id="3-è¯»å–æ•°æ®é›†"><a href="#3-è¯»å–æ•°æ®é›†" class="headerlink" title="3. è¯»å–æ•°æ®é›†"></a>3. è¯»å–æ•°æ®é›†</h2><p>æˆ‘ä»¬è¯»å–è¯­ä¹‰åˆ†å‰²è¯»å–æ•°æ®é›†ã€‚æŒ‡å®šéšæœºè£å‰ªçš„è¾“å‡ºå›¾åƒçš„å½¢çŠ¶ä¸º$320\times 480$ï¼šé«˜å’Œå®½éƒ½å¯ä»¥è¢«$32$æ•´é™¤ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">batch_size, crop_size = <span class="number">8</span>, (<span class="number">320</span>, <span class="number">480</span>)</span><br><span class="line">train_iter, test_iter = ppl.load_data_voc(batch_size, crop_size)</span><br></pre></td></tr></table></figure><pre><code>read 1114 examplesread 1078 examples</code></pre><h2 id="4-è®­ç»ƒ"><a href="#4-è®­ç»ƒ" class="headerlink" title="4. è®­ç»ƒ"></a>4. è®­ç»ƒ</h2><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥è®­ç»ƒå…¨å·ç§¯ç½‘ç»œäº†ã€‚è¿™é‡Œçš„æŸå¤±å‡½æ•°å’Œå‡†ç¡®ç‡è®¡ç®—ä¸å›¾åƒåˆ†ç±»ä¸­çš„å¹¶æ²¡æœ‰æœ¬è´¨ä¸Šçš„ä¸åŒï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨è½¬ç½®å·ç§¯å±‚çš„é€šé“æ¥é¢„æµ‹åƒç´ çš„ç±»åˆ«ï¼Œæ‰€ä»¥éœ€è¦åœ¨æŸå¤±è®¡ç®—ä¸­æŒ‡å®šé€šé“ç»´ã€‚æ­¤å¤–ï¼Œæ¨¡å‹åŸºäºæ¯ä¸ªåƒç´ çš„é¢„æµ‹ç±»åˆ«æ˜¯å¦æ­£ç¡®æ¥è®¡ç®—å‡†ç¡®ç‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">loss</span>(<span class="params">inputs, targets</span>):</span><br><span class="line">    <span class="comment"># å…ˆæ±‚é«˜çš„å¹³å‡ï¼Œå†æ±‚å®½çš„å¹³å‡</span></span><br><span class="line">    <span class="keyword">return</span> F.cross_entropy(inputs, targets, reduction=<span class="string">&#x27;none&#x27;</span>).mean(<span class="number">1</span>).mean(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evaluate_accuracy</span>(<span class="params">net, data_iter</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(net, paddle.nn.Layer):</span><br><span class="line">        net.<span class="built_in">eval</span>()</span><br><span class="line">    metric = ppl.Accumulator(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">            X = paddle.cast(X.transpose((<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>)), dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            pred = net(X)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(pred.shape) &gt; <span class="number">1</span> <span class="keyword">and</span> pred.shape[<span class="number">1</span>] &gt; <span class="number">1</span>:</span><br><span class="line">                y_hat = ppl.argmax(pred, axis=<span class="number">1</span>)</span><br><span class="line">            cmp = paddle.cast(y_hat, y.dtype) == y</span><br><span class="line">            metric.add(<span class="built_in">float</span>(cmp.<span class="built_in">sum</span>()), y.numel())</span><br><span class="line">    <span class="keyword">return</span> metric[<span class="number">0</span>] / metric[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_batch_ch13</span>(<span class="params">net, X, y, loss, trainer</span>):</span><br><span class="line">    net.train()</span><br><span class="line">    trainer.clear_grad()</span><br><span class="line">    pred = net(X)</span><br><span class="line">    l = loss(pred.transpose((<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>)), y)</span><br><span class="line">    l.<span class="built_in">sum</span>().backward()</span><br><span class="line">    trainer.step()</span><br><span class="line">    train_loss_sum = l.<span class="built_in">sum</span>()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(pred.shape) &gt; <span class="number">1</span> <span class="keyword">and</span> pred.shape[<span class="number">1</span>] &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="comment"># å°†one-hotè½¬æ¢ä¸ºæ•°å€¼çš„å½¢å¼</span></span><br><span class="line">        y_hat = ppl.argmax(pred, axis=<span class="number">1</span>)</span><br><span class="line">    cmp = paddle.cast(y_hat, y.dtype) == y</span><br><span class="line">    train_acc_sum = <span class="built_in">float</span>(cmp.<span class="built_in">sum</span>())</span><br><span class="line">    <span class="keyword">return</span> train_loss_sum, train_acc_sum</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_ch13</span>(<span class="params">net, train_iter, test_iter, loss, trainer, num_epochs</span>):</span><br><span class="line">    num_batches = <span class="built_in">len</span>(train_iter)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        metric = ppl.Accumulator(<span class="number">4</span>)</span><br><span class="line">        <span class="keyword">for</span> i, (features, labels) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_iter):</span><br><span class="line">            <span class="comment"># æ•°æ®ç»´åº¦éœ€è¦ä¿®æ”¹ä¸º[N, C, H, W]ï¼Œä»¥ç¬¦åˆæ¨¡å‹çš„è¾“å…¥ç»´åº¦ã€‚</span></span><br><span class="line">            <span class="comment"># æ¨¡å‹çš„è¾“å…¥æ•°æ®ç±»å‹ä¸ºfloat32</span></span><br><span class="line">            features = paddle.cast(features.transpose((<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>)), dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            l, acc = train_batch_ch13(net, features, labels, loss, trainer)</span><br><span class="line">            metric.add(l, acc, labels.shape[<span class="number">0</span>], labels.numel())</span><br><span class="line">        test_acc = evaluate_accuracy(net, test_iter)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;loss <span class="subst">&#123;metric[<span class="number">0</span>] / metric[<span class="number">2</span>]:<span class="number">.3</span>f&#125;</span>,  &#x27;</span></span><br><span class="line">          <span class="string">f&#x27;train acc <span class="subst">&#123;metric[<span class="number">1</span>] / metric[<span class="number">3</span>]:<span class="number">.3</span>f&#125;</span>,  &#x27;</span></span><br><span class="line">          <span class="string">f&#x27;test acc <span class="subst">&#123;test_acc:<span class="number">.3</span>f&#125;</span> &#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num_epochs, lr, wd = <span class="number">2</span>, <span class="number">0.001</span>, <span class="number">1e-3</span></span><br><span class="line">trainer = paddle.optimizer.SGD(learning_rate=lr, parameters=net.parameters(), weight_decay=wd)</span><br><span class="line">train_ch13(net, train_iter, test_iter, loss, trainer, num_epochs)</span><br></pre></td></tr></table></figure><pre><code>loss 0.492,  train acc 0.852,  test acc 0.844 </code></pre><h2 id="5-é¢„æµ‹"><a href="#5-é¢„æµ‹" class="headerlink" title="5. é¢„æµ‹"></a>5. é¢„æµ‹</h2><p>åœ¨é¢„æµ‹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†è¾“å…¥å›¾åƒåœ¨å„ä¸ªé€šé“åšæ ‡å‡†åŒ–ï¼Œå¹¶è½¬æˆå·ç§¯ç¥ç»ç½‘ç»œæ‰€éœ€è¦çš„å››ç»´è¾“å…¥æ ¼å¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">predict</span>(<span class="params">img</span>): <span class="comment"># è¿”å›ä¸€ä¸ªè·ŸåŸå›¾é«˜å®½ç­‰åŒçš„çŸ©é˜µï¼š[320, 480]</span></span><br><span class="line">    <span class="comment"># expand_dims å¢åŠ ä¸€ä¸ªç»´åº¦</span></span><br><span class="line">    X = np.expand_dims(test_iter.dataset.normalize_image(img), <span class="number">0</span>)</span><br><span class="line">    <span class="comment">#print(X.shape) # [1, 3, 320, 480]</span></span><br><span class="line">    X = paddle.to_tensor(X, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    pred = net(X).argmax(axis=<span class="number">1</span>)</span><br><span class="line">    <span class="comment">#print(pred.shape) # [1, 320, 480]</span></span><br><span class="line">    <span class="keyword">return</span> pred.reshape((pred.shape[<span class="number">1</span>], pred.shape[<span class="number">2</span>]))</span><br></pre></td></tr></table></figure><p>ä¸ºäº†<strong>å¯è§†åŒ–é¢„æµ‹çš„ç±»åˆ«</strong>ç»™æ¯ä¸ªåƒç´ ï¼Œæˆ‘ä»¬å°†é¢„æµ‹ç±»åˆ«æ˜ å°„å›å®ƒä»¬åœ¨æ•°æ®é›†ä¸­çš„æ ‡æ³¨é¢œè‰²ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">label2image</span>(<span class="params">pred</span>):</span><br><span class="line">    colormap = paddle.to_tensor(ppl.VOC_COLORMAP)</span><br><span class="line">    <span class="comment"># print(colormap.shape)</span></span><br><span class="line">    X = paddle.cast(pred, dtype=<span class="string">&#x27;int64&#x27;</span>)  <span class="comment"># è½¬æ¢æ•°æ®ç±»å‹</span></span><br><span class="line">    <span class="comment"># print(&quot;label2image: &quot;, X.shape)</span></span><br><span class="line">    <span class="keyword">return</span> colormap[X]</span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ•°æ®é›†ä¸­çš„å›¾åƒå¤§å°å’Œå½¢çŠ¶å„å¼‚ã€‚ç”±äºæ¨¡å‹ä½¿ç”¨äº†æ­¥å¹…ä¸º32çš„è½¬ç½®å·ç§¯å±‚ï¼Œå› æ­¤å½“è¾“å…¥å›¾åƒçš„é«˜æˆ–å®½æ— æ³•è¢«32æ•´é™¤æ—¶ï¼Œè½¬ç½®å·ç§¯å±‚è¾“å‡ºçš„é«˜æˆ–å®½ä¼šä¸è¾“å…¥å›¾åƒçš„å°ºå¯¸æœ‰åå·®ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›¾åƒä¸­æˆªå–å¤šå—é«˜å’Œå®½ä¸º32çš„æ•´æ•°å€çš„çŸ©å½¢åŒºåŸŸï¼Œå¹¶åˆ†åˆ«å¯¹è¿™äº›åŒºåŸŸä¸­çš„åƒç´ åšå‰å‘ä¼ æ’­ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›åŒºåŸŸçš„å¹¶é›†éœ€è¦å®Œæ•´è¦†ç›–è¾“å…¥å›¾åƒã€‚å½“ä¸€ä¸ªåƒç´ è¢«å¤šä¸ªåŒºåŸŸæ‰€è¦†ç›–æ—¶ï¼Œå®ƒåœ¨ä¸åŒåŒºåŸŸå‰å‘ä¼ æ’­ä¸­è½¬ç½®å·ç§¯å±‚è¾“å‡ºçš„å¹³å‡å€¼å¯ä»¥ä½œä¸º<code>softmax</code>è¿ç®—çš„è¾“å…¥ï¼Œä»è€Œé¢„æµ‹ç±»åˆ«ã€‚</p><p>ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªè¯»å–å‡ å¼ è¾ƒå¤§çš„æµ‹è¯•å›¾åƒï¼Œå¹¶ä»å›¾åƒçš„å·¦ä¸Šè§’å¼€å§‹æˆªå–å½¢çŠ¶ä¸º$320\times480$çš„åŒºåŸŸç”¨äºé¢„æµ‹ã€‚å¯¹äºè¿™äº›æµ‹è¯•å›¾åƒï¼Œæˆ‘ä»¬é€ä¸€æ‰“å°å®ƒä»¬æˆªå–çš„åŒºåŸŸï¼Œå†æ‰“å°é¢„æµ‹ç»“æœï¼Œæœ€åæ‰“å°æ ‡æ³¨çš„ç±»åˆ«ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">voc_dir = <span class="string">&#x27;VOCdevkit/VOC2012&#x27;</span></span><br><span class="line">test_images, test_labels = ppl.read_voc_images(voc_dir, <span class="literal">False</span>)</span><br><span class="line">n, imgs = <span class="number">4</span>, []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    crop_rect = (<span class="number">320</span>, <span class="number">480</span>)</span><br><span class="line">    crop_rect2 = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">320</span>, <span class="number">480</span>) <span class="comment"># ä»å·¦ä¸Šè§’å¼€å§‹æˆªå–å½¢çŠ¶</span></span><br><span class="line">    rect = paddle.vision.transforms.RandomCrop(size=crop_rect)._get_param(</span><br><span class="line">                            img=test_images[i].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)),</span><br><span class="line">                            output_size=crop_rect</span><br><span class="line">                            )</span><br><span class="line">    X = paddle.vision.transforms.functional.crop(test_images[i].transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)), *crop_rect2)</span><br><span class="line">    X = X.transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">    pred = label2image(predict(X)) <span class="comment"># é¢„æµ‹å›¾</span></span><br><span class="line">    croped = paddle.vision.transforms.crop(test_labels[i], *rect)</span><br><span class="line">    croped = croped.transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)) <span class="comment"># çœŸå®æ ‡ç­¾</span></span><br><span class="line">    X = X.transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)) <span class="comment"># åŸå›¾</span></span><br><span class="line">    imgs += [X, pred, paddle.vision.transforms.crop(test_labels[i], *crop_rect2).transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>))]</span><br><span class="line"><span class="comment"># ç¬¬ä¸€è¡Œæ˜¯çœŸå®å›¾ç‰‡ï¼Œç¬¬äºŒè¡Œæ˜¯é¢„æµ‹ç»“æœï¼Œç¬¬ä¸‰è¡Œæ˜¯æ ‡ç­¾å›¾ç‰‡</span></span><br><span class="line">ppl.show_images(imgs[::<span class="number">3</span>] + imgs[<span class="number">1</span>::<span class="number">3</span>] + imgs[<span class="number">2</span>::<span class="number">3</span>], <span class="number">3</span>, n, scale=<span class="number">3</span>);</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/78.png" alt="svg"></p><h1 id="å››ã€å°ç»“"><a href="#å››ã€å°ç»“" class="headerlink" title="å››ã€å°ç»“"></a>å››ã€å°ç»“</h1><ul><li>è¯­ä¹‰åˆ†å‰²é€šè¿‡å°†å›¾åƒåˆ’åˆ†ä¸ºå±äºä¸åŒè¯­ä¹‰ç±»åˆ«çš„åŒºåŸŸï¼Œæ¥è¯†åˆ«å¹¶ç†è§£å›¾åƒä¸­åƒç´ çº§åˆ«çš„å†…å®¹ã€‚</li><li>ç”±äºè¯­ä¹‰åˆ†å‰²çš„è¾“å…¥å›¾åƒå’Œæ ‡ç­¾åœ¨åƒç´ ä¸Šä¸€ä¸€å¯¹åº”ï¼Œè¾“å…¥å›¾åƒä¼šè¢«éšæœºè£å‰ªä¸ºå›ºå®šå°ºå¯¸è€Œä¸æ˜¯ç¼©æ”¾ã€‚</li><li>ä¸é€šè¿‡å·ç§¯æ ¸å‡å°‘è¾“å…¥å…ƒç´ çš„å¸¸è§„å·ç§¯ç›¸åï¼Œè½¬ç½®å·ç§¯é€šè¿‡å·ç§¯æ ¸å¹¿æ’­è¾“å…¥å…ƒç´ ï¼Œä»è€Œäº§ç”Ÿå½¢çŠ¶å¤§äºè¾“å…¥çš„è¾“å‡ºã€‚</li><li>å…¨å·ç§¯ç½‘ç»œå…ˆä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæŠ½å–å›¾åƒç‰¹å¾ï¼Œç„¶åé€šè¿‡$1\times 1$å·ç§¯å±‚å°†é€šé“æ•°å˜æ¢ä¸ºç±»åˆ«ä¸ªæ•°ï¼Œæœ€åé€šè¿‡è½¬ç½®å·ç§¯å±‚å°†ç‰¹å¾å›¾çš„é«˜å’Œå®½å˜æ¢ä¸ºè¾“å…¥å›¾åƒçš„å°ºå¯¸ã€‚</li><li>åœ¨å…¨å·ç§¯ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†è½¬ç½®å·ç§¯å±‚åˆå§‹åŒ–ä¸ºåŒçº¿æ€§æ’å€¼çš„ä¸Šé‡‡æ ·ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ é«˜çº§_è®¡ç®—æœºè§†è§‰ä¹‹å›¾åƒåˆ†å‰² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 6.4-å…¶ä»–ç›®æ ‡æ£€æµ‹æ¨¡å‹æ¦‚è¿°</title>
      <link href="/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.4-%E5%85%B6%E4%BB%96%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%A8%A1%E5%9E%8B%E6%A6%82%E8%BF%B0/"/>
      <url>/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.4-%E5%85%B6%E4%BB%96%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%A8%A1%E5%9E%8B%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å…¶ä»–ç›®æ ‡æ£€æµ‹æ¨¡å‹æ¦‚è¿°"><a href="#å…¶ä»–ç›®æ ‡æ£€æµ‹æ¨¡å‹æ¦‚è¿°" class="headerlink" title="å…¶ä»–ç›®æ ‡æ£€æµ‹æ¨¡å‹æ¦‚è¿°"></a><strong>å…¶ä»–ç›®æ ‡æ£€æµ‹æ¨¡å‹æ¦‚è¿°</strong></h1><p>ç›®æ ‡æ£€æµ‹æ˜¯è®¡ç®—æœºè§†è§‰é¢†åŸŸä¸­çš„ä¸€ä¸ªé‡è¦ç ”ç©¶æ–¹å‘ï¼Œä¹Ÿæ˜¯å…¶ä»–å¤æ‚è§†è§‰ä»»åŠ¡çš„åŸºç¡€ã€‚ ç»™å®šä¸€å¼ å›¾åƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›®æ ‡æ£€æµ‹æ¥å¯¹å›¾åƒä¸­ç‰©ä½“çš„ä½ç½®è¿›è¡Œæ£€æµ‹ï¼ŒåŒæ—¶åˆ¤æ–­ç‰©ä½“çš„ç±»åˆ«ã€‚</p><p>æ ¹æ®ç®—æ³•çš„æµç¨‹å¯ä»¥å°†ç›®æ ‡æ£€æµ‹ç®—æ³•åˆ†ä¸ºä¸¤ç§æµæ´¾ï¼Œä¸€ç§æ˜¯ä»¥Faster R-CNNä¸ºä»£è¡¨çš„Two-Stageç®—æ³•ï¼Œå¦ä¸€ç§æ˜¯ä»¥SSDã€YOLOä¸ºä»£è¡¨çš„One-Stageç®—æ³•ã€‚</p><ul><li>Two-Stageç®—æ³•ï¼šå…ˆè¿›è¡Œ<strong>åŒºåŸŸç”Ÿæˆï¼ˆRegion Proposal,RPï¼‰</strong>(ä¸€ä¸ªå¯èƒ½åŒ…å«å¾…æ£€æµ‹ç‰©ä½“çš„é¢„é€‰æ¡†)ï¼Œå†é€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œè¿›è¡Œæ ·æœ¬åˆ†ç±»ã€‚ä»»åŠ¡ï¼šç‰¹å¾æå–-&gt;ç”ŸæˆRP-&gt;åˆ†ç±»&#x2F;å®šä½å›å½’ã€‚</li><li>One-Stageç®—æ³•ï¼šä¸ç”¨RPï¼Œç›´æ¥åœ¨ç½‘ç»œä¸­æå–ç‰¹å¾æ¥é¢„æµ‹ç‰©ä½“åˆ†ç±»å’Œä½ç½®ã€‚ä»»åŠ¡ï¼šç‰¹å¾æå–-&gt;åˆ†ç±»&#x2F;å®šä½å›å½’ã€‚</li></ul><p>ä¸¤ç§æ–¹å¼å„æœ‰å„çš„ç‰¹åˆ«ï¼ŒTwo-Stageå¾ˆæ˜æ˜¾æ£€æµ‹çš„ç²¾åº¦è¦é«˜ä¸€ç‚¹ï¼Œä½†æ˜¯æ£€æµ‹é€Ÿåº¦æ…¢ï¼›One-Stageæ”¾å¼ƒäº†é«˜ç²¾åº¦ï¼Œä½†æ˜¯æ¢æ¥äº†é€Ÿåº¦ï¼Œé€Ÿåº¦æ¯”Two-Stageç®—æ³•å¿«å¾ˆå¤šã€‚</p><h2 id="ä¸€ã€ä¼ ç»Ÿç›®æ ‡æ£€æµ‹ç®—æ³•"><a href="#ä¸€ã€ä¼ ç»Ÿç›®æ ‡æ£€æµ‹ç®—æ³•" class="headerlink" title="ä¸€ã€ä¼ ç»Ÿç›®æ ‡æ£€æµ‹ç®—æ³•"></a>ä¸€ã€ä¼ ç»Ÿç›®æ ‡æ£€æµ‹ç®—æ³•</h2><p>ä¼ ç»Ÿç›®æ ‡æ£€æµ‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>ï¼ˆ1ï¼‰è¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼›ç”Ÿæˆä¸€ç³»åˆ—å€™é€‰æ¡†ï¼›</p><p>ï¼ˆ2ï¼‰å¯¹å€™é€‰æ¡†è¿›è¡Œç‰¹å¾æå–ï¼›</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨åˆ†ç±»å™¨å¯¹æ¡†å†…ç‰©ä½“ç±»åˆ«åˆ¤æ–­ï¼›</p><p>ï¼ˆ4ï¼‰ä½¿ç”¨NMSéæå¤§å€¼æŠ‘åˆ¶æ¥ç­›é€‰æœ€ä¼˜çš„æ¡†</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/83d9a3d0d07b442489766dcd3a3dff750f70cff2020041f09c785d7fb1adce92" width = "800"></center><center><br>å›¾1ï¼šä¼ ç»Ÿç›®æ ‡æ£€æµ‹ç®—æ³•æ£€æµ‹ç¤ºæ„å›¾</br></center><p><br></br></p><h2 id="äºŒã€Two-stage-ç›®æ ‡æ£€æµ‹ç®—æ³•"><a href="#äºŒã€Two-stage-ç›®æ ‡æ£€æµ‹ç®—æ³•" class="headerlink" title="äºŒã€Two stage ç›®æ ‡æ£€æµ‹ç®—æ³•"></a>äºŒã€Two stage ç›®æ ‡æ£€æµ‹ç®—æ³•</h2><h3 id="1ï¼‰R-CNN"><a href="#1ï¼‰R-CNN" class="headerlink" title="1ï¼‰R-CNN"></a><strong>1ï¼‰R-CNN</strong></h3><p>R-CNNï¼ˆRegion with CNN Featureï¼‰2014å¹´æå‡ºï¼Œåœ¨æ­¤ä¹‹å‰éƒ½æ˜¯ä¼ ç»Ÿçš„ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œäººä¸ºå®šä¹‰ç‰¹å¾è¿›è¡Œæ£€æµ‹ï¼Œè¿›å…¥äº†ç“¶é¢ˆæœŸï¼Œè¿›æ­¥ç¼“æ…¢ï¼ŒR-CNNå‡ºæ¥ä¹‹åå°†ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„å‡†ç¡®ç‡è‡³å°‘æé«˜äº†30%ï¼Œæ˜¯ç¬¬ä¸€ä¸ªæˆåŠŸå°†æ·±åº¦å­¦ä¹ åº”ç”¨åˆ°ç›®æ ‡æ£€æµ‹ä¸Šçš„ç®—æ³•ã€‚R-CNNåŸºäºå·ç§¯ç¥ç»ç½‘ç»œ(CNN)ï¼Œçº¿æ€§å›å½’ï¼Œå’Œ<a href="https://shao12138.blog.csdn.net/article/details/121164645?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~Rate-1-121164645-blog-125703635.pc_relevant_3mothn_strategy_recovery&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~Rate-1-121164645-blog-125703635.pc_relevant_3mothn_strategy_recovery&utm_relevant_index=1">æ”¯æŒå‘é‡æœº(SVM)</a>ç­‰ç®—æ³•ï¼Œå®ç°ç›®æ ‡æ£€æµ‹æŠ€æœ¯ã€‚</p><p>R-CNNä½œä¸ºR-CNNç³»åˆ—çš„ç¬¬â¼€ä»£ç®—æ³•ï¼Œå…¶å®æ²¡æœ‰è¿‡å¤šçš„ä½¿ç”¨â€œæ·±åº¦å­¦ä¹ â€æ€æƒ³ï¼Œè€Œæ˜¯å°†â€œæ·±åº¦å­¦ä¹ â€å’Œä¼ ç»Ÿçš„â€œè®¡ç®—æœºè§†è§‰â€çš„çŸ¥è¯†ç›¸ç»“åˆã€‚R-CNNç®—æ³•æµç¨‹å¯åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š</p><ol><li>ä¸€å¼ å›¾åƒç”Ÿæˆ1k~2kä¸ªå€™é€‰åŒºåŸŸï¼ˆSelective Searchæ–¹æ³•ï¼‰ï¼›</li><li>å¯¹æ¯ä¸ªå€™é€‰åŒºåŸŸï¼Œä½¿ç”¨æ·±åº¦ç½‘ç»œæå–ç‰¹å¾ï¼›</li><li>ç‰¹å¾é€å…¥æ¯ä¸€ç±»çš„SVMåˆ†ç±»å™¨ï¼Œåˆ¤æ–­æ˜¯å¦å±äºè¯¥ç±»ï¼›</li><li>ä½¿ç”¨å›å½’å™¨ç²¾ç»†ä¿®æ­£å€™é€‰æ¡†ä½ç½®ã€‚ä¾‹å¦‚å¯¹äºæ¯ä¸ªæ¡†ï¼Œå›å½’å™¨é¢„æµ‹å…¶ä¸çœŸå®æ¡†çš„è·ç¦»å·®è·(å·¦ä¸Šè§’ä¸å³ä¸‹è§’ç‚¹åæ ‡)ã€‚<br><br></br></li></ol><center><img src="https://ai-studio-static-online.cdn.bcebos.com/02e51c65e5f945a1b02a9447790273192f71fab6e5c04c2b8b4cdbeedc74ed2e" width = "800"></center><center><br>å›¾2ï¼šR-CNN</br></center><p><br></br></p><hr><p><strong>é€‰æ‹©æ€§æœç´¢ç®—æ³•ï¼ˆSelective Search,SSï¼‰</strong>ï¼šç®—æ³•åŸç†å¦‚ä¸‹ï¼šé¦–å…ˆå°†æ¯ä¸ªåƒç´ ä½œä¸ºä¸€ç»„ã€‚ç„¶åï¼Œè®¡ç®—æ¯ä¸€ç»„çš„çº¹ç†ï¼Œå¹¶å°†ä¸¤ä¸ªæœ€æ¥è¿‘çš„ç»„ç»“åˆèµ·æ¥ã€‚ä½†æ˜¯ä¸ºäº†é¿å…å•ä¸ªåŒºåŸŸåå™¬å…¶ä»–åŒºåŸŸï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹è¾ƒå°çš„ç»„è¿›è¡Œåˆ†ç»„ã€‚æˆ‘ä»¬ç»§ç»­åˆå¹¶åŒºåŸŸï¼Œç›´åˆ°æ‰€æœ‰åŒºåŸŸéƒ½ç»“åˆåœ¨ä¸€èµ·ã€‚ä¸‹å›¾ç¬¬ä¸€è¡Œå±•ç¤ºäº†å¦‚ä½•ä½¿åŒºåŸŸå¢é•¿ï¼Œç¬¬äºŒè¡Œä¸­çš„è“è‰²çŸ©å½¢ä»£è¡¨åˆå¹¶è¿‡ç¨‹ä¸­æ‰€æœ‰å¯èƒ½çš„ ROIã€‚ä¸å¯»æ‰¾å‡ ä¹ä¸ªåŒºåŸŸæ¯”èµ·æ¥ï¼Œè¿™ç§æ–¹æ³•è¦é«˜æ•ˆçš„å¤šã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/329f7fc53a3e48dcbbf863965a5826435db95b4dd2ba4b3588760dca6d509d52" width = "800"></center><center><br>å›¾3ï¼šSelective Searchç®—æ³•åº”ç”¨</br></center><p><br></br></p><hr><p>R-CNNå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>æµ‹è¯•é€Ÿåº¦æ…¢ï¼Œæµ‹è¯•ä¸€å¼ å›¾ç‰‡çº¦53sï¼ˆCPUï¼‰ï¼Œç”¨SSç®—æ³•æå–å€™é€‰æ¡†ç”¨æ—¶çº¦2ç§’ï¼ˆç›¸å¯¹è¾ƒå¿«ï¼‰ï¼Œä¸€å¼ å›¾ç‰‡å†…å€™é€‰æ¡†ä¹‹é—´å­˜åœ¨å¤§é‡é‡å ï¼Œæå–ç‰¹å¾æ“ä½œå†—ä½™ã€‚</li><li>è®­ç»ƒé€Ÿåº¦æ…¢ï¼Œè¿‡ç¨‹ç¹çã€‚</li><li>è®­ç»ƒæ‰€éœ€ç©ºé—´å¤§ï¼Œéœ€è¦ä»æ¯ä¸ªå›¾åƒä¸­çš„æ¯ä¸ªç›®æ ‡å€™é€‰æ¡†æå–ç‰¹å¾ï¼Œå¹¶å†™å…¥ç£ç›˜ï¼Œå¯¹äºéå¸¸æ·±çš„ç½‘ç»œï¼Œæå–ç‰¹å¾éœ€è¦æ•°ç™¾GBçš„å­˜å‚¨ç©ºé—´ã€‚</li></ul><h3 id="2ï¼‰Fast-R-CNN"><a href="#2ï¼‰Fast-R-CNN" class="headerlink" title="2ï¼‰Fast R-CNN"></a><strong>2ï¼‰Fast R-CNN</strong></h3><p>R-CNN éœ€è¦éå¸¸å¤šçš„å€™é€‰åŒºåŸŸä»¥æå‡å‡†ç¡®åº¦ï¼Œä½†å…¶å®æœ‰å¾ˆå¤šåŒºåŸŸæ˜¯å½¼æ­¤é‡å çš„ã€‚å¦‚æœæˆ‘ä»¬æœ‰ 2000 ä¸ªå€™é€‰åŒºåŸŸï¼Œä¸”æ¯ä¸€ä¸ªéƒ½éœ€è¦ç‹¬ç«‹åœ°é¦ˆé€åˆ° CNN ä¸­ï¼Œé‚£ä¹ˆå¯¹äºä¸åŒçš„ ROIï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦é‡å¤æå–å¾ˆå¤šæ¬¡ç‰¹å¾ã€‚å› æ­¤ R-CNN çš„è®­ç»ƒå’Œé¢„æµ‹é€Ÿåº¦éå¸¸æ…¢ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒCNN ä¸­çš„ç‰¹å¾å›¾ä»¥ä¸€ç§å¯†é›†çš„æ–¹å¼è¡¨å¾ç©ºé—´ç‰¹å¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½ç›´æ¥ä½¿ç”¨ç‰¹å¾å›¾ä»£æ›¿åŸå›¾æ¥æ£€æµ‹ç›®æ ‡å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p><p>Fast R-CNN ä½¿ç”¨CNNç½‘ç»œå…ˆæå–æ•´ä¸ªå›¾åƒçš„ç‰¹å¾ï¼Œè€Œä¸æ˜¯å¯¹æ¯ä¸ªå›¾åƒå—æå–å¤šæ¬¡ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ›å»ºå€™é€‰åŒºåŸŸçš„æ–¹æ³•ç›´æ¥åº”ç”¨åˆ°æå–åˆ°çš„ç‰¹å¾å›¾ä¸Šã€‚ä¾‹å¦‚ï¼ŒFast R-CNN é€‰æ‹©äº† VGG16 ä¸­çš„å·ç§¯å±‚ conv5 æ¥ç”Ÿæˆ ROIåŒºåŸŸåœ¨å¯¹åº”çš„ç‰¹å¾å›¾ä¸Šçš„æ˜ å°„ç‰¹å¾å›¾å—ï¼Œå¹¶ç”¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨ ROI æ± åŒ–å°†ç‰¹å¾å›¾å—è½¬æ¢ä¸ºå›ºå®šçš„å¤§å°ï¼Œå¹¶é€åˆ°å…¨è¿æ¥å±‚è¿›è¡Œåˆ†ç±»å’Œå®šä½ã€‚å› ä¸º Fast-RCNN ä¸ä¼šé‡å¤æå–ç‰¹å¾ï¼Œæ‰€ä»¥å®ƒèƒ½æ˜¾è‘—åœ°å‡å°‘å¤„ç†æ—¶é—´ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/06f66759af814e7e81a495e5a47e1a2f4eb9880d25f34deca82d393238bb18c3" width = "800"></center><center><br>å›¾4ï¼šFast R-CNN</br></center><p><br></br></p><hr><p><strong>æ„Ÿå…´è¶£åŒºåŸŸæ± åŒ–ï¼ˆROI poolingï¼‰</strong>ï¼š</p><p>å› ä¸º Fast R-CNN ä½¿ç”¨å…¨è¿æ¥å±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”ç”¨æ„Ÿå…´è¶£åŒºåŸŸæ± åŒ–å°†ä¸åŒå¤§å°çš„ ROI è½¬æ¢ä¸ºå›ºå®šå¤§å°ã€‚æ„Ÿå…´è¶£åŒºåŸŸæ± åŒ–ä»å…·æœ‰å¤šä¸ªå·ç§¯å’Œæœ€å¤§æ± å±‚çš„æ·±åº¦å·ç§¯ç½‘ç»œè·å¾—çš„å›ºå®šå¤§å°çš„ç‰¹å¾æ˜ å°„ã€‚æ¯”å¦‚æˆ‘ä»¬å°† 8Ã—8 ç‰¹å¾å›¾è½¬æ¢ä¸ºé¢„å®šä¹‰çš„ 2Ã—2 å¤§å°ï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/8ab4b968df8249a28fb6cd32cb9a3d4e0e1d2b69da984c5390a5d361df1df908" width = "600"></center><center><br>å›¾5ï¼šROI poolingçš„åº”ç”¨</br></center><p><br></br></p><ul><li>å·¦ä¸Šè§’ï¼šè¾“å…¥ç‰¹å¾å›¾ï¼›</li><li>å³ä¸Šè§’ï¼šå°† ROIï¼ˆè“è‰²åŒºåŸŸå³å€™é€‰åŒºåŸŸï¼‰ä¸ç‰¹å¾å›¾é‡å ï¼›</li><li>å·¦ä¸‹è§’ï¼šå°† ROI æ‹†åˆ†ä¸ºç›®æ ‡ç»´åº¦ã€‚ä¾‹å¦‚ï¼Œå¯¹äº 2Ã—2 ç›®æ ‡ï¼Œæˆ‘ä»¬å°† ROI åˆ†å‰²ä¸º 4 ä¸ªå¤§å°ç›¸ä¼¼æˆ–ç›¸ç­‰çš„éƒ¨åˆ†ï¼›</li><li>å³ä¸‹è§’ï¼šæ‰¾åˆ°æ¯ä¸ªéƒ¨åˆ†çš„æœ€å¤§å€¼ï¼Œå¾—åˆ°å˜æ¢åçš„ç‰¹å¾å›¾ã€‚</li></ul><p>æŒ‰ä¸Šè¿°æ­¥éª¤å¾—åˆ°ä¸€ä¸ª 2Ã—2 çš„ç‰¹å¾å›¾å—ï¼Œå¯ä»¥é€è‡³åˆ†ç±»å™¨å’Œè¾¹ç•Œæ¡†å›å½’å™¨ä¸­ã€‚ä½¿ç”¨softmaxæŸå¤±è¿›è¡Œåˆ†ç±»ï¼›ä½¿ç”¨å›å½’æŸå¤±æ ¡æ­£é¢„æµ‹æ¡†ã€‚æ€»æŸå¤±æ˜¯ä¸¤éƒ¨åˆ†çš„å’Œï¼Œç„¶ååå‘ä¼ æ’­è¿›è¡Œè®­ç»ƒã€‚</p><hr><p>Fast R-CNN æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯åŒ…å«ç‰¹å¾æå–å™¨ã€åˆ†ç±»å™¨å’Œè¾¹ç•Œæ¡†å›å½’å™¨åœ¨å†…çš„æ•´ä¸ªç½‘ç»œèƒ½é€šè¿‡å¤šä»»åŠ¡æŸå¤±å‡½æ•°è¿›è¡Œç«¯åˆ°ç«¯çš„è®­ç»ƒï¼Œè¿™ç§å¤šä»»åŠ¡æŸå¤±å³ç»“åˆäº†åˆ†ç±»æŸå¤±å’Œå®šä½æŸå¤±çš„æ–¹æ³•ï¼Œå¤§å¤§æå‡äº†æ¨¡å‹å‡†ç¡®åº¦ã€‚åŒæ—¶Fast R-CNNé‡æ–°ä½¿ç”¨å·ç§¯ç½‘ç»œä¸­çš„ç‰¹å¾æ˜ å°„ï¼Œæ˜¾ç€åŠ å¿«è®­ç»ƒå’Œæµ‹è¯•æ•ˆç‡ã€‚</p><h3 id="3ï¼‰Faster-R-CNN"><a href="#3ï¼‰Faster-R-CNN" class="headerlink" title="3ï¼‰Faster R-CNN"></a><strong>3ï¼‰Faster R-CNN</strong></h3><p>Fast R-CNN ä¾èµ–äºå¤–éƒ¨å€™é€‰åŒºåŸŸæ–¹æ³•ï¼Œå¦‚é€‰æ‹©æ€§æœç´¢ã€‚ä½†è¿™äº›ç®—æ³•åœ¨ CPU ä¸Šè¿è¡Œä¸”é€Ÿåº¦å¾ˆæ…¢ã€‚</p><p>ä¸å…¶ä½¿ç”¨å›ºå®šçš„ç®—æ³•å¾—åˆ°å€™é€‰åŒºåŸŸï¼Œä¸å¦‚è®©ç½‘ç»œè‡ªå·±å­¦ä¹ è‡ªå·±çš„å€™é€‰åŒºåŸŸåº”è¯¥æ˜¯ä»€ä¹ˆã€‚å› æ­¤ï¼ŒFaster R-CNN é‡‡ç”¨ä¸ Fast R-CNN ç›¸åŒçš„è®¾è®¡ï¼Œåªæ˜¯å®ƒç”¨<strong>åŒºåŸŸç”Ÿæˆç½‘ç»œï¼ˆRegion Proposal Networkï¼ŒRPNï¼‰</strong> ä»£æ›¿äº†å€™é€‰åŒºåŸŸæ–¹æ³•ã€‚æ–°çš„å€™é€‰åŒºåŸŸç½‘ç»œï¼ˆRPNï¼‰åœ¨ç”Ÿæˆ ROI æ—¶æ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”ä»¥æ¯å¹…å›¾åƒ 10 æ¯«ç§’çš„é€Ÿåº¦è¿è¡Œã€‚RPNçš„å¼•å…¥ï¼Œå¯ä»¥è¯´æ˜¯çœŸæ­£æ„ä¹‰ä¸ŠæŠŠç›®æ ‡æ£€æµ‹æ•´ä¸ªæµç¨‹èå…¥åˆ°ä¸€ä¸ªç¥ç»ç½‘ç»œä¸­ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/98e9c780a50a4194ab988a16f0f5c0196b0a118f775447edbecbfdaebe45fc17" width = "800"></center><center><br>å›¾6ï¼šFaster R-CNN</br></center><p><br></br></p><hr><p><strong>åŒºåŸŸç”Ÿæˆç½‘ç»œï¼ˆRPNï¼‰</strong>:</p><p>åŒºåŸŸç”Ÿæˆç½‘ç»œç”¨äºç”Ÿæˆå€™é€‰åŒºåŸŸï¼ˆproposalsï¼‰ï¼Œè¯¥å±‚é€šè¿‡ä¸€ç»„å›ºå®šçš„å°ºå¯¸å’Œæ¯”ä¾‹å¾—åˆ°ä¸€ç»„é”šç‚¹ï¼ˆanchorsï¼‰,é€šè¿‡softmaxåˆ¤æ–­é”šç‚¹å±äºå‰æ™¯æˆ–èƒŒæ™¯ï¼Œå†åˆ©ç”¨åŒºåŸŸå›å½’ä¿®æ­£é”šç‚¹ä»è€Œè·å¾—ç²¾ç¡®çš„å€™é€‰åŒºåŸŸã€‚åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ul><li>ç”Ÿæˆ anchor boxes</li><li>åˆ¤æ–­æ¯ä¸ª anchor box ä¸º foreground(åŒ…å«ç‰©ä½“) æˆ–è€… background(èƒŒæ™¯) ï¼ŒäºŒåˆ†ç±»</li><li>è¾¹ç•Œæ¡†å›å½’(bounding box regression) å¯¹ anchor box è¿›è¡Œå¾®è°ƒï¼Œä½¿å¾—é¢„æµ‹æ¡†å’ŒçœŸå®æ¡†æ›´åŠ æ¥è¿‘</li></ul><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f118bdb7042d4a579048542299d6434a0287731b7c8c434aa22eda60bc04dea8" width = "800"></center><center><br>å›¾7ï¼šåŒºåŸŸç”Ÿæˆç½‘ç»œçš„åº”ç”¨</br></center><p><br></br></p><hr><p>Faster RCNN ä¸ SSD çš„ anchors åŒºåˆ«åœ¨äºï¼š</p><p>ï¼ˆ1ï¼‰å‰è€…åœ¨ä¸€ä¸ªç‰¹å¾å›¾ä¸Šé¢„è®¾äº† anchorï¼Œå…ˆè¿›è¡Œåˆæ­¥ä¿®æ­£ä¸ç­›é€‰ï¼Œä¹‹åå†è¿›è¡Œåˆ†ç±»ä¸å›å½’</p><p>ï¼ˆ2ï¼‰åè€…åœ¨å¤šä¸ªç‰¹å¾å›¾ä¸Šé¢„è®¾äº† anchorï¼ˆå¤šå°ºåº¦ï¼‰ï¼Œå¹¶ç›´æ¥åœ¨æ‰€æœ‰è¿™äº›anchorä¸Šè¿›è¡Œåˆ†ç±»ä¸å›å½’ï¼ˆå•é˜¶æ®µï¼‰</p><h2 id="ä¸‰ã€One-Stage-ç›®æ ‡æ£€æµ‹ç®—æ³•"><a href="#ä¸‰ã€One-Stage-ç›®æ ‡æ£€æµ‹ç®—æ³•" class="headerlink" title="ä¸‰ã€One-Stage ç›®æ ‡æ£€æµ‹ç®—æ³•"></a>ä¸‰ã€One-Stage ç›®æ ‡æ£€æµ‹ç®—æ³•</h2><p>SSDï¼ˆSingle-Shot MultiBox Detectorï¼‰ï¼Œä½¿ç”¨ VGG19 ç½‘ç»œä½œä¸ºç‰¹å¾æå–å™¨ï¼ˆå’Œ Faster R-CNN ä¸­ä½¿ç”¨çš„ CNN ä¸€æ ·ï¼‰çš„å•æ¬¡æ£€æµ‹å™¨ï¼Œå³å°†æå–ç‰©ä½“ä½ç½®å’Œåˆ¤æ–­ç‰©ä½“ç±»åˆ«èåˆåœ¨ä¸€èµ·è¿›è¡Œï¼Œå…¶æœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯è¯†åˆ«å™¨ç”¨äºåˆ¤æ–­ç‰©ä½“çš„ç‰¹å¾ä¸ä»…ä»…æ¥è‡ªäºç¥ç»ç½‘ç»œçš„è¾“å‡ºï¼Œè¿˜æ¥è‡ªäºç¥ç»ç½‘ç»œçš„ä¸­é—´ç»“æœã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/a54cb5d12e3e45d49047359dd6cee691322e77af07cf4e208ac66230341534c2" width = "800"></center><center><br>å›¾8ï¼šSSD</br></center><p><br></br></p><p>SSDæ˜¯YOLOä¹‹ååˆä¸€ä¸ªå¼•äººæ³¨ç›®çš„ç›®æ ‡æ£€æµ‹ç»“æ„ï¼Œå®ƒæ²¿ç”¨äº†YOLOä¸­ç›´æ¥å›å½’ bboxå’Œåˆ†ç±»æ¦‚ç‡çš„æ–¹æ³•ï¼ŒåŒæ—¶åˆå‚è€ƒäº†Faster R-CNNï¼Œå¤§é‡ä½¿ç”¨anchoræ¥æå‡è¯†åˆ«å‡†ç¡®åº¦ã€‚é€šè¿‡æŠŠè¿™ä¸¤ç§ç»“æ„ç›¸ç»“åˆï¼ŒSSDä¿æŒäº†å¾ˆé«˜çš„è¯†åˆ«é€Ÿåº¦ï¼Œè¿˜èƒ½æŠŠmAPæå‡åˆ°è¾ƒé«˜çš„æ°´å¹³ã€‚</p><h2 id="å››ã€å°ç»“"><a href="#å››ã€å°ç»“" class="headerlink" title="å››ã€å°ç»“"></a>å››ã€å°ç»“</h2><ul><li>R-CNN å¯¹å›¾åƒé€‰å–è‹¥å¹²æè®®åŒºåŸŸï¼Œä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå¯¹æ¯ä¸ªæè®®åŒºåŸŸæ‰§è¡Œå‰å‘ä¼ æ’­ä»¥æŠ½å–å…¶ç‰¹å¾ï¼Œç„¶åå†ç”¨è¿™äº›ç‰¹å¾æ¥é¢„æµ‹æè®®åŒºåŸŸçš„ç±»åˆ«å’Œè¾¹ç•Œæ¡†ã€‚</li><li>Fast R-CNN å¯¹ R-CNN çš„ä¸€ä¸ªä¸»è¦æ”¹è¿›ï¼šåªå¯¹æ•´ä¸ªå›¾åƒåšå·ç§¯ç¥ç»ç½‘ç»œçš„å‰å‘ä¼ æ’­ã€‚å®ƒè¿˜å¼•å…¥äº†å…´è¶£åŒºåŸŸæ± åŒ–å±‚ï¼Œä»è€Œä¸ºå…·æœ‰ä¸åŒå½¢çŠ¶çš„å…´è¶£åŒºåŸŸæŠ½å–ç›¸åŒå½¢çŠ¶çš„ç‰¹å¾ã€‚</li><li>Faster R-CNN å°† Fast R-CNN ä¸­ä½¿ç”¨çš„é€‰æ‹©æ€§æœç´¢æ›¿æ¢ä¸ºå‚ä¸è®­ç»ƒçš„åŒºåŸŸç”Ÿæˆç½‘ç»œï¼ˆRPNï¼‰ï¼Œè¿™æ ·åè€…å¯ä»¥åœ¨å‡å°‘æè®®åŒºåŸŸæ•°é‡çš„æƒ…å†µä¸‹ä»ä¿è¯ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦ã€‚</li><li>å•å‘å¤šæ¡†æ£€æµ‹ï¼ˆSSDï¼‰æ˜¯ä¸€ç§å¤šå°ºåº¦ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚åŸºäºåŸºç¡€ç½‘ç»œå—å’Œå„ä¸ªå¤šå°ºåº¦ç‰¹å¾å—ï¼Œå•å‘å¤šæ¡†æ£€æµ‹ç”Ÿæˆä¸åŒæ•°é‡å’Œä¸åŒå¤§å°çš„é”šæ¡†ï¼Œå¹¶é€šè¿‡é¢„æµ‹è¿™äº›é”šæ¡†çš„ç±»åˆ«å’Œåç§»é‡æ£€æµ‹ä¸åŒå¤§å°çš„ç›®æ ‡ã€‚<a href="https://aistudio.baidu.com/aistudio/projectdetail/4880934">https://aistudio.baidu.com/aistudio/projectdetail/4880934</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ é«˜çº§_è®¡ç®—æœºè§†è§‰ä¹‹ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 6.3-YOLOv3å®ç°AIè¯†è™«ï¼ˆä¸‹ï¼‰</title>
      <link href="/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.3-YOLOv3%E5%AE%9E%E7%8E%B0AI%E8%AF%86%E8%99%AB%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
      <url>/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.3-YOLOv3%E5%AE%9E%E7%8E%B0AI%E8%AF%86%E8%99%AB%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€åŸºäºYOLOv3çš„AIè¯†è™«å®éªŒ"><a href="#ä¸€ã€åŸºäºYOLOv3çš„AIè¯†è™«å®éªŒ" class="headerlink" title="ä¸€ã€åŸºäºYOLOv3çš„AIè¯†è™«å®éªŒ"></a>ä¸€ã€åŸºäºYOLOv3çš„AIè¯†è™«å®éªŒ</h1><p>åŸºäºYOLOv3çš„AIè¯†è™«å®éªŒæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŒ…å«å¦‚ä¸‹9ä¸ªæ­¥éª¤ï¼š</p><p><strong>1.æ•°æ®å¤„ç†</strong>ï¼šæ ¹æ®ç½‘ç»œæ¥æ”¶çš„æ•°æ®æ ¼å¼ï¼Œå®Œæˆç›¸åº”çš„é¢„å¤„ç†æ“ä½œï¼Œä¿è¯æ¨¡å‹æ­£å¸¸è¯»å–ï¼ŒåŒæ—¶ï¼Œå¯¹äºè®­ç»ƒæ•°æ®ï¼Œä½¿ç”¨æ•°æ®å¢å¹¿ç­–ç•¥æ¥æå‡æ¨¡å‹æ³›åŒ–æ€§èƒ½ï¼›</p><p><strong>2.æ¨¡å‹æ„å»º</strong>ï¼šè®¾è®¡æ·±åº¦ç¥ç»ç½‘ç»œç»“æ„ï¼ˆæ¨¡å‹çš„å‡è®¾ç©ºé—´ï¼‰ï¼›</p><p><strong>3.æ¨¡å‹åå¤„ç†</strong>ï¼šé€šè¿‡æ¨¡å‹é¢„æµ‹å¾—åˆ°çš„æ¦‚ç‡å›¾ï¼Œç»è¿‡ä¸€ç³»åˆ—åå¤„ç†æ“ä½œå¾—åˆ°çœŸå®çš„è¾“å‡ºå€¼ï¼›</p><p><strong>4.æŸå¤±å‡½æ•°å®šä¹‰</strong>ï¼šæ ¹æ®é¢„æµ‹å€¼å’ŒçœŸå®å€¼æ„å»ºæŸå¤±å‡½æ•°ï¼Œç¥ç»ç½‘ç»œé€šè¿‡æœ€å°åŒ–æŸå¤±å‡½æ•°ä½¿å¾—ç½‘ç»œçš„è¾“å‡ºå€¼æ›´æ¥è¿‘çœŸå®å€¼ï¼›</p><p><strong>5.è®­ç»ƒé…ç½®</strong>ï¼šå®ä¾‹åŒ–æ¨¡å‹ï¼ŒåŠ è½½æ¨¡å‹å‚æ•°ï¼ŒæŒ‡å®šæ¨¡å‹é‡‡ç”¨çš„å¯»è§£ç®—æ³•ï¼ˆä¼˜åŒ–å™¨ï¼‰ï¼›</p><p><strong>6.æ¨¡å‹è®­ç»ƒ</strong>ï¼šæ‰§è¡Œå¤šè½®è®­ç»ƒä¸æ–­è°ƒæ•´å‚æ•°ï¼Œä»¥è¾¾åˆ°è¾ƒå¥½çš„æ•ˆæœï¼›</p><p><strong>7.æ¨¡å‹ä¿å­˜</strong>ï¼šå°†æ¨¡å‹å‚æ•°ä¿å­˜åˆ°æŒ‡å®šä½ç½®ï¼Œä¾¿äºåç»­æ¨ç†æˆ–ç»§ç»­è®­ç»ƒä½¿ç”¨ï¼›</p><p><strong>8.æ¨¡å‹è¯„ä¼°</strong>ï¼šå¯¹è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œè¯„ä¼°æµ‹è¯•ï¼Œè§‚å¯Ÿå‡†ç¡®ç‡å’ŒLossï¼›</p><p><strong>9.æ¨¡å‹æ¨ç†åŠå¯è§†åŒ–</strong>ï¼šä½¿ç”¨ä¸€å¼ çœŸå®å›¾ç‰‡æ¥éªŒè¯æ¨¡å‹è¯†åˆ«çš„æ•ˆæœï¼Œå¹¶å¯è§†åŒ–æ¨ç†ç»“æœã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/fc58e8f1fa1943448d5077d7bff25afa94c4d41925274f3985592cc935f253c9" width = "900"></center><blockquote><p>ä¸Šè¿°ä¸æ˜¯æ–‡æœ¬æ£€æµ‹æ˜¯ç›®æ ‡æ£€æµ‹ï¼Œæ‰“é”™äº†ï¼ï¼ï¼</p></blockquote><p><br></br></p><hr><blockquote><p><strong>è¯´æ˜ï¼š</strong></p><p>ä¸åŒçš„æ·±åº¦å­¦ä¹ ä»»åŠ¡ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶çš„ä»£ç ç»“æ„åŸºæœ¬ç›¸ä¼¼ã€‚å¤§å®¶æŒæ¡äº†ä¸€ä¸ªä»»åŠ¡çš„å®ç°æ–¹æ³•ï¼Œä¾¿å¾ˆå®¹æ˜“åœ¨æ­¤åŸºç¡€ä¸Šä¸¾ä¸€åä¸‰ã€‚ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶å¯ä»¥å±è”½åº•å±‚å®ç°ï¼Œç”¨æˆ·åªéœ€å…³æ³¨æ¨¡å‹çš„é€»è¾‘ç»“æ„ã€‚åŒæ—¶ï¼Œç®€åŒ–äº†è®¡ç®—ï¼Œé™ä½äº†æ·±åº¦å­¦ä¹ å…¥é—¨é—¨æ§›ã€‚</p></blockquote><hr><h2 id="å®éªŒç¯å¢ƒ"><a href="#å®éªŒç¯å¢ƒ" class="headerlink" title="å®éªŒç¯å¢ƒ"></a>å®éªŒç¯å¢ƒ</h2><p>æœ¬å®éªŒæ”¯æŒåœ¨é£æ¡¨å®è®­å¹³å°æˆ–æœ¬åœ°ç¯å¢ƒæ“ä½œï¼Œå»ºè®®æ‚¨ä½¿ç”¨é£æ¡¨å®è®­å¹³å°ã€‚</p><ul><li><strong>é£æ¡¨å®è®­å¹³å°</strong>ï¼šå®è®­å¹³å°é›†æˆäº†å®éªŒå¿…é¡»çš„å¤§éƒ¨åˆ†ç›¸å…³ç¯å¢ƒï¼Œä»£ç å¯åœ¨çº¿è¿è¡Œï¼ŒåŒæ—¶è¿˜æä¾›äº†å…è´¹ç®—åŠ›ï¼Œå³ä½¿å®è·µå¤æ‚æ¨¡å‹ä¹Ÿæ— ç®—åŠ›ä¹‹å¿§ã€‚</li><li><strong>æœ¬åœ°ç¯å¢ƒ</strong>ï¼šå¦‚æœæ‚¨é€‰æ‹©åœ¨æœ¬åœ°ç¯å¢ƒä¸Šæ“ä½œï¼Œéœ€è¦å®‰è£…Python3.Xã€é£æ¡¨å¼€æºæ¡†æ¶2.X ç­‰å®éªŒå¿…é¡»çš„ç¯å¢ƒï¼Œå…·ä½“è¯·å‚è§<a href="https://www.paddlepaddle.org.cn/install/quick?docurl=/documentation/docs/zh/install/pip/windows-pip.html">ã€Šé£æ¡¨å¼€å§‹ä½¿ç”¨-å®‰è£…ã€‹</a>ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹æ•°æ®è„šæœ¬ï¼Œå°†æ–‡ä»¶è§£å‹åˆ°workç›®å½•ä¸‹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹è§£å‹......&#x27;</span>)</span><br><span class="line">!unzip  -o -q -d  /home/aistudio/work /home/aistudio/data/data170339/insects.<span class="built_in">zip</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;è§£å‹å®Œæˆ&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageEnhance</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">INSECT_NAMES = [<span class="string">&#x27;Boerner&#x27;</span>, <span class="string">&#x27;Leconte&#x27;</span>, <span class="string">&#x27;Linnaeus&#x27;</span>, </span><br><span class="line">                <span class="string">&#x27;acuminatus&#x27;</span>, <span class="string">&#x27;armandi&#x27;</span>, <span class="string">&#x27;coleoptera&#x27;</span>, <span class="string">&#x27;linnaeus&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_insect_names</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    return a dict, as following,</span></span><br><span class="line"><span class="string">        &#123;&#x27;Boerner&#x27;: 0,</span></span><br><span class="line"><span class="string">         &#x27;Leconte&#x27;: 1,</span></span><br><span class="line"><span class="string">         &#x27;Linnaeus&#x27;: 2, </span></span><br><span class="line"><span class="string">         &#x27;acuminatus&#x27;: 3,</span></span><br><span class="line"><span class="string">         &#x27;armandi&#x27;: 4,</span></span><br><span class="line"><span class="string">         &#x27;coleoptera&#x27;: 5,</span></span><br><span class="line"><span class="string">         &#x27;linnaeus&#x27;: 6</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    It can map the insect name into an integer label.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    insect_category2id = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(INSECT_NAMES):</span><br><span class="line">        insect_category2id[item] = i <span class="comment"># æ„å»ºé”®å€¼å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> insect_category2id</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_annotations</span>(<span class="params">cname2cid, datadir</span>):</span><br><span class="line">    filenames = os.listdir(os.path.join(datadir, <span class="string">&#x27;annotations&#x27;</span>, <span class="string">&#x27;xmls&#x27;</span>))</span><br><span class="line">    records = []</span><br><span class="line">    ct = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> fname <span class="keyword">in</span> filenames:</span><br><span class="line">        fid = fname.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>] <span class="comment"># åºå·</span></span><br><span class="line">        fpath = os.path.join(datadir, <span class="string">&#x27;annotations&#x27;</span>, <span class="string">&#x27;xmls&#x27;</span>, fname) <span class="comment"># è·¯å¾„</span></span><br><span class="line">        img_file = os.path.join(datadir, <span class="string">&#x27;images&#x27;</span>, fid + <span class="string">&#x27;.jpeg&#x27;</span>) <span class="comment"># åºå·--&gt;å›¾ç‰‡</span></span><br><span class="line">        tree = ET.parse(fpath) <span class="comment"># è¯»å–xmlæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> tree.find(<span class="string">&#x27;id&#x27;</span>) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            im_id = np.array([ct])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            im_id = np.array([<span class="built_in">int</span>(tree.find(<span class="string">&#x27;id&#x27;</span>).text)])</span><br><span class="line"></span><br><span class="line">        objs = tree.findall(<span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">        im_w = <span class="built_in">float</span>(tree.find(<span class="string">&#x27;size&#x27;</span>).find(<span class="string">&#x27;width&#x27;</span>).text)</span><br><span class="line">        im_h = <span class="built_in">float</span>(tree.find(<span class="string">&#x27;size&#x27;</span>).find(<span class="string">&#x27;height&#x27;</span>).text)</span><br><span class="line">        gt_bbox = np.zeros((<span class="built_in">len</span>(objs), <span class="number">4</span>), dtype=np.float32)</span><br><span class="line">        gt_class = np.zeros((<span class="built_in">len</span>(objs), ), dtype=np.int32)</span><br><span class="line">        is_crowd = np.zeros((<span class="built_in">len</span>(objs), ), dtype=np.int32)</span><br><span class="line">        difficult = np.zeros((<span class="built_in">len</span>(objs), ), dtype=np.int32)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i, obj <span class="keyword">in</span> <span class="built_in">enumerate</span>(objs):</span><br><span class="line">            cname = obj.find(<span class="string">&#x27;name&#x27;</span>).text</span><br><span class="line">            gt_class[i] = cname2cid[cname]</span><br><span class="line">            _difficult = <span class="built_in">int</span>(obj.find(<span class="string">&#x27;difficult&#x27;</span>).text)</span><br><span class="line">            x1 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;xmin&#x27;</span>).text)</span><br><span class="line">            y1 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;ymin&#x27;</span>).text)</span><br><span class="line">            x2 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;xmax&#x27;</span>).text)</span><br><span class="line">            y2 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;ymax&#x27;</span>).text)</span><br><span class="line">            x1 = <span class="built_in">max</span>(<span class="number">0</span>, x1)</span><br><span class="line">            y1 = <span class="built_in">max</span>(<span class="number">0</span>, y1)</span><br><span class="line">            x2 = <span class="built_in">min</span>(im_w - <span class="number">1</span>, x2)</span><br><span class="line">            y2 = <span class="built_in">min</span>(im_h - <span class="number">1</span>, y2)</span><br><span class="line">            <span class="comment"># è¿™é‡Œå°†åŸäºŒç‚¹è¡¨ç¤ºè½¬æ¢ä¸ºxywhæ ¼å¼ï¼Œä½¿ç”¨xywhæ ¼å¼æ¥è¡¨ç¤ºç›®æ ‡ç‰©ä½“çœŸå®æ¡†</span></span><br><span class="line">            gt_bbox[i] = [(x1+x2)/<span class="number">2.0</span> , (y1+y2)/<span class="number">2.0</span>, x2-x1+<span class="number">1.</span>, y2-y1+<span class="number">1.</span>]</span><br><span class="line">            is_crowd[i] = <span class="number">0</span></span><br><span class="line">            difficult[i] = _difficult</span><br><span class="line"></span><br><span class="line">        voc_rec = &#123;</span><br><span class="line">            <span class="string">&#x27;im_file&#x27;</span>: img_file,</span><br><span class="line">            <span class="string">&#x27;im_id&#x27;</span>: im_id,</span><br><span class="line">            <span class="string">&#x27;h&#x27;</span>: im_h,</span><br><span class="line">            <span class="string">&#x27;w&#x27;</span>: im_w,</span><br><span class="line">            <span class="string">&#x27;is_crowd&#x27;</span>: is_crowd,</span><br><span class="line">            <span class="string">&#x27;gt_class&#x27;</span>: gt_class,</span><br><span class="line">            <span class="string">&#x27;gt_bbox&#x27;</span>: gt_bbox,</span><br><span class="line">            <span class="string">&#x27;gt_poly&#x27;</span>: [],</span><br><span class="line">            <span class="string">&#x27;difficult&#x27;</span>: difficult</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(objs) != <span class="number">0</span>:</span><br><span class="line">            records.append(voc_rec)</span><br><span class="line">        ct += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> records</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_bbox</span>(<span class="params">gt_bbox, gt_class</span>):</span><br><span class="line">    <span class="comment"># å¯¹äºä¸€èˆ¬çš„æ£€æµ‹ä»»åŠ¡æ¥è¯´ï¼Œä¸€å¼ å›¾ç‰‡ä¸Šå¾€å¾€ä¼šæœ‰å¤šä¸ªç›®æ ‡ç‰©ä½“</span></span><br><span class="line">    <span class="comment"># è®¾ç½®å‚æ•°MAX_NUM = 50ï¼Œ å³ä¸€å¼ å›¾ç‰‡æœ€å¤šå–50ä¸ªçœŸå®æ¡†ï¼›</span></span><br><span class="line">    <span class="comment"># å¦‚æœçœŸå®æ¡†çš„æ•°ç›®å°‘äº50ä¸ªï¼Œåˆ™å°†ä¸è¶³éƒ¨åˆ†çš„gt_bbox, gt_classå’Œgt_scoreçš„å„é¡¹æ•°å€¼å…¨è®¾ç½®ä¸º0</span></span><br><span class="line">    MAX_NUM = <span class="number">50</span></span><br><span class="line">    gt_bbox2 = np.zeros((MAX_NUM, <span class="number">4</span>))</span><br><span class="line">    gt_class2 = np.zeros((MAX_NUM,))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(gt_bbox)):</span><br><span class="line">        gt_bbox2[i, :] = gt_bbox[i, :]</span><br><span class="line">        gt_class2[i] = gt_class[i]</span><br><span class="line">        <span class="keyword">if</span> i &gt;= MAX_NUM:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> gt_bbox2, gt_class2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_data_from_file</span>(<span class="params">record</span>):</span><br><span class="line">    im_file = record[<span class="string">&#x27;im_file&#x27;</span>]</span><br><span class="line">    h = record[<span class="string">&#x27;h&#x27;</span>]</span><br><span class="line">    w = record[<span class="string">&#x27;w&#x27;</span>]</span><br><span class="line">    is_crowd = record[<span class="string">&#x27;is_crowd&#x27;</span>]</span><br><span class="line">    gt_class = record[<span class="string">&#x27;gt_class&#x27;</span>]</span><br><span class="line">    gt_bbox = record[<span class="string">&#x27;gt_bbox&#x27;</span>]</span><br><span class="line">    difficult = record[<span class="string">&#x27;difficult&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    img = cv2.imread(im_file)</span><br><span class="line">    img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æœºå™¨æ ¡éªŒ</span></span><br><span class="line">    <span class="keyword">assert</span> img.shape[<span class="number">0</span>] == <span class="built_in">int</span>(h), \</span><br><span class="line">             <span class="string">&quot;image height of &#123;&#125; inconsistent in record(&#123;&#125;) and img file(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">               im_file, h, img.shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> img.shape[<span class="number">1</span>] == <span class="built_in">int</span>(w), \</span><br><span class="line">             <span class="string">&quot;image width of &#123;&#125; inconsistent in record(&#123;&#125;) and img file(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">               im_file, w, img.shape[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    gt_boxes, gt_labels = get_bbox(gt_bbox, gt_class)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># gt_bbox ç”¨ç›¸å¯¹å€¼</span></span><br><span class="line">    gt_boxes[:, <span class="number">0</span>] = gt_boxes[:, <span class="number">0</span>] / <span class="built_in">float</span>(w)</span><br><span class="line">    gt_boxes[:, <span class="number">1</span>] = gt_boxes[:, <span class="number">1</span>] / <span class="built_in">float</span>(h)</span><br><span class="line">    gt_boxes[:, <span class="number">2</span>] = gt_boxes[:, <span class="number">2</span>] / <span class="built_in">float</span>(w)</span><br><span class="line">    gt_boxes[:, <span class="number">3</span>] = gt_boxes[:, <span class="number">3</span>] / <span class="built_in">float</span>(h)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> img, gt_boxes, gt_labels, (h, w)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¯è§†åŒ–å‡½æ•°ï¼Œç”¨äºå¯¹æ¯”åŸå›¾å’Œå›¾åƒå¢å¼ºçš„æ•ˆæœ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visualize</span>(<span class="params">srcimg, img_enhance</span>):</span><br><span class="line">    plt.figure(num=<span class="number">2</span>, figsize=(<span class="number">6</span>,<span class="number">12</span>))</span><br><span class="line">    plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Src Image&#x27;</span>, color=<span class="string">&#x27;#0000FF&#x27;</span>)</span><br><span class="line">    plt.axis(<span class="string">&#x27;off&#x27;</span>) <span class="comment"># ä¸æ˜¾ç¤ºåæ ‡è½´</span></span><br><span class="line">    plt.imshow(srcimg) <span class="comment"># æ˜¾ç¤ºåŸå›¾ç‰‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹åŸå›¾åšéšæœºæ”¹å˜äº®æš—ã€å¯¹æ¯”åº¦å’Œé¢œè‰²ç­‰æ•°æ®å¢å¼º</span></span><br><span class="line">    srcimg_gtbox = records[<span class="number">0</span>][<span class="string">&#x27;gt_bbox&#x27;</span>]</span><br><span class="line">    srcimg_label = records[<span class="number">0</span>][<span class="string">&#x27;gt_class&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Enhance Image&#x27;</span>, color=<span class="string">&#x27;#0000FF&#x27;</span>)</span><br><span class="line">    plt.axis(<span class="string">&#x27;off&#x27;</span>) <span class="comment"># ä¸æ˜¾ç¤ºåæ ‡è½´</span></span><br><span class="line">    plt.imshow(img_enhance/<span class="number">255</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ”¹å˜äº®æš—ã€å¯¹æ¯”åº¦å’Œé¢œè‰²ç­‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_distort</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜äº®åº¦</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">random_brightness</span>(<span class="params">img, lower=<span class="number">0.5</span>, upper=<span class="number">1.5</span></span>):</span><br><span class="line">        e = np.random.uniform(lower, upper)</span><br><span class="line">        <span class="keyword">return</span> ImageEnhance.Brightness(img).enhance(e)</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜å¯¹æ¯”åº¦</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">random_contrast</span>(<span class="params">img, lower=<span class="number">0.5</span>, upper=<span class="number">1.5</span></span>):</span><br><span class="line">        e = np.random.uniform(lower, upper)</span><br><span class="line">        <span class="keyword">return</span> ImageEnhance.Contrast(img).enhance(e)</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜é¢œè‰²</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">random_color</span>(<span class="params">img, lower=<span class="number">0.5</span>, upper=<span class="number">1.5</span></span>):</span><br><span class="line">        e = np.random.uniform(lower, upper)</span><br><span class="line">        <span class="keyword">return</span> ImageEnhance.Color(img).enhance(e)</span><br><span class="line"></span><br><span class="line">    ops = [random_brightness, random_contrast, random_color]</span><br><span class="line">    np.random.shuffle(ops)</span><br><span class="line"></span><br><span class="line">    img = Image.fromarray(img)</span><br><span class="line">    img = ops[<span class="number">0</span>](img)</span><br><span class="line">    img = ops[<span class="number">1</span>](img)</span><br><span class="line">    img = ops[<span class="number">2</span>](img)</span><br><span class="line">    img = np.asarray(img)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºå¡«å……</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_expand</span>(<span class="params">img,</span></span><br><span class="line"><span class="params">                  gtboxes,</span></span><br><span class="line"><span class="params">                  max_ratio=<span class="number">4.</span>,</span></span><br><span class="line"><span class="params">                  fill=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">                  keep_ratio=<span class="literal">True</span>,</span></span><br><span class="line"><span class="params">                  thresh=<span class="number">0.5</span></span>):</span><br><span class="line">    <span class="keyword">if</span> random.random() &gt; thresh:</span><br><span class="line">        <span class="keyword">return</span> img, gtboxes</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> max_ratio &lt; <span class="number">1.0</span>:</span><br><span class="line">        <span class="keyword">return</span> img, gtboxes</span><br><span class="line"></span><br><span class="line">    h, w, c = img.shape</span><br><span class="line">    ratio_x = random.uniform(<span class="number">1</span>, max_ratio)</span><br><span class="line">    <span class="keyword">if</span> keep_ratio:</span><br><span class="line">        ratio_y = ratio_x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ratio_y = random.uniform(<span class="number">1</span>, max_ratio)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€šè¿‡ç¼©æ”¾ä¸å¹³ç§»å®ç°å¡«å……çš„ç›®çš„</span></span><br><span class="line">    oh = <span class="built_in">int</span>(h * ratio_y)</span><br><span class="line">    ow = <span class="built_in">int</span>(w * ratio_x)</span><br><span class="line">    off_x = random.randint(<span class="number">0</span>, ow - w)</span><br><span class="line">    off_y = random.randint(<span class="number">0</span>, oh - h)</span><br><span class="line"></span><br><span class="line">    out_img = np.zeros((oh, ow, c))</span><br><span class="line">    <span class="keyword">if</span> fill <span class="keyword">and</span> <span class="built_in">len</span>(fill) == c:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(c):</span><br><span class="line">            out_img[:, :, i] = fill[i] * <span class="number">255.0</span></span><br><span class="line"></span><br><span class="line">    out_img[off_y:off_y + h, off_x:off_x + w, :] = img</span><br><span class="line">    gtboxes[:, <span class="number">0</span>] = ((gtboxes[:, <span class="number">0</span>] * w) + off_x) / <span class="built_in">float</span>(ow)</span><br><span class="line">    gtboxes[:, <span class="number">1</span>] = ((gtboxes[:, <span class="number">1</span>] * h) + off_y) / <span class="built_in">float</span>(oh)</span><br><span class="line">    gtboxes[:, <span class="number">2</span>] = gtboxes[:, <span class="number">2</span>] / ratio_x</span><br><span class="line">    gtboxes[:, <span class="number">3</span>] = gtboxes[:, <span class="number">3</span>] / ratio_y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> out_img.astype(<span class="string">&#x27;uint8&#x27;</span>), gtboxes <span class="comment"># è¿”å›å¡«å……åçš„å›¾ç‰‡ä¸è¾¹ç•Œæ¡†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºç¿»è½¬</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_flip</span>(<span class="params">img, gtboxes, thresh=<span class="number">0.5</span></span>):</span><br><span class="line">    <span class="keyword">if</span> random.random() &gt; thresh:</span><br><span class="line">        <span class="comment"># è°ƒæ•´æ­¥é•¿</span></span><br><span class="line">        img = img[:, ::-<span class="number">1</span>, :]</span><br><span class="line">        gtboxes[:, <span class="number">0</span>] = <span class="number">1.0</span> - gtboxes[:, <span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> img, gtboxes</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ‰“ä¹±çœŸå®æ¡†æ’åˆ—é¡ºåº</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shuffle_gtbox</span>(<span class="params">gtbox, gtlabel</span>):</span><br><span class="line">    gt = np.concatenate([gtbox, gtlabel[:, np.newaxis]], axis=<span class="number">1</span>)</span><br><span class="line">    idx = np.arange(gt.shape[<span class="number">0</span>])</span><br><span class="line">    np.random.shuffle(idx)</span><br><span class="line">    gt = gt[idx, :]</span><br><span class="line">    <span class="keyword">return</span> gt[:, :<span class="number">4</span>], gt[:, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºç¼©æ”¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_interp</span>(<span class="params">img, size, interp=<span class="literal">None</span></span>):</span><br><span class="line">    interp_method = [cv2.INTER_NEAREST,   <span class="comment"># æœ€è¿‘é‚»æ’å€¼</span></span><br><span class="line">                    cv2.INTER_LINEAR,     <span class="comment"># çº¿æ€§æ’å€¼</span></span><br><span class="line">                    cv2.INTER_AREA,       <span class="comment"># åŒºåŸŸæ’å€¼</span></span><br><span class="line">                    cv2.INTER_CUBIC,      <span class="comment"># ä¸‰æ¬¡æ ·æ¡æ’å€¼</span></span><br><span class="line">                    cv2.INTER_LANCZOS4]   <span class="comment"># LANCZOS4æ’å€¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># éšæœºé€‰æ‹©ç¼©æ”¾æ—¶çš„æ’å€¼æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> interp <span class="keyword">or</span> interp <span class="keyword">not</span> <span class="keyword">in</span> interp_method:</span><br><span class="line">        interp = interp_method[random.randint(<span class="number">0</span>, <span class="built_in">len</span>(interp_method) - <span class="number">1</span>)]</span><br><span class="line">    h, w, _ = img.shape</span><br><span class="line">    im_scale_x = size / <span class="built_in">float</span>(w)</span><br><span class="line">    im_scale_y = size / <span class="built_in">float</span>(h)</span><br><span class="line">    <span class="comment"># è°ƒæ•´å›¾åƒå¤§å°</span></span><br><span class="line">    img = cv2.resize(img, <span class="literal">None</span>, <span class="literal">None</span>, fx=im_scale_x, fy=im_scale_y, interpolation=interp)</span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¾åƒå¢å¹¿æ–¹æ³•æ±‡æ€»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">image_augment</span>(<span class="params">img, gtboxes, gtlabels, size, means=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜äº®æš—ã€å¯¹æ¯”åº¦å’Œé¢œè‰²ç­‰</span></span><br><span class="line">    img = random_distort(img)</span><br><span class="line">    <span class="comment"># éšæœºå¡«å……</span></span><br><span class="line">    img, gtboxes = random_expand(img, gtboxes, fill=means)</span><br><span class="line">    <span class="comment"># éšæœºç¼©æ”¾</span></span><br><span class="line">    img = random_interp(img, size)</span><br><span class="line">    <span class="comment"># éšæœºç¿»è½¬</span></span><br><span class="line">    img, gtboxes = random_flip(img, gtboxes)</span><br><span class="line">    <span class="comment"># éšæœºæ‰“ä¹±çœŸå®æ¡†æ’åˆ—é¡ºåº</span></span><br><span class="line">    gtboxes, gtlabels = shuffle_gtbox(gtboxes, gtlabels)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img.astype(<span class="string">&#x27;float32&#x27;</span>), gtboxes.astype(<span class="string">&#x27;float32&#x27;</span>), gtlabels.astype(<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_data</span>(<span class="params">record, size=<span class="number">640</span></span>):</span><br><span class="line">    img, gt_boxes, gt_labels, scales = get_img_data_from_file(record)</span><br><span class="line">    img, gt_boxes, gt_labels = image_augment(img, gt_boxes, gt_labels, size)</span><br><span class="line">    mean = [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>]</span><br><span class="line">    std = [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]</span><br><span class="line">    mean = np.array(mean).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">    std = np.array(std).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">    img = (img / <span class="number">255.0</span> - mean) / std</span><br><span class="line">    img = img.astype(<span class="string">&#x27;float32&#x27;</span>).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> img, gt_boxes, gt_labels, scales</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¸€ä¸ªæ‰¹æ¬¡å†…æ ·æœ¬éšæœºç¼©æ”¾çš„å°ºå¯¸</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_size</span>(<span class="params">mode</span>):</span><br><span class="line">    <span class="keyword">if</span> (mode == <span class="string">&#x27;train&#x27;</span>) <span class="keyword">or</span> (mode == <span class="string">&#x27;valid&#x27;</span>):</span><br><span class="line">        inds = np.array([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br><span class="line">        ii = np.random.choice(inds)</span><br><span class="line">        img_size = <span class="number">320</span> + ii * <span class="number">32</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        img_size = <span class="number">608</span></span><br><span class="line">    <span class="keyword">return</span> img_size</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†listå½¢å¼çš„batchæ•°æ®è½¬åŒ–æˆå¤šä¸ªarrayæ„æˆçš„tuple</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_array</span>(<span class="params">batch_data</span>):</span><br><span class="line">    img_array = np.array([item[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    gt_box_array = np.array([item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    gt_labels_array = np.array([item[<span class="number">2</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">    img_scale = np.array([item[<span class="number">3</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype=<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> img_array, gt_box_array, gt_labels_array, img_scale</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ•°æ®è¯»å–ç±»ï¼Œç»§æ‰¿Paddle.io.Dataset</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TrainDataset</span>(paddle.io.Dataset):</span><br><span class="line">    <span class="keyword">def</span>  <span class="title function_">__init__</span>(<span class="params">self, datadir, mode=<span class="string">&#x27;train&#x27;</span></span>):</span><br><span class="line">        self.datadir = datadir</span><br><span class="line">        cname2cid = get_insect_names()</span><br><span class="line">        self.records = get_annotations(cname2cid, datadir)</span><br><span class="line">        self.img_size = <span class="number">640</span>  <span class="comment"># get_img_size(mode)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        record = self.records[idx]</span><br><span class="line">        <span class="comment"># print(&quot;print: &quot;, record)</span></span><br><span class="line">        img, gt_bbox, gt_labels, im_shape = get_img_data(record, size=self.img_size)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> img, gt_bbox, gt_labels, np.array(im_shape)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.records)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† listå½¢å¼çš„batchæ•°æ® è½¬åŒ–æˆå¤šä¸ªarrayæ„æˆçš„tuple</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_test_array</span>(<span class="params">batch_data</span>):</span><br><span class="line">    img_name_array = np.array([item[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data])</span><br><span class="line">    img_data_array = np.array([item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    img_scale_array = np.array([item[<span class="number">2</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype=<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> img_name_array, img_data_array, img_scale_array</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•æ•°æ®è¯»å–</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_data_loader</span>(<span class="params">datadir, batch_size= <span class="number">10</span>, test_image_size=<span class="number">608</span>, mode=<span class="string">&#x27;test&#x27;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŠ è½½æµ‹è¯•ç”¨çš„å›¾ç‰‡ï¼Œæµ‹è¯•æ•°æ®æ²¡æœ‰groundtruthæ ‡ç­¾</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    image_names = os.listdir(datadir)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reader</span>():</span><br><span class="line">        batch_data = []</span><br><span class="line">        img_size = test_image_size</span><br><span class="line">        <span class="keyword">for</span> image_name <span class="keyword">in</span> image_names:</span><br><span class="line">            file_path = os.path.join(datadir, image_name)</span><br><span class="line">            img = cv2.imread(file_path)</span><br><span class="line">            img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span><br><span class="line">            H = img.shape[<span class="number">0</span>]</span><br><span class="line">            W = img.shape[<span class="number">1</span>]</span><br><span class="line">            img = cv2.resize(img, (img_size, img_size))</span><br><span class="line"></span><br><span class="line">            mean = [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>]</span><br><span class="line">            std = [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]</span><br><span class="line">            mean = np.array(mean).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">            std = np.array(std).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">            out_img = (img / <span class="number">255.0</span> - mean) / std</span><br><span class="line">            out_img = out_img.astype(<span class="string">&#x27;float32&#x27;</span>).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">            img = out_img <span class="comment">#np.transpose(out_img, (2,0,1))</span></span><br><span class="line">            im_shape = [H, W]</span><br><span class="line"></span><br><span class="line">            batch_data.append((image_name.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>], img, im_shape))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(batch_data) == batch_size:</span><br><span class="line">                <span class="keyword">yield</span> make_test_array(batch_data)</span><br><span class="line">                batch_data = []</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(batch_data) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">yield</span> make_test_array(batch_data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> reader</span><br></pre></td></tr></table></figure><pre><code>å¼€å§‹è§£å‹......è§£å‹å®Œæˆ</code></pre><h1 id="äºŒã€å•é˜¶æ®µç›®æ ‡æ£€æµ‹æ¨¡å‹YOLOv3"><a href="#äºŒã€å•é˜¶æ®µç›®æ ‡æ£€æµ‹æ¨¡å‹YOLOv3" class="headerlink" title="äºŒã€å•é˜¶æ®µç›®æ ‡æ£€æµ‹æ¨¡å‹YOLOv3"></a>äºŒã€å•é˜¶æ®µç›®æ ‡æ£€æµ‹æ¨¡å‹YOLOv3</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a><strong>1. æ¦‚è¿°</strong></h2><p>ç»å…¸çš„R-CNNç³»åˆ—ç®—æ³•ä¹Ÿè¢«ç§°ä¸º<strong>ä¸¤é˜¶æ®µç›®æ ‡æ£€æµ‹ç®—æ³•</strong>ï¼Œç”±äºè¿™ç§æ–¹æ³•éœ€è¦<strong>å…ˆäº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œå†å¯¹å€™é€‰åŒºåŸŸåšåˆ†ç±»å’Œä½ç½®åæ ‡çš„é¢„æµ‹</strong>ï¼Œå› æ­¤ç®—æ³•é€Ÿåº¦éå¸¸æ…¢ï¼Œè¿™ç±»ç®—æ³•è¢«ç§°ä¸ºä¸¤é˜¶æ®µç›®æ ‡æ£€æµ‹ç®—æ³•ã€‚ä¸æ­¤å¯¹åº”çš„æ˜¯ä»¥YOLOç®—æ³•ä¸ºä»£è¡¨çš„<strong>å•é˜¶æ®µæ£€æµ‹ç®—æ³•</strong>ï¼Œåªéœ€è¦ä¸€ä¸ªç½‘ç»œå³å¯<strong>åŒæ—¶äº§ç”Ÿå€™é€‰åŒºåŸŸå¹¶é¢„æµ‹å‡ºç‰©ä½“çš„ç±»åˆ«å’Œä½ç½®åæ ‡</strong>ã€‚</p><p>ä¸R-CNNç³»åˆ—ç®—æ³•ä¸åŒï¼ŒYOLOv3ä½¿ç”¨å•ä¸ªç½‘ç»œç»“æ„ï¼Œåœ¨äº§ç”Ÿå€™é€‰åŒºåŸŸçš„åŒæ—¶å³å¯é¢„æµ‹å‡ºç‰©ä½“ç±»åˆ«å’Œä½ç½®ï¼Œä¸éœ€è¦åˆ†æˆä¸¤é˜¶æ®µæ¥å®Œæˆæ£€æµ‹ä»»åŠ¡ã€‚å¦å¤–ï¼ŒYOLOv3ç®—æ³•äº§ç”Ÿçš„é¢„æµ‹æ¡†æ•°ç›®æ¯”Faster R-CNNå°‘å¾ˆå¤šã€‚Faster R-CNNä¸­æ¯ä¸ªçœŸå®æ¡†å¯èƒ½å¯¹åº”å¤šä¸ªæ ‡ç­¾ä¸ºæ­£çš„å€™é€‰åŒºåŸŸï¼Œè€ŒYOLOv3é‡Œé¢æ¯ä¸ªçœŸå®æ¡†åªå¯¹åº”ä¸€ä¸ªæ­£çš„å€™é€‰åŒºåŸŸã€‚è¿™äº›ç‰¹æ€§ä½¿å¾—YOLOv3ç®—æ³•å…·æœ‰æ›´å¿«çš„é€Ÿåº¦ï¼Œèƒ½åˆ°è¾¾å®æ—¶å“åº”çš„æ°´å¹³ã€‚</p><p>Joseph Redmonç­‰äººåœ¨2015å¹´æå‡ºYOLOï¼ˆYou Only Look Onceï¼ŒYOLOï¼‰ç®—æ³•ï¼Œé€šå¸¸ä¹Ÿè¢«ç§°ä¸ºYOLOv1ï¼›2016å¹´ï¼Œä»–ä»¬å¯¹ç®—æ³•è¿›è¡Œæ”¹è¿›ï¼Œåˆæå‡ºYOLOv2ç‰ˆæœ¬ï¼›2018å¹´å‘å±•å‡ºYOLOv3ç‰ˆæœ¬ã€‚<a href="https://zhuanlan.zhihu.com/p/539932517">[YOLOå®¶æ—è¿›åŒ–å²ï¼ˆv1-v7ï¼‰]</a></p><h2 id="2-YOLOv3æ¨¡å‹è®¾è®¡æ€æƒ³"><a href="#2-YOLOv3æ¨¡å‹è®¾è®¡æ€æƒ³" class="headerlink" title="2. YOLOv3æ¨¡å‹è®¾è®¡æ€æƒ³"></a><strong>2. YOLOv3æ¨¡å‹è®¾è®¡æ€æƒ³</strong></h2><p>YOLOv3ç®—æ³•çš„åŸºæœ¬æ€æƒ³å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼š</p><p><strong>åœ¨è®­ç»ƒé˜¶æ®µ</strong>ï¼š</p><ol><li>æŒ‰ä¸€å®šè§„åˆ™åœ¨å›¾ç‰‡ä¸Šäº§ç”Ÿä¸€ç³»åˆ—çš„å€™é€‰åŒºåŸŸï¼Œç„¶åæ ¹æ®è¿™äº›å€™é€‰åŒºåŸŸä¸å›¾ç‰‡ä¸Šç‰©ä½“çœŸå®æ¡†ä¹‹é—´çš„ä½ç½®å…³ç³»å¯¹å€™é€‰åŒºåŸŸè¿›è¡Œæ ‡æ³¨ã€‚</li></ol><ul><li>è·ŸçœŸå®æ¡†è¶³å¤Ÿæ¥è¿‘çš„é‚£äº›å€™é€‰åŒºåŸŸä¼šè¢«æ ‡æ³¨ä¸ºæ­£æ ·æœ¬ï¼ŒåŒæ—¶å°†çœŸå®æ¡†çš„ä½ç½®ä½œä¸ºæ­£æ ·æœ¬çš„ä½ç½®ç›®æ ‡ã€‚</li><li>åç¦»çœŸå®æ¡†è¾ƒå¤§çš„é‚£äº›å€™é€‰åŒºåŸŸåˆ™ä¼šè¢«æ ‡æ³¨ä¸ºè´Ÿæ ·æœ¬ï¼Œè´Ÿæ ·æœ¬ä¸éœ€è¦é¢„æµ‹ä½ç½®æˆ–è€…ç±»åˆ«ã€‚</li></ul><ol start="2"><li>ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæå–å›¾ç‰‡ç‰¹å¾å¹¶å¯¹å€™é€‰åŒºåŸŸçš„ä½ç½®å’Œç±»åˆ«è¿›è¡Œé¢„æµ‹ã€‚è¿™æ ·æ¯ä¸ªé¢„æµ‹æ¡†å°±å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ ·æœ¬ï¼Œæ ¹æ®çœŸå®æ¡†ç›¸å¯¹å®ƒçš„ä½ç½®å’Œç±»åˆ«è¿›è¡Œäº†æ ‡æ³¨è€Œè·å¾—æ ‡ç­¾å€¼ï¼Œé€šè¿‡ç½‘ç»œæ¨¡å‹é¢„æµ‹å…¶ä½ç½®å’Œç±»åˆ«ï¼Œå°†ç½‘ç»œé¢„æµ‹å€¼å’Œæ ‡ç­¾å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå°±å¯ä»¥å»ºç«‹èµ·æŸå¤±å‡½æ•°ã€‚</li></ol><p><strong>åœ¨é¢„æµ‹é˜¶æ®µ</strong>ï¼šè®¡ç®—é¢„æµ‹æ¡†å¾—åˆ†å’Œä½ç½®ï¼Œç„¶åä½¿ç”¨éæå¤§å€¼æŠ‘åˆ¶æ¶ˆé™¤é‡åˆè¾ƒå¤§çš„æ¡†ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœã€‚</p><p>YOLOv3çš„ç®—æ³•æµç¨‹å¦‚ <strong>å›¾1</strong> æ‰€ç¤ºã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/46fbb2f9d1734a10a79d342dd443a4a0ec9c362af417484a972d7ee9525d0c8c" width = "900"></center><center><br>å›¾1ï¼šYOLOv3çš„ç®—æ³•æµç¨‹å›¾</br></center><p><br></br></p><h2 id="3-YOLOv3æ¨¡å‹è®­ç»ƒ"><a href="#3-YOLOv3æ¨¡å‹è®­ç»ƒ" class="headerlink" title="3. YOLOv3æ¨¡å‹è®­ç»ƒ"></a><strong>3. YOLOv3æ¨¡å‹è®­ç»ƒ</strong></h2><p>æ‹†åˆ†æ¥çœ‹ï¼ŒYOLOv3ç®—æ³•çš„è®­ç»ƒæµç¨‹å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¦‚ <strong>å›¾2</strong> æ‰€ç¤ºã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/362b1599a9bf403c982ccf76b6f35d23ead0a520921b4e84a6952181d6692d40" width = "800"></center><center><br>å›¾2ï¼šYOLOv3ç®—æ³•è®­ç»ƒæµç¨‹å›¾ </br></center><p><br></br></p><ul><li><strong>å›¾2</strong> å·¦è¾¹æ˜¯è¾“å…¥å›¾ç‰‡ï¼Œä¸ŠåŠéƒ¨åˆ†æ‰€ç¤ºçš„è¿‡ç¨‹æ˜¯ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå¯¹å›¾ç‰‡æå–ç‰¹å¾ï¼Œéšç€ç½‘ç»œä¸æ–­å‘å‰ä¼ æ’­ï¼Œç‰¹å¾å›¾çš„å°ºå¯¸è¶Šæ¥è¶Šå°ï¼Œæ¯ä¸ªåƒç´ ç‚¹ä¼šä»£è¡¨æ›´åŠ æŠ½è±¡çš„ç‰¹å¾æ¨¡å¼ï¼Œç›´åˆ°è¾“å‡ºç‰¹å¾å›¾ï¼Œå…¶å°ºå¯¸å‡å°ä¸ºåŸå›¾çš„$\frac{1}{32}$ã€‚</li><li><strong>å›¾2</strong> ä¸‹åŠéƒ¨åˆ†æè¿°äº†ç”Ÿæˆå€™é€‰åŒºåŸŸçš„è¿‡ç¨‹ï¼Œé¦–å…ˆå°†åŸå›¾åˆ’åˆ†æˆå¤šä¸ªå°æ–¹å—ï¼Œæ¯ä¸ªå°æ–¹å—çš„å¤§å°æ˜¯$32 \times 32$ï¼Œç„¶åä»¥æ¯ä¸ªå°æ–¹å—ä¸ºä¸­å¿ƒåˆ†åˆ«ç”Ÿæˆä¸€ç³»åˆ—é”šæ¡†ï¼Œæ•´å¼ å›¾ç‰‡éƒ½ä¼šè¢«é”šæ¡†è¦†ç›–åˆ°ã€‚åœ¨æ¯ä¸ªé”šæ¡†çš„åŸºç¡€ä¸Šäº§ç”Ÿä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„é¢„æµ‹æ¡†ï¼Œæ ¹æ®é”šæ¡†å’Œé¢„æµ‹æ¡†ä¸å›¾ç‰‡ä¸Šç‰©ä½“çœŸå®æ¡†ä¹‹é—´çš„ä½ç½®å…³ç³»ï¼Œå¯¹è¿™äº›é¢„æµ‹æ¡†è¿›è¡Œæ ‡æ³¨ã€‚</li><li>å°†ä¸Šæ–¹æ”¯è·¯ä¸­è¾“å‡ºçš„ç‰¹å¾å›¾ä¸ä¸‹æ–¹æ”¯è·¯ä¸­äº§ç”Ÿçš„é¢„æµ‹æ¡†æ ‡ç­¾å»ºç«‹å…³è”ï¼Œåˆ›å»ºæŸå¤±å‡½æ•°ï¼Œå¼€å¯ç«¯åˆ°ç«¯çš„è®­ç»ƒè¿‡ç¨‹ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥ä¾æ®ä¸Šé¢çš„å›¾è¿›ä¸€æ­¥å¯¹è®­ç»ƒæµç¨‹è¿›è¡Œæ‹†è§£ï¼Œæ€»ç»“å‡ºå®ç°æ–¹æ¡ˆï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/0321f37cc92940888349662ad4526c95c3498bfa4a094f44a80650fe4147c5de" width = "800"></center><center><br>å›¾3ï¼šè®­ç»ƒæµç¨‹é—®é¢˜æ‹†è§£ </br></center><p><br></br></p><p>æ¥ä¸‹æ¥å…·ä½“ä»‹ç»æµç¨‹ä¸­å„èŠ‚ç‚¹çš„ç®—æ³•åŸç†ã€‚</p><h3 id="3-1-äº§ç”Ÿå€™é€‰åŒºåŸŸ"><a href="#3-1-äº§ç”Ÿå€™é€‰åŒºåŸŸ" class="headerlink" title="3.1 äº§ç”Ÿå€™é€‰åŒºåŸŸ"></a><strong>3.1 äº§ç”Ÿå€™é€‰åŒºåŸŸ</strong></h3><p>å¦‚ä½•äº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œæ˜¯æ£€æµ‹æ¨¡å‹çš„æ ¸å¿ƒè®¾è®¡æ–¹æ¡ˆã€‚ç›®å‰å¤§å¤šæ•°åŸºäºå·ç§¯ç¥ç»ç½‘ç»œçš„æ¨¡å‹æ‰€é‡‡ç”¨çš„æ–¹å¼å¤§ä½“å¦‚ä¸‹ï¼š</p><ol><li>æŒ‰ä¸€å®šçš„è§„åˆ™åœ¨å›¾ç‰‡ä¸Šç”Ÿæˆä¸€ç³»åˆ—ä½ç½®å›ºå®šçš„é”šæ¡†ï¼Œå°†è¿™äº›é”šæ¡†çœ‹ä½œæ˜¯å¯èƒ½çš„å€™é€‰åŒºåŸŸã€‚</li><li>å¯¹é”šæ¡†æ˜¯å¦åŒ…å«ç›®æ ‡ç‰©ä½“è¿›è¡Œé¢„æµ‹ï¼Œå¦‚æœåŒ…å«ç›®æ ‡ç‰©ä½“ï¼Œè¿˜éœ€è¦é¢„æµ‹æ‰€åŒ…å«ç‰©ä½“çš„ç±»åˆ«ï¼Œä»¥åŠé¢„æµ‹æ¡†ç›¸å¯¹äºé”šæ¡†ä½ç½®éœ€è¦è°ƒæ•´çš„å¹…åº¦ã€‚</li></ol><p><strong>1ï¼‰ç”Ÿæˆé”šæ¡†</strong></p><p>å°†åŸå§‹å›¾ç‰‡åˆ’åˆ†æˆ$m\times n$ä¸ªåŒºåŸŸï¼Œå¦‚ <strong>å›¾3</strong> æ‰€ç¤ºï¼ŒåŸå§‹å›¾ç‰‡é«˜åº¦$H&#x3D;640$, å®½åº¦$W&#x3D;480$ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©å°å—åŒºåŸŸçš„å°ºå¯¸ä¸º$32 \times 32$ï¼Œåˆ™$m$å’Œ$n$åˆ†åˆ«ä¸ºï¼š</p><p>$$<br>m &#x3D; \frac{640}{32} &#x3D; 20<br>$$</p><p>$$<br>n &#x3D; \frac{480}{32} &#x3D; 15<br>$$</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å°†åŸå§‹å›¾åƒåˆ†æˆäº†20è¡Œ15åˆ—å°æ–¹å—åŒºåŸŸã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/2dd1cbeb53644552a8cb38f3f834dbdda5046a489465454d93cdc88d1ce65ca5" width = "400"></center><center><br>å›¾4ï¼šå°†å›¾ç‰‡åˆ’åˆ†æˆå¤šä¸ª32x32çš„å°æ–¹å— </br></center><p><br></br></p><p>YOLOv3ç®—æ³•ä¼šåœ¨æ¯ä¸ªåŒºåŸŸçš„ä¸­å¿ƒï¼Œç”Ÿæˆä¸€ç³»åˆ—é”šæ¡†ã€‚ä¸ºäº†å±•ç¤ºæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä»…åœ¨å›¾ä¸­ç¬¬åè¡Œç¬¬å››åˆ—çš„å°æ–¹å—ä½ç½®é™„è¿‘ç”»å‡ºç”Ÿæˆçš„é”šæ¡†ï¼Œå¦‚ <strong>å›¾5</strong> æ‰€ç¤ºã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/b9eca2257fc0432d9f59bdecc8d54d144dd590e990f54c6d82f60a1a1531915b" width = "400"></center><center><br>å›¾5ï¼šåœ¨ç¬¬10è¡Œç¬¬4åˆ—çš„å°æ–¹å—åŒºåŸŸç”Ÿæˆ3ä¸ªé”šæ¡† </br></center><p><br></br></p><hr><blockquote><p><strong>è¯´æ˜ï¼š</strong></p><p>è¿™é‡Œä¸ºäº†è·Ÿç¨‹åºä¸­çš„ç¼–å·å¯¹åº”ï¼Œæœ€ä¸Šé¢çš„è¡Œå·æ˜¯ç¬¬0è¡Œï¼Œæœ€å·¦è¾¹çš„åˆ—å·æ˜¯ç¬¬0åˆ—ã€‚</p></blockquote><hr><p><strong>å›¾6</strong> å±•ç¤ºåœ¨æ¯ä¸ªåŒºåŸŸé™„è¿‘éƒ½ç”Ÿæˆ3ä¸ªé”šæ¡†ï¼Œå¾ˆå¤šé”šæ¡†å †å åœ¨ä¸€èµ·å¯èƒ½ä¸å¤ªå®¹æ˜“çœ‹æ¸…æ¥šï¼Œä½†è¿‡ç¨‹è·Ÿä¸Šé¢ç±»ä¼¼ï¼Œåªæ˜¯éœ€è¦ä»¥æ¯ä¸ªåŒºåŸŸçš„ä¸­å¿ƒç‚¹ä¸ºä¸­å¿ƒï¼Œåˆ†åˆ«ç”Ÿæˆ3ä¸ªé”šæ¡†ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/0880c3b5ec2d40edb476f4fcbadd87aa9f37059cd24d4a1a9d37c627ce5f618a" width = "400"></center><center><br>å›¾6ï¼šåœ¨æ¯ä¸ªå°æ–¹å—åŒºåŸŸç”Ÿæˆ3ä¸ªé”šæ¡† </br></center><p><br></br></p><p>åœ¨æ¯ä¸ªå°æ–¹å—åŒºåŸŸéƒ½ç”Ÿæˆä¸‰ä¸ªé”šæ¡†ï¼Œè¿™ä¼šè¦†ç›–æ•´å¼ å›¾ç‰‡ï¼Œåœ¨è¿™å¼ å›¾ç‰‡ä¸Šä¸€å…±ç”Ÿæˆäº†900ä¸ªé”šæ¡†ã€‚</p><p><strong>2ï¼‰ç”Ÿæˆé¢„æµ‹æ¡†</strong></p><p>åœ¨å‰é¢å·²ç»æŒ‡å‡ºï¼Œé”šæ¡†çš„ä½ç½®éƒ½æ˜¯å›ºå®šå¥½çš„ï¼Œä¸å¯èƒ½åˆšå¥½è·Ÿç‰©ä½“è¾¹ç•Œæ¡†é‡åˆï¼Œéœ€è¦<strong>åœ¨é”šæ¡†çš„åŸºç¡€ä¸Šè¿›è¡Œä½ç½®çš„å¾®è°ƒä»¥ç”Ÿæˆé¢„æµ‹æ¡†</strong>ã€‚é¢„æµ‹æ¡†ç›¸å¯¹äºé”šæ¡†ä¼šæœ‰ä¸åŒçš„ä¸­å¿ƒä½ç½®å’Œå¤§å°ï¼Œé‡‡ç”¨ä»€ä¹ˆæ–¹å¼èƒ½å¾—åˆ°é¢„æµ‹æ¡†å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥è€ƒè™‘å¦‚ä½•ç”Ÿæˆå…¶ä¸­å¿ƒä½ç½®åæ ‡ã€‚</p><p>æ¯”å¦‚ä¸Šé¢å›¾ä¸­åœ¨ç¬¬10è¡Œç¬¬4åˆ—çš„å°æ–¹å—åŒºåŸŸä¸­å¿ƒç”Ÿæˆçš„ä¸€ä¸ªé”šæ¡†ï¼Œå¦‚ç»¿è‰²è™šçº¿æ¡†æ‰€ç¤ºã€‚ä»¥å°æ–¹æ ¼çš„å®½åº¦ä¸ºå•ä½é•¿åº¦ï¼Œ</p><p>æ­¤å°æ–¹å—åŒºåŸŸå·¦ä¸Šè§’çš„ä½ç½®åæ ‡æ˜¯ï¼š<br>$$<br>c_x &#x3D; 4\<br>c_y &#x3D; 10<br>$$<br>æ­¤é”šæ¡†çš„åŒºåŸŸä¸­å¿ƒåæ ‡æ˜¯ï¼š<br>$$<br>center_x &#x3D; c_x + 0.5 &#x3D; 4.5\<br>center_y &#x3D; c_y + 0.5 &#x3D; 10.5<br>$$<br>å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼ç”Ÿæˆé¢„æµ‹æ¡†çš„ä¸­å¿ƒåæ ‡ï¼š<br>$$<br>b_x &#x3D; c_x + \sigma(t_x)<br>$$</p><p>$$<br>b_y &#x3D; c_y + \sigma(t_y)<br>$$</p><p>å…¶ä¸­$t_x$å’Œ$t_y$ä¸ºå®æ•°ï¼Œ$\sigma(x)$æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„Sigmoidå‡½æ•°ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><p>$$<br>\sigma(x) &#x3D; \frac{1}{1 + exp(-x)}<br>$$<br>ç”±äºSigmoidçš„å‡½æ•°å€¼åœ¨$0 \thicksim 1$ä¹‹é—´ï¼Œå› æ­¤ç”±ä¸Šé¢å…¬å¼è®¡ç®—å‡ºæ¥çš„é¢„æµ‹æ¡†çš„ä¸­å¿ƒç‚¹æ€»æ˜¯è½åœ¨ç¬¬åè¡Œç¬¬å››åˆ—çš„å°åŒºåŸŸå†…éƒ¨ã€‚</p><p>å½“$t_x&#x3D;t_y&#x3D;0$æ—¶ï¼Œ$b_x &#x3D; c_x + 0.5$ï¼Œ$b_y &#x3D; c_y + 0.5$ï¼Œé¢„æµ‹æ¡†ä¸­å¿ƒä¸é”šæ¡†ä¸­å¿ƒé‡åˆï¼Œéƒ½æ˜¯å°åŒºåŸŸçš„ä¸­å¿ƒã€‚</p><p>é”šæ¡†çš„å¤§å°æ˜¯é¢„å…ˆè®¾å®šå¥½çš„ï¼Œåœ¨æ¨¡å‹ä¸­å¯ä»¥å½“ä½œæ˜¯è¶…å‚æ•°ï¼Œä¸‹å›¾ä¸­ç”»å‡ºçš„é”šæ¡†å°ºå¯¸æ˜¯</p><p>$$<br>p_h &#x3D; 350<br>$$</p><p>$$<br>p_w &#x3D; 250<br>$$</p><p>é€šè¿‡ä¸‹é¢çš„å…¬å¼ç”Ÿæˆé¢„æµ‹æ¡†çš„å¤§å°ï¼š</p><p>$$<br>b_h &#x3D; p_h e^{t_h}<br>$$</p><p>$$<br>b_w &#x3D; p_w e^{t_w}<br>$$</p><p>å¦‚æœ$t_x&#x3D;t_y&#x3D;0, t_h&#x3D;t_w&#x3D;0$ï¼Œåˆ™é¢„æµ‹æ¡†è·Ÿé”šæ¡†é‡åˆã€‚</p><p>å¦‚æœç»™$t_x, t_y, t_h, t_w$éšæœºèµ‹å€¼å¦‚ä¸‹ï¼š</p><p>$$<br>t_x &#x3D; 0.2,  t_y &#x3D; 0.3, t_w &#x3D; 0.1, t_h &#x3D; -0.12<br>$$<br>åˆ™å¯ä»¥å¾—åˆ°é¢„æµ‹æ¡†çš„åæ ‡æ˜¯(154.98, 357.44, 276.29, 310.42)ï¼Œå¦‚ <strong>å›¾7</strong> ä¸­è“è‰²æ¡†æ‰€ç¤ºã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/28ae0fbc087e42449cdea6c48ad53f64cffdf66216a646d884ae778f7c341149" width = "400"></center><center><br>å›¾7ï¼šç”Ÿæˆé¢„æµ‹æ¡† </br></center><p><br></br></p><hr><blockquote><p><strong>è¯´æ˜ï¼š</strong><br>è¿™é‡Œåæ ‡é‡‡ç”¨$xywh$çš„æ ¼å¼ã€‚é¢„æµ‹æ¡†æ˜¯åœ¨é”šæ¡†çš„åŸºç¡€ä¸Šè¿›è¡Œçš„å¾®è°ƒã€‚</p></blockquote><hr><p>è¿™é‡Œæˆ‘ä»¬ä¼šé—®ï¼šå½“$t_x, t_y, t_w, t_h$å–å€¼ä¸ºå¤šå°‘çš„æ—¶å€™ï¼Œé¢„æµ‹æ¡†èƒ½å¤Ÿè·ŸçœŸå®æ¡†é‡åˆï¼Ÿä¸ºäº†å›ç­”é—®é¢˜ï¼Œåªéœ€è¦å°†ä¸Šé¢é¢„æµ‹æ¡†åæ ‡ä¸­çš„$b_x, b_y, b_h, b_w$è®¾ç½®ä¸ºçœŸå®æ¡†çš„ä½ç½®ï¼Œå³å¯æ±‚è§£å‡º$t$çš„æ•°å€¼ã€‚</p><p>ä»¤ï¼š<br>$$<br>\sigma(t^*_x) + c_x &#x3D; gt_x<br>$$</p><p>$$<br>\sigma(t^*_y) + c_y &#x3D; gt_y<br>$$</p><p>$$<br>p_w e^{t^*_w} &#x3D; gt_h<br>$$</p><p>$$<br>p_h e^{t^*_h} &#x3D; gt_w<br>$$</p><p>å¯ä»¥æ±‚è§£å‡ºï¼š$(t^*_x, t^*_y, t^*_w, t^*_h)$</p><p>å¦‚æœ$t$æ˜¯ç½‘ç»œé¢„æµ‹çš„è¾“å‡ºå€¼ï¼Œå°†$t^*$ä½œä¸ºç›®æ ‡å€¼ï¼Œä»¥ä»–ä»¬ä¹‹é—´çš„å·®è·ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œåˆ™å¯ä»¥å»ºç«‹èµ·ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œé€šè¿‡å­¦ä¹ ç½‘ç»œå‚æ•°ï¼Œä½¿å¾—$t$è¶³å¤Ÿæ¥è¿‘$t^*$ï¼Œä»è€Œèƒ½å¤Ÿæ±‚è§£å‡ºé¢„æµ‹æ¡†çš„ä½ç½®åæ ‡å’Œå¤§å°ã€‚</p><p>é¢„æµ‹æ¡†å¯ä»¥çœ‹ä½œæ˜¯åœ¨é”šæ¡†åŸºç¡€ä¸Šçš„ä¸€ä¸ªå¾®è°ƒï¼Œæ¯ä¸ªé”šæ¡†ä¼šæœ‰ä¸€ä¸ªè·Ÿå®ƒå¯¹åº”çš„é¢„æµ‹æ¡†ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šä¸Šé¢è®¡ç®—å¼ä¸­çš„$t_x, t_y, t_w, t_h$ï¼Œä»è€Œè®¡ç®—å‡ºä¸é”šæ¡†å¯¹åº”çš„é¢„æµ‹æ¡†çš„ä½ç½®å’Œå½¢çŠ¶ã€‚</p><p><strong>3ï¼‰æ ‡æ³¨å€™é€‰åŒºåŸŸ</strong></p><p>åœ¨YOLOv3ä¸­ï¼Œæ¯ä¸ªåŒºåŸŸä¼šäº§ç”Ÿ3ç§ä¸åŒå½¢çŠ¶çš„é”šæ¡†ï¼Œæ¯ä¸ªé”šæ¡†éƒ½æ˜¯ä¸€ä¸ªå¯èƒ½çš„å€™é€‰åŒºåŸŸï¼Œå¯¹è¿™äº›å€™é€‰åŒºåŸŸæˆ‘ä»¬éœ€è¦äº†è§£å¦‚ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p><ul><li>é”šæ¡†æ˜¯å¦åŒ…å«ç‰©ä½“ï¼Œè¿™å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªäºŒåˆ†ç±»é—®é¢˜ï¼Œä½¿ç”¨æ ‡ç­¾<code>objectness</code>æ¥è¡¨ç¤ºã€‚</li></ul><p>å½“é”šæ¡†åŒ…å«äº†ç‰©ä½“æ—¶ï¼Œ<code>objectness=1</code>ï¼Œè¡¨ç¤ºé¢„æµ‹æ¡†å±äºæ­£ç±»ï¼›å½“é”šæ¡†ä¸åŒ…å«ç‰©ä½“æ—¶ï¼Œè®¾ç½®<code>objectness=0</code>ï¼Œè¡¨ç¤ºé”šæ¡†å±äºè´Ÿç±»ï¼›</p><p>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œæœ‰äº›é¢„æµ‹æ¡†è·ŸçœŸå®æ¡†ä¹‹é—´çš„IoUå¾ˆå¤§ï¼Œä½†å¹¶ä¸æ˜¯æœ€å¤§çš„é‚£ä¸ªï¼Œé‚£ä¹ˆç›´æ¥å°†å…¶objectnessæ ‡ç­¾è®¾ç½®ä¸º0å½“ä½œè´Ÿæ ·æœ¬ï¼Œå¯èƒ½å¹¶ä¸å¦¥å½“ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒYOLOv3ç®—æ³•è®¾ç½®äº†ä¸€ä¸ªIoUé˜ˆå€¼<code>iou_threshold</code>ï¼Œå½“é¢„æµ‹æ¡†çš„objectnessä¸ä¸º1ï¼Œä½†æ˜¯å…¶ä¸æŸä¸ªçœŸå®æ¡†çš„IoUå¤§äºiou_thresholdæ—¶ï¼Œå°±å°†å…¶objectnessæ ‡ç­¾è®¾ç½®ä¸º-1ï¼Œä¸å‚ä¸æŸå¤±å‡½æ•°çš„è®¡ç®—ã€‚</p><ul><li><p>å¦‚æœé”šæ¡†åŒ…å«äº†ç‰©ä½“ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¡ç®—å¯¹åº”çš„é¢„æµ‹æ¡†ä¸­å¿ƒä½ç½®å’Œå¤§å°åº”è¯¥æ˜¯å¤šå°‘ï¼Œæˆ–è€…è¯´ä¸Šæ–‡ä¸­çš„$t_x, t_y, t_w, t_h$åº”è¯¥æ˜¯å¤šå°‘ï¼Œä½¿ç”¨<code>location</code>æ ‡ç­¾ã€‚</p></li><li><p>å¦‚æœé”šæ¡†åŒ…å«äº†ç‰©ä½“ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¡ç®—å…·ä½“ç±»åˆ«æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œä½¿ç”¨å˜é‡<code>label</code>æ¥è¡¨ç¤ºå…¶æ‰€å±ç±»åˆ«çš„æ ‡ç­¾ã€‚</p></li></ul><p>æ€»ç»“èµ·æ¥ï¼Œå¦‚ <strong>å›¾8</strong> æ‰€ç¤ºã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/3b914be0c6274916bc7abe4922d4d0fb75be340172764f7096af5be0c2737c57" width = "700"></center><center><br>å›¾8ï¼šæ ‡æ³¨æµç¨‹ç¤ºæ„å›¾ </br></center><p><br></br></p><p>é€‰å–ä»»æ„ä¸€ä¸ªé”šæ¡†å¯¹å®ƒè¿›è¡Œæ ‡æ³¨ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ç¡®å®šå…¶å¯¹åº”çš„<code>objectness</code>ï¼Œ<code>(t_x, t_y, t_w, t_h)</code>å’Œ<code>label</code>ï¼Œä¸‹é¢å°†åˆ†åˆ«è®²è¿°å¦‚ä½•ç¡®å®šè¿™ä¸‰ä¸ªæ ‡ç­¾çš„å€¼ã€‚</p><br><p><strong>â‘ æ ‡æ³¨é”šæ¡†æ˜¯å¦åŒ…å«ç‰©ä½“ï¼ˆobjectnessï¼‰</strong></p><p>å¦‚ <strong>å›¾9</strong> æ‰€ç¤ºï¼Œè¿™é‡Œä¸€å…±æœ‰3ä¸ªç›®æ ‡ï¼Œä»¥æœ€å·¦è¾¹çš„äººåƒä¸ºä¾‹ï¼Œå…¶çœŸå®æ¡†æ˜¯$(133.96, 328.42, 186.06, 374.63)$ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f21679e68d2b496698ed788a16d4ea2e5bc6f82b253a44ef9508b6a4fc9b6be4" width = "600"></center><center><br>å›¾9ï¼šé€‰å‡ºä¸çœŸå®æ¡†ä¸­å¿ƒä½äºåŒä¸€åŒºåŸŸçš„é”šæ¡† </br></center><p><br></br></p><p>çœŸå®æ¡†çš„ä¸­å¿ƒç‚¹åæ ‡æ˜¯ï¼š</p><p>$$<br>center_x &#x3D; 133.96\<br>center_y &#x3D; 328.42\<br>i &#x3D; 133.96 &#x2F; 32 &#x3D; 4.18625\<br>j &#x3D; 328.42 &#x2F; 32 &#x3D; 10.263125<br>$$<br>å®ƒè½åœ¨äº†ç¬¬10è¡Œç¬¬4åˆ—çš„å°æ–¹å—å†…ï¼Œå¦‚<strong>å›¾10</strong>æ‰€ç¤ºã€‚æ­¤å°æ–¹å—åŒºåŸŸå¯ä»¥ç”Ÿæˆ3ä¸ªä¸åŒå½¢çŠ¶çš„é”šæ¡†ï¼Œå…¶åœ¨å›¾ä¸Šçš„ç¼–å·å’Œå¤§å°åˆ†åˆ«æ˜¯$A_1(116, 90), A_2(156, 198), A_3(373, 326)$ã€‚</p><p>ç”¨è¿™3ä¸ªä¸åŒå½¢çŠ¶çš„é”šæ¡†è·ŸçœŸå®æ¡†è®¡ç®—IoUï¼Œé€‰å‡ºIoUæœ€å¤§çš„é”šæ¡†ã€‚è¿™é‡Œä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œåªè€ƒè™‘é”šæ¡†çš„å½¢çŠ¶ï¼Œä¸è€ƒè™‘å…¶è·ŸçœŸå®æ¡†ä¸­å¿ƒä¹‹é—´çš„åç§»ï¼Œå…·ä½“è®¡ç®—ç»“æœå¦‚ <strong>å›¾14</strong> æ‰€ç¤ºã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/3008337ea66c44068042c670db54368edc56b1e43ced4b6b811bdc95b64ca3d5" width = "400"></center><center><br>å›¾10ï¼šé€‰å‡ºä¸çœŸå®æ¡†ä¸é”šæ¡†çš„IoU </br></center><p><br></br></p><p>å…¶ä¸­è·ŸçœŸå®æ¡†IoUæœ€å¤§çš„æ˜¯é”šæ¡†$A_3$ï¼Œå½¢çŠ¶æ˜¯$(373, 326)$ï¼Œå°†å®ƒæ‰€å¯¹åº”çš„é¢„æµ‹æ¡†çš„objectnessæ ‡ç­¾è®¾ç½®ä¸º1ï¼Œå…¶æ‰€åŒ…æ‹¬çš„ç‰©ä½“ç±»åˆ«å°±æ˜¯çœŸå®æ¡†é‡Œé¢çš„ç‰©ä½“æ‰€å±ç±»åˆ«ã€‚</p><p>ä¾æ¬¡å¯ä»¥æ‰¾å‡ºå…¶ä»–å‡ ä¸ªçœŸå®æ¡†å¯¹åº”çš„IoUæœ€å¤§çš„é”šæ¡†ï¼Œç„¶åå°†å®ƒä»¬çš„é¢„æµ‹æ¡†çš„objectnessæ ‡ç­¾ä¹Ÿéƒ½è®¾ç½®ä¸º1ã€‚è¿™é‡Œä¸€å…±æœ‰$20 \times 15 \times 3 &#x3D; 900$ä¸ªé”šæ¡†ï¼Œåªæœ‰3ä¸ªé¢„æµ‹æ¡†ä¼šè¢«æ ‡æ³¨ä¸ºæ­£ã€‚</p><p>ç”±äºæ¯ä¸ªçœŸå®æ¡†åªå¯¹åº”ä¸€ä¸ªobjectnessæ ‡ç­¾ä¸ºæ­£çš„é¢„æµ‹æ¡†ï¼Œå¦‚æœæœ‰äº›é¢„æµ‹æ¡†è·ŸçœŸå®æ¡†ä¹‹é—´çš„IoUå¾ˆå¤§ï¼Œä½†å¹¶ä¸æ˜¯æœ€å¤§çš„é‚£ä¸ªï¼Œé‚£ä¹ˆç›´æ¥å°†å…¶objectnessæ ‡ç­¾è®¾ç½®ä¸º0å½“ä½œè´Ÿæ ·æœ¬ï¼Œå¯èƒ½å¹¶ä¸å¦¥å½“ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒYOLOv3ç®—æ³•è®¾ç½®äº†ä¸€ä¸ªIoUé˜ˆå€¼iou_thresholdï¼Œå½“é¢„æµ‹æ¡†çš„objectnessä¸ä¸º1ï¼Œä½†æ˜¯å…¶ä¸æŸä¸ªçœŸå®æ¡†çš„IoUå¤§äºiou_thresholdæ—¶ï¼Œå°±å°†å…¶objectnessæ ‡ç­¾è®¾ç½®ä¸º-1ï¼Œä¸å‚ä¸æŸå¤±å‡½æ•°çš„è®¡ç®—ã€‚</p><p>æ‰€æœ‰å…¶ä»–çš„é¢„æµ‹æ¡†ï¼Œå…¶objectnessæ ‡ç­¾å‡è®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºè´Ÿç±»ã€‚</p><p>å¯¹äºobjectness&#x3D;1çš„é¢„æµ‹æ¡†ï¼Œéœ€è¦è¿›ä¸€æ­¥ç¡®å®šå…¶ä½ç½®å’ŒåŒ…å«ç‰©ä½“çš„å…·ä½“åˆ†ç±»æ ‡ç­¾ï¼Œä½†æ˜¯å¯¹äºobjectness&#x3D;0æˆ–è€…-1çš„é¢„æµ‹æ¡†ï¼Œåˆ™ä¸ç”¨ç®¡ä»–ä»¬çš„ä½ç½®å’Œç±»åˆ«ã€‚</p><br><p><strong>â‘¡æ ‡æ³¨é¢„æµ‹æ¡†çš„ä½ç½®åæ ‡æ ‡ç­¾ï¼ˆlocationï¼‰</strong></p><p>å½“é”šæ¡†objectness&#x3D;1æ—¶ï¼Œéœ€è¦ç¡®å®šé¢„æµ‹æ¡†ä½ç½®ç›¸å¯¹äºå®ƒå¾®è°ƒçš„å¹…åº¦ï¼Œä¹Ÿå°±æ˜¯é”šæ¡†çš„ä½ç½®æ ‡ç­¾ã€‚</p><p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»é—®è¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šå½“$t_x, t_y, t_w, t_h$å–å€¼ä¸ºå¤šå°‘çš„æ—¶å€™ï¼Œé¢„æµ‹æ¡†èƒ½å¤Ÿè·ŸçœŸå®æ¡†é‡åˆï¼Ÿå…¶åšæ³•æ˜¯å°†é¢„æµ‹æ¡†åæ ‡ä¸­çš„$b_x, b_y, b_h, b_w$è®¾ç½®ä¸ºçœŸå®æ¡†çš„åæ ‡ï¼Œå³å¯æ±‚è§£å‡º$t$çš„æ•°å€¼ã€‚</p><p>ä»¤ï¼š<br>$$<br>\sigma(t^*_x) + c_x &#x3D; gt_x\<br>\sigma(t^*_y) + c_y &#x3D; gt_y\<br>p_w e^{t^*_w} &#x3D; gt_w\<br>p_h e^{t^*_h} &#x3D; gt_h<br>$$<br>å¯¹äº$t_x^*$å’Œ$t_y^*$ï¼Œç”±äºSigmoidçš„åå‡½æ•°ä¸å¥½è®¡ç®—ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨$\sigma(t^*_x)$å’Œ$\sigma(t^*_y)$ä½œä¸ºå›å½’çš„ç›®æ ‡ã€‚</p><p>$$<br>d_x^* &#x3D; \sigma(t^*_x) &#x3D; gt_x - c_x\<br>d_y^* &#x3D; \sigma(t^*_y) &#x3D; gt_y - c_y\<br>t^*_w &#x3D; log(\frac{gt_w}{p_w})\<br>t^*_h &#x3D; log(\frac{gt_h}{p_h})<br>$$<br>å¦‚æœ$(t_x, t_y, t_h, t_w)$æ˜¯ç½‘ç»œé¢„æµ‹çš„è¾“å‡ºå€¼ï¼Œå°†$(d_x^*, d_y^*, t_w^*, t_h^*)$ä½œä¸º$(\sigma(t_x), \sigma(t_y), t_h, t_w)$çš„ç›®æ ‡å€¼ï¼Œä»¥å®ƒä»¬ä¹‹é—´çš„å·®è·ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œåˆ™å¯ä»¥å»ºç«‹èµ·ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œé€šè¿‡å­¦ä¹ ç½‘ç»œå‚æ•°ï¼Œä½¿å¾—$t$è¶³å¤Ÿæ¥è¿‘$t^*$ï¼Œä»è€Œèƒ½å¤Ÿæ±‚è§£å‡ºé¢„æµ‹æ¡†çš„ä½ç½®ã€‚</p><br><p><strong>â‘¢æ ‡æ³¨é”šæ¡†åŒ…å«ç‰©ä½“ç±»åˆ«çš„æ ‡ç­¾ï¼ˆlabelï¼‰</strong></p><p>å¯¹äºobjectness&#x3D;1çš„é”šæ¡†ï¼Œéœ€è¦ç¡®å®šå…¶å…·ä½“ç±»åˆ«ã€‚æ­£å¦‚ä¸Šé¢æ‰€è¯´ï¼Œobjectnessæ ‡æ³¨ä¸º1çš„é”šæ¡†ï¼Œä¼šæœ‰ä¸€ä¸ªçœŸå®æ¡†è·Ÿå®ƒå¯¹åº”ï¼Œè¯¥é”šæ¡†æ‰€å±ç‰©ä½“ç±»åˆ«ï¼Œå³æ˜¯å…¶æ‰€å¯¹åº”çš„çœŸå®æ¡†åŒ…å«çš„ç‰©ä½“ç±»åˆ«ã€‚è¿™é‡Œä½¿ç”¨one-hotå‘é‡æ¥è¡¨ç¤ºç±»åˆ«æ ‡ç­¾labelã€‚æ¯”å¦‚ä¸€å…±æœ‰10ä¸ªåˆ†ç±»ï¼Œè€ŒçœŸå®æ¡†é‡Œé¢åŒ…å«çš„ç‰©ä½“ç±»åˆ«æ˜¯ç¬¬2ç±»ï¼Œåˆ™labelä¸º$(0,1,0,0,0,0,0,0,0,0)$</p><p><strong>4ï¼‰æ ‡æ³¨é”šæ¡†çš„å…·ä½“ç¨‹åº</strong></p><p>æœ€åï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªå°æ–¹å—åŒºåŸŸéƒ½ç”Ÿæˆäº†ä¸€ç³»åˆ—çš„é”šæ¡†ä½œä¸ºå€™é€‰åŒºåŸŸï¼Œå¹¶ä¸”æ ¹æ®å›¾ç‰‡ä¸ŠçœŸå®ç‰©ä½“çš„ä½ç½®ï¼Œæ ‡æ³¨å‡ºäº†æ¯ä¸ªå€™é€‰åŒºåŸŸå¯¹åº”çš„objectnessæ ‡ç­¾ã€ä½ç½®éœ€è¦è°ƒæ•´çš„å¹…åº¦ä»¥åŠåŒ…å«çš„ç‰©ä½“æ‰€å±çš„ç±»åˆ«ã€‚ä½ç½®éœ€è¦è°ƒæ•´çš„å¹…åº¦ç”±4ä¸ªå˜é‡æè¿°$(t_x, t_y, t_w, t_h)$ï¼Œobjectnessæ ‡ç­¾éœ€è¦ç”¨ä¸€ä¸ªå˜é‡æè¿°$obj$ï¼Œæè¿°æ‰€å±ç±»åˆ«çš„å˜é‡é•¿åº¦ç­‰äºç±»åˆ«æ•°Cã€‚</p><p>å¯¹äºæ¯ä¸ªé”šæ¡†ï¼Œæ¨¡å‹éœ€è¦é¢„æµ‹è¾“å‡º$(t_x, t_y, t_w, t_h, P_{obj}, P_1, P_2,â€¦ , P_C)$ï¼Œå…¶ä¸­$P_{obj}$æ˜¯é”šæ¡†æ˜¯å¦åŒ…å«ç‰©ä½“çš„æ¦‚ç‡ï¼Œ$P_1, P_2,â€¦ , P_C$åˆ™æ˜¯é”šæ¡†åŒ…å«çš„ç‰©ä½“å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ‡æ³¨é¢„æµ‹æ¡†çš„objectness</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_objectness_label</span>(<span class="params">img, gt_boxes, gt_labels, iou_threshold = <span class="number">0.7</span>,</span></span><br><span class="line"><span class="params">                         anchors = [<span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>],</span></span><br><span class="line"><span class="params">                         num_classes=<span class="number">7</span>, downsample=<span class="number">32</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    imgï¼šæ˜¯è¾“å…¥çš„å›¾åƒæ•°æ®ï¼Œå½¢çŠ¶æ˜¯[N, C, H, W]</span></span><br><span class="line"><span class="string">    gt_boxesï¼šçœŸå®æ¡†ï¼Œç»´åº¦æ˜¯[N, 50, 4]ï¼Œå…¶ä¸­50æ˜¯çœŸå®æ¡†æ•°ç›®çš„ä¸Šé™ï¼ŒçœŸå®æ¡†åæ ‡æ ¼å¼æ˜¯xywhï¼Œè¿™é‡Œä½¿ç”¨ç›¸å¯¹å€¼</span></span><br><span class="line"><span class="string">    gt_labelsï¼šçœŸå®æ¡†æ‰€å±ç±»åˆ«ï¼Œç»´åº¦æ˜¯[N, 50]</span></span><br><span class="line"><span class="string">    iou_thresholdï¼šå½“é¢„æµ‹æ¡†ä¸çœŸå®æ¡†çš„iouå¤§äºiou_thresholdæ—¶ä¸å°†å…¶çœ‹ä½œæ˜¯è´Ÿæ ·æœ¬</span></span><br><span class="line"><span class="string">    anchorsï¼šé”šæ¡†å¯é€‰çš„å°ºå¯¸</span></span><br><span class="line"><span class="string">    anchor_masksï¼šé€šè¿‡ä¸anchorsä¸€èµ·ç¡®å®šæœ¬å±‚çº§çš„ç‰¹å¾å›¾åº”è¯¥é€‰ç”¨å¤šå¤§å°ºå¯¸çš„é”šæ¡†</span></span><br><span class="line"><span class="string">    num_classesï¼šç±»åˆ«æ•°ç›®</span></span><br><span class="line"><span class="string">    downsampleï¼šç‰¹å¾å›¾ç›¸å¯¹äºè¾“å…¥ç½‘ç»œçš„å›¾ç‰‡å°ºå¯¸å˜åŒ–çš„æ¯”ä¾‹</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    img_shape = img.shape</span><br><span class="line">    batchsize = img_shape[<span class="number">0</span>]</span><br><span class="line">    num_anchors = <span class="built_in">len</span>(anchors) // <span class="number">2</span><span class="comment"># é”šæ¡†çš„æ•°ç›®</span></span><br><span class="line">    input_h = img_shape[<span class="number">2</span>]</span><br><span class="line">    input_w = img_shape[<span class="number">3</span>]</span><br><span class="line">    <span class="comment"># å°†è¾“å…¥å›¾ç‰‡åˆ’åˆ†æˆnum_rows x num_colsä¸ªå°æ–¹å—åŒºåŸŸï¼Œæ¯ä¸ªå°æ–¹å—çš„è¾¹é•¿æ˜¯ downsample</span></span><br><span class="line">    <span class="comment"># è®¡ç®—ä¸€å…±æœ‰å¤šå°‘è¡Œå°æ–¹å—</span></span><br><span class="line">    num_rows = input_h // downsample</span><br><span class="line">    <span class="comment"># è®¡ç®—ä¸€å…±æœ‰å¤šå°‘åˆ—å°æ–¹å—</span></span><br><span class="line">    num_cols = input_w // downsample</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹è±¡æ ‡ç­¾ 3ä¸ª</span></span><br><span class="line">    label_objectness = np.zeros([batchsize, num_anchors, num_rows, num_cols])</span><br><span class="line">    <span class="comment"># ç±»åˆ«æ ‡ç­¾ æ¯ä¸ªé”šæ¡†7ä¸ªç±»åˆ«</span></span><br><span class="line">    label_classification = np.zeros([batchsize, num_anchors, num_classes, num_rows, num_cols])</span><br><span class="line">    <span class="comment"># ä½ç½®åæ ‡æ ‡ç­¾ æ¯ä¸ªé”šæ¡†å¯¹åº”4ä¸ªåæ ‡å€¼</span></span><br><span class="line">    label_location = np.zeros([batchsize, num_anchors, <span class="number">4</span>, num_rows, num_cols])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”¨æ¥è°ƒèŠ‚ä¸åŒå°ºå¯¸çš„é”šæ¡†å¯¹æŸå¤±å‡½æ•°çš„è´¡çŒ®ï¼Œä½œä¸ºåŠ æƒç³»æ•°å’Œä½ç½®æŸå¤±å‡½æ•°ç›¸ä¹˜</span></span><br><span class="line">    scale_location = np.ones([batchsize, num_anchors, num_rows, num_cols])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹batchsizeè¿›è¡Œå¾ªç¯ï¼Œä¾æ¬¡å¤„ç†æ¯å¼ å›¾ç‰‡</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(batchsize):</span><br><span class="line">        <span class="comment"># å¯¹å›¾ç‰‡ä¸Šçš„çœŸå®æ¡†è¿›è¡Œå¾ªç¯ï¼Œä¾æ¬¡æ‰¾å‡ºè·ŸçœŸå®æ¡†å½¢çŠ¶æœ€åŒ¹é…çš„é”šæ¡†</span></span><br><span class="line">        <span class="keyword">for</span> n_gt <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(gt_boxes[n])):</span><br><span class="line">            gt = gt_boxes[n][n_gt] <span class="comment"># çœŸå®æ¡†</span></span><br><span class="line">            gt_cls = gt_labels[n][n_gt] <span class="comment"># çœŸå®æ¡†æ‰€å±ç±»åˆ«</span></span><br><span class="line">            gt_center_x = gt[<span class="number">0</span>]</span><br><span class="line">            gt_center_y = gt[<span class="number">1</span>]</span><br><span class="line">            gt_width = gt[<span class="number">2</span>]</span><br><span class="line">            gt_height = gt[<span class="number">3</span>]</span><br><span class="line">            <span class="keyword">if</span> (gt_width &lt; <span class="number">1e-3</span>) <span class="keyword">or</span> (gt_height &lt; <span class="number">1e-3</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            i = <span class="built_in">int</span>(gt_center_y * num_rows)</span><br><span class="line">            j = <span class="built_in">int</span>(gt_center_x * num_cols)</span><br><span class="line">            ious = []</span><br><span class="line">            <span class="keyword">for</span> ka <span class="keyword">in</span> <span class="built_in">range</span>(num_anchors):</span><br><span class="line">                bbox1 = [<span class="number">0.</span>, <span class="number">0.</span>, <span class="built_in">float</span>(gt_width), <span class="built_in">float</span>(gt_height)] <span class="comment"># çœŸå®æ¡†</span></span><br><span class="line">                anchor_w = anchors[ka * <span class="number">2</span>]</span><br><span class="line">                anchor_h = anchors[ka * <span class="number">2</span> + <span class="number">1</span>]</span><br><span class="line">                bbox2 = [<span class="number">0.</span>, <span class="number">0.</span>, anchor_w/<span class="built_in">float</span>(input_w), anchor_h/<span class="built_in">float</span>(input_h)] <span class="comment"># é”šæ¡†</span></span><br><span class="line">                <span class="comment"># è®¡ç®—iou</span></span><br><span class="line">                iou = box_iou_xywh(bbox1, bbox2)</span><br><span class="line">                ious.append(iou)</span><br><span class="line">            ious = np.array(ious)</span><br><span class="line">            inds = np.argsort(ious) <span class="comment"># ç”ŸæˆæŠŠiousä»å°åˆ°å¤§æ’åºåçš„ç´¢å¼•</span></span><br><span class="line">            k = inds[-<span class="number">1</span>]</span><br><span class="line">            label_objectness[n, k, i, j] = <span class="number">1</span></span><br><span class="line">            c = gt_cls</span><br><span class="line">            label_classification[n, k, c, i, j] = <span class="number">1.</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># for those prediction bbox with objectness =1, set label of location</span></span><br><span class="line">            dx_label = gt_center_x * num_cols - j</span><br><span class="line">            dy_label = gt_center_y * num_rows - i</span><br><span class="line">            dw_label = np.log(gt_width * input_w / anchors[k*<span class="number">2</span>])</span><br><span class="line">            dh_label = np.log(gt_height * input_h / anchors[k*<span class="number">2</span> + <span class="number">1</span>])</span><br><span class="line">            label_location[n, k, <span class="number">0</span>, i, j] = dx_label</span><br><span class="line">            label_location[n, k, <span class="number">1</span>, i, j] = dy_label</span><br><span class="line">            label_location[n, k, <span class="number">2</span>, i, j] = dw_label</span><br><span class="line">            label_location[n, k, <span class="number">3</span>, i, j] = dh_label</span><br><span class="line">            <span class="comment"># scale_locationç”¨æ¥è°ƒèŠ‚ä¸åŒå°ºå¯¸çš„é”šæ¡†å¯¹æŸå¤±å‡½æ•°çš„è´¡çŒ®ï¼Œä½œä¸ºåŠ æƒç³»æ•°å’Œä½ç½®æŸå¤±å‡½æ•°ç›¸ä¹˜</span></span><br><span class="line">            scale_location[n, k, i, j] = <span class="number">2.0</span> - gt_width * gt_height <span class="comment"># scales--&gt;(h, w)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç›®å‰æ ¹æ®æ¯å¼ å›¾ç‰‡ä¸Šæ‰€æœ‰å‡ºç°è¿‡çš„gt_boxï¼Œéƒ½æ ‡æ³¨å‡ºäº†objectnessä¸ºæ­£çš„é¢„æµ‹æ¡†ï¼Œå‰©ä¸‹çš„é¢„æµ‹æ¡†åˆ™é»˜è®¤objectnessä¸º0</span></span><br><span class="line">    <span class="comment"># å¯¹äºobjectnessä¸º1çš„é¢„æµ‹æ¡†ï¼Œæ ‡å‡ºäº†ä»–ä»¬æ‰€åŒ…å«çš„ç‰©ä½“ç±»åˆ«ï¼Œä»¥åŠä½ç½®å›å½’çš„ç›®æ ‡</span></span><br><span class="line">    <span class="keyword">return</span> label_objectness.astype(<span class="string">&#x27;float32&#x27;</span>), \</span><br><span class="line">            label_location.astype(<span class="string">&#x27;float32&#x27;</span>), \</span><br><span class="line">            label_classification.astype(<span class="string">&#x27;float32&#x27;</span>),\</span><br><span class="line">            scale_location.astype(<span class="string">&#x27;float32&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—IoUï¼ŒçŸ©å½¢æ¡†çš„åæ ‡å½¢å¼ä¸ºxywh</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">box_iou_xywh</span>(<span class="params">box1, box2</span>):</span><br><span class="line">    x1min, y1min = box1[<span class="number">0</span>] - box1[<span class="number">2</span>]/<span class="number">2.0</span>, box1[<span class="number">1</span>] - box1[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    x1max, y1max = box1[<span class="number">0</span>] + box1[<span class="number">2</span>]/<span class="number">2.0</span>, box1[<span class="number">1</span>] + box1[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    s1 = box1[<span class="number">2</span>] * box1[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">    x2min, y2min = box2[<span class="number">0</span>] - box2[<span class="number">2</span>]/<span class="number">2.0</span>, box2[<span class="number">1</span>] - box2[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    x2max, y2max = box2[<span class="number">0</span>] + box2[<span class="number">2</span>]/<span class="number">2.0</span>, box2[<span class="number">1</span>] + box2[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    s2 = box2[<span class="number">2</span>] * box2[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">    xmin = np.maximum(x1min, x2min)</span><br><span class="line">    ymin = np.maximum(y1min, y2min)</span><br><span class="line">    xmax = np.minimum(x1max, x2max)</span><br><span class="line">    ymax = np.minimum(y1max, y2max)</span><br><span class="line">    inter_h = np.maximum(ymax - ymin, <span class="number">0.</span>)</span><br><span class="line">    inter_w = np.maximum(xmax - xmin, <span class="number">0.</span>)</span><br><span class="line">    intersection = inter_h * inter_w</span><br><span class="line"></span><br><span class="line">    union = s1 + s2 - intersection</span><br><span class="line">    iou = intersection / union</span><br><span class="line">    <span class="keyword">return</span> iou </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TRAINDIR = <span class="string">&#x27;/home/aistudio/work/insects/train&#x27;</span></span><br><span class="line">TESTDIR = <span class="string">&#x27;/home/aistudio/work/insects/test&#x27;</span></span><br><span class="line">VALIDDIR = <span class="string">&#x27;/home/aistudio/work/insects/val&#x27;</span></span><br><span class="line">train_dataset = TrainDataset(TRAINDIR, mode=<span class="string">&#x27;train&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–æ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line">reader = paddle.io.DataLoader(</span><br><span class="line">                            train_dataset, </span><br><span class="line">                            batch_size=<span class="number">2</span>, </span><br><span class="line">                            shuffle=<span class="literal">True</span>, </span><br><span class="line">                            num_workers=<span class="number">1</span>, </span><br><span class="line">                            drop_last=<span class="literal">True</span>)</span><br><span class="line">img, gt_boxes, gt_labels, im_shape = <span class="built_in">next</span>(reader())</span><br><span class="line">img, gt_boxes, gt_labels, im_shape = img.numpy(), gt_boxes.numpy(), gt_labels.numpy(), im_shape.numpy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å‡ºé”šæ¡†å¯¹åº”çš„æ ‡ç­¾</span></span><br><span class="line">label_objectness, \</span><br><span class="line">label_location, \</span><br><span class="line">label_classification, \</span><br><span class="line">scale_location \</span><br><span class="line">= get_objectness_label(img, gt_boxes, gt_labels, </span><br><span class="line">                        iou_threshold = <span class="number">0.7</span>,</span><br><span class="line">                        anchors = [<span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>],</span><br><span class="line">                        num_classes=<span class="number">7</span>, downsample=<span class="number">32</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img.shape, gt_boxes.shape, gt_labels.shape, im_shape.shape</span><br></pre></td></tr></table></figure><pre><code>((2, 3, 640, 640), (2, 50, 4), (2, 50), (2, 2))</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (æ‰¹é‡ï¼Œé”šæ¡†æ•°ï¼Œåç§»é‡/ç±»åˆ«æ•°ï¼Œhï¼Œw)</span></span><br><span class="line">label_objectness.shape, label_location.shape, label_classification.shape, scale_location.shape</span><br></pre></td></tr></table></figure><pre><code>((2, 3, 20, 20), (2, 3, 4, 20, 20), (2, 3, 7, 20, 20), (2, 3, 20, 20))</code></pre><p>ä¸Šé¢çš„ç¨‹åºå®ç°äº†å¯¹é”šæ¡†è¿›è¡Œæ ‡æ³¨ï¼Œå¯¹äºæ¯ä¸ªçœŸå®æ¡†ï¼Œé€‰å‡ºäº†ä¸å®ƒå½¢çŠ¶æœ€åŒ¹é…çš„é”šæ¡†ï¼Œå°†å…¶objectnessæ ‡æ³¨ä¸º1ï¼Œå¹¶ä¸”å°†$[d_x^*, d_y^*, t_h^*, t_w^*]$ä½œä¸ºæ­£æ ·æœ¬ä½ç½®çš„æ ‡ç­¾ï¼ŒçœŸå®æ¡†åŒ…å«çš„ç‰©ä½“ç±»åˆ«ä½œä¸ºé”šæ¡†çš„ç±»åˆ«ã€‚è€Œå…¶ä½™çš„é”šæ¡†ï¼Œobjectnesså°†è¢«æ ‡æ³¨ä¸º0ï¼Œæ— éœ€æ ‡æ³¨å‡ºä½ç½®å’Œç±»åˆ«çš„æ ‡ç­¾ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œè¿˜é—ç•™ä¸€ä¸ªå°é—®é¢˜ï¼Œå‰é¢æˆ‘ä»¬è¯´äº†å¯¹äºä¸çœŸå®æ¡†IoUè¾ƒå¤§çš„é‚£äº›é”šæ¡†ï¼Œéœ€è¦å°†å…¶objectnessæ ‡æ³¨ä¸º-1ï¼Œä¸å‚ä¸æŸå¤±å‡½æ•°çš„è®¡ç®—ã€‚æˆ‘ä»¬å…ˆå°†è¿™ä¸ªé—®é¢˜æ”¾ä¸€æ”¾ï¼Œç­‰åˆ°åé¢å»ºç«‹æŸå¤±å‡½æ•°çš„æ—¶å€™å†è¡¥ä¸Šã€‚</p><h3 id="3-2-å·ç§¯ç½‘ç»œæå–ç‰¹å¾"><a href="#3-2-å·ç§¯ç½‘ç»œæå–ç‰¹å¾" class="headerlink" title="3.2 å·ç§¯ç½‘ç»œæå–ç‰¹å¾"></a><strong>3.2 å·ç§¯ç½‘ç»œæå–ç‰¹å¾</strong></h3><p>åœ¨ä¸Šä¸€èŠ‚å›¾åƒåˆ†ç±»çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ è¿‡äº†é€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œæå–å›¾åƒç‰¹å¾ã€‚é€šè¿‡è¿ç»­ä½¿ç”¨å¤šå±‚å·ç§¯å’Œæ± åŒ–ç­‰æ“ä½œï¼Œèƒ½å¾—åˆ°è¯­ä¹‰å«ä¹‰æ›´åŠ ä¸°å¯Œçš„ç‰¹å¾å›¾ã€‚åœ¨æ£€æµ‹é—®é¢˜ä¸­ï¼Œä¹Ÿä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œé€å±‚æå–å›¾åƒç‰¹å¾ï¼Œé€šè¿‡æœ€ç»ˆçš„è¾“å‡ºç‰¹å¾å›¾æ¥è¡¨å¾ç‰©ä½“ä½ç½®å’Œç±»åˆ«ç­‰ä¿¡æ¯ã€‚</p><p><strong>éª¨å¹²ç½‘ç»œ[backbone]</strong></p><p>YOLOv3ç®—æ³•ä½¿ç”¨çš„éª¨å¹²ç½‘ç»œæ˜¯<a href="https://blog.csdn.net/weixin_48167570/article/details/120688156">Darknet53</a>ã€‚Darknet53ç½‘ç»œçš„å…·ä½“ç»“æ„å¦‚ <strong>å›¾11</strong> æ‰€ç¤ºï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d5cb1e88d3f44259be1427a90ee454a57738ee8083ad40269f5485988526f30d" width = "400"></center><center><br>å›¾11ï¼šDarknet53ç½‘ç»œç»“æ„ </br></center><p><br></br></p><p>åœ¨æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œå°†å›¾ä¸­C0åé¢çš„å¹³å‡æ± åŒ–ã€å…¨è¿æ¥å±‚å’ŒSoftmaxå»æ‰ï¼Œä¿ç•™ä»è¾“å…¥åˆ°C0éƒ¨åˆ†çš„ç½‘ç»œç»“æ„ï¼Œä½œä¸ºæ£€æµ‹æ¨¡å‹çš„åŸºç¡€ç½‘ç»œç»“æ„ï¼Œä¹Ÿç§°ä¸ºéª¨å¹²ç½‘ç»œã€‚YOLOv3æ¨¡å‹ä¼šåœ¨éª¨å¹²ç½‘ç»œçš„åŸºç¡€ä¸Šï¼Œå†æ·»åŠ æ£€æµ‹ç›¸å…³çš„ç½‘ç»œæ¨¡å—ã€‚</p><hr><blockquote><ul><li><strong>åè¯è§£é‡Š</strong>ï¼šç‰¹å¾å›¾çš„æ­¥å¹…</li></ul><p>åœ¨æå–ç‰¹å¾çš„è¿‡ç¨‹ä¸­é€šå¸¸ä¼šä½¿ç”¨æ­¥å¹…å¤§äº1çš„å·ç§¯æˆ–è€…æ± åŒ–ï¼Œå¯¼è‡´åé¢çš„ç‰¹å¾å›¾å°ºå¯¸è¶Šæ¥è¶Šå°ï¼Œ<strong>ç‰¹å¾å›¾çš„æ­¥å¹…ç­‰äºè¾“å…¥å›¾ç‰‡å°ºå¯¸é™¤ä»¥ç‰¹å¾å›¾å°ºå¯¸</strong>ã€‚</p><p>ä¾‹å¦‚ï¼šC0çš„å°ºå¯¸æ˜¯$20\times20$ï¼ŒåŸå›¾å°ºå¯¸æ˜¯$640\times640$ï¼Œåˆ™C0çš„æ­¥å¹…æ˜¯$\frac{640}{20}&#x3D;32$ã€‚åŒç†ï¼ŒC1çš„æ­¥å¹…æ˜¯16ï¼ŒC2çš„æ­¥å¹…æ˜¯8ã€‚</p></blockquote><hr><p>ä¸‹é¢çš„ç¨‹åºæ˜¯Darknet53éª¨å¹²ç½‘ç»œçš„å®ç°ä»£ç ï¼Œè¿™é‡Œå°†ä¸Šå›¾ä¸­C0ã€C1ã€C2æ‰€è¡¨ç¤ºçš„è¾“å‡ºæ•°æ®å–å‡ºï¼Œå¹¶æŸ¥çœ‹å®ƒä»¬çš„å½¢çŠ¶åˆ†åˆ«æ˜¯ï¼Œ$C0 [1, 1024, 20, 20]$ï¼Œ$C1 [1, 512, 40, 40]$ï¼Œ$C2 [1, 256, 80, 80]$ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å·ç§¯å’Œæ‰¹å½’ä¸€åŒ–å°è£…ä¸ºConvBNLayerï¼Œæ–¹ä¾¿åç»­å¤ç”¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConvBNLayer</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, ch_in, ch_out, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, groups=<span class="number">1</span>, padding=<span class="number">0</span>, act=<span class="string">&quot;leaky&quot;</span></span>):</span><br><span class="line">        <span class="comment"># actä¸ºæ¿€æ´»å‡½æ•°</span></span><br><span class="line">        <span class="comment"># kernel_size=3 è¡¨ç¤ºä½¿ç”¨äº†3Ã—3çš„å·ç§¯æ ¸</span></span><br><span class="line">        <span class="comment"># stride=1 è¡¨ç¤ºæ­¥å¹…ä¸º1</span></span><br><span class="line">        <span class="built_in">super</span>(ConvBNLayer, self).__init__()</span><br><span class="line">        <span class="comment"># åˆ›å»ºå·ç§¯å±‚</span></span><br><span class="line">        self.conv = paddle.nn.Conv2D(</span><br><span class="line">            in_channels=ch_in,</span><br><span class="line">            out_channels=ch_out,</span><br><span class="line">            kernel_size=kernel_size,</span><br><span class="line">            stride=stride,</span><br><span class="line">            padding=padding,</span><br><span class="line">            groups=groups,</span><br><span class="line">            <span class="comment"># éšæœºæ­£æ€ï¼ˆé«˜æ–¯ï¼‰åˆ†å¸ƒåˆå§‹åŒ–å‡½æ•°</span></span><br><span class="line">            weight_attr=paddle.ParamAttr(initializer=paddle.nn.initializer.Normal(<span class="number">0.</span>, <span class="number">0.02</span>)),</span><br><span class="line">            bias_attr=<span class="literal">False</span>)</span><br><span class="line">        <span class="comment"># åˆ›å»ºæ‰¹å½’ä¸€åŒ–å±‚</span></span><br><span class="line">        self.batch_norm = paddle.nn.BatchNorm2D(</span><br><span class="line">            num_features=ch_out,</span><br><span class="line">            weight_attr=paddle.ParamAttr(</span><br><span class="line">                <span class="comment"># å°†å‚æ•°éšæœºåˆå§‹åŒ–</span></span><br><span class="line">                initializer=paddle.nn.initializer.Normal(<span class="number">0.</span>, <span class="number">0.02</span>),</span><br><span class="line">                <span class="comment"># L2 æƒé‡è¡°å‡æ­£åˆ™åŒ–ï¼Œé»˜è®¤æ­£åˆ™åŒ–ç³»æ•°ä¸º0.</span></span><br><span class="line">                regularizer=paddle.regularizer.L2Decay(<span class="number">0.</span>)),</span><br><span class="line">            bias_attr=paddle.ParamAttr(</span><br><span class="line">                initializer=paddle.nn.initializer.Constant(<span class="number">0.0</span>),</span><br><span class="line">                regularizer=paddle.regularizer.L2Decay(<span class="number">0.</span>)))</span><br><span class="line">        self.act = act</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):<span class="comment"># è¾“å…¥ä¼ å…¥</span></span><br><span class="line">        out = self.conv(inputs)<span class="comment"># å·ç§¯</span></span><br><span class="line">        out = self.batch_norm(out)<span class="comment"># æ‰¹é‡å½’ä¸€åŒ–</span></span><br><span class="line">        <span class="keyword">if</span> self.act == <span class="string">&#x27;leaky&#x27;</span>:</span><br><span class="line">            out = F.leaky_relu(x=out, negative_slope=<span class="number">0.1</span>)<span class="comment"># æ”¾å…¥æ¿€æ´»å‡½æ•°</span></span><br><span class="line">        <span class="keyword">return</span> out<span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸‹é‡‡æ ·æ¨¡å—ï¼Œä½¿å›¾ç‰‡å°ºå¯¸å‡åŠï¼Œæ¯æ¬¡è¿è¡Œå®Œåé«˜å®½å‡åŠ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DownSample</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 ch_in,</span></span><br><span class="line"><span class="params">                 ch_out,</span></span><br><span class="line"><span class="params">                 kernel_size=<span class="number">3</span>,</span></span><br><span class="line"><span class="params">                 stride=<span class="number">2</span>,</span></span><br><span class="line"><span class="params">                 padding=<span class="number">1</span></span>):</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>(DownSample, self).__init__()</span><br><span class="line">        <span class="comment"># ä½¿ç”¨ stride=2 çš„å·ç§¯ï¼Œå¯ä»¥ä½¿å›¾ç‰‡å°ºå¯¸å‡åŠ</span></span><br><span class="line">        self.conv_bn_layer = ConvBNLayer(</span><br><span class="line">            ch_in=ch_in,</span><br><span class="line">            ch_out=ch_out,</span><br><span class="line">            kernel_size=kernel_size,</span><br><span class="line">            stride=stride,</span><br><span class="line">            padding=padding)</span><br><span class="line">        self.ch_out = ch_out</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        out = self.conv_bn_layer(inputs)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ®‹å·®å—</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicBlock</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŸºæœ¬æ®‹å·®å—çš„å®šä¹‰ï¼Œè¾“å…¥xç»è¿‡ä¸¤å±‚å·ç§¯ï¼Œç„¶åæ¥ç¬¬äºŒå±‚å·ç§¯çš„è¾“å‡ºå’Œè¾“å…¥xç›¸åŠ </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, ch_in, ch_out</span>):</span><br><span class="line">        <span class="built_in">super</span>(BasicBlock, self).__init__()</span><br><span class="line">        <span class="comment"># ç¬¬ä¸€ä¸ªå·ç§¯å±‚</span></span><br><span class="line">        self.conv1 = ConvBNLayer(</span><br><span class="line">            ch_in=ch_in,</span><br><span class="line">            ch_out=ch_out,</span><br><span class="line">            kernel_size=<span class="number">1</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">0</span></span><br><span class="line">            )</span><br><span class="line">        <span class="comment"># ç¬¬äºŒä¸ªå·ç§¯å±‚</span></span><br><span class="line">        self.conv2 = ConvBNLayer(</span><br><span class="line">            ch_in=ch_out,</span><br><span class="line">            ch_out=ch_out*<span class="number">2</span>,<span class="comment"># è¾“å‡ºé€šé“Ã—2</span></span><br><span class="line">            kernel_size=<span class="number">3</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">1</span></span><br><span class="line">            )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        conv1 = self.conv1(inputs)</span><br><span class="line">        conv2 = self.conv2(conv1)</span><br><span class="line">        <span class="comment"># å°†ç¬¬äºŒä¸ªå·ç§¯å±‚çš„è¾“å‡ºå’Œæœ€åˆçš„è¾“å…¥å€¼æŒ‰å…ƒç´ å¯¹åº”ä½ç½®ç›¸åŠ ï¼ˆå‰æï¼šå½¢çŠ¶ä¸å˜ï¼‰</span></span><br><span class="line">        out = paddle.add(x=inputs, y=conv2)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å¤šä¸ªæ®‹å·®å—å°è£…ä¸ºä¸€ä¸ªå±‚çº§ï¼Œæ–¹ä¾¿åç»­å¤ç”¨     </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LayerWarp</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ·»åŠ å¤šå±‚ï¼ˆcountï¼‰æ®‹å·®å—ï¼Œç»„æˆDarknet53ç½‘ç»œçš„ä¸€ä¸ªå±‚çº§</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, ch_in, ch_out, count, is_test=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(LayerWarp,self).__init__()</span><br><span class="line">        self.basicblock0 = BasicBlock(ch_in, ch_out)</span><br><span class="line">        self.res_out_list = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, count):</span><br><span class="line">            <span class="comment"># ä½¿ç”¨add_sublayeræ·»åŠ å­å±‚</span></span><br><span class="line">            res_out = self.add_sublayer(<span class="string">&quot;basic_block_%d&quot;</span> % (i),</span><br><span class="line">                BasicBlock(ch_out*<span class="number">2</span>, ch_out))</span><br><span class="line">            self.res_out_list.append(res_out)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,inputs</span>):</span><br><span class="line">        y = self.basicblock0(inputs)</span><br><span class="line">        <span class="keyword">for</span> basic_block_i <span class="keyword">in</span> self.res_out_list:</span><br><span class="line">            y = basic_block_i(y)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="comment"># DarkNet æ¯ç»„æ®‹å·®å—çš„ä¸ªæ•°ï¼Œæ¥è‡ªDarkNetçš„ç½‘ç»œç»“æ„å›¾</span></span><br><span class="line">DarkNet_cfg = &#123;<span class="number">53</span>: ([<span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">4</span>])&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºDarkNet53éª¨å¹²ç½‘ç»œ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DarkNet53_conv_body</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(DarkNet53_conv_body, self).__init__()</span><br><span class="line">        self.stages = DarkNet_cfg[<span class="number">53</span>]</span><br><span class="line">        self.stages = self.stages[<span class="number">0</span>:<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¬¬ä¸€å±‚å·ç§¯</span></span><br><span class="line">        self.conv0 = ConvBNLayer(</span><br><span class="line">            ch_in=<span class="number">3</span>,</span><br><span class="line">            ch_out=<span class="number">32</span>,</span><br><span class="line">            kernel_size=<span class="number">3</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¸‹é‡‡æ ·ï¼Œä½¿ç”¨stride=2çš„å·ç§¯æ¥å®ç°</span></span><br><span class="line">        self.downsample0 = DownSample(</span><br><span class="line">            ch_in=<span class="number">32</span>,</span><br><span class="line">            ch_out=<span class="number">32</span> * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ·»åŠ å„ä¸ªå±‚çº§çš„å®ç°</span></span><br><span class="line">        self.darknet53_conv_block_list = []</span><br><span class="line">        self.downsample_list = []</span><br><span class="line">        <span class="keyword">for</span> i, stage <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.stages):</span><br><span class="line">            conv_block = self.add_sublayer(</span><br><span class="line">                <span class="string">&quot;stage_%d&quot;</span> % (i),</span><br><span class="line">                LayerWarp(<span class="number">32</span>*(<span class="number">2</span>**(i+<span class="number">1</span>)),</span><br><span class="line">                <span class="number">32</span>*(<span class="number">2</span>**i),</span><br><span class="line">                stage))</span><br><span class="line">            self.darknet53_conv_block_list.append(conv_block)</span><br><span class="line">        <span class="comment"># ä¸¤ä¸ªå±‚çº§ä¹‹é—´ä½¿ç”¨DownSampleå°†å°ºå¯¸å‡åŠ</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.stages) - <span class="number">1</span>):</span><br><span class="line">            downsample = self.add_sublayer(</span><br><span class="line">                <span class="string">&quot;stage_%d_downsample&quot;</span> % i,</span><br><span class="line">                DownSample(ch_in=<span class="number">32</span>*(<span class="number">2</span>**(i+<span class="number">1</span>)),</span><br><span class="line">                    ch_out=<span class="number">32</span>*(<span class="number">2</span>**(i+<span class="number">2</span>))))</span><br><span class="line">            self.downsample_list.append(downsample)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,inputs</span>):</span><br><span class="line">        out = self.conv0(inputs)</span><br><span class="line">        <span class="comment">#print(&quot;conv1:&quot;,out.numpy())</span></span><br><span class="line">        out = self.downsample0(out)</span><br><span class="line">        <span class="comment">#print(&quot;downsample:&quot;,out.numpy())</span></span><br><span class="line">        blocks = []</span><br><span class="line">        <span class="comment"># ä¾æ¬¡å°†å„ä¸ªå±‚çº§ä½œç”¨åœ¨è¾“å…¥ä¸Šé¢</span></span><br><span class="line">        <span class="keyword">for</span> i, conv_block_i <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.darknet53_conv_block_list):</span><br><span class="line">            out = conv_block_i(out)</span><br><span class="line">            blocks.append(out)</span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="built_in">len</span>(self.stages) - <span class="number">1</span>:</span><br><span class="line">                out = self.downsample_list[i](out)</span><br><span class="line">        <span class="comment"># å°†C0, C1, C2ä½œä¸ºè¿”å›å€¼</span></span><br><span class="line">        <span class="keyword">return</span> blocks[-<span class="number">1</span>:-<span class="number">4</span>:-<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¿™æ®µç¤ºä¾‹ä»£ç ï¼ŒæŒ‡å®šè¾“å…¥æ•°æ®çš„å½¢çŠ¶æ˜¯$(1, 3, 640, 640)$ï¼Œåˆ™3ä¸ªå±‚çº§çš„è¾“å‡ºç‰¹å¾å›¾çš„å½¢çŠ¶åˆ†åˆ«æ˜¯$C0 (1, 1024, 20, 20)$ï¼Œ$C1 (1, 512, 40, 40)$å’Œ$C2 (1, 256, 80, 80)$ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹Darknet53ç½‘ç»œè¾“å‡ºç‰¹å¾å›¾</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">x = np.random.randn(<span class="number">1</span>, <span class="number">3</span>, <span class="number">640</span>, <span class="number">640</span>).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line"><span class="built_in">print</span>(C0.shape, C1.shape, C2.shape)</span><br></pre></td></tr></table></figure><pre><code>[1, 1024, 20, 20] [1, 512, 40, 40] [1, 256, 80, 80]</code></pre><h2 id="4-æ ¹æ®è¾“å‡ºç‰¹å¾å›¾è®¡ç®—é¢„æµ‹æ¡†ä½ç½®å’Œç±»åˆ«"><a href="#4-æ ¹æ®è¾“å‡ºç‰¹å¾å›¾è®¡ç®—é¢„æµ‹æ¡†ä½ç½®å’Œç±»åˆ«" class="headerlink" title="4.æ ¹æ®è¾“å‡ºç‰¹å¾å›¾è®¡ç®—é¢„æµ‹æ¡†ä½ç½®å’Œç±»åˆ«"></a>4.æ ¹æ®è¾“å‡ºç‰¹å¾å›¾è®¡ç®—é¢„æµ‹æ¡†ä½ç½®å’Œç±»åˆ«</h2><p>YOLOv3ä¸­å¯¹æ¯ä¸ªé¢„æµ‹æ¡†è®¡ç®—é€»è¾‘å¦‚ä¸‹ï¼š</p><ul><li><p>é¢„æµ‹æ¡†æ˜¯å¦åŒ…å«ç‰©ä½“ã€‚ä¹Ÿå¯ç†è§£ä¸ºobjectness&#x3D;1çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Œå¯ä»¥ç”¨ç½‘ç»œè¾“å‡ºä¸€ä¸ªå®æ•°$x$ï¼Œå¯ä»¥ç”¨$Sigmoid(x)$è¡¨ç¤ºobjectnessä¸ºæ­£çš„æ¦‚ç‡$P_{obj}$</p></li><li><p>é¢„æµ‹ç‰©ä½“ä½ç½®å’Œå½¢çŠ¶ã€‚ç‰©ä½“ä½ç½®å’Œå½¢çŠ¶$t_x, t_y, t_w, t_h$å¯ä»¥ç”¨ç½‘ç»œè¾“å‡º4ä¸ªå®æ•°æ¥è¡¨ç¤º$t_x, t_y, t_w, t_h$</p></li><li><p>é¢„æµ‹ç‰©ä½“ç±»åˆ«ã€‚é¢„æµ‹å›¾åƒä¸­ç‰©ä½“çš„å…·ä½“ç±»åˆ«æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…è¯´å…¶å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡åˆ†åˆ«æ˜¯å¤šå°‘ã€‚æ€»çš„ç±»åˆ«æ•°ä¸ºCï¼Œéœ€è¦é¢„æµ‹ç‰©ä½“å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡$(P_1, P_2, â€¦, P_C)$ï¼Œå¯ä»¥ç”¨ç½‘ç»œè¾“å‡ºCä¸ªå®æ•°$(x_1, x_2, â€¦, x_C)$ï¼Œå¯¹æ¯ä¸ªå®æ•°åˆ†åˆ«æ±‚Sigmoidå‡½æ•°ï¼Œè®©$P_i &#x3D; Sigmoid(x_i)$ï¼Œåˆ™å¯ä»¥è¡¨ç¤ºå‡ºç‰©ä½“å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p></li></ul><p>å¯¹äºä¸€ä¸ªé¢„æµ‹æ¡†ï¼Œç½‘ç»œéœ€è¦è¾“å‡º$(5 + C)$ä¸ªå®æ•°æ¥è¡¨å¾å®ƒæ˜¯å¦åŒ…å«ç‰©ä½“ã€ä½ç½®å’Œå½¢çŠ¶å°ºå¯¸ä»¥åŠå±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚ç”±äºæˆ‘ä»¬åœ¨æ¯ä¸ªå°æ–¹å—åŒºåŸŸéƒ½ç”Ÿæˆäº†Kä¸ªé¢„æµ‹æ¡†ï¼Œåˆ™æ‰€æœ‰é¢„æµ‹æ¡†ä¸€å…±éœ€è¦ç½‘ç»œè¾“å‡ºçš„é¢„æµ‹å€¼æ•°ç›®æ˜¯ï¼š</p><p>$$<br>[K(5 + C)] \times m \times n<br>$$<br>è¿˜æœ‰æ›´é‡è¦çš„ä¸€ç‚¹æ˜¯ç½‘ç»œè¾“å‡ºå¿…é¡»è¦èƒ½åŒºåˆ†å‡ºå°æ–¹å—åŒºåŸŸçš„ä½ç½®æ¥ï¼Œä¸èƒ½ç›´æ¥å°†ç‰¹å¾å›¾è¿æ¥ä¸€ä¸ªè¾“å‡ºå¤§å°ä¸º$[K(5 + C)] \times m \times n$çš„å…¨è¿æ¥å±‚ã€‚</p><h3 id="4-1å»ºç«‹è¾“å‡ºç‰¹å¾å›¾ä¸é¢„æµ‹æ¡†ä¹‹é—´çš„å…³è”"><a href="#4-1å»ºç«‹è¾“å‡ºç‰¹å¾å›¾ä¸é¢„æµ‹æ¡†ä¹‹é—´çš„å…³è”" class="headerlink" title="4.1å»ºç«‹è¾“å‡ºç‰¹å¾å›¾ä¸é¢„æµ‹æ¡†ä¹‹é—´çš„å…³è”"></a><strong>4.1å»ºç«‹è¾“å‡ºç‰¹å¾å›¾ä¸é¢„æµ‹æ¡†ä¹‹é—´çš„å…³è”</strong></h3><p>ç°åœ¨è§‚å¯Ÿç‰¹å¾å›¾ï¼Œç»è¿‡å¤šæ¬¡å·ç§¯æ ¸æ± åŒ–ä¹‹åï¼Œå…¶æ­¥å¹…stride&#x3D;32ï¼Œ$640 \times 480$å¤§å°çš„è¾“å…¥å›¾ç‰‡å˜æˆäº†$20\times15$çš„ç‰¹å¾å›¾ï¼›è€Œå°æ–¹å—åŒºåŸŸçš„æ•°ç›®æ­£å¥½æ˜¯$20\times15$ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è®©ç‰¹å¾å›¾ä¸Šæ¯ä¸ªåƒç´ ç‚¹åˆ†åˆ«è·ŸåŸå›¾ä¸Šä¸€ä¸ªå°æ–¹å—åŒºåŸŸå¯¹åº”ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€å¼€å§‹å°†å°æ–¹å—åŒºåŸŸçš„å°ºå¯¸è®¾ç½®ä¸º32çš„åŸå› ï¼Œè¿™æ ·å¯ä»¥å·§å¦™çš„å°†å°æ–¹å—åŒºåŸŸè·Ÿç‰¹å¾å›¾ä¸Šçš„åƒç´ ç‚¹å¯¹åº”èµ·æ¥ï¼Œè§£å†³äº†ç©ºé—´ä½ç½®çš„å¯¹åº”å…³ç³»ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/59bd2592dd9f4f4dada8333307198888e667b15969ce434eb52c0232d9608a62" width = "600"></center><center><br>å›¾12ï¼šç‰¹å¾å›¾C0ä¸å°æ–¹å—åŒºåŸŸå½¢çŠ¶å¯¹æ¯” </br></center><p><br></br></p><p>ä¸‹é¢éœ€è¦å°†åƒç´ ç‚¹$(i,j)$ä¸ç¬¬iè¡Œç¬¬jåˆ—çš„å°æ–¹å—åŒºåŸŸæ‰€éœ€è¦çš„é¢„æµ‹å€¼å…³è”èµ·æ¥ï¼Œæ¯ä¸ªå°æ–¹å—åŒºåŸŸäº§ç”ŸKä¸ªé¢„æµ‹æ¡†ï¼Œæ¯ä¸ªé¢„æµ‹æ¡†éœ€è¦$(5 + C)$ä¸ªå®æ•°é¢„æµ‹å€¼ï¼Œåˆ™æ¯ä¸ªåƒç´ ç‚¹ç›¸å¯¹åº”çš„è¦æœ‰$K(5 + C)$ä¸ªå®æ•°ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¯¹ç‰¹å¾å›¾è¿›è¡Œå¤šæ¬¡å·ç§¯ï¼Œå¹¶å°†æœ€ç»ˆçš„è¾“å‡ºé€šé“æ•°è®¾ç½®ä¸º$K(5 + C)$ï¼Œå³å¯å°†ç”Ÿæˆçš„ç‰¹å¾å›¾ä¸æ¯ä¸ªé¢„æµ‹æ¡†æ‰€éœ€è¦çš„é¢„æµ‹å€¼å·§å¦™çš„å¯¹åº”èµ·æ¥ã€‚å½“ç„¶ï¼Œè¿™ç§å¯¹åº”æ˜¯ä¸ºäº†å°†éª¨å¹²ç½‘ç»œæå–çš„ç‰¹å¾å¯¹æ¥è¾“å‡ºå±‚æ¥å½¢æˆLossã€‚å®é™…ä¸­ï¼Œè¿™å‡ ä¸ªå°ºå¯¸å¯ä»¥éšç€ä»»åŠ¡æ•°æ®åˆ†å¸ƒçš„ä¸åŒè€Œè°ƒæ•´ï¼Œåªè¦ä¿è¯ç‰¹å¾å›¾è¾“å‡ºå°ºå¯¸ï¼ˆæ§åˆ¶å·ç§¯æ ¸å’Œä¸‹é‡‡æ ·ï¼‰å’Œè¾“å‡ºå±‚å°ºå¯¸ï¼ˆæ§åˆ¶å°æ–¹å—åŒºåŸŸçš„å¤§å°ï¼‰ç›¸åŒå³å¯ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f1d445d77cd84c60897ade92cc24f951a7672a72dc6f43b8aeb6932b6db778d6" width = "600"></center><center><br>å›¾13ï¼šç‰¹å¾å›¾C0ä¸å°æ–¹å—åŒºåŸŸä¸€ä¸€å¯¹åº” </br></center><p><br></br></p><p>éª¨å¹²ç½‘ç»œçš„è¾“å‡ºç‰¹å¾å›¾æ˜¯C0ï¼Œä¸‹é¢çš„ç¨‹åºæ˜¯å¯¹C0è¿›è¡Œå¤šæ¬¡å·ç§¯ä»¥å¾—åˆ°è·Ÿé¢„æµ‹æ¡†ç›¸å…³çš„ç‰¹å¾å›¾P0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ YOLOv3 åç»­è¿æ¥çš„ç½‘ç»œå±‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YoloDetectionBlock</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="comment"># ä½¿ç”¨å¤šå±‚å·ç§¯å’ŒBNæå–ç‰¹å¾</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,ch_in,ch_out,is_test=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(YoloDetectionBlock, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">assert</span> ch_out % <span class="number">2</span> == <span class="number">0</span>, \</span><br><span class="line">            <span class="string">&quot;channel &#123;&#125; cannot be divided by 2&quot;</span>.<span class="built_in">format</span>(ch_out)</span><br><span class="line"></span><br><span class="line">        self.conv0 = ConvBNLayer(</span><br><span class="line">            ch_in=ch_in,</span><br><span class="line">            ch_out=ch_out,</span><br><span class="line">            kernel_size=<span class="number">1</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">0</span>)</span><br><span class="line">        self.conv1 = ConvBNLayer(</span><br><span class="line">            ch_in=ch_out,</span><br><span class="line">            ch_out=ch_out*<span class="number">2</span>,</span><br><span class="line">            kernel_size=<span class="number">3</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">1</span>)</span><br><span class="line">        self.conv2 = ConvBNLayer(</span><br><span class="line">            ch_in=ch_out*<span class="number">2</span>,</span><br><span class="line">            ch_out=ch_out,</span><br><span class="line">            kernel_size=<span class="number">1</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">0</span>)</span><br><span class="line">        self.conv3 = ConvBNLayer(</span><br><span class="line">            ch_in=ch_out,</span><br><span class="line">            ch_out=ch_out*<span class="number">2</span>,</span><br><span class="line">            kernel_size=<span class="number">3</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># çº¿æ€§å±‚</span></span><br><span class="line">        self.route = ConvBNLayer(</span><br><span class="line">            ch_in=ch_out*<span class="number">2</span>,</span><br><span class="line">            ch_out=ch_out,</span><br><span class="line">            kernel_size=<span class="number">1</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># æœ€æœ«å±‚</span></span><br><span class="line">        self.tip = ConvBNLayer(</span><br><span class="line">            ch_in=ch_out,</span><br><span class="line">            ch_out=ch_out*<span class="number">2</span>,</span><br><span class="line">            kernel_size=<span class="number">3</span>,</span><br><span class="line">            stride=<span class="number">1</span>,</span><br><span class="line">            padding=<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        out = self.conv0(inputs)</span><br><span class="line">        out = self.conv1(out)</span><br><span class="line">        out = self.conv2(out)</span><br><span class="line">        out = self.conv3(out)</span><br><span class="line">        route = self.route(out)</span><br><span class="line">        tip = self.tip(route)</span><br><span class="line">        <span class="keyword">return</span> route, tip</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">NUM_ANCHORS = <span class="number">3</span> <span class="comment"># é”šæ¡†æ•°</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span> <span class="comment"># ç±»åˆ«æ•°</span></span><br><span class="line">num_filters=NUM_ANCHORS * (NUM_CLASSES + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">detection = YoloDetectionBlock(ch_in=<span class="number">1024</span>, ch_out=<span class="number">512</span>)</span><br><span class="line">conv2d_pred = paddle.nn.Conv2D(in_channels=<span class="number">1024</span>, out_channels=num_filters, kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">1</span>, <span class="number">3</span>, <span class="number">640</span>, <span class="number">640</span>).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line">route, tip = detection(C0)</span><br><span class="line">P0 = conv2d_pred(tip)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(P0.shape)</span><br></pre></td></tr></table></figure><pre><code>[1, 36, 20, 20]å¡«å……çš„å­˜åœ¨å¤§å°ä¸ä¼šå‘ç”Ÿå˜åŒ–</code></pre><p>å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œå¯ä»¥ç”±ç‰¹å¾å›¾C0ç”Ÿæˆç‰¹å¾å›¾P0ï¼ŒP0çš„å½¢çŠ¶æ˜¯$[1, 36, 20, 20]$ã€‚æ¯ä¸ªå°æ–¹å—åŒºåŸŸç”Ÿæˆçš„é”šæ¡†æˆ–è€…é¢„æµ‹æ¡†çš„æ•°é‡æ˜¯3ï¼Œç‰©ä½“ç±»åˆ«æ•°ç›®æ˜¯7ï¼Œæ¯ä¸ªåŒºåŸŸéœ€è¦çš„é¢„æµ‹å€¼ä¸ªæ•°æ˜¯$3 \times (5 + 7) &#x3D; 36$ï¼Œæ­£å¥½ç­‰äºP0çš„è¾“å‡ºé€šé“æ•°ã€‚</p><p>å°†$P0[t, 0:12, i, j]$ä¸è¾“å…¥çš„ç¬¬tå¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬1ä¸ªé¢„æµ‹æ¡†æ‰€éœ€è¦çš„12ä¸ªé¢„æµ‹å€¼å¯¹åº”ï¼Œ$P0[t, 12:24, i, j]$ä¸è¾“å…¥çš„ç¬¬tå¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬2ä¸ªé¢„æµ‹æ¡†æ‰€éœ€è¦çš„12ä¸ªé¢„æµ‹å€¼å¯¹åº”ï¼Œ$P0[t, 24:36, i, j]$ä¸è¾“å…¥çš„ç¬¬tå¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬3ä¸ªé¢„æµ‹æ¡†æ‰€éœ€è¦çš„12ä¸ªé¢„æµ‹å€¼å¯¹åº”ã€‚</p><p>$P0[t, 0:4, i, j]$ä¸è¾“å…¥çš„ç¬¬tå¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬1ä¸ªé¢„æµ‹æ¡†çš„ä½ç½®å¯¹åº”ï¼Œ$P0[t, 4, i, j]$ä¸è¾“å…¥çš„ç¬¬tå¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬1ä¸ªé¢„æµ‹æ¡†çš„objectnesså¯¹åº”ï¼Œ$P0[t, 5:12, i, j]$ä¸è¾“å…¥çš„ç¬¬tå¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬1ä¸ªé¢„æµ‹æ¡†çš„ç±»åˆ«å¯¹åº”ã€‚</p><p>å¦‚ <strong>å›¾14</strong> æ‰€ç¤ºï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å·§å¦™çš„å°†ç½‘ç»œè¾“å‡ºç‰¹å¾å›¾ï¼Œä¸æ¯ä¸ªå°æ–¹å—åŒºåŸŸç”Ÿæˆçš„é¢„æµ‹æ¡†å¯¹åº”èµ·æ¥äº†ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/9ea44b2c11f74f1484ab2bdc93be4008008cdee0b8d34dcb97bc9f89af935d1c" width = "800"></center><center><br>å›¾14ï¼šç‰¹å¾å›¾P0ä¸å€™é€‰åŒºåŸŸçš„å…³è” </br></center><p><br></br></p><h3 id="4-2è®¡ç®—é¢„æµ‹æ¡†æ˜¯å¦åŒ…å«ç‰©ä½“çš„æ¦‚ç‡"><a href="#4-2è®¡ç®—é¢„æµ‹æ¡†æ˜¯å¦åŒ…å«ç‰©ä½“çš„æ¦‚ç‡" class="headerlink" title="4.2è®¡ç®—é¢„æµ‹æ¡†æ˜¯å¦åŒ…å«ç‰©ä½“çš„æ¦‚ç‡"></a><strong>4.2è®¡ç®—é¢„æµ‹æ¡†æ˜¯å¦åŒ…å«ç‰©ä½“çš„æ¦‚ç‡</strong></h3><p>æ ¹æ®å‰é¢çš„åˆ†æï¼Œ$P0[t, 4, i, j]$ä¸è¾“å…¥çš„ç¬¬tå¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬1ä¸ªé¢„æµ‹æ¡†çš„objectnesså¯¹åº”ï¼Œ$P0[t, 4+12, i, j]$ä¸ç¬¬2ä¸ªé¢„æµ‹æ¡†çš„objectnesså¯¹åº”ï¼Œâ€¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç¨‹åºå°†objectnessç›¸å…³çš„é¢„æµ‹å–å‡ºï¼Œå¹¶ä½¿ç”¨<code>paddle.nn.functional.sigmoid</code>è®¡ç®—è¾“å‡ºæ¦‚ç‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">NUM_ANCHORS = <span class="number">3</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line">num_filters=NUM_ANCHORS * (NUM_CLASSES + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">detection = YoloDetectionBlock(ch_in=<span class="number">1024</span>, ch_out=<span class="number">512</span>)</span><br><span class="line">conv2d_pred = paddle.nn.Conv2D(in_channels=<span class="number">1024</span>, out_channels=num_filters,  kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">1</span>, <span class="number">3</span>, <span class="number">640</span>, <span class="number">640</span>).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line">route, tip = detection(C0)</span><br><span class="line">P0 = conv2d_pred(tip)</span><br><span class="line"></span><br><span class="line">reshaped_p0 = paddle.reshape(P0, [-<span class="number">1</span>, NUM_ANCHORS, NUM_CLASSES + <span class="number">5</span>, P0.shape[<span class="number">2</span>], P0.shape[<span class="number">3</span>]])</span><br><span class="line"><span class="built_in">print</span>(P0.shape, reshaped_p0.shape)</span><br><span class="line">pred_objectness = reshaped_p0[:, :, <span class="number">4</span>, :, :]</span><br><span class="line">pred_objectness_probability = F.sigmoid(pred_objectness)</span><br><span class="line"><span class="built_in">print</span>(pred_objectness.shape, pred_objectness_probability.shape)</span><br></pre></td></tr></table></figure><pre><code>[1, 36, 20, 20] [1, 3, 12, 20, 20][1, 3, 20, 20] [1, 3, 20, 20]</code></pre><p>ä¸Šé¢çš„è¾“å‡ºç¨‹åºæ˜¾ç¤ºï¼Œé¢„æµ‹æ¡†æ˜¯å¦åŒ…å«ç‰©ä½“çš„æ¦‚ç‡<code>pred_objectness_probability</code>ï¼Œå…¶æ•°æ®å½¢çŠ¶æ˜¯[1, 3, 20, 20]ï¼Œä¸æˆ‘ä»¬ä¸Šé¢æåˆ°çš„é¢„æµ‹æ¡†ä¸ªæ•°ä¸€è‡´ï¼Œæ•°æ®å¤§å°åœ¨0ï½1ä¹‹é—´ï¼Œè¡¨ç¤ºé¢„æµ‹æ¡†ä¸ºæ­£æ ·æœ¬çš„æ¦‚ç‡ã€‚</p><h3 id="4-3è®¡ç®—é¢„æµ‹æ¡†ä½ç½®åæ ‡"><a href="#4-3è®¡ç®—é¢„æµ‹æ¡†ä½ç½®åæ ‡" class="headerlink" title="4.3è®¡ç®—é¢„æµ‹æ¡†ä½ç½®åæ ‡"></a><strong>4.3è®¡ç®—é¢„æµ‹æ¡†ä½ç½®åæ ‡</strong></h3><p>$P0[t, 0:4, i, j]$ä¸è¾“å…¥çš„ç¬¬$t$å¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬1ä¸ªé¢„æµ‹æ¡†çš„ä½ç½®å¯¹åº”ï¼Œ$P0[t, 12:16, i, j]$ä¸ç¬¬2ä¸ªé¢„æµ‹æ¡†çš„ä½ç½®å¯¹åº”ï¼Œä¾æ­¤ç±»æ¨ï¼Œåˆ™ä½¿ç”¨ä¸‹é¢çš„ç¨‹åºå¯ä»¥ä»$P0$ä¸­å–å‡ºè·Ÿé¢„æµ‹æ¡†ä½ç½®ç›¸å…³çš„é¢„æµ‹å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">NUM_ANCHORS = <span class="number">3</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line">num_filters=NUM_ANCHORS * (NUM_CLASSES + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">detection = YoloDetectionBlock(ch_in=<span class="number">1024</span>, ch_out=<span class="number">512</span>)</span><br><span class="line">conv2d_pred =  paddle.nn.Conv2D(in_channels=<span class="number">1024</span>, out_channels=num_filters,  kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">1</span>, <span class="number">3</span>, <span class="number">640</span>, <span class="number">640</span>).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line">route, tip = detection(C0)</span><br><span class="line">P0 = conv2d_pred(tip)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reshaped_p0 = paddle.reshape(P0, [-<span class="number">1</span>, NUM_ANCHORS, NUM_CLASSES + <span class="number">5</span>, P0.shape[<span class="number">2</span>], P0.shape[<span class="number">3</span>]])</span><br><span class="line">pred_objectness = reshaped_p0[:, :, <span class="number">4</span>, :, :]</span><br><span class="line">pred_objectness_probability = F.sigmoid(pred_objectness)</span><br><span class="line"></span><br><span class="line">pred_location = reshaped_p0[:, :, <span class="number">0</span>:<span class="number">4</span>, :, :]</span><br><span class="line"><span class="built_in">print</span>(pred_location.shape)</span><br></pre></td></tr></table></figure><pre><code>[1, 3, 4, 20, 20]</code></pre><p>ç½‘ç»œè¾“å‡ºå€¼æ˜¯$(t_x, t_y, t_w, t_h)$ï¼Œè¿˜éœ€è¦å°†å…¶è½¬åŒ–ä¸º$(x_1, y_1, x_2, y_2)$è¿™ç§å½¢å¼çš„åæ ‡è¡¨ç¤ºã€‚æˆ‘ä»¬ä½¿ç”¨Numpyæ¥å®ç°è¿™ä¸€è¿‡ç¨‹ã€‚åœ¨åé¢çš„ä»£ç ä¸­ä½¿ç”¨é£æ¡¨<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/ops/yolo_box_cn.html#yolo-box">paddle.vision.ops.yolo_box</a> APIå¯ä»¥ç›´æ¥è®¡ç®—å‡ºç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰Sigmoidå‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sigmoid</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.</span>/(<span class="number">1.0</span> + np.exp(-x))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ç½‘ç»œç‰¹å¾å›¾è¾“å‡ºçš„[tx, ty, th, tw]è½¬åŒ–æˆé¢„æµ‹æ¡†çš„åæ ‡[x1, y1, x2, y2]</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_yolo_box_xxyy</span>(<span class="params">pred, anchors, num_classes, downsample</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    predæ˜¯ç½‘ç»œè¾“å‡ºç‰¹å¾å›¾è½¬åŒ–æˆçš„numpy.ndarray</span></span><br><span class="line"><span class="string">    anchors æ˜¯ä¸€ä¸ªlistã€‚è¡¨ç¤ºé”šæ¡†çš„å¤§å°ï¼Œ</span></span><br><span class="line"><span class="string">                ä¾‹å¦‚ anchors = [116, 90, 156, 198, 373, 326]ï¼Œè¡¨ç¤ºæœ‰ä¸‰ä¸ªé”šæ¡†ï¼Œ</span></span><br><span class="line"><span class="string">                ç¬¬ä¸€ä¸ªé”šæ¡†å¤§å°[w, h]æ˜¯[116, 90]ï¼Œç¬¬äºŒä¸ªé”šæ¡†å¤§å°æ˜¯[156, 198]ï¼Œç¬¬ä¸‰ä¸ªé”šæ¡†å¤§å°æ˜¯[373, 326]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    batchsize = pred.shape[<span class="number">0</span>]</span><br><span class="line">    num_rows = pred.shape[-<span class="number">2</span>]</span><br><span class="line">    num_cols = pred.shape[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    input_h = num_rows * downsample</span><br><span class="line">    input_w = num_cols * downsample</span><br><span class="line"></span><br><span class="line">    num_anchors = <span class="built_in">len</span>(anchors) // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># predçš„å½¢çŠ¶æ˜¯[N, C, H, W]ï¼Œå…¶ä¸­C = NUM_ANCHORS * (5 + NUM_CLASSES)</span></span><br><span class="line">    <span class="comment"># å¯¹predè¿›è¡Œreshape</span></span><br><span class="line">    pred = pred.reshape([-<span class="number">1</span>, num_anchors, <span class="number">5</span>+num_classes, num_rows, num_cols])</span><br><span class="line">    pred_location = pred[:, :, <span class="number">0</span>:<span class="number">4</span>, :, :]</span><br><span class="line">    pred_location = np.transpose(pred_location, (<span class="number">0</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>)) <span class="comment"># [N, H, W, NUM_ANCHORS, 4]</span></span><br><span class="line">    anchors_this = [] <span class="comment"># è¾“å‡ºé”šæ¡†</span></span><br><span class="line">    <span class="keyword">for</span> ind <span class="keyword">in</span> <span class="built_in">range</span>(num_anchors):</span><br><span class="line">        anchors_this.append([anchors[ind*<span class="number">2</span>], anchors[ind*<span class="number">2</span>+<span class="number">1</span>]])</span><br><span class="line">    anchors_this = np.array(anchors_this).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æœ€ç»ˆè¾“å‡ºæ•°æ®ä¿å­˜åœ¨pred_boxä¸­ï¼Œå…¶å½¢çŠ¶æ˜¯[N, H, W, NUM_ANCHORS, 4]ï¼Œ</span></span><br><span class="line">    <span class="comment"># å…¶ä¸­æœ€åä¸€ä¸ªç»´åº¦4ä»£è¡¨ä½ç½®çš„4ä¸ªåæ ‡</span></span><br><span class="line">    pred_box = np.zeros(pred_location.shape)</span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(batchsize):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_rows):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(num_cols):</span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(num_anchors):</span><br><span class="line">                    pred_box[n, i, j, k, <span class="number">0</span>] = j</span><br><span class="line">                    pred_box[n, i, j, k, <span class="number">1</span>] = i</span><br><span class="line">                    pred_box[n, i, j, k, <span class="number">2</span>] = anchors_this[k][<span class="number">0</span>]</span><br><span class="line">                    pred_box[n, i, j, k, <span class="number">3</span>] = anchors_this[k][<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿™é‡Œä½¿ç”¨ç›¸å¯¹åæ ‡ï¼Œpred_boxçš„è¾“å‡ºå…ƒç´ æ•°å€¼åœ¨0.~1.0ä¹‹é—´</span></span><br><span class="line">    pred_box[:, :, :, :, <span class="number">0</span>] = (sigmoid(pred_location[:, :, :, :, <span class="number">0</span>]) + pred_box[:, :, :, :, <span class="number">0</span>]) / num_cols</span><br><span class="line">    pred_box[:, :, :, :, <span class="number">1</span>] = (sigmoid(pred_location[:, :, :, :, <span class="number">1</span>]) + pred_box[:, :, :, :, <span class="number">1</span>]) / num_rows</span><br><span class="line">    pred_box[:, :, :, :, <span class="number">2</span>] = np.exp(pred_location[:, :, :, :, <span class="number">2</span>]) * pred_box[:, :, :, :, <span class="number">2</span>] / input_w</span><br><span class="line">    pred_box[:, :, :, :, <span class="number">3</span>] = np.exp(pred_location[:, :, :, :, <span class="number">3</span>]) * pred_box[:, :, :, :, <span class="number">3</span>] / input_h</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†åæ ‡ä»xywhè½¬åŒ–æˆxyxy</span></span><br><span class="line">    pred_box[:, :, :, :, <span class="number">0</span>] = pred_box[:, :, :, :, <span class="number">0</span>] - pred_box[:, :, :, :, <span class="number">2</span>] / <span class="number">2.</span></span><br><span class="line">    pred_box[:, :, :, :, <span class="number">1</span>] = pred_box[:, :, :, :, <span class="number">1</span>] - pred_box[:, :, :, :, <span class="number">3</span>] / <span class="number">2.</span></span><br><span class="line">    pred_box[:, :, :, :, <span class="number">2</span>] = pred_box[:, :, :, :, <span class="number">0</span>] + pred_box[:, :, :, :, <span class="number">2</span>]</span><br><span class="line">    pred_box[:, :, :, :, <span class="number">3</span>] = pred_box[:, :, :, :, <span class="number">1</span>] + pred_box[:, :, :, :, <span class="number">3</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æˆªå– np.clip(a, a_min, a_max, out=None)</span></span><br><span class="line">    pred_box = np.clip(pred_box, <span class="number">0.</span>, <span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pred_box</span><br></pre></td></tr></table></figure><p>é€šè¿‡è°ƒç”¨ä¸Šé¢å®šä¹‰çš„<code>get_yolo_box_xxyy</code>å‡½æ•°ï¼Œå¯ä»¥ä»$P0$è®¡ç®—å‡ºé¢„æµ‹æ¡†åæ ‡æ¥ï¼Œå…·ä½“ç¨‹åºå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">NUM_ANCHORS = <span class="number">3</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line">num_filters=NUM_ANCHORS * (NUM_CLASSES + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">detection = YoloDetectionBlock(ch_in=<span class="number">1024</span>, ch_out=<span class="number">512</span>)</span><br><span class="line">conv2d_pred = paddle.nn.Conv2D(in_channels=<span class="number">1024</span>, out_channels=num_filters,  kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">1</span>, <span class="number">3</span>, <span class="number">640</span>, <span class="number">640</span>).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line">route, tip = detection(C0)</span><br><span class="line">P0 = conv2d_pred(tip)</span><br><span class="line"></span><br><span class="line">reshaped_p0 = paddle.reshape(P0, [-<span class="number">1</span>, NUM_ANCHORS, NUM_CLASSES + <span class="number">5</span>, P0.shape[<span class="number">2</span>], P0.shape[<span class="number">3</span>]])</span><br><span class="line">pred_objectness = reshaped_p0[:, :, <span class="number">4</span>, :, :]</span><br><span class="line">pred_objectness_probability = F.sigmoid(pred_objectness)</span><br><span class="line"></span><br><span class="line">pred_location = reshaped_p0[:, :, <span class="number">0</span>:<span class="number">4</span>, :, :]</span><br><span class="line"></span><br><span class="line"><span class="comment"># anchorsåŒ…å«äº†é¢„å…ˆè®¾å®šå¥½çš„é”šæ¡†å°ºå¯¸</span></span><br><span class="line">anchors = [<span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>]</span><br><span class="line"><span class="comment"># downsample æ˜¯ç‰¹å¾å›¾P0çš„æ­¥å¹…</span></span><br><span class="line"><span class="comment"># ç”±è¾“å‡ºç‰¹å¾å›¾P0è®¡ç®—é¢„æµ‹æ¡†ä½ç½®åæ ‡</span></span><br><span class="line">pred_boxes = get_yolo_box_xxyy(P0.numpy(), anchors, num_classes=<span class="number">7</span>, downsample=<span class="number">32</span>)</span><br><span class="line"><span class="built_in">print</span>(pred_location.shape, pred_boxes.shape)</span><br><span class="line"><span class="built_in">print</span>(pred_boxes[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>].shape, pred_boxes[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]) <span class="comment"># ä¸€ä¸ªä¸­å¿ƒä¸‰ä¸ªé”šæ¡† location</span></span><br></pre></td></tr></table></figure><pre><code>[1, 3, 4, 20, 20] (1, 20, 20, 3, 4)(3, 4) [[0.         0.         0.11592992 0.09357996] [0.         0.         0.14583146 0.17757062] [0.         0.         0.32789061 0.26856107]]</code></pre><h3 id="4-4è®¡ç®—ç‰©ä½“å±äºæ¯ä¸ªç±»åˆ«æ¦‚ç‡"><a href="#4-4è®¡ç®—ç‰©ä½“å±äºæ¯ä¸ªç±»åˆ«æ¦‚ç‡" class="headerlink" title="4.4è®¡ç®—ç‰©ä½“å±äºæ¯ä¸ªç±»åˆ«æ¦‚ç‡"></a><strong>4.4è®¡ç®—ç‰©ä½“å±äºæ¯ä¸ªç±»åˆ«æ¦‚ç‡</strong></h3><p>$P0[t, 5:12, i, j]$ä¸è¾“å…¥çš„ç¬¬$t$å¼ å›¾ç‰‡ä¸Šå°æ–¹å—åŒºåŸŸ$(i, j)$ç¬¬1ä¸ªé¢„æµ‹æ¡†åŒ…å«ç‰©ä½“çš„ç±»åˆ«å¯¹åº”ï¼Œ$P0[t, 17:24, i, j]$ä¸ç¬¬2ä¸ªé¢„æµ‹æ¡†çš„ç±»åˆ«å¯¹åº”ï¼Œä¾æ­¤ç±»æ¨ï¼Œåˆ™ä½¿ç”¨ä¸‹é¢çš„ç¨‹åºå¯ä»¥ä»$P0$ä¸­å–å‡ºé‚£äº›è·Ÿé¢„æµ‹æ¡†ç±»åˆ«ç›¸å…³çš„é¢„æµ‹å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">NUM_ANCHORS = <span class="number">3</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line">num_filters=NUM_ANCHORS * (NUM_CLASSES + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">detection = YoloDetectionBlock(ch_in=<span class="number">1024</span>, ch_out=<span class="number">512</span>)</span><br><span class="line">conv2d_pred = paddle.nn.Conv2D(in_channels=<span class="number">1024</span>, out_channels=num_filters,  kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">1</span>, <span class="number">3</span>, <span class="number">640</span>, <span class="number">640</span>).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line">route, tip = detection(C0)</span><br><span class="line">P0 = conv2d_pred(tip)</span><br><span class="line"></span><br><span class="line">reshaped_p0 = paddle.reshape(P0, [-<span class="number">1</span>, NUM_ANCHORS, NUM_CLASSES + <span class="number">5</span>, P0.shape[<span class="number">2</span>], P0.shape[<span class="number">3</span>]])</span><br><span class="line"><span class="comment"># å–å‡ºä¸objectnessç›¸å…³çš„é¢„æµ‹å€¼</span></span><br><span class="line">pred_objectness = reshaped_p0[:, :, <span class="number">4</span>, :, :]</span><br><span class="line">pred_objectness_probability = F.sigmoid(pred_objectness)</span><br><span class="line"><span class="comment"># å–å‡ºä¸ä½ç½®ç›¸å…³çš„é¢„æµ‹å€¼</span></span><br><span class="line">pred_location = reshaped_p0[:, :, <span class="number">0</span>:<span class="number">4</span>, :, :]</span><br><span class="line"><span class="comment"># å–å‡ºä¸ç±»åˆ«ç›¸å…³çš„é¢„æµ‹å€¼</span></span><br><span class="line">pred_classification = reshaped_p0[:, :, <span class="number">5</span>:<span class="number">5</span>+NUM_CLASSES, :, :]</span><br><span class="line">pred_classification_probability = F.sigmoid(pred_classification)</span><br><span class="line"><span class="built_in">print</span>(pred_objectness_probability.shape, pred_location.shape, pred_classification.shape)</span><br></pre></td></tr></table></figure><pre><code>[1, 3, 20, 20] [1, 3, 4, 20, 20] [1, 3, 7, 20, 20]</code></pre><p>ä¸Šé¢çš„ç¨‹åºé€šè¿‡$P0$è®¡ç®—å‡ºäº†é¢„æµ‹æ¡†åŒ…å«çš„ç‰©ä½“æ‰€å±ç±»åˆ«çš„æ¦‚ç‡ï¼Œ<code>pred_classification_probability</code>çš„å½¢çŠ¶æ˜¯$[1, 3, 7, 20, 20]$ï¼Œæ•°å€¼åœ¨0~1ä¹‹é—´ã€‚</p><h2 id="5-æŸå¤±å‡½æ•°"><a href="#5-æŸå¤±å‡½æ•°" class="headerlink" title="5.æŸå¤±å‡½æ•°"></a><strong>5.æŸå¤±å‡½æ•°</strong></h2><p>ä¸Šé¢ä»æ¦‚å¿µä¸Šå°†è¾“å‡ºç‰¹å¾å›¾ä¸Šçš„åƒç´ ç‚¹ä¸é¢„æµ‹æ¡†å…³è”èµ·æ¥äº†ï¼Œé‚£ä¹ˆè¦å¯¹ç¥ç»ç½‘ç»œè¿›è¡Œæ±‚è§£ï¼Œè¿˜å¿…é¡»ä»æ•°å­¦ä¸Šå°†ç½‘ç»œè¾“å‡ºå’Œé¢„æµ‹æ¡†å…³è”èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯è¦å»ºç«‹èµ·æŸå¤±å‡½æ•°è·Ÿç½‘ç»œè¾“å‡ºä¹‹é—´çš„å…³ç³»ã€‚ä¸‹é¢è®¨è®ºå¦‚ä½•å»ºç«‹èµ·YOLOv3çš„æŸå¤±å‡½æ•°ã€‚</p><p>å¯¹äºæ¯ä¸ªé¢„æµ‹æ¡†ï¼ŒYOLOv3æ¨¡å‹ä¼šå»ºç«‹ä¸‰ç§ç±»å‹çš„æŸå¤±å‡½æ•°ï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/fc7bbc5436d84fb0bb18b817125947cbd441dbdef7ae4365b55da5188ea161b8" width = "800"></center><center><br>å›¾15ï¼šæŸå¤±å‡½æ•°çš„å»ºç«‹æ€è·¯ </br></center><p><br></br></p><ul><li><p>è¡¨å¾æ˜¯å¦åŒ…å«ç›®æ ‡ç‰©ä½“çš„æŸå¤±å‡½æ•°ï¼Œé€šè¿‡pred_objectnesså’Œlabel_objectnessè®¡ç®—ã€‚</p><pre><code>loss_obj = paddle.nn.fucntional.binary_cross_entropy_with_logits(pred_objectness, label_objectness)</code></pre></li><li><p>è¡¨å¾ç‰©ä½“ä½ç½®çš„æŸå¤±å‡½æ•°ï¼Œé€šè¿‡pred_locationå’Œlabel_locationè®¡ç®—ã€‚</p><pre><code>pred_location_x = pred_location[:, :, 0, :, :]pred_location_y = pred_location[:, :, 1, :, :]pred_location_w = pred_location[:, :, 2, :, :]pred_location_h = pred_location[:, :, 3, :, :]loss_location_x = paddle.nn.fucntional.binary_cross_entropy_with_logits(pred_location_x, label_location_x)loss_location_y = paddle.nn.fucntional.binary_cross_entropy_with_logits(pred_location_y, label_location_y)loss_location_w = paddle.abs(pred_location_w - label_location_w)loss_location_h = paddle.abs(pred_location_h - label_location_h)loss_location = loss_location_x + loss_location_y + loss_location_w + loss_location_h</code></pre></li><li><p>è¡¨å¾ç‰©ä½“ç±»åˆ«çš„æŸå¤±å‡½æ•°ï¼Œé€šè¿‡pred_classificationå’Œlabel_classificationè®¡ç®—ã€‚</p><pre><code>loss_obj = paddle.nn.fucntional.binary_cross_entropy_with_logits(pred_classification, label_classification)</code></pre></li></ul><p>æˆ‘ä»¬å·²ç»çŸ¥é“æ€ä¹ˆè®¡ç®—è¿™äº›é¢„æµ‹å€¼å’Œæ ‡ç­¾äº†ï¼Œä½†æ˜¯é—ç•™äº†ä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯æ²¡æœ‰æ ‡æ³¨å‡ºå“ªäº›é”šæ¡†çš„objectnessä¸º-1ã€‚ä¸ºäº†å®Œæˆè¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å‡ºæ‰€æœ‰é¢„æµ‹æ¡†è·ŸçœŸå®æ¡†ä¹‹é—´çš„IoUï¼Œç„¶åæŠŠé‚£äº›IoUå¤§äºé˜ˆå€¼çš„çœŸå®æ¡†æŒ‘é€‰å‡ºæ¥ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‘é€‰å‡ºè·ŸçœŸå®æ¡†IoUå¤§äºé˜ˆå€¼çš„é¢„æµ‹æ¡†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_iou_above_thresh_inds</span>(<span class="params">pred_box, gt_boxes, iou_threshold</span>):</span><br><span class="line">    batchsize = pred_box.shape[<span class="number">0</span>]</span><br><span class="line">    num_rows = pred_box.shape[<span class="number">1</span>]</span><br><span class="line">    num_cols = pred_box.shape[<span class="number">2</span>]</span><br><span class="line">    num_anchors = pred_box.shape[<span class="number">3</span>]</span><br><span class="line">    ret_inds = np.zeros([batchsize, num_rows, num_cols, num_anchors])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batchsize):</span><br><span class="line">        pred_box_i = pred_box[i]</span><br><span class="line">        gt_boxes_i = gt_boxes[i]</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(gt_boxes_i)):</span><br><span class="line">            <span class="comment"># è®¡ç®—iou</span></span><br><span class="line">            gt = gt_boxes_i[k]</span><br><span class="line">            gtx_min = gt[<span class="number">0</span>] - gt[<span class="number">2</span>] / <span class="number">2.</span></span><br><span class="line">            gty_min = gt[<span class="number">1</span>] - gt[<span class="number">3</span>] / <span class="number">2.</span></span><br><span class="line">            gtx_max = gt[<span class="number">0</span>] + gt[<span class="number">2</span>] / <span class="number">2.</span></span><br><span class="line">            gty_max = gt[<span class="number">1</span>] + gt[<span class="number">3</span>] / <span class="number">2.</span></span><br><span class="line">            <span class="keyword">if</span> (gtx_max - gtx_min &lt; <span class="number">1e-3</span>) <span class="keyword">or</span> (gty_max - gty_min &lt; <span class="number">1e-3</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            x1 = np.maximum(pred_box_i[:, :, :, <span class="number">0</span>], gtx_min)</span><br><span class="line">            y1 = np.maximum(pred_box_i[:, :, :, <span class="number">1</span>], gty_min)</span><br><span class="line">            x2 = np.minimum(pred_box_i[:, :, :, <span class="number">2</span>], gtx_max)</span><br><span class="line">            y2 = np.minimum(pred_box_i[:, :, :, <span class="number">3</span>], gty_max)</span><br><span class="line">            intersection = np.maximum(x2 - x1, <span class="number">0.</span>) * np.maximum(y2 - y1, <span class="number">0.</span>)</span><br><span class="line">            s1 = (gty_max - gty_min) * (gtx_max - gtx_min)</span><br><span class="line">            s2 = (pred_box_i[:, :, :, <span class="number">2</span>] - pred_box_i[:, :, :, <span class="number">0</span>]) * (pred_box_i[:, :, :, <span class="number">3</span>] - pred_box_i[:, :, :, <span class="number">1</span>])</span><br><span class="line">            union = s2 + s1 - intersection</span><br><span class="line">            iou = intersection / union</span><br><span class="line">            <span class="comment"># np.where(condition) åˆ¤æ–­æ¡ä»¶æˆç«‹æ—¶è¿”å›ç´¢å¼•åæ ‡</span></span><br><span class="line">            above_inds = np.where(iou &gt; iou_threshold)</span><br><span class="line">            ret_inds[i][above_inds] = <span class="number">1</span></span><br><span class="line">    <span class="comment"># [batchsize, num_rows, num_cols, num_anchors]--&gt;[batchsize, num_anchors, num_rows, num_cols]</span></span><br><span class="line">    ret_inds = np.transpose(ret_inds, (<span class="number">0</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">    <span class="keyword">return</span> ret_inds.astype(<span class="string">&#x27;bool&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‡½æ•°å¯ä»¥å¾—åˆ°å“ªäº›é”šæ¡†çš„objectnesséœ€è¦è¢«æ ‡æ³¨ä¸º-1ï¼Œé€šè¿‡ä¸‹é¢çš„ç¨‹åºï¼Œå¯¹label_objectnessè¿›è¡Œå¤„ç†ï¼Œå°†IoUå¤§äºé˜ˆå€¼ï¼Œä½†åˆä¸æ˜¯æ­£æ ·æœ¬çš„é”šæ¡†æ ‡æ³¨ä¸º-1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">label_objectness_ignore</span>(<span class="params">label_objectness, iou_above_thresh_indices</span>):</span><br><span class="line">    <span class="comment"># æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½ç®€å•çš„ä½¿ç”¨ label_objectness[iou_above_thresh_indices] = -1ï¼Œ</span></span><br><span class="line">    <span class="comment">#         è¿™æ ·å¯èƒ½ä¼šé€ æˆlabel_objectnessä¸º1çš„ç‚¹è¢«è®¾ç½®ä¸º-1äº†</span></span><br><span class="line">    <span class="comment">#         åªæœ‰å°†é‚£äº›è¢«æ ‡æ³¨ä¸º0ï¼Œä¸”ä¸çœŸå®æ¡†IoUè¶…è¿‡é˜ˆå€¼çš„é¢„æµ‹æ¡†æ‰è¢«æ ‡æ³¨ä¸º-1</span></span><br><span class="line">    negative_indices = (label_objectness &lt; <span class="number">0.5</span>)</span><br><span class="line">    ignore_indices = negative_indices * iou_above_thresh_indices</span><br><span class="line">    label_objectness[ignore_indices] = -<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> label_objectness</span><br></pre></td></tr></table></figure><p>ä¸‹é¢é€šè¿‡è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå®ç°å¦‚ä½•å°†éƒ¨åˆ†é¢„æµ‹æ¡†çš„label_objectnessè®¾ç½®ä¸º-1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–æ•°æ®</span></span><br><span class="line">reader = paddle.io.DataLoader(train_dataset, batch_size=<span class="number">2</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>, drop_last=<span class="literal">True</span>)</span><br><span class="line">img, gt_boxes, gt_labels, im_shape = <span class="built_in">next</span>(reader())</span><br><span class="line">img, gt_boxes, gt_labels, im_shape = img.numpy(), gt_boxes.numpy(), gt_labels.numpy(), im_shape.numpy()</span><br><span class="line"><span class="comment"># è®¡ç®—å‡ºé”šæ¡†å¯¹åº”çš„æ ‡ç­¾</span></span><br><span class="line">label_objectness, label_location, label_classification, scale_location = get_objectness_label(img,</span><br><span class="line">                                                                                              gt_boxes, gt_labels, </span><br><span class="line">                                                                                              iou_threshold = <span class="number">0.7</span>,</span><br><span class="line">                                                                                              anchors = [<span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>],</span><br><span class="line">                                                                                              num_classes=<span class="number">7</span>, downsample=<span class="number">32</span>)</span><br><span class="line">                                               </span><br><span class="line">NUM_ANCHORS = <span class="number">3</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line">num_filters=NUM_ANCHORS * (NUM_CLASSES + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">detection = YoloDetectionBlock(ch_in=<span class="number">1024</span>, ch_out=<span class="number">512</span>)</span><br><span class="line">conv2d_pred = paddle.nn.Conv2D(in_channels=<span class="number">1024</span>, out_channels=num_filters,  kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = paddle.to_tensor(img)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line">route, tip = detection(C0)</span><br><span class="line">P0 = conv2d_pred(tip)</span><br><span class="line"></span><br><span class="line"><span class="comment"># anchorsåŒ…å«äº†é¢„å…ˆè®¾å®šå¥½çš„é”šæ¡†å°ºå¯¸</span></span><br><span class="line">anchors = [<span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>]</span><br><span class="line"><span class="comment"># downsampleæ˜¯ç‰¹å¾å›¾P0çš„æ­¥å¹…</span></span><br><span class="line">pred_boxes = get_yolo_box_xxyy(P0.numpy(), anchors, num_classes=<span class="number">7</span>, downsample=<span class="number">32</span>)</span><br><span class="line">iou_above_thresh_indices = get_iou_above_thresh_inds(pred_boxes, gt_boxes, iou_threshold=<span class="number">0.7</span>)</span><br><span class="line">label_objectness = label_objectness_ignore(label_objectness, iou_above_thresh_indices)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå°±å¯ä»¥å°†é‚£äº›æ²¡æœ‰è¢«æ ‡æ³¨ä¸ºæ­£æ ·æœ¬ï¼Œä½†åˆä¸çœŸå®æ¡†IoUæ¯”è¾ƒå¤§çš„æ ·æœ¬objectnessæ ‡ç­¾è®¾ç½®ä¸º-1äº†ï¼Œä¸è®¡ç®—å…¶å¯¹ä»»ä½•ä¸€ç§æŸå¤±å‡½æ•°çš„è´¡çŒ®ã€‚è®¡ç®—æ€»çš„æŸå¤±å‡½æ•°çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_loss</span>(<span class="params">output, label_objectness, label_location, label_classification, scales, num_anchors=<span class="number">3</span>, num_classes=<span class="number">7</span></span>):</span><br><span class="line">    <span class="comment"># å°†outputä»[N, C, H, W]å˜å½¢ä¸º[N, NUM_ANCHORS, NUM_CLASSES + 5, H, W]</span></span><br><span class="line">    reshaped_output = paddle.reshape(output, [-<span class="number">1</span>, num_anchors, num_classes + <span class="number">5</span>, output.shape[<span class="number">2</span>], output.shape[<span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»outputä¸­å–å‡ºè·Ÿobjectnessç›¸å…³çš„é¢„æµ‹å€¼</span></span><br><span class="line">    pred_objectness = reshaped_output[:, :, <span class="number">4</span>, :, :]</span><br><span class="line">    loss_objectness = F.binary_cross_entropy_with_logits(pred_objectness, label_objectness, reduction=<span class="string">&quot;none&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># pos_samples åªæœ‰åœ¨æ­£æ ·æœ¬çš„åœ°æ–¹å–å€¼ä¸º1.ï¼Œå…¶å®ƒåœ°æ–¹å–å€¼å…¨ä¸º0.</span></span><br><span class="line">    pos_objectness = label_objectness &gt; <span class="number">0</span> <span class="comment"># æ­£ç±»æ ·æœ¬</span></span><br><span class="line">    <span class="comment"># paddle.cast(x, dtype) å°† x çš„æ•°æ®ç±»å‹è½¬æ¢ä¸º dtype</span></span><br><span class="line">    pos_samples = paddle.cast(pos_objectness, <span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    pos_samples.stop_gradient=<span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»outputä¸­å–å‡ºæ‰€æœ‰è·Ÿä½ç½®ç›¸å…³çš„é¢„æµ‹å€¼</span></span><br><span class="line">    tx = reshaped_output[:, :, <span class="number">0</span>, :, :]</span><br><span class="line">    ty = reshaped_output[:, :, <span class="number">1</span>, :, :]</span><br><span class="line">    tw = reshaped_output[:, :, <span class="number">2</span>, :, :]</span><br><span class="line">    th = reshaped_output[:, :, <span class="number">3</span>, :, :]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»label_locationä¸­å–å‡ºå„ä¸ªä½ç½®åæ ‡çš„æ ‡ç­¾</span></span><br><span class="line">    dx_label = label_location[:, :, <span class="number">0</span>, :, :]</span><br><span class="line">    dy_label = label_location[:, :, <span class="number">1</span>, :, :]</span><br><span class="line">    tw_label = label_location[:, :, <span class="number">2</span>, :, :]</span><br><span class="line">    th_label = label_location[:, :, <span class="number">3</span>, :, :]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºæŸå¤±å‡½æ•°</span></span><br><span class="line">    loss_location_x = F.binary_cross_entropy_with_logits(tx, dx_label, reduction=<span class="string">&quot;none&quot;</span>)</span><br><span class="line">    loss_location_y = F.binary_cross_entropy_with_logits(ty, dy_label, reduction=<span class="string">&quot;none&quot;</span>)</span><br><span class="line">    loss_location_w = paddle.<span class="built_in">abs</span>(tw - tw_label)</span><br><span class="line">    loss_location_h = paddle.<span class="built_in">abs</span>(th - th_label)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æ€»çš„ä½ç½®æŸå¤±å‡½æ•°</span></span><br><span class="line">    loss_location = loss_location_x + loss_location_y + loss_location_h + loss_location_w</span><br><span class="line">    <span class="comment"># ä¹˜ä»¥scales</span></span><br><span class="line">    loss_location = loss_location * scales <span class="comment"># scales--&gt;(h, w)</span></span><br><span class="line">    <span class="comment"># åªè®¡ç®—æ­£æ ·æœ¬çš„ä½ç½®æŸå¤±å‡½æ•°</span></span><br><span class="line">    loss_location = loss_location * pos_samples</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»outputå–å‡ºæ‰€æœ‰è·Ÿç‰©ä½“ç±»åˆ«ç›¸å…³çš„åƒç´ ç‚¹</span></span><br><span class="line">    pred_classification = reshaped_output[:, :, <span class="number">5</span>:<span class="number">5</span>+num_classes, :, :]</span><br><span class="line">    <span class="comment"># è®¡ç®—åˆ†ç±»ç›¸å…³çš„æŸå¤±å‡½æ•°</span></span><br><span class="line">    loss_classification = F.binary_cross_entropy_with_logits(pred_classification, label_classification, reduction=<span class="string">&quot;none&quot;</span>)</span><br><span class="line">    <span class="comment"># å°†æŸå¤±æ±‚å’Œ</span></span><br><span class="line">    loss_classification = paddle.<span class="built_in">sum</span>(loss_classification, axis=<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># åªè®¡ç®—objectnessä¸ºæ­£çš„æ ·æœ¬çš„åˆ†ç±»æŸå¤±å‡½æ•°</span></span><br><span class="line">    loss_classification = loss_classification * pos_samples</span><br><span class="line">    </span><br><span class="line">    total_loss = loss_objectness + loss_location + loss_classification</span><br><span class="line">    <span class="comment"># å¯¹æ‰€æœ‰é¢„æµ‹æ¡†çš„lossè¿›è¡Œæ±‚å’Œ</span></span><br><span class="line">    total_loss = paddle.<span class="built_in">sum</span>(total_loss, axis=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">    <span class="comment"># å¯¹æ‰€æœ‰æ ·æœ¬æ±‚å¹³å‡</span></span><br><span class="line">    total_loss = paddle.mean(total_loss)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> total_loss</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å‡ºé”šæ¡†å¯¹åº”çš„æ ‡ç­¾</span></span><br><span class="line">label_objectness, label_location, label_classification, scale_location = get_objectness_label(img,</span><br><span class="line">                                                                                              gt_boxes, gt_labels, </span><br><span class="line">                                                                                              iou_threshold = <span class="number">0.7</span>,</span><br><span class="line">                                                                                              anchors = [<span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>],</span><br><span class="line">                                                                                              num_classes=<span class="number">7</span>, downsample=<span class="number">32</span>)                                                           </span><br><span class="line"></span><br><span class="line">NUM_ANCHORS = <span class="number">3</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line">num_filters=NUM_ANCHORS * (NUM_CLASSES + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">backbone = DarkNet53_conv_body()</span><br><span class="line">detection = YoloDetectionBlock(ch_in=<span class="number">1024</span>, ch_out=<span class="number">512</span>)</span><br><span class="line">conv2d_pred = Conv2D(in_channels=<span class="number">1024</span>, out_channels=num_filters,  kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = paddle.to_tensor(img)</span><br><span class="line">C0, C1, C2 = backbone(x)</span><br><span class="line">route, tip = detection(C0)</span><br><span class="line">P0 = conv2d_pred(tip)</span><br><span class="line"><span class="comment"># anchorsåŒ…å«äº†é¢„å…ˆè®¾å®šå¥½çš„é”šæ¡†å°ºå¯¸</span></span><br><span class="line">anchors = [<span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>]</span><br><span class="line"><span class="comment"># downsampleæ˜¯ç‰¹å¾å›¾P0çš„æ­¥å¹…</span></span><br><span class="line">pred_boxes = get_yolo_box_xxyy(P0.numpy(), anchors, num_classes=<span class="number">7</span>, downsample=<span class="number">32</span>)</span><br><span class="line">iou_above_thresh_indices = get_iou_above_thresh_inds(pred_boxes, gt_boxes, iou_threshold=<span class="number">0.7</span>)</span><br><span class="line">label_objectness = label_objectness_ignore(label_objectness, iou_above_thresh_indices)</span><br><span class="line"></span><br><span class="line">label_objectness = paddle.to_tensor(label_objectness)</span><br><span class="line">label_location = paddle.to_tensor(label_location)</span><br><span class="line">label_classification = paddle.to_tensor(label_classification)</span><br><span class="line">scales = paddle.to_tensor(scale_location)</span><br><span class="line">label_objectness.stop_gradient=<span class="literal">True</span></span><br><span class="line">label_location.stop_gradient=<span class="literal">True</span></span><br><span class="line">label_classification.stop_gradient=<span class="literal">True</span></span><br><span class="line">scales.stop_gradient=<span class="literal">True</span></span><br><span class="line"></span><br><span class="line">total_loss = get_loss(P0, label_objectness, label_location, label_classification, scales,</span><br><span class="line">                          num_anchors=NUM_ANCHORS, num_classes=NUM_CLASSES)</span><br><span class="line">total_loss_data = total_loss.numpy()</span><br><span class="line"><span class="built_in">print</span>(total_loss_data)</span><br></pre></td></tr></table></figure><pre><code>[896.6715]</code></pre><p>ä¸Šé¢çš„ç¨‹åºè®¡ç®—å‡ºäº†æ€»çš„æŸå¤±å‡½æ•°ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œè¯»è€…å·²ç»äº†è§£åˆ°äº†YOLOv3ç®—æ³•çš„å¤§éƒ¨åˆ†å†…å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•ç”Ÿæˆé”šæ¡†ã€ç»™é”šæ¡†æ‰“ä¸Šæ ‡ç­¾ã€é€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œæå–ç‰¹å¾ã€å°†è¾“å‡ºç‰¹å¾å›¾è·Ÿé¢„æµ‹æ¡†ç›¸å…³è”ã€å»ºç«‹èµ·æŸå¤±å‡½æ•°ã€‚</p><h2 id="6-å¤šå°ºåº¦æ£€æµ‹"><a href="#6-å¤šå°ºåº¦æ£€æµ‹" class="headerlink" title="6.å¤šå°ºåº¦æ£€æµ‹"></a><strong>6.å¤šå°ºåº¦æ£€æµ‹</strong></h2><p>ç›®å‰æˆ‘ä»¬è®¡ç®—æŸå¤±å‡½æ•°æ˜¯åœ¨ç‰¹å¾å›¾P0çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ï¼Œå®ƒçš„æ­¥å¹…stride&#x3D;32ã€‚ç‰¹å¾å›¾çš„å°ºå¯¸æ¯”è¾ƒå°ï¼Œåƒç´ ç‚¹æ•°ç›®æ¯”è¾ƒå°‘ï¼Œæ¯ä¸ªåƒç´ ç‚¹çš„æ„Ÿå—é‡å¾ˆå¤§ï¼Œå…·æœ‰éå¸¸ä¸°å¯Œçš„é«˜å±‚çº§è¯­ä¹‰ä¿¡æ¯ï¼Œå¯èƒ½æ¯”è¾ƒå®¹æ˜“æ£€æµ‹åˆ°è¾ƒå¤§çš„ç›®æ ‡ã€‚ä¸ºäº†èƒ½å¤Ÿæ£€æµ‹åˆ°å°ºå¯¸è¾ƒå°çš„é‚£äº›ç›®æ ‡ï¼Œéœ€è¦åœ¨å°ºå¯¸è¾ƒå¤§çš„ç‰¹å¾å›¾ä¸Šé¢å»ºç«‹é¢„æµ‹è¾“å‡ºã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨C2æˆ–è€…C1è¿™ç§å±‚çº§çš„ç‰¹å¾å›¾ä¸Šç›´æ¥äº§ç”Ÿé¢„æµ‹è¾“å‡ºï¼Œå¯èƒ½é¢ä¸´æ–°çš„é—®é¢˜ï¼Œå®ƒä»¬æ²¡æœ‰ç»è¿‡å……åˆ†çš„ç‰¹å¾æå–ï¼Œåƒç´ ç‚¹åŒ…å«çš„è¯­ä¹‰ä¿¡æ¯ä¸å¤Ÿä¸°å¯Œï¼Œæœ‰å¯èƒ½éš¾ä»¥æå–åˆ°æœ‰æ•ˆçš„ç‰¹å¾æ¨¡å¼ã€‚åœ¨ç›®æ ‡æ£€æµ‹ä¸­ï¼Œè§£å†³è¿™ä¸€é—®é¢˜çš„æ–¹å¼æ˜¯ï¼Œ<strong>å°†é«˜å±‚çº§çš„ç‰¹å¾å›¾å°ºå¯¸æ”¾å¤§ä¹‹åè·Ÿä½å±‚çº§çš„ç‰¹å¾å›¾è¿›è¡Œèåˆ</strong>ï¼Œå¾—åˆ°çš„æ–°ç‰¹å¾å›¾æ—¢èƒ½åŒ…å«ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ï¼Œåˆå…·æœ‰è¾ƒå¤šçš„åƒç´ ç‚¹ï¼Œèƒ½å¤Ÿæè¿°æ›´åŠ ç²¾ç»†çš„ç»“æ„ã€‚</p><p>å…·ä½“çš„ç½‘ç»œå®ç°æ–¹å¼å¦‚ <strong>å›¾16</strong> æ‰€ç¤ºï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/b6d3b425644342e48bd0a50ebde90d882fd10717e0e44a53a44e98225bbb6df8" width = "800"></center><center><br>å›¾16ï¼šç”Ÿæˆå¤šå±‚çº§çš„è¾“å‡ºç‰¹å¾å›¾P0ã€P1ã€P2 </br></center><p><br></br></p><p>YOLOv3åœ¨æ¯ä¸ªåŒºåŸŸçš„ä¸­å¿ƒä½ç½®äº§ç”Ÿ3ä¸ªé”šæ¡†ï¼Œåœ¨3ä¸ªå±‚çº§çš„ç‰¹å¾å›¾ä¸Šäº§ç”Ÿé”šæ¡†çš„å¤§å°åˆ†åˆ«ä¸ºP2 [(10Ã—13),(16Ã—30),(33Ã—23)]ï¼ŒP1 [(30Ã—61),(62Ã—45),(59Ã— 119)]ï¼ŒP0[(116 Ã— 90), (156 Ã— 198), (373 Ã— 326]ã€‚è¶Šå¾€åçš„ç‰¹å¾å›¾ä¸Šç”¨åˆ°çš„é”šæ¡†å°ºå¯¸ä¹Ÿè¶Šå¤§ï¼Œèƒ½æ•æ‰åˆ°å¤§å°ºå¯¸ç›®æ ‡çš„ä¿¡æ¯ï¼›è¶Šå¾€å‰çš„ç‰¹å¾å›¾ä¸Šé”šæ¡†å°ºå¯¸è¶Šå°ï¼Œèƒ½æ•æ‰åˆ°å°å°ºå¯¸ç›®æ ‡çš„ä¿¡æ¯ã€‚</p><p>åœ¨å®Œæ•´ç½‘ç»œå®šä¹‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/ops/yolo_loss_cn.html#yolo-loss">paddle.vision.ops.yolo_loss</a> APIæ¥è®¡ç®—æŸå¤±å‡½æ•°ï¼Œè¯¥API å°†ä¸Šè¿°å€™é€‰åŒºåŸŸçš„æ ‡æ³¨ä»¥åŠå¤šå°ºåº¦çš„æŸå¤±å‡½æ•°è®¡ç®—ç»Ÿä¸€åœ°è¿›è¡Œäº†å°è£…ã€‚</p><blockquote><p>paddle.vision.ops.yolo_loss(x, gt_box, gt_label, anchors, anchor_mask, class_num, ignore_thresh, downsample_ratio, gt_score&#x3D;None, use_label_smooth&#x3D;True, name&#x3D;None, scale_x_y&#x3D;1.0)</p></blockquote><p>å…³é”®å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>x: è¾“å‡ºç‰¹å¾å›¾ã€‚</li><li>gt_box: çœŸå®æ¡†ã€‚</li><li>gt_label: çœŸå®æ¡†æ ‡ç­¾ã€‚</li><li>ignore_threshï¼Œé¢„æµ‹æ¡†ä¸çœŸå®æ¡†IoUé˜ˆå€¼è¶…è¿‡ignore_threshæ—¶ï¼Œä¸ä½œä¸ºè´Ÿæ ·æœ¬ï¼ŒYOLOv3æ¨¡å‹é‡Œè®¾ç½®ä¸º0.7ã€‚</li><li>downsample_ratioï¼Œç‰¹å¾å›¾P0çš„ä¸‹é‡‡æ ·æ¯”ä¾‹ï¼Œä½¿ç”¨Darknet53éª¨å¹²ç½‘ç»œæ—¶ä¸º32ã€‚</li><li>gt_scoreï¼ŒçœŸå®æ¡†çš„ç½®ä¿¡åº¦ï¼Œåœ¨ä½¿ç”¨äº†mixupï¼ˆæ··ç±»å¢å¼ºï¼‰æŠ€å·§æ—¶ç”¨åˆ°ã€‚</li><li>use_label_smoothï¼Œä¸€ç§è®­ç»ƒæŠ€å·§ï¼Œå¦‚ä¸ä½¿ç”¨ï¼Œè®¾ç½®ä¸ºFalseã€‚</li><li>nameï¼Œè¯¥å±‚çš„åå­—ï¼Œæ¯”å¦‚â€™yolov3_lossâ€™ï¼Œé»˜è®¤å€¼ä¸ºNoneï¼Œä¸€èˆ¬æ— éœ€è®¾ç½®ã€‚</li></ul><p>å¯¹äºä½¿ç”¨äº†å¤šå±‚çº§ç‰¹å¾å›¾äº§ç”Ÿé¢„æµ‹æ¡†çš„æ–¹æ³•ï¼Œå…¶å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸Šé‡‡æ ·æ¨¡å—</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Upsample</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, scale=<span class="number">2</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(Upsample,self).__init__()</span><br><span class="line">        self.scale = scale</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        <span class="comment"># è·å–ä¸Šé‡‡æ ·è¿‡ç¨‹ä¸­çš„åŠ¨æ€å°ºå¯¸</span></span><br><span class="line">        shape_nchw = paddle.shape(inputs)</span><br><span class="line">        <span class="comment"># paddle.slice(input, axes, starts, ends)ï¼šæ²¿å¤šä¸ªè½´ç”Ÿæˆ input çš„åˆ‡ç‰‡</span></span><br><span class="line">        shape_hw = paddle.<span class="built_in">slice</span>(shape_nchw, axes=[<span class="number">0</span>], starts=[<span class="number">2</span>], ends=[<span class="number">4</span>])</span><br><span class="line">        shape_hw.stop_gradient = <span class="literal">True</span></span><br><span class="line">        in_shape = paddle.cast(shape_hw, dtype=<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">        out_shape = in_shape * self.scale</span><br><span class="line">        out_shape.stop_gradient = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è°ƒæ•´ä¸€ä¸ª batch ä¸­å›¾ç‰‡çš„å¤§å°ï¼šNEAREST æœ€è¿‘é‚»æ’å€¼</span></span><br><span class="line">        out = paddle.nn.functional.interpolate(x=inputs, scale_factor=self.scale, mode=<span class="string">&quot;NEAREST&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOLOv3</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">7</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(YOLOv3,self).__init__()</span><br><span class="line"></span><br><span class="line">        self.num_classes = num_classes</span><br><span class="line">        <span class="comment"># æå–å›¾åƒç‰¹å¾çš„éª¨å¹²ä»£ç </span></span><br><span class="line">        self.block = DarkNet53_conv_body()</span><br><span class="line">        self.block_outputs = []</span><br><span class="line">        self.yolo_blocks = []</span><br><span class="line">        self.route_blocks_2 = []</span><br><span class="line">        <span class="comment"># ç”Ÿæˆ3ä¸ªå±‚çº§çš„ç‰¹å¾å›¾P0, P1, P2</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">            <span class="comment"># æ·»åŠ ä»ciç”Ÿæˆriå’Œtiçš„æ¨¡å—</span></span><br><span class="line">            yolo_block = self.add_sublayer(</span><br><span class="line">                <span class="string">&quot;yolo_detecton_block_%d&quot;</span> % (i),</span><br><span class="line">                YoloDetectionBlock(</span><br><span class="line">                                   ch_in=<span class="number">512</span>//(<span class="number">2</span>**i)*<span class="number">2</span> <span class="keyword">if</span> i==<span class="number">0</span> <span class="keyword">else</span> <span class="number">512</span>//(<span class="number">2</span>**i)*<span class="number">2</span> + <span class="number">512</span>//(<span class="number">2</span>**i),</span><br><span class="line">                                   ch_out = <span class="number">512</span>//(<span class="number">2</span>**i)))</span><br><span class="line">            self.yolo_blocks.append(yolo_block)</span><br><span class="line"></span><br><span class="line">            num_filters = <span class="number">3</span> * (self.num_classes + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ·»åŠ ä»tiç”Ÿæˆpiçš„æ¨¡å—ï¼Œè¿™æ˜¯ä¸€ä¸ªConv2Dæ“ä½œï¼Œè¾“å‡ºé€šé“æ•°ä¸º3 * (num_classes + 5)</span></span><br><span class="line">            block_out = self.add_sublayer(</span><br><span class="line">                <span class="string">&quot;block_out_%d&quot;</span> % (i),</span><br><span class="line">                paddle.nn.Conv2D(in_channels=<span class="number">512</span>//(<span class="number">2</span>**i)*<span class="number">2</span>,</span><br><span class="line">                       out_channels=num_filters,</span><br><span class="line">                       kernel_size=<span class="number">1</span>,</span><br><span class="line">                       stride=<span class="number">1</span>,</span><br><span class="line">                       padding=<span class="number">0</span>,</span><br><span class="line">                       weight_attr=paddle.ParamAttr(</span><br><span class="line">                           initializer=paddle.nn.initializer.Normal(<span class="number">0.</span>, <span class="number">0.02</span>)),</span><br><span class="line">                       bias_attr=paddle.ParamAttr(</span><br><span class="line">                           initializer=paddle.nn.initializer.Constant(<span class="number">0.0</span>),</span><br><span class="line">                           regularizer=paddle.regularizer.L2Decay(<span class="number">0.</span>))))</span><br><span class="line">            self.block_outputs.append(block_out)</span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">2</span>:</span><br><span class="line">                <span class="comment"># å¯¹riè¿›è¡Œå·ç§¯</span></span><br><span class="line">                route = self.add_sublayer(<span class="string">&quot;route2_%d&quot;</span>%i,</span><br><span class="line">                                          ConvBNLayer(ch_in=<span class="number">512</span>//(<span class="number">2</span>**i),</span><br><span class="line">                                                      ch_out=<span class="number">256</span>//(<span class="number">2</span>**i),</span><br><span class="line">                                                      kernel_size=<span class="number">1</span>,</span><br><span class="line">                                                      stride=<span class="number">1</span>,</span><br><span class="line">                                                      padding=<span class="number">0</span>))</span><br><span class="line">                self.route_blocks_2.append(route)</span><br><span class="line">            <span class="comment"># å°†riæ”¾å¤§ä»¥ä¾¿è·Ÿc_&#123;i+1&#125;ä¿æŒåŒæ ·çš„å°ºå¯¸</span></span><br><span class="line">            self.upsample = Upsample()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        outputs = []</span><br><span class="line">        blocks = self.block(inputs)</span><br><span class="line">        <span class="keyword">for</span> i, block <span class="keyword">in</span> <span class="built_in">enumerate</span>(blocks):</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                <span class="comment"># å°†r_&#123;i-1&#125;ç»è¿‡å·ç§¯å’Œä¸Šé‡‡æ ·ä¹‹åå¾—åˆ°ç‰¹å¾å›¾ï¼Œä¸è¿™ä¸€çº§çš„ciè¿›è¡Œæ‹¼æ¥</span></span><br><span class="line">                block = paddle.concat([route, block], axis=<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># ä»ciç”Ÿæˆtiå’Œri</span></span><br><span class="line">            route, tip = self.yolo_blocks[i](block)</span><br><span class="line">            <span class="comment"># ä»tiç”Ÿæˆpi</span></span><br><span class="line">            block_out = self.block_outputs[i](tip)</span><br><span class="line">            <span class="comment"># å°†piæ”¾å…¥åˆ—è¡¨</span></span><br><span class="line">            outputs.append(block_out)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">2</span>:</span><br><span class="line">                <span class="comment"># å¯¹riè¿›è¡Œå·ç§¯è°ƒæ•´é€šé“æ•°</span></span><br><span class="line">                route = self.route_blocks_2[i](route)</span><br><span class="line">                <span class="comment"># å¯¹riè¿›è¡Œæ”¾å¤§ï¼Œä½¿å…¶å°ºå¯¸å’Œc_&#123;i+1&#125;ä¿æŒä¸€è‡´</span></span><br><span class="line">                route = self.upsample(route)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> outputs</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_loss</span>(<span class="params">self, outputs, gtbox, gtlabel, gtscore=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">                 anchors = [<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">45</span>, <span class="number">59</span>, <span class="number">119</span>, <span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>],</span></span><br><span class="line"><span class="params">                 anchor_masks = [[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]],</span></span><br><span class="line"><span class="params">                 ignore_thresh=<span class="number">0.7</span>,</span></span><br><span class="line"><span class="params">                 use_label_smooth=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä½¿ç”¨ paddle.vision.ops.yolo_lossï¼Œç›´æ¥è®¡ç®—æŸå¤±å‡½æ•°ï¼Œè¿‡ç¨‹æ›´ç®€æ´ï¼Œé€Ÿåº¦ä¹Ÿæ›´å¿«</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.losses = []</span><br><span class="line">        downsample = <span class="number">32</span></span><br><span class="line">        <span class="keyword">for</span> i, out <span class="keyword">in</span> <span class="built_in">enumerate</span>(outputs): <span class="comment"># å¯¹ä¸‰ä¸ªå±‚çº§åˆ†åˆ«æ±‚æŸå¤±å‡½æ•°</span></span><br><span class="line">            anchor_mask_i = anchor_masks[i]</span><br><span class="line">            loss = paddle.vision.ops.yolo_loss(</span><br><span class="line">                    x=out,  <span class="comment"># outæ˜¯P0, P1, P2ä¸­çš„ä¸€ä¸ª</span></span><br><span class="line">                    gt_box=gtbox,  <span class="comment"># çœŸå®æ¡†åæ ‡</span></span><br><span class="line">                    gt_label=gtlabel,  <span class="comment"># çœŸå®æ¡†ç±»åˆ«</span></span><br><span class="line">                    gt_score=gtscore,  <span class="comment"># çœŸå®æ¡†å¾—åˆ†ï¼Œä½¿ç”¨mixupè®­ç»ƒæŠ€å·§æ—¶éœ€è¦ï¼Œä¸ä½¿ç”¨è¯¥æŠ€å·§æ—¶ç›´æ¥è®¾ç½®ä¸º1ï¼Œå½¢çŠ¶ä¸gtlabelç›¸åŒ</span></span><br><span class="line">                    anchors=anchors,   <span class="comment"># é”šæ¡†å°ºå¯¸ï¼ŒåŒ…å«[w0, h0, w1, h1, ..., w8, h8]å…±9ä¸ªé”šæ¡†çš„å°ºå¯¸</span></span><br><span class="line">                    anchor_mask=anchor_mask_i, <span class="comment"># ç­›é€‰é”šæ¡†çš„maskï¼Œä¾‹å¦‚anchor_mask_i=[3, 4, 5]ï¼Œå°†anchorsä¸­ç¬¬3ã€4ã€5ä¸ªé”šæ¡†æŒ‘é€‰å‡ºæ¥ç»™è¯¥å±‚çº§ä½¿ç”¨</span></span><br><span class="line">                    class_num=self.num_classes, <span class="comment"># åˆ†ç±»ç±»åˆ«æ•°</span></span><br><span class="line">                    ignore_thresh=ignore_thresh, <span class="comment"># å½“é¢„æµ‹æ¡†ä¸çœŸå®æ¡†IoU &gt; ignore_threshï¼Œæ ‡æ³¨objectness = -1</span></span><br><span class="line">                    downsample_ratio=downsample, <span class="comment"># ç‰¹å¾å›¾ç›¸å¯¹äºåŸå›¾ç¼©å°çš„å€æ•°ï¼Œä¾‹å¦‚P0æ˜¯32ï¼Œ P1æ˜¯16ï¼ŒP2æ˜¯8</span></span><br><span class="line">                    use_label_smooth=<span class="literal">False</span>)      <span class="comment"># ä½¿ç”¨label_smoothè®­ç»ƒæŠ€å·§æ—¶ä¼šç”¨åˆ°ï¼Œè¿™é‡Œæ²¡ç”¨æ­¤æŠ€å·§ï¼Œç›´æ¥è®¾ç½®ä¸ºFalse</span></span><br><span class="line">            self.losses.append(paddle.mean(loss))  <span class="comment">#meanå¯¹æ¯å¼ å›¾ç‰‡æ±‚å’Œ</span></span><br><span class="line">            downsample = downsample // <span class="number">2</span> <span class="comment"># ä¸‹ä¸€çº§ç‰¹å¾å›¾çš„ç¼©æ”¾å€æ•°ä¼šå‡åŠ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>(self.losses) <span class="comment"># å¯¹æ¯ä¸ªå±‚çº§æ±‚å’Œ</span></span><br></pre></td></tr></table></figure><h2 id="7-å¼€å¯ç«¯åˆ°ç«¯è®­ç»ƒ"><a href="#7-å¼€å¯ç«¯åˆ°ç«¯è®­ç»ƒ" class="headerlink" title="7.å¼€å¯ç«¯åˆ°ç«¯è®­ç»ƒ"></a><strong>7.å¼€å¯ç«¯åˆ°ç«¯è®­ç»ƒ</strong></h2><p>è®­ç»ƒè¿‡ç¨‹å¦‚ <strong>å›¾17</strong> æ‰€ç¤ºï¼Œè¾“å…¥å›¾ç‰‡ç»è¿‡ç‰¹å¾æå–å¾—åˆ°ä¸‰ä¸ªå±‚çº§çš„è¾“å‡ºç‰¹å¾å›¾P0(stride&#x3D;32)ã€P1(stride&#x3D;16)å’ŒP2(stride&#x3D;8)ï¼Œç›¸åº”çš„åˆ†åˆ«ä½¿ç”¨ä¸åŒå¤§å°çš„å°æ–¹å—åŒºåŸŸå»ç”Ÿæˆå¯¹åº”çš„é”šæ¡†å’Œé¢„æµ‹æ¡†ï¼Œå¹¶å¯¹è¿™äº›é”šæ¡†è¿›è¡Œæ ‡æ³¨ã€‚</p><ul><li><p>P0å±‚çº§ç‰¹å¾å›¾ï¼Œå¯¹åº”ç€ä½¿ç”¨$32\times32$å¤§å°çš„å°æ–¹å—ï¼Œåœ¨æ¯ä¸ªåŒºåŸŸä¸­å¿ƒç”Ÿæˆå¤§å°åˆ†åˆ«ä¸º$[116, 90]$, $[156, 198]$, $[373, 326]$çš„ä¸‰ç§é”šæ¡†ã€‚</p></li><li><p>P1å±‚çº§ç‰¹å¾å›¾ï¼Œå¯¹åº”ç€ä½¿ç”¨$16\times16$å¤§å°çš„å°æ–¹å—ï¼Œåœ¨æ¯ä¸ªåŒºåŸŸä¸­å¿ƒç”Ÿæˆå¤§å°åˆ†åˆ«ä¸º$[30, 61]$, $[62, 45]$, $[59, 119]$çš„ä¸‰ç§é”šæ¡†ã€‚</p></li><li><p>P2å±‚çº§ç‰¹å¾å›¾ï¼Œå¯¹åº”ç€ä½¿ç”¨$8\times8$å¤§å°çš„å°æ–¹å—ï¼Œåœ¨æ¯ä¸ªåŒºåŸŸä¸­å¿ƒç”Ÿæˆå¤§å°åˆ†åˆ«ä¸º$[10, 13]$, $[16, 30]$, $[33, 23]$çš„ä¸‰ç§é”šæ¡†ã€‚</p></li></ul><p>å°†ä¸‰ä¸ªå±‚çº§çš„ç‰¹å¾å›¾ä¸å¯¹åº”é”šæ¡†ä¹‹é—´çš„æ ‡ç­¾å…³è”èµ·æ¥ï¼Œå¹¶å»ºç«‹æŸå¤±å‡½æ•°ï¼Œæ€»çš„æŸå¤±å‡½æ•°ç­‰äºä¸‰ä¸ªå±‚çº§çš„æŸå¤±å‡½æ•°ç›¸åŠ ã€‚é€šè¿‡æå°åŒ–æŸå¤±å‡½æ•°ï¼Œå¯ä»¥å¼€å¯ç«¯åˆ°ç«¯çš„è®­ç»ƒè¿‡ç¨‹ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/736da9cd3a4f4a1c98187a6cdf1a0334af73470b6d7c4b2fbaa9660d4bd20621" width = "600"></center><center><br>å›¾17ï¼šç«¯åˆ°ç«¯è®­ç»ƒæµç¨‹ </br></center><p><br></br></p><p>è®­ç»ƒè¿‡ç¨‹çš„å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############# è¿™æ®µä»£ç è¿è¡Œå‰ï¼šè¯·é‡å¯é¡¹ç›®ç¯å¢ƒï¼ˆGPUï¼‰#######################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">ANCHORS = [<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">45</span>, <span class="number">59</span>, <span class="number">119</span>, <span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>]</span><br><span class="line">ANCHOR_MASKS = [[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]]</span><br><span class="line">IGNORE_THRESH = <span class="number">.7</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_lr</span>(<span class="params">base_lr = <span class="number">0.0001</span>, lr_decay = <span class="number">0.1</span></span>):</span><br><span class="line">    bd = [<span class="number">10000</span>, <span class="number">20000</span>]</span><br><span class="line">    lr = [base_lr, base_lr * lr_decay, base_lr * lr_decay * lr_decay]</span><br><span class="line">    learning_rate = paddle.optimizer.lr.PiecewiseDecay(boundaries=bd, values=lr)</span><br><span class="line">    <span class="keyword">return</span> learning_rate</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    TRAINDIR = <span class="string">&#x27;/home/aistudio/work/insects/train&#x27;</span></span><br><span class="line">    TESTDIR = <span class="string">&#x27;/home/aistudio/work/insects/test&#x27;</span></span><br><span class="line">    VALIDDIR = <span class="string">&#x27;/home/aistudio/work/insects/val&#x27;</span></span><br><span class="line">    paddle.set_device(<span class="string">&quot;gpu:0&quot;</span>)</span><br><span class="line">    <span class="comment"># åˆ›å»ºæ•°æ®è¯»å–ç±»</span></span><br><span class="line">    train_dataset = TrainDataset(TRAINDIR, mode=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">    valid_dataset = TrainDataset(VALIDDIR, mode=<span class="string">&#x27;valid&#x27;</span>)</span><br><span class="line">    test_dataset = TrainDataset(VALIDDIR, mode=<span class="string">&#x27;valid&#x27;</span>)</span><br><span class="line">    <span class="comment"># ä½¿ç”¨paddle.io.DataLoaderåˆ›å»ºæ•°æ®è¯»å–å™¨ï¼Œå¹¶è®¾ç½®batchsizeï¼Œè¿›ç¨‹æ•°é‡num_workersç­‰å‚æ•°</span></span><br><span class="line">    train_loader = paddle.io.DataLoader(train_dataset, batch_size=<span class="number">4</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>, drop_last=<span class="literal">True</span>, use_shared_memory=<span class="literal">False</span>)</span><br><span class="line">    valid_loader = paddle.io.DataLoader(valid_dataset, batch_size=<span class="number">4</span>, shuffle=<span class="literal">False</span>, num_workers=<span class="number">0</span>, drop_last=<span class="literal">False</span>, use_shared_memory=<span class="literal">False</span>)</span><br><span class="line">    model = YOLOv3(num_classes = NUM_CLASSES)    <span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">    learning_rate = get_lr()</span><br><span class="line">    opt = paddle.optimizer.Momentum(</span><br><span class="line">                 learning_rate=learning_rate,</span><br><span class="line">                 momentum=<span class="number">0.9</span>,</span><br><span class="line">                 weight_decay=paddle.regularizer.L2Decay(<span class="number">0.0005</span>),</span><br><span class="line">                 parameters=model.parameters())  <span class="comment"># åˆ›å»ºä¼˜åŒ–å™¨</span></span><br><span class="line">    <span class="comment"># opt = paddle.optimizer.Adam(learning_rate=learning_rate, weight_decay=paddle.regularizer.L2Decay(0.0005), parameters=model.parameters())</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">####è¿­ä»£å‘¨æœŸæ•°è‡ªè¡Œè°ƒæ•´######</span></span><br><span class="line"></span><br><span class="line">    MAX_EPOCH = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(MAX_EPOCH):</span><br><span class="line">        <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            img, gt_boxes, gt_labels, img_scale = data</span><br><span class="line">            gt_scores = np.ones(gt_labels.shape).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            gt_scores = paddle.to_tensor(gt_scores)</span><br><span class="line">            img = paddle.to_tensor(img)</span><br><span class="line">            gt_boxes = paddle.to_tensor(gt_boxes)</span><br><span class="line">            gt_labels = paddle.to_tensor(gt_labels)</span><br><span class="line">            outputs = model(img)  <span class="comment"># å‰å‘ä¼ æ’­ï¼Œè¾“å‡º[P0, P1, P2]</span></span><br><span class="line">            loss = model.get_loss(outputs, gt_boxes, gt_labels, gtscore=gt_scores,</span><br><span class="line">                                  anchors = ANCHORS,</span><br><span class="line">                                  anchor_masks = ANCHOR_MASKS,</span><br><span class="line">                                  ignore_thresh=IGNORE_THRESH,</span><br><span class="line">                                  use_label_smooth=<span class="literal">False</span>)        <span class="comment"># è®¡ç®—æŸå¤±å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">            loss.backward()    <span class="comment"># åå‘ä¼ æ’­è®¡ç®—æ¢¯åº¦</span></span><br><span class="line">            opt.step()         <span class="comment"># æ›´æ–°å‚æ•°</span></span><br><span class="line">            opt.clear_grad()</span><br><span class="line">            <span class="keyword">if</span> i % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">                timestring = time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime(time.time()))</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;[TRAIN]epoch &#123;&#125;, iter &#123;&#125;, output loss: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(timestring, epoch, i, loss.numpy()))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># save params of model</span></span><br><span class="line">        <span class="keyword">if</span> (epoch % <span class="number">5</span> == <span class="number">0</span>) <span class="keyword">or</span> (epoch == MAX_EPOCH -<span class="number">1</span>):</span><br><span class="line">            paddle.save(model.state_dict(), <span class="string">&#x27;yolo_epoch&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(epoch))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ¯ä¸ªepochç»“æŸä¹‹ååœ¨éªŒè¯é›†ä¸Šè¿›è¡Œæµ‹è¯•</span></span><br><span class="line">        model.<span class="built_in">eval</span>()</span><br><span class="line">        <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(valid_loader()):</span><br><span class="line">            img, gt_boxes, gt_labels, img_scale = data</span><br><span class="line">            gt_scores = np.ones(gt_labels.shape).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            gt_scores = paddle.to_tensor(gt_scores)</span><br><span class="line">            img = paddle.to_tensor(img)</span><br><span class="line">            gt_boxes = paddle.to_tensor(gt_boxes)</span><br><span class="line">            gt_labels = paddle.to_tensor(gt_labels)</span><br><span class="line">            outputs = model(img)</span><br><span class="line">            loss = model.get_loss(outputs, gt_boxes, gt_labels, gtscore=gt_scores,</span><br><span class="line">                                  anchors = ANCHORS,</span><br><span class="line">                                  anchor_masks = ANCHOR_MASKS,</span><br><span class="line">                                  ignore_thresh=IGNORE_THRESH,</span><br><span class="line">                                  use_label_smooth=<span class="literal">False</span>)</span><br><span class="line">            <span class="keyword">if</span> i % <span class="number">1</span> == <span class="number">0</span>:</span><br><span class="line">                timestring = time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime(time.time()))</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;[VALID]epoch &#123;&#125;, iter &#123;&#125;, output loss: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(timestring, epoch, i, loss.numpy()))</span><br><span class="line">        model.train()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">paddle.save(model.state_dict(), <span class="string">&quot;linear_net.pdparams&quot;</span>)</span><br><span class="line">paddle.save(opt.state_dict(), <span class="string">&quot;opt.pdopt&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># load</span></span><br><span class="line"><span class="comment"># layer_state_dict = paddle.load(&quot;linear_net.pdparams&quot;)</span></span><br><span class="line"><span class="comment"># opt_state_dict = paddle.load(&quot;opt.pdopt&quot;)</span></span><br><span class="line"><span class="comment"># layer.set_state_dict(layer_state_dict)</span></span><br><span class="line"><span class="comment"># opt.set_state_dict(opt_state_dict)</span></span><br></pre></td></tr></table></figure><h2 id="8-é¢„æµ‹"><a href="#8-é¢„æµ‹" class="headerlink" title="8.é¢„æµ‹"></a><strong>8.é¢„æµ‹</strong></h2><p>é¢„æµ‹è¿‡ç¨‹æµç¨‹ <strong>å›¾18</strong> å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/15c140b1844d419cbe237b1a70f4099266aa168c05dc413f8e232f688050fa75" width = "400"></center><center><br>å›¾18ï¼šé¢„æµ‹æµç¨‹ </br></center><p><br></br></p><p><strong>é¢„æµ‹è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤æ­¥</strong>ï¼š</p><ol><li>é€šè¿‡ç½‘ç»œè¾“å‡ºè®¡ç®—å‡ºé¢„æµ‹æ¡†ä½ç½®å’Œæ‰€å±ç±»åˆ«çš„å¾—åˆ†ã€‚ </li><li>ä½¿ç”¨éæå¤§å€¼æŠ‘åˆ¶æ¥æ¶ˆé™¤é‡å è¾ƒå¤§çš„é¢„æµ‹æ¡†ã€‚</li></ol><p>å¯¹äºç¬¬1æ­¥ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è®²è¿‡å¦‚ä½•é€šè¿‡ç½‘ç»œè¾“å‡ºå€¼è®¡ç®—pred_objectness_probability, pred_boxesä»¥åŠpred_classification_probabilityï¼Œè¿™é‡Œæ¨èå¤§å®¶ç›´æ¥ä½¿ç”¨<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/ops/yolo_box_cn.html#yolo-box">paddle.vision.ops.yolo_box</a>ï¼Œå…³é”®å‚æ•°å«ä¹‰å¦‚ä¸‹ï¼š</p><p><code>paddle.vision.ops.yolo_box(x, img_size, anchors, class_num, conf_thresh, downsample_ratio, clip_bbox=True, name=None, scale_x_y=1.0)</code></p><ul><li>xï¼Œç½‘ç»œè¾“å‡ºç‰¹å¾å›¾ï¼Œä¾‹å¦‚ä¸Šé¢æåˆ°çš„P0æˆ–è€…P1ã€P2ã€‚</li><li>img_sizeï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸ã€‚</li><li>anchorsï¼Œä½¿ç”¨åˆ°çš„anchorçš„å°ºå¯¸ï¼Œå¦‚[10, 13, 16, 30, 33, 23, 30, 61, 62, 45, 59, 119, 116, 90, 156, 198, 373, 326]</li><li>class_numï¼Œç‰©ä½“ç±»åˆ«æ•°ã€‚</li><li>conf_thresh, ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œå¾—åˆ†ä½äºè¯¥é˜ˆå€¼çš„é¢„æµ‹æ¡†ä½ç½®æ•°å€¼ä¸ç”¨è®¡ç®—ç›´æ¥è®¾ç½®ä¸º0.0ã€‚</li><li>downsample_ratio, ç‰¹å¾å›¾çš„ä¸‹é‡‡æ ·æ¯”ä¾‹ï¼Œä¾‹å¦‚P0æ˜¯32ï¼ŒP1æ˜¯16ï¼ŒP2æ˜¯8ã€‚</li><li>name&#x3D;Noneï¼Œåå­—ï¼Œä¾‹å¦‚â€™yolo_boxâ€™ï¼Œä¸€èˆ¬æ— éœ€è®¾ç½®ï¼Œé»˜è®¤å€¼ä¸ºNoneã€‚</li></ul><p>è¿”å›å€¼åŒ…æ‹¬ä¸¤é¡¹ï¼Œ<code>boxes</code>å’Œ<code>scores</code>ï¼Œå…¶ä¸­<code>boxes</code>æ˜¯æ‰€æœ‰é¢„æµ‹æ¡†çš„åæ ‡å€¼ï¼Œ<code>scores</code>æ˜¯æ‰€æœ‰é¢„æµ‹æ¡†çš„å¾—åˆ†ã€‚</p><p>é¢„æµ‹æ¡†å¾—åˆ†çš„å®šä¹‰æ˜¯æ‰€å±ç±»åˆ«çš„æ¦‚ç‡ä¹˜ä»¥å…¶é¢„æµ‹æ¡†æ˜¯å¦åŒ…å«ç›®æ ‡ç‰©ä½“çš„objectnessæ¦‚ç‡ï¼Œå³</p><p>$$score &#x3D; P_{obj} \cdot P_{classification}$$</p><p>åœ¨ä¸Šé¢å®šä¹‰çš„ç±»YOLOv3ä¸‹é¢æ·»åŠ å‡½æ•°<code>get_pred</code>ï¼Œé€šè¿‡è°ƒç”¨<code>paddle.vision.ops.yolo_box</code>è·å¾—P0ã€P1ã€P2ä¸‰ä¸ªå±‚çº§çš„ç‰¹å¾å›¾å¯¹åº”çš„é¢„æµ‹æ¡†å’Œå¾—åˆ†ï¼Œå¹¶å°†ä»–ä»¬æ‹¼æ¥åœ¨ä¸€å—ï¼Œå³å¯å¾—åˆ°æ‰€æœ‰çš„é¢„æµ‹æ¡†åŠå…¶å±äºå„ä¸ªç±»åˆ«çš„å¾—åˆ†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰YOLOv3æ¨¡å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOLOv3</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">7</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(YOLOv3,self).__init__()</span><br><span class="line"></span><br><span class="line">        self.num_classes = num_classes</span><br><span class="line">        <span class="comment"># æå–å›¾åƒç‰¹å¾çš„éª¨å¹²ä»£ç </span></span><br><span class="line">        self.block = DarkNet53_conv_body()</span><br><span class="line">        self.block_outputs = []</span><br><span class="line">        self.yolo_blocks = []</span><br><span class="line">        self.route_blocks_2 = []</span><br><span class="line">        <span class="comment"># ç”Ÿæˆ3ä¸ªå±‚çº§çš„ç‰¹å¾å›¾P0, P1, P2</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">            <span class="comment"># æ·»åŠ ä»ciç”Ÿæˆriå’Œtiçš„æ¨¡å—</span></span><br><span class="line">            yolo_block = self.add_sublayer(</span><br><span class="line">                <span class="string">&quot;yolo_detecton_block_%d&quot;</span> % (i),</span><br><span class="line">                YoloDetectionBlock(</span><br><span class="line">                                   ch_in=<span class="number">512</span>//(<span class="number">2</span>**i)*<span class="number">2</span> <span class="keyword">if</span> i==<span class="number">0</span> <span class="keyword">else</span> <span class="number">512</span>//(<span class="number">2</span>**i)*<span class="number">2</span> + <span class="number">512</span>//(<span class="number">2</span>**i),</span><br><span class="line">                                   ch_out = <span class="number">512</span>//(<span class="number">2</span>**i)))</span><br><span class="line">            self.yolo_blocks.append(yolo_block)</span><br><span class="line"></span><br><span class="line">            num_filters = <span class="number">3</span> * (self.num_classes + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ·»åŠ ä»tiç”Ÿæˆpiçš„æ¨¡å—ï¼Œè¿™æ˜¯ä¸€ä¸ªConv2Dæ“ä½œï¼Œè¾“å‡ºé€šé“æ•°ä¸º3 * (num_classes + 5)</span></span><br><span class="line">            block_out = self.add_sublayer(</span><br><span class="line">                <span class="string">&quot;block_out_%d&quot;</span> % (i),</span><br><span class="line">                paddle.nn.Conv2D(in_channels=<span class="number">512</span>//(<span class="number">2</span>**i)*<span class="number">2</span>,</span><br><span class="line">                       out_channels=num_filters,</span><br><span class="line">                       kernel_size=<span class="number">1</span>,</span><br><span class="line">                       stride=<span class="number">1</span>,</span><br><span class="line">                       padding=<span class="number">0</span>,</span><br><span class="line">                       weight_attr=paddle.ParamAttr(</span><br><span class="line">                           initializer=paddle.nn.initializer.Normal(<span class="number">0.</span>, <span class="number">0.02</span>)),</span><br><span class="line">                       bias_attr=paddle.ParamAttr(</span><br><span class="line">                           initializer=paddle.nn.initializer.Constant(<span class="number">0.0</span>),</span><br><span class="line">                           regularizer=paddle.regularizer.L2Decay(<span class="number">0.</span>))))</span><br><span class="line">            self.block_outputs.append(block_out)</span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">2</span>:</span><br><span class="line">                <span class="comment"># å¯¹riè¿›è¡Œå·ç§¯</span></span><br><span class="line">                route = self.add_sublayer(<span class="string">&quot;route2_%d&quot;</span>%i,</span><br><span class="line">                                          ConvBNLayer(ch_in=<span class="number">512</span>//(<span class="number">2</span>**i),</span><br><span class="line">                                                      ch_out=<span class="number">256</span>//(<span class="number">2</span>**i),</span><br><span class="line">                                                      kernel_size=<span class="number">1</span>,</span><br><span class="line">                                                      stride=<span class="number">1</span>,</span><br><span class="line">                                                      padding=<span class="number">0</span>))</span><br><span class="line">                self.route_blocks_2.append(route)</span><br><span class="line">            <span class="comment"># å°†riæ”¾å¤§ä»¥ä¾¿è·Ÿc_&#123;i+1&#125;ä¿æŒåŒæ ·çš„å°ºå¯¸</span></span><br><span class="line">            self.upsample = Upsample()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        outputs = []</span><br><span class="line">        blocks = self.block(inputs)</span><br><span class="line">        <span class="keyword">for</span> i, block <span class="keyword">in</span> <span class="built_in">enumerate</span>(blocks):</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                <span class="comment"># å°†r_&#123;i-1&#125;ç»è¿‡å·ç§¯å’Œä¸Šé‡‡æ ·ä¹‹åå¾—åˆ°ç‰¹å¾å›¾ï¼Œä¸è¿™ä¸€çº§çš„ciè¿›è¡Œæ‹¼æ¥</span></span><br><span class="line">                block = paddle.concat([route, block], axis=<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># ä»ciç”Ÿæˆtiå’Œri</span></span><br><span class="line">            route, tip = self.yolo_blocks[i](block)</span><br><span class="line">            <span class="comment"># ä»tiç”Ÿæˆpi</span></span><br><span class="line">            block_out = self.block_outputs[i](tip)</span><br><span class="line">            <span class="comment"># å°†piæ”¾å…¥åˆ—è¡¨</span></span><br><span class="line">            outputs.append(block_out)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">2</span>:</span><br><span class="line">                <span class="comment"># å¯¹riè¿›è¡Œå·ç§¯è°ƒæ•´é€šé“æ•°</span></span><br><span class="line">                route = self.route_blocks_2[i](route)</span><br><span class="line">                <span class="comment"># å¯¹riè¿›è¡Œæ”¾å¤§ï¼Œä½¿å…¶å°ºå¯¸å’Œc_&#123;i+1&#125;ä¿æŒä¸€è‡´</span></span><br><span class="line">                route = self.upsample(route)</span><br><span class="line">        <span class="keyword">return</span> outputs</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_loss</span>(<span class="params">self, outputs, gtbox, gtlabel, gtscore=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">                 anchors = [<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">45</span>, <span class="number">59</span>, <span class="number">119</span>, <span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>],</span></span><br><span class="line"><span class="params">                 anchor_masks = [[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]],</span></span><br><span class="line"><span class="params">                 ignore_thresh=<span class="number">0.7</span>,</span></span><br><span class="line"><span class="params">                 use_label_smooth=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä½¿ç”¨paddle.vision.ops.yolo_lossï¼Œç›´æ¥è®¡ç®—æŸå¤±å‡½æ•°ï¼Œè¿‡ç¨‹æ›´ç®€æ´ï¼Œé€Ÿåº¦ä¹Ÿæ›´å¿«</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.losses = []</span><br><span class="line">        downsample = <span class="number">32</span></span><br><span class="line">        <span class="keyword">for</span> i, out <span class="keyword">in</span> <span class="built_in">enumerate</span>(outputs): <span class="comment"># å¯¹ä¸‰ä¸ªå±‚çº§åˆ†åˆ«æ±‚æŸå¤±å‡½æ•°</span></span><br><span class="line">            anchor_mask_i = anchor_masks[i]</span><br><span class="line">            loss = paddle.vision.ops.yolo_loss(</span><br><span class="line">                    x=out,  <span class="comment"># outæ˜¯P0, P1, P2ä¸­çš„ä¸€ä¸ª</span></span><br><span class="line">                    gt_box=gtbox,  <span class="comment"># çœŸå®æ¡†åæ ‡</span></span><br><span class="line">                    gt_label=gtlabel,  <span class="comment"># çœŸå®æ¡†ç±»åˆ«</span></span><br><span class="line">                    gt_score=gtscore,  <span class="comment"># çœŸå®æ¡†å¾—åˆ†ï¼Œä½¿ç”¨mixupè®­ç»ƒæŠ€å·§æ—¶éœ€è¦ï¼Œä¸ä½¿ç”¨è¯¥æŠ€å·§æ—¶ç›´æ¥è®¾ç½®ä¸º1ï¼Œå½¢çŠ¶ä¸gtlabelç›¸åŒ</span></span><br><span class="line">                    anchors=anchors,   <span class="comment"># é”šæ¡†å°ºå¯¸ï¼ŒåŒ…å«[w0, h0, w1, h1, ..., w8, h8]å…±9ä¸ªé”šæ¡†çš„å°ºå¯¸</span></span><br><span class="line">                    anchor_mask=anchor_mask_i, <span class="comment"># ç­›é€‰é”šæ¡†çš„maskï¼Œä¾‹å¦‚anchor_mask_i=[3, 4, 5]ï¼Œå°†anchorsä¸­ç¬¬3ã€4ã€5ä¸ªé”šæ¡†æŒ‘é€‰å‡ºæ¥ç»™è¯¥å±‚çº§ä½¿ç”¨</span></span><br><span class="line">                    class_num=self.num_classes, <span class="comment"># åˆ†ç±»ç±»åˆ«æ•°</span></span><br><span class="line">                    ignore_thresh=ignore_thresh, <span class="comment"># å½“é¢„æµ‹æ¡†ä¸çœŸå®æ¡†IoU &gt; ignore_threshï¼Œæ ‡æ³¨objectness = -1</span></span><br><span class="line">                    downsample_ratio=downsample, <span class="comment"># ç‰¹å¾å›¾ç›¸å¯¹äºåŸå›¾ç¼©å°çš„å€æ•°ï¼Œä¾‹å¦‚P0æ˜¯32ï¼Œ P1æ˜¯16ï¼ŒP2æ˜¯8</span></span><br><span class="line">                    use_label_smooth=<span class="literal">False</span>)      <span class="comment"># ä½¿ç”¨label_smoothè®­ç»ƒæŠ€å·§æ—¶ä¼šç”¨åˆ°ï¼Œè¿™é‡Œæ²¡ç”¨æ­¤æŠ€å·§ï¼Œç›´æ¥è®¾ç½®ä¸ºFalse</span></span><br><span class="line">            self.losses.append(paddle.mean(loss))  <span class="comment">#meanå¯¹æ¯å¼ å›¾ç‰‡æ±‚å’Œ</span></span><br><span class="line">            downsample = downsample // <span class="number">2</span> <span class="comment"># ä¸‹ä¸€çº§ç‰¹å¾å›¾çš„ç¼©æ”¾å€æ•°ä¼šå‡åŠ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>(self.losses) <span class="comment"># å¯¹æ¯ä¸ªå±‚çº§æ±‚å’Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_pred</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 outputs,</span></span><br><span class="line"><span class="params">                 im_shape=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">                 anchors = [<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">45</span>, <span class="number">59</span>, <span class="number">119</span>, <span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>],</span></span><br><span class="line"><span class="params">                 anchor_masks = [[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]],</span></span><br><span class="line"><span class="params">                 valid_thresh = <span class="number">0.01</span></span>):</span><br><span class="line">        downsample = <span class="number">32</span></span><br><span class="line">        total_boxes = []</span><br><span class="line">        total_scores = []</span><br><span class="line">        <span class="keyword">for</span> i, out <span class="keyword">in</span> <span class="built_in">enumerate</span>(outputs):</span><br><span class="line">            anchor_mask = anchor_masks[i]</span><br><span class="line">            anchors_this_level = []</span><br><span class="line">            <span class="keyword">for</span> m <span class="keyword">in</span> anchor_mask:</span><br><span class="line">                anchors_this_level.append(anchors[<span class="number">2</span> * m])</span><br><span class="line">                anchors_this_level.append(anchors[<span class="number">2</span> * m + <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">            boxes, scores = paddle.vision.ops.yolo_box(</span><br><span class="line">                   x=out,</span><br><span class="line">                   img_size=im_shape,</span><br><span class="line">                   anchors=anchors_this_level,</span><br><span class="line">                   class_num=self.num_classes,</span><br><span class="line">                   conf_thresh=valid_thresh,</span><br><span class="line">                   downsample_ratio=downsample,</span><br><span class="line">                   name=<span class="string">&quot;yolo_box&quot;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">            total_boxes.append(boxes)</span><br><span class="line">            total_scores.append(</span><br><span class="line">                        paddle.transpose(</span><br><span class="line">                        scores, perm=[<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>]))</span><br><span class="line">            downsample = downsample // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        yolo_boxes = paddle.concat(total_boxes, axis=<span class="number">1</span>)</span><br><span class="line">        yolo_scores = paddle.concat(total_scores, axis=<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> yolo_boxes, yolo_scores</span><br></pre></td></tr></table></figure><p>ç¬¬1æ­¥çš„è®¡ç®—ç»“æœä¼šåœ¨æ¯ä¸ªå°æ–¹å—åŒºåŸŸä¸Šç”Ÿæˆå¤šä¸ªé¢„æµ‹æ¡†ï¼Œè€Œè¿™äº›é¢„æµ‹æ¡†ä¸­å¾ˆå¤šéƒ½æœ‰è¾ƒå¤§çš„é‡åˆåº¦ï¼Œå› æ­¤éœ€è¦æ¶ˆé™¤é‡å è¾ƒå¤§çš„å†—ä½™æ£€æµ‹æ¡†ã€‚</p><p>ä¸‹é¢ç¤ºä¾‹ä»£ç ä¸­çš„é¢„æµ‹æ¡†æ˜¯ä½¿ç”¨æ¨¡å‹å¯¹å›¾ç‰‡é¢„æµ‹ä¹‹åè¾“å‡ºçš„ï¼Œè¿™é‡Œä¸€å…±é€‰å‡ºäº†11ä¸ªé¢„æµ‹æ¡†ï¼Œåœ¨å›¾ä¸Šç”»å‡ºé¢„æµ‹æ¡†å¦‚ä¸‹æ‰€ç¤ºã€‚åœ¨æ¯ä¸ªäººåƒå‘¨å›´ï¼Œéƒ½å‡ºç°äº†å¤šä¸ªé¢„æµ‹æ¡†ï¼Œéœ€è¦æ¶ˆé™¤å†—ä½™çš„é¢„æµ‹æ¡†ä»¥å¾—åˆ°æœ€ç»ˆçš„é¢„æµ‹ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”»å›¾å±•ç¤ºç›®æ ‡ç‰©ä½“è¾¹ç•Œæ¡†</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.patches <span class="keyword">as</span> patches</span><br><span class="line"><span class="keyword">from</span> matplotlib.image <span class="keyword">import</span> imread</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç”»çŸ©å½¢æ¡†çš„ç¨‹åº    </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_rectangle</span>(<span class="params">currentAxis, bbox, edgecolor = <span class="string">&#x27;k&#x27;</span>, facecolor = <span class="string">&#x27;y&#x27;</span>, fill=<span class="literal">False</span>, linestyle=<span class="string">&#x27;-&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># currentAxisï¼Œåæ ‡è½´ï¼Œé€šè¿‡plt.gca()è·å–</span></span><br><span class="line">    <span class="comment"># bboxï¼Œè¾¹ç•Œæ¡†ï¼ŒåŒ…å«å››ä¸ªæ•°å€¼çš„listï¼Œ [x1, y1, x2, y2]</span></span><br><span class="line">    <span class="comment"># edgecolorï¼Œè¾¹æ¡†çº¿æ¡é¢œè‰²</span></span><br><span class="line">    <span class="comment"># facecolorï¼Œå¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment"># fill, æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment"># linestypeï¼Œè¾¹æ¡†çº¿å‹</span></span><br><span class="line">    <span class="comment"># patches.Rectangleéœ€è¦ä¼ å…¥å·¦ä¸Šè§’åæ ‡ã€çŸ©å½¢åŒºåŸŸçš„å®½åº¦ã€é«˜åº¦ç­‰å‚æ•°</span></span><br><span class="line">    rect=patches.Rectangle((bbox[<span class="number">0</span>], bbox[<span class="number">1</span>]), bbox[<span class="number">2</span>]-bbox[<span class="number">0</span>]+<span class="number">1</span>, bbox[<span class="number">3</span>]-bbox[<span class="number">1</span>]+<span class="number">1</span>, linewidth=<span class="number">1</span>,</span><br><span class="line">                           edgecolor=edgecolor,facecolor=facecolor,fill=fill, linestyle=linestyle)</span><br><span class="line">    currentAxis.add_patch(rect)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">plt.figure(figsize=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;/home/aistudio/000000086956.jpg&#x27;</span></span><br><span class="line">im = imread(filename)</span><br><span class="line">plt.imshow(im)</span><br><span class="line"></span><br><span class="line">currentAxis=plt.gca()</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹æ¡†ä½ç½®</span></span><br><span class="line">boxes = np.array([[<span class="number">4.21716537e+01</span>, <span class="number">1.28230896e+02</span>, <span class="number">2.26547668e+02</span>, <span class="number">6.00434631e+02</span>],</span><br><span class="line">       [<span class="number">3.18562988e+02</span>, <span class="number">1.23168472e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.05688416e+02</span>],</span><br><span class="line">       [<span class="number">2.62704697e+01</span>, <span class="number">1.39430557e+02</span>, <span class="number">2.20587097e+02</span>, <span class="number">6.38959656e+02</span>],</span><br><span class="line">       [<span class="number">4.24965363e+01</span>, <span class="number">1.42706665e+02</span>, <span class="number">2.25955185e+02</span>, <span class="number">6.35671204e+02</span>],</span><br><span class="line">       [<span class="number">2.37462646e+02</span>, <span class="number">1.35731537e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.31451294e+02</span>],</span><br><span class="line">       [<span class="number">3.19390472e+02</span>, <span class="number">1.29295090e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.33003845e+02</span>],</span><br><span class="line">       [<span class="number">3.28933838e+02</span>, <span class="number">1.22736115e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.39000000e+02</span>],</span><br><span class="line">       [<span class="number">4.44292603e+01</span>, <span class="number">1.70438187e+02</span>, <span class="number">2.26841858e+02</span>, <span class="number">6.39000000e+02</span>],</span><br><span class="line">       [<span class="number">2.17988785e+02</span>, <span class="number">3.02472412e+02</span>, <span class="number">4.06062927e+02</span>, <span class="number">6.29106628e+02</span>],</span><br><span class="line">       [<span class="number">2.00241089e+02</span>, <span class="number">3.23755096e+02</span>, <span class="number">3.96929321e+02</span>, <span class="number">6.36386108e+02</span>],</span><br><span class="line">       [<span class="number">2.14310303e+02</span>, <span class="number">3.23443665e+02</span>, <span class="number">4.06732849e+02</span>, <span class="number">6.35775269e+02</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹æ¡†å¾—åˆ†</span></span><br><span class="line">scores = np.array([<span class="number">0.5247661</span> , <span class="number">0.51759845</span>, <span class="number">0.86075854</span>, <span class="number">0.9910175</span> , <span class="number">0.39170712</span>,</span><br><span class="line">       <span class="number">0.9297706</span> , <span class="number">0.5115228</span> , <span class="number">0.270992</span>  , <span class="number">0.19087596</span>, <span class="number">0.64201415</span>, <span class="number">0.879036</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºæ‰€æœ‰é¢„æµ‹æ¡†</span></span><br><span class="line"><span class="keyword">for</span> box <span class="keyword">in</span> boxes:</span><br><span class="line">    draw_rectangle(currentAxis, box)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/72.png" alt="png"></p><br><p><strong>éæå¤§å€¼æŠ‘åˆ¶ï¼ˆnon-maximum suppression, nmsï¼‰</strong></p><p>è¿™é‡Œä½¿ç”¨éæå¤§å€¼æŠ‘åˆ¶æ¥æ¶ˆé™¤å†—ä½™æ¡†ã€‚åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªé¢„æµ‹æ¡†éƒ½å¯¹åº”åŒä¸€ä¸ªç‰©ä½“ï¼Œåˆ™åªé€‰å‡ºå¾—åˆ†æœ€é«˜çš„é‚£ä¸ªé¢„æµ‹æ¡†ï¼Œå‰©ä¸‹çš„é¢„æµ‹æ¡†è¢«ä¸¢å¼ƒæ‰ã€‚å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªé¢„æµ‹æ¡†å¯¹åº”çš„æ˜¯åŒä¸€ä¸ªç‰©ä½“å‘¢ï¼Œæ ‡å‡†è¯¥æ€ä¹ˆè®¾ç½®ï¼Ÿ<strong>å¦‚æœä¸¤ä¸ªé¢„æµ‹æ¡†çš„ç±»åˆ«ä¸€æ ·ï¼Œè€Œä¸”ä»–ä»¬çš„ä½ç½®é‡åˆåº¦æ¯”è¾ƒå¤§ï¼Œåˆ™å¯ä»¥è®¤ä¸ºä»–ä»¬æ˜¯åœ¨é¢„æµ‹åŒä¸€ä¸ªç›®æ ‡</strong>ã€‚</p><p><code>éæå¤§å€¼æŠ‘åˆ¶çš„åšæ³•æ˜¯ï¼Œé€‰å‡ºæŸä¸ªç±»åˆ«å¾—åˆ†æœ€é«˜çš„é¢„æµ‹æ¡†ï¼Œç„¶åçœ‹å“ªäº›é¢„æµ‹æ¡†è·Ÿå®ƒçš„IoUå¤§äºé˜ˆå€¼ï¼Œå°±æŠŠè¿™äº›é¢„æµ‹æ¡†ç»™ä¸¢å¼ƒæ‰ã€‚è¿™é‡ŒIoUçš„é˜ˆå€¼æ˜¯è¶…å‚æ•°ï¼Œéœ€è¦æå‰è®¾ç½®ï¼ŒYOLOv3æ¨¡å‹é‡Œé¢è®¾ç½®çš„æ˜¯0.5</code>ã€‚</p><p>æ¯”å¦‚åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œboxesé‡Œé¢ä¸€å…±å¯¹åº”11ä¸ªé¢„æµ‹æ¡†ï¼Œscoresç»™å‡ºäº†å®ƒä»¬é¢„æµ‹â€äººâ€è¿™ä¸€ç±»åˆ«çš„å¾—åˆ†ã€‚</p><ul><li>Step0ï¼šåˆ›å»ºé€‰ä¸­åˆ—è¡¨ï¼Œkeep_list &#x3D; []</li><li>Step1ï¼šå¯¹å¾—åˆ†è¿›è¡Œæ’åºï¼Œremain_list &#x3D; [ 3,  5, 10,  2,  9,  0,  1,  6,  4,  7,  8]ï¼Œ </li><li>Step2ï¼šé€‰å‡ºboxes[3]ï¼Œæ­¤æ—¶keep_listä¸ºç©ºï¼Œä¸éœ€è¦è®¡ç®—IoUï¼Œç›´æ¥å°†å…¶æ”¾å…¥keep_listï¼Œkeep_list &#x3D; [3]ï¼Œ remain_list&#x3D;[5, 10,  2,  9,  0,  1,  6,  4,  7,  8]</li><li>Step3ï¼šé€‰å‡ºboxes[5]ï¼Œæ­¤æ—¶keep_listä¸­å·²ç»å­˜åœ¨boxes[3]ï¼Œè®¡ç®—å‡ºIoU(boxes[3], boxes[5]) &#x3D; 0.0ï¼Œæ˜¾ç„¶å°äºé˜ˆå€¼ï¼Œåˆ™keep_list&#x3D;[3, 5], remain_list &#x3D; [10,  2,  9,  0,  1,  6,  4,  7,  8]</li><li>Step4ï¼šé€‰å‡ºboxes[10]ï¼Œæ­¤æ—¶keep_list&#x3D;[3, 5]ï¼Œè®¡ç®—IoU(boxes[3], boxes[10])&#x3D;0.0268ï¼ŒIoU(boxes[5], boxes[10])&#x3D;0.0268 &#x3D; 0.24ï¼Œéƒ½å°äºé˜ˆå€¼ï¼Œåˆ™keep_list &#x3D; [3, 5, 10]ï¼Œremain_list&#x3D;[2,  9,  0,  1,  6,  4,  7,  8]</li><li>Step5ï¼šé€‰å‡ºboxes[2]ï¼Œæ­¤æ—¶keep_list &#x3D; [3, 5, 10]ï¼Œè®¡ç®—IoU(boxes[3], boxes[2]) &#x3D; 0.88ï¼Œè¶…è¿‡äº†é˜ˆå€¼ï¼Œç›´æ¥å°†boxes[2]ä¸¢å¼ƒï¼Œkeep_list&#x3D;[3, 5, 10]ï¼Œremain_list&#x3D;[9,  0,  1,  6,  4,  7,  8]</li><li>Step6ï¼šé€‰å‡ºboxes[9]ï¼Œæ­¤æ—¶keep_list &#x3D; [3, 5, 10]ï¼Œè®¡ç®—IoU(boxes[3], boxes[9]) &#x3D; 0.0577ï¼ŒIoU(boxes[5], boxes[9]) &#x3D; 0.205ï¼ŒIoU(boxes[10], boxes[9]) &#x3D; 0.88ï¼Œè¶…è¿‡äº†é˜ˆå€¼ï¼Œå°†boxes[9]ä¸¢å¼ƒæ‰ã€‚keep_list&#x3D;[3, 5, 10]ï¼Œremain_list&#x3D;[0,  1,  6,  4,  7,  8]</li><li>Step7ï¼šé‡å¤ä¸Šè¿°Step6ç›´åˆ°remain_listä¸ºç©ºã€‚</li></ul><p>æœ€ç»ˆå¾—åˆ°keep_list&#x3D;[3, 5, 10]ï¼Œä¹Ÿå°±æ˜¯é¢„æµ‹æ¡†3ã€5ã€10è¢«æœ€ç»ˆæŒ‘é€‰å‡ºæ¥äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”»å›¾å±•ç¤ºç›®æ ‡ç‰©ä½“è¾¹ç•Œæ¡†</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.patches <span class="keyword">as</span> patches</span><br><span class="line"><span class="keyword">from</span> matplotlib.image <span class="keyword">import</span> imread</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç”»çŸ©å½¢æ¡†çš„ç¨‹åº    </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_rectangle</span>(<span class="params">currentAxis, bbox, edgecolor = <span class="string">&#x27;k&#x27;</span>, facecolor = <span class="string">&#x27;y&#x27;</span>, fill=<span class="literal">False</span>, linestyle=<span class="string">&#x27;-&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># currentAxisï¼Œåæ ‡è½´ï¼Œé€šè¿‡plt.gca()è·å–</span></span><br><span class="line">    <span class="comment"># bboxï¼Œè¾¹ç•Œæ¡†ï¼ŒåŒ…å«å››ä¸ªæ•°å€¼çš„listï¼Œ [x1, y1, x2, y2]</span></span><br><span class="line">    <span class="comment"># edgecolorï¼Œè¾¹æ¡†çº¿æ¡é¢œè‰²</span></span><br><span class="line">    <span class="comment"># facecolorï¼Œå¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment"># fill, æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment"># linestypeï¼Œè¾¹æ¡†çº¿å‹</span></span><br><span class="line">    <span class="comment"># patches.Rectangleéœ€è¦ä¼ å…¥å·¦ä¸Šè§’åæ ‡ã€çŸ©å½¢åŒºåŸŸçš„å®½åº¦ã€é«˜åº¦ç­‰å‚æ•°</span></span><br><span class="line">    rect=patches.Rectangle((bbox[<span class="number">0</span>], bbox[<span class="number">1</span>]), bbox[<span class="number">2</span>]-bbox[<span class="number">0</span>]+<span class="number">1</span>, bbox[<span class="number">3</span>]-bbox[<span class="number">1</span>]+<span class="number">1</span>, linewidth=<span class="number">1</span>,</span><br><span class="line">                           edgecolor=edgecolor,facecolor=facecolor,fill=fill, linestyle=linestyle)</span><br><span class="line">    currentAxis.add_patch(rect)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">plt.figure(figsize=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;000000086956.jpg&#x27;</span></span><br><span class="line">im = imread(filename)</span><br><span class="line">plt.imshow(im)</span><br><span class="line"></span><br><span class="line">currentAxis=plt.gca()</span><br><span class="line"></span><br><span class="line">boxes = np.array([[<span class="number">4.21716537e+01</span>, <span class="number">1.28230896e+02</span>, <span class="number">2.26547668e+02</span>, <span class="number">6.00434631e+02</span>],</span><br><span class="line">       [<span class="number">3.18562988e+02</span>, <span class="number">1.23168472e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.05688416e+02</span>],</span><br><span class="line">       [<span class="number">2.62704697e+01</span>, <span class="number">1.39430557e+02</span>, <span class="number">2.20587097e+02</span>, <span class="number">6.38959656e+02</span>],</span><br><span class="line">       [<span class="number">4.24965363e+01</span>, <span class="number">1.42706665e+02</span>, <span class="number">2.25955185e+02</span>, <span class="number">6.35671204e+02</span>],</span><br><span class="line">       [<span class="number">2.37462646e+02</span>, <span class="number">1.35731537e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.31451294e+02</span>],</span><br><span class="line">       [<span class="number">3.19390472e+02</span>, <span class="number">1.29295090e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.33003845e+02</span>],</span><br><span class="line">       [<span class="number">3.28933838e+02</span>, <span class="number">1.22736115e+02</span>, <span class="number">4.79000000e+02</span>, <span class="number">6.39000000e+02</span>],</span><br><span class="line">       [<span class="number">4.44292603e+01</span>, <span class="number">1.70438187e+02</span>, <span class="number">2.26841858e+02</span>, <span class="number">6.39000000e+02</span>],</span><br><span class="line">       [<span class="number">2.17988785e+02</span>, <span class="number">3.02472412e+02</span>, <span class="number">4.06062927e+02</span>, <span class="number">6.29106628e+02</span>],</span><br><span class="line">       [<span class="number">2.00241089e+02</span>, <span class="number">3.23755096e+02</span>, <span class="number">3.96929321e+02</span>, <span class="number">6.36386108e+02</span>],</span><br><span class="line">       [<span class="number">2.14310303e+02</span>, <span class="number">3.23443665e+02</span>, <span class="number">4.06732849e+02</span>, <span class="number">6.35775269e+02</span>]])</span><br><span class="line"> </span><br><span class="line">scores = np.array([<span class="number">0.5247661</span> , <span class="number">0.51759845</span>, <span class="number">0.86075854</span>, <span class="number">0.9910175</span> , <span class="number">0.39170712</span>,</span><br><span class="line">       <span class="number">0.9297706</span> , <span class="number">0.5115228</span> , <span class="number">0.270992</span>  , <span class="number">0.19087596</span>, <span class="number">0.64201415</span>, <span class="number">0.879036</span>])</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºæœ€ç»ˆä¿ç•™çš„é¢„æµ‹æ¡†</span></span><br><span class="line">inds = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">10</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    box = boxes[inds[i]]</span><br><span class="line">    draw_rectangle(currentAxis, box, edgecolor=colors[i])</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/73.png" alt="png"></p><p>éæå¤§å€¼æŠ‘åˆ¶çš„å…·ä½“å®ç°ä»£ç å¦‚ä¸‹é¢çš„<code>nms</code>å‡½æ•°çš„å®šä¹‰ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯æ•°æ®é›†ä¸­å«æœ‰å¤šä¸ªç±»åˆ«çš„ç‰©ä½“ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åšå¤šåˆ†ç±»éæå¤§å€¼æŠ‘åˆ¶ï¼Œå…¶å®ç°åŸç†ä¸éæå¤§å€¼æŠ‘åˆ¶ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºéœ€è¦å¯¹æ¯ä¸ªç±»åˆ«éƒ½åšéæå¤§å€¼æŠ‘åˆ¶ï¼Œå®ç°ä»£ç å¦‚ä¸‹é¢çš„<code>multiclass_nms</code>æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éæå¤§å€¼æŠ‘åˆ¶</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nms</span>(<span class="params">bboxes, scores, score_thresh, nms_thresh, pre_nms_topk, i=<span class="number">0</span>, c=<span class="number">0</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    nms</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># ä»å°åˆ°å¤§æ’åˆ—å–å‡ºç´¢å¼•</span></span><br><span class="line">    inds = np.argsort(scores)</span><br><span class="line">    inds = inds[::-<span class="number">1</span>]</span><br><span class="line">    keep_inds = []</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">len</span>(inds) &gt; <span class="number">0</span>):</span><br><span class="line">        cur_ind = inds[<span class="number">0</span>]</span><br><span class="line">        cur_score = scores[cur_ind]</span><br><span class="line">        <span class="comment"># if score of the box is less than score_thresh, just drop it</span></span><br><span class="line">        <span class="keyword">if</span> cur_score &lt; score_thresh:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        keep = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> ind <span class="keyword">in</span> keep_inds:</span><br><span class="line">            current_box = bboxes[cur_ind]</span><br><span class="line">            remain_box = bboxes[ind]</span><br><span class="line">            iou = box_iou_xyxy(current_box, remain_box)</span><br><span class="line">            <span class="keyword">if</span> iou &gt; nms_thresh:</span><br><span class="line">                keep = <span class="literal">False</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="comment">#if i == 0 and c == 4 and cur_ind == 951:</span></span><br><span class="line">            <span class="comment">#print(&#x27;suppressed, &#x27;, keep, i, c, cur_ind, ind, iou)</span></span><br><span class="line">        <span class="keyword">if</span> keep:</span><br><span class="line">            keep_inds.append(cur_ind)</span><br><span class="line">        inds = inds[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> np.array(keep_inds)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šåˆ†ç±»éæå¤§å€¼æŠ‘åˆ¶</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">multiclass_nms</span>(<span class="params">bboxes, scores, score_thresh=<span class="number">0.01</span>, nms_thresh=<span class="number">0.45</span>, pre_nms_topk=<span class="number">1000</span>, pos_nms_topk=<span class="number">100</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    This is for multiclass_nms</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    batch_size = bboxes.shape[<span class="number">0</span>]</span><br><span class="line">    class_num = scores.shape[<span class="number">1</span>]</span><br><span class="line">    rets = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batch_size):</span><br><span class="line">        bboxes_i = bboxes[i]</span><br><span class="line">        scores_i = scores[i]</span><br><span class="line">        ret = []</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(class_num):</span><br><span class="line">            scores_i_c = scores_i[c]</span><br><span class="line">            keep_inds = nms(bboxes_i, scores_i_c, score_thresh, nms_thresh, pre_nms_topk, i=i, c=c)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(keep_inds) &lt; <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            keep_bboxes = bboxes_i[keep_inds]</span><br><span class="line">            keep_scores = scores_i_c[keep_inds]</span><br><span class="line">            keep_results = np.zeros([keep_scores.shape[<span class="number">0</span>], <span class="number">6</span>])</span><br><span class="line">            keep_results[:, <span class="number">0</span>] = c</span><br><span class="line">            keep_results[:, <span class="number">1</span>] = keep_scores[:]</span><br><span class="line">            keep_results[:, <span class="number">2</span>:<span class="number">6</span>] = keep_bboxes[:, :]</span><br><span class="line">            ret.append(keep_results)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(ret) &lt; <span class="number">1</span>:</span><br><span class="line">            rets.append(ret)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        ret_i = np.concatenate(ret, axis=<span class="number">0</span>)</span><br><span class="line">        scores_i = ret_i[:, <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(scores_i) &gt; pos_nms_topk:</span><br><span class="line">            inds = np.argsort(scores_i)[::-<span class="number">1</span>]</span><br><span class="line">            inds = inds[:pos_nms_topk]</span><br><span class="line">            ret_i = ret_i[inds]</span><br><span class="line"></span><br><span class="line">        rets.append(ret_i)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> rets</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯å®Œæ•´çš„æµ‹è¯•ç¨‹åºï¼Œåœ¨æµ‹è¯•æ•°æ®é›†ä¸Šçš„è¾“å‡ºç»“æœå°†ä¼šè¢«ä¿å­˜åœ¨<code>pred_results.json</code>æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—IoUï¼ŒçŸ©å½¢æ¡†çš„åæ ‡å½¢å¼ä¸ºxyxy</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">box_iou_xyxy</span>(<span class="params">box1, box2</span>):</span><br><span class="line">    <span class="comment"># è·å–box1å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡</span></span><br><span class="line">    x1min, y1min, x1max, y1max = box1[<span class="number">0</span>], box1[<span class="number">1</span>], box1[<span class="number">2</span>], box1[<span class="number">3</span>]</span><br><span class="line">    <span class="comment"># è®¡ç®—box1çš„é¢ç§¯</span></span><br><span class="line">    s1 = (y1max - y1min + <span class="number">1.</span>) * (x1max - x1min + <span class="number">1.</span>)</span><br><span class="line">    <span class="comment"># è·å–box2å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡</span></span><br><span class="line">    x2min, y2min, x2max, y2max = box2[<span class="number">0</span>], box2[<span class="number">1</span>], box2[<span class="number">2</span>], box2[<span class="number">3</span>]</span><br><span class="line">    <span class="comment"># è®¡ç®—box2çš„é¢ç§¯</span></span><br><span class="line">    s2 = (y2max - y2min + <span class="number">1.</span>) * (x2max - x2min + <span class="number">1.</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¡ç®—ç›¸äº¤çŸ©å½¢æ¡†çš„åæ ‡</span></span><br><span class="line">    xmin = np.maximum(x1min, x2min)</span><br><span class="line">    ymin = np.maximum(y1min, y2min)</span><br><span class="line">    xmax = np.minimum(x1max, x2max)</span><br><span class="line">    ymax = np.minimum(y1max, y2max)</span><br><span class="line">    <span class="comment"># è®¡ç®—ç›¸äº¤çŸ©å½¢è¡Œçš„é«˜åº¦ã€å®½åº¦ã€é¢ç§¯</span></span><br><span class="line">    inter_h = np.maximum(ymax - ymin + <span class="number">1.</span>, <span class="number">0.</span>)</span><br><span class="line">    inter_w = np.maximum(xmax - xmin + <span class="number">1.</span>, <span class="number">0.</span>)</span><br><span class="line">    intersection = inter_h * inter_w</span><br><span class="line">    <span class="comment"># è®¡ç®—ç›¸å¹¶é¢ç§¯</span></span><br><span class="line">    union = s1 + s2 - intersection</span><br><span class="line">    <span class="comment"># è®¡ç®—äº¤å¹¶æ¯”</span></span><br><span class="line">    iou = intersection / union</span><br><span class="line">    <span class="keyword">return</span> iou</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹ yolo_epoch50 æ•°æ®è„šæœ¬</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹è§£å‹......&#x27;</span>)</span><br><span class="line">!unzip  -o -q -d  /home/aistudio /home/aistudio/data/data170339/yolo_epoch50.<span class="built_in">zip</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;è§£å‹å®Œæˆ&#x27;</span>)</span><br></pre></td></tr></table></figure><pre><code>å¼€å§‹è§£å‹......è§£å‹å®Œæˆ</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">ANCHORS = [<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">45</span>, <span class="number">59</span>, <span class="number">119</span>, <span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>]</span><br><span class="line">ANCHOR_MASKS = [[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]]</span><br><span class="line">VALID_THRESH = <span class="number">0.01</span></span><br><span class="line">NMS_TOPK = <span class="number">400</span></span><br><span class="line">NMS_POSK = <span class="number">100</span></span><br><span class="line">NMS_THRESH = <span class="number">0.45</span></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    TRAINDIR = <span class="string">&#x27;/home/aistudio/work/insects/train/images&#x27;</span></span><br><span class="line">    TESTDIR = <span class="string">&#x27;/home/aistudio/work/insects/test/images&#x27;</span></span><br><span class="line">    VALIDDIR = <span class="string">&#x27;/home/aistudio/work/insects/val&#x27;</span></span><br><span class="line"></span><br><span class="line">    model = YOLOv3(num_classes=NUM_CLASSES)</span><br><span class="line">    params_file_path = <span class="string">&#x27;/home/aistudio/yolo_epoch50.pdparams&#x27;</span></span><br><span class="line">    model_state_dict = paddle.load(params_file_path)</span><br><span class="line">    model.load_dict(model_state_dict)</span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">    total_results = []</span><br><span class="line">    test_loader = test_data_loader(TESTDIR, batch_size= <span class="number">1</span>, mode=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_loader()):</span><br><span class="line">        img_name, img_data, img_scale_data = data</span><br><span class="line">        img = paddle.to_tensor(img_data)</span><br><span class="line">        img_scale = paddle.to_tensor(img_scale_data)</span><br><span class="line"></span><br><span class="line">        outputs = model.forward(img)</span><br><span class="line">        bboxes, scores = model.get_pred(outputs,</span><br><span class="line">                                 im_shape=img_scale,</span><br><span class="line">                                 anchors=ANCHORS,</span><br><span class="line">                                 anchor_masks=ANCHOR_MASKS,</span><br><span class="line">                                 valid_thresh = VALID_THRESH)</span><br><span class="line"></span><br><span class="line">        bboxes_data = bboxes.numpy()</span><br><span class="line">        scores_data = scores.numpy()</span><br><span class="line">        result = multiclass_nms(bboxes_data, scores_data,</span><br><span class="line">                      score_thresh=VALID_THRESH, </span><br><span class="line">                      nms_thresh=NMS_THRESH, </span><br><span class="line">                      pre_nms_topk=NMS_TOPK, </span><br><span class="line">                      pos_nms_topk=NMS_POSK)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(result)):</span><br><span class="line">            result_j = result[j]</span><br><span class="line">            img_name_j = img_name[j]</span><br><span class="line">            total_results.append([img_name_j, result_j.tolist()])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;processed &#123;&#125; pictures&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(total_results)))</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    json.dump(total_results, <span class="built_in">open</span>(<span class="string">&#x27;pred_results.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>))</span><br></pre></td></tr></table></figure><p>jsonæ–‡ä»¶ä¸­ä¿å­˜ç€æµ‹è¯•ç»“æœï¼Œæ˜¯åŒ…å«æ‰€æœ‰å›¾ç‰‡é¢„æµ‹ç»“æœçš„listï¼Œå…¶æ„æˆå¦‚ä¸‹ï¼š</p><pre><code>[[img_name, [[label, score, x1, y1, x2, y2], ..., [label, score, x1, y1, x2, y2]]],  [img_name, [[label, score, x1, y1, x2, y2], ..., [label, score, x1, y1, x2, y2]]],  ... [img_name, [[label, score, x1, y1, x2, y2],..., [label, score, x1, y1, x2, y2]]]]</code></pre><p>listä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€å¼ å›¾ç‰‡çš„é¢„æµ‹ç»“æœï¼Œlistçš„æ€»é•¿åº¦ç­‰äºå›¾ç‰‡çš„æ•°ç›®ï¼Œæ¯å¼ å›¾ç‰‡é¢„æµ‹ç»“æœçš„æ ¼å¼æ˜¯ï¼š</p><pre><code> [img_name, [[label, score, x1, y1, x2, y2],..., [label, score, x1, y1, x2, y2]]]</code></pre><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å›¾ç‰‡åç§°image_nameï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯åŒ…å«è¯¥å›¾ç‰‡æ‰€æœ‰é¢„æµ‹æ¡†çš„listï¼Œ é¢„æµ‹æ¡†åˆ—è¡¨ï¼š</p><pre><code> [[label, score, x1, x2, y1, y2],..., [label, score, x1, y1, x2, y2]]</code></pre><p>é¢„æµ‹æ¡†åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ [label, score, x1, y1, x2, y2]æè¿°äº†ä¸€ä¸ªé¢„æµ‹æ¡†ï¼Œlabelæ˜¯é¢„æµ‹æ¡†æ‰€å±ç±»åˆ«æ ‡ç­¾ï¼Œscoreæ˜¯é¢„æµ‹æ¡†çš„å¾—åˆ†ï¼›x1, y1, x2, y2å¯¹åº”é¢„æµ‹æ¡†å·¦ä¸Šè§’åæ ‡(x1, y1)ï¼Œå³ä¸‹è§’åæ ‡(x2, y2)ã€‚æ¯å¼ å›¾ç‰‡å¯èƒ½æœ‰å¾ˆå¤šä¸ªé¢„æµ‹æ¡†ï¼Œåˆ™å°†å…¶å…¨éƒ¨æ”¾åœ¨é¢„æµ‹æ¡†åˆ—è¡¨ä¸­ã€‚</p><h2 id="9-æ¨¡å‹æ•ˆæœåŠå¯è§†åŒ–å±•ç¤º"><a href="#9-æ¨¡å‹æ•ˆæœåŠå¯è§†åŒ–å±•ç¤º" class="headerlink" title="9.æ¨¡å‹æ•ˆæœåŠå¯è§†åŒ–å±•ç¤º"></a><strong>9.æ¨¡å‹æ•ˆæœåŠå¯è§†åŒ–å±•ç¤º</strong></h2><p>ä¸Šé¢çš„ç¨‹åºå±•ç¤ºäº†å¦‚ä½•è¯»å–æµ‹è¯•æ•°æ®é›†çš„å›¾ç‰‡ï¼Œå¹¶å°†æœ€ç»ˆç»“æœä¿å­˜åœ¨jsonæ ¼å¼çš„æ–‡ä»¶ä¸­ã€‚ä¸ºäº†æ›´ç›´è§‚çš„ç»™è¯»è€…å±•ç¤ºæ¨¡å‹æ•ˆæœï¼Œä¸‹é¢çš„ç¨‹åºæ·»åŠ äº†å¦‚ä½•è¯»å–å•å¼ å›¾ç‰‡ï¼Œå¹¶ç”»å‡ºå…¶äº§ç”Ÿçš„é¢„æµ‹æ¡†ã€‚</p><p><strong>1. åˆ›å»ºæ•°æ®è¯»å–å™¨ä»¥è¯»å–å•å¼ å›¾ç‰‡çš„æ•°æ®</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–å•å¼ æµ‹è¯•å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">single_image_data_loader</span>(<span class="params">filename, test_image_size=<span class="number">608</span>, mode=<span class="string">&#x27;test&#x27;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŠ è½½æµ‹è¯•ç”¨çš„å›¾ç‰‡ï¼Œæµ‹è¯•æ•°æ®æ²¡æœ‰groundtruthæ ‡ç­¾</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    batch_size= <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reader</span>():</span><br><span class="line">        batch_data = []</span><br><span class="line">        img_size = test_image_size</span><br><span class="line">        file_path = os.path.join(filename)</span><br><span class="line">        img = cv2.imread(file_path)</span><br><span class="line">        img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span><br><span class="line">        H = img.shape[<span class="number">0</span>]</span><br><span class="line">        W = img.shape[<span class="number">1</span>]</span><br><span class="line">        img = cv2.resize(img, (img_size, img_size))</span><br><span class="line"></span><br><span class="line">        mean = [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>]</span><br><span class="line">        std = [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]</span><br><span class="line">        mean = np.array(mean).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">        std = np.array(std).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">        out_img = (img / <span class="number">255.0</span> - mean) / std</span><br><span class="line">        out_img = out_img.astype(<span class="string">&#x27;float32&#x27;</span>).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">        img = out_img <span class="comment">#np.transpose(out_img, (2,0,1))</span></span><br><span class="line">        im_shape = [H, W]</span><br><span class="line"></span><br><span class="line">        batch_data.append((image_name.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>], img, im_shape))</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(batch_data) == batch_size:</span><br><span class="line">            <span class="keyword">yield</span> make_test_array(batch_data)</span><br><span class="line">            batch_data = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> reader</span><br></pre></td></tr></table></figure><p><strong>2. å®šä¹‰ç»˜åˆ¶é¢„æµ‹æ¡†çš„ç”»å›¾å‡½æ•°</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ç”»å›¾å‡½æ•°</span></span><br><span class="line">INSECT_NAMES = [<span class="string">&#x27;Boerner&#x27;</span>, <span class="string">&#x27;Leconte&#x27;</span>, <span class="string">&#x27;Linnaeus&#x27;</span>, </span><br><span class="line">                <span class="string">&#x27;acuminatus&#x27;</span>, <span class="string">&#x27;armandi&#x27;</span>, <span class="string">&#x27;coleoptera&#x27;</span>, <span class="string">&#x27;linnaeus&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç”»çŸ©å½¢æ¡†çš„å‡½æ•° </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_rectangle</span>(<span class="params">currentAxis, bbox, edgecolor = <span class="string">&#x27;k&#x27;</span>, facecolor = <span class="string">&#x27;y&#x27;</span>, fill=<span class="literal">False</span>, linestyle=<span class="string">&#x27;-&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># currentAxisï¼Œåæ ‡è½´ï¼Œé€šè¿‡plt.gca()è·å–</span></span><br><span class="line">    <span class="comment"># bboxï¼Œè¾¹ç•Œæ¡†ï¼ŒåŒ…å«å››ä¸ªæ•°å€¼çš„listï¼Œ [x1, y1, x2, y2]</span></span><br><span class="line">    <span class="comment"># edgecolorï¼Œè¾¹æ¡†çº¿æ¡é¢œè‰²</span></span><br><span class="line">    <span class="comment"># facecolorï¼Œå¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment"># fill, æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment"># linestypeï¼Œè¾¹æ¡†çº¿å‹</span></span><br><span class="line">    <span class="comment"># patches.Rectangleéœ€è¦ä¼ å…¥å·¦ä¸Šè§’åæ ‡ã€çŸ©å½¢åŒºåŸŸçš„å®½åº¦ã€é«˜åº¦ç­‰å‚æ•°</span></span><br><span class="line">    rect=patches.Rectangle((bbox[<span class="number">0</span>], bbox[<span class="number">1</span>]), bbox[<span class="number">2</span>]-bbox[<span class="number">0</span>]+<span class="number">1</span>, bbox[<span class="number">3</span>]-bbox[<span class="number">1</span>]+<span class="number">1</span>, linewidth=<span class="number">1</span>,</span><br><span class="line">                           edgecolor=edgecolor,facecolor=facecolor,fill=fill, linestyle=linestyle)</span><br><span class="line">    currentAxis.add_patch(rect)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç»˜åˆ¶é¢„æµ‹ç»“æœçš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_results</span>(<span class="params">result, filename, draw_thresh=<span class="number">0.5</span></span>):</span><br><span class="line">    plt.figure(figsize=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line">    im = imread(filename)</span><br><span class="line">    plt.imshow(im)</span><br><span class="line">    currentAxis=plt.gca()</span><br><span class="line">    colors = [<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;purple&#x27;</span>]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">        box = item[<span class="number">2</span>:<span class="number">6</span>]</span><br><span class="line">        label = <span class="built_in">int</span>(item[<span class="number">0</span>])</span><br><span class="line">        name = INSECT_NAMES[label]</span><br><span class="line">        <span class="keyword">if</span> item[<span class="number">1</span>] &gt; draw_thresh:</span><br><span class="line">            draw_rectangle(currentAxis, box, edgecolor = colors[label])</span><br><span class="line">            plt.text(box[<span class="number">0</span>], box[<span class="number">1</span>], name, fontsize=<span class="number">12</span>, color=colors[label])</span><br></pre></td></tr></table></figure><p><strong>3. è¯»å–ä¸é¢„æµ‹å¯è§†åŒ–</strong></p><p>ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„single_image_data_loaderå‡½æ•°è¯»å–æŒ‡å®šçš„å›¾ç‰‡ï¼Œè¾“å…¥ç½‘ç»œå¹¶è®¡ç®—å‡ºé¢„æµ‹æ¡†å’Œå¾—åˆ†ï¼Œç„¶åä½¿ç”¨å¤šåˆ†ç±»éæå¤§å€¼æŠ‘åˆ¶æ¶ˆé™¤å†—ä½™çš„æ¡†ã€‚å°†æœ€ç»ˆç»“æœç”»å›¾å±•ç¤ºå‡ºæ¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">ANCHORS = [<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">45</span>, <span class="number">59</span>, <span class="number">119</span>, <span class="number">116</span>, <span class="number">90</span>, <span class="number">156</span>, <span class="number">198</span>, <span class="number">373</span>, <span class="number">326</span>]</span><br><span class="line">ANCHOR_MASKS = [[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]]</span><br><span class="line">VALID_THRESH = <span class="number">0.01</span></span><br><span class="line">NMS_TOPK = <span class="number">400</span></span><br><span class="line">NMS_POSK = <span class="number">100</span></span><br><span class="line">NMS_THRESH = <span class="number">0.45</span></span><br><span class="line"></span><br><span class="line">NUM_CLASSES = <span class="number">7</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    image_name = <span class="string">&#x27;/home/aistudio/work/insects/test/images/1880.jpeg&#x27;</span></span><br><span class="line">    params_file_path = <span class="string">&#x27;/home/aistudio/yolo_epoch50.pdparams&#x27;</span></span><br><span class="line"></span><br><span class="line">    model = YOLOv3(num_classes=NUM_CLASSES)</span><br><span class="line">    model_state_dict = paddle.load(params_file_path)</span><br><span class="line">    model.load_dict(model_state_dict)</span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">    total_results = []</span><br><span class="line">    test_loader = single_image_data_loader(image_name, mode=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_loader()):</span><br><span class="line">        img_name, img_data, img_scale_data = data</span><br><span class="line">        img = paddle.to_tensor(img_data)</span><br><span class="line">        img_scale = paddle.to_tensor(img_scale_data)</span><br><span class="line"></span><br><span class="line">        outputs = model.forward(img)</span><br><span class="line">        bboxes, scores = model.get_pred(outputs,</span><br><span class="line">                                 im_shape=img_scale,</span><br><span class="line">                                 anchors=ANCHORS,</span><br><span class="line">                                 anchor_masks=ANCHOR_MASKS,</span><br><span class="line">                                 valid_thresh = VALID_THRESH)</span><br><span class="line"></span><br><span class="line">        bboxes_data = bboxes.numpy()</span><br><span class="line">        scores_data = scores.numpy()</span><br><span class="line">        results = multiclass_nms(bboxes_data, scores_data,</span><br><span class="line">                      score_thresh=VALID_THRESH, </span><br><span class="line">                      nms_thresh=NMS_THRESH, </span><br><span class="line">                      pre_nms_topk=NMS_TOPK, </span><br><span class="line">                      pos_nms_topk=NMS_POSK)</span><br><span class="line"></span><br><span class="line">result = results[<span class="number">0</span>]</span><br><span class="line">draw_results(result, image_name, draw_thresh=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/74.png" alt="png"></p><p>é€šè¿‡ä¸Šé¢çš„ç¨‹åºï¼Œæ¸…æ™°çš„ç»™è¯»è€…å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨è®­ç»ƒå¥½çš„æƒé‡ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œé¢„æµ‹å¹¶å°†ç»“æœå¯è§†åŒ–ã€‚æœ€ç»ˆè¾“å‡ºçš„å›¾ç‰‡ä¸Šï¼Œæ£€æµ‹å‡ºäº†æ¯ä¸ªæ˜†è™«ï¼Œæ ‡å‡ºäº†å®ƒä»¬çš„è¾¹ç•Œæ¡†å’Œå…·ä½“ç±»åˆ«ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ é«˜çº§_è®¡ç®—æœºè§†è§‰ä¹‹ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 6.2-YOLOv3å®ç°AIè¯†è™«ï¼ˆä¸Šï¼‰</title>
      <link href="/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.2-YOLOv3%E5%AE%9E%E7%8E%B0AI%E8%AF%86%E8%99%AB%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
      <url>/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.2-YOLOv3%E5%AE%9E%E7%8E%B0AI%E8%AF%86%E8%99%AB%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="æ—ä¸šç—…è™«å®³æ•°æ®é›†å’Œæ•°æ®é¢„å¤„ç†æ–¹æ³•ä»‹ç»"><a href="#æ—ä¸šç—…è™«å®³æ•°æ®é›†å’Œæ•°æ®é¢„å¤„ç†æ–¹æ³•ä»‹ç»" class="headerlink" title="æ—ä¸šç—…è™«å®³æ•°æ®é›†å’Œæ•°æ®é¢„å¤„ç†æ–¹æ³•ä»‹ç»"></a><strong>æ—ä¸šç—…è™«å®³æ•°æ®é›†å’Œæ•°æ®é¢„å¤„ç†æ–¹æ³•ä»‹ç»</strong></h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œå°†ä½¿ç”¨ç™¾åº¦ä¸æ—ä¸šå¤§å­¦åˆä½œå¼€å‘çš„æ—ä¸šç—…è™«å®³é˜²æ²»é¡¹ç›®ä¸­ç”¨åˆ°æ˜†è™«æ•°æ®é›†ã€‚<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTEzODA5MA==&idx=1&mid=2247486145&scene=21&sn=e51b1cb266b74bbf900e0d63d1dbb24f#wechat_redirect">[äººå·¥æ™ºèƒ½æµªæ½®ä¸­çš„â€œè™«è™«ç‰¹å·¥é˜Ÿâ€]</a><br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/516ed89a765b497b9c338077652b96392cd5079e2f764235990c2173ee7c37bf" width = "600"></center><center><br>å›¾1ï¼šé¡¹ç›®æ•°æ®é›†é¢„è§ˆ </br></center><p><br></br></p><h2 id="1-è¯»å–AIè¯†è™«æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯"><a href="#1-è¯»å–AIè¯†è™«æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯" class="headerlink" title="1 è¯»å–AIè¯†è™«æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯"></a><strong>1 è¯»å–AIè¯†è™«æ•°æ®é›†æ ‡æ³¨ä¿¡æ¯</strong></h2><p>AIè¯†è™«æ•°æ®é›†ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>è¯¥æ•°æ®é›†æä¾›äº†<code>2183</code>å¼ å›¾ç‰‡ï¼Œå…¶ä¸­è®­ç»ƒé›†<code>1693</code>å¼ ï¼ŒéªŒè¯é›†<code>245</code>å¼ ï¼Œæµ‹è¯•é›†<code>245</code>å¼ ï¼›</li><li>åŒ…å«7ç§æ˜†è™«ï¼Œåˆ†åˆ«æ˜¯<code>Boernerã€Leconteã€Linnaeusã€acuminatusã€armandiã€coleoptera</code>å’Œ<code>linnaeus</code>ï¼›</li><li>åŒ…å«äº†<code>å›¾ç‰‡ï¼ˆimagesï¼‰</code>å’Œ<code>æ ‡æ³¨ï¼ˆAnnotations/xmlsï¼‰</code>ï¼Œæ¥ä¸‹æ¥å…ˆå°†æ•°æ®è§£å‹ï¼Œå°†è§£å‹åçš„æ•°æ®å­˜æ”¾åœ¨ <code>insects</code> ç›®å½•ä¸‹ã€‚</li></ul><h3 id="1ï¼‰è§£å‹æ•°æ®é›†æ–‡ä»¶"><a href="#1ï¼‰è§£å‹æ•°æ®é›†æ–‡ä»¶" class="headerlink" title="1ï¼‰è§£å‹æ•°æ®é›†æ–‡ä»¶"></a><strong>1ï¼‰è§£å‹æ•°æ®é›†æ–‡ä»¶</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹æ•°æ®è„šæœ¬ï¼Œå°†æ–‡ä»¶è§£å‹åˆ°workç›®å½•ä¸‹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹è§£å‹......&#x27;</span>)</span><br><span class="line">!unzip  -o -q -d  /home/aistudio/work /home/aistudio/data/data170339/insects.<span class="built_in">zip</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;è§£å‹å®Œæˆ&#x27;</span>)</span><br></pre></td></tr></table></figure><pre><code>å¼€å§‹è§£å‹......è§£å‹å®Œæˆ</code></pre><p>å°†æ•°æ®è§£å‹ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°insectsç›®å½•ä¸‹çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code>    insects        |---train        |         |---annotations        |         |         |---xmls        |         |                  |---100.xml        |         |                  |---101.xml        |         |                  |---...        |         |        |         |---images        |                   |---100.jpeg        |                   |---101.jpeg        |                   |---...        |        |---val        |        |---annotations        |        |         |---xmls        |        |                  |---1221.xml        |        |                  |---1277.xml        |        |                  |---...        |        |        |        |---images        |                  |---1221.jpeg        |                  |---1277.jpeg        |                  |---...        |        |---test                 |---images                           |---1833.jpeg                           |---1838.jpeg                           |---...</code></pre><hr><p>insectsåŒ…å«trainã€valå’Œtestä¸‰ä¸ªæ–‡ä»¶å¤¹ã€‚<code>train/annotations/xmls</code>ç›®å½•ä¸‹å­˜æ”¾ç€å›¾ç‰‡çš„æ ‡æ³¨ã€‚æ¯ä¸ª xml æ–‡ä»¶æ˜¯å¯¹ä¸€å¼ å›¾ç‰‡çš„è¯´æ˜ï¼ŒåŒ…æ‹¬å›¾ç‰‡å°ºå¯¸ã€åŒ…å«çš„æ˜†è™«åç§°ã€åœ¨å›¾ç‰‡ä¸Šå‡ºç°çš„ä½ç½®ç­‰ä¿¡æ¯ã€‚</p><p>ä¸‹é¢æ˜¯æ¯ä¸€ä¸ª<code>xml</code>æ–‡ä»¶ä¸­çš„å…·ä½“å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;annotation&gt;</span><br><span class="line">        &lt;folder&gt;åˆ˜éœéœ&lt;/folder&gt;</span><br><span class="line">        &lt;filename&gt;100.jpeg&lt;/filename&gt;                   # æ–‡ä»¶å</span><br><span class="line">        &lt;path&gt;/home/fion/æ¡Œé¢/åˆ˜éœéœ/100.jpeg&lt;/path&gt;</span><br><span class="line">        &lt;source&gt;                                        # å›¾åƒæ¥æºï¼ˆä¸é‡è¦ï¼‰</span><br><span class="line">                &lt;database&gt;Unknown&lt;/database&gt;</span><br><span class="line">        &lt;/source&gt;</span><br><span class="line">        &lt;size&gt;                                          # å›¾åƒå°ºå¯¸ï¼ˆé•¿å®½ä»¥åŠé€šé“æ•°ï¼‰</span><br><span class="line">                &lt;width&gt;1336&lt;/width&gt;</span><br><span class="line">                &lt;height&gt;1336&lt;/height&gt;</span><br><span class="line">                &lt;depth&gt;3&lt;/depth&gt;</span><br><span class="line">        &lt;/size&gt;</span><br><span class="line">        &lt;segmented&gt;0&lt;/segmented&gt;                        # æ˜¯å¦ç”¨äºåˆ†å‰²</span><br><span class="line">        &lt;object&gt;                                        # æ£€æµ‹åˆ°çš„ç‰©ä½“</span><br><span class="line">                &lt;name&gt;Boerner&lt;/name&gt;                    # ç‰©ä½“ç±»åˆ«</span><br><span class="line">                &lt;pose&gt;Unspecified&lt;/pose&gt;                # æ‹æ‘„è§’åº¦</span><br><span class="line">                &lt;truncated&gt;0&lt;/truncated&gt;                # æ˜¯å¦è¢«æˆªæ–­ï¼ˆ0è¡¨ç¤ºå®Œæ•´ï¼‰</span><br><span class="line">                &lt;difficult&gt;0&lt;/difficult&gt;                # ç›®æ ‡æ˜¯å¦éš¾ä»¥è¯†åˆ«ï¼ˆ0è¡¨ç¤ºå®¹æ˜“è¯†åˆ«ï¼‰</span><br><span class="line">                &lt;bndbox&gt;                                # bounding-boxï¼ˆåŒ…å«å·¦ä¸‹è§’å’Œå³ä¸Šè§’xyåæ ‡ï¼‰</span><br><span class="line">                        &lt;xmin&gt;500&lt;/xmin&gt;</span><br><span class="line">                        &lt;ymin&gt;893&lt;/ymin&gt;</span><br><span class="line">                        &lt;xmax&gt;656&lt;/xmax&gt;</span><br><span class="line">                        &lt;ymax&gt;966&lt;/ymax&gt;</span><br><span class="line">                &lt;/bndbox&gt;</span><br><span class="line">        &lt;/object&gt;</span><br><span class="line">        &lt;object&gt;                                        # æ£€æµ‹åˆ°å¤šä¸ªç‰©ä½“</span><br><span class="line">                &lt;name&gt;Leconte&lt;/name&gt;</span><br><span class="line">                &lt;pose&gt;Unspecified&lt;/pose&gt;</span><br><span class="line">                &lt;truncated&gt;0&lt;/truncated&gt;</span><br><span class="line">                &lt;difficult&gt;0&lt;/difficult&gt;</span><br><span class="line">                &lt;bndbox&gt;</span><br><span class="line">                        &lt;xmin&gt;622&lt;/xmin&gt;</span><br><span class="line">                        &lt;ymin&gt;490&lt;/ymin&gt;</span><br><span class="line">                        &lt;xmax&gt;756&lt;/xmax&gt;</span><br><span class="line">                        &lt;ymax&gt;610&lt;/ymax&gt;</span><br><span class="line">                &lt;/bndbox&gt;</span><br><span class="line">        &lt;/object&gt;</span><br><span class="line">        &lt;object&gt;</span><br><span class="line">                &lt;name&gt;armandi&lt;/name&gt;</span><br><span class="line">                &lt;pose&gt;Unspecified&lt;/pose&gt;</span><br><span class="line">                &lt;truncated&gt;0&lt;/truncated&gt;</span><br><span class="line">                &lt;difficult&gt;0&lt;/difficult&gt;</span><br><span class="line">                &lt;bndbox&gt;</span><br><span class="line">                        &lt;xmin&gt;432&lt;/xmin&gt;</span><br><span class="line">                        &lt;ymin&gt;663&lt;/ymin&gt;</span><br><span class="line">                        &lt;xmax&gt;517&lt;/xmax&gt;</span><br><span class="line">                        &lt;ymax&gt;729&lt;/ymax&gt;</span><br><span class="line">                &lt;/bndbox&gt;</span><br><span class="line">        &lt;/object&gt;</span><br><span class="line">        &lt;object&gt;</span><br><span class="line">                &lt;name&gt;coleoptera&lt;/name&gt;</span><br><span class="line">                &lt;pose&gt;Unspecified&lt;/pose&gt;</span><br><span class="line">                &lt;truncated&gt;0&lt;/truncated&gt;</span><br><span class="line">                &lt;difficult&gt;0&lt;/difficult&gt;</span><br><span class="line">                &lt;bndbox&gt;</span><br><span class="line">                        &lt;xmin&gt;624&lt;/xmin&gt;</span><br><span class="line">                        &lt;ymin&gt;685&lt;/ymin&gt;</span><br><span class="line">                        &lt;xmax&gt;697&lt;/xmax&gt;</span><br><span class="line">                        &lt;ymax&gt;771&lt;/ymax&gt;</span><br><span class="line">                &lt;/bndbox&gt;</span><br><span class="line">        &lt;/object&gt;</span><br><span class="line">        &lt;object&gt;</span><br><span class="line">                &lt;name&gt;linnaeus&lt;/name&gt;</span><br><span class="line">                &lt;pose&gt;Unspecified&lt;/pose&gt;</span><br><span class="line">                &lt;truncated&gt;0&lt;/truncated&gt;</span><br><span class="line">                &lt;difficult&gt;0&lt;/difficult&gt;</span><br><span class="line">                &lt;bndbox&gt;</span><br><span class="line">                        &lt;xmin&gt;783&lt;/xmin&gt;</span><br><span class="line">                        &lt;ymin&gt;700&lt;/ymin&gt;</span><br><span class="line">                        &lt;xmax&gt;856&lt;/xmax&gt;</span><br><span class="line">                        &lt;ymax&gt;802&lt;/ymax&gt;</span><br><span class="line">                &lt;/bndbox&gt;</span><br><span class="line">        &lt;/object&gt;</span><br><span class="line">&lt;/annotation&gt;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨PILåº“è¯»å–å›¾ç‰‡ï¼Œå¹¶è½¬ä¸ºnumpy.arrayçš„æ ¼å¼</span></span><br><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">&#x27;work/insects/train/images/922.jpeg&#x27;</span>)</span><br><span class="line">img = np.array(img)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºè¯»å–çš„å›¾ç‰‡</span></span><br><span class="line">plt.figure(figsize=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line">plt.imshow(img)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/64.png" alt="png"></p><p>ä¸Šé¢åˆ—å‡ºçš„xmlæ–‡ä»¶ä¸­çš„ä¸»è¦å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li><p><code>size</code>ï¼šå›¾ç‰‡å°ºå¯¸ã€‚</p></li><li><p><code>object</code>ï¼šå›¾ç‰‡ä¸­åŒ…å«çš„ç‰©ä½“ï¼Œä¸€å¼ å›¾ç‰‡å¯èƒ½ä¸­åŒ…å«å¤šä¸ªç‰©ä½“ã€‚</p></li><li><p><code>name</code>ï¼šæ˜†è™«åç§°ï¼›</p></li><li><p><code>bndbox</code>ï¼šç‰©ä½“çœŸå®æ¡†ã€‚</p></li></ul><h3 id="2ï¼‰è½¬åŒ–æ•°å­—æ ‡ç­¾"><a href="#2ï¼‰è½¬åŒ–æ•°å­—æ ‡ç­¾" class="headerlink" title="2ï¼‰è½¬åŒ–æ•°å­—æ ‡ç­¾"></a><strong>2ï¼‰è½¬åŒ–æ•°å­—æ ‡ç­¾</strong></h3><p>ä¸‹é¢æˆ‘ä»¬å°†ä»æ•°æ®é›†ä¸­è¯»å–xmlæ–‡ä»¶ï¼Œå°†æ¯å¼ å›¾ç‰‡çš„æ ‡æ³¨ä¿¡æ¯è¯»å–å‡ºæ¥ã€‚åœ¨è¯»å–å…·ä½“çš„æ ‡æ³¨æ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå®Œæˆä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å°†æ˜†è™«çš„ç±»åˆ«åå­—ï¼ˆå­—ç¬¦ä¸²ï¼‰è½¬åŒ–æˆæ•°å­—è¡¨ç¤ºçš„ç±»åˆ«ã€‚å› ä¸ºç¥ç»ç½‘ç»œé‡Œé¢è®¡ç®—æ—¶éœ€è¦çš„è¾“å…¥ç±»å‹æ˜¯æ•°å€¼å‹çš„ï¼Œæ‰€ä»¥éœ€è¦å°†å­—ç¬¦ä¸²è¡¨ç¤ºçš„ç±»åˆ«è½¬åŒ–æˆå…·ä½“çš„æ•°å­—ã€‚</p><p>æ˜†è™«ç±»åˆ«åç§°çš„åˆ—è¡¨æ˜¯ï¼š[â€˜Boernerâ€™, â€˜Leconteâ€™, â€˜Linnaeusâ€™, â€˜acuminatusâ€™, â€˜armandiâ€™, â€˜coleopteraâ€™, â€˜linnaeusâ€™]ï¼Œè¿™é‡Œæˆ‘ä»¬çº¦å®šæ­¤åˆ—è¡¨ä¸­ï¼šâ€™Boernerâ€™å¯¹åº”ç±»åˆ«0ï¼Œâ€™Leconteâ€™å¯¹åº”ç±»åˆ«1ï¼Œâ€¦ï¼Œâ€™linnaeusâ€™å¯¹åº”ç±»åˆ«6ã€‚ä½¿ç”¨ä¸‹é¢çš„ç¨‹åºå¯ä»¥å¾—åˆ°è¡¨ç¤ºåç§°å­—ç¬¦ä¸²å’Œæ•°å­—ç±»åˆ«ä¹‹é—´æ˜ å°„å…³ç³»çš„å­—å…¸ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">INSECT_NAMES = [<span class="string">&#x27;Boerner&#x27;</span>, <span class="string">&#x27;Leconte&#x27;</span>, <span class="string">&#x27;Linnaeus&#x27;</span>, </span><br><span class="line">                <span class="string">&#x27;acuminatus&#x27;</span>, <span class="string">&#x27;armandi&#x27;</span>, <span class="string">&#x27;coleoptera&#x27;</span>, <span class="string">&#x27;linnaeus&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_insect_names</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    return a dict, as following,</span></span><br><span class="line"><span class="string">        &#123;&#x27;Boerner&#x27;: 0,</span></span><br><span class="line"><span class="string">         &#x27;Leconte&#x27;: 1,</span></span><br><span class="line"><span class="string">         &#x27;Linnaeus&#x27;: 2, </span></span><br><span class="line"><span class="string">         &#x27;acuminatus&#x27;: 3,</span></span><br><span class="line"><span class="string">         &#x27;armandi&#x27;: 4,</span></span><br><span class="line"><span class="string">         &#x27;coleoptera&#x27;: 5,</span></span><br><span class="line"><span class="string">         &#x27;linnaeus&#x27;: 6</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    It can map the insect name into an integer label.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    insect_category2id = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(INSECT_NAMES):</span><br><span class="line">        insect_category2id[item] = i <span class="comment"># æ„å»ºé”®å€¼å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> insect_category2id</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cname2cid = get_insect_names()</span><br><span class="line">cname2cid</span><br></pre></td></tr></table></figure><pre><code>&#123;&#39;Boerner&#39;: 0, &#39;Leconte&#39;: 1, &#39;Linnaeus&#39;: 2, &#39;acuminatus&#39;: 3, &#39;armandi&#39;: 4, &#39;coleoptera&#39;: 5, &#39;linnaeus&#39;: 6&#125;</code></pre><p>è°ƒç”¨get_insect_nameså‡½æ•°è¿”å›ä¸€ä¸ªdictï¼Œæè¿°äº†æ˜†è™«åç§°å’Œæ•°å­—ç±»åˆ«ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p><h3 id="3ï¼‰è½¬åŒ–æ ‡æ³¨ä¿¡æ¯"><a href="#3ï¼‰è½¬åŒ–æ ‡æ³¨ä¿¡æ¯" class="headerlink" title="3ï¼‰è½¬åŒ–æ ‡æ³¨ä¿¡æ¯"></a><strong>3ï¼‰è½¬åŒ–æ ‡æ³¨ä¿¡æ¯</strong></h3><p>ä¸‹é¢çš„ç¨‹åºä»<code>annotations/xml</code>ç›®å½•ä¸‹é¢è¯»å–æ‰€æœ‰æ–‡ä»¶æ ‡æ³¨ä¿¡æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">filenames = os.listdir(os.path.join(<span class="string">&#x27;/home/aistudio/work/insects/train&#x27;</span>, <span class="string">&#x27;annotations&#x27;</span>, <span class="string">&#x27;xmls&#x27;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filenames[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><pre><code>&#39;2220.xml&#39;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_annotations</span>(<span class="params">cname2cid, datadir</span>):</span><br><span class="line">    filenames = os.listdir(os.path.join(datadir, <span class="string">&#x27;annotations&#x27;</span>, <span class="string">&#x27;xmls&#x27;</span>))</span><br><span class="line">    records = []</span><br><span class="line">    ct = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> fname <span class="keyword">in</span> filenames:</span><br><span class="line">        fid = fname.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>] <span class="comment"># åºå·</span></span><br><span class="line">        fpath = os.path.join(datadir, <span class="string">&#x27;annotations&#x27;</span>, <span class="string">&#x27;xmls&#x27;</span>, fname) <span class="comment"># è·¯å¾„</span></span><br><span class="line">        img_file = os.path.join(datadir, <span class="string">&#x27;images&#x27;</span>, fid + <span class="string">&#x27;.jpeg&#x27;</span>) <span class="comment"># åºå·--&gt;å›¾ç‰‡</span></span><br><span class="line">        tree = ET.parse(fpath) <span class="comment"># è¯»å–xmlæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> tree.find(<span class="string">&#x27;id&#x27;</span>) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            im_id = np.array([ct])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            im_id = np.array([<span class="built_in">int</span>(tree.find(<span class="string">&#x27;id&#x27;</span>).text)])</span><br><span class="line"></span><br><span class="line">        objs = tree.findall(<span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">        im_w = <span class="built_in">float</span>(tree.find(<span class="string">&#x27;size&#x27;</span>).find(<span class="string">&#x27;width&#x27;</span>).text)</span><br><span class="line">        im_h = <span class="built_in">float</span>(tree.find(<span class="string">&#x27;size&#x27;</span>).find(<span class="string">&#x27;height&#x27;</span>).text)</span><br><span class="line">        gt_bbox = np.zeros((<span class="built_in">len</span>(objs), <span class="number">4</span>), dtype=np.float32)</span><br><span class="line">        gt_class = np.zeros((<span class="built_in">len</span>(objs), ), dtype=np.int32)</span><br><span class="line">        is_crowd = np.zeros((<span class="built_in">len</span>(objs), ), dtype=np.int32)</span><br><span class="line">        difficult = np.zeros((<span class="built_in">len</span>(objs), ), dtype=np.int32)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i, obj <span class="keyword">in</span> <span class="built_in">enumerate</span>(objs):</span><br><span class="line">            cname = obj.find(<span class="string">&#x27;name&#x27;</span>).text</span><br><span class="line">            gt_class[i] = cname2cid[cname]</span><br><span class="line">            _difficult = <span class="built_in">int</span>(obj.find(<span class="string">&#x27;difficult&#x27;</span>).text)</span><br><span class="line">            x1 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;xmin&#x27;</span>).text)</span><br><span class="line">            y1 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;ymin&#x27;</span>).text)</span><br><span class="line">            x2 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;xmax&#x27;</span>).text)</span><br><span class="line">            y2 = <span class="built_in">float</span>(obj.find(<span class="string">&#x27;bndbox&#x27;</span>).find(<span class="string">&#x27;ymax&#x27;</span>).text)</span><br><span class="line">            x1 = <span class="built_in">max</span>(<span class="number">0</span>, x1)</span><br><span class="line">            y1 = <span class="built_in">max</span>(<span class="number">0</span>, y1)</span><br><span class="line">            x2 = <span class="built_in">min</span>(im_w - <span class="number">1</span>, x2)</span><br><span class="line">            y2 = <span class="built_in">min</span>(im_h - <span class="number">1</span>, y2)</span><br><span class="line">            <span class="comment"># è¿™é‡Œå°†åŸäºŒç‚¹è¡¨ç¤ºè½¬æ¢ä¸ºxywhæ ¼å¼ï¼Œä½¿ç”¨xywhæ ¼å¼æ¥è¡¨ç¤ºç›®æ ‡ç‰©ä½“çœŸå®æ¡†</span></span><br><span class="line">            gt_bbox[i] = [(x1+x2)/<span class="number">2.0</span> , (y1+y2)/<span class="number">2.0</span>, x2-x1+<span class="number">1.</span>, y2-y1+<span class="number">1.</span>]</span><br><span class="line">            is_crowd[i] = <span class="number">0</span></span><br><span class="line">            difficult[i] = _difficult</span><br><span class="line"></span><br><span class="line">        voc_rec = &#123;</span><br><span class="line">            <span class="string">&#x27;im_file&#x27;</span>: img_file,</span><br><span class="line">            <span class="string">&#x27;im_id&#x27;</span>: im_id,</span><br><span class="line">            <span class="string">&#x27;h&#x27;</span>: im_h,</span><br><span class="line">            <span class="string">&#x27;w&#x27;</span>: im_w,</span><br><span class="line">            <span class="string">&#x27;is_crowd&#x27;</span>: is_crowd,</span><br><span class="line">            <span class="string">&#x27;gt_class&#x27;</span>: gt_class,</span><br><span class="line">            <span class="string">&#x27;gt_bbox&#x27;</span>: gt_bbox,</span><br><span class="line">            <span class="string">&#x27;gt_poly&#x27;</span>: [],</span><br><span class="line">            <span class="string">&#x27;difficult&#x27;</span>: difficult</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(objs) != <span class="number">0</span>:</span><br><span class="line">            records.append(voc_rec)</span><br><span class="line">        ct += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> records</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TRAINDIR = <span class="string">&#x27;/home/aistudio/work/insects/train&#x27;</span></span><br><span class="line">TESTDIR = <span class="string">&#x27;/home/aistudio/work/insects/test&#x27;</span></span><br><span class="line">VALIDDIR = <span class="string">&#x27;/home/aistudio/work/insects/val&#x27;</span></span><br><span class="line">cname2cid = get_insect_names()</span><br><span class="line">records = get_annotations(cname2cid, TRAINDIR)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(records))</span><br><span class="line">records[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><pre><code>1693&#123;&#39;im_file&#39;: &#39;/home/aistudio/work/insects/train/images/1194.jpeg&#39;, &#39;im_id&#39;: array([0]), &#39;h&#39;: 1234.0, &#39;w&#39;: 1234.0, &#39;is_crowd&#39;: array([0, 0, 0, 0, 0, 0, 0], dtype=int32), &#39;gt_class&#39;: array([1, 1, 0, 4, 6, 3, 5], dtype=int32), &#39;gt_bbox&#39;: array([[472. , 585.5, 121. ,  72. ],        [428. , 767.5, 115. ,  82. ],        [713. , 568. , 101. , 107. ],        [583. , 390. ,  45. ,  85. ],        [573. , 853. ,  83. ,  63. ],        [655. , 481. ,  55. ,  31. ],        [722.5, 718.5,  72. ,  30. ]], dtype=float32), &#39;gt_poly&#39;: [], &#39;difficult&#39;: array([0, 0, 0, 0, 0, 0, 0], dtype=int32)&#125;</code></pre><p><code>records</code>ä¸­å¯ä»¥è¯»å–åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">voc_rec = &#123;</span><br><span class="line">    &#x27;im_file&#x27;: im_fname,         # ä¸€å¼ å›¾åƒçš„å®Œæ•´è·¯å¾„</span><br><span class="line">    &#x27;im_id&#x27;: np.array([img_id]), # ä¸€å¼ å›¾åƒçš„IDåºå·</span><br><span class="line">    &#x27;h&#x27;: im_h,                   # å›¾åƒé«˜åº¦</span><br><span class="line">    &#x27;w&#x27;: im_w,                   # å›¾åƒå®½åº¦</span><br><span class="line">    &#x27;is_crowd&#x27;: is_crowd,        # æ˜¯å¦æ˜¯ç¾¤è½å¯¹è±¡, é»˜è®¤ä¸º0 (VOCä¸­æ— æ­¤å­—æ®µ)</span><br><span class="line">    &#x27;gt_class&#x27;: gt_class,        # æ ‡æ³¨æ¡†æ ‡ç­¾åç§°çš„IDåºå·</span><br><span class="line">    &#x27;gt_bbox&#x27;: gt_bbox,          # æ ‡æ³¨æ¡†åæ ‡(xmin, ymin, xmax, ymax)</span><br><span class="line">    &#x27;gt_score&#x27;: gt_score,        # æ ‡æ³¨æ¡†ç½®ä¿¡åº¦å¾—åˆ†</span><br><span class="line">    &#x27;gt_poly&#x27;: gt_poly,          # åˆ†å‰²æ©ç ï¼Œæ­¤å­—æ®µåªåœ¨coco_recä¸­å‡ºç°ï¼Œé»˜è®¤ä¸ºNone</span><br><span class="line">    &#x27;difficult&#x27;: difficult       # æ˜¯å¦æ˜¯å›°éš¾æ ·æœ¬ï¼Œæ­¤å­—æ®µåªåœ¨voc_recä¸­å‡ºç°ï¼Œé»˜è®¤ä¸º0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ç¨‹åºï¼Œå°†æ‰€æœ‰è®­ç»ƒæ•°æ®é›†çš„æ ‡æ³¨æ•°æ®å…¨éƒ¨è¯»å–å‡ºæ¥äº†ï¼Œå­˜æ”¾åœ¨recordsåˆ—è¡¨ä¸‹é¢ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€å¼ å›¾ç‰‡çš„æ ‡æ³¨æ•°æ®ï¼ŒåŒ…å«äº†å›¾ç‰‡å­˜æ”¾åœ°å€ï¼Œå›¾ç‰‡idï¼Œå›¾ç‰‡é«˜åº¦å’Œå®½åº¦ï¼Œå›¾ç‰‡ä¸­æ‰€åŒ…å«çš„ç›®æ ‡ç‰©ä½“çš„ç§ç±»å’Œä½ç½®ã€‚</p><h2 id="2-æ•°æ®è¯»å–å’Œé¢„å¤„ç†"><a href="#2-æ•°æ®è¯»å–å’Œé¢„å¤„ç†" class="headerlink" title="2 æ•°æ®è¯»å–å’Œé¢„å¤„ç†"></a><strong>2 æ•°æ®è¯»å–å’Œé¢„å¤„ç†</strong></h2><p>æ•°æ®é¢„å¤„ç†æ˜¯è®­ç»ƒç¥ç»ç½‘ç»œæ—¶éå¸¸é‡è¦çš„æ­¥éª¤ã€‚åˆé€‚çš„é¢„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½çš„æ”¶æ•›å¹¶é˜²æ­¢è¿‡æ‹Ÿåˆã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä»ç£ç›˜è¯»å…¥æ•°æ®ï¼Œç„¶åéœ€è¦å¯¹è¿™äº›æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œä¸ºäº†ä¿è¯ç½‘ç»œè¿è¡Œçš„é€Ÿåº¦ï¼Œé€šå¸¸è¿˜è¦å¯¹æ•°æ®é¢„å¤„ç†è¿›è¡ŒåŠ é€Ÿã€‚</p><h3 id="1ï¼‰è¯»å–å›¾ç‰‡ä¿¡æ¯"><a href="#1ï¼‰è¯»å–å›¾ç‰‡ä¿¡æ¯" class="headerlink" title="1ï¼‰è¯»å–å›¾ç‰‡ä¿¡æ¯"></a><strong>1ï¼‰è¯»å–å›¾ç‰‡ä¿¡æ¯</strong></h3><p>å‰é¢å·²ç»å°†å›¾ç‰‡çš„æ‰€æœ‰æè¿°ä¿¡æ¯ä¿å­˜åœ¨recordsä¸­äº†ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½åŒ…å«äº†ä¸€å¼ å›¾ç‰‡çš„æè¿°ï¼Œä¸‹é¢çš„ç¨‹åºå±•ç¤ºäº†å¦‚ä½•æ ¹æ®recordsé‡Œé¢çš„æè¿°è¯»å–å›¾ç‰‡åŠæ ‡æ³¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®è¯»å–</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_bbox</span>(<span class="params">gt_bbox, gt_class</span>):</span><br><span class="line">    <span class="comment"># å¯¹äºä¸€èˆ¬çš„æ£€æµ‹ä»»åŠ¡æ¥è¯´ï¼Œä¸€å¼ å›¾ç‰‡ä¸Šå¾€å¾€ä¼šæœ‰å¤šä¸ªç›®æ ‡ç‰©ä½“</span></span><br><span class="line">    <span class="comment"># è®¾ç½®å‚æ•°MAX_NUM = 50ï¼Œ å³ä¸€å¼ å›¾ç‰‡æœ€å¤šå–50ä¸ªçœŸå®æ¡†ï¼›</span></span><br><span class="line">    <span class="comment"># å¦‚æœçœŸå®æ¡†çš„æ•°ç›®å°‘äº50ä¸ªï¼Œåˆ™å°†ä¸è¶³éƒ¨åˆ†çš„gt_bbox, gt_classå’Œgt_scoreçš„å„é¡¹æ•°å€¼å…¨è®¾ç½®ä¸º0</span></span><br><span class="line">    MAX_NUM = <span class="number">50</span></span><br><span class="line">    gt_bbox2 = np.zeros((MAX_NUM, <span class="number">4</span>))</span><br><span class="line">    gt_class2 = np.zeros((MAX_NUM,))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(gt_bbox)):</span><br><span class="line">        gt_bbox2[i, :] = gt_bbox[i, :]</span><br><span class="line">        gt_class2[i] = gt_class[i]</span><br><span class="line">        <span class="keyword">if</span> i &gt;= MAX_NUM:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> gt_bbox2, gt_class2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_data_from_file</span>(<span class="params">record</span>):</span><br><span class="line">    im_file = record[<span class="string">&#x27;im_file&#x27;</span>]</span><br><span class="line">    h = record[<span class="string">&#x27;h&#x27;</span>]</span><br><span class="line">    w = record[<span class="string">&#x27;w&#x27;</span>]</span><br><span class="line">    is_crowd = record[<span class="string">&#x27;is_crowd&#x27;</span>]</span><br><span class="line">    gt_class = record[<span class="string">&#x27;gt_class&#x27;</span>]</span><br><span class="line">    gt_bbox = record[<span class="string">&#x27;gt_bbox&#x27;</span>]</span><br><span class="line">    difficult = record[<span class="string">&#x27;difficult&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    img = cv2.imread(im_file)</span><br><span class="line">    img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æœºå™¨æ ¡éªŒ</span></span><br><span class="line">    <span class="keyword">assert</span> img.shape[<span class="number">0</span>] == <span class="built_in">int</span>(h), \</span><br><span class="line">             <span class="string">&quot;image height of &#123;&#125; inconsistent in record(&#123;&#125;) and img file(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">               im_file, h, img.shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> img.shape[<span class="number">1</span>] == <span class="built_in">int</span>(w), \</span><br><span class="line">             <span class="string">&quot;image width of &#123;&#125; inconsistent in record(&#123;&#125;) and img file(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">               im_file, w, img.shape[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    gt_boxes, gt_labels = get_bbox(gt_bbox, gt_class)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># gt_bbox ç”¨ç›¸å¯¹å€¼</span></span><br><span class="line">    gt_boxes[:, <span class="number">0</span>] = gt_boxes[:, <span class="number">0</span>] / <span class="built_in">float</span>(w)</span><br><span class="line">    gt_boxes[:, <span class="number">1</span>] = gt_boxes[:, <span class="number">1</span>] / <span class="built_in">float</span>(h)</span><br><span class="line">    gt_boxes[:, <span class="number">2</span>] = gt_boxes[:, <span class="number">2</span>] / <span class="built_in">float</span>(w)</span><br><span class="line">    gt_boxes[:, <span class="number">3</span>] = gt_boxes[:, <span class="number">3</span>] / <span class="built_in">float</span>(h)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> img, gt_boxes, gt_labels, (h, w)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">record = records[<span class="number">0</span>]</span><br><span class="line">img, gt_boxes, gt_labels, scales = get_img_data_from_file(record)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(img.shape, gt_boxes.shape, gt_labels, scales)</span><br></pre></td></tr></table></figure><pre><code>(1234, 1234, 3) (50, 4) [1. 1. 0. 4. 6. 3. 5. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.] (1234.0, 1234.0)</code></pre><p><code>get_img_data_from_file()</code>å‡½æ•°å¯ä»¥è¿”å›å›¾ç‰‡æ•°æ®çš„æ•°æ®ï¼Œå®ƒä»¬æ˜¯å›¾åƒæ•°æ®imgï¼ŒçœŸå®æ¡†åæ ‡gt_boxesï¼ŒçœŸå®æ¡†åŒ…å«çš„ç‰©ä½“ç±»åˆ«gt_labelsï¼Œå›¾åƒå°ºå¯¸scalesã€‚</p><h3 id="2ï¼‰æ•°æ®é¢„å¤„ç†"><a href="#2ï¼‰æ•°æ®é¢„å¤„ç†" class="headerlink" title="2ï¼‰æ•°æ®é¢„å¤„ç†"></a><strong>2ï¼‰æ•°æ®é¢„å¤„ç†</strong></h3><p>åœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼Œé€šå¸¸ä¼šå¯¹å›¾åƒåšä¸€äº›éšæœºçš„å˜åŒ–ï¼Œäº§ç”Ÿç›¸ä¼¼ä½†åˆä¸å®Œå…¨ç›¸åŒçš„æ ·æœ¬ã€‚ä¸»è¦ä½œç”¨æ˜¯æ‰©å¤§è®­ç»ƒæ•°æ®é›†ï¼ŒæŠ‘åˆ¶è¿‡æ‹Ÿåˆï¼Œæå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œå¸¸ç”¨çš„æ–¹æ³•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>éšæœºæ”¹å˜äº®æš—ã€å¯¹æ¯”åº¦å’Œé¢œè‰²</li><li>éšæœºå¡«å……</li><li>éšæœºç¼©æ”¾</li><li>éšæœºç¿»è½¬</li><li>éšæœºæ‰“ä¹±çœŸå®æ¡†æ’åˆ—é¡ºåº</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰å¯è§†åŒ–å‡½æ•°ï¼Œç”¨äºå¯¹æ¯”åŸå›¾å’Œå›¾åƒå¢å¼ºçš„æ•ˆæœ</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visualize</span>(<span class="params">srcimg, img_enhance</span>):</span><br><span class="line">    plt.figure(num=<span class="number">2</span>, figsize=(<span class="number">6</span>,<span class="number">12</span>))</span><br><span class="line">    plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Src Image&#x27;</span>, color=<span class="string">&#x27;#0000FF&#x27;</span>)</span><br><span class="line">    plt.axis(<span class="string">&#x27;off&#x27;</span>) <span class="comment"># ä¸æ˜¾ç¤ºåæ ‡è½´</span></span><br><span class="line">    plt.imshow(srcimg) <span class="comment"># æ˜¾ç¤ºåŸå›¾ç‰‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹åŸå›¾åšéšæœºæ”¹å˜äº®æš—ã€å¯¹æ¯”åº¦å’Œé¢œè‰²ç­‰æ•°æ®å¢å¼º</span></span><br><span class="line">    srcimg_gtbox = records[<span class="number">0</span>][<span class="string">&#x27;gt_bbox&#x27;</span>]</span><br><span class="line">    srcimg_label = records[<span class="number">0</span>][<span class="string">&#x27;gt_class&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Enhance Image&#x27;</span>, color=<span class="string">&#x27;#0000FF&#x27;</span>)</span><br><span class="line">    plt.axis(<span class="string">&#x27;off&#x27;</span>) <span class="comment"># ä¸æ˜¾ç¤ºåæ ‡è½´</span></span><br><span class="line">    plt.imshow(img_enhance/<span class="number">255</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageEnhance</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ”¹å˜äº®æš—ã€å¯¹æ¯”åº¦å’Œé¢œè‰²ç­‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_distort</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜äº®åº¦</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">random_brightness</span>(<span class="params">img, lower=<span class="number">0.5</span>, upper=<span class="number">1.5</span></span>):</span><br><span class="line">        e = np.random.uniform(lower, upper)</span><br><span class="line">        <span class="keyword">return</span> ImageEnhance.Brightness(img).enhance(e)</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜å¯¹æ¯”åº¦</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">random_contrast</span>(<span class="params">img, lower=<span class="number">0.5</span>, upper=<span class="number">1.5</span></span>):</span><br><span class="line">        e = np.random.uniform(lower, upper)</span><br><span class="line">        <span class="keyword">return</span> ImageEnhance.Contrast(img).enhance(e)</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜é¢œè‰²</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">random_color</span>(<span class="params">img, lower=<span class="number">0.5</span>, upper=<span class="number">1.5</span></span>):</span><br><span class="line">        e = np.random.uniform(lower, upper)</span><br><span class="line">        <span class="keyword">return</span> ImageEnhance.Color(img).enhance(e)</span><br><span class="line"></span><br><span class="line">    ops = [random_brightness, random_contrast, random_color]</span><br><span class="line">    np.random.shuffle(ops)</span><br><span class="line"></span><br><span class="line">    img = Image.fromarray(img)</span><br><span class="line">    img = ops[<span class="number">0</span>](img)</span><br><span class="line">    img = ops[<span class="number">1</span>](img)</span><br><span class="line">    img = ops[<span class="number">2</span>](img)</span><br><span class="line">    img = np.asarray(img)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line">image_path = records[<span class="number">0</span>][<span class="string">&#x27;im_file&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;read image from file &#123;&#125;&quot;</span>.<span class="built_in">format</span>(image_path))</span><br><span class="line">srcimg = Image.<span class="built_in">open</span>(image_path)</span><br><span class="line"><span class="comment"># å°†PILè¯»å–çš„å›¾åƒè½¬æ¢æˆarrayç±»å‹</span></span><br><span class="line">srcimg = np.array(srcimg)</span><br><span class="line"></span><br><span class="line">img_enhance = random_distort(srcimg)</span><br><span class="line">visualize(srcimg, img_enhance)</span><br></pre></td></tr></table></figure><pre><code>read image from file /home/aistudio/work/insects/train/images/1194.jpeg</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/65.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éšæœºå¡«å……</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_expand</span>(<span class="params">img,</span></span><br><span class="line"><span class="params">                  gtboxes,</span></span><br><span class="line"><span class="params">                  max_ratio=<span class="number">4.</span>,</span></span><br><span class="line"><span class="params">                  fill=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">                  keep_ratio=<span class="literal">True</span>,</span></span><br><span class="line"><span class="params">                  thresh=<span class="number">0.5</span></span>):</span><br><span class="line">    <span class="keyword">if</span> random.random() &gt; thresh:</span><br><span class="line">        <span class="keyword">return</span> img, gtboxes</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> max_ratio &lt; <span class="number">1.0</span>:</span><br><span class="line">        <span class="keyword">return</span> img, gtboxes</span><br><span class="line"></span><br><span class="line">    h, w, c = img.shape</span><br><span class="line">    ratio_x = random.uniform(<span class="number">1</span>, max_ratio)</span><br><span class="line">    <span class="keyword">if</span> keep_ratio:</span><br><span class="line">        ratio_y = ratio_x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ratio_y = random.uniform(<span class="number">1</span>, max_ratio)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€šè¿‡ç¼©æ”¾ä¸å¹³ç§»å®ç°å¡«å……çš„ç›®çš„</span></span><br><span class="line">    oh = <span class="built_in">int</span>(h * ratio_y)</span><br><span class="line">    ow = <span class="built_in">int</span>(w * ratio_x)</span><br><span class="line">    off_x = random.randint(<span class="number">0</span>, ow - w)</span><br><span class="line">    off_y = random.randint(<span class="number">0</span>, oh - h)</span><br><span class="line"></span><br><span class="line">    out_img = np.zeros((oh, ow, c))</span><br><span class="line">    <span class="keyword">if</span> fill <span class="keyword">and</span> <span class="built_in">len</span>(fill) == c:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(c):</span><br><span class="line">            out_img[:, :, i] = fill[i] * <span class="number">255.0</span></span><br><span class="line"></span><br><span class="line">    out_img[off_y:off_y + h, off_x:off_x + w, :] = img</span><br><span class="line">    gtboxes[:, <span class="number">0</span>] = ((gtboxes[:, <span class="number">0</span>] * w) + off_x) / <span class="built_in">float</span>(ow)</span><br><span class="line">    gtboxes[:, <span class="number">1</span>] = ((gtboxes[:, <span class="number">1</span>] * h) + off_y) / <span class="built_in">float</span>(oh)</span><br><span class="line">    gtboxes[:, <span class="number">2</span>] = gtboxes[:, <span class="number">2</span>] / ratio_x</span><br><span class="line">    gtboxes[:, <span class="number">3</span>] = gtboxes[:, <span class="number">3</span>] / ratio_y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> out_img.astype(<span class="string">&#x27;uint8&#x27;</span>), gtboxes <span class="comment"># è¿”å›å¡«å……åçš„å›¾ç‰‡ä¸è¾¹ç•Œæ¡†</span></span><br><span class="line"></span><br><span class="line">srcimg_gtbox = records[<span class="number">0</span>][<span class="string">&#x27;gt_bbox&#x27;</span>]</span><br><span class="line">img_enhance, new_gtbox = random_expand(srcimg, srcimg_gtbox)</span><br><span class="line">visualize(srcimg, img_enhance)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/66.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_enhance.shape, new_gtbox</span><br></pre></td></tr></table></figure><pre><code>((3113, 3113, 3), array([[-101.2339   ,  126.889565 ,   26.098473 ,   15.52967  ],        [ -91.73983  ,  166.16049  ,   24.804335 ,   17.686567 ],        [-153.23549  ,  123.11352  ,   21.784676 ,   23.078815 ],        [-125.18484  ,   84.70569  ,    9.706043 ,   18.333637 ],        [-123.02711  ,  184.60918  ,   17.902258 ,   13.588462 ],        [-140.72058  ,  104.34115  ,   11.862942 ,    6.6863856],        [-155.28534  ,  155.58754  ,   15.52967  ,    6.470696 ]],       dtype=float32))</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éšæœºç¿»è½¬</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_flip</span>(<span class="params">img, gtboxes, thresh=<span class="number">0.5</span></span>):</span><br><span class="line">    <span class="keyword">if</span> random.random() &gt; thresh:</span><br><span class="line">        <span class="comment"># è°ƒæ•´æ­¥é•¿</span></span><br><span class="line">        img = img[:, ::-<span class="number">1</span>, :]</span><br><span class="line">        gtboxes[:, <span class="number">0</span>] = <span class="number">1.0</span> - gtboxes[:, <span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> img, gtboxes</span><br><span class="line"></span><br><span class="line">img_enhance, box_enhance = random_flip(srcimg, srcimg_gtbox)</span><br><span class="line">visualize(srcimg, img_enhance)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/67.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éšæœºæ‰“ä¹±çœŸå®æ¡†æ’åˆ—é¡ºåº</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shuffle_gtbox</span>(<span class="params">gtbox, gtlabel</span>):</span><br><span class="line">    gt = np.concatenate([gtbox, gtlabel[:, np.newaxis]], axis=<span class="number">1</span>)</span><br><span class="line">    idx = np.arange(gt.shape[<span class="number">0</span>])</span><br><span class="line">    np.random.shuffle(idx)</span><br><span class="line">    gt = gt[idx, :]</span><br><span class="line">    <span class="keyword">return</span> gt[:, :<span class="number">4</span>], gt[:, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éšæœºç¼©æ”¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_interp</span>(<span class="params">img, size, interp=<span class="literal">None</span></span>):</span><br><span class="line">    interp_method = [cv2.INTER_NEAREST,   <span class="comment"># æœ€è¿‘é‚»æ’å€¼</span></span><br><span class="line">                    cv2.INTER_LINEAR,     <span class="comment"># çº¿æ€§æ’å€¼</span></span><br><span class="line">                    cv2.INTER_AREA,       <span class="comment"># åŒºåŸŸæ’å€¼</span></span><br><span class="line">                    cv2.INTER_CUBIC,      <span class="comment"># ä¸‰æ¬¡æ ·æ¡æ’å€¼</span></span><br><span class="line">                    cv2.INTER_LANCZOS4]   <span class="comment"># LANCZOS4æ’å€¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># éšæœºé€‰æ‹©ç¼©æ”¾æ—¶çš„æ’å€¼æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> interp <span class="keyword">or</span> interp <span class="keyword">not</span> <span class="keyword">in</span> interp_method:</span><br><span class="line">        interp = interp_method[random.randint(<span class="number">0</span>, <span class="built_in">len</span>(interp_method) - <span class="number">1</span>)]</span><br><span class="line">    h, w, _ = img.shape</span><br><span class="line">    im_scale_x = size / <span class="built_in">float</span>(w)</span><br><span class="line">    im_scale_y = size / <span class="built_in">float</span>(h)</span><br><span class="line">    <span class="comment"># è°ƒæ•´å›¾åƒå¤§å°</span></span><br><span class="line">    img = cv2.resize(img, <span class="literal">None</span>, <span class="literal">None</span>, fx=im_scale_x, fy=im_scale_y, interpolation=interp)</span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line">img_enhance = random_interp(srcimg, <span class="number">640</span>)</span><br><span class="line">visualize(srcimg, img_enhance)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/68.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img.shape, img_enhance.shape</span><br></pre></td></tr></table></figure><pre><code>((1234, 1234, 3), (640, 640, 3))</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å›¾åƒå¢å¹¿æ–¹æ³•æ±‡æ€»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">image_augment</span>(<span class="params">img, gtboxes, gtlabels, size, means=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># éšæœºæ”¹å˜äº®æš—ã€å¯¹æ¯”åº¦å’Œé¢œè‰²ç­‰</span></span><br><span class="line">    img = random_distort(img)</span><br><span class="line">    <span class="comment"># éšæœºå¡«å……</span></span><br><span class="line">    img, gtboxes = random_expand(img, gtboxes, fill=means)</span><br><span class="line">    <span class="comment"># éšæœºç¼©æ”¾</span></span><br><span class="line">    img = random_interp(img, size)</span><br><span class="line">    <span class="comment"># éšæœºç¿»è½¬</span></span><br><span class="line">    img, gtboxes = random_flip(img, gtboxes)</span><br><span class="line">    <span class="comment"># éšæœºæ‰“ä¹±çœŸå®æ¡†æ’åˆ—é¡ºåº</span></span><br><span class="line">    gtboxes, gtlabels = shuffle_gtbox(gtboxes, gtlabels)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> img.astype(<span class="string">&#x27;float32&#x27;</span>), gtboxes.astype(<span class="string">&#x27;float32&#x27;</span>), gtlabels.astype(<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line"></span><br><span class="line">srcimg = Image.<span class="built_in">open</span>(records[<span class="number">0</span>][<span class="string">&#x27;im_file&#x27;</span>])</span><br><span class="line">srcimg = np.array(srcimg)</span><br><span class="line"></span><br><span class="line">srcimg_gtbox = records[<span class="number">0</span>][<span class="string">&#x27;gt_bbox&#x27;</span>]</span><br><span class="line">srcimg_label = records[<span class="number">0</span>][<span class="string">&#x27;gt_class&#x27;</span>]</span><br><span class="line">img_enhance, img_box, img_label = image_augment(srcimg, srcimg_gtbox, srcimg_label, size=<span class="number">320</span>)</span><br><span class="line">visualize(srcimg, img_enhance)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/69.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img, gt_boxes, gt_labels, scales = get_img_data_from_file(record)</span><br><span class="line">size = <span class="number">512</span></span><br><span class="line">img, gt_boxes, gt_labels = image_augment(img, gt_boxes, gt_labels, size)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(img.shape, gt_boxes.shape, gt_labels.shape)</span><br></pre></td></tr></table></figure><pre><code>(512, 512, 3) (50, 4) (50,)</code></pre><p>è¿™é‡Œå¾—åˆ°çš„imgæ•°æ®æ•°å€¼éœ€è¦è°ƒæ•´ï¼Œéœ€è¦é™¤ä»¥255ï¼Œå¹¶ä¸”å‡å»å‡å€¼å’Œæ–¹å·®ï¼Œå†å°†ç»´åº¦ä»[H, W, C]è°ƒæ•´ä¸º[C, H, W]ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–å›¾ç‰‡</span></span><br><span class="line">record = records[<span class="number">0</span>]</span><br><span class="line">image_path = record[<span class="string">&#x27;im_file&#x27;</span>]</span><br><span class="line">srcimg = Image.<span class="built_in">open</span>(image_path)</span><br><span class="line">srcimg = np.array(srcimg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®å¤„ç†</span></span><br><span class="line">img, gt_boxes, gt_labels, scales = get_img_data_from_file(record)</span><br><span class="line">size = <span class="number">512</span></span><br><span class="line">img, gt_boxes, gt_labels = image_augment(img, gt_boxes, gt_labels, size)</span><br><span class="line"><span class="comment"># æ ‡å‡†åŒ–</span></span><br><span class="line">mean = [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>]</span><br><span class="line">std = [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]</span><br><span class="line">mean = np.array(mean).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">std = np.array(std).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">img = (img / <span class="number">255.0</span> - mean) / std</span><br><span class="line">img = img.astype(<span class="string">&#x27;float32&#x27;</span>).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">srcimg.shape, img.shape</span><br></pre></td></tr></table></figure><pre><code>((1234, 1234, 3), (3, 512, 512))</code></pre><p>å°†ä¸Šé¢çš„è¿‡ç¨‹æ•´ç†æˆä¸€ä¸ª<code>get_img_data</code>å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_data</span>(<span class="params">record, size=<span class="number">640</span></span>):</span><br><span class="line">    img, gt_boxes, gt_labels, scales = get_img_data_from_file(record)</span><br><span class="line">    img, gt_boxes, gt_labels = image_augment(img, gt_boxes, gt_labels, size)</span><br><span class="line">    mean = [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>]</span><br><span class="line">    std = [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]</span><br><span class="line">    mean = np.array(mean).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">    std = np.array(std).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">    img = (img / <span class="number">255.0</span> - mean) / std</span><br><span class="line">    img = img.astype(<span class="string">&#x27;float32&#x27;</span>).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> img, gt_boxes, gt_labels, scales</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TRAINDIR = <span class="string">&#x27;/home/aistudio/work/insects/train&#x27;</span></span><br><span class="line">TESTDIR = <span class="string">&#x27;/home/aistudio/work/insects/test&#x27;</span></span><br><span class="line">VALIDDIR = <span class="string">&#x27;/home/aistudio/work/insects/val&#x27;</span></span><br><span class="line">cname2cid = get_insect_names()</span><br><span class="line">records = get_annotations(cname2cid, TRAINDIR)</span><br><span class="line"></span><br><span class="line">record = records[<span class="number">0</span>]</span><br><span class="line">img, gt_boxes, gt_labels, scales = get_img_data(record, size=<span class="number">480</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(img.shape, gt_boxes.shape, gt_labels.shape, scales)</span><br></pre></td></tr></table></figure><pre><code>(3, 480, 480) (50, 4) (50,) (1006.0, 1006.0)</code></pre><p><strong>ä½¿ç”¨é£æ¡¨é«˜å±‚APIå¿«é€Ÿå®ç°æ•°æ®å¢å¼º</strong></p><p>è¯¦ç»†å¯æŸ¥é˜…<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/Overview_cn.html#paddle-vision">paddle.vision.transforms</a>æ¨¡å—ï¼Œtransformsæ¨¡å—ä¸­æä¾›äº†æ•°åç§æ•°æ®å¢å¼ºæ–¹å¼ï¼ŒåŒ…æ‹¬äº®åº¦å¢å¼º(<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/transforms/adjust_brightness_cn.html#cn-api-vision-transforms-adjust-brightness">adjust_brightness</a>)ï¼Œå¯¹æ¯”åº¦å¢å¼º(<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/transforms/adjust_contrast_cn.html#cn-api-vision-transforms-adjust-contrast">adjust_contrast</a>)ï¼Œéšæœºè£å‰ª(<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/transforms/RandomCrop_cn.html#cn-api-vision-transforms-randomcrop">RandomCrop</a>)ç­‰ç­‰ã€‚æ›´å¤šçš„å…³äºé«˜å±‚APIçš„ä½¿ç”¨æ–¹æ³•ï¼Œè¯·ç™»å½•é£æ¡¨å®˜ç½‘ã€‚</p><p><code>paddle.vision.transforms</code>æ¨¡å—ä¸­çš„æ•°æ®å¢å¼ºä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹å›¾åƒéšæœºè£å‰ª</span></span><br><span class="line"><span class="comment"># ä»paddle.vision.transformsæ¨¡å—ä¸­importéšæœºå‰ªåˆ‡çš„API RandomCrop</span></span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> RandomCrop</span><br><span class="line"></span><br><span class="line">transform = RandomCrop(<span class="number">640</span>)</span><br><span class="line"><span class="comment"># å°†å›¾åƒè½¬æ¢ä¸ºPIL.Imageæ ¼å¼</span></span><br><span class="line">srcimg = Image.fromarray(np.array(srcimg))</span><br><span class="line">img_res = transform(srcimg)</span><br><span class="line"><span class="comment"># å¯è§†åŒ–ç»“æœ</span></span><br><span class="line">visualize(srcimg, np.array(img_res))</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/70.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹å›¾åƒéšæœºäº®åº¦å¢å¼º</span></span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> BrightnessTransform</span><br><span class="line"></span><br><span class="line">transform = BrightnessTransform(<span class="number">0.4</span>)</span><br><span class="line"><span class="comment"># å°†å›¾åƒè½¬æ¢ä¸ºPIL.Imageæ ¼å¼</span></span><br><span class="line">srcimg = Image.fromarray(np.array(srcimg))</span><br><span class="line">img_res = transform(srcimg)</span><br><span class="line"><span class="comment"># å¯è§†åŒ–ç»“æœ</span></span><br><span class="line">visualize(srcimg, np.array(img_res))</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/71.png" alt="png"></p><h3 id="3ï¼‰æ‰¹é‡æ•°æ®è¯»å–ä¸åŠ é€Ÿ"><a href="#3ï¼‰æ‰¹é‡æ•°æ®è¯»å–ä¸åŠ é€Ÿ" class="headerlink" title="3ï¼‰æ‰¹é‡æ•°æ®è¯»å–ä¸åŠ é€Ÿ"></a><strong>3ï¼‰æ‰¹é‡æ•°æ®è¯»å–ä¸åŠ é€Ÿ</strong></h3><p>ä¸Šé¢çš„ç¨‹åºå±•ç¤ºäº†å¦‚ä½•è¯»å–ä¸€å¼ å›¾ç‰‡çš„æ•°æ®å¹¶åŠ é€Ÿï¼Œä¸‹é¢çš„ä»£ç å®ç°äº†æ‰¹é‡æ•°æ®è¯»å–ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–ä¸€ä¸ªæ‰¹æ¬¡å†…æ ·æœ¬éšæœºç¼©æ”¾çš„å°ºå¯¸</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_size</span>(<span class="params">mode</span>):</span><br><span class="line">    <span class="keyword">if</span> (mode == <span class="string">&#x27;train&#x27;</span>) <span class="keyword">or</span> (mode == <span class="string">&#x27;valid&#x27;</span>):</span><br><span class="line">        inds = np.array([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br><span class="line">        ii = np.random.choice(inds)</span><br><span class="line">        img_size = <span class="number">320</span> + ii * <span class="number">32</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        img_size = <span class="number">608</span></span><br><span class="line">    <span class="keyword">return</span> img_size</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†listå½¢å¼çš„batchæ•°æ®è½¬åŒ–æˆå¤šä¸ªarrayæ„æˆçš„tuple</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_array</span>(<span class="params">batch_data</span>):</span><br><span class="line">    img_array = np.array([item[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    gt_box_array = np.array([item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    gt_labels_array = np.array([item[<span class="number">2</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">    img_scale = np.array([item[<span class="number">3</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype=<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> img_array, gt_box_array, gt_labels_array, img_scale</span><br></pre></td></tr></table></figure><p>ç”±äºæ•°æ®é¢„å¤„ç†è€—æ—¶è¾ƒé•¿ï¼Œå¯èƒ½ä¼šæˆä¸ºç½‘ç»œè®­ç»ƒé€Ÿåº¦çš„ç“¶é¢ˆï¼Œæ‰€ä»¥éœ€è¦å¯¹é¢„å¤„ç†éƒ¨åˆ†è¿›è¡Œä¼˜åŒ–ã€‚</p><p>é€šè¿‡ä½¿ç”¨é£æ¡¨æä¾›çš„ <a href="https://www.paddlepaddle.org.cn/documentation/docs/en/develop/api/paddle/io/DataLoader_en.html">paddle.io.DataLoader</a> APIä¸­çš„num_workerså‚æ•°è®¾ç½®è¿›ç¨‹æ•°é‡ï¼Œå®ç°å¤šè¿›ç¨‹è¯»å–æ•°æ®ï¼Œå…·ä½“å®ç°ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ•°æ®è¯»å–ç±»ï¼Œç»§æ‰¿Paddle.io.Dataset</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TrainDataset</span>(paddle.io.Dataset):</span><br><span class="line">    <span class="keyword">def</span>  <span class="title function_">__init__</span>(<span class="params">self, datadir, mode=<span class="string">&#x27;train&#x27;</span></span>):</span><br><span class="line">        self.datadir = datadir</span><br><span class="line">        cname2cid = get_insect_names()</span><br><span class="line">        self.records = get_annotations(cname2cid, datadir)</span><br><span class="line">        self.img_size = <span class="number">640</span>  <span class="comment"># get_img_size(mode)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        record = self.records[idx]</span><br><span class="line">        <span class="comment"># print(&quot;print: &quot;, record)</span></span><br><span class="line">        img, gt_bbox, gt_labels, im_shape = get_img_data(record, size=self.img_size)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> img, gt_bbox, gt_labels, np.array(im_shape)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.records)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®è¯»å–ç±»</span></span><br><span class="line">train_dataset = TrainDataset(TRAINDIR, mode=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨paddle.io.DataLoaderåˆ›å»ºæ•°æ®è¯»å–å™¨ï¼Œå¹¶è®¾ç½®batchsizeï¼Œè¿›ç¨‹æ•°é‡num_workersç­‰å‚æ•°</span></span><br><span class="line">train_loader = paddle.io.DataLoader(</span><br><span class="line">                                    train_dataset, </span><br><span class="line">                                    batch_size=<span class="number">2</span>, </span><br><span class="line">                                    shuffle=<span class="literal">True</span>, </span><br><span class="line">                                    num_workers=<span class="number">2</span>, </span><br><span class="line">                                    drop_last=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = paddle.io.DataLoader(train_dataset, batch_size=<span class="number">3</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">1</span>, drop_last=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img, gt_boxes, gt_labels, im_shape = <span class="built_in">next</span>(d())</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(img.shape, gt_boxes.shape, gt_labels.shape, im_shape.shape)</span><br></pre></td></tr></table></figure><pre><code>[3, 3, 640, 640] [3, 50, 4] [3, 50] [3, 2]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">im_shape</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[3, 2], dtype=float64, place=CUDAPinnedPlace, stop_gradient=True,       [[1240., 1240.],        [1240., 1240.],        [1250., 1250.]])</code></pre><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å¦‚ä½•æŸ¥çœ‹æ•°æ®é›†ä¸­çš„æ•°æ®ã€æå–æ•°æ®æ ‡æ³¨ä¿¡æ¯ã€ä»æ–‡ä»¶è¯»å–å›¾åƒå’Œæ ‡æ³¨æ•°æ®ã€å›¾åƒå¢å¹¿ã€æ‰¹é‡è¯»å–å’ŒåŠ é€Ÿç­‰è¿‡ç¨‹ï¼Œé€šè¿‡<code>paddle.io.Dataset</code>å¯ä»¥è¿”å›<code>img, gt_boxes, gt_labels, im_shape</code>ç­‰æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å°†å®ƒä»¬è¾“å…¥åˆ°ç¥ç»ç½‘ç»œï¼Œåº”ç”¨åˆ°å…·ä½“ç®—æ³•ä¸Šäº†ã€‚</p><p>åœ¨å¼€å§‹å…·ä½“çš„ç®—æ³•è®²è§£ä¹‹å‰ï¼Œå…ˆè¡¥å……ä¸€ä¸‹è¯»å–æµ‹è¯•æ•°æ®çš„ä»£ç ã€‚æµ‹è¯•æ•°æ®æ²¡æœ‰æ ‡æ³¨ä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦åšå›¾åƒå¢å¹¿ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># å°† listå½¢å¼çš„batchæ•°æ® è½¬åŒ–æˆå¤šä¸ªarrayæ„æˆçš„tuple</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_test_array</span>(<span class="params">batch_data</span>):</span><br><span class="line">    img_name_array = np.array([item[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data])</span><br><span class="line">    img_data_array = np.array([item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype = <span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    img_scale_array = np.array([item[<span class="number">2</span>] <span class="keyword">for</span> item <span class="keyword">in</span> batch_data], dtype=<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> img_name_array, img_data_array, img_scale_array</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•æ•°æ®è¯»å–</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_data_loader</span>(<span class="params">datadir, batch_size= <span class="number">10</span>, test_image_size=<span class="number">608</span>, mode=<span class="string">&#x27;test&#x27;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŠ è½½æµ‹è¯•ç”¨çš„å›¾ç‰‡ï¼Œæµ‹è¯•æ•°æ®æ²¡æœ‰groundtruthæ ‡ç­¾</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    image_names = os.listdir(datadir)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reader</span>():</span><br><span class="line">        batch_data = []</span><br><span class="line">        img_size = test_image_size</span><br><span class="line">        <span class="keyword">for</span> image_name <span class="keyword">in</span> image_names:</span><br><span class="line">            file_path = os.path.join(datadir, image_name)</span><br><span class="line">            img = cv2.imread(file_path)</span><br><span class="line">            img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span><br><span class="line">            H = img.shape[<span class="number">0</span>]</span><br><span class="line">            W = img.shape[<span class="number">1</span>]</span><br><span class="line">            img = cv2.resize(img, (img_size, img_size))</span><br><span class="line"></span><br><span class="line">            mean = [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>]</span><br><span class="line">            std = [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]</span><br><span class="line">            mean = np.array(mean).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">            std = np.array(std).reshape((<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">            out_img = (img / <span class="number">255.0</span> - mean) / std</span><br><span class="line">            out_img = out_img.astype(<span class="string">&#x27;float32&#x27;</span>).transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">            img = out_img <span class="comment">#np.transpose(out_img, (2,0,1))</span></span><br><span class="line">            im_shape = [H, W]</span><br><span class="line"></span><br><span class="line">            batch_data.append((image_name.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>], img, im_shape))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(batch_data) == batch_size:</span><br><span class="line">                <span class="keyword">yield</span> make_test_array(batch_data)</span><br><span class="line">                batch_data = []</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(batch_data) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">yield</span> make_test_array(batch_data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> reader</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ é«˜çº§_è®¡ç®—æœºè§†è§‰ä¹‹ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 6.1-ç›®æ ‡æ£€æµ‹åŸºæœ¬æ¦‚å¿µ</title>
      <link href="/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.1-%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
      <url>/2023/01/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06.1-%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="ç›®æ ‡æ£€æµ‹"><a href="#ç›®æ ‡æ£€æµ‹" class="headerlink" title="ç›®æ ‡æ£€æµ‹"></a><strong>ç›®æ ‡æ£€æµ‹</strong></h1><p>å¯¹è®¡ç®—æœºè€Œè¨€ï¼Œèƒ½å¤Ÿâ€œçœ‹åˆ°â€çš„æ˜¯å›¾åƒè¢«ç¼–ç ä¹‹åçš„æ•°å­—ï¼Œä½†å®ƒå¾ˆéš¾ç†è§£é«˜å±‚è¯­ä¹‰æ¦‚å¿µï¼Œæ¯”å¦‚å›¾åƒæˆ–è€…è§†é¢‘å¸§ä¸­å‡ºç°çš„ç›®æ ‡æ˜¯äººè¿˜æ˜¯ç‰©ä½“ï¼Œæ›´æ— æ³•å®šä½ç›®æ ‡å‡ºç°åœ¨å›¾åƒä¸­å“ªä¸ªåŒºåŸŸã€‚ç›®æ ‡æ£€æµ‹çš„ä¸»è¦ç›®çš„æ˜¯è®©è®¡ç®—æœºå¯ä»¥è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡æˆ–è€…è§†é¢‘å¸§ä¸­æ‰€æœ‰ç›®æ ‡çš„ç±»åˆ«ï¼Œå¹¶åœ¨è¯¥ç›®æ ‡å‘¨å›´ç»˜åˆ¶è¾¹ç•Œæ¡†ï¼Œæ ‡ç¤ºå‡ºæ¯ä¸ªç›®æ ‡çš„ä½ç½®ï¼Œå¦‚ <strong>å›¾1</strong> æ‰€ç¤ºã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e25116d994724f83abe3bef7f033c1c89bf34e083075494bb7833947c557f4fc" width = "700"  div align=center" width = "800"></center><center><br>å›¾1ï¼šå›¾åƒåˆ†ç±»å’Œç›®æ ‡æ£€æµ‹ç¤ºæ„å›¾</br></center><p><br></br></p><ul><li>å›¾1ï¼ˆaï¼‰æ˜¯å›¾åƒåˆ†ç±»ä»»åŠ¡ï¼Œåªéœ€è¯†åˆ«å‡ºè¿™æ˜¯ä¸€å¼ æ–‘é©¬çš„å›¾ç‰‡ã€‚ </li><li>å›¾1ï¼ˆbï¼‰æ˜¯ç›®æ ‡æ£€æµ‹ä»»åŠ¡ï¼Œä¸ä»…è¦è¯†åˆ«å‡ºè¿™æ˜¯ä¸€å¼ æ–‘é©¬çš„å›¾ç‰‡ï¼Œè¿˜è¦æ ‡å‡ºå›¾ä¸­æ–‘é©¬çš„ä½ç½®ã€‚</li></ul><p>ç›®æ ‡æ£€æµ‹åœ¨å¤šä¸ªé¢†åŸŸä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼Œåœ¨æ— äººé©¾é©¶é‡Œï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¯†åˆ«æ‹æ‘„åˆ°çš„è§†é¢‘å›¾åƒé‡Œçš„è½¦è¾†ã€è¡Œäººã€é“è·¯å’Œéšœç¢ç‰©çš„ä½ç½®æ¥è§„åˆ’è¡Œè¿›çº¿è·¯ã€‚ æœºå™¨äººä¹Ÿå¸¸é€šè¿‡è¯¥ä»»åŠ¡æ¥æ£€æµ‹æ„Ÿå…´è¶£çš„ç›®æ ‡ã€‚å®‰é˜²é¢†åŸŸåˆ™éœ€è¦æ£€æµ‹å¼‚å¸¸ç›®æ ‡ï¼Œå¦‚æ­¹å¾’æˆ–è€…ç‚¸å¼¹ã€‚</p><h2 id="ä¸€ã€ç›®æ ‡æ£€æµ‹çš„å‘å±•å†ç¨‹"><a href="#ä¸€ã€ç›®æ ‡æ£€æµ‹çš„å‘å±•å†ç¨‹" class="headerlink" title="ä¸€ã€ç›®æ ‡æ£€æµ‹çš„å‘å±•å†ç¨‹"></a>ä¸€ã€ç›®æ ‡æ£€æµ‹çš„å‘å±•å†ç¨‹</h2><p>åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­æˆ‘ä»¬å­¦ä¹ äº†å›¾åƒåˆ†ç±»å¤„ç†åŸºæœ¬æµç¨‹ï¼Œå…ˆä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæå–å›¾åƒç‰¹å¾ï¼Œç„¶åå†ç”¨è¿™äº›ç‰¹å¾é¢„æµ‹åˆ†ç±»æ¦‚ç‡ï¼Œæ ¹æ®è®­ç»ƒæ ·æœ¬æ ‡ç­¾å»ºç«‹èµ·åˆ†ç±»æŸå¤±å‡½æ•°ï¼Œå¼€å¯ç«¯åˆ°ç«¯çš„è®­ç»ƒï¼Œå¦‚ <strong>å›¾2</strong> æ‰€ç¤ºã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/cf21664a4a1f4392945f86812d466879132426ab602846c38dab0eca0600e579" width = "800"></center><center><br>å›¾2ï¼šå›¾åƒåˆ†ç±»æµç¨‹ç¤ºæ„å›¾</br></center><p><br></br></p><p>ä½†å¯¹äºç›®æ ‡æ£€æµ‹é—®é¢˜ï¼ŒæŒ‰ç…§ <strong>å›¾2</strong> çš„æµç¨‹åˆ™è¡Œä¸é€šã€‚å› ä¸ºåœ¨å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸­ï¼Œå¯¹æ•´å¼ å›¾æå–ç‰¹å¾çš„è¿‡ç¨‹ä¸­æ²¡èƒ½ä½“ç°å‡ºä¸åŒç›®æ ‡ä¹‹é—´çš„åŒºåˆ«ï¼Œæœ€ç»ˆä¹Ÿå°±æ²¡æ³•åˆ†åˆ«æ ‡ç¤ºå‡ºæ¯ä¸ªç‰©ä½“æ‰€åœ¨çš„ä½ç½®ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»“åˆå›¾ç‰‡åˆ†ç±»ä»»åŠ¡å–å¾—çš„æˆåŠŸç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥å°†ç›®æ ‡æ£€æµ‹ä»»åŠ¡è¿›è¡Œæ‹†åˆ†ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰æŸç§æ–¹å¼å¯ä»¥åœ¨è¾“å…¥å›¾ç‰‡ä¸Šç”Ÿæˆä¸€ç³»åˆ—å¯èƒ½åŒ…å«ç‰©ä½“çš„åŒºåŸŸï¼Œè¿™äº›åŒºåŸŸç§°ä¸ºå€™é€‰åŒºåŸŸï¼Œåœ¨ä¸€å¼ å›¾ä¸Šå¯ä»¥ç”Ÿæˆå¾ˆå¤šä¸ªå€™é€‰åŒºåŸŸã€‚ç„¶åå¯¹æ¯ä¸ªå€™é€‰åŒºåŸŸï¼Œå¯ä»¥æŠŠå®ƒå•ç‹¬å½“æˆä¸€å¹…å›¾åƒæ¥çœ‹å¾…ï¼Œä½¿ç”¨å›¾åƒåˆ†ç±»æ¨¡å‹å¯¹å®ƒè¿›è¡Œåˆ†ç±»ï¼Œçœ‹å®ƒå±äºå“ªä¸ªç±»åˆ«æˆ–è€…èƒŒæ™¯ï¼ˆå³ä¸åŒ…å«ä»»ä½•ç‰©ä½“çš„ç±»åˆ«ï¼‰ã€‚</p><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬å­¦è¿‡å¦‚ä½•è§£å†³å›¾åƒåˆ†ç±»ä»»åŠ¡ï¼Œä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå¯¹ä¸€å¹…å›¾åƒè¿›è¡Œåˆ†ç±»ä¸å†æ˜¯ä¸€ä»¶å›°éš¾çš„äº‹æƒ…ã€‚é‚£ä¹ˆï¼Œç°åœ¨é—®é¢˜çš„å…³é”®å°±æ˜¯å¦‚ä½•äº§ç”Ÿå€™é€‰åŒºåŸŸï¼Ÿæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>ç©·ä¸¾æ³•</strong>æ¥äº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/57755ac8e95a460f9262afc7c37a0db51f66027ff86c40e2967a2e22524c20a1" width = "800"></center><center><br>å›¾3ï¼šå€™é€‰åŒºåŸŸ</br></center><p><br></br></p><p>Aä¸ºå›¾åƒä¸Šçš„æŸä¸ªåƒç´ ç‚¹ï¼ŒBä¸ºAå³ä¸‹æ–¹å¦å¤–ä¸€ä¸ªåƒç´ ç‚¹ï¼ŒAã€Bä¸¤ç‚¹å¯ä»¥ç¡®å®šä¸€ä¸ªçŸ©å½¢æ¡†ï¼Œè®°ä½œABã€‚</p><ul><li>å¦‚å›¾3ï¼ˆaï¼‰æ‰€ç¤ºï¼šAåœ¨å›¾ç‰‡å·¦ä¸Šè§’ä½ç½®ï¼ŒBéå†é™¤Aä¹‹å¤–çš„æ‰€æœ‰ä½ç½®ï¼Œç”ŸæˆçŸ©å½¢æ¡†A1B1, â€¦, A1Bn, â€¦</li><li>å¦‚å›¾3ï¼ˆbï¼‰æ‰€ç¤ºï¼šAåœ¨å›¾ç‰‡ä¸­é—´æŸä¸ªä½ç½®ï¼ŒBéå†Aå³ä¸‹æ–¹æ‰€æœ‰ä½ç½®ï¼Œç”ŸæˆçŸ©å½¢æ¡†AkB1, â€¦, AkBn, â€¦</li></ul><p>å½“Aéå†å›¾åƒä¸Šæ‰€æœ‰åƒç´ ç‚¹ï¼ŒBåˆ™éå†å®ƒå³ä¸‹æ–¹æ‰€æœ‰çš„åƒç´ ç‚¹ï¼Œæœ€ç»ˆç”Ÿæˆçš„çŸ©å½¢æ¡†é›†åˆ{AiBj}å°†ä¼šåŒ…å«å›¾åƒä¸Šæ‰€æœ‰å¯ä»¥é€‰æ‹©çš„åŒºåŸŸï¼Œè¿™ä¸ªå€™é€‰åŒºåŸŸä¹Ÿè¢«ç§°ä¸º**æ„Ÿå…´è¶£åŒºåŸŸï¼ˆRegion of interest, ROI)**ã€‚åªè¦æˆ‘ä»¬å¯¹æ¯ä¸ªå€™é€‰åŒºåŸŸçš„åˆ†ç±»è¶³å¤Ÿçš„å‡†ç¡®ï¼Œåˆ™ä¸€å®šèƒ½æ‰¾åˆ°è·Ÿå®é™…ç‰©ä½“è¶³å¤Ÿæ¥è¿‘çš„åŒºåŸŸæ¥ã€‚æ•´ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/7b27f6bc0d944e55ad9cf5187bf2ebc294a25d87bf1a4cd8890b2700274b6af7" width = "800"></center><center><br>å›¾4ï¼šæ£€æµ‹æµç¨‹</br></center><p><br></br></p><p>ç©·ä¸¾æ³•ä¹Ÿè®¸èƒ½å¾—åˆ°æ­£ç¡®çš„é¢„æµ‹ç»“æœï¼Œä½†å…¶è®¡ç®—é‡ä¹Ÿæ˜¯éå¸¸å·¨å¤§çš„ï¼Œå…¶æ‰€ç”Ÿæˆçš„æ€»å€™é€‰åŒºåŸŸæ•°ç›®çº¦ä¸º$\frac{W^2 H^2}{4}$ï¼Œå‡è®¾$H&#x3D;W&#x3D;100$ï¼Œæ€»æ•°å°†ä¼šè¾¾åˆ°$2.5 \times 10^{7}$ä¸ªï¼Œå¦‚æ­¤å¤šçš„å€™é€‰åŒºåŸŸä½¿å¾—è¿™ç§æ–¹æ³•å‡ ä¹æ²¡æœ‰ä»€ä¹ˆå®ç”¨æ€§ã€‚ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå‡è®¾åˆ†ç±»ä»»åŠ¡å®Œæˆçš„è¶³å¤Ÿå®Œç¾ï¼Œä»ç†è®ºä¸Šæ¥è®²æ£€æµ‹ä»»åŠ¡ä¹Ÿæ˜¯å¯ä»¥è§£å†³çš„ï¼ŒäºŸå¾…è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•è®¾è®¡å‡ºåˆé€‚çš„æ–¹æ³•æ¥äº§ç”Ÿå€™é€‰åŒºåŸŸã€‚å¥½çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªåˆç†çš„äº§ç”Ÿå€™é€‰åŒºåŸŸçš„æ–¹æ³•ï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/3b49cb672fe34e1d829ab483e9a843e6a745d7591aed46799b5cc81f8561eed8" width = "800"></center><center><br>å›¾5ï¼šæ£€æµ‹ç®—æ³•æ ¸å¿ƒæ­¥éª¤</br></center><p><br></br></p><hr><blockquote><p>æ£€æµ‹ç®—æ³•äºŸéœ€è§£å†³çš„é—®é¢˜ä¸»è¦æ˜¯ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li>å¦‚ä½•äº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œå¹¶å¯¹ä»–ä»¬è¿›è¡Œæ ‡æ³¨ï¼›</li><li>å¦‚ä½•æå–å›¾åƒç‰¹å¾ï¼Œå¹¶å°†æå–åˆ°çš„ç‰¹å¾å›¾ä¸å€™é€‰åŒºåŸŸçš„ç±»åˆ«å’Œä½ç½®è¿›è¡Œå…³è”ã€‚</li></ul></blockquote><hr><p>ç§‘å­¦å®¶ä»¬å¼€å§‹æ€è€ƒï¼Œæ˜¯å¦å¯ä»¥åº”ç”¨ä¼ ç»Ÿå›¾åƒç®—æ³•å…ˆäº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œç„¶åå†ç”¨å·ç§¯ç¥ç»ç½‘ç»œå¯¹è¿™äº›åŒºåŸŸè¿›è¡Œåˆ†ç±»ï¼Ÿ</p><ul><li>2013å¹´ï¼Œ<a href="https://arxiv.org/abs/1311.2524">Ross Girshick</a> ç­‰äººäºé¦–æ¬¡å°†CNNçš„æ–¹æ³•åº”ç”¨åœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸Šï¼Œä»–ä»¬ä½¿ç”¨ä¼ ç»Ÿå›¾åƒç®—æ³•<a href="https://link.springer.com/article/10.1007/s11263-013-0620-5">Selective Search</a>äº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œå–å¾—äº†æå¤§çš„æˆåŠŸï¼Œè¿™å°±æ˜¯å¯¹ç›®æ ‡æ£€æµ‹é¢†åŸŸå½±å“æ·±è¿œçš„åŒºåŸŸå·ç§¯ç¥ç»ç½‘ç»œ(R-CNN)æ¨¡å‹ã€‚</li><li>2015å¹´ï¼Œ<a href="https://arxiv.org/abs/1504.08083">Ross Girshick</a> å¯¹æ­¤æ–¹æ³•è¿›è¡Œäº†æ”¹è¿›ï¼Œæå‡ºäº†Fast R-CNNæ¨¡å‹ã€‚é€šè¿‡å°†ä¸åŒåŒºåŸŸçš„ç‰©ä½“å…±ç”¨å·ç§¯å±‚çš„è®¡ç®—ï¼Œå¤§å¤§ç¼©å‡äº†è®¡ç®—é‡ï¼Œæé«˜äº†å¤„ç†é€Ÿåº¦ï¼Œè€Œä¸”è¿˜å¼•å…¥äº†è°ƒæ•´ç›®æ ‡ç‰©ä½“ä½ç½®çš„å›å½’æ–¹æ³•ï¼Œè¿›ä¸€æ­¥æé«˜äº†ä½ç½®é¢„æµ‹çš„å‡†ç¡®æ€§ã€‚</li><li>2015å¹´ï¼Œ<a href="https://arxiv.org/abs/1506.01497">Shaoqing Ren</a> ç­‰äººæå‡ºäº†Faster R-CNNæ¨¡å‹ï¼Œæå‡ºäº†RPNçš„æ–¹æ³•æ¥äº§ç”Ÿç‰©ä½“çš„å€™é€‰åŒºåŸŸï¼Œè¿™ä¸€æ–¹æ³•ä¸å†éœ€è¦ä½¿ç”¨ä¼ ç»Ÿçš„å›¾åƒå¤„ç†ç®—æ³•æ¥äº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œè¿›ä¸€æ­¥æå‡äº†å¤„ç†é€Ÿåº¦ã€‚</li><li>2017å¹´ï¼Œ<a href="https://arxiv.org/abs/1703.06870">Kaiming He</a> ç­‰äººæå‡ºäº†Mask R-CNNæ¨¡å‹ï¼Œåªéœ€è¦åœ¨Faster R-CNNæ¨¡å‹ä¸Šæ·»åŠ æ¯”è¾ƒå°‘çš„è®¡ç®—é‡ï¼Œå°±å¯ä»¥åŒæ—¶å®ç°ç›®æ ‡æ£€æµ‹å’Œç‰©ä½“å®ä¾‹åˆ†å‰²ä¸¤ä¸ªä»»åŠ¡ã€‚</li></ul><p>ä»¥ä¸Šéƒ½æ˜¯åŸºäºR-CNNç³»åˆ—çš„è‘—åæ¨¡å‹ï¼Œå¯¹ç›®æ ‡æ£€æµ‹æ–¹å‘çš„å‘å±•æœ‰ç€è¾ƒå¤§çš„å½±å“åŠ›ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–æ¨¡å‹ï¼Œæ¯”å¦‚<a href="https://arxiv.org/abs/1512.02325">SSD</a>ã€YOLO(<a href="https://arxiv.org/abs/1506.02640v5">1</a>, <a href="https://arxiv.org/abs/1612.08242">2</a>, <a href="https://arxiv.org/abs/1804.02767">3</a>)ã€<a href="https://arxiv.org/abs/1605.06409">R-FCN</a>ç­‰ä¹Ÿéƒ½æ˜¯ç›®æ ‡æ£€æµ‹é¢†åŸŸæµè¡Œçš„æ¨¡å‹ç»“æ„ã€‚</p><p>R-CNNçš„ç³»åˆ—ç®—æ³•åˆ†æˆä¸¤ä¸ªé˜¶æ®µï¼Œå…ˆåœ¨å›¾åƒä¸Šäº§ç”Ÿå€™é€‰åŒºåŸŸï¼Œå†å¯¹å€™é€‰åŒºåŸŸè¿›è¡Œåˆ†ç±»å¹¶é¢„æµ‹ç›®æ ‡ç‰©ä½“ä½ç½®ï¼Œå®ƒä»¬é€šå¸¸è¢«å«åšä¸¤é˜¶æ®µæ£€æµ‹ç®—æ³•ã€‚SSDå’ŒYOLOç®—æ³•åˆ™åªä½¿ç”¨ä¸€ä¸ªç½‘ç»œåŒæ—¶äº§ç”Ÿå€™é€‰åŒºåŸŸå¹¶é¢„æµ‹å‡ºç‰©ä½“çš„ç±»åˆ«å’Œä½ç½®ï¼Œæ‰€ä»¥å®ƒä»¬é€šå¸¸è¢«å«åšå•é˜¶æ®µæ£€æµ‹ç®—æ³•ã€‚ç”±äºç¯‡å¹…æ‰€é™ï¼Œæœ¬ç« å°†é‡ç‚¹ä»‹ç»YOLOv3ç®—æ³•ï¼Œå¹¶ç”¨å…¶å®Œæˆæ—ä¸šç—…è™«å®³æ£€æµ‹ä»»åŠ¡ï¼Œä¸»è¦æ¶µç›–å¦‚ä¸‹å†…å®¹ï¼š</p><ul><li>å›¾åƒæ£€æµ‹åŸºç¡€æ¦‚å¿µï¼šä»‹ç»ä¸ç›®æ ‡æ£€æµ‹ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬è¾¹ç•Œæ¡†ã€é”šæ¡†å’Œäº¤å¹¶æ¯”ç­‰ã€‚</li><li>æ—ä¸šç—…è™«å®³æ•°æ®é›†ï¼šä»‹ç»æ•°æ®é›†ç»“æ„åŠæ•°æ®é¢„å¤„ç†æ–¹æ³•ã€‚</li><li>YOLOv3ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼šä»‹ç»ç®—æ³•åŸç†ï¼ŒåŠå¦‚ä½•åº”ç”¨æ—ä¸šç—…è™«å®³æ•°æ®é›†è¿›è¡Œæ¨¡å‹è®­ç»ƒå’Œæµ‹è¯•ã€‚</li></ul><h3 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h3><ul><li>[1] R-CNN: Ross Girshick,Jeff Donahue,Trevor Darrell and Jitendra Malik,Rich feature hierarchies for accurate obiect detection and semantic segmentation Tech report,arXiv:1311.2524v5</li><li>[2] Fast R-CNN: Ross Girshick,Fast R-CNN,arXiv:1504.08083v2</li><li>[3] Faster R-CNN: Shaoqing Ren,Kaiming He,Ross Girshick,and Jian Sun,Faster R-CNN:Towards Real-Time Object Detection with Region Proposal Networks,arXiv:1504.08083v2</li><li>[4] R-FCN: Jifeng Dai,Yi Li,Kaiming He and Jian Sun,R-FCN: Object Detection via Region-based Fully Convolutional Networks,arXiv:1605.06409v2</li><li>[5] SSD:Wei Liu,Dragomir Anguelov,Dumitru Erhan,Christian Szegedy,Scot Reed,Cheng-Yang Fu,and Alexander C.Berg,SSD: Single Shot MultiBox Detector,arXiv:1512.02325v5</li><li>[6] YOLO-V1: Joseph Redmon,Santosh Divvala,Ross Girshick and Ali Farhadi,You Only Look Once:Unified,Real-Time Object Detection,arXiv:1506.02640v5</li><li>[7] YOLO-V2: Joseph Redmon and Ali Farhadi,YOLO9000:Better,Faster,Stronger,arXiv:1612.08242v1</li><li>[8] YOLO-V3: Joseph Redmon and Ali Farhadi,YOLOv3:An Incremental lmprovement,arXiv:1804.02767v1</li></ul><h2 id="äºŒã€ç›®æ ‡æ£€æµ‹åŸºç¡€æ¦‚å¿µ"><a href="#äºŒã€ç›®æ ‡æ£€æµ‹åŸºç¡€æ¦‚å¿µ" class="headerlink" title="äºŒã€ç›®æ ‡æ£€æµ‹åŸºç¡€æ¦‚å¿µ"></a>äºŒã€ç›®æ ‡æ£€æµ‹åŸºç¡€æ¦‚å¿µ</h2><p>åœ¨ä»‹ç»ç›®æ ‡æ£€æµ‹ç®—æ³•ä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸€äº›è·Ÿæ£€æµ‹ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬è¾¹ç•Œæ¡†ã€é”šæ¡†å’Œäº¤å¹¶æ¯”ç­‰ã€‚</p><h3 id="1ï¼‰è¾¹ç•Œæ¡†"><a href="#1ï¼‰è¾¹ç•Œæ¡†" class="headerlink" title="1ï¼‰è¾¹ç•Œæ¡†"></a><strong>1ï¼‰è¾¹ç•Œæ¡†</strong></h3><p>æ£€æµ‹ä»»åŠ¡éœ€è¦åŒæ—¶é¢„æµ‹ç‰©ä½“çš„ç±»åˆ«å’Œä½ç½®ï¼Œå› æ­¤éœ€è¦å¼•å…¥ä¸€äº›è·Ÿä½ç½®ç›¸å…³çš„æ¦‚å¿µã€‚é€šå¸¸ä½¿ç”¨<strong>è¾¹ç•Œæ¡†ï¼ˆbounding boxï¼Œbboxï¼‰</strong> æ¥è¡¨ç¤ºç‰©ä½“çš„ä½ç½®ï¼Œè¾¹ç•Œæ¡†æ˜¯æ­£å¥½èƒ½åŒ…å«ç‰©ä½“çš„çŸ©å½¢æ¡†ï¼Œå¦‚ <strong>å›¾6</strong> æ‰€ç¤ºï¼Œå›¾ä¸­3ä¸ªäººåˆ†åˆ«å¯¹åº”3ä¸ªè¾¹ç•Œæ¡†ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f581e1bfd07a414596368c9c03a1b30ea115a2e30a014be68b2c26961f5c38fa" width = "400"  div align=center"></center><center><br>å›¾6ï¼šè¾¹ç•Œæ¡†</br></center><p><br></br></p><p>é€šå¸¸æœ‰ä¸¤ç§æ ¼å¼æ¥è¡¨ç¤ºè¾¹ç•Œæ¡†çš„ä½ç½®ï¼š</p><ol><li>$xyxy$ï¼Œå³$(x_1, y_1, x_2, y_2)$ï¼Œå…¶ä¸­$(x_1, y_1)$æ˜¯çŸ©å½¢æ¡†å·¦ä¸Šè§’çš„åæ ‡ï¼Œ$(x_2, y_2)$æ˜¯çŸ©å½¢æ¡†å³ä¸‹è§’çš„åæ ‡ã€‚å›¾4ä¸­3ä¸ªçº¢è‰²çŸ©å½¢æ¡†ç”¨$xyxy$æ ¼å¼è¡¨ç¤ºå¦‚ä¸‹ï¼š</li></ol><ul><li>å·¦ï¼š$(40.93, 141.1, 226.99, 515.73)$ã€‚</li><li>ä¸­ï¼š$(214.29, 325.03, 399.82, 631.37)$ã€‚</li><li>å³ï¼š$(247.2, 131.62, 480.0, 639.32)$ã€‚</li></ul><ol start="2"><li>$xywh$ï¼Œå³$(x, y, w, h)$ï¼Œå…¶ä¸­$(x, y)$æ˜¯çŸ©å½¢æ¡†ä¸­å¿ƒç‚¹çš„åæ ‡ï¼Œ$w$æ˜¯çŸ©å½¢æ¡†çš„å®½åº¦ï¼Œ$h$æ˜¯çŸ©å½¢æ¡†çš„é«˜åº¦ã€‚</li></ol><hr><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>åœ¨é˜…è¯»ä»£ç æ—¶ï¼Œè¯·æ³¨æ„ä½¿ç”¨çš„æ˜¯å“ªä¸€ç§æ ¼å¼çš„è¡¨ç¤ºæ–¹å¼ã€‚</li><li>å›¾ç‰‡åæ ‡çš„åŸç‚¹åœ¨å·¦ä¸Šè§’ï¼Œ$x$è½´å‘å³ä¸ºæ­£æ–¹å‘ï¼Œ$y$è½´å‘ä¸‹ä¸ºæ­£æ–¹å‘ã€‚</li></ol></blockquote><hr><ul><li>åœ¨æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œè®­ç»ƒæ•°æ®é›†çš„æ ‡ç­¾é‡Œä¼šç»™å‡ºç›®æ ‡ç‰©ä½“çœŸå®è¾¹ç•Œæ¡†æ‰€å¯¹åº”çš„$(x_1, y_1, x_2, y_2)$ï¼Œè¿™æ ·çš„è¾¹ç•Œæ¡†ä¹Ÿè¢«ç§°ä¸º<strong>çœŸå®æ¡†ï¼ˆground truth box, gt_boxï¼‰</strong>ï¼Œå¦‚ <strong>å›¾4</strong> æ‰€ç¤ºï¼Œå›¾ä¸­ç”»å‡ºäº†3ä¸ªäººåƒæ‰€å¯¹åº”çš„çœŸå®æ¡†ã€‚</li><li>æ¨¡å‹ä¼šå¯¹ç›®æ ‡ç‰©ä½“å¯èƒ½å‡ºç°çš„ä½ç½®è¿›è¡Œé¢„æµ‹ï¼Œç”±æ¨¡å‹é¢„æµ‹å‡ºçš„è¾¹ç•Œæ¡†åˆ™ç§°ä¸º<strong>é¢„æµ‹æ¡†ï¼ˆprediction box, pred_boxï¼‰</strong>ã€‚è¦å®Œæˆä¸€é¡¹æ£€æµ‹ä»»åŠ¡ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›æ¨¡å‹èƒ½å¤Ÿæ ¹æ®è¾“å…¥çš„å›¾ç‰‡ï¼Œè¾“å‡ºä¸€äº›é¢„æµ‹çš„è¾¹ç•Œæ¡†ï¼Œä»¥åŠè¾¹ç•Œæ¡†ä¸­æ‰€åŒ…å«çš„ç‰©ä½“çš„ç±»åˆ«æˆ–è€…è¯´å±äºæŸä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œä¾‹å¦‚è¿™ç§æ ¼å¼: $[L, P, x_1, y_1, x_2, y_2]$ï¼Œå…¶ä¸­$L$æ˜¯ç±»åˆ«æ ‡ç­¾ï¼Œ$P$æ˜¯ç‰©ä½“å±äºè¯¥ç±»åˆ«çš„æ¦‚ç‡ï¼ˆå¾—åˆ†ï¼‰ã€‚ä¸€å¼ è¾“å…¥å›¾ç‰‡å¯èƒ½ä¼šäº§ç”Ÿå¤šä¸ªé¢„æµ‹æ¡†ã€‚</li></ul><h3 id="2ï¼‰é”šæ¡†"><a href="#2ï¼‰é”šæ¡†" class="headerlink" title="2ï¼‰é”šæ¡†"></a><strong>2ï¼‰é”šæ¡†</strong></h3><p>é”šæ¡†ä¸ç‰©ä½“è¾¹ç•Œæ¡†ä¸åŒï¼Œæ˜¯ç”±äººä»¬å‡æƒ³é¢„æµ‹å‡ºæ¥çš„ä¸€ç§æ¡†ã€‚å…ˆè®¾å®šå¥½é”šæ¡†çš„å¤§å°å’Œå½¢çŠ¶ï¼Œå†ä»¥å›¾åƒä¸ŠæŸä¸€ä¸ªç‚¹ä¸ºä¸­å¿ƒç”»å‡ºçŸ©å½¢æ¡†ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œä»¥åƒç´ ç‚¹[300, 500]ä¸ºä¸­å¿ƒå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç¨‹åºç”Ÿæˆ3ã€æ•°é‡å¯ä»¥è‡ªå·±è°ƒæ•´ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨3ä¸ªï¼Œå› ä¸º3ä¸ªæ¡†åŸºæœ¬å¯ä»¥è¦†ç›–æ•´å¼ å›¾ç‰‡äº†ã€‘ä¸ªæ¡†ï¼Œå¦‚å›¾ä¸­è“è‰²æ¡†æ‰€ç¤ºï¼Œå…¶ä¸­é”šæ¡†A1è·ŸäººåƒåŒºåŸŸéå¸¸æ¥è¿‘ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”»å›¾å±•ç¤ºå¦‚ä½•ç»˜åˆ¶è¾¹ç•Œæ¡†å’Œé”šæ¡†</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.patches <span class="keyword">as</span> patches</span><br><span class="line"><span class="keyword">from</span> matplotlib.image <span class="keyword">import</span> imread</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç”»çŸ©å½¢æ¡†çš„ç¨‹åº    </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_rectangle</span>(<span class="params">currentAxis, bbox, edgecolor = <span class="string">&#x27;k&#x27;</span>, facecolor = <span class="string">&#x27;y&#x27;</span>, fill=<span class="literal">False</span>, linestyle=<span class="string">&#x27;-&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># currentAxisï¼Œåæ ‡è½´ï¼Œé€šè¿‡plt.gca()è·å–</span></span><br><span class="line">    <span class="comment"># bboxï¼Œè¾¹ç•Œæ¡†ï¼ŒåŒ…å«å››ä¸ªæ•°å€¼çš„listï¼Œ [x1, y1, x2, y2]</span></span><br><span class="line">    <span class="comment"># edgecolorï¼Œè¾¹æ¡†çº¿æ¡é¢œè‰²</span></span><br><span class="line">    <span class="comment"># facecolorï¼Œå¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment"># fill, æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment"># linestypeï¼Œè¾¹æ¡†çº¿å‹</span></span><br><span class="line">    <span class="comment"># patches.Rectangleéœ€è¦ä¼ å…¥å·¦ä¸Šè§’åæ ‡ã€çŸ©å½¢åŒºåŸŸçš„å®½åº¦ã€é«˜åº¦ç­‰å‚æ•°</span></span><br><span class="line">    rect=patches.Rectangle((bbox[<span class="number">0</span>], bbox[<span class="number">1</span>]), bbox[<span class="number">2</span>]-bbox[<span class="number">0</span>]+<span class="number">1</span>, bbox[<span class="number">3</span>]-bbox[<span class="number">1</span>]+<span class="number">1</span>, linewidth=<span class="number">1</span>,</span><br><span class="line">                           edgecolor=edgecolor,facecolor=facecolor,fill=fill, linestyle=linestyle)</span><br><span class="line">    currentAxis.add_patch(rect)</span><br><span class="line">    <span class="comment">#print(currentAxis)</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">plt.figure(figsize=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;work/000000086956.jpg&#x27;</span></span><br><span class="line">im = imread(filename)</span><br><span class="line">plt.imshow(im)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨xyxyæ ¼å¼è¡¨ç¤ºç‰©ä½“çœŸå®æ¡†</span></span><br><span class="line">bbox1 = [<span class="number">214.29</span>, <span class="number">325.03</span>, <span class="number">399.82</span>, <span class="number">631.37</span>]</span><br><span class="line">bbox2 = [<span class="number">40.93</span>, <span class="number">141.1</span>, <span class="number">226.99</span>, <span class="number">515.73</span>]</span><br><span class="line">bbox3 = [<span class="number">247.2</span>, <span class="number">131.62</span>, <span class="number">480.0</span>, <span class="number">639.32</span>]</span><br><span class="line"></span><br><span class="line">currentAxis=plt.gca()<span class="comment"># è·å–å›¾åƒçš„è½´</span></span><br><span class="line"></span><br><span class="line">draw_rectangle(currentAxis, bbox1, edgecolor=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">draw_rectangle(currentAxis, bbox2, edgecolor=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">draw_rectangle(currentAxis, bbox3,edgecolor=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/62.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ç”»çŸ©å½¢æ¡†çš„ç¨‹åº    </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_rectangle</span>(<span class="params">currentAxis, bbox, edgecolor = <span class="string">&#x27;k&#x27;</span>, facecolor = <span class="string">&#x27;y&#x27;</span>, fill=<span class="literal">False</span>, linestyle=<span class="string">&#x27;-&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># currentAxisï¼Œåæ ‡è½´ï¼Œé€šè¿‡plt.gca()è·å–</span></span><br><span class="line">    <span class="comment"># bboxï¼Œè¾¹ç•Œæ¡†ï¼ŒåŒ…å«å››ä¸ªæ•°å€¼çš„listï¼Œ [x1, y1, x2, y2]</span></span><br><span class="line">    <span class="comment"># edgecolorï¼Œè¾¹æ¡†çº¿æ¡é¢œè‰²</span></span><br><span class="line">    <span class="comment"># facecolorï¼Œå¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment"># fill, æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment"># linestypeï¼Œè¾¹æ¡†çº¿å‹</span></span><br><span class="line">    <span class="comment"># patches.Rectangleéœ€è¦ä¼ å…¥å·¦ä¸Šè§’åæ ‡ã€çŸ©å½¢åŒºåŸŸçš„å®½åº¦ã€é«˜åº¦ç­‰å‚æ•°</span></span><br><span class="line">    rect=patches.Rectangle((bbox[<span class="number">0</span>], bbox[<span class="number">1</span>]), bbox[<span class="number">2</span>]-bbox[<span class="number">0</span>]+<span class="number">1</span>, bbox[<span class="number">3</span>]-bbox[<span class="number">1</span>]+<span class="number">1</span>, linewidth=<span class="number">1</span>,</span><br><span class="line">                           edgecolor=edgecolor,facecolor=facecolor,fill=fill, linestyle=linestyle)</span><br><span class="line">    currentAxis.add_patch(rect)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">plt.figure(figsize=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;work/000000086956.jpg&#x27;</span></span><br><span class="line">im = imread(filename)</span><br><span class="line">plt.imshow(im)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨xyxyæ ¼å¼è¡¨ç¤ºç‰©ä½“çœŸå®æ¡†</span></span><br><span class="line">bbox1 = [<span class="number">214.29</span>, <span class="number">325.03</span>, <span class="number">399.82</span>, <span class="number">631.37</span>]</span><br><span class="line">bbox2 = [<span class="number">40.93</span>, <span class="number">141.1</span>, <span class="number">226.99</span>, <span class="number">515.73</span>]</span><br><span class="line">bbox3 = [<span class="number">247.2</span>, <span class="number">131.62</span>, <span class="number">480.0</span>, <span class="number">639.32</span>]</span><br><span class="line"></span><br><span class="line">currentAxis=plt.gca()</span><br><span class="line"></span><br><span class="line">draw_rectangle(currentAxis, bbox1, edgecolor=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">draw_rectangle(currentAxis, bbox2, edgecolor=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">draw_rectangle(currentAxis, bbox3,edgecolor=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶é”šæ¡†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_anchor_box</span>(<span class="params">center, length, scales, ratios, img_height, img_width</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä»¥centerä¸ºä¸­å¿ƒï¼Œäº§ç”Ÿä¸€ç³»åˆ—é”šæ¡†</span></span><br><span class="line"><span class="string">    å…¶ä¸­lengthæŒ‡å®šäº†ä¸€ä¸ªåŸºå‡†çš„é•¿åº¦</span></span><br><span class="line"><span class="string">    scalesæ˜¯åŒ…å«å¤šç§å°ºå¯¸æ¯”ä¾‹çš„list</span></span><br><span class="line"><span class="string">    ratiosæ˜¯åŒ…å«å¤šç§é•¿å®½æ¯”çš„list</span></span><br><span class="line"><span class="string">    img_heightå’Œimg_widthæ˜¯å›¾ç‰‡çš„å°ºå¯¸ï¼Œç”Ÿæˆçš„é”šæ¡†èŒƒå›´ä¸èƒ½è¶…å‡ºå›¾ç‰‡å°ºå¯¸ä¹‹å¤–</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    bboxes = []</span><br><span class="line">    <span class="keyword">for</span> scale <span class="keyword">in</span> scales:</span><br><span class="line">        <span class="keyword">for</span> ratio <span class="keyword">in</span> ratios:</span><br><span class="line">            h = length*scale*math.sqrt(ratio)</span><br><span class="line">            w = length*scale/math.sqrt(ratio) </span><br><span class="line">            x1 = <span class="built_in">max</span>(center[<span class="number">0</span>] - w/<span class="number">2.</span>, <span class="number">0.</span>)</span><br><span class="line">            y1 = <span class="built_in">max</span>(center[<span class="number">1</span>] - h/<span class="number">2.</span>, <span class="number">0.</span>)</span><br><span class="line">            x2 = <span class="built_in">min</span>(center[<span class="number">0</span>] + w/<span class="number">2.</span> - <span class="number">1.0</span>, img_width - <span class="number">1.0</span>) <span class="comment"># - 1.0 è€ƒè™‘åˆ°è¾¹æ¡†ä¸è¶…è¿‡è¾¹ç•Œ</span></span><br><span class="line">            y2 = <span class="built_in">min</span>(center[<span class="number">1</span>] + h/<span class="number">2.</span> - <span class="number">1.0</span>, img_height - <span class="number">1.0</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;ä¸­å¿ƒåæ ‡ï¼š(&#123;&#125;,&#123;&#125;) é«˜å®½ï¼š(&#123;&#125;,&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(center[<span class="number">0</span>], center[<span class="number">1</span>], w, h))</span><br><span class="line">            <span class="built_in">print</span>([x1, y1, x2, y2])</span><br><span class="line">            bboxes.append([x1, y1, x2, y2])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> bbox <span class="keyword">in</span> bboxes:</span><br><span class="line">        draw_rectangle(currentAxis, bbox, edgecolor = <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line">img_height = im.shape[<span class="number">0</span>]</span><br><span class="line">img_width = im.shape[<span class="number">1</span>]        </span><br><span class="line">draw_anchor_box([<span class="number">300.</span>, <span class="number">500.</span>], <span class="number">100.</span>, [<span class="number">2.0</span>], [<span class="number">0.5</span>, <span class="number">1.0</span>, <span class="number">2.0</span>], img_height, img_width)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">################# ä»¥ä¸‹ä¸ºæ·»åŠ æ–‡å­—è¯´æ˜å’Œç®­å¤´###############################</span></span><br><span class="line"></span><br><span class="line">plt.text(<span class="number">285</span>, <span class="number">285</span>, <span class="string">&#x27;G1&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.arrow(<span class="number">300</span>, <span class="number">288</span>, <span class="number">30</span>, <span class="number">40</span>, color=<span class="string">&#x27;red&#x27;</span>, width=<span class="number">0.001</span>, length_includes_head=<span class="literal">True</span>, \</span><br><span class="line">         head_width=<span class="number">5</span>, head_length=<span class="number">10</span>, shape=<span class="string">&#x27;full&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.text(<span class="number">190</span>, <span class="number">320</span>, <span class="string">&#x27;A1&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.arrow(<span class="number">200</span>, <span class="number">320</span>, <span class="number">30</span>, <span class="number">40</span>, color=<span class="string">&#x27;blue&#x27;</span>, width=<span class="number">0.001</span>, length_includes_head=<span class="literal">True</span>, \</span><br><span class="line">         head_width=<span class="number">5</span>, head_length=<span class="number">10</span>, shape=<span class="string">&#x27;full&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.text(<span class="number">160</span>, <span class="number">370</span>, <span class="string">&#x27;A2&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.arrow(<span class="number">170</span>, <span class="number">370</span>, <span class="number">30</span>, <span class="number">40</span>, color=<span class="string">&#x27;blue&#x27;</span>, width=<span class="number">0.001</span>, length_includes_head=<span class="literal">True</span>, \</span><br><span class="line">         head_width=<span class="number">5</span>, head_length=<span class="number">10</span>, shape=<span class="string">&#x27;full&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.text(<span class="number">115</span>, <span class="number">420</span>, <span class="string">&#x27;A3&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.arrow(<span class="number">127</span>, <span class="number">420</span>, <span class="number">30</span>, <span class="number">40</span>, color=<span class="string">&#x27;blue&#x27;</span>, width=<span class="number">0.001</span>, length_includes_head=<span class="literal">True</span>, \</span><br><span class="line">         head_width=<span class="number">5</span>, head_length=<span class="number">10</span>, shape=<span class="string">&#x27;full&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>ä¸­å¿ƒåæ ‡ï¼š(300.0,500.0) é«˜å®½ï¼š(282.84271247461896,141.4213562373095)[158.57864376269052, 429.28932188134524, 440.4213562373095, 569.7106781186548]ä¸­å¿ƒåæ ‡ï¼š(300.0,500.0) é«˜å®½ï¼š(200.0,200.0)[200.0, 400.0, 399.0, 599.0]ä¸­å¿ƒåæ ‡ï¼š(300.0,500.0) é«˜å®½ï¼š(141.42135623730948,282.842712474619)[229.28932188134524, 358.5786437626905, 369.71067811865476, 639.0]</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/63.png" alt="png"></p><p>åœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œé€šå¸¸ä¼šä»¥æŸç§è§„åˆ™åœ¨å›¾ç‰‡ä¸Šç”Ÿæˆä¸€ç³»åˆ—é”šæ¡†ï¼Œå°†è¿™äº›é”šæ¡†å½“æˆå¯èƒ½çš„å€™é€‰åŒºåŸŸã€‚æ¨¡å‹å¯¹è¿™äº›å€™é€‰åŒºåŸŸæ˜¯å¦åŒ…å«ç‰©ä½“è¿›è¡Œé¢„æµ‹ï¼Œå¦‚æœåŒ…å«ç›®æ ‡ç‰©ä½“ï¼Œåˆ™è¿˜éœ€è¦è¿›ä¸€æ­¥é¢„æµ‹å‡ºç‰©ä½“æ‰€å±çš„ç±»åˆ«ã€‚è¿˜æœ‰æ›´ä¸ºé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œç”±äºé”šæ¡†ä½ç½®æ˜¯å›ºå®šçš„ï¼Œå®ƒä¸å¤§å¯èƒ½åˆšå¥½è·Ÿç‰©ä½“è¾¹ç•Œæ¡†é‡åˆï¼Œæ‰€ä»¥éœ€è¦åœ¨é”šæ¡†çš„åŸºç¡€ä¸Šè¿›è¡Œ<strong>å¾®è°ƒ</strong>ä»¥å½¢æˆèƒ½å‡†ç¡®æè¿°ç‰©ä½“ä½ç½®çš„é¢„æµ‹æ¡†ï¼Œæ¨¡å‹éœ€è¦é¢„æµ‹å‡ºå¾®è°ƒçš„å¹…åº¦ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹é€šè¿‡å­¦ä¹ ä¸æ–­çš„è°ƒæ•´å‚æ•°ï¼Œæœ€ç»ˆèƒ½å­¦ä¼š*<code>å¦‚ä½•åˆ¤åˆ«å‡ºé”šæ¡†æ‰€ä»£è¡¨çš„å€™é€‰åŒºåŸŸæ˜¯å¦åŒ…å«ç‰©ä½“ï¼Œå¦‚æœåŒ…å«ç‰©ä½“çš„è¯ï¼Œç‰©ä½“å±äºå“ªä¸ªç±»åˆ«ï¼Œä»¥åŠç‰©ä½“è¾¹ç•Œæ¡†ç›¸å¯¹äºé”šæ¡†ä½ç½®éœ€è¦è°ƒæ•´çš„å¹…åº¦ã€‚</code>*</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4a1b76daa0364112a4cef060bc33663a960528d03c0d434bb86d73bd460bdc66" width = "600"  div align=center"></center><center><br>å›¾7ï¼šé”šæ¡†</br></center><p><br></br></p><p>ä¸åŒçš„æ¨¡å‹å¾€å¾€æœ‰ç€ä¸åŒçš„ç”Ÿæˆé”šæ¡†çš„æ–¹å¼ï¼Œåœ¨åé¢çš„å†…å®¹ä¸­ï¼Œä¼šè¯¦ç»†ä»‹ç»YOLOv3ç®—æ³•é‡Œé¢äº§ç”Ÿé”šæ¡†çš„è§„åˆ™ï¼Œç†è§£äº†å®ƒçš„è®¾è®¡æ–¹æ¡ˆï¼Œä¹Ÿå¾ˆå®¹æ˜“ç±»æ¨åˆ°å…¶å®ƒæ¨¡å‹ä¸Šã€‚</p><h3 id="3ï¼‰äº¤å¹¶æ¯”"><a href="#3ï¼‰äº¤å¹¶æ¯”" class="headerlink" title="3ï¼‰äº¤å¹¶æ¯”"></a><strong>3ï¼‰äº¤å¹¶æ¯”</strong></h3><p>ä¸Šé¢æˆ‘ä»¬ç”»å‡ºäº†ä»¥ç‚¹$(300, 500)$ä¸ºä¸­å¿ƒï¼Œç”Ÿæˆçš„ä¸‰ä¸ªé”šæ¡†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é”šæ¡†A1 ä¸çœŸå®æ¡† G1çš„é‡åˆåº¦æ¯”è¾ƒå¥½ã€‚é‚£ä¹ˆè¿™é‡Œçš„â€œå¥½â€è¯¥å¦‚ä½•å¦‚ä½•é‡åŒ–å‘¢ï¼Ÿ ç›´è§‚åœ°è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è¡¡é‡é”šæ¡†å’ŒçœŸå®è¾¹ç•Œæ¡†ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚åœ¨æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œä½¿ç”¨<strong>äº¤å¹¶æ¯”ï¼ˆIntersection of Unionï¼ŒIoUï¼‰</strong> ä½œä¸ºè¡¡é‡æŒ‡æ ‡ã€‚è¿™ä¸€æ¦‚å¿µæ¥æºäºæ•°å­¦ä¸­çš„é›†åˆï¼Œç”¨æ¥æè¿°ä¸¤ä¸ªé›†åˆ$A$å’Œ$B$ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒç­‰äºä¸¤ä¸ªé›†åˆçš„äº¤é›†é‡Œé¢æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œé™¤ä»¥å®ƒä»¬çš„å¹¶é›†é‡Œé¢æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œå…·ä½“è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p>$$<br>IoU &#x3D; \frac{A\cap B}{A \cup B}<br>$$<br>æˆ‘ä»¬å°†ç”¨è¿™ä¸ªæ¦‚å¿µæ¥æè¿°ä¸¤ä¸ªæ¡†ä¹‹é—´çš„é‡åˆåº¦ã€‚ä¸¤ä¸ªæ¡†å¯ä»¥çœ‹æˆæ˜¯ä¸¤ä¸ªåƒç´ çš„é›†åˆï¼Œå®ƒä»¬çš„äº¤å¹¶æ¯”ç­‰äºä¸¤ä¸ªæ¡†é‡åˆéƒ¨åˆ†çš„é¢ç§¯é™¤ä»¥å®ƒä»¬åˆå¹¶èµ·æ¥çš„é¢ç§¯ã€‚ä¸‹å›¾â€œäº¤é›†â€ä¸­é’è‰²åŒºåŸŸæ˜¯ä¸¤ä¸ªæ¡†çš„é‡åˆé¢ç§¯ï¼Œå›¾â€œå¹¶é›†â€ä¸­è“è‰²åŒºåŸŸæ˜¯ä¸¤ä¸ªæ¡†çš„ç›¸å¹¶é¢ç§¯ã€‚ç”¨è¿™ä¸¤ä¸ªé¢ç§¯ç›¸é™¤å³å¯å¾—åˆ°å®ƒä»¬ä¹‹é—´çš„äº¤å¹¶æ¯”ï¼Œå¦‚ <strong>å›¾5</strong> æ‰€ç¤ºã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/c2095c01997044f8a054d676ab585f3beed4400961ea40379771a1fd6d8bf2ea" width = "500"></center><center><br>å›¾5ï¼šäº¤å¹¶æ¯”</br></center><p><br></br></p><p>å‡è®¾ä¸¤ä¸ªçŸ©å½¢æ¡†Aå’ŒBçš„ä½ç½®åˆ†åˆ«ä¸ºï¼š<br>$$<br>A:  [x_{a1}, y_{a1}, x_{a2}, y_{a2}]<br>$$</p><p>$$<br>B:  [x_{b1}, y_{b1}, x_{b2}, y_{b2}]<br>$$</p><p>å‡å¦‚ä½ç½®å…³ç³»å¦‚ <strong>å›¾6</strong> æ‰€ç¤ºï¼š<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/8abb3525989044fa8f512f82dfcd0f2f244594ff79cc4f14a900a09d464b22b8" width = "300"></center><center><br>å›¾6ï¼šè®¡ç®—äº¤å¹¶æ¯”</br></center><p><br></br></p><p>å¦‚æœäºŒè€…æœ‰ç›¸äº¤éƒ¨åˆ†ï¼Œåˆ™ç›¸äº¤éƒ¨åˆ†å·¦ä¸Šè§’åæ ‡ä¸ºï¼š<br>$$<br>x_1 &#x3D; max(x_{a1}, x_{b1}), \ \ \ \ \ y_1 &#x3D; max(y_{a1}, y_{b1})<br>$$<br>ç›¸äº¤éƒ¨åˆ†å³ä¸‹è§’åæ ‡ä¸ºï¼š<br>$$<br>x_2 &#x3D; min(x_{a2}, x_{b2}), \ \ \ \ \ y_2 &#x3D; min(y_{a2}, y_{b2})<br>$$<br>è®¡ç®—å…ˆäº¤éƒ¨åˆ†é¢ç§¯ï¼ˆ+ 1.0 åŒ…æ‹¬è¾¹ç•Œï¼‰ï¼š<br>$$<br>intersection &#x3D; max(x_2 - x_1 + 1.0, 0) \cdot max(y_2 - y_1 + 1.0, 0)<br>$$<br>çŸ©å½¢æ¡†Aå’ŒBçš„é¢ç§¯åˆ†åˆ«æ˜¯ï¼š<br>$$<br>S_A &#x3D; (x_{a2} - x_{a1} + 1.0) \cdot (y_{a2} - y_{a1} + 1.0)<br>$$</p><p>$$<br>S_B &#x3D; (x_{b2} - x_{b1} + 1.0) \cdot (y_{b2} - y_{b1} + 1.0)<br>$$</p><p>è®¡ç®—ç›¸å¹¶éƒ¨åˆ†é¢ç§¯ï¼š<br>$$<br>union &#x3D; S_A + S_B - intersection<br>$$<br>è®¡ç®—äº¤å¹¶æ¯”ï¼š</p><p>$$<br>IoU &#x3D; \frac{intersection}{union}<br>$$</p><hr><blockquote><p><strong>æ€è€ƒï¼š</strong></p><p>ä¸¤ä¸ªçŸ©å½¢æ¡†ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ï¼Œé™¤äº†ä¸Šé¢çš„ç¤ºæ„å›¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›å¯èƒ½ï¼Ÿ</p><ul><li>ä¸¤ä¸ªçŸ©å½¢æ¡†ç›¸èšçš„å¾ˆè¿œï¼Œæ²¡æœ‰ç›¸äº¤éƒ¨åˆ†ï¼Œåˆ™IoUä¸º0ï¼›</li><li>ä¸¤ä¸ªçŸ©å½¢æ¡†ç›¸åˆ‡ã€å·¦ä¸Šè§’å’Œå³ä¸‹è§’ç›¸åˆ‡ã€‘ï¼Œè¿™é‡Œæˆ‘ä»¬è®¤ä¸ºç›¸äº¤äº†ä¸€ä¸ªåƒç´ ç‚¹â€˜ï¼›</li><li>ä¸¤ä¸ªçŸ©å½¢æ¡†çš„ç›¸äº¤éƒ¨åˆ†å¾ˆå°ï¼›</li><li>ä¸¤ä¸ªçŸ©å½¢æ¡†çš„çš„ç›¸äº¤éƒ¨åˆ†å¾ˆå¤§ã€‚</li></ul></blockquote><hr><p>äº¤å¹¶æ¯”è®¡ç®—ç¨‹åºå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•ä¸€ï¼šè®¡ç®—IoUï¼ŒçŸ©å½¢æ¡†çš„åæ ‡å½¢å¼ä¸ºxyxyï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«ä¿å­˜åœ¨box_utils.pyæ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">box_iou_xyxy</span>(<span class="params">box1, box2</span>):</span><br><span class="line">    <span class="comment"># è·å–box1å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡</span></span><br><span class="line">    x1min, y1min, x1max, y1max = box1[<span class="number">0</span>], box1[<span class="number">1</span>], box1[<span class="number">2</span>], box1[<span class="number">3</span>]</span><br><span class="line">    <span class="comment"># è®¡ç®—box1çš„é¢ç§¯</span></span><br><span class="line">    s1 = (y1max - y1min + <span class="number">1.</span>) * (x1max - x1min + <span class="number">1.</span>)</span><br><span class="line">    <span class="comment"># è·å–box2å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡</span></span><br><span class="line">    x2min, y2min, x2max, y2max = box2[<span class="number">0</span>], box2[<span class="number">1</span>], box2[<span class="number">2</span>], box2[<span class="number">3</span>]</span><br><span class="line">    <span class="comment"># è®¡ç®—box2çš„é¢ç§¯</span></span><br><span class="line">    s2 = (y2max - y2min + <span class="number">1.</span>) * (x2max - x2min + <span class="number">1.</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¡ç®—ç›¸äº¤çŸ©å½¢æ¡†çš„åæ ‡</span></span><br><span class="line">    xmin = np.maximum(x1min, x2min)</span><br><span class="line">    ymin = np.maximum(y1min, y2min)</span><br><span class="line">    xmax = np.minimum(x1max, x2max)</span><br><span class="line">    ymax = np.minimum(y1max, y2max)</span><br><span class="line">    <span class="comment"># è®¡ç®—ç›¸äº¤çŸ©å½¢è¡Œçš„é«˜åº¦ã€å®½åº¦ã€é¢ç§¯</span></span><br><span class="line">    inter_h = np.maximum(ymax - ymin + <span class="number">1.</span>, <span class="number">0.</span>)</span><br><span class="line">    inter_w = np.maximum(xmax - xmin + <span class="number">1.</span>, <span class="number">0.</span>)</span><br><span class="line">    intersection = inter_h * inter_w</span><br><span class="line">    <span class="comment"># è®¡ç®—ç›¸å¹¶é¢ç§¯</span></span><br><span class="line">    union = s1 + s2 - intersection</span><br><span class="line">    <span class="comment"># è®¡ç®—äº¤å¹¶æ¯”</span></span><br><span class="line">    iou = intersection / union</span><br><span class="line">    <span class="keyword">return</span> iou</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bbox1 = [<span class="number">100.</span>, <span class="number">100.</span>, <span class="number">200.</span>, <span class="number">200.</span>]</span><br><span class="line">bbox2 = [<span class="number">120.</span>, <span class="number">120.</span>, <span class="number">220.</span>, <span class="number">220.</span>]</span><br><span class="line">iou = box_iou_xyxy(bbox1, bbox2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;IoU is &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(iou))  </span><br></pre></td></tr></table></figure><pre><code>IoU is 0.47402644317607107</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•äºŒï¼šè®¡ç®—IoUï¼ŒçŸ©å½¢æ¡†çš„åæ ‡å½¢å¼ä¸ºxywh</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">box_iou_xywh</span>(<span class="params">box1, box2</span>):</span><br><span class="line">    x1min, y1min = box1[<span class="number">0</span>] - box1[<span class="number">2</span>]/<span class="number">2.0</span>, box1[<span class="number">1</span>] - box1[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    x1max, y1max = box1[<span class="number">0</span>] + box1[<span class="number">2</span>]/<span class="number">2.0</span>, box1[<span class="number">1</span>] + box1[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    s1 = box1[<span class="number">2</span>] * box1[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">    x2min, y2min = box2[<span class="number">0</span>] - box2[<span class="number">2</span>]/<span class="number">2.0</span>, box2[<span class="number">1</span>] - box2[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    x2max, y2max = box2[<span class="number">0</span>] + box2[<span class="number">2</span>]/<span class="number">2.0</span>, box2[<span class="number">1</span>] + box2[<span class="number">3</span>]/<span class="number">2.0</span></span><br><span class="line">    s2 = box2[<span class="number">2</span>] * box2[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">    xmin = np.maximum(x1min, x2min)</span><br><span class="line">    ymin = np.maximum(y1min, y2min)</span><br><span class="line">    xmax = np.minimum(x1max, x2max)</span><br><span class="line">    ymax = np.minimum(y1max, y2max)</span><br><span class="line">    inter_h = np.maximum(ymax - ymin, <span class="number">0.</span>)</span><br><span class="line">    inter_w = np.maximum(xmax - xmin, <span class="number">0.</span>)</span><br><span class="line">    intersection = inter_h * inter_w</span><br><span class="line"></span><br><span class="line">    union = s1 + s2 - intersection</span><br><span class="line">    iou = intersection / union</span><br><span class="line">    <span class="keyword">return</span> iou</span><br><span class="line"></span><br><span class="line">bbox1 = [<span class="number">100.</span>, <span class="number">100.</span>, <span class="number">200.</span>, <span class="number">200.</span>]</span><br><span class="line">bbox2 = [<span class="number">120.</span>, <span class="number">120.</span>, <span class="number">220.</span>, <span class="number">220.</span>]</span><br><span class="line">iou = box_iou_xywh(bbox1, bbox2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;IoU is &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(iou))  </span><br></pre></td></tr></table></figure><pre><code>IoU is 0.6902485659655831</code></pre><p>ä¸ºäº†ç›´è§‚çš„å±•ç¤ºäº¤å¹¶æ¯”çš„å¤§å°è·Ÿé‡åˆç¨‹åº¦ä¹‹é—´çš„å…³ç³»ï¼Œ<strong>å›¾7</strong> ç¤ºæ„äº†ä¸åŒäº¤å¹¶æ¯”ä¸‹ä¸¤ä¸ªæ¡†ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ï¼Œä» IoU &#x3D; 0.95 åˆ° IoU &#x3D; 0.<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/52faaa317c6c4de59088de70e7ba0d478969aacffa6e40b4998a3ca9203a9ee2" width = "500"></center><center><br>å›¾7ï¼šä¸åŒäº¤å¹¶æ¯”ä¸‹ä¸¤ä¸ªæ¡†ä¹‹é—´ç›¸å¯¹ä½ç½®ç¤ºæ„å›¾</br></center><p><br></br></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ é«˜çº§_è®¡ç®—æœºè§†è§‰ä¹‹ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 5.4-å›¾åƒè¯†åˆ«æ¨¡å‹å…³é”®ç»„ä»¶ä¹‹å›¾åƒå¢å¹¿ä¸è¿ç§»å­¦ä¹ </title>
      <link href="/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.4-%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6%E4%B9%8B%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%B9%BF%E4%B8%8E%E5%BE%AE%E8%B0%83/"/>
      <url>/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.4-%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6%E4%B9%8B%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%B9%BF%E4%B8%8E%E5%BE%AE%E8%B0%83/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å›¾åƒå¢å¹¿"><a href="#ä¸€ã€å›¾åƒå¢å¹¿" class="headerlink" title="ä¸€ã€å›¾åƒå¢å¹¿"></a>ä¸€ã€å›¾åƒå¢å¹¿</h1><p>:label:<code>sec_image_augmentation</code></p><p>åœ¨<code>Alexnet</code>ä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡å¤§å‹æ•°æ®é›†æ˜¯æˆåŠŸåº”ç”¨æ·±åº¦ç¥ç»ç½‘ç»œçš„å…ˆå†³æ¡ä»¶ã€‚å›¾åƒå¢å¹¿åœ¨å¯¹è®­ç»ƒå›¾åƒè¿›è¡Œä¸€ç³»åˆ—çš„éšæœºå˜åŒ–ä¹‹åï¼Œç”Ÿæˆç›¸ä¼¼ä½†ä¸åŒçš„è®­ç»ƒæ ·æœ¬ï¼Œä»è€Œæ‰©å¤§äº†è®­ç»ƒé›†çš„è§„æ¨¡ã€‚<br>æ•°æ®å¢å¹¿æ˜¯æ·±åº¦å­¦ä¹ ä¸­å¸¸ç”¨çš„æŠ€å·§ä¹‹ä¸€ï¼Œä¸»è¦ç”¨äºå¢åŠ è®­ç»ƒæ•°æ®é›†ã€å¢åŠ åœ¨å½“å‰æ•°æ®é›†ä¸Šï¼Œå¹¶åœ¨é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¸ä¼šå ç”¨æœ¬åœ°å†…å­˜ã€‘ï¼Œè®©æ•°æ®é›†å°½å¯èƒ½çš„å¤šæ ·åŒ–ï¼Œä½¿å¾—è®­ç»ƒçš„æ¨¡å‹å…·æœ‰æ›´å¼ºçš„æ³›åŒ–èƒ½åŠ›ã€‚ç°æœ‰çš„å„å¤§æ·±åº¦å­¦ä¹ æ¡†æ¶éƒ½å·²ç»è‡ªå¸¦äº†æ•°æ®å¢å¹¿ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¹¶éæ‰€æœ‰çš„å¢å¹¿æ–¹å¼éƒ½é€‚ç”¨å½“å‰çš„è®­ç»ƒæ•°æ®ï¼Œä½ éœ€è¦æ ¹æ®è‡ªå·±çš„æ•°æ®é›†ç‰¹å¾æ¥ç¡®å®šåº”è¯¥ä½¿ç”¨å“ªå‡ ç§æ•°æ®å¢å¹¿æ–¹å¼ã€‚</p><h2 id="1-1-æ•°æ®ä¸è¶³çš„é—®é¢˜"><a href="#1-1-æ•°æ®ä¸è¶³çš„é—®é¢˜" class="headerlink" title="1.1 æ•°æ®ä¸è¶³çš„é—®é¢˜"></a>1.1 æ•°æ®ä¸è¶³çš„é—®é¢˜</h2><p>æˆ‘ä»¬å¸¸å¸¸ä¼šé‡åˆ°æ•°æ®ä¸è¶³çš„æƒ…å†µã€‚æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šç›®å‰ç°åœ¨æµè¡Œçš„æœ€å…ˆè¿›çš„ç¥ç»ç½‘ç»œéƒ½æ˜¯æˆåƒä¸Šä¸‡çš„å›¾ç‰‡æ•°æ®ï¼Œè¶³å¤Ÿå¤§çš„æ•°æ®é›†æ˜¯æ•ˆæœå¥½çš„ä¿è¯ã€‚<br>ä½†æ˜¯åœ¨è‡ªå·±çš„å°æ•°æ®é›†ä¸Šèƒ½å¤Ÿä½¿ç¥ç»ç½‘ç»œè¡¨ç°å¥½å—ï¼Ÿç­”æ¡ˆæ˜¯ä¸ç¡®å®šçš„ã€‚</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿›è¡Œæ¨¡å‹è®­ç»ƒæ—¶ï¼Œæ•°æ®è¶Šå¤š,å¾—åˆ°çš„ç»“æœè¶Šå‡†ç¡®ã€‚é‚£ä¹ˆæ€ä¹ˆè®©æ•°æ®å˜å¾—å¤šå‘¢ï¼Ÿè¿™æ—¶ï¼Œä½¿ç”¨åˆç†çš„æ•°æ®å¢å¼ºï¼Œä¾¿è§£å†³äº†æ•°æ®ä¸è¶³çš„é—®é¢˜ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/b75a81055f1b423192d8a8dd073d3504c91eb6f2eb8f4390a566cc07a829d9e4" width="500" hegiht="" ></center><center><br>å›¾1ï¼šæ‰©å……æ•°æ®</br></center><p><br></br></p><p>å°±å¦‚ä¸Šå›¾çš„çŒ«å’ªï¼Œä¸è®ºæ˜¯å·¦è½¬å¤šå°‘åº¦ï¼Œå³è½¬å¤šå°‘åº¦ï¼Œè™½ç„¶å®ƒéƒ½æ˜¯ä¸€åªçŒ«å’ªï¼Œä½†æ˜¯<strong>æ¯ä¸€ä¸ªå›¾ç‰‡å´ä¸æ˜¯åŒä¸€ä¸ªæ•°æ®</strong>ï¼Œè¿™å°±æ˜¯å¯¹æ•°æ®çš„å¢å¼ºå¤„ç†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼è£å‰ªå›¾åƒï¼Œä½¿æ„Ÿå…´è¶£çš„å¯¹è±¡å‡ºç°åœ¨ä¸åŒçš„ä½ç½®ï¼Œå‡å°‘æ¨¡å‹å¯¹äºå¯¹è±¡å‡ºç°ä½ç½®çš„ä¾èµ–ï¼›æˆ‘ä»¬è¿˜å¯ä»¥è°ƒæ•´äº®åº¦ã€é¢œè‰²ç­‰å› ç´ æ¥é™ä½æ¨¡å‹å¯¹é¢œè‰²çš„æ•æ„Ÿåº¦ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚<br>å¯ä»¥è¯´ï¼Œå›¾åƒå¢å¹¿æŠ€æœ¯å¯¹äºAlexNetçš„æˆåŠŸæ˜¯å¿…ä¸å¯å°‘çš„ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºè¿™é¡¹å¹¿æ³›åº”ç”¨äºè®¡ç®—æœºè§†è§‰çš„æŠ€æœ¯ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œæ•°æ®å¢å¼ºæ˜¯æŒ‡å¢åŠ ä¸€ä¸ªå·²æœ‰çš„æ•°æ®é›†ï¼Œä½¿å¾—å…¶æ‹¥æœ‰æ›´å¤šçš„å¤šæ ·æ€§ï¼Œè¿™é€šå¸¸éƒ½æ˜¯åœ¨çº¿ç”Ÿæˆçš„ã€‚æˆ‘ä»¬è¯»å…¥ä¸€å¼ åŸå§‹å›¾ç‰‡ï¼Œåœ¨ä¹‹åå¯¹å®ƒéšæœºåšå¢å¼ºï¼Œå†å°†å¤„ç†å®Œçš„å›¾ç‰‡æ”¾å…¥æ¨¡å‹ä¸­è¿›è¡Œè®­ç»ƒã€‚<br>å½“ç„¶ï¼Œæµ‹è¯•çš„æ—¶å€™å°±ä¸éœ€è¦è¿›è¡Œæ•°æ®å¢å¼ºäº†ï¼Œå› æ­¤è¿™ç›¸å½“äºåœ¨è®­ç»ƒæ•°æ®ä¸­åŠ å…¥äº†æ­£åˆ™é¡¹ã€‚é™¤äº†å›¾ç‰‡ä¸Šçš„æ•°æ®å¢å¼ºï¼Œè¿™ä¸€æŠ€æœ¯åœ¨è¯­éŸ³ç±»æ•°æ®å’Œæ–‡æœ¬ç±»æ•°æ®ä¸ŠåŒæ ·é€‚ç”¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚ä¸‹é¢çš„æ“ä½œï¼šæ›´æ”¹å›¾åƒå°ºå¯¸å’Œæ›´æ”¹æ¨¡å¼ã€‚</p><blockquote><p>ä¸€èˆ¬å›¾åƒéƒ½æ˜¯RGBä¸‰ä¸ªé€šé“ï¼Œä½†æ˜¯æœ‰ä¸€ç§å›¾ç‰‡æ ¼å¼<code>jpg</code>æœ‰å››ä¸ªé€šé“ï¼ŒRGBAã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;æ›´æ”¹åŸå›¾åƒ&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å…¥ä¸€å¼ å›¾ç‰‡</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ•°æ®å½¢çŠ¶ï¼Œå…¶å½¢çŠ¶æ˜¯[H, W, é€šé“æ•°]</span></span><br><span class="line">img1 = Image.<span class="built_in">open</span>(<span class="string">&#x27;./work/cat.jpg&#x27;</span>)</span><br><span class="line">img1_shape = np.array(img1)</span><br><span class="line"><span class="built_in">print</span>(img1_shape.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ”¹å°ºå¯¸</span></span><br><span class="line">img2 = img1.resize((<span class="number">500</span>,<span class="number">400</span>))</span><br><span class="line">img2_shape = np.array(img2) </span><br><span class="line"><span class="built_in">print</span>(img2_shape.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ”¹æ¨¡å¼</span></span><br><span class="line"><span class="comment"># RGBA å³çº¢è‰²ã€ç»¿è‰²ã€è“è‰²ã€é€æ˜åº¦(è‹±è¯­:Red, Green, Blueã€Alpha)ã€‚</span></span><br><span class="line"><span class="built_in">print</span>(img1)</span><br><span class="line">img1 = img1.convert(<span class="string">&quot;RGB&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(img1)</span><br><span class="line">img1.save(<span class="string">&quot;cat_RGB.jpg&quot;</span>)<span class="comment"># ä¿å­˜å›¾ç‰‡</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶ä»¥ä¸Šæ–¹æ³•å®Œç¾çš„å®ç°äº†æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¤ªä½æ•ˆäº†ã€‚ä¸‹é¢æˆ‘ä»¬ä¼šä»‹ç»å‡ ç§å¸¸è§çš„å›¾åƒå¢å¹¿æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåœ°ä½¿ç”¨é£æ¡¨APIæ¥å®ç°è¿™äº›æ“ä½œã€‚</p><h2 id="1-2-å¸¸ç”¨çš„å›¾åƒå¢å¹¿æ–¹æ³•"><a href="#1-2-å¸¸ç”¨çš„å›¾åƒå¢å¹¿æ–¹æ³•" class="headerlink" title="1.2 å¸¸ç”¨çš„å›¾åƒå¢å¹¿æ–¹æ³•"></a>1.2 å¸¸ç”¨çš„å›¾åƒå¢å¹¿æ–¹æ³•</h2><p>åœ¨å¯¹å¸¸ç”¨å›¾åƒå¢å¹¿æ–¹æ³•çš„æ¢ç´¢æ—¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢è¿™ä¸ªå°ºå¯¸ä¸º$400\times 500$çš„å›¾åƒä½œä¸ºç¤ºä¾‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">&#x27;./work/animal.jpg&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;lesser panda&#x27;</span>)</span><br><span class="line">plt.imshow(img)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/53.png" alt="png"></p><p>å¤§å¤šæ•°å›¾åƒå¢å¹¿æ–¹æ³•éƒ½å…·æœ‰ä¸€å®šçš„éšæœºæ€§ã€‚ä¸ºäº†ä¾¿äºè§‚å¯Ÿå›¾åƒå¢å¹¿çš„æ•ˆæœï¼Œæˆ‘ä»¬ä¸‹é¢å®šä¹‰è¾…åŠ©å‡½æ•°<code>apply</code>ã€‚æ­¤å‡½æ•°åœ¨è¾“å…¥å›¾åƒ<code>img</code>ä¸Šå¤šæ¬¡è¿è¡Œå›¾åƒå¢å¹¿æ–¹æ³•<code>aug</code>å¹¶æ˜¾ç¤ºæ‰€æœ‰ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">apply</span>(<span class="params"></span></span><br><span class="line"><span class="params">    img, </span></span><br><span class="line"><span class="params">    aug,</span></span><br><span class="line"><span class="params">    num_rows=<span class="number">2</span>,</span></span><br><span class="line"><span class="params">    num_cols=<span class="number">5</span>, </span></span><br><span class="line"><span class="params">    scale=<span class="number">1.5</span>,</span></span><br><span class="line"><span class="params">    titles=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    img, å›¾ç‰‡ï¼šä¼ å…¥çš„å›¾ç‰‡</span></span><br><span class="line"><span class="string">    aug, è§„åˆ™ï¼šå¯¹å›¾ç‰‡è¿›è¡Œå˜æ¢çš„æ–¹å¼</span></span><br><span class="line"><span class="string">    num_rows=2, è¡Œæ•°</span></span><br><span class="line"><span class="string">    num_cols=5, åˆ—æ•°</span></span><br><span class="line"><span class="string">    scale=1.5, ç¼©æ”¾ç³»æ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    Y = [aug(img) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_rows * num_cols)]</span><br><span class="line">    figsize = (num_cols * scale, num_rows * scale)</span><br><span class="line">    _, axes = plt.subplots(num_rows, num_cols, figsize=figsize)</span><br><span class="line">    axes = axes.flatten()</span><br><span class="line">    <span class="keyword">for</span> i, (ax, img) <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">zip</span>(axes, Y)):</span><br><span class="line">        <span class="keyword">if</span> paddle.is_tensor(img):</span><br><span class="line">        <span class="comment"># Tensor Image</span></span><br><span class="line">            ax.imshow(img.numpy())<span class="comment"># å°†å¼ é‡ç±»å‹è½¬æ¢ä¸ºæ•°å€¼ç±»å‹</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># PIL Image</span></span><br><span class="line">            ax.imshow(img)</span><br><span class="line">        ax.axes.get_xaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        ax.axes.get_yaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">if</span> titles:</span><br><span class="line">            ax.set_title(titles[i])</span><br><span class="line">    <span class="keyword">return</span> axes</span><br></pre></td></tr></table></figure><h3 id="1ï¼‰ç¿»è½¬"><a href="#1ï¼‰ç¿»è½¬" class="headerlink" title="1ï¼‰ç¿»è½¬"></a><strong>1ï¼‰ç¿»è½¬</strong></h3><p>å·¦å³ç¿»è½¬å›¾åƒé€šå¸¸ä¸ä¼šæ”¹å˜å¯¹è±¡çš„ç±»åˆ«ã€‚è¿™æ˜¯æœ€æ—©ä¸”æœ€å¹¿æ³›ä½¿ç”¨çš„å›¾åƒå¢å¹¿æ–¹æ³•ä¹‹ä¸€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>transforms</code>æ¨¡å—æ¥åˆ›å»º<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/transforms/RandomHorizontalFlip_cn.html#randomhorizontalflip">RandomHorizontalFlip</a>å®ä¾‹ï¼Œè¿™æ ·å°±å„æœ‰50%çš„å‡ ç‡ä½¿å›¾åƒå‘å·¦æˆ–å‘å³ç¿»è½¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RandomHorizontalFlip åŸºäºæ¦‚ç‡æ¥æ‰§è¡Œå›¾ç‰‡çš„æ°´å¹³ç¿»è½¬ã€‚</span></span><br><span class="line"><span class="comment"># prob (float) - å›¾ç‰‡æ‰§è¡Œæ°´å¹³ç¿»è½¬çš„æ¦‚ç‡ï¼Œé»˜è®¤0.5</span></span><br><span class="line">apply(img, vision.transforms.RandomHorizontalFlip())</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/54.png" alt="png"></p><p>ä¸Šä¸‹ç¿»è½¬å›¾åƒä¸å¦‚å·¦å³å›¾åƒç¿»è½¬é‚£æ ·å¸¸ç”¨ï¼ŒåŸå› åœ¨äºå¾ˆæœ‰å¯èƒ½é€ æˆè¯¯è§£ï¼Œä¾‹å¦‚å»ºç­‘ç‰©ç¿»è½¬ä¹‹åå°±å®Œå…¨ä¸åŒã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/transforms/RandomVerticalFlip_cn.html#randomverticalflip">RandomVerticalFlip</a>å®ä¾‹ï¼Œä½¿å›¾åƒå„æœ‰50%çš„å‡ ç‡å‘ä¸Šæˆ–å‘ä¸‹ç¿»è½¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RandomVerticalFlip åŸºäºæ¦‚ç‡æ¥æ‰§è¡Œå›¾ç‰‡çš„å‚ç›´ç¿»è½¬ã€‚</span></span><br><span class="line"><span class="comment"># prob (float) - æ‰§è¡Œå›¾ç‰‡å‚ç›´ç¿»è½¬çš„æ¦‚ç‡ï¼Œé»˜è®¤0.5</span></span><br><span class="line">apply(img, vision.transforms.RandomVerticalFlip())</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/55.png" alt="png"></p><h3 id="2ï¼‰è£å‰ªåˆ‡å‰²"><a href="#2ï¼‰è£å‰ªåˆ‡å‰²" class="headerlink" title="2ï¼‰è£å‰ªåˆ‡å‰²"></a><strong>2ï¼‰è£å‰ªåˆ‡å‰²</strong></h3><p>åœ¨æˆ‘ä»¬ä½¿ç”¨çš„ç¤ºä¾‹å›¾åƒä¸­ï¼Œä¸»è§’ä½äºå›¾åƒçš„ä¸­é—´ï¼Œä½†å¹¶éæ‰€æœ‰å›¾åƒéƒ½æ˜¯è¿™æ ·ã€‚åœ¨æ± åŒ–å±‚ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬è§£é‡Šäº†æ± åŒ–å±‚å¯ä»¥é™ä½å·ç§¯å±‚å¯¹ç›®æ ‡ä½ç½®çš„æ•æ„Ÿæ€§ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹å›¾åƒè¿›è¡Œéšæœºè£å‰ªï¼Œä½¿ç‰©ä½“ä»¥ä¸åŒçš„æ¯”ä¾‹å‡ºç°åœ¨å›¾åƒçš„ä¸åŒä½ç½®ï¼Œè¿™ä¹Ÿå¯ä»¥é™ä½æ¨¡å‹å¯¹ç›®æ ‡ä½ç½®çš„æ•æ„Ÿæ€§ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/transforms/RandomResizedCrop_cn.html#randomresizedcrop">éšæœºè£å‰ª</a>ä¸€ä¸ªé¢ç§¯ä¸ºåŸå§‹é¢ç§¯10%åˆ°100%çš„åŒºåŸŸï¼Œè¯¥åŒºåŸŸçš„å®½é«˜æ¯”ä»0.5åˆ°2ä¹‹é—´éšæœºå–å€¼ã€‚ç„¶åï¼ŒåŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦éƒ½è¢«ç¼©æ”¾åˆ°200åƒç´ ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œ$a$å’Œ$b$ä¹‹é—´çš„éšæœºæ•°æŒ‡çš„æ˜¯åœ¨åŒºé—´$[a, b]$ä¸­é€šè¿‡å‡åŒ€é‡‡æ ·è·å¾—çš„è¿ç»­å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RandomResizedCrop å°†è¾“å…¥å›¾åƒæŒ‰ç…§éšæœºå¤§å°å’Œé•¿å®½æ¯”è¿›è¡Œè£å‰ªã€‚</span></span><br><span class="line">shape_aug = vision.transforms.RandomResizedCrop(</span><br><span class="line">    (<span class="number">200</span>, <span class="number">200</span>), <span class="comment"># å®½åº¦å’Œé«˜åº¦éƒ½è¢«ç¼©æ”¾åˆ°200åƒç´ </span></span><br><span class="line">    scale=(<span class="number">0.1</span>, <span class="number">1</span>), <span class="comment"># é¢ç§¯ä¸ºåŸå§‹é¢ç§¯10%åˆ°100%çš„åŒºåŸŸ, é»˜è®¤å€¼ï¼š0.08è‡³1.0</span></span><br><span class="line">    ratio=(<span class="number">0.5</span>, <span class="number">2</span>) <span class="comment"># å®½é«˜æ¯”ä»0.5åˆ°2ä¹‹é—´éšæœºå–å€¼, é»˜è®¤å€¼ï¼š3./4è‡³4./3</span></span><br><span class="line">)</span><br><span class="line">apply(img, shape_aug)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/56.png" alt="png"></p><h3 id="3ï¼‰æ”¹å˜é¢œè‰²"><a href="#3ï¼‰æ”¹å˜é¢œè‰²" class="headerlink" title="3ï¼‰æ”¹å˜é¢œè‰²"></a><strong>3ï¼‰æ”¹å˜é¢œè‰²</strong></h3><p>å¦ä¸€ç§å¢å¹¿æ–¹æ³•æ˜¯<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/transforms/ColorJitter_cn.html#colorjitter">æ”¹å˜é¢œè‰²</a>ã€‚æˆ‘ä»¬å¯ä»¥æ”¹å˜å›¾åƒé¢œè‰²çš„å››ä¸ªæ–¹é¢ï¼šäº®åº¦ï¼ˆbrightnessï¼‰ã€å¯¹æ¯”åº¦ï¼ˆcontrastï¼‰ã€é¥±å’Œåº¦ï¼ˆsaturationï¼‰å’Œè‰²è°ƒï¼ˆhueï¼‰ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬éšæœºæ›´æ”¹å›¾åƒçš„å››ä¸ªæ•°å€¼ï¼Œéšæœºå€¼ä¸ºåŸå§‹å›¾åƒçš„50%ï¼ˆ$1-0.5$ï¼‰åˆ°150%ï¼ˆ$1+0.5$ï¼‰ä¹‹é—´ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ColorJitter éšæœºè°ƒæ•´å›¾åƒçš„äº®åº¦ã€å¯¹æ¯”åº¦ã€é¥±å’Œåº¦å’Œè‰²è°ƒã€‚</span></span><br><span class="line">apply(img, </span><br><span class="line">    vision.transforms.ColorJitter(</span><br><span class="line">        brightness=<span class="number">0.5</span>,</span><br><span class="line">        contrast=<span class="number">0</span>,</span><br><span class="line">        saturation=<span class="number">0</span>,</span><br><span class="line">        hue=<span class="number">0</span></span><br><span class="line">        )</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/57.png" alt="png"></p><p>æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ª<code>RandomColorJitter</code>å®ä¾‹ï¼Œå¹¶è®¾ç½®åŒæ—¶éšæœºæ›´æ”¹å›¾åƒçš„äº®åº¦ï¼ˆ<code>brightness</code>ï¼‰ã€å¯¹æ¯”åº¦ï¼ˆ<code>contrast</code>ï¼‰ã€é¥±å’Œåº¦ï¼ˆ<code>saturation</code>ï¼‰å’Œè‰²è°ƒï¼ˆ<code>hue</code>ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">color_aug = vision.transforms.ColorJitter(</span><br><span class="line">    brightness=<span class="number">0.5</span>, </span><br><span class="line">    contrast=<span class="number">0.5</span>, </span><br><span class="line">    saturation=<span class="number">0.5</span>, </span><br><span class="line">    hue=<span class="number">0.5</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">apply(img, color_aug)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/58.png" alt="png"></p><h3 id="4ï¼‰ç»“åˆå¤šç§å›¾åƒå¢å¹¿æ–¹æ³•"><a href="#4ï¼‰ç»“åˆå¤šç§å›¾åƒå¢å¹¿æ–¹æ³•" class="headerlink" title="4ï¼‰ç»“åˆå¤šç§å›¾åƒå¢å¹¿æ–¹æ³•"></a><strong>4ï¼‰ç»“åˆå¤šç§å›¾åƒå¢å¹¿æ–¹æ³•</strong></h3><p>åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å°†ç»“åˆå¤šç§å›¾åƒå¢å¹¿æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ª<code>Compose</code>å®ä¾‹æ¥ç»¼åˆä¸Šé¢å®šä¹‰çš„ä¸åŒçš„å›¾åƒå¢å¹¿æ–¹æ³•ï¼Œå¹¶å°†å®ƒä»¬åº”ç”¨åˆ°æ¯ä¸ªå›¾åƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">augs = vision.transforms.Compose(</span><br><span class="line">    [</span><br><span class="line">    vision.transforms.RandomHorizontalFlip(),</span><br><span class="line">    color_aug,</span><br><span class="line">    shape_aug,</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">apply(img, augs)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/59.png" alt="png"></p><h2 id="1-3-åº”ç”¨å›¾åƒå¢å¹¿"><a href="#1-3-åº”ç”¨å›¾åƒå¢å¹¿" class="headerlink" title="1.3 åº”ç”¨å›¾åƒå¢å¹¿"></a>1.3 åº”ç”¨å›¾åƒå¢å¹¿</h2><p>è®©æˆ‘ä»¬ä½¿ç”¨å›¾åƒå¢å¹¿æ¥è®­ç»ƒæ¨¡å‹ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<a href="https://www.cs.toronto.edu/~kriz/cifar.html">CIFAR-10æ•°æ®é›†</a>CIFAR-10æ•°æ®é›†ä¸­å¯¹è±¡çš„é¢œè‰²å’Œå¤§å°å·®å¼‚æ›´æ˜æ˜¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">all_images = vision.datasets.Cifar10(mode=<span class="string">&#x27;train&#x27;</span>, data_file=<span class="string">&#x27;data/data149232/cifar-10-python.tar.gz&#x27;</span>, download=<span class="literal">False</span>)</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line">ppl.show_images([all_images[i][<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>)], <span class="number">4</span>, <span class="number">8</span>, scale=<span class="number">0.8</span>);</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/60.png" alt="png"></p><p>ä¸ºäº†åœ¨é¢„æµ‹è¿‡ç¨‹ä¸­å¾—åˆ°ç¡®åˆ‡çš„ç»“æœï¼Œæˆ‘ä»¬é€šå¸¸å¯¹è®­ç»ƒæ ·æœ¬åªè¿›è¡Œå›¾åƒå¢å¹¿ï¼Œä¸”åœ¨é¢„æµ‹è¿‡ç¨‹ä¸­ä¸ä½¿ç”¨éšæœºæ“ä½œçš„å›¾åƒå¢å¹¿ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªä½¿ç”¨æœ€ç®€å•çš„éšæœºå·¦å³ç¿»è½¬ã€‚<br>æ­¤å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>ToTensor</code>å®ä¾‹å°†ä¸€æ‰¹å›¾åƒè½¬æ¢ä¸ºæ·±åº¦å­¦ä¹ æ¡†æ¶æ‰€è¦æ±‚çš„æ ¼å¼ï¼Œå³å½¢çŠ¶ä¸ºï¼ˆæ‰¹é‡å¤§å°ï¼Œé€šé“æ•°ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼‰çš„32ä½æµ®ç‚¹æ•°ï¼Œå–å€¼èŒƒå›´ä¸º0åˆ°1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vision.transforms.Compose å°†ç”¨äºæ•°æ®é›†é¢„å¤„ç†çš„æ¥å£ä»¥åˆ—è¡¨çš„æ–¹å¼è¿›è¡Œç»„åˆ</span></span><br><span class="line"><span class="comment"># åº”ç”¨ç®€å•çš„å·¦å³ç¿»è½¬</span></span><br><span class="line"><span class="comment"># ToTensor ç”Ÿæˆæ•°æ®æ ¼å¼ä¸ºï¼ˆæ‰¹é‡å¤§å°ï¼Œé€šé“æ•°é‡ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼‰</span></span><br><span class="line"></span><br><span class="line">train_augs = vision.transforms.Compose([</span><br><span class="line">    vision.transforms.RandomHorizontalFlip(),</span><br><span class="line">    vision.transforms.ToTensor()</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">test_augs = vision.transforms.Compose([</span><br><span class="line">    vision.transforms.ToTensor()])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ•°æ®</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_cifar10</span>(<span class="params">is_train, augs, batch_size</span>):</span><br><span class="line">    <span class="keyword">if</span> is_train:</span><br><span class="line">        dataset = vision.datasets.Cifar10(</span><br><span class="line">            mode=<span class="string">&#x27;train&#x27;</span>, data_file=<span class="string">&#x27;data/data149232/cifar-10-python.tar.gz&#x27;</span>, transform=augs, download=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        dataset = vision.datasets.Cifar10(</span><br><span class="line">            mode=<span class="string">&#x27;test&#x27;</span>, data_file=<span class="string">&#x27;data/data149232/cifar-10-python.tar.gz&#x27;</span>, transform=augs, download=<span class="literal">True</span>)</span><br><span class="line"> </span><br><span class="line">    dataloader = paddle.io.DataLoader(dataset, </span><br><span class="line">                                    batch_size=batch_size,</span><br><span class="line">                                    shuffle=is_train,</span><br><span class="line">                                    num_workers=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> dataloader</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_iter = load_cifar10(<span class="literal">True</span>, train_augs, <span class="number">10</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> X,y <span class="keyword">in</span> train_iter:</span><br><span class="line">    <span class="built_in">print</span>(X.shape, y.shape)</span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure><pre><code>[10, 3, 32, 32] [10]</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±æ„é€ å¥½äº†æ•°æ®è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢ç« èŠ‚è®²çš„å†…å®¹æ¥å°†å›¾åƒå¢å¹¿æŠ€æœ¯åº”ç”¨åˆ°è‡ªå·±çš„å›¾åƒè¯†åˆ«æ¨¡å‹ä¸­ã€‚</p><h1 id="äºŒã€å¾®è°ƒ"><a href="#äºŒã€å¾®è°ƒ" class="headerlink" title="äºŒã€å¾®è°ƒ"></a>äºŒã€å¾®è°ƒ</h1><p>:label:<code>sec_fine_tuning</code></p><p>åœ¨å‰é¢çš„ä¸€äº›ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åœ¨åªæœ‰6ä¸‡å¼ å›¾åƒçš„MNISTè®­ç»ƒæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹ã€‚æˆ‘ä»¬è¿˜æè¿°äº†å­¦æœ¯ç•Œå½“ä¸‹ä½¿ç”¨æœ€å¹¿æ³›çš„å¤§è§„æ¨¡å›¾åƒæ•°æ®é›†ImageNetï¼Œå®ƒæœ‰è¶…è¿‡1000ä¸‡çš„å›¾åƒå’Œ1000ç±»çš„ç‰©ä½“ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¹³å¸¸æ¥è§¦åˆ°çš„æ•°æ®é›†çš„è§„æ¨¡é€šå¸¸åœ¨è¿™ä¸¤è€…ä¹‹é—´ã€‚</p><p>å‡å¦‚æˆ‘ä»¬æƒ³è¯†åˆ«å›¾ç‰‡ä¸­ä¸åŒç±»å‹çš„æ¤…å­ï¼Œç„¶åå‘ç”¨æˆ·æ¨èè´­ä¹°é“¾æ¥ã€‚ä¸€ç§å¯èƒ½çš„æ–¹æ³•æ˜¯é¦–å…ˆè¯†åˆ«100æŠŠæ™®é€šæ¤…å­ï¼Œä¸ºæ¯æŠŠæ¤…å­æ‹æ‘„1000å¼ ä¸åŒè§’åº¦çš„å›¾åƒï¼Œç„¶ååœ¨æ”¶é›†çš„å›¾åƒæ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªåˆ†ç±»æ¨¡å‹ï¼Œå°½ç®¡è¿™ä¸ªæ¤…å­æ•°æ®é›†å¯èƒ½å¤§äºFashion-MNISTæ•°æ®é›†ï¼Œä½†å®ä¾‹æ•°é‡ä»ç„¶ä¸åˆ°ImageNetä¸­çš„ååˆ†ä¹‹ä¸€ã€‚é€‚åˆImageNetçš„å¤æ‚æ¨¡å‹å¯èƒ½ä¼šåœ¨è¿™ä¸ªæ¤…å­æ•°æ®é›†ä¸Šè¿‡æ‹Ÿåˆã€‚æ­¤å¤–ï¼Œç”±äºè®­ç»ƒæ ·æœ¬æ•°é‡æœ‰é™ï¼Œè®­ç»ƒæ¨¡å‹çš„å‡†ç¡®æ€§å¯èƒ½æ— æ³•æ»¡è¶³å®é™…è¦æ±‚ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯æ”¶é›†æ›´å¤šçš„æ•°æ®ï¼Œä½†æ˜¯ï¼Œæ”¶é›†å’Œæ ‡è®°æ•°æ®å¯èƒ½éœ€è¦å¤§é‡çš„æ—¶é—´å’Œé‡‘é’±ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†æ”¶é›†ImageNetæ•°æ®é›†ï¼Œç ”ç©¶äººå‘˜èŠ±è´¹äº†æ•°ç™¾ä¸‡ç¾å…ƒçš„ç ”ç©¶èµ„é‡‘ã€‚å°½ç®¡ç›®å‰çš„æ•°æ®æ”¶é›†æˆæœ¬å·²å¤§å¹…é™ä½ï¼Œä½†è¿™ä¸€æˆæœ¬ä»ä¸èƒ½å¿½è§†ã€‚</p><p>å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯åº”ç”¨<strong>è¿ç§»å­¦ä¹ ï¼ˆtransfer learningï¼‰</strong> ï¼Œå°†ä»æºæ•°æ®é›†å­¦åˆ°çš„çŸ¥è¯†è¿ç§»åˆ°ç›®æ ‡æ•°æ®é›†ã€‚ä¾‹å¦‚ï¼Œå°½ç®¡ImageNetæ•°æ®é›†ä¸­çš„å¤§å¤šæ•°å›¾åƒä¸æ¤…å­æ— å…³ï¼Œä½†åœ¨æ­¤æ•°æ®é›†ä¸Šè®­ç»ƒçš„æ¨¡å‹å¯èƒ½ä¼šæå–æ›´é€šç”¨çš„å›¾åƒç‰¹å¾ï¼Œè¿™æœ‰åŠ©äºè¯†åˆ«è¾¹ç¼˜ã€çº¹ç†ã€å½¢çŠ¶å’Œå¯¹è±¡ç»„åˆï¼Œè¿™äº›ç±»ä¼¼çš„ç‰¹å¾ä¹Ÿå¯èƒ½æœ‰æ•ˆåœ°è¯†åˆ«æ¤…å­ã€‚</p><h2 id="2-1-æ­¥éª¤"><a href="#2-1-æ­¥éª¤" class="headerlink" title="2.1 æ­¥éª¤"></a>2.1 æ­¥éª¤</h2><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»è¿ç§»å­¦ä¹ ä¸­çš„å¸¸è§æŠ€å·§ï¼š<strong>å¾®è°ƒï¼ˆfine-tuningï¼‰</strong>ã€‚å¾®è°ƒåŒ…æ‹¬ä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š</p><ol><li>åœ¨æºæ•°æ®é›†ï¼ˆä¾‹å¦‚ImageNetæ•°æ®é›†ï¼‰ä¸Šé¢„è®­ç»ƒç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå³æºæ¨¡å‹ã€‚</li><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå³ç›®æ ‡æ¨¡å‹ã€‚å¤åˆ¶æºæ¨¡å‹ä¸Šçš„æ‰€æœ‰æ¨¡å‹è®¾è®¡åŠå…¶å‚æ•°ï¼ˆè¾“å‡ºå±‚é™¤å¤–ï¼‰ã€‚</li><li>å‘ç›®æ ‡æ¨¡å‹æ·»åŠ è¾“å‡ºå±‚ï¼Œå…¶è¾“å‡ºæ•°æ˜¯ç›®æ ‡æ•°æ®é›†ä¸­çš„ç±»åˆ«æ•°ã€‚ç„¶åéšæœºåˆå§‹åŒ–è¯¥å±‚çš„æ¨¡å‹å‚æ•°ã€‚</li><li>åœ¨ç›®æ ‡æ•°æ®é›†ï¼ˆå¦‚æ¤…å­æ•°æ®é›†ï¼‰ä¸Šè®­ç»ƒç›®æ ‡æ¨¡å‹ã€‚è¾“å‡ºå±‚å°†ä»å¤´å¼€å§‹è¿›è¡Œè®­ç»ƒï¼Œè€Œæ‰€æœ‰å…¶ä»–å±‚çš„å‚æ•°å°†æ ¹æ®æºæ¨¡å‹çš„å‚æ•°è¿›è¡Œå¾®è°ƒã€‚</li></ol><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e68ea652432448a0b7ecb994cdc3cef3ac2a74eb45f64a43a2c89bfc850f68a9" width="800" hegiht="" ></center><center><br>å›¾2ï¼šå¾®è°ƒæ¨¡å‹</br></center><p><br></br></p><p><strong>å½“ç›®æ ‡æ•°æ®é›†æ¯”æºæ•°æ®é›†å°å¾—å¤šæ—¶ï¼Œå¾®è°ƒæœ‰åŠ©äºæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</strong></p><h2 id="2-2-çƒ­ç‹—è¯†åˆ«"><a href="#2-2-çƒ­ç‹—è¯†åˆ«" class="headerlink" title="2.2 çƒ­ç‹—è¯†åˆ«"></a>2.2 çƒ­ç‹—è¯†åˆ«</h2><p>é€šè¿‡çƒ­ç‹—è¯†åˆ«çš„ä¾‹å­äº†è§£Fine-Tuningçš„ç”¨æ³•ï¼Œæˆ‘ä»¬å°†åœ¨ä¸€ä¸ªå°å‹æ•°æ®é›†ä¸Šå¾®è°ƒResNetæ¨¡å‹ï¼Œè¯¥ResNetæ¨¡å‹å·²åœ¨ImageNetæ•°æ®é›†ä¸Šè¿›è¡Œäº†é¢„è®­ç»ƒã€‚<br>è¿™ä¸ªå°å‹æ•°æ®é›†åŒ…å«æ•°åƒå¼ åŒ…å«çƒ­ç‹—å’Œä¸åŒ…å«çƒ­ç‹—çš„å›¾åƒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¾®è°ƒæ¨¡å‹æ¥è¯†åˆ«å›¾åƒä¸­æ˜¯å¦åŒ…å«çƒ­ç‹—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> ppl</span><br></pre></td></tr></table></figure><h3 id="1ï¼‰è·å–æ•°æ®é›†"><a href="#1ï¼‰è·å–æ•°æ®é›†" class="headerlink" title="1ï¼‰è·å–æ•°æ®é›†"></a><strong>1ï¼‰è·å–æ•°æ®é›†</strong></h3><p>æˆ‘ä»¬ä½¿ç”¨çš„çƒ­ç‹—æ•°æ®é›†æ¥æºäºç½‘ç»œã€‚è¯¥æ•°æ®é›†åŒ…å«1400å¼ çƒ­ç‹—çš„â€œæ­£ç±»â€å›¾åƒï¼Œä»¥åŠåŒ…å«å°½å¯èƒ½å¤šçš„å…¶ä»–é£Ÿç‰©çš„â€œè´Ÿç±»â€å›¾åƒã€‚å«ç€ä¸¤ä¸ªç±»åˆ«çš„1000å¼ å›¾ç‰‡ç”¨äºè®­ç»ƒï¼Œå…¶ä½™çš„åˆ™ç”¨äºæµ‹è¯•ã€‚<br>è§£å‹ä¸‹è½½çš„æ•°æ®é›†ï¼Œæˆ‘ä»¬è·å¾—äº†ä¸¤ä¸ªæ–‡ä»¶å¤¹<code>hotdog/train</code>å’Œ<code>hotdog/test</code>ã€‚<br>è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹éƒ½æœ‰<code>hotdog</code>ï¼ˆæœ‰çƒ­ç‹—ï¼‰å’Œ<code>not-hotdog</code>ï¼ˆæ— çƒ­ç‹—ï¼‰ä¸¤ä¸ªå­æ–‡ä»¶å¤¹ï¼Œ<br>å­æ–‡ä»¶å¤¹å†…éƒ½åŒ…å«ç›¸åº”ç±»çš„å›¾åƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># -o ä¸å¿…å…ˆè¯¢é—®ç”¨æˆ·ï¼Œunzipæ‰§è¡Œåè¦†ç›–åŸæœ‰æ–‡ä»¶</span></span><br><span class="line">!unzip -o -q data/data149507/hotdog.<span class="built_in">zip</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data_dir = <span class="string">&#x27;hotdog&#x27;</span><span class="comment"># è®°å½•å›¾ç‰‡çš„è·¯å¾„</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå®ä¾‹æ¥åˆ†åˆ«è¯»å–è®­ç»ƒå’Œæµ‹è¯•æ•°æ®é›†ä¸­çš„æ‰€æœ‰å›¾åƒæ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ImageFolder ä¸€ç§é€šç”¨çš„æ•°æ®åŠ è½½æ–¹å¼</span></span><br><span class="line">train_imgs = vision.datasets.ImageFolder(os.path.join(data_dir, <span class="string">&#x27;train&#x27;</span>))</span><br><span class="line">test_imgs = vision.datasets.ImageFolder(os.path.join(data_dir, <span class="string">&#x27;test&#x27;</span>))</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¾ç¤ºäº†å‰8ä¸ªæ­£ç±»æ ·æœ¬å›¾ç‰‡å’Œæœ€å8å¼ è´Ÿç±»æ ·æœ¬å›¾ç‰‡ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå›¾åƒçš„å¤§å°å’Œçºµæ¨ªæ¯”å„æœ‰ä¸åŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hotdogs = [train_imgs[i][<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>)]</span><br><span class="line">not_hotdogs = [train_imgs[-i - <span class="number">1</span>][<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>)]</span><br><span class="line">ppl.show_images(hotdogs + not_hotdogs, <span class="number">2</span>, <span class="number">8</span>, scale=<span class="number">1.4</span>); <span class="comment"># åˆ†å·ç”¨äºä¸€æ¡è¯­å¥çš„ç»“æŸæ ‡è¯†</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/61.png" alt="png"></p><h3 id="2ï¼‰æ•°æ®å¢å¹¿"><a href="#2ï¼‰æ•°æ®å¢å¹¿" class="headerlink" title="2ï¼‰æ•°æ®å¢å¹¿"></a><strong>2ï¼‰æ•°æ®å¢å¹¿</strong></h3><ul><li>åœ¨è®­ç»ƒæœŸé—´ï¼šæˆ‘ä»¬é¦–å…ˆå°†è¾“å…¥å›¾åƒæŒ‰ç…§éšæœºå¤§å°å’Œé•¿å®½æ¯”è¿›è¡Œè£å‰ªï¼Œç„¶åå°†è¯¥åŒºåŸŸç¼©æ”¾ä¸º$224 \times 224$è¾“å…¥å›¾åƒã€‚è¿›è¡Œæ°´å¹³ç¿»è½¬ã€‚</li><li>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼šç”±äºå›¾åƒçš„é«˜å®½æ¯”éƒ½ä¸åŒï¼Œå› æ­¤æˆ‘ä»¬å°†å›¾åƒçš„é«˜åº¦å’Œå®½åº¦éƒ½ç¼©æ”¾åˆ°256åƒç´ ï¼Œç„¶åè£å‰ªä¸­å¤®$224 \times 224$åŒºåŸŸä½œä¸ºè¾“å…¥ã€‚</li></ul><p>æ­¤å¤–ï¼Œå¯¹äºRGBï¼ˆçº¢ã€ç»¿å’Œè“ï¼‰é¢œè‰²é€šé“ï¼Œæˆ‘ä»¬åˆ†åˆ«æ ‡å‡†åŒ–æ¯ä¸ªé€šé“ï¼šå…·ä½“è€Œè¨€ï¼Œè¯¥é€šé“çš„æ¯ä¸ªå€¼å‡å»è¯¥é€šé“çš„å¹³å‡å€¼ï¼Œç„¶åå°†ç»“æœé™¤ä»¥è¯¥é€šé“çš„æ ‡å‡†å·®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">normalize = vision.transforms.Normalize(</span><br><span class="line">    [<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>], [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])</span><br><span class="line"></span><br><span class="line">train_augs = vision.transforms.Compose([</span><br><span class="line">    vision.transforms.RandomResizedCrop(<span class="number">224</span>),</span><br><span class="line">    vision.transforms.RandomHorizontalFlip(),</span><br><span class="line">    vision.transforms.ToTensor(),</span><br><span class="line">    normalize])</span><br><span class="line"></span><br><span class="line">test_augs = vision.transforms.Compose([</span><br><span class="line">    vision.transforms.Resize(<span class="number">256</span>),</span><br><span class="line">    vision.transforms.CenterCrop(<span class="number">224</span>),</span><br><span class="line">    vision.transforms.ToTensor(),</span><br><span class="line">    normalize])</span><br></pre></td></tr></table></figure><h3 id="3ï¼‰å®šä¹‰å’Œåˆå§‹åŒ–æ¨¡å‹"><a href="#3ï¼‰å®šä¹‰å’Œåˆå§‹åŒ–æ¨¡å‹" class="headerlink" title="3ï¼‰å®šä¹‰å’Œåˆå§‹åŒ–æ¨¡å‹"></a><strong>3ï¼‰å®šä¹‰å’Œåˆå§‹åŒ–æ¨¡å‹</strong></h3><p>æˆ‘ä»¬ä½¿ç”¨åœ¨ImageNetæ•°æ®é›†ä¸Šé¢„è®­ç»ƒçš„ResNet-18ä½œä¸ºæºæ¨¡å‹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å®š<code>pretrained=True</code>ä»¥è‡ªåŠ¨ä¸‹è½½é¢„è®­ç»ƒçš„æ¨¡å‹å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pretrained (boolï¼Œå¯é€‰) - æ˜¯å¦åŠ è½½åœ¨imagenetæ•°æ®é›†ä¸Šçš„é¢„è®­ç»ƒæƒé‡ã€‚é»˜è®¤å€¼ï¼šFalseã€‚</span></span><br><span class="line">pretrained_net = vision.models.resnet18(pretrained=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>é¢„è®­ç»ƒçš„æºæ¨¡å‹å®ä¾‹åŒ…å«è®¸å¤šç‰¹å¾å±‚å’Œä¸€ä¸ªè¾“å‡ºå±‚<code>fc</code>ï¼Œä¸‹é¢ç»™å‡ºäº†æºæ¨¡å‹çš„æˆå‘˜å˜é‡<code>fc</code>ã€‚æ­¤åˆ’åˆ†çš„ä¸»è¦ç›®çš„æ˜¯ä¿ƒè¿›å¯¹é™¤è¾“å‡ºå±‚ä»¥å¤–æ‰€æœ‰å±‚çš„æ¨¡å‹å‚æ•°è¿›è¡Œå¾®è°ƒï¼Œåœ¨ResNetçš„å…¨å±€å¹³å‡æ±‡èšå±‚åï¼Œå…¨è¿æ¥å±‚è½¬æ¢ä¸ºImageNetæ•°æ®é›†çš„1000ä¸ªç±»è¾“å‡ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(pretrained_net)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;#################################################&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;è¾“å‡ºå±‚&#x27;</span>, pretrained_net.fc)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;#################################################&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œæˆ‘ä»¬æ„å»ºä¸€ä¸ªæ–°çš„ç¥ç»ç½‘ç»œä½œä¸ºç›®æ ‡æ¨¡å‹ã€‚å®ƒçš„å®šä¹‰æ–¹å¼ä¸é¢„è®­ç»ƒæºæ¨¡å‹çš„å®šä¹‰æ–¹å¼ç›¸åŒï¼Œåªæ˜¯æœ€ç»ˆå±‚ä¸­çš„è¾“å‡ºæ•°é‡è¢«è®¾ç½®ä¸ºç›®æ ‡æ•°æ®é›†ä¸­çš„ç±»æ•°ï¼ˆè€Œä¸æ˜¯1000ä¸ªï¼‰ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œç›®æ ‡æ¨¡å‹<code>finetune_net</code>ä¸­æˆå‘˜å˜é‡<code>features</code>çš„å‚æ•°è¢«åˆå§‹åŒ–ä¸ºæºæ¨¡å‹ç›¸åº”å±‚çš„æ¨¡å‹å‚æ•°ã€‚ç”±äºæ¨¡å‹å‚æ•°æ˜¯åœ¨ImageNetæ•°æ®é›†ä¸Šé¢„è®­ç»ƒçš„ï¼Œå¹¶ä¸”è¶³å¤Ÿå¥½ï¼Œå› æ­¤é€šå¸¸åªéœ€è¦è¾ƒå°çš„å­¦ä¹ ç‡å³å¯å¾®è°ƒè¿™äº›å‚æ•°ã€‚</p><p>æˆå‘˜å˜é‡<code>output</code>çš„å‚æ•°æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œé€šå¸¸éœ€è¦æ›´é«˜çš„å­¦ä¹ ç‡æ‰èƒ½ä»å¤´å¼€å§‹è®­ç»ƒã€‚å‡è®¾<code>Trainer</code>å®ä¾‹ä¸­çš„å­¦ä¹ ç‡ä¸º$\eta$ï¼Œæˆ‘ä»¬å°†æˆå‘˜å˜é‡<code>output</code>ä¸­å‚æ•°çš„å­¦ä¹ ç‡è®¾ç½®ä¸º$10\eta$ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">finetune_net = vision.models.resnet18(pretrained=<span class="literal">True</span>) <span class="comment"># æ¨¡å‹å‚æ•°åˆå§‹åŒ–ä¸ºæºæ¨¡å‹ç›¸åº”å±‚çš„æ¨¡å‹å‚æ•°</span></span><br><span class="line">finetune_net.fc = nn.Linear(finetune_net.fc.weight.shape[<span class="number">0</span>], <span class="number">2</span>) <span class="comment"># è°ƒæ•´è¾“å‡ºå±‚ï¼ˆ512,2ï¼‰</span></span><br><span class="line">finetune_net.fc.weight.set_value = nn.initializer.XavierUniform() <span class="comment"># åªå¯¹è¾“å‡ºå±‚è®¾ç½®åˆå§‹åŒ–å‚æ•°ç­–ç•¥</span></span><br></pre></td></tr></table></figure><h3 id="4ï¼‰è®­ç»ƒå¾®è°ƒæ¨¡å‹"><a href="#4ï¼‰è®­ç»ƒå¾®è°ƒæ¨¡å‹" class="headerlink" title="4ï¼‰è®­ç»ƒå¾®è°ƒæ¨¡å‹"></a><strong>4ï¼‰è®­ç»ƒå¾®è°ƒæ¨¡å‹</strong></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè®­ç»ƒå‡½æ•°<code>train_fine_tuning</code>ï¼Œè¯¥å‡½æ•°ä½¿ç”¨å¾®è°ƒï¼Œå› æ­¤å¯ä»¥å¤šæ¬¡è°ƒç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train_batch</span>(<span class="params">net, X, y, loss, trainer</span>): <span class="comment"># æ¯ä¸ªæ‰¹é‡çš„è®­ç»ƒè¿‡ç¨‹ã€å†…å±‚å¾ªç¯ã€‘</span></span><br><span class="line">    net.train()<span class="comment">#å¼€å§‹å¾ªç¯</span></span><br><span class="line">    trainer.clear_grad()<span class="comment"># è¿›è¡Œæ¢¯åº¦</span></span><br><span class="line">    pred = net(X)<span class="comment"># è®¡ç®—é¢„æµ‹å€¼</span></span><br><span class="line">    l = loss(pred, y)<span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">    l.<span class="built_in">sum</span>().backward()<span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">    trainer.step()<span class="comment"># æ›´æ–°æ¢¯åº¦</span></span><br><span class="line">    train_loss_sum = l.<span class="built_in">sum</span>()<span class="comment"># ä¸´æ—¶å­˜å‚¨æŸå¤±å€¼</span></span><br><span class="line">    train_acc_sum = ppl.accuracy(pred, y)<span class="comment"># ä¸´æ—¶å­˜å‚¨ç²¾åº¦å€¼</span></span><br><span class="line">    <span class="keyword">return</span> train_loss_sum, train_acc_sum</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">net, train_iter, test_iter, loss, trainer, num_epochs</span>):<span class="comment">#å¤–å±‚å¾ªç¯ï¼Œè®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">    num_batches = <span class="built_in">len</span>(train_iter)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        metric = ppl.Accumulator(<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">for</span> i, (features, labels) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_iter):</span><br><span class="line">            l, acc = train_batch(net, features, labels, loss, trainer)</span><br><span class="line">            metric.add(l, acc, labels.shape[<span class="number">0</span>])</span><br><span class="line">            <span class="built_in">print</span>(metric[<span class="number">0</span>] / metric[<span class="number">2</span>], metric[<span class="number">1</span>] / metric[<span class="number">2</span>], metric[<span class="number">2</span>])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;#####################################&quot;</span>)</span><br><span class="line">        test_acc = ppl.evaluate_accuracy(net, test_iter)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;loss <span class="subst">&#123;metric[<span class="number">0</span>] / metric[<span class="number">2</span>]:<span class="number">.3</span>f&#125;</span>,  &#x27;</span></span><br><span class="line">          <span class="string">f&#x27;train acc <span class="subst">&#123;metric[<span class="number">1</span>] / metric[<span class="number">2</span>]:<span class="number">.3</span>f&#125;</span>,  &#x27;</span></span><br><span class="line">          <span class="string">f&#x27;test acc <span class="subst">&#123;test_acc:<span class="number">.3</span>f&#125;</span>,  &#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›è¡Œå¾®è°ƒ</span></span><br><span class="line"><span class="comment"># å¦‚æœparam_group=Trueï¼Œè¾“å‡ºå±‚ä¸­çš„æ¨¡å‹å‚æ•°å°†ä½¿ç”¨åå€çš„å­¦ä¹ ç‡</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_fine_tuning</span>(<span class="params">net, learning_rate, batch_size=<span class="number">128</span>, num_epochs=<span class="number">5</span>, param_group=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="comment"># è¯»å–æ•°æ®</span></span><br><span class="line">    train_iter = paddle.io.DataLoader(</span><br><span class="line">        vision.datasets.DatasetFolder(os.path.join(data_dir, <span class="string">&#x27;train&#x27;</span>), transform=train_augs),</span><br><span class="line">        batch_size=batch_size, shuffle=<span class="literal">True</span>)</span><br><span class="line">    test_iter = paddle.io.DataLoader(</span><br><span class="line">        vision.datasets.DatasetFolder(os.path.join(data_dir, <span class="string">&#x27;test&#x27;</span>), transform=test_augs),</span><br><span class="line">        batch_size=batch_size)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŸå¤±</span></span><br><span class="line">    loss = nn.CrossEntropyLoss(reduction=<span class="string">&quot;none&quot;</span>) <span class="comment"># reduction æŒ‡å®šåº”ç”¨äºè¾“å‡ºç»“æœçš„è®¡ç®—æ–¹å¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å­¦ä¹ ç‡ç­–ç•¥</span></span><br><span class="line">    <span class="keyword">if</span> param_group:</span><br><span class="line">        params_1x = [</span><br><span class="line">            param <span class="keyword">for</span> name, param <span class="keyword">in</span> net.named_parameters()</span><br><span class="line">            <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&quot;fc.weight&quot;</span>, <span class="string">&quot;fc.bias&quot;</span>]]</span><br><span class="line">        trainer = paddle.optimizer.SGD(</span><br><span class="line">            parameters=[ <span class="comment"># å‚æ•°å¯¹åº”çš„å­¦ä¹ ç‡</span></span><br><span class="line">                &#123;<span class="string">&#x27;params&#x27;</span>: params_1x&#125;, <span class="comment"># params_1xä½¿ç”¨æ­£å¸¸çš„learning_rate</span></span><br><span class="line">                &#123;<span class="string">&#x27;params&#x27;</span>: net.fc.parameters(),<span class="string">&#x27;learning_rate&#x27;</span>: learning_rate * <span class="number">10</span>&#125; <span class="comment"># fc.parameters()ä½¿ç”¨åå€çš„learning_rate</span></span><br><span class="line">                ],</span><br><span class="line">            learning_rate = learning_rate, weight_decay=<span class="number">0.001</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        trainer = paddle.optimizer.SGD(parameters=net.parameters(), learning_rate=learning_rate,weight_decay=<span class="number">0.001</span>)</span><br><span class="line">        </span><br><span class="line">    train(net, train_iter, test_iter, loss, trainer, num_epochs)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œé€šè¿‡å¾®è°ƒé¢„è®­ç»ƒè·å¾—çš„æ¨¡å‹å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_fine_tuning(finetune_net, <span class="number">5e-5</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">loss 0.222, train_acc 0.916,test_acc 0.900</span></span><br><span class="line"><span class="string">æ€»ä½“çœ‹æ•ˆæœè¿˜æ˜¯ä¸é”™çš„</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç›¸åŒçš„æ¨¡å‹ï¼Œä½†æ˜¯å°†å…¶æ‰€æœ‰æ¨¡å‹å‚æ•°åˆå§‹åŒ–ä¸ºéšæœºå€¼ã€‚ç”±äºæ•´ä¸ªæ¨¡å‹éœ€è¦ä»å¤´å¼€å§‹è®­ç»ƒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ›´å¤§çš„å­¦ä¹ ç‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scratch_net = vision.models.resnet18() <span class="comment"># ä¸åŠ è½½åœ¨imagenetæ•°æ®é›†ä¸Šçš„é¢„è®­ç»ƒæƒé‡</span></span><br><span class="line">scratch_net.fc = nn.Linear(scratch_net.fc.weight.shape[<span class="number">0</span>], <span class="number">2</span>)</span><br><span class="line">train_fine_tuning(scratch_net, <span class="number">5e-4</span>, param_group=<span class="literal">False</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">loss 0.398, train_acc 0.861, test_acc 0.840</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>æ„æ–™ä¹‹ä¸­ï¼Œå¾®è°ƒæ¨¡å‹å¾€å¾€è¡¨ç°æ›´å¥½ï¼Œå› ä¸ºå®ƒçš„åˆå§‹å‚æ•°å€¼æ›´æœ‰æ•ˆã€‚</p><h1 id="ä¸‰ã€å°ç»“"><a href="#ä¸‰ã€å°ç»“" class="headerlink" title="ä¸‰ã€å°ç»“"></a>ä¸‰ã€å°ç»“</h1><ul><li>å›¾åƒå¢å¹¿åŸºäºç°æœ‰çš„è®­ç»ƒæ•°æ®ç”Ÿæˆéšæœºå›¾åƒï¼Œæ¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</li><li>ä¸ºäº†åœ¨é¢„æµ‹è¿‡ç¨‹ä¸­å¾—åˆ°ç¡®åˆ‡çš„ç»“æœï¼Œæˆ‘ä»¬é€šå¸¸å¯¹è®­ç»ƒæ ·æœ¬åªè¿›è¡Œå›¾åƒå¢å¹¿ï¼Œè€Œåœ¨é¢„æµ‹è¿‡ç¨‹ä¸­ä¸ä½¿ç”¨å¸¦éšæœºæ“ä½œçš„å›¾åƒå¢å¹¿ã€‚</li><li>æ·±åº¦å­¦ä¹ æ¡†æ¶æä¾›äº†è®¸å¤šä¸åŒçš„å›¾åƒå¢å¹¿æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¯ä»¥è¢«åŒæ—¶åº”ç”¨ã€‚</li><li>è¿ç§»å­¦ä¹ å°†ä»æºæ•°æ®é›†ä¸­å­¦åˆ°çš„çŸ¥è¯†â€œè¿ç§»â€åˆ°ç›®æ ‡æ•°æ®é›†ï¼Œå¾®è°ƒæ˜¯è¿ç§»å­¦ä¹ çš„å¸¸è§æŠ€å·§ã€‚</li><li>é™¤è¾“å‡ºå±‚å¤–ï¼Œç›®æ ‡æ¨¡å‹ä»æºæ¨¡å‹ä¸­å¤åˆ¶æ‰€æœ‰æ¨¡å‹è®¾è®¡åŠå…¶å‚æ•°ï¼Œå¹¶æ ¹æ®ç›®æ ‡æ•°æ®é›†å¯¹è¿™äº›å‚æ•°è¿›è¡Œå¾®è°ƒã€‚ä½†æ˜¯ï¼Œç›®æ ‡æ¨¡å‹çš„è¾“å‡ºå±‚éœ€è¦ä»å¤´å¼€å§‹è®­ç»ƒã€‚</li><li>é€šå¸¸ï¼Œå¾®è°ƒå‚æ•°ä½¿ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œè€Œä»å¤´å¼€å§‹è®­ç»ƒè¾“å‡ºå±‚å¯ä»¥ä½¿ç”¨æ›´å¤§çš„å­¦ä¹ ç‡ã€‚</li><li>åœ¨ä¸€ä¸ªç›®æ ‡æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒä»»åŠ¡ï¼Œä½†æ˜¯ä½¿ç”¨äº†æ›´å¼ºçš„æ­£åˆ™åŒ–ï¼ˆä½¿ç”¨äº†æ›´å°çš„å­¦ä¹ ç‡ ä½¿ç”¨æ›´å°‘çš„æ•°æ®è¿­ä»£ï¼‰ï¼ŒåŸå› åœ¨äºæºæ¨¡å‹å·²ç»å¾ˆå¥½äº†ï¼Œä¿ç•™ä¼˜åŠ¿ã€‚</li><li>å¾®è°ƒé€šè¿‡ä½¿ç”¨åœ¨å¤§æ•°æ®ä¸Šå¾—åˆ°çš„é¢„è®­ç»ƒå¥½çš„æ¨¡å‹æ¥åˆå§‹åŒ–æ¨¡å‹æƒé‡æ¥æå‡ç²¾åº¦ã€‚</li><li>å¾®è°ƒé€šå¸¸é€Ÿåº¦æ›´å¿«ï¼Œç²¾åº¦æ›´é«˜ã€‚</li><li>å¾®è°ƒæ™®éåº”ç”¨äºè®¡ç®—æœºè§†è§‰é¢†åŸŸã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_å·ç§¯åŸºæœ¬æ¦‚å¿µåŠç»å…¸æ¨¡å‹å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 5.3-å›¾åƒè¯†åˆ«æ¨¡å‹å…³é”®ç»„ä»¶ä¹‹æ•°æ®å¤„ç†</title>
      <link href="/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.3-%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"/>
      <url>/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.3-%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æ•°æ®å¤„ç†"><a href="#ä¸€ã€æ•°æ®å¤„ç†" class="headerlink" title="ä¸€ã€æ•°æ®å¤„ç†"></a>ä¸€ã€æ•°æ®å¤„ç†</h1><p>åœ¨å·¥ä¸šå®è·µä¸­ï¼Œæˆ‘ä»¬é¢ä¸´çš„ä»»åŠ¡å’Œæ•°æ®ç¯å¢ƒåƒå·®ä¸‡åˆ«ï¼Œé€šå¸¸éœ€è¦è‡ªå·±ç¼–å†™é€‚åˆå½“å‰ä»»åŠ¡çš„æ•°æ®å¤„ç†ç¨‹åºï¼Œä¸€èˆ¬æ¶‰åŠå¦‚ä¸‹äº”ä¸ªç¯èŠ‚ï¼š</p><ul><li>è¯»å…¥æ•°æ®</li><li>åˆ’åˆ†æ•°æ®é›†</li><li>ç”Ÿæˆæ‰¹æ¬¡æ•°æ®</li><li>è®­ç»ƒæ ·æœ¬é›†ä¹±åº</li><li>æ ¡éªŒæ•°æ®æœ‰æ•ˆæ€§</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ•°æ®å¤„ç†éƒ¨åˆ†ä¹‹å‰çš„ä»£ç ï¼ŒåŠ å…¥éƒ¨åˆ†æ•°æ®å¤„ç†çš„åº“</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Linear</span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure><h2 id="1-1è¯»å…¥æ•°æ®å¹¶åˆ’åˆ†æ•°æ®é›†"><a href="#1-1è¯»å…¥æ•°æ®å¹¶åˆ’åˆ†æ•°æ®é›†" class="headerlink" title="1.1è¯»å…¥æ•°æ®å¹¶åˆ’åˆ†æ•°æ®é›†"></a><strong>1.1è¯»å…¥æ•°æ®å¹¶åˆ’åˆ†æ•°æ®é›†</strong></h2><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¿å­˜åˆ°æœ¬åœ°çš„æ•°æ®å­˜å‚¨æ ¼å¼å¤šç§å¤šæ ·ï¼Œå¦‚MNISTæ•°æ®é›†ä»¥jsonæ ¼å¼å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå…¶æ•°æ®å­˜å‚¨ç»“æ„å¦‚ <strong>å›¾1</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/7075f5ca75c54e4e8553c10b696913a1a178dad37c5c460a899cd75635cd7961" width="500" hegiht="" ></center><center><br>å›¾1ï¼šMNISTæ•°æ®é›†çš„å­˜å‚¨ç»“æ„</br></center><p><br></br></p><p><strong>data</strong>åŒ…å«ä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼štrain_setã€val_setã€ test_setï¼ŒåŒ…æ‹¬50 000æ¡è®­ç»ƒæ ·æœ¬ã€10 000æ¡éªŒè¯æ ·æœ¬ã€10 000æ¡æµ‹è¯•æ ·æœ¬ã€‚æ¯ä¸ªæ ·æœ¬åŒ…å«æ‰‹å†™æ•°å­—å›¾ç‰‡å’Œå¯¹åº”çš„æ ‡ç­¾ã€æ²¡æœ‰ç»™æ ‡ç­¾ï¼Œåˆ™å¯ä»¥è‡ªå·±å†™ä»£ç ç»™æ‰“ä¸Šæ ‡ç­¾ã€‘ã€‚</p><ul><li><strong>train_setï¼ˆè®­ç»ƒé›†ï¼‰</strong>ï¼šç”¨äºç¡®å®šæ¨¡å‹å‚æ•°ã€‚</li><li><strong>val_setï¼ˆéªŒè¯é›†ï¼‰</strong>ï¼šç”¨äºè°ƒèŠ‚æ¨¡å‹è¶…å‚æ•°ï¼ˆå¦‚å¤šä¸ªç½‘ç»œç»“æ„ã€æ­£åˆ™åŒ–æƒé‡çš„æœ€ä¼˜é€‰æ‹©ï¼‰ã€‚</li><li><strong>test_setï¼ˆæµ‹è¯•é›†ï¼‰</strong>ï¼šç”¨äºä¼°è®¡åº”ç”¨æ•ˆæœï¼ˆæ²¡æœ‰åœ¨æ¨¡å‹ä¸­åº”ç”¨è¿‡çš„æ•°æ®ï¼Œæ›´è´´è¿‘æ¨¡å‹åœ¨çœŸå®åœºæ™¯åº”ç”¨çš„æ•ˆæœï¼‰ã€‚</li></ul><p><strong>train_set</strong>åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼štrain_imagesã€train_labelsã€‚</p><ul><li><strong>train_images</strong>ï¼š[50 000, 784]çš„äºŒç»´åˆ—è¡¨ï¼ŒåŒ…å«50 000å¼ å›¾ç‰‡ã€‚æ¯å¼ å›¾ç‰‡ç”¨ä¸€ä¸ªé•¿åº¦ä¸º784çš„å‘é‡è¡¨ç¤ºï¼Œå†…å®¹æ˜¯28*28å°ºå¯¸çš„åƒç´ ç°åº¦å€¼ï¼ˆé»‘ç™½å›¾ç‰‡ï¼‰ã€‚</li><li><strong>train_labels</strong>ï¼š[50 000, ]çš„åˆ—è¡¨ï¼Œè¡¨ç¤ºè¿™äº›å›¾ç‰‡å¯¹åº”çš„åˆ†ç±»æ ‡ç­¾ï¼Œå³0~9ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ã€‚</li></ul><p>åœ¨æœ¬åœ°<code>./work/</code>ç›®å½•ä¸‹è¯»å–æ–‡ä»¶åç§°ä¸º<code>mnist.json.gz</code>çš„MNISTæ•°æ®ï¼Œå¹¶æ‹†åˆ†æˆè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼Œå®ç°æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜æ•°æ®é›†æ–‡ä»¶ä½ç½®</span></span><br><span class="line">datafile = <span class="string">&#x27;work/mnist.json.gz&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;loading mnist dataset from &#123;&#125; ......&#x27;</span>.<span class="built_in">format</span>(datafile))</span><br><span class="line"><span class="comment"># åŠ è½½jsonæ•°æ®æ–‡ä»¶</span></span><br><span class="line">data = json.load(gzip.<span class="built_in">open</span>(datafile))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;mnist dataset load done&#x27;</span>)</span><br><span class="line"><span class="comment"># è¯»å–åˆ°çš„æ•°æ®åŒºåˆ†è®­ç»ƒé›†ï¼ŒéªŒè¯é›†ï¼Œæµ‹è¯•é›†</span></span><br><span class="line">train_set, val_set, eval_set = data</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§‚å¯Ÿè®­ç»ƒé›†æ•°æ®</span></span><br><span class="line">imgs, labels = train_set[<span class="number">0</span>], train_set[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è®­ç»ƒæ•°æ®é›†æ•°é‡: &quot;</span>, <span class="built_in">len</span>(imgs))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§‚å¯ŸéªŒè¯é›†æ•°é‡</span></span><br><span class="line">imgs, labels = val_set[<span class="number">0</span>], val_set[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;éªŒè¯æ•°æ®é›†æ•°é‡: &quot;</span>, <span class="built_in">len</span>(imgs))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§‚å¯Ÿæµ‹è¯•é›†æ•°é‡</span></span><br><span class="line">imgs, labels = val= eval_set[<span class="number">0</span>], eval_set[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æµ‹è¯•æ•°æ®é›†æ•°é‡: &quot;</span>, <span class="built_in">len</span>(imgs))</span><br></pre></td></tr></table></figure><pre><code>loading mnist dataset from work/mnist.json.gz ......mnist dataset load doneè®­ç»ƒæ•°æ®é›†æ•°é‡:  50000éªŒè¯æ•°æ®é›†æ•°é‡:  10000æµ‹è¯•æ•°æ®é›†æ•°é‡:  10000</code></pre><h3 id="æ‰©å±•é˜…è¯»ï¼šä¸ºä»€ä¹ˆé’ˆå¯¹å›ºå®šæ•°æ®é›†çš„æ¨¡å‹æ€»åœ¨ä¸æ–­ç²¾è¿›å‘¢ï¼Ÿ"><a href="#æ‰©å±•é˜…è¯»ï¼šä¸ºä»€ä¹ˆé’ˆå¯¹å›ºå®šæ•°æ®é›†çš„æ¨¡å‹æ€»åœ¨ä¸æ–­ç²¾è¿›å‘¢ï¼Ÿ" class="headerlink" title="æ‰©å±•é˜…è¯»ï¼šä¸ºä»€ä¹ˆé’ˆå¯¹å›ºå®šæ•°æ®é›†çš„æ¨¡å‹æ€»åœ¨ä¸æ–­ç²¾è¿›å‘¢ï¼Ÿ"></a><strong>æ‰©å±•é˜…è¯»ï¼šä¸ºä»€ä¹ˆé’ˆå¯¹å›ºå®šæ•°æ®é›†çš„æ¨¡å‹æ€»åœ¨ä¸æ–­ç²¾è¿›å‘¢ï¼Ÿ</strong></h3><p>é€šå¸¸æŸç»„ç»‡å‘å¸ƒä¸€ä¸ªæ–°ä»»åŠ¡çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ•°æ®åï¼Œå…¨ä¸–ç•Œçš„ç§‘å­¦å®¶éƒ½é’ˆå¯¹è¯¥æ•°æ®é›†è¿›è¡Œåˆ›æ–°ç ”ç©¶ï¼Œéšåå¤§é‡é’ˆå¯¹è¯¥æ•°æ®é›†çš„è®ºæ–‡ä¼šé™†ç»­å‘è¡¨ã€‚è®ºæ–‡1çš„Aæ¨¡å‹å£°ç§°åœ¨æµ‹è¯•é›†çš„å‡†ç¡®ç‡70%ï¼Œè®ºæ–‡2çš„Bæ¨¡å‹å£°ç§°åœ¨æµ‹è¯•é›†çš„å‡†ç¡®ç‡æé«˜åˆ°72%ï¼Œè®ºæ–‡Nçš„Xæ¨¡å‹å£°ç§°åœ¨æµ‹è¯•é›†çš„å‡†ç¡®ç‡æé«˜åˆ°90% â€¦</p><p>ç„¶è€Œè¿™äº›è®ºæ–‡ä¸­çš„æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šå‡†ç¡®ç‡æå‡çœŸå®æœ‰æ•ˆä¹ˆï¼Ÿæˆ‘ä»¬ä¸å¦¨å¤§èƒ†çŒœæµ‹ä¸€ä¸‹ã€‚</p><p>å‡è®¾æ‰€æœ‰è®ºæ–‡å…±äº§ç”Ÿ1000ä¸ªæ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹ä½¿ç”¨çš„æ˜¯æµ‹è¯•æ•°æ®é›†æ¥è¯„åˆ¤æ¨¡å‹æ•ˆæœï¼Œå¹¶æœ€ç»ˆé€‰å‡ºæ•ˆæœæœ€ä¼˜çš„æ¨¡å‹ã€‚è¿™ç›¸å½“äºæŠŠåŸå§‹çš„æµ‹è¯•é›†å½“ä½œäº†éªŒè¯é›†ï¼Œä½¿å¾—æµ‹è¯•é›†å¤±å»äº†çœŸå®è¯„åˆ¤æ¨¡å‹æ•ˆæœçš„èƒ½åŠ›ï¼Œæ­£å¦‚æœºå™¨å­¦ä¹ é¢†åŸŸéå¸¸æµè¡Œçš„ä¸€å¥è¯ï¼šâ€œæ‹·é—®æ•°æ®è¶³å¤Ÿä¹…ï¼Œå®ƒç»ˆç©¶ä¼šæ‹›ä¾›â€ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/61ff2532a33346cb9641db0e5b97b9f30f2ad9d17bad444193c07191cdacd189" width="600" hegiht="" ></center><center><br>å›¾2ï¼šæ‹·é—®æ•°æ®è¶³å¤Ÿä¹…ï¼Œå®ƒæ€»ä¼šæ‹›ä¾›</br></center><p><br></br></p><p>é‚£ä¹ˆå½“æˆ‘ä»¬éœ€è¦å°†å„ç§è®ºæ–‡ä¸­æ¨¡å‹å¤ç”¨äºå·¥ä¸šé¡¹ç›®æ—¶ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿå½“å‡ ä¸ªæ¨¡å‹çš„å‡†ç¡®ç‡åœ¨æµ‹è¯•é›†ä¸Šå·®è·ä¸å¤§æ—¶ï¼Œå°½é‡é€‰æ‹©ç½‘ç»œç»“æ„ç›¸å¯¹ç®€å•çš„æ¨¡å‹ã€‚å¾€å¾€è¶Šç²¾å·§è®¾è®¡çš„æ¨¡å‹å’Œæ–¹æ³•ï¼Œè¶Šä¸å®¹æ˜“åœ¨ä¸åŒçš„æ•°æ®é›†ä¹‹é—´è¿ç§»ã€‚</p><hr><h2 id="1-2-è®­ç»ƒæ ·æœ¬ä¹±åºã€ç”Ÿæˆæ‰¹æ¬¡æ•°æ®"><a href="#1-2-è®­ç»ƒæ ·æœ¬ä¹±åºã€ç”Ÿæˆæ‰¹æ¬¡æ•°æ®" class="headerlink" title="1.2 è®­ç»ƒæ ·æœ¬ä¹±åºã€ç”Ÿæˆæ‰¹æ¬¡æ•°æ®"></a><strong>1.2 è®­ç»ƒæ ·æœ¬ä¹±åºã€ç”Ÿæˆæ‰¹æ¬¡æ•°æ®</strong></h2><ul><li><strong>è®­ç»ƒæ ·æœ¬ä¹±åºï¼š</strong> å…ˆå°†æ ·æœ¬æŒ‰é¡ºåºè¿›è¡Œç¼–å·ï¼Œå»ºç«‹IDé›†åˆindex_listã€‚ç„¶åå°†index_listä¹±åºï¼Œæœ€åæŒ‰ä¹±åºåçš„é¡ºåºè¯»å–æ•°æ®ã€‚</li></ul><p>é€šè¿‡å¤§é‡å®éªŒå‘ç°ï¼Œæ¨¡å‹å¯¹æœ€åå‡ºç°çš„æ•°æ®å°è±¡æ›´åŠ æ·±åˆ»ã€‚è®­ç»ƒæ•°æ®å¯¼å…¥åï¼Œè¶Šæ¥è¿‘æ¨¡å‹è®­ç»ƒç»“æŸï¼Œæœ€åå‡ ä¸ªæ‰¹æ¬¡æ•°æ®å¯¹æ¨¡å‹å‚æ•°çš„å½±å“è¶Šå¤§ã€‚ä¸ºäº†é¿å…æ¨¡å‹è®°å¿†å½±å“è®­ç»ƒæ•ˆæœï¼Œéœ€è¦è¿›è¡Œæ ·æœ¬ä¹±åºæ“ä½œã€‚</p><ul><li><strong>ç”Ÿæˆæ‰¹æ¬¡æ•°æ®ï¼š</strong> å…ˆè®¾ç½®åˆç†çš„batch_sizeï¼Œå†å°†æ•°æ®è½¬å˜æˆç¬¦åˆæ¨¡å‹è¾“å…¥è¦æ±‚çš„np.arrayæ ¼å¼è¿”å›ã€‚åŒæ—¶ï¼Œåœ¨è¿”å›æ•°æ®æ—¶å°†Pythonç”Ÿæˆå™¨è®¾ç½®ä¸º<code>yield</code>æ¨¡å¼ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨ã€‚</li></ul><p>åœ¨æ‰§è¡Œå¦‚ä¸Šä¸¤ä¸ªæ“ä½œä¹‹å‰ï¼Œéœ€è¦å…ˆå°†æ•°æ®å¤„ç†ä»£ç å°è£…æˆload_dataå‡½æ•°ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨ã€‚load_dataæœ‰ä¸‰ç§æ¨¡å‹ï¼š<code>train</code>ã€<code>valid</code>ã€<code>eval</code>ï¼Œåˆ†ä¸ºå¯¹åº”è¿”å›çš„æ•°æ®æ˜¯è®­ç»ƒé›†ã€éªŒè¯é›†ã€æµ‹è¯•é›†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">imgs, labels = train_set[<span class="number">0</span>], train_set[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è®­ç»ƒæ•°æ®é›†æ•°é‡: &quot;</span>, <span class="built_in">len</span>(imgs))</span><br><span class="line"><span class="comment"># è·å¾—æ•°æ®é›†é•¿åº¦</span></span><br><span class="line">imgs_length = <span class="built_in">len</span>(imgs)</span><br><span class="line"><span class="comment"># å®šä¹‰æ•°æ®é›†æ¯ä¸ªæ•°æ®çš„åºå·ï¼Œæ ¹æ®åºå·è¯»å–æ•°æ®</span></span><br><span class="line">index_list = <span class="built_in">list</span>(<span class="built_in">range</span>(imgs_length))</span><br><span class="line"><span class="comment"># è¯»å…¥æ•°æ®æ—¶ç”¨åˆ°çš„æ‰¹æ¬¡å¤§å°</span></span><br><span class="line">BATCHSIZE = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ‰“ä¹±è®­ç»ƒæ•°æ®çš„ç´¢å¼•åºå·</span></span><br><span class="line">random.shuffle(index_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ•°æ®ç”Ÿæˆå™¨ï¼Œè¿”å›æ‰¹æ¬¡æ•°æ®</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">data_generator</span>():</span><br><span class="line">    imgs_list = []</span><br><span class="line">    labels_list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> index_list:</span><br><span class="line">        <span class="comment"># å°†æ•°æ®å¤„ç†æˆå¸Œæœ›çš„ç±»å‹</span></span><br><span class="line">        img = np.array(imgs[i]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">        label = np.array(labels[i]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">        imgs_list.append(img) </span><br><span class="line">        labels_list.append(label)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(imgs_list) == BATCHSIZE:</span><br><span class="line">            <span class="comment"># è·å¾—ä¸€ä¸ªbatchsizeçš„æ•°æ®ï¼Œå¹¶è¿”å›</span></span><br><span class="line">            <span class="keyword">yield</span> np.array(imgs_list), np.array(labels_list)</span><br><span class="line">            <span class="comment"># æ¸…ç©ºæ•°æ®è¯»å–åˆ—è¡¨</span></span><br><span class="line">            imgs_list = []</span><br><span class="line">            labels_list = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœå‰©ä½™æ•°æ®çš„æ•°ç›®å°äºBATCHSIZEï¼Œ</span></span><br><span class="line">    <span class="comment"># åˆ™å‰©ä½™æ•°æ®ä¸€èµ·æ„æˆä¸€ä¸ªå¤§å°ä¸ºlen(imgs_list)çš„mini-batch</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(imgs_list) &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">yield</span> np.array(imgs_list), np.array(labels_list)</span><br><span class="line">    <span class="keyword">return</span> data_generator</span><br></pre></td></tr></table></figure><pre><code>è®­ç»ƒæ•°æ®é›†æ•°é‡:  50000</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜æ•°æ®è¯»å–å‡½æ•°ï¼Œä»è®­ç»ƒé›†ä¸­è¯»å–æ•°æ®</span></span><br><span class="line">train_loader = data_generator</span><br><span class="line"><span class="comment"># ä»¥è¿­ä»£çš„å½¢å¼è¯»å–æ•°æ®</span></span><br><span class="line"><span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">    image_data, label_data = data</span><br><span class="line">    <span class="keyword">if</span> batch_id == <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># æ‰“å°æ•°æ®shapeå’Œç±»å‹</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ‰“å°ç¬¬ä¸€ä¸ªbatchæ•°æ®çš„ç»´åº¦:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å›¾åƒç»´åº¦: &#123;&#125;, æ ‡ç­¾ç»´åº¦: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(image_data.shape, label_data.shape))</span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure><pre><code>æ‰“å°ç¬¬ä¸€ä¸ªbatchæ•°æ®çš„ç»´åº¦:å›¾åƒç»´åº¦: (100, 784), æ ‡ç­¾ç»´åº¦: (100,)# 100å¼ å›¾ç‰‡ï¼Œ784æ˜¯28Ã—28åçš„å±•å¹³ç»“æœ</code></pre><h2 id="1-3-æ ¡éªŒæ•°æ®æœ‰æ•ˆæ€§"><a href="#1-3-æ ¡éªŒæ•°æ®æœ‰æ•ˆæ€§" class="headerlink" title="1.3 æ ¡éªŒæ•°æ®æœ‰æ•ˆæ€§"></a><strong>1.3 æ ¡éªŒæ•°æ®æœ‰æ•ˆæ€§</strong></h2><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒåŸå§‹æ•°æ®å¯èƒ½å­˜åœ¨æ ‡æ³¨ä¸å‡†ç¡®ã€æ•°æ®æ‚ä¹±æˆ–æ ¼å¼ä¸ç»Ÿä¸€ç­‰æƒ…å†µã€‚å› æ­¤åœ¨å®Œæˆæ•°æ®å¤„ç†æµç¨‹åï¼Œè¿˜éœ€è¦è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>æœºå™¨æ ¡éªŒï¼šåŠ å…¥ä¸€äº›æ ¡éªŒå’Œæ¸…ç†æ•°æ®çš„æ“ä½œã€‚</li><li>äººå·¥æ ¡éªŒï¼šå…ˆæ‰“å°æ•°æ®è¾“å‡ºç»“æœï¼Œè§‚å¯Ÿæ˜¯å¦æ˜¯è®¾ç½®çš„æ ¼å¼ã€‚å†ä»è®­ç»ƒçš„ç»“æœéªŒè¯æ•°æ®å¤„ç†å’Œè¯»å–çš„æœ‰æ•ˆæ€§ã€‚</li></ul><h3 id="æœºå™¨æ ¡éªŒ"><a href="#æœºå™¨æ ¡éªŒ" class="headerlink" title="æœºå™¨æ ¡éªŒ"></a><strong>æœºå™¨æ ¡éªŒ</strong></h3><p>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå¦‚æœæ•°æ®é›†ä¸­çš„å›¾ç‰‡æ•°é‡å’Œæ ‡ç­¾æ•°é‡ä¸ç­‰ï¼Œè¯´æ˜æ•°æ®é€»è¾‘å­˜åœ¨é—®é¢˜ï¼Œå¯ä½¿ç”¨assertè¯­å¥æ ¡éªŒå›¾åƒæ•°é‡å’Œæ ‡ç­¾æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">imgs_length = <span class="built_in">len</span>(imgs)</span><br><span class="line"><span class="comment"># æ¡ä»¶ä¸æ»¡è¶³ï¼ŒæŠ¥é”™AssertionError</span></span><br><span class="line"><span class="comment"># æ¡ä»¶æ»¡è¶³ï¼Œä¸å‘ç”Ÿå˜åŒ–æ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">len</span>(imgs) == <span class="built_in">len</span>(labels), \</span><br><span class="line">    <span class="string">&quot;length of train_imgs(&#123;&#125;) should be the same as train_labels(&#123;&#125;)&quot;</span>\</span><br><span class="line">    .<span class="built_in">format</span>(<span class="built_in">len</span>(imgs), <span class="built_in">len</span>(label))</span><br></pre></td></tr></table></figure><h3 id="äººå·¥æ ¡éªŒ"><a href="#äººå·¥æ ¡éªŒ" class="headerlink" title="äººå·¥æ ¡éªŒ"></a><strong>äººå·¥æ ¡éªŒ</strong></h3><p>äººå·¥æ ¡éªŒæ˜¯æŒ‡æ‰“å°æ•°æ®è¾“å‡ºç»“æœï¼Œè§‚å¯Ÿæ˜¯å¦æ˜¯é¢„æœŸçš„æ ¼å¼ã€‚å®ç°æ•°æ®å¤„ç†å’ŒåŠ è½½å‡½æ•°åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨å®ƒè¯»å–ä¸€æ¬¡æ•°æ®ï¼Œè§‚å¯Ÿæ•°æ®çš„shapeå’Œç±»å‹æ˜¯å¦ä¸å‡½æ•°ä¸­è®¾ç½®çš„ä¸€è‡´ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜æ•°æ®è¯»å–å‡½æ•°ï¼Œä»è®­ç»ƒé›†ä¸­è¯»å–æ•°æ®</span></span><br><span class="line">train_loader = data_generator</span><br><span class="line"><span class="comment"># ä»¥è¿­ä»£çš„å½¢å¼è¯»å–æ•°æ®</span></span><br><span class="line"><span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">    image_data, label_data = data</span><br><span class="line">    <span class="keyword">if</span> batch_id == <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># æ‰“å°æ•°æ®shapeå’Œç±»å‹</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ‰“å°ç¬¬ä¸€ä¸ªbatchæ•°æ®çš„ç»´åº¦ï¼Œä»¥åŠæ•°æ®çš„ç±»å‹:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å›¾åƒç»´åº¦: &#123;&#125;, æ ‡ç­¾ç»´åº¦: &#123;&#125;, å›¾åƒæ•°æ®ç±»å‹: &#123;&#125;, æ ‡ç­¾æ•°æ®ç±»å‹: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(image_data.shape, label_data.shape, <span class="built_in">type</span>(image_data), <span class="built_in">type</span>(label_data)))</span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure><pre><code>æ‰“å°ç¬¬ä¸€ä¸ªbatchæ•°æ®çš„ç»´åº¦ï¼Œä»¥åŠæ•°æ®çš„ç±»å‹:å›¾åƒç»´åº¦: (100, 784), æ ‡ç­¾ç»´åº¦: (100,), å›¾åƒæ•°æ®ç±»å‹: &lt;class &#39;numpy.ndarray&#39;&gt;, æ ‡ç­¾æ•°æ®ç±»å‹: &lt;class &#39;numpy.ndarray&#39;&gt;</code></pre><h2 id="1-4-å°è£…æ•°æ®è¯»å–ä¸å¤„ç†å‡½æ•°"><a href="#1-4-å°è£…æ•°æ®è¯»å–ä¸å¤„ç†å‡½æ•°" class="headerlink" title="1.4 å°è£…æ•°æ®è¯»å–ä¸å¤„ç†å‡½æ•°"></a><strong>1.4 å°è£…æ•°æ®è¯»å–ä¸å¤„ç†å‡½æ•°</strong></h2><p>ä¸Šæ–‡ï¼Œæˆ‘ä»¬ä»è¯»å–æ•°æ®ã€åˆ’åˆ†æ•°æ®é›†ã€åˆ°æ‰“ä¹±è®­ç»ƒæ•°æ®ã€æ„å»ºæ•°æ®è¯»å–å™¨ä»¥åŠæ•°æ®æ•°æ®æ ¡éªŒï¼Œå®Œæˆäº†ä¸€æ•´å¥—ä¸€èˆ¬æ€§çš„æ•°æ®å¤„ç†æµç¨‹ï¼Œä¸‹é¢å°†è¿™äº›æ­¥éª¤æ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®ç°ï¼Œæ–¹ä¾¿åœ¨ç¥ç»ç½‘ç»œè®­ç»ƒæ—¶ç›´æ¥è°ƒç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_data</span>(<span class="params">mode=<span class="string">&#x27;train&#x27;</span></span>):</span><br><span class="line">    datafile = <span class="string">&#x27;./work/mnist.json.gz&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;loading mnist dataset from &#123;&#125; ......&#x27;</span>.<span class="built_in">format</span>(datafile))</span><br><span class="line">    <span class="comment"># åŠ è½½jsonæ•°æ®æ–‡ä»¶</span></span><br><span class="line">    data = json.load(gzip.<span class="built_in">open</span>(datafile))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;mnist dataset load done&#x27;</span>)</span><br><span class="line">   </span><br><span class="line">    <span class="comment"># è¯»å–åˆ°çš„æ•°æ®åŒºåˆ†è®­ç»ƒé›†ï¼ŒéªŒè¯é›†ï¼Œæµ‹è¯•é›†</span></span><br><span class="line">    train_set, val_set, eval_set = data</span><br><span class="line">    <span class="keyword">if</span> mode==<span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">        <span class="comment"># è·å¾—è®­ç»ƒæ•°æ®é›†</span></span><br><span class="line">        imgs, labels = train_set[<span class="number">0</span>], train_set[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">elif</span> mode==<span class="string">&#x27;valid&#x27;</span>:</span><br><span class="line">        <span class="comment"># è·å¾—éªŒè¯æ•°æ®é›†</span></span><br><span class="line">        imgs, labels = val_set[<span class="number">0</span>], val_set[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">elif</span> mode==<span class="string">&#x27;eval&#x27;</span>:</span><br><span class="line">        <span class="comment"># è·å¾—æµ‹è¯•æ•°æ®é›†</span></span><br><span class="line">        imgs, labels = eval_set[<span class="number">0</span>], eval_set[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;mode can only be one of [&#x27;train&#x27;, &#x27;valid&#x27;, &#x27;eval&#x27;]&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è®­ç»ƒæ•°æ®é›†æ•°é‡: &quot;</span>, <span class="built_in">len</span>(imgs))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ ¡éªŒæ•°æ®</span></span><br><span class="line">    imgs_length = <span class="built_in">len</span>(imgs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(imgs) == <span class="built_in">len</span>(labels), \</span><br><span class="line">          <span class="string">&quot;length of train_imgs(&#123;&#125;) should be the same as train_labels(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(imgs), <span class="built_in">len</span>(labels))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è·å¾—æ•°æ®é›†é•¿åº¦</span></span><br><span class="line">    imgs_length = <span class="built_in">len</span>(imgs)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®šä¹‰æ•°æ®é›†æ¯ä¸ªæ•°æ®çš„åºå·ï¼Œæ ¹æ®åºå·è¯»å–æ•°æ®</span></span><br><span class="line">    index_list = <span class="built_in">list</span>(<span class="built_in">range</span>(imgs_length))</span><br><span class="line">    <span class="comment"># è¯»å…¥æ•°æ®æ—¶ç”¨åˆ°çš„æ‰¹æ¬¡å¤§å°</span></span><br><span class="line">    BATCHSIZE = <span class="number">100</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®šä¹‰æ•°æ®ç”Ÿæˆå™¨</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">data_generator</span>():</span><br><span class="line">        <span class="keyword">if</span> mode == <span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">            <span class="comment"># è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®</span></span><br><span class="line">            random.shuffle(index_list)</span><br><span class="line">        imgs_list = []</span><br><span class="line">        labels_list = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> index_list:</span><br><span class="line">            <span class="comment"># å°†æ•°æ®å¤„ç†æˆå¸Œæœ›çš„ç±»å‹</span></span><br><span class="line">            img = np.array(imgs[i]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            label = np.array(labels[i]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            imgs_list.append(img) </span><br><span class="line">            labels_list.append(label)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(imgs_list) == BATCHSIZE:</span><br><span class="line">                <span class="comment"># è·å¾—ä¸€ä¸ªbatchsizeçš„æ•°æ®ï¼Œå¹¶è¿”å›</span></span><br><span class="line">                <span class="keyword">yield</span> np.array(imgs_list), np.array(labels_list)</span><br><span class="line">                <span class="comment"># æ¸…ç©ºæ•°æ®è¯»å–åˆ—è¡¨</span></span><br><span class="line">                imgs_list = []</span><br><span class="line">                labels_list = []</span><br><span class="line">    </span><br><span class="line">        <span class="comment"># å¦‚æœå‰©ä½™æ•°æ®çš„æ•°ç›®å°äºBATCHSIZEï¼Œ</span></span><br><span class="line">        <span class="comment"># åˆ™å‰©ä½™æ•°æ®ä¸€èµ·æ„æˆä¸€ä¸ªå¤§å°ä¸ºlen(imgs_list)çš„mini-batch</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(imgs_list) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">yield</span> np.array(imgs_list), np.array(labels_list)</span><br><span class="line">    <span class="keyword">return</span> data_generator</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å®šä¹‰ä¸€å±‚ç¥ç»ç½‘ç»œï¼Œåˆ©ç”¨å®šä¹‰å¥½çš„æ•°æ®å¤„ç†å‡½æ•°ï¼Œå®Œæˆç¥ç»ç½‘ç»œçš„è®­ç»ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ•°æ®å¤„ç†éƒ¨åˆ†ä¹‹åçš„ä»£ç ï¼Œæ•°æ®è¯»å–çš„éƒ¨åˆ†è°ƒç”¨Load_dataå‡½æ•°</span></span><br><span class="line"><span class="comment"># å®šä¹‰ç½‘ç»œç»“æ„ï¼ŒåŒä¸Šä¸€èŠ‚æ‰€ä½¿ç”¨çš„ç½‘ç»œç»“æ„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MNIST</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MNIST, self).__init__()</span><br><span class="line">        <span class="comment"># å®šä¹‰ä¸€å±‚å…¨è¿æ¥å±‚ï¼Œè¾“å‡ºç»´åº¦æ˜¯1</span></span><br><span class="line">        self.fc = paddle.nn.Linear(in_features=<span class="number">784</span>, out_features=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        outputs = self.fc(inputs)</span><br><span class="line">        <span class="keyword">return</span> outputs</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒé…ç½®ï¼Œå¹¶å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model</span>):</span><br><span class="line">    model = MNIST()</span><br><span class="line">    model.train()</span><br><span class="line">    <span class="comment">#è°ƒç”¨åŠ è½½æ•°æ®çš„å‡½æ•°</span></span><br><span class="line">    train_loader = load_data(<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">    opt = paddle.optimizer.SGD(learning_rate=<span class="number">0.001</span>, parameters=model.parameters())</span><br><span class="line">    EPOCH_NUM = <span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> epoch_id <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            <span class="comment">#å‡†å¤‡æ•°æ®ï¼Œå˜å¾—æ›´åŠ ç®€æ´</span></span><br><span class="line">            images, labels = data</span><br><span class="line">            images = paddle.to_tensor(images)</span><br><span class="line">            labels = paddle.to_tensor(labels) </span><br><span class="line"></span><br><span class="line">            <span class="comment">#å‰å‘è®¡ç®—çš„è¿‡ç¨‹</span></span><br><span class="line">            predits = model(images)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#è®¡ç®—æŸå¤±ï¼Œå–ä¸€ä¸ªæ‰¹æ¬¡æ ·æœ¬æŸå¤±çš„å¹³å‡å€¼</span></span><br><span class="line">            loss = F.square_error_cost(predits, labels)</span><br><span class="line">            avg_loss = paddle.mean(loss)      </span><br><span class="line">            </span><br><span class="line">            <span class="comment">#æ¯è®­ç»ƒäº†200æ‰¹æ¬¡çš„æ•°æ®ï¼Œæ‰“å°ä¸‹å½“å‰Lossçš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span> batch_id % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, batch: &#123;&#125;, loss is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch_id, batch_id, avg_loss.numpy()))</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#åå‘ä¼ æ’­ï¼Œæ›´æ–°å‚æ•°çš„è¿‡ç¨‹</span></span><br><span class="line">            avg_loss.backward()</span><br><span class="line">            opt.step()</span><br><span class="line">            opt.clear_grad()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¿å­˜æ¨¡å‹</span></span><br><span class="line">    paddle.save(model.state_dict(), <span class="string">&#x27;./mnist.pdparams&#x27;</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹           </span></span><br><span class="line">model = MNIST()</span><br><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">train(model)</span><br></pre></td></tr></table></figure><h1 id="äºŒã€å¼‚æ­¥æ•°æ®è¯»å–"><a href="#äºŒã€å¼‚æ­¥æ•°æ®è¯»å–" class="headerlink" title="äºŒã€å¼‚æ­¥æ•°æ®è¯»å–"></a>äºŒã€å¼‚æ­¥æ•°æ®è¯»å–</h1><p>ä¸Šé¢æåˆ°çš„æ•°æ®è¯»å–é‡‡ç”¨çš„æ˜¯åŒæ­¥æ•°æ®è¯»å–æ–¹å¼ã€‚å¯¹äºæ ·æœ¬é‡è¾ƒå¤§ã€æ•°æ®è¯»å–è¾ƒæ…¢çš„åœºæ™¯ï¼Œå»ºè®®é‡‡ç”¨å¼‚æ­¥æ•°æ®è¯»å–æ–¹å¼ã€‚å¼‚æ­¥è¯»å–æ•°æ®æ—¶ï¼Œæ•°æ®è¯»å–å’Œæ¨¡å‹è®­ç»ƒå¹¶è¡Œæ‰§è¡Œï¼Œä»è€ŒåŠ å¿«äº†æ•°æ®è¯»å–é€Ÿåº¦ï¼Œç‰ºç‰²ä¸€å°éƒ¨åˆ†å†…å­˜æ¢å–æ•°æ®è¯»å–æ•ˆç‡çš„æå‡ï¼ŒäºŒè€…å…³ç³»å¦‚ <strong>å›¾3</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/a5fd990c5355426183a71b95aa28a59f979014f6905144ddb415c5a4fe647441" width="500" ></center><center><br>å›¾3ï¼šåŒæ­¥æ•°æ®è¯»å–å’Œå¼‚æ­¥æ•°æ®è¯»å–ç¤ºæ„å›¾</br></center><p><br></br></p><ul><li><strong>åŒæ­¥æ•°æ®è¯»å–</strong>ï¼šæ•°æ®è¯»å–ä¸æ¨¡å‹è®­ç»ƒä¸²è¡Œã€‚å½“æ¨¡å‹éœ€è¦æ•°æ®æ—¶ï¼Œæ‰è¿è¡Œæ•°æ®è¯»å–å‡½æ•°è·å¾—å½“å‰æ‰¹æ¬¡çš„æ•°æ®ã€‚åœ¨è¯»å–æ•°æ®æœŸé—´ï¼Œæ¨¡å‹ä¸€ç›´ç­‰å¾…æ•°æ®è¯»å–ç»“æŸæ‰è¿›è¡Œè®­ç»ƒï¼Œæ•°æ®è¯»å–é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚</li><li><strong>å¼‚æ­¥æ•°æ®è¯»å–</strong>ï¼šæ•°æ®è¯»å–å’Œæ¨¡å‹è®­ç»ƒå¹¶è¡Œã€‚è¯»å–åˆ°çš„æ•°æ®ä¸æ–­çš„æ”¾å…¥ç¼“å­˜åŒºï¼Œæ— éœ€ç­‰å¾…æ¨¡å‹è®­ç»ƒå°±å¯ä»¥å¯åŠ¨ä¸‹ä¸€è½®æ•°æ®è¯»å–ã€‚å½“æ¨¡å‹è®­ç»ƒå®Œä¸€ä¸ªæ‰¹æ¬¡åï¼Œä¸ç”¨ç­‰å¾…æ•°æ®è¯»å–è¿‡ç¨‹ï¼Œç›´æ¥ä»ç¼“å­˜åŒºè·å¾—ä¸‹ä¸€æ‰¹æ¬¡æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œä»è€ŒåŠ å¿«äº†æ•°æ®è¯»å–é€Ÿåº¦ã€‚</li><li><strong>å¼‚æ­¥é˜Ÿåˆ—</strong>ï¼šæ•°æ®è¯»å–å’Œæ¨¡å‹è®­ç»ƒäº¤äº’çš„ä»“åº“ï¼ŒäºŒè€…å‡å¯ä»¥ä»ä»“åº“ä¸­è¯»å–æ•°æ®ï¼Œå®ƒçš„å­˜åœ¨ä½¿å¾—ä¸¤è€…çš„å·¥ä½œèŠ‚å¥å¯ä»¥è§£è€¦ã€‚</li></ul><p>ä½¿ç”¨é£æ¡¨å®ç°å¼‚æ­¥æ•°æ®è¯»å–éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ol><li>æ„å»ºä¸€ä¸ªç»§æ‰¿paddle.io.Datasetç±»çš„æ•°æ®è¯»å–å™¨ã€‚</li><li>é€šè¿‡paddle.io.DataLoaderåˆ›å»ºå¼‚æ­¥æ•°æ®è¯»å–çš„è¿­ä»£å™¨ã€‚</li></ol><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºå®šä¹‰ä¸€ä¸ªpaddle.io.Datasetç±»ï¼Œä½¿ç”¨éšæœºå‡½æ•°ç”Ÿæˆä¸€ä¸ªæ•°æ®è¯»å–å™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="comment"># æ„å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿paddle.io.Datasetï¼Œåˆ›å»ºæ•°æ®è¯»å–å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RandomDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_samples</span>):</span><br><span class="line">        <span class="comment"># æ ·æœ¬æ•°é‡</span></span><br><span class="line">        self.num_samples = num_samples</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="comment"># éšæœºäº§ç”Ÿæ•°æ®å’Œlabel</span></span><br><span class="line">        image = np.random.random([<span class="number">784</span>]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">        label = np.random.randint(<span class="number">0</span>, <span class="number">9</span>, (<span class="number">1</span>, )).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> image, label</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è¿”å›æ ·æœ¬æ€»æ•°é‡</span></span><br><span class="line">        <span class="keyword">return</span> self.num_samples</span><br><span class="line">        </span><br><span class="line"><span class="comment"># æµ‹è¯•æ•°æ®è¯»å–å™¨ï¼šnum_samplesä¸ª</span></span><br><span class="line">dataset = RandomDataset(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(dataset)):</span><br><span class="line">    <span class="built_in">print</span>(dataset[i])</span><br></pre></td></tr></table></figure><p>åœ¨å®šä¹‰å®Œ <a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/io/Dataset_cn.html#dataset">paddle.io.Dataset</a> åï¼Œä½¿ç”¨ <a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/io/DataLoader_cn.html#dataloader">paddle.io.DataLoader</a> APIå³å¯å®ç°å¼‚æ­¥æ•°æ®è¯»å–ï¼Œæ•°æ®ä¼šç”±Pythonçº¿ç¨‹é¢„å…ˆè¯»å–ï¼Œå¹¶å¼‚æ­¥é€å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚</p><blockquote><p><em>class</em> paddle.io.DataLoader(dataset, batch_size&#x3D;100, shuffle&#x3D;True, num_workers&#x3D;2)</p></blockquote><p>DataLoaderæ”¯æŒå•è¿›ç¨‹å’Œå¤šè¿›ç¨‹çš„æ•°æ®åŠ è½½æ–¹å¼ã€‚å½“ num_workers&#x3D;0æ—¶ï¼Œä½¿ç”¨å•è¿›ç¨‹æ–¹å¼å¼‚æ­¥åŠ è½½æ•°æ®ï¼›å½“ num_workers&#x3D;n(n&gt;0)æ—¶ï¼Œä¸»è¿›ç¨‹å°†ä¼šå¼€å¯nä¸ªå­è¿›ç¨‹å¼‚æ­¥åŠ è½½æ•°æ®ã€‚<br>DataLoaderè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿­ä»£çš„è¿”å›datasetä¸­çš„æ•°æ®å†…å®¹ï¼›ä½¿ç”¨paddle.io.DataLoader APIä»¥batchçš„æ–¹å¼è¿›è¡Œè¿­ä»£æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">loader = paddle.io.DataLoader(dataset, </span><br><span class="line">                            batch_size=<span class="number">3</span>, </span><br><span class="line">                            shuffle=<span class="literal">True</span>, </span><br><span class="line">                            drop_last=<span class="literal">True</span>, <span class="comment">#æ˜¯å¦çš„ä¸¢å¼ƒæ ·æœ¬ï¼Œæ¯”å¦‚ä¸€å…±10ä¸ªæ•°æ®3ä¸ª3ä¸ªçš„è¯»ï¼Œæœ€åä¸€ä¸ªä¸¢å¼ƒã€‚</span></span><br><span class="line">                            num_workers=<span class="number">2</span>)</span><br><span class="line"><span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(loader()):</span><br><span class="line">    images, labels = data[<span class="number">0</span>], data[<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;batch_id: &#123;&#125;, è®­ç»ƒæ•°æ®shape: &#123;&#125;, æ ‡ç­¾æ•°æ®shape: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(i, images.shape, labels.shape))</span><br></pre></td></tr></table></figure><pre><code>batch_id: 0, è®­ç»ƒæ•°æ®shape: [3, 784], æ ‡ç­¾æ•°æ®shape: [3, 1]batch_id: 1, è®­ç»ƒæ•°æ®shape: [3, 784], æ ‡ç­¾æ•°æ®shape: [3, 1]batch_id: 2, è®­ç»ƒæ•°æ®shape: [3, 784], æ ‡ç­¾æ•°æ®shape: [3, 1]</code></pre><p>é€šè¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æŒ‡å¯¼äº†å¦‚ä½•è‡ªå®šä¹‰ã€ä½¿ç”¨paddle.io.Datasetå’Œpaddle.io.DataLoaderï¼Œä¸‹é¢æˆ‘ä»¬ä»¥MNISTæ•°æ®ä¸ºä¾‹ï¼Œç”Ÿæˆå¯¹åº”çš„Datasetå’ŒDataLoaderã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªç±»MnistDatasetï¼Œç»§æ‰¿paddle.io.Dataset è¿™ä¸ªç±»</span></span><br><span class="line"><span class="comment"># MnistDatasetçš„ä½œç”¨å’Œä¸Šé¢load_data()å‡½æ•°çš„ä½œç”¨ç›¸åŒï¼Œå‡æ˜¯æ„å»ºä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MnistDataset</span>(paddle.io.Dataset):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, mode</span>):</span><br><span class="line">        datafile = <span class="string">&#x27;./work/mnist.json.gz&#x27;</span></span><br><span class="line">        data = json.load(gzip.<span class="built_in">open</span>(datafile))</span><br><span class="line">        <span class="comment"># è¯»å–åˆ°çš„æ•°æ®åŒºåˆ†è®­ç»ƒé›†ï¼ŒéªŒè¯é›†ï¼Œæµ‹è¯•é›†</span></span><br><span class="line">        train_set, val_set, eval_set = data</span><br><span class="line">        <span class="keyword">if</span> mode==<span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—è®­ç»ƒæ•°æ®é›†</span></span><br><span class="line">            imgs, labels = train_set[<span class="number">0</span>], train_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">elif</span> mode==<span class="string">&#x27;valid&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—éªŒè¯æ•°æ®é›†</span></span><br><span class="line">            imgs, labels = val_set[<span class="number">0</span>], val_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">elif</span> mode==<span class="string">&#x27;eval&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—æµ‹è¯•æ•°æ®é›†</span></span><br><span class="line">            imgs, labels = eval_set[<span class="number">0</span>], eval_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&quot;mode can only be one of [&#x27;train&#x27;, &#x27;valid&#x27;, &#x27;eval&#x27;]&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ ¡éªŒæ•°æ®</span></span><br><span class="line">        imgs_length = <span class="built_in">len</span>(imgs)</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">len</span>(imgs) == <span class="built_in">len</span>(labels), \</span><br><span class="line">            <span class="string">&quot;length of train_imgs(&#123;&#125;) should be the same as train_labels(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(imgs), <span class="built_in">len</span>(labels))</span><br><span class="line">        </span><br><span class="line">        self.imgs = imgs</span><br><span class="line">        self.labels = labels</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        img = np.array(self.imgs[idx]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">        label = np.array(self.labels[idx]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> img, label</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.imgs)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜æ•°æ®åŠ è½½å‡½æ•°ï¼Œä½¿ç”¨MnistDatasetæ•°æ®é›†</span></span><br><span class="line">train_dataset = MnistDataset(mode=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line"><span class="comment"># ä½¿ç”¨paddle.io.DataLoader å®šä¹‰DataLoaderå¯¹è±¡ç”¨äºåŠ è½½Pythonç”Ÿæˆå™¨äº§ç”Ÿçš„æ•°æ®ï¼Œ</span></span><br><span class="line"><span class="comment"># DataLoader è¿”å›çš„æ˜¯ä¸€ä¸ªæ‰¹æ¬¡æ•°æ®è¿­ä»£å™¨ï¼Œå¹¶ä¸”æ˜¯å¼‚æ­¥çš„ï¼›</span></span><br><span class="line">data_loader = paddle.io.DataLoader(train_dataset, batch_size=<span class="number">100</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># è¿­ä»£çš„è¯»å–æ•°æ®å¹¶æ‰“å°æ•°æ®çš„å½¢çŠ¶</span></span><br><span class="line"><span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(data_loader()):</span><br><span class="line">    images, labels = data</span><br><span class="line">    <span class="built_in">print</span>(i, images.shape, labels.shape)</span><br><span class="line">    <span class="keyword">if</span> i&gt;=<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><pre><code>0 [100, 784] [100]1 [100, 784] [100]2 [100, 784] [100]</code></pre><p>å¼‚æ­¥æ•°æ®è¯»å–å¹¶è®­ç»ƒçš„å®Œæ•´æ¡ˆä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model</span>):</span><br><span class="line">    model = MNIST()</span><br><span class="line">    model.train()</span><br><span class="line">    opt = paddle.optimizer.SGD(learning_rate=<span class="number">0.001</span>, parameters=model.parameters())</span><br><span class="line">    EPOCH_NUM = <span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> epoch_id <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(data_loader()):</span><br><span class="line">            images, labels = data</span><br><span class="line">            images = paddle.to_tensor(images)</span><br><span class="line">            labels = paddle.to_tensor(labels).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#å‰å‘è®¡ç®—çš„è¿‡ç¨‹  </span></span><br><span class="line">            predicts = model(images)</span><br><span class="line"></span><br><span class="line">            <span class="comment">#è®¡ç®—æŸå¤±ï¼Œå–ä¸€ä¸ªæ‰¹æ¬¡æ ·æœ¬æŸå¤±çš„å¹³å‡å€¼</span></span><br><span class="line">            loss = F.square_error_cost(predicts, labels)</span><br><span class="line">            avg_loss = paddle.mean(loss)       </span><br><span class="line">            </span><br><span class="line">            <span class="comment">#æ¯è®­ç»ƒäº†200æ‰¹æ¬¡çš„æ•°æ®ï¼Œæ‰“å°ä¸‹å½“å‰Lossçš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span> batch_id % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, batch: &#123;&#125;, loss is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch_id, batch_id, avg_loss.numpy()))</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#åå‘ä¼ æ’­ï¼Œæ›´æ–°å‚æ•°çš„è¿‡ç¨‹</span></span><br><span class="line">            avg_loss.backward()</span><br><span class="line">            opt.step()</span><br><span class="line">            opt.clear_grad()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#ä¿å­˜æ¨¡å‹å‚æ•°</span></span><br><span class="line">    paddle.save(model.state_dict(), <span class="string">&#x27;mnist&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = MNIST()</span><br><span class="line"><span class="comment">#å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">train(model)</span><br></pre></td></tr></table></figure><p>ä»å¼‚æ­¥æ•°æ®è¯»å–çš„è®­ç»ƒç»“æœæ¥çœ‹ï¼ŒæŸå¤±å‡½æ•°ä¸‹é™ä¸åŒæ­¥æ•°æ®è¯»å–è®­ç»ƒç»“æœä¸€è‡´ã€‚æ³¨æ„ï¼Œå¼‚æ­¥è¯»å–æ•°æ®åªåœ¨æ•°æ®é‡è§„æ¨¡å·¨å¤§æ—¶ä¼šå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œå¯¹äºå¤šæ•°åœºæ™¯é‡‡ç”¨åŒæ­¥æ•°æ®è¯»å–çš„æ–¹å¼å·²ç»è¶³å¤Ÿã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_å·ç§¯åŸºæœ¬æ¦‚å¿µåŠç»å…¸æ¨¡å‹å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 5.2-å›¾åƒåˆ†ç±»ä¸­ç»å…¸æ¨¡å‹çš„ç»„ç½‘æ–¹å¼</title>
      <link href="/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.2-%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E4%B8%AD%E7%BB%8F%E5%85%B8%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%BB%84%E7%BD%91%E6%96%B9%E5%BC%8F/"/>
      <url>/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.2-%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E4%B8%AD%E7%BB%8F%E5%85%B8%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%BB%84%E7%BD%91%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å›¾åƒåˆ†ç±»ä¸­ç»å…¸æ¨¡å‹çš„ç»„ç½‘æ–¹å¼"><a href="#å›¾åƒåˆ†ç±»ä¸­ç»å…¸æ¨¡å‹çš„ç»„ç½‘æ–¹å¼" class="headerlink" title="å›¾åƒåˆ†ç±»ä¸­ç»å…¸æ¨¡å‹çš„ç»„ç½‘æ–¹å¼"></a>å›¾åƒåˆ†ç±»ä¸­ç»å…¸æ¨¡å‹çš„ç»„ç½‘æ–¹å¼</h1><p>å›¾åƒåˆ†ç±»æ˜¯æ ¹æ®å›¾åƒçš„è¯­ä¹‰ä¿¡æ¯å¯¹ä¸åŒç±»åˆ«å›¾åƒè¿›è¡ŒåŒºåˆ†ï¼Œæ˜¯è®¡ç®—æœºè§†è§‰çš„æ ¸å¿ƒï¼Œæ˜¯ç‰©ä½“æ£€æµ‹ã€å›¾åƒåˆ†å‰²ã€ç‰©ä½“è·Ÿè¸ªã€è¡Œä¸ºåˆ†æã€äººè„¸è¯†åˆ«ç­‰å…¶ä»–é«˜å±‚æ¬¡è§†è§‰ä»»åŠ¡çš„åŸºç¡€ã€‚</p><p>å›¾åƒåˆ†ç±»åœ¨è®¸å¤šé¢†åŸŸéƒ½æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œå¦‚ï¼šå®‰é˜²é¢†åŸŸçš„äººè„¸è¯†åˆ«å’Œæ™ºèƒ½è§†é¢‘åˆ†æç­‰ï¼Œäº¤é€šé¢†åŸŸçš„äº¤é€šåœºæ™¯è¯†åˆ«ï¼Œäº’è”ç½‘é¢†åŸŸåŸºäºå†…å®¹çš„å›¾åƒæ£€ç´¢å’Œç›¸å†Œè‡ªåŠ¨å½’ç±»ï¼ŒåŒ»å­¦é¢†åŸŸçš„å›¾åƒè¯†åˆ«ç­‰ã€‚</p><p>ä¸Šä¸€èŠ‚ä¸»è¦ä»‹ç»äº†å·ç§¯ç¥ç»ç½‘ç»œå¸¸ç”¨çš„ä¸€äº›åŸºæœ¬æ¨¡å—ï¼Œæœ¬èŠ‚å°†åŸºäºçœ¼ç–¾åˆ†ç±»æ•°æ®é›† <a href="https://ai.baidu.com/broad/introduction">iChallenge-PM</a>ï¼Œå¯¹å›¾åƒåˆ†ç±»é¢†åŸŸçš„ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œè¿›è¡Œå‰–æï¼Œä»‹ç»å¦‚ä½•åº”ç”¨è¿™äº›åŸºç¡€æ¨¡å—æ„å»ºå·ç§¯ç¥ç»ç½‘ç»œï¼Œè§£å†³å›¾åƒåˆ†ç±»é—®é¢˜ã€‚æŒ‰ç…§è¢«æå‡ºçš„æ—¶é—´é¡ºåºï¼Œæ¶µç›–å¦‚ä¸‹å·ç§¯ç¥ç»ç½‘ç»œï¼š</p><ul><li>LeNetï¼šYan LeCun ç­‰äººäº 1998 å¹´ç¬¬ä¸€æ¬¡å°†å·ç§¯ç¥ç»ç½‘ç»œåº”ç”¨åˆ°å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸Š[1]ï¼Œåœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ä¸Šå–å¾—äº†å·¨å¤§æˆåŠŸã€‚</li><li>AlexNetï¼šAlex Krizhevsky ç­‰äººåœ¨ 2012 å¹´æå‡ºäº†AlexNet[2], å¹¶åº”ç”¨åœ¨å¤§å°ºå¯¸å›¾ç‰‡æ•°æ®é›† ImageNet ä¸Šï¼Œè·å¾—äº† 2012 å¹´ ImageNet æ¯”èµ›å† å†› ï¼ˆImageNet Large Scale Visual Recognition Challengeï¼ŒILSVRCï¼‰ã€‚</li><li>VGGï¼šSimonyan å’Œ Zisserman äº 2014 å¹´æå‡ºäº† VGG ç½‘ç»œç»“æ„[3]ï¼Œæ˜¯å½“å‰æœ€æµè¡Œçš„å·ç§¯ç¥ç»ç½‘ç»œä¹‹ä¸€ï¼Œç”±äºå…¶ç»“æ„ç®€å•ã€åº”ç”¨æ€§æå¼ºè€Œæ·±å—å¹¿å¤§ç ”ç©¶è€…æ¬¢è¿ã€‚</li><li>GoogLeNetï¼šChristian Szegedy ç­‰äººåœ¨ 2014 æå‡ºäº† GoogLeNet[4]ï¼Œå¹¶å–å¾—äº† 2014 å¹´ ImageNet æ¯”èµ›å† å†›ã€‚</li><li>ResNetï¼šKaiming He ç­‰äººåœ¨ 2015 å¹´æå‡ºäº† ResNet[5]ï¼Œé€šè¿‡å¼•å…¥æ®‹å·®æ¨¡å—åŠ æ·±ç½‘ç»œå±‚æ•°ï¼Œåœ¨ ImagNet æ•°æ®é›†ä¸Šçš„é”™è¯¯ç‡é™ä½åˆ°3.6%ï¼Œè¶…è¶Šäº†äººçœ¼è¯†åˆ«æ°´å¹³ã€‚ResNet çš„è®¾è®¡æ€æƒ³æ·±åˆ»åœ°å½±å“äº†åæ¥çš„æ·±åº¦ç¥ç»ç½‘ç»œçš„è®¾è®¡ã€‚</li></ul><blockquote><p>å„ä¸ªç»„ç½‘ä¸­ä¸»è¦çš„æ¨¡å‹æ­å»ºçš„éƒ¨åˆ†ï¼Œè®­ç»ƒéƒ¨åˆ†çš„ä»£ç éƒ½æ˜¯å·®ä¸å¤šçš„ï¼</p></blockquote><h1 id="ä¸€ã€LeNet"><a href="#ä¸€ã€LeNet" class="headerlink" title="ä¸€ã€LeNet"></a>ä¸€ã€LeNet</h1><p>LeNet æ˜¯æœ€æ—©çš„å·ç§¯ç¥ç»ç½‘ç»œä¹‹ä¸€ï¼Œå®ƒæ˜¯å·ç§¯ç¥ç»ç½‘ç»œçš„ HelloWorldã€‚1998å¹´ï¼ŒYann LeCun ç¬¬ä¸€æ¬¡å°† LeNet å·ç§¯ç¥ç»ç½‘ç»œåº”ç”¨åˆ°å›¾åƒåˆ†ç±»ä¸Šï¼Œåœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ä¸­å–å¾—äº†å·¨å¤§æˆåŠŸã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/12e79a7c294e49dea0a0778ffe47161b851054d9e1ea4a5e859ffdb7c55e8366" width = "600"></center><center><br>å›¾1ï¼šæ‰‹å†™æ•°å­—è¯†åˆ«</br></center><p><br></br></p><p>LeNet é€šè¿‡è¿ç»­ä½¿ç”¨å·ç§¯å’Œæ± åŒ–å±‚çš„ç»„åˆæå–å›¾åƒç‰¹å¾ï¼Œå…¶æ¶æ„å¦‚ <strong>å›¾2</strong> æ‰€ç¤ºï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯ç”¨äºMNISTæ‰‹å†™ä½“æ•°å­—è¯†åˆ«ä»»åŠ¡ä¸­çš„ LeNet-5 æ¨¡å‹ï¼š<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/82e4124e2e6a4231bcde17e086bc86ba732d3e81dcd7415f86fb4ef050aa7772" width = "800"></center><center><br>å›¾2ï¼šLeNetæ¨¡å‹ç½‘ç»œç»“æ„ç¤ºæ„å›¾</br></center><p><br></br></p><ul><li><p>ç¬¬ä¸€æ¨¡å—ï¼šåŒ…å« 5Ã—5 çš„ 6 é€šé“å·ç§¯å’Œ 2Ã—2 çš„æ± åŒ–ã€‚å·ç§¯æå–å›¾åƒä¸­åŒ…å«çš„ç‰¹å¾æ¨¡å¼ï¼ˆæ¿€æ´»å‡½æ•°ä½¿ç”¨ Sigmoidï¼‰ï¼Œå›¾åƒå°ºå¯¸ä» 28 å‡å°åˆ° 24ã€‚ç»è¿‡æ± åŒ–å±‚å¯ä»¥é™ä½è¾“å‡ºç‰¹å¾å›¾å¯¹ç©ºé—´ä½ç½®çš„æ•æ„Ÿæ€§ï¼Œå›¾åƒå°ºå¯¸å‡åˆ° 12ã€é«˜å®½å‡åŠã€‘ã€‚</p></li><li><p>ç¬¬äºŒæ¨¡å—ï¼šå’Œç¬¬ä¸€æ¨¡å—å°ºå¯¸ç›¸åŒï¼Œé€šé“æ•°ç”± 6 å¢åŠ ä¸º 16ã€‚å·ç§¯æ“ä½œä½¿å›¾åƒå°ºå¯¸å‡å°åˆ° 8ï¼Œç»è¿‡æ± åŒ–åå˜æˆ 4ã€‚</p></li><li><p>ç¬¬ä¸‰æ¨¡å—ï¼šåŒ…å« 4Ã—4 çš„ 120 é€šé“å·ç§¯ã€‚å·ç§¯ä¹‹åçš„å›¾åƒå°ºå¯¸å‡å°åˆ° 1ï¼Œä½†æ˜¯é€šé“æ•°å¢åŠ ä¸º 120ã€‚å°†ç»è¿‡ç¬¬ 3 æ¬¡å·ç§¯æå–åˆ°çš„ç‰¹å¾å›¾è¾“å…¥åˆ°å…¨è¿æ¥å±‚ã€‚ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºç¥ç»å…ƒçš„ä¸ªæ•°æ˜¯ 64ï¼Œç¬¬äºŒä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºç¥ç»å…ƒä¸ªæ•°æ˜¯åˆ†ç±»æ ‡ç­¾çš„ç±»åˆ«æ•°ï¼Œå¯¹äºæ‰‹å†™æ•°å­—è¯†åˆ«çš„ç±»åˆ«æ•°æ˜¯ 10ã€‚ç„¶åä½¿ç”¨ Softmax å‡½æ•°å³å¯è®¡ç®—å‡ºæ¯ä¸ªç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ã€‚</p></li></ul><hr><p><strong>ã€æç¤ºã€‘ï¼š</strong></p><p>å·ç§¯å±‚çš„è¾“å‡ºç‰¹å¾å›¾å¦‚ä½•å½“ä½œå…¨è¿æ¥å±‚çš„è¾“å…¥ä½¿ç”¨å‘¢ï¼Ÿ</p><p>å·ç§¯å±‚çš„è¾“å‡ºæ•°æ®æ ¼å¼æ˜¯$[N, C, H, W]$ï¼Œåœ¨è¾“å…¥å…¨è¿æ¥å±‚çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®æ‹‰å¹³ï¼Œ</p><p>ä¹Ÿå°±æ˜¯å¯¹æ¯ä¸ªæ ·æœ¬ï¼Œè‡ªåŠ¨å°†å…¶è½¬åŒ–ä¸ºé•¿åº¦ä¸º $K$ çš„å‘é‡ï¼Œ</p><p>å…¶ä¸­ $K &#x3D; C \times H \times W$ï¼Œä¸€ä¸ª mini-batch çš„æ•°æ®ç»´åº¦å˜æˆäº† $N\times K$ çš„äºŒç»´å‘é‡ã€‚</p><hr><h2 id="1-1-LeNetåœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä¸Šçš„åº”ç”¨"><a href="#1-1-LeNetåœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä¸Šçš„åº”ç”¨" class="headerlink" title="1.1 LeNetåœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä¸Šçš„åº”ç”¨"></a><strong>1.1 LeNetåœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä¸Šçš„åº”ç”¨</strong></h2><p>MNIST æ‰‹å†™æ•°å­—æ•°æ®åº“æ‹¥æœ‰ 60,000 ä¸ªæ ·æœ¬çš„è®­ç»ƒé›†å’Œ 10,000 ä¸ªæ ·æœ¬çš„æµ‹è¯•é›†ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/a35d80f579d44552b22c19f7d36128d944db99f95a28414099e695d96ef3fd63" width = "500"></center><center><br>å›¾3ï¼šæ‰‹å†™æ•°å­—è¯†åˆ«æ•°æ®é›†</br></center><p><br></br></p><p>LeNetç½‘ç»œçš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥éœ€è¦çš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D, MaxPool2D, Linear</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç»„ç½‘</span></span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ LeNet ç½‘ç»œç»“æ„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LeNet</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">1</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(LeNet, self).__init__()</span><br><span class="line">        <span class="comment"># ä¸‹é¢å®šä¹‰å±‚ï¼Œå¦‚å›¾2æ‰€ç¤ºï¼Œä¸€å…±ä¸ƒä¸ªå±‚</span></span><br><span class="line">        self.conv1 = Conv2D(in_channels=<span class="number">1</span>, out_channels=<span class="number">6</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.max_pool1 = MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line">        self.conv2 = Conv2D(in_channels=<span class="number">6</span>, out_channels=<span class="number">16</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.max_pool2 = MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line">        self.conv3 = Conv2D(in_channels=<span class="number">16</span>, out_channels=<span class="number">120</span>, kernel_size=<span class="number">4</span>)</span><br><span class="line">        <span class="comment"># å°ºå¯¸çš„é€»è¾‘ï¼šè¾“å…¥å±‚å°†æ•°æ®æ‹‰å¹³[B,C,H,W] -&gt; [B,C*H*W] [1,120,1,1]</span></span><br><span class="line">        <span class="comment"># è¾“å…¥sizeæ˜¯[28,28]ï¼Œç»è¿‡ä¸‰æ¬¡å·ç§¯å’Œä¸¤æ¬¡æ± åŒ–ä¹‹åï¼ŒC*H*Wç­‰äº120</span></span><br><span class="line">        self.fc1 = Linear(in_features=<span class="number">120</span>, out_features=<span class="number">64</span>)</span><br><span class="line">        self.fc2 = Linear(in_features=<span class="number">64</span>, out_features=num_classes)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç½‘ç»œçš„å‰å‘è®¡ç®—è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = self.max_pool1(x)</span><br><span class="line">        x = self.conv2(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = self.max_pool2(x)</span><br><span class="line">        x = self.conv3(x)</span><br><span class="line">        <span class="comment"># å°ºå¯¸çš„é€»è¾‘ï¼šè¾“å…¥å±‚å°†æ•°æ®æ‹‰å¹³[B,C,H,W] -&gt; [B,C*H*W]</span></span><br><span class="line">        x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>]) <span class="comment"># -1ï¼šæˆ‘ä¸çŸ¥é“ï¼Œæœºå™¨ç®—ï¼Œsizeä¸€è‡´</span></span><br><span class="line">        x = self.fc1(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.randn(shape=(<span class="number">1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>))</span><br><span class="line">x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>]) <span class="comment"># paddle.reshape(x, shape)</span></span><br><span class="line">x.shape</span><br></pre></td></tr></table></figure><p>é£æ¡¨ä¼šæ ¹æ®å®é™…å›¾åƒæ•°æ®çš„å°ºå¯¸å’Œå·ç§¯æ ¸å‚æ•°è‡ªåŠ¨æ¨æ–­ä¸­é—´å±‚æ•°æ®çš„ W å’Œ H ç­‰ï¼Œåªéœ€è¦ç”¨æˆ·è¡¨è¾¾é€šé“æ•°å³å¯ã€‚ä¸‹é¢çš„ç¨‹åºä½¿ç”¨éšæœºæ•°ä½œä¸ºè¾“å…¥ï¼ŒæŸ¥çœ‹ç»è¿‡ LeNet-5 çš„æ¯ä¸€å±‚ä½œç”¨ä¹‹åï¼Œè¾“å‡ºæ•°æ®çš„å½¢çŠ¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¾“å…¥æ•°æ®å½¢çŠ¶æ˜¯ [N, 1, H, W]</span></span><br><span class="line"><span class="comment"># è¿™é‡Œç”¨np.randomåˆ›å»ºä¸€ä¸ªéšæœºæ•°ç»„ä½œä¸ºè¾“å…¥æ•°æ®</span></span><br><span class="line">x = paddle.randn(shape=(<span class="number">1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>))</span><br><span class="line"><span class="comment"># print(&#x27;è¾“å…¥çš„Xæ˜¯ï¼š&#x27;, x)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºLeNetç±»çš„å®ä¾‹ï¼ŒæŒ‡å®šæ¨¡å‹åç§°å’Œåˆ†ç±»çš„ç±»åˆ«æ•°ç›®</span></span><br><span class="line">model = LeNet(num_classes=<span class="number">10</span>)</span><br><span class="line"><span class="comment"># é€šè¿‡è°ƒç”¨LeNetä»åŸºç±»ç»§æ‰¿çš„sublayers()å‡½æ•°ï¼ŒæŸ¥çœ‹LeNetä¸­æ‰€åŒ…å«çš„å­å±‚</span></span><br><span class="line">model.sublayers()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.to_tensor(x)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> model.sublayers():</span><br><span class="line">    <span class="comment"># itemæ˜¯LeNetç±»ä¸­çš„ä¸€ä¸ªå­å±‚</span></span><br><span class="line">    <span class="comment"># æŸ¥çœ‹ç»è¿‡å­å±‚ä¹‹åçš„è¾“å‡ºæ•°æ®å½¢çŠ¶</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        x = item(x)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>])</span><br><span class="line">        x = item(x)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(item.parameters())==<span class="number">2</span>:</span><br><span class="line">        <span class="comment"># æŸ¥çœ‹å·ç§¯å’Œå…¨è¿æ¥å±‚çš„æ•°æ®å’Œå‚æ•°çš„å½¢çŠ¶ï¼Œ</span></span><br><span class="line">        <span class="comment"># å…¶ä¸­item.parameters()[0]æ˜¯æƒé‡å‚æ•°wï¼Œitem.parameters()[1]æ˜¯åç½®å‚æ•°b</span></span><br><span class="line">        <span class="built_in">print</span>(item.full_name(), x.shape, item.parameters()[<span class="number">0</span>].shape, item.parameters()[<span class="number">1</span>].shape)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># æ± åŒ–å±‚æ²¡æœ‰å‚æ•°</span></span><br><span class="line">        <span class="built_in">print</span>(item.full_name(), x.shape)</span><br></pre></td></tr></table></figure><p>å·ç§¯ Conv2D çš„ padding å‚æ•°é»˜è®¤ä¸º 0ï¼Œstride å‚æ•°é»˜è®¤ä¸º 1ã€‚</p><ul><li>å½“è¾“å…¥å½¢çŠ¶ä¸º [Bx1x28x28] æ—¶ï¼ŒB æ˜¯ batch_sizeï¼Œç»è¿‡ç¬¬ä¸€å±‚å·ç§¯ï¼ˆkernel_size&#x3D;5, out_channels&#x3D;6ï¼‰å’Œ maxpool ä¹‹åï¼Œå¾—åˆ°å½¢çŠ¶ä¸º [Bx6x12x12] çš„ç‰¹å¾å›¾ï¼›</li><li>ç»è¿‡ç¬¬äºŒå±‚å·ç§¯(kernel_size&#x3D;5, out_channels&#x3D;16)å’Œ maxpool ä¹‹åï¼Œå¾—åˆ°å½¢çŠ¶ä¸º [Bx16x4x4] çš„ç‰¹å¾å›¾ï¼›</li><li>ç»è¿‡ç¬¬ä¸‰å±‚å·ç§¯(out_channels&#x3D;120, kernel_size&#x3D;4)ä¹‹åï¼Œå¾—åˆ°å½¢çŠ¶ä¸º [Bx120x1x1] çš„ç‰¹å¾å›¾ï¼›</li><li>åœ¨ FC å±‚è®¡ç®—ä¹‹å‰ï¼Œå°†è¾“å…¥ç‰¹å¾ä»å·ç§¯å¾—åˆ°çš„å››ç»´ç‰¹å¾ reshape åˆ°æ ¼å¼ä¸º [B, 120x1x1] çš„ç‰¹å¾ï¼Œè¿™ä¹Ÿæ˜¯ LeNet ä¸­ç¬¬ä¸€å±‚å…¨è¿æ¥å±‚è¾“å…¥ shape ä¸º 120 çš„åŸå› ã€‚</li></ul><h3 id="ã€è®­ç»ƒã€‘"><a href="#ã€è®­ç»ƒã€‘" class="headerlink" title="ã€è®­ç»ƒã€‘"></a><strong>ã€è®­ç»ƒã€‘</strong></h3><p>ä¸‹é¢æˆ‘ä»¬å°†è®­ç»ƒè¿‡ç¨‹ä¸éªŒè¯è¿‡ç¨‹æ‰“åŒ…å¥½ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†æ¨¡å‹çš„å‚æ•°ä¿å­˜ä¸‹æ¥ï¼Œæ–¹ä¾¿åç»­çš„è°ƒç”¨ã€‚</p><p>å…·ä½“çš„æµç¨‹è®¾è®¡è¯·å‚è€ƒä¹‹å‰çš„é¡¹ç›®ï¼š<a href="https://aistudio.baidu.com/aistudio/projectdetail/4957701"><strong>ä½¿ç”¨æç®€æ–¹æ³•å®ç°æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡</strong></a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># LeNet è¯†åˆ«æ‰‹å†™æ•°å­—</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> ToTensor</span><br><span class="line"><span class="keyword">from</span> paddle.vision.datasets <span class="keyword">import</span> MNIST</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model, opt, train_loader, valid_loader</span>):</span><br><span class="line">    <span class="comment"># å¼€å¯0å·GPUè®­ç»ƒ</span></span><br><span class="line">    use_gpu = <span class="literal">True</span></span><br><span class="line">    paddle.device.set_device(<span class="string">&#x27;gpu:0&#x27;</span>) <span class="keyword">if</span> use_gpu <span class="keyword">else</span> paddle.device.set_device(<span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;start training ... &#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    model.train()</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            img = data[<span class="number">0</span>]</span><br><span class="line">            label = data[<span class="number">1</span>] </span><br><span class="line">            <span class="comment"># è®¡ç®—æ¨¡å‹è¾“å‡º</span></span><br><span class="line">            logits = model(img)</span><br><span class="line">            <span class="comment"># è®¡ç®—æŸå¤±å‡½æ•°</span></span><br><span class="line">            loss_func = paddle.nn.CrossEntropyLoss(reduction=<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">            loss = loss_func(logits, label)</span><br><span class="line">            avg_loss = paddle.mean(loss)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> batch_id % <span class="number">2000</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, batch_id: &#123;&#125;, loss is: &#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(epoch, batch_id, <span class="built_in">float</span>(avg_loss.numpy())))</span><br><span class="line">            avg_loss.backward()</span><br><span class="line">            opt.step()</span><br><span class="line">            opt.clear_grad()</span><br><span class="line"></span><br><span class="line">        model.<span class="built_in">eval</span>()</span><br><span class="line">        accuracies = []</span><br><span class="line">        losses = []</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(valid_loader()):</span><br><span class="line">            img = data[<span class="number">0</span>]</span><br><span class="line">            label = data[<span class="number">1</span>] </span><br><span class="line">            <span class="comment"># è®¡ç®—æ¨¡å‹è¾“å‡º</span></span><br><span class="line">            logits = model(img)</span><br><span class="line">            pred = F.softmax(logits)</span><br><span class="line">            <span class="comment"># è®¡ç®—æŸå¤±å‡½æ•°</span></span><br><span class="line">            loss_func = paddle.nn.CrossEntropyLoss(reduction=<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">            loss = loss_func(logits, label)</span><br><span class="line">            acc = paddle.metric.accuracy(pred, label)</span><br><span class="line">            accuracies.append(acc.numpy())</span><br><span class="line">            losses.append(loss.numpy())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[validation] accuracy/loss: &#123;:.4f&#125;/&#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(accuracies), np.mean(losses)))</span><br><span class="line">        model.train()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¿å­˜æ¨¡å‹å‚æ•°</span></span><br><span class="line">    paddle.save(model.state_dict(), <span class="string">&#x27;mnist.pdparams&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = LeNet(num_classes=<span class="number">10</span>)</span><br><span class="line"><span class="comment"># è®¾ç½®è¿­ä»£è½®æ•°</span></span><br><span class="line">EPOCH_NUM = <span class="number">5</span></span><br><span class="line"><span class="comment"># è®¾ç½®ä¼˜åŒ–å™¨ä¸º Momentumï¼Œå­¦ä¹ ç‡ä¸º 0.001</span></span><br><span class="line">opt = paddle.optimizer.Momentum(</span><br><span class="line">                                    learning_rate=<span class="number">0.001</span>, </span><br><span class="line">                                    momentum=<span class="number">0.9</span>, </span><br><span class="line">                                    parameters=model.parameters())</span><br><span class="line"><span class="comment"># å®šä¹‰æ•°æ®è¯»å–å™¨</span></span><br><span class="line">train_loader = paddle.io.DataLoader(</span><br><span class="line">                                    MNIST(mode=<span class="string">&#x27;train&#x27;</span>, transform=ToTensor()), </span><br><span class="line">                                    batch_size=<span class="number">10</span>, </span><br><span class="line">                                    shuffle=<span class="literal">True</span>)</span><br><span class="line">valid_loader = paddle.io.DataLoader(</span><br><span class="line">                                    MNIST(mode=<span class="string">&#x27;test&#x27;</span>, </span><br><span class="line">                                    transform=ToTensor()), </span><br><span class="line">                                    batch_size=<span class="number">10</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">train(model, opt, train_loader, valid_loader)</span><br></pre></td></tr></table></figure><h3 id="ã€é¢„æµ‹ã€‘"><a href="#ã€é¢„æµ‹ã€‘" class="headerlink" title="ã€é¢„æµ‹ã€‘"></a><strong>ã€é¢„æµ‹ã€‘</strong></h3><p>ä¸‹é¢æˆ‘ä»¬è¯»å…¥ä¸€å¼ æ‰‹å†™æ•°å­—ï¼Œæµ‹è¯•æ¨¡å‹çš„å®é™…é¢„æµ‹æ•ˆæœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥å›¾åƒè¯»å–ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–ä¸€å¼ æœ¬åœ°çš„æ ·ä¾‹å›¾ç‰‡ï¼Œè½¬å˜æˆæ¨¡å‹è¾“å…¥çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_image</span>(<span class="params">img_path</span>):</span><br><span class="line">    <span class="comment"># ä»img_pathä¸­è¯»å–å›¾åƒï¼Œå¹¶è½¬ä¸ºç°åº¦å›¾ï¼Œè¿›è¡Œä¸‹é‡‡æ ·</span></span><br><span class="line">    im = Image.<span class="built_in">open</span>(img_path).convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">    im = im.resize((<span class="number">28</span>, <span class="number">28</span>), Image.ANTIALIAS)</span><br><span class="line">    im = np.array(im).astype(np.float32)</span><br><span class="line">    im = <span class="number">1</span> - im / <span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> im</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">&#x27;work/1.png&#x27;</span>).convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">im = im.resize((<span class="number">28</span>, <span class="number">28</span>), Image.ANTIALIAS)</span><br><span class="line">im</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/49.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰é¢„æµ‹è¿‡ç¨‹</span></span><br><span class="line">model = LeNet(num_classes=<span class="number">10</span>)</span><br><span class="line">params_file_path = <span class="string">&#x27;mnist.pdparams&#x27;</span></span><br><span class="line">img_path = <span class="string">&#x27;work/1.png&#x27;</span></span><br><span class="line"><span class="comment"># åŠ è½½æ¨¡å‹å‚æ•°</span></span><br><span class="line">param_dict = paddle.load(params_file_path)</span><br><span class="line">model.load_dict(param_dict)</span><br><span class="line"><span class="comment"># çŒå…¥æ•°æ®</span></span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">tensor_img = load_image(img_path).reshape(<span class="number">1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>)</span><br><span class="line">result = model(paddle.to_tensor(tensor_img)).argmax(axis=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;result&#x27;</span>, result)</span><br></pre></td></tr></table></figure><pre><code>result Tensor(shape=[1], dtype=int64, place=Place(gpu:0), stop_gradient=False,       [1])</code></pre><p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼ŒLeNet åœ¨æ‰‹å†™æ•°å­—è¯†åˆ« MNIST éªŒè¯æ•°æ®é›†ä¸Šçš„å‡†ç¡®ç‡åœ¨ 95% ä»¥ä¸Šã€‚é‚£ä¹ˆå¯¹äºå…¶å®ƒæ•°æ®é›†æ•ˆæœå¦‚ä½•å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡çœ¼ç–¾è¯†åˆ«æ•°æ®é›† iChallenge-PM éªŒè¯ä¸€ä¸‹ã€‚</p><h2 id="1-2-LeNetåœ¨çœ¼ç–¾è¯†åˆ«æ•°æ®é›†iChallenge-PMä¸Šçš„åº”ç”¨"><a href="#1-2-LeNetåœ¨çœ¼ç–¾è¯†åˆ«æ•°æ®é›†iChallenge-PMä¸Šçš„åº”ç”¨" class="headerlink" title="1.2 LeNetåœ¨çœ¼ç–¾è¯†åˆ«æ•°æ®é›†iChallenge-PMä¸Šçš„åº”ç”¨"></a><strong>1.2 LeNetåœ¨çœ¼ç–¾è¯†åˆ«æ•°æ®é›†iChallenge-PMä¸Šçš„åº”ç”¨</strong></h2><p><a href="https://ai.baidu.com/broad/introduction">iChallenge-PM</a> æ˜¯ç™¾åº¦å¤§è„‘å’Œä¸­å±±å¤§å­¦ä¸­å±±çœ¼ç§‘ä¸­å¿ƒè”åˆä¸¾åŠçš„ iChallenge æ¯”èµ›ä¸­ï¼Œæä¾›çš„å…³äºç—…ç†æ€§è¿‘è§†ï¼ˆPathologic Myopiaï¼ŒPMï¼‰çš„åŒ»ç–—ç±»æ•°æ®é›†ï¼ŒåŒ…å« 1200 ä¸ªå—è¯•è€…çš„çœ¼åº•è§†ç½‘è†œå›¾ç‰‡ï¼Œè®­ç»ƒã€éªŒè¯å’Œæµ‹è¯•æ•°æ®é›†å„ 400 å¼ ã€‚ä¸‹é¢æˆ‘ä»¬è¯¦ç»†ä»‹ç» LeNet åœ¨ iChallenge-PM ä¸Šçš„è®­ç»ƒè¿‡ç¨‹ã€‚</p><hr><p><strong>è¯´æ˜ï¼š</strong></p><p>å¦‚ä»Šè¿‘è§†å·²ç»æˆä¸ºå›°æ‰°äººä»¬å¥åº·çš„ä¸€é¡¹å…¨çƒæ€§è´Ÿæ‹…ï¼Œåœ¨è¿‘è§†äººç¾¤ä¸­ï¼Œæœ‰è¶…è¿‡ 35% çš„äººæ‚£æœ‰é‡åº¦è¿‘è§†ã€‚è¿‘è§†ä¼šæ‹‰é•¿çœ¼ç›çš„å…‰è½´ï¼Œä¹Ÿå¯èƒ½å¼•èµ·è§†ç½‘è†œæˆ–è€…ç»œç½‘è†œçš„ç—…å˜ã€‚éšç€è¿‘è§†åº¦æ•°çš„ä¸æ–­åŠ æ·±ï¼Œé«˜åº¦è¿‘è§†æœ‰å¯èƒ½å¼•å‘ç—…ç†æ€§ç—…å˜ï¼Œè¿™å°†ä¼šå¯¼è‡´ä»¥ä¸‹å‡ ç§ç—‡çŠ¶ï¼šè§†ç½‘è†œæˆ–è€…ç»œç½‘è†œå‘ç”Ÿé€€åŒ–ã€è§†ç›˜åŒºåŸŸèç¼©ã€æ¼†è£‚æ ·çº¹æŸå®³ã€Fuchs æ–‘ç­‰ã€‚å› æ­¤ï¼ŒåŠæ—©å‘ç°è¿‘è§†æ‚£è€…çœ¼ç›çš„ç—…å˜å¹¶é‡‡å–æ²»ç–—ï¼Œæ˜¾å¾—éå¸¸é‡è¦ã€‚</p><p>æ•°æ®å¯ä»¥ä»AI Studio<a href="https://aistudio.baidu.com/aistudio/datasetdetail/19065">ä¸‹è½½</a></p><hr><h3 id="1ï¼‰æ•°æ®é›†å‡†å¤‡"><a href="#1ï¼‰æ•°æ®é›†å‡†å¤‡" class="headerlink" title="1ï¼‰æ•°æ®é›†å‡†å¤‡"></a><strong>1ï¼‰æ•°æ®é›†å‡†å¤‡</strong></h3><p><code>/home/aistudio/data/data23828</code> ç›®å½•åŒ…æ‹¬å¦‚ä¸‹ä¸‰ä¸ªæ–‡ä»¶ï¼Œè§£å‹ç¼©åå­˜æ”¾åœ¨ <code>/home/aistudio/work/palm</code> ç›®å½•ä¸‹ã€‚</p><ul><li><strong>training.zip</strong>ï¼šåŒ…å«è®­ç»ƒä¸­çš„å›¾ç‰‡å’Œæ ‡ç­¾</li><li><strong>validation.zip</strong>ï¼šåŒ…å«éªŒè¯é›†çš„å›¾ç‰‡</li><li><strong>valid_gt.zip</strong>ï¼šåŒ…å«éªŒè¯é›†çš„æ ‡ç­¾</li></ul><p>!unzipç›¸å…³æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹é“¾æ¥ï¼š<a href="https://www.runoob.com/linux/linux-comm-unzip.html">!unzipæŒ‡ä»¤</a>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœå·²ç»è§£å‹è¿‡ï¼Œä¸éœ€è¦è¿è¡Œæ­¤æ®µä»£ç ï¼ˆæ³¨é‡Šï¼‰ï¼Œå¦åˆ™ç”±äºæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œè§£å‹æ—¶ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Extracting files... ...&#x27;</span>)</span><br><span class="line">!unzip -q -d /home/aistudio/work/palm /home/aistudio/data/data23828/training.<span class="built_in">zip</span></span><br><span class="line">!unzip -q -d /home/aistudio/work/palm /home/aistudio/data/data23828/validation.<span class="built_in">zip</span></span><br><span class="line">!unzip -q -d /home/aistudio/work/palm /home/aistudio/data/data23828/valid_gt.<span class="built_in">zip</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;File extraction succeeded.&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%cd /home/aistudio/work/palm/PALM-Training400/</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Extracting the training datasets... ...&#x27;</span>)</span><br><span class="line">!unzip -q PALM-Training400.<span class="built_in">zip</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;File extraction succeeded.&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><blockquote><p><strong>ã€æ³¨æ„ã€‘</strong>ï¼š</p><p><code>valid_gt.zip</code>ï¼ˆéªŒè¯é›†çš„æ ‡ç­¾ï¼‰æ–‡ä»¶è§£å‹ç¼©ä¹‹åï¼Œéœ€è¦å°†<code>/home/aistudio/work/palm/PALM-Validation-GT/</code>ç›®å½•ä¸‹çš„<code>PM_Label_and_Fovea_Location.xlsx</code>æ ‡ç­¾æ–‡ä»¶è½¬å­˜æˆ<code>.csv</code>æ ¼å¼ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># è½¬æˆæ–‡ä»¶labels.csv</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">xlsx_to_csv_pd</span>():</span><br><span class="line">    <span class="comment"># æŒ‡å®šç¬¬0åˆ—ä¸ºç´¢å¼•åˆ—</span></span><br><span class="line">    data_xls = pd.read_excel(<span class="string">&#x27;/home/aistudio/work/palm/PALM-Validation-GT/PM_Label_and_Fovea_Location.xlsx&#x27;</span>, index_col=<span class="number">0</span>)</span><br><span class="line">    data_xls.to_csv(<span class="string">&#x27;/home/aistudio/labels.csv&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    xlsx_to_csv_pd()</span><br></pre></td></tr></table></figure><h3 id="2ï¼‰æŸ¥çœ‹æ•°æ®é›†å›¾ç‰‡"><a href="#2ï¼‰æŸ¥çœ‹æ•°æ®é›†å›¾ç‰‡" class="headerlink" title="2ï¼‰æŸ¥çœ‹æ•°æ®é›†å›¾ç‰‡"></a><strong>2ï¼‰æŸ¥çœ‹æ•°æ®é›†å›¾ç‰‡</strong></h3><p>iChallenge-PM ä¸­æ—¢æœ‰ç—…ç†æ€§è¿‘è§†æ‚£è€…çš„çœ¼åº•å›¾ç‰‡ï¼Œä¹Ÿæœ‰éç—…ç†æ€§è¿‘è§†æ‚£è€…çš„å›¾ç‰‡ï¼Œå‘½åè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li><p>ç—…ç†æ€§è¿‘è§†ï¼ˆPMï¼‰ï¼šæ–‡ä»¶åä»¥På¼€å¤´</p></li><li><p>éç—…ç†æ€§è¿‘è§†ï¼ˆnon-PMï¼‰ï¼š</p><ul><li><p>é«˜åº¦è¿‘è§†ï¼ˆhigh myopiaï¼‰ï¼šæ–‡ä»¶åä»¥Hå¼€å¤´</p></li><li><p>æ­£å¸¸çœ¼ç›ï¼ˆnormalï¼‰ï¼šæ–‡ä»¶åä»¥Nå¼€å¤´</p></li></ul></li></ul><p>æˆ‘ä»¬å°†ç—…ç†æ€§æ‚£è€…çš„å›¾ç‰‡ä½œä¸ºæ­£æ ·æœ¬ï¼Œæ ‡ç­¾ä¸º 1ï¼› éç—…ç†æ€§æ‚£è€…çš„å›¾ç‰‡ä½œä¸ºè´Ÿæ ·æœ¬ï¼Œæ ‡ç­¾ä¸º 0ã€‚ä¸‹é¢ä»æ•°æ®é›†ä¸­é€‰å–ä¸¤å¼ å›¾ç‰‡ï¼Œå¹¶å°†å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ã€‚ä¹‹åé€šè¿‡ LeNet æå–ç‰¹å¾ï¼Œæ„å»ºåˆ†ç±»å™¨ï¼Œå¯¹æ­£è´Ÿæ ·æœ¬è¿›è¡Œåˆ†ç±»ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">DATADIR = <span class="string">&#x27;/home/aistudio/work/palm/PALM-Training400/PALM-Training400&#x27;</span></span><br><span class="line"><span class="comment"># æ–‡ä»¶åä»¥Nå¼€å¤´çš„æ˜¯æ­£å¸¸çœ¼åº•å›¾ç‰‡ï¼Œä»¥På¼€å¤´çš„æ˜¯ç—…å˜çœ¼åº•å›¾ç‰‡</span></span><br><span class="line">file1 = <span class="string">&#x27;N0012.jpg&#x27;</span></span><br><span class="line">file2 = <span class="string">&#x27;P0095.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å›¾ç‰‡</span></span><br><span class="line">img1 = Image.<span class="built_in">open</span>(os.path.join(DATADIR, file1))</span><br><span class="line">img1 = np.array(img1)</span><br><span class="line">img2 = Image.<span class="built_in">open</span>(os.path.join(DATADIR, file2))</span><br><span class="line">img2 = np.array(img2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºè¯»å–çš„å›¾ç‰‡ï¼Œç»˜åˆ¶å­å›¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line">f = plt.subplot(<span class="number">121</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;Normal&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.imshow(img1)</span><br><span class="line">f = plt.subplot(<span class="number">122</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;PM&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.imshow(img2)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/50.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å›¾ç‰‡å½¢çŠ¶</span></span><br><span class="line">img1.shape, img2.shape</span><br></pre></td></tr></table></figure><pre><code>((2056, 2124, 3), (2056, 2124, 3))</code></pre><h3 id="3ï¼‰å®šä¹‰æ•°æ®è¯»å–å™¨"><a href="#3ï¼‰å®šä¹‰æ•°æ®è¯»å–å™¨" class="headerlink" title="3ï¼‰å®šä¹‰æ•°æ®è¯»å–å™¨"></a><strong>3ï¼‰å®šä¹‰æ•°æ®è¯»å–å™¨</strong></h3><p>ä½¿ç”¨ OpenCV ä»ç£ç›˜è¯»å…¥å›¾ç‰‡ï¼Œå°†æ¯å¼ å›¾ç¼©æ”¾åˆ°$224\times224$å¤§å°ï¼Œå¹¶ä¸”å°†åƒç´ å€¼è°ƒæ•´åˆ°$[-1, 1]$ä¹‹é—´ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹è¯»å…¥çš„å›¾åƒæ•°æ®è¿›è¡Œé¢„å¤„ç†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">transform_img</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="comment"># å°†å›¾ç‰‡å°ºå¯¸ç¼©æ”¾é“ 224x224</span></span><br><span class="line">    img = cv2.resize(img, (<span class="number">224</span>, <span class="number">224</span>))</span><br><span class="line">    <span class="comment"># è¯»å…¥çš„å›¾åƒæ•°æ®æ ¼å¼æ˜¯[H, W, C]ï¼Œä½¿ç”¨è½¬ç½®æ“ä½œå°†å…¶å˜æˆ[C, H, W]</span></span><br><span class="line">    img = np.transpose(img, (<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>))</span><br><span class="line">    img = img.astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    <span class="comment"># å°†æ•°æ®èŒƒå›´è°ƒæ•´åˆ°[-1.0, 1.0]ä¹‹é—´</span></span><br><span class="line">    img = img / <span class="number">255.</span></span><br><span class="line">    img = img * <span class="number">2.0</span> - <span class="number">1.0</span></span><br><span class="line">    <span class="keyword">return</span> img</span><br></pre></td></tr></table></figure><br><p><strong>â‘ å®šä¹‰è®­ç»ƒé›†æ•°æ®è¯»å–å™¨</strong></p><p>è®­ç»ƒé›†è¯»å–æ—¶é€šè¿‡æ–‡ä»¶åæ¥ç¡®å®šæ ·æœ¬æ ‡ç­¾ï¼Œåœ¨è¯»å–çš„è¿‡ç¨‹ä¸­éšæœºæ‰“ä¹±æ•°æ®çš„é¡ºåºï¼Œæœ€ç»ˆè¿”å›ä»¥æ•°æ®è¿­ä»£å™¨çš„å½¢å¼è¿”å›ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27; -------å®šä¹‰è®­ç»ƒé›†æ•°æ®è¯»å–å™¨--------&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">data_loader</span>(<span class="params">datadir, batch_size=<span class="number">10</span>, mode = <span class="string">&#x27;train&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># å°†datadirç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—å‡ºæ¥ï¼Œæ¯æ¡æ–‡ä»¶éƒ½è¦è¯»å…¥</span></span><br><span class="line">    filenames = os.listdir(datadir)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reader</span>():</span><br><span class="line">        <span class="keyword">if</span> mode == <span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">            <span class="comment"># è®­ç»ƒæ—¶éšæœºæ‰“ä¹±æ•°æ®é¡ºåº</span></span><br><span class="line">            random.shuffle(filenames)</span><br><span class="line">        batch_imgs = []</span><br><span class="line">        batch_labels = []</span><br><span class="line">        <span class="keyword">for</span> name <span class="keyword">in</span> filenames:</span><br><span class="line">            filepath = os.path.join(datadir, name)</span><br><span class="line">            img = cv2.imread(filepath)</span><br><span class="line">            img = transform_img(img)</span><br><span class="line">            <span class="keyword">if</span> name[<span class="number">0</span>] == <span class="string">&#x27;H&#x27;</span> <span class="keyword">or</span> name[<span class="number">0</span>] == <span class="string">&#x27;N&#x27;</span>:</span><br><span class="line">                <span class="comment"># Hå¼€å¤´çš„æ–‡ä»¶åè¡¨ç¤ºé«˜åº¦è¿‘ä¼¼ï¼ŒNå¼€å¤´çš„æ–‡ä»¶åè¡¨ç¤ºæ­£å¸¸è§†åŠ›</span></span><br><span class="line">                <span class="comment"># é«˜åº¦è¿‘è§†å’Œæ­£å¸¸è§†åŠ›çš„æ ·æœ¬ï¼Œéƒ½ä¸æ˜¯ç—…ç†æ€§çš„ï¼Œå±äºè´Ÿæ ·æœ¬ï¼Œæ ‡ç­¾ä¸º0</span></span><br><span class="line">                label = <span class="number">0</span></span><br><span class="line">            <span class="keyword">elif</span> name[<span class="number">0</span>] == <span class="string">&#x27;P&#x27;</span>:</span><br><span class="line">                <span class="comment"># På¼€å¤´çš„æ˜¯ç—…ç†æ€§è¿‘è§†ï¼Œå±äºæ­£æ ·æœ¬ï¼Œæ ‡ç­¾ä¸º1</span></span><br><span class="line">                label = <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span>(<span class="string">&#x27;Not excepted file name&#x27;</span>)</span><br><span class="line">            <span class="comment"># æ¯è¯»å–ä¸€ä¸ªæ ·æœ¬çš„æ•°æ®ï¼Œå°±å°†å…¶æ”¾å…¥æ•°æ®åˆ—è¡¨ä¸­</span></span><br><span class="line">            batch_imgs.append(img)</span><br><span class="line">            batch_labels.append(label)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(batch_imgs) == batch_size:</span><br><span class="line">                <span class="comment"># å½“æ•°æ®åˆ—è¡¨çš„é•¿åº¦ç­‰äºbatch_sizeçš„æ—¶å€™ï¼Œ</span></span><br><span class="line">                <span class="comment"># æŠŠè¿™äº›æ•°æ®å½“ä½œä¸€ä¸ªmini-batchï¼Œå¹¶ä½œä¸ºæ•°æ®ç”Ÿæˆå™¨ï¼ˆyieldï¼‰çš„ä¸€ä¸ªè¾“å‡º</span></span><br><span class="line">                imgs_array = np.array(batch_imgs).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">                labels_array = np.array(batch_labels).astype(<span class="string">&#x27;float32&#x27;</span>).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">yield</span> imgs_array, labels_array</span><br><span class="line">                batch_imgs = []</span><br><span class="line">                batch_labels = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(batch_imgs) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># å‰©ä½™æ ·æœ¬æ•°ç›®ä¸è¶³ä¸€ä¸ªbatch_sizeçš„æ•°æ®ï¼Œä¸€èµ·æ‰“åŒ…æˆä¸€ä¸ªmini-batch</span></span><br><span class="line">            imgs_array = np.array(batch_imgs).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            labels_array = np.array(batch_labels).astype(<span class="string">&#x27;float32&#x27;</span>).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">yield</span> imgs_array, labels_array</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> reader</span><br></pre></td></tr></table></figure><br><p><strong>â‘¡å®šä¹‰éªŒè¯é›†æ•°æ®è¯»å–å™¨</strong></p><p>è®­ç»ƒé›†è¯»å–æ—¶é€šè¿‡æ–‡ä»¶åæ¥ç¡®å®šæ ·æœ¬æ ‡ç­¾ï¼ŒéªŒè¯é›†åˆ™é€šè¿‡<code>labels.csv</code>æ¥è¯»å–æ¯ä¸ªå›¾ç‰‡å¯¹åº”çš„æ ‡ç­¾ã€‚</p><p>æŸ¥çœ‹è§£å‹åçš„éªŒè¯é›†æ ‡ç­¾æ•°æ®å¯ä»¥å‘ç°ï¼Œ<code>labels.csv</code>æ–‡ä»¶æ‰€åŒ…å«çš„å†…å®¹æ ¼å¼å¦‚ä¸‹ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ ·æœ¬ï¼š</p><ul><li>å…¶ä¸­ç¬¬ä¸€åˆ—æ˜¯å›¾ç‰‡idï¼Œç¬¬äºŒåˆ—æ˜¯æ–‡ä»¶åï¼Œç¬¬ä¸‰åˆ—æ˜¯å›¾ç‰‡æ ‡ç­¾ï¼Œ</li><li>ç¬¬å››åˆ—å’Œç¬¬äº”åˆ—æ˜¯<strong>æ­£æ ·æœ¬åŒºåŸŸï¼ˆFoveaï¼‰</strong> çš„åæ ‡ï¼Œä¸åˆ†ç±»ä»»åŠ¡æ— å…³ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27; -------å®šä¹‰éªŒè¯é›†æ•°æ®è¯»å–å™¨--------&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">valid_data_loader</span>(<span class="params">datadir, csvfile, batch_size=<span class="number">10</span>, mode=<span class="string">&#x27;valid&#x27;</span></span>):</span><br><span class="line">    filelists = <span class="built_in">open</span>(csvfile).readlines()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reader</span>():</span><br><span class="line">        batch_imgs = []</span><br><span class="line">        batch_labels = []</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> filelists[<span class="number">1</span>:]:</span><br><span class="line">            line = line.strip().split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">            name = line[<span class="number">1</span>]</span><br><span class="line">            label = <span class="built_in">int</span>(line[<span class="number">2</span>])</span><br><span class="line">            <span class="comment"># æ ¹æ®å›¾ç‰‡æ–‡ä»¶ååŠ è½½å›¾ç‰‡ï¼Œå¹¶å¯¹å›¾åƒæ•°æ®ä½œé¢„å¤„ç†</span></span><br><span class="line">            filepath = os.path.join(datadir, name)</span><br><span class="line">            img = cv2.imread(filepath)</span><br><span class="line">            img = transform_img(img)</span><br><span class="line">            <span class="comment"># æ¯è¯»å–ä¸€ä¸ªæ ·æœ¬çš„æ•°æ®ï¼Œå°±å°†å…¶æ”¾å…¥æ•°æ®åˆ—è¡¨ä¸­</span></span><br><span class="line">            batch_imgs.append(img)</span><br><span class="line">            batch_labels.append(label)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(batch_imgs) == batch_size:</span><br><span class="line">                <span class="comment"># å½“æ•°æ®åˆ—è¡¨çš„é•¿åº¦ç­‰äºbatch_sizeçš„æ—¶å€™ï¼Œ</span></span><br><span class="line">                <span class="comment"># æŠŠè¿™äº›æ•°æ®å½“ä½œä¸€ä¸ªmini-batchï¼Œå¹¶ä½œä¸ºæ•°æ®ç”Ÿæˆå™¨çš„ä¸€ä¸ªè¾“å‡º</span></span><br><span class="line">                imgs_array = np.array(batch_imgs).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">                labels_array = np.array(batch_labels).astype(<span class="string">&#x27;float32&#x27;</span>).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">yield</span> imgs_array, labels_array</span><br><span class="line">                batch_imgs = []</span><br><span class="line">                batch_labels = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(batch_imgs) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># å‰©ä½™æ ·æœ¬æ•°ç›®ä¸è¶³ä¸€ä¸ªbatch_sizeçš„æ•°æ®ï¼Œä¸€èµ·æ‰“åŒ…æˆä¸€ä¸ªmini-batch</span></span><br><span class="line">            imgs_array = np.array(batch_imgs).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            labels_array = np.array(batch_labels).astype(<span class="string">&#x27;float32&#x27;</span>).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">yield</span> imgs_array, labels_array</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> reader</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æ•°æ®å½¢çŠ¶</span></span><br><span class="line">DATADIR = <span class="string">&#x27;/home/aistudio/work/palm/PALM-Training400/PALM-Training400&#x27;</span></span><br><span class="line">train_loader = data_loader(DATADIR, </span><br><span class="line">                           batch_size=<span class="number">10</span>, </span><br><span class="line">                           mode=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">data_reader = train_loader()</span><br><span class="line">data = <span class="built_in">next</span>(data_reader)</span><br><span class="line"><span class="built_in">print</span>(data[<span class="number">0</span>].shape, data[<span class="number">1</span>].shape)</span><br><span class="line"></span><br><span class="line">eval_loader = data_loader(DATADIR, </span><br><span class="line">                           batch_size=<span class="number">10</span>, </span><br><span class="line">                           mode=<span class="string">&#x27;eval&#x27;</span>)</span><br><span class="line">data_reader = eval_loader()</span><br><span class="line">data = <span class="built_in">next</span>(data_reader)</span><br><span class="line"><span class="built_in">print</span>(data[<span class="number">0</span>].shape, data[<span class="number">1</span>].shape)</span><br></pre></td></tr></table></figure><pre><code>(10, 3, 224, 224) (10, 1)(10, 3, 224, 224) (10, 1)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(data_reader)</span><br></pre></td></tr></table></figure><h3 id="4ï¼‰å¯åŠ¨è®­ç»ƒ"><a href="#4ï¼‰å¯åŠ¨è®­ç»ƒ" class="headerlink" title="4ï¼‰å¯åŠ¨è®­ç»ƒ"></a><strong>4ï¼‰å¯åŠ¨è®­ç»ƒ</strong></h3><p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰å¥½è®­ç»ƒå’ŒéªŒè¯çš„åŸºæœ¬æµç¨‹ï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦å°†æ¨¡å‹è®­ç»ƒ 5 ä¸ªè¿­ä»£å‘¨æœŸåçš„æ¨¡å‹å‚æ•°ä¿å­˜ä¸‹æ¥ï¼Œæ–¹ä¾¿æˆ‘ä»¬åç»­è¿›è¡Œè¯„ä¼°ï¼Œæ­¤å¤„æ˜¯ä¸ºäº†æ¨¡æ‹ŸçœŸå®åœºæ™¯ä¸‹çš„è¯„ä¼°æ–¹æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># LeNet è¯†åˆ«çœ¼ç–¾å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">DATADIR = <span class="string">&#x27;/home/aistudio/work/palm/PALM-Training400/PALM-Training400&#x27;</span></span><br><span class="line">DATADIR2 = <span class="string">&#x27;/home/aistudio/work/palm/PALM-Validation400&#x27;</span></span><br><span class="line">CSVFILE = <span class="string">&#x27;/home/aistudio/labels.csv&#x27;</span></span><br><span class="line"><span class="comment"># è®¾ç½®è¿­ä»£è½®æ•°</span></span><br><span class="line">EPOCH_NUM = <span class="number">2</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_pm</span>(<span class="params">model, optimizer</span>):</span><br><span class="line">    <span class="comment"># å¼€å¯0å·GPUè®­ç»ƒ</span></span><br><span class="line">    use_gpu = <span class="literal">True</span></span><br><span class="line">    paddle.device.set_device(<span class="string">&#x27;gpu:0&#x27;</span>) <span class="keyword">if</span> use_gpu <span class="keyword">else</span> paddle.device.set_device(<span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;start training ... &#x27;</span>)</span><br><span class="line">    model.train()</span><br><span class="line">    <span class="built_in">iter</span> = <span class="number">0</span></span><br><span class="line">    iters = []</span><br><span class="line">    train_losses = []</span><br><span class="line">    <span class="comment"># å®šä¹‰æ•°æ®è¯»å–å™¨ï¼Œè®­ç»ƒæ•°æ®è¯»å–å™¨å’ŒéªŒè¯æ•°æ®è¯»å–å™¨</span></span><br><span class="line">    train_loader = data_loader(DATADIR, batch_size=<span class="number">10</span>, mode=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">    valid_loader = valid_data_loader(DATADIR2, CSVFILE)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            x_data, y_data = data</span><br><span class="line">            img = paddle.to_tensor(x_data)</span><br><span class="line">            label = paddle.to_tensor(y_data)</span><br><span class="line">            <span class="comment"># è¿è¡Œæ¨¡å‹å‰å‘è®¡ç®—ï¼Œå¾—åˆ°é¢„æµ‹å€¼</span></span><br><span class="line">            logits = model(img)</span><br><span class="line">            loss = F.binary_cross_entropy_with_logits(logits, label)</span><br><span class="line">            avg_loss = paddle.mean(loss)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> batch_id % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">                iters.append(<span class="built_in">iter</span>)</span><br><span class="line">                train_losses.append(avg_loss.numpy())</span><br><span class="line">                <span class="built_in">iter</span> = <span class="built_in">iter</span> + <span class="number">2</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, batch_id: &#123;&#125;, loss is: &#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(epoch, batch_id, <span class="built_in">float</span>(avg_loss.numpy())))</span><br><span class="line">            <span class="comment"># åå‘ä¼ æ’­ï¼Œæ›´æ–°æƒé‡ï¼Œæ¸…é™¤æ¢¯åº¦</span></span><br><span class="line">            avg_loss.backward()</span><br><span class="line">            optimizer.step()</span><br><span class="line">            optimizer.clear_grad()</span><br><span class="line"></span><br><span class="line">        model.<span class="built_in">eval</span>()</span><br><span class="line">        accuracies = []</span><br><span class="line">        losses = []</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(valid_loader()):</span><br><span class="line">            x_data, y_data = data</span><br><span class="line">            img = paddle.to_tensor(x_data)</span><br><span class="line">            label = paddle.to_tensor(y_data)</span><br><span class="line">            <span class="comment"># è¿è¡Œæ¨¡å‹å‰å‘è®¡ç®—ï¼Œå¾—åˆ°é¢„æµ‹å€¼</span></span><br><span class="line">            logits = model(img)</span><br><span class="line">            <span class="comment"># äºŒåˆ†ç±»ï¼Œsigmoidè®¡ç®—åçš„ç»“æœä»¥0.5ä¸ºé˜ˆå€¼åˆ†ä¸¤ä¸ªç±»åˆ«</span></span><br><span class="line">            <span class="comment"># è®¡ç®—sigmoidåçš„é¢„æµ‹æ¦‚ç‡ï¼Œè¿›è¡Œlossè®¡ç®—</span></span><br><span class="line">            pred = F.sigmoid(logits)</span><br><span class="line">            loss = F.binary_cross_entropy_with_logits(logits, label)</span><br><span class="line">            <span class="comment"># è®¡ç®—é¢„æµ‹æ¦‚ç‡å°äº0.5çš„ç±»åˆ«</span></span><br><span class="line">            pred2 = pred * (-<span class="number">1.0</span>) + <span class="number">1.0</span></span><br><span class="line">            <span class="comment"># å¾—åˆ°ä¸¤ä¸ªç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ï¼Œå¹¶æ²¿ç¬¬ä¸€ä¸ªç»´åº¦çº§è”</span></span><br><span class="line">            pred = paddle.concat([pred2, pred], axis=<span class="number">1</span>)</span><br><span class="line">            acc = paddle.metric.accuracy(pred, paddle.cast(label, dtype=<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line">            accuracies.append(acc.numpy())</span><br><span class="line">            losses.append(loss.numpy())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[validation] accuracy/loss: &#123;:.4f&#125;/&#123;:.4f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(accuracies), np.mean(losses)))</span><br><span class="line">        model.train()</span><br><span class="line"></span><br><span class="line">        paddle.save(model.state_dict(), <span class="string">&#x27;palm.pdparams&#x27;</span>)</span><br><span class="line">        paddle.save(optimizer.state_dict(), <span class="string">&#x27;palm.pdopt&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> iters, losses</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰è¯„ä¼°çš„è¿‡ç¨‹ï¼Œé¦–å…ˆéœ€è¦å°†ä¹‹å‰ä¿å­˜çš„æ¨¡å‹å‚æ•°é‡æ–°è½½å…¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰è¯„ä¼°è¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evaluation</span>(<span class="params">model, params_file_path</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¼€å¯0å·GPUé¢„ä¼°</span></span><br><span class="line">    use_gpu = <span class="literal">True</span></span><br><span class="line">    paddle.device.set_device(<span class="string">&#x27;gpu:0&#x27;</span>) <span class="keyword">if</span> use_gpu <span class="keyword">else</span> paddle.device.set_device(<span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;start evaluation .......&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#åŠ è½½æ¨¡å‹å‚æ•°</span></span><br><span class="line">    model_state_dict = paddle.load(params_file_path)</span><br><span class="line">    model.load_dict(model_state_dict)</span><br><span class="line"></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line">    eval_loader = data_loader(DATADIR, </span><br><span class="line">                        batch_size=<span class="number">10</span>, mode=<span class="string">&#x27;eval&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    acc_set = []</span><br><span class="line">    avg_loss_set = []</span><br><span class="line">    <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(eval_loader()):</span><br><span class="line">        x_data, y_data = data</span><br><span class="line">        img = paddle.to_tensor(x_data)</span><br><span class="line">        label = paddle.to_tensor(y_data)</span><br><span class="line">        y_data = y_data.astype(np.int64)</span><br><span class="line">        label_64 = paddle.to_tensor(y_data)</span><br><span class="line">        <span class="comment"># è®¡ç®—é¢„æµ‹å’Œç²¾åº¦</span></span><br><span class="line">        prediction, acc = model(img, label_64)</span><br><span class="line">        <span class="comment"># è®¡ç®—æŸå¤±å‡½æ•°å€¼</span></span><br><span class="line">        loss = F.binary_cross_entropy_with_logits(prediction, label)</span><br><span class="line">        avg_loss = paddle.mean(loss)</span><br><span class="line">        acc_set.append(<span class="built_in">float</span>(acc.numpy()))</span><br><span class="line">        avg_loss_set.append(<span class="built_in">float</span>(avg_loss.numpy()))</span><br><span class="line">    <span class="comment"># æ±‚å¹³å‡ç²¾åº¦</span></span><br><span class="line">    acc_val_mean = np.array(acc_set).mean()</span><br><span class="line">    avg_loss_val_mean = np.array(avg_loss_set).mean()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;loss=&#123;:.4f&#125;, acc=&#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(avg_loss_val_mean, acc_val_mean))</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”æœ¬ç« æœ€åˆå®šä¹‰çš„ LeNetï¼Œå‘ç°ä¸¤ä¸ª LeNet çš„ç¬¬ä¸€å±‚å…¨è¿æ¥å±‚çš„è¾“å…¥ç‰¹å¾ç»´åº¦ä¸åŒï¼Œä¸€ä¸ªæ˜¯ 120ï¼Œä¸€ä¸ªæ˜¯ 300000ã€‚</p><p>è¿™ä¸ªä¸åŒæ˜¯ç”±è¾“å…¥æ•°æ®çš„å½¢çŠ¶ä¸åŒå¼•èµ·çš„ï¼Œæ‰‹å†™æ•°å­—è¯†åˆ«çš„å›¾åƒè¾“å…¥å½¢çŠ¶æ¯”è¾ƒå°ï¼Œç¬¬ä¸‰å±‚å·ç§¯ä¹‹å‰çš„ç‰¹å¾ç»´åº¦æ˜¯ [B, 120x1x1]ï¼Œä½†æ˜¯ PALM æ•°æ®çš„è¾“å…¥æ•°æ®å½¢çŠ¶è¾ƒå¤§ï¼Œå½¢çŠ¶ä¸º [B, 120x50x50]ï¼Œ120x50x50 ç­‰äº 300000ï¼Œæ‰€ä»¥ä¸åŒçš„è¾“å…¥å¤§å°ï¼Œä¼šå½±å“å·ç§¯åå…¨è¿æ¥å±‚çš„å½¢çŠ¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥éœ€è¦çš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D, MaxPool2D, Linear, Dropout</span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ LeNet ç½‘ç»œç»“æ„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LeNet</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">1</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(LeNet, self).__init__()</span><br><span class="line">        self.num_classes = num_classes</span><br><span class="line">        <span class="comment"># åˆ›å»ºå·ç§¯å’Œæ± åŒ–å±‚å—ï¼Œæ¯ä¸ªå·ç§¯å±‚ä½¿ç”¨Sigmoidæ¿€æ´»å‡½æ•°ï¼Œåé¢è·Ÿç€ä¸€ä¸ª2x2çš„æ± åŒ–</span></span><br><span class="line">        self.conv1 = Conv2D(in_channels=<span class="number">3</span>, out_channels=<span class="number">6</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.max_pool1 = MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line">        self.conv2 = Conv2D(in_channels=<span class="number">6</span>, out_channels=<span class="number">16</span>, kernel_size=<span class="number">5</span>)</span><br><span class="line">        self.max_pool2 = MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># åˆ›å»ºç¬¬3ä¸ªå·ç§¯å±‚</span></span><br><span class="line">        self.conv3 = Conv2D(in_channels=<span class="number">16</span>, out_channels=<span class="number">120</span>, kernel_size=<span class="number">4</span>)</span><br><span class="line">        <span class="comment"># åˆ›å»ºå…¨è¿æ¥å±‚ï¼Œç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºç¥ç»å…ƒä¸ªæ•°ä¸º64</span></span><br><span class="line">        self.fc1 = Linear(in_features=<span class="number">300000</span>, out_features=<span class="number">64</span>)</span><br><span class="line">        <span class="comment"># ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚è¾“å‡ºç¥ç»å…ƒä¸ªæ•°ä¸ºåˆ†ç±»æ ‡ç­¾çš„ç±»åˆ«æ•°</span></span><br><span class="line">        self.fc2 = Linear(in_features=<span class="number">64</span>, out_features=num_classes)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç½‘ç»œçš„å‰å‘è®¡ç®—è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, label=<span class="literal">None</span></span>):</span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = self.max_pool1(x)</span><br><span class="line">        x = self.conv2(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = self.max_pool2(x)</span><br><span class="line">        x = self.conv3(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>])</span><br><span class="line">        x = self.fc1(x)</span><br><span class="line">        x = F.sigmoid(x)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line">        <span class="keyword">if</span> label <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> self.num_classes == <span class="number">1</span>:</span><br><span class="line">                pred = F.sigmoid(x)</span><br><span class="line">                pred = paddle.concat([<span class="number">1.0</span> - pred, pred], axis=<span class="number">1</span>)</span><br><span class="line">                acc = paddle.metric.accuracy(pred, paddle.cast(label, dtype=<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                acc = paddle.metric.accuracy(x, paddle.cast(label, dtype=<span class="string">&#x27;int64&#x27;</span>))</span><br><span class="line">            <span class="keyword">return</span> x, acc</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.randn(shape=(<span class="number">1</span>, <span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>))</span><br><span class="line">model = LeNet(num_classes=<span class="number">1</span>)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> model.sublayers():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        x = item(x)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>])</span><br><span class="line">        x = item(x)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(item.parameters())==<span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(item.full_name(), x.shape, item.parameters()[<span class="number">0</span>].shape, item.parameters()[<span class="number">1</span>].shape)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(item.full_name(), x.shape)</span><br></pre></td></tr></table></figure><pre><code>conv2d_12 [1, 6, 220, 220] [6, 3, 5, 5] [6]max_pool2d_8 [1, 6, 110, 110]conv2d_13 [1, 16, 106, 106] [16, 6, 5, 5] [16]max_pool2d_9 [1, 16, 53, 53]conv2d_14 [1, 120, 50, 50] [120, 16, 4, 4] [120]linear_8 [1, 64] [300000, 64] [64]linear_9 [1, 1] [64, 1] [1]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = LeNet(num_classes=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">opt = paddle.optimizer.Momentum(learning_rate=<span class="number">0.001</span>, </span><br><span class="line">                                momentum=<span class="number">0.9</span>, </span><br><span class="line">                                parameters=model.parameters())</span><br><span class="line">iters, train_losses = train_pm(model, optimizer=opt)</span><br><span class="line">evaluation(model, params_file_path=<span class="string">&quot;palm.pdparams&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iters</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_losses</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºè®­ç»ƒè¿‡ç¨‹ä¸­Lossçš„å˜åŒ–æ›²çº¿</span></span><br><span class="line">plt.figure()</span><br><span class="line">plt.title(<span class="string">&quot;LeNet-train loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;iter&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.plot(iters, train_losses, color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;train loss&#x27;</span>)</span><br><span class="line">plt.grid()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/51.png" alt="png"></p><p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œåœ¨çœ¼ç–¾ç­›æŸ¥æ•°æ®é›†iChallenge-PMä¸Šï¼ŒLeNetçš„losså¾ˆéš¾ä¸‹é™ï¼Œæ¨¡å‹æ²¡æœ‰æ”¶æ•›ã€‚è¿™æ˜¯å› ä¸ºMNISTæ•°æ®é›†çš„å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå°ï¼ˆ$28\times28$ï¼‰ï¼Œä½†æ˜¯çœ¼ç–¾ç­›æŸ¥æ•°æ®é›†å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå¤§ï¼ˆåŸå§‹å›¾ç‰‡å°ºå¯¸çº¦ä¸º$2000 \times 2000$ï¼Œç»è¿‡ç¼©æ”¾ä¹‹åå˜æˆ$224 \times 224$ï¼‰ï¼ŒLeNetæ¨¡å‹å¾ˆéš¾è¿›è¡Œæœ‰æ•ˆåˆ†ç±»ã€‚è¿™è¯´æ˜åœ¨å›¾ç‰‡å°ºå¯¸æ¯”è¾ƒå¤§æ—¶ï¼ŒLeNetåœ¨å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸Šå­˜åœ¨å±€é™æ€§ã€‚</p><h1 id="äºŒã€AlexNet"><a href="#äºŒã€AlexNet" class="headerlink" title="äºŒã€AlexNet"></a>äºŒã€AlexNet</h1><p>é€šè¿‡ä¸Šé¢çš„å®é™…è®­ç»ƒå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶LeNetåœ¨æ‰‹å†™æ•°å­—è¯†åˆ«æ•°æ®é›†ä¸Šå–å¾—äº†å¾ˆå¥½çš„ç»“æœï¼Œä½†åœ¨æ›´å¤§çš„æ•°æ®é›†ä¸Šè¡¨ç°å´å¹¶ä¸å¥½ã€‚è‡ªä»1998å¹´LeNeté—®ä¸–ä»¥æ¥ï¼Œæ¥ä¸‹æ¥åå‡ å¹´çš„æ—¶é—´é‡Œï¼Œç¥ç»ç½‘ç»œå¹¶æ²¡æœ‰åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸå–å¾—å¾ˆå¥½çš„ç»“æœï¼Œåè€Œä¸€åº¦è¢«å…¶å®ƒç®—æ³•æ‰€è¶…è¶Šã€‚åŸå› ä¸»è¦æœ‰ä¸¤æ–¹é¢ï¼Œä¸€æ˜¯ç¥ç»ç½‘ç»œçš„è®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œå¯¹å½“æ—¶è®¡ç®—æœºçš„ç®—åŠ›æ¥è¯´ï¼Œè®­ç»ƒç¥ç»ç½‘ç»œæ˜¯ä»¶éå¸¸è€—æ—¶çš„äº‹æƒ…ï¼›å¦ä¸€æ–¹é¢ï¼Œå½“æ—¶è¿˜æ²¡æœ‰ä¸“é—¨é’ˆå¯¹ç¥ç»ç½‘ç»œåšç®—æ³•å’Œè®­ç»ƒæŠ€å·§çš„ä¼˜åŒ–ï¼Œç¥ç»ç½‘ç»œçš„æ”¶æ•›æ˜¯ä»¶éå¸¸å›°éš¾çš„äº‹æƒ…ã€‚</p><p>éšç€æŠ€æœ¯çš„è¿›æ­¥å’Œå‘å±•ï¼Œè®¡ç®—æœºçš„ç®—åŠ›è¶Šæ¥è¶Šå¼ºå¤§ï¼Œå°¤å…¶æ˜¯åœ¨GPUå¹¶è¡Œè®¡ç®—èƒ½åŠ›çš„æ¨åŠ¨ä¸‹ï¼Œå¤æ‚ç¥ç»ç½‘ç»œçš„è®¡ç®—ä¹Ÿå˜å¾—æ›´åŠ å®¹æ˜“å®æ–½ã€‚å¦ä¸€æ–¹é¢ï¼Œäº’è”ç½‘ä¸Šæ¶Œç°å‡ºè¶Šæ¥è¶Šå¤šçš„æ•°æ®ï¼Œæå¤§çš„ä¸°å¯Œäº†æ•°æ®åº“ã€‚åŒæ—¶ä¹Ÿæœ‰è¶Šæ¥è¶Šå¤šçš„ç ”ç©¶äººå‘˜å¼€å§‹ä¸“é—¨é’ˆå¯¹ç¥ç»ç½‘ç»œåšç®—æ³•å’Œæ¨¡å‹çš„ä¼˜åŒ–ï¼ŒAlex Krizhevskyç­‰äººæå‡ºçš„AlexNetä»¥å¾ˆå¤§ä¼˜åŠ¿è·å¾—äº†2012å¹´ImageNetæ¯”èµ›çš„å† å†›ã€‚è¿™ä¸€æˆæœæå¤§çš„æ¿€å‘äº†äº§ä¸šç•Œå¯¹ç¥ç»ç½‘ç»œçš„å…´è¶£ï¼Œå¼€åˆ›äº†ä½¿ç”¨æ·±åº¦ç¥ç»ç½‘ç»œè§£å†³å›¾åƒé—®é¢˜çš„é€”å¾„ï¼Œéšåä¹Ÿåœ¨è¿™ä¸€é¢†åŸŸæ¶Œç°å‡ºè¶Šæ¥è¶Šå¤šçš„ä¼˜ç§€æˆæœã€‚</p><p>AlexNetçš„å…·ä½“ç»“æ„å¦‚ <strong>å›¾4</strong> æ‰€ç¤ºï¼š</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/630059b01a9a4e8c8eded2e7584412daa27bc7c034a8441fabadd713dac29d77" width = "1000"></center><center><br>å›¾4ï¼šAlexNetæ¨¡å‹ç½‘ç»œç»“æ„ç¤ºæ„å›¾</br></center><p><br></br></p><h2 id="AlexNetçš„é‡è¦æ„æˆ"><a href="#AlexNetçš„é‡è¦æ„æˆ" class="headerlink" title="AlexNetçš„é‡è¦æ„æˆ"></a><strong>AlexNetçš„é‡è¦æ„æˆ</strong></h2><p>AlexNetä¸LeNetç›¸æ¯”ï¼Œå…·æœ‰æ›´æ·±çš„ç½‘ç»œç»“æ„ï¼ŒåŒ…å«5å±‚å·ç§¯å’Œ3å±‚å…¨è¿æ¥ï¼ŒåŒæ—¶ä½¿ç”¨äº†å¦‚ä¸‹ä¸‰ç§æ–¹æ³•æ”¹è¿›æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼š</p><ul><li><p>æ•°æ®å¢å¹¿ï¼šæ·±åº¦å­¦ä¹ ä¸­å¸¸ç”¨çš„ä¸€ç§å¤„ç†æ–¹å¼ï¼Œé€šè¿‡å¯¹è®­ç»ƒéšæœºåŠ ä¸€äº›å˜åŒ–ï¼Œæ¯”å¦‚å¹³ç§»ã€ç¼©æ”¾ã€è£å‰ªã€æ—‹è½¬ã€ç¿»è½¬æˆ–è€…å¢å‡äº®åº¦ç­‰ï¼Œäº§ç”Ÿä¸€ç³»åˆ—è·ŸåŸå§‹å›¾ç‰‡ç›¸ä¼¼ä½†åˆä¸å®Œå…¨ç›¸åŒçš„æ ·æœ¬ï¼Œä»è€Œæ‰©å¤§è®­ç»ƒæ•°æ®é›†ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥éšæœºæ”¹å˜è®­ç»ƒæ ·æœ¬ï¼Œé¿å…æ¨¡å‹è¿‡åº¦ä¾èµ–äºæŸäº›å±æ€§ï¼Œèƒ½ä»ä¸€å®šç¨‹åº¦ä¸ŠæŠ‘åˆ¶è¿‡æ‹Ÿåˆã€‚</p></li><li><p>ä½¿ç”¨DropoutæŠ‘åˆ¶è¿‡æ‹Ÿåˆã€‚</p></li><li><p>ä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°å‡å°‘æ¢¯åº¦æ¶ˆå¤±ç°è±¡ã€‚</p></li></ul><hr><p><strong>è¯´æ˜ï¼š</strong></p><p>ä¹‹åä¼šè¯¦ç»†ä»‹ç»æ•°æ®å¢å¹¿çš„å…·ä½“å®ç°æ–¹å¼ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/91c51b2d7dac42338bf91df0120ad202a2c4f937abe840889f4dce024a3fde1d" width = "500"></center><center><br>å›¾5ï¼šå›¾åƒå¢å¹¿æŠ€æœ¯</br></center><p><br></br></p><hr><h3 id="1ï¼‰æ¿€æ´»å‡½æ•°çš„æ”¹å˜"><a href="#1ï¼‰æ¿€æ´»å‡½æ•°çš„æ”¹å˜" class="headerlink" title="1ï¼‰æ¿€æ´»å‡½æ•°çš„æ”¹å˜"></a><strong>1ï¼‰æ¿€æ´»å‡½æ•°çš„æ”¹å˜</strong></h3><p>AlexNetå°†sigmoidæ¿€æ´»å‡½æ•°æ”¹ä¸ºæ›´ç®€å•çš„ReLUæ¿€æ´»å‡½æ•°ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/cc4b7ab6ebe844aa9a833c4e5bfdd94108bf7f60cee14145807be3f19621e61c" width = "700"></center><center><br>å›¾6ï¼šæ¿€æ´»å‡½æ•°çš„æ”¹å˜</br></center><p><br></br></p><p>ä¸€æ–¹é¢ï¼ŒReLUæ¿€æ´»å‡½æ•°çš„è®¡ç®—æ›´ç®€å•ï¼Œå®ƒä¸éœ€è¦å¦‚sigmoidæ¿€æ´»å‡½æ•°é‚£èˆ¬å¤æ‚çš„æ±‚å¹‚è¿ç®—ã€‚ å¦ä¸€æ–¹é¢ï¼Œå½“ä½¿ç”¨ä¸åŒçš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•æ—¶ï¼ŒReLUæ¿€æ´»å‡½æ•°ä½¿è®­ç»ƒæ¨¡å‹æ›´åŠ å®¹æ˜“ã€‚ å½“sigmoidæ¿€æ´»å‡½æ•°çš„è¾“å‡ºéå¸¸æ¥è¿‘äºæ­£æ— ç©·æˆ–è´Ÿæ— ç©·æ—¶ï¼Œè¿™äº›åŒºåŸŸçš„æ¢¯åº¦å‡ ä¹ä¸º0ï¼Œå› æ­¤åå‘ä¼ æ’­æ— æ³•ç»§ç»­æ›´æ–°ä¸€äº›æ¨¡å‹å‚æ•°ã€‚ ç›¸åï¼ŒReLUæ¿€æ´»å‡½æ•°åœ¨æ­£åŒºé—´çš„æ¢¯åº¦æ€»æ˜¯1ã€‚ å› æ­¤ï¼Œå¦‚æœæ¨¡å‹å‚æ•°æ²¡æœ‰æ­£ç¡®åˆå§‹åŒ–ï¼Œsigmoidå‡½æ•°å¯èƒ½åœ¨æ­£åŒºé—´å†…å¾—åˆ°å‡ ä¹ä¸º0çš„æ¢¯åº¦ï¼Œä»è€Œä½¿æ¨¡å‹æ— æ³•å¾—åˆ°æœ‰æ•ˆçš„è®­ç»ƒã€‚</p><h3 id="2ï¼‰å®¹é‡æ§åˆ¶å’Œé¢„å¤„ç†"><a href="#2ï¼‰å®¹é‡æ§åˆ¶å’Œé¢„å¤„ç†" class="headerlink" title="2ï¼‰å®¹é‡æ§åˆ¶å’Œé¢„å¤„ç†"></a><strong>2ï¼‰å®¹é‡æ§åˆ¶å’Œé¢„å¤„ç†</strong></h3><p>AlexNeté€šè¿‡Dropoutæ§åˆ¶å…¨è¿æ¥å±‚çš„æ¨¡å‹å¤æ‚åº¦ï¼Œè€ŒLeNetåªä½¿ç”¨äº†æƒé‡è¡°å‡ã€‚<br>Dropoutçš„æ„æ€æ˜¯æ¯æ¬¡è®­ç»ƒçš„æ—¶å€™éšæœºæŸå¤±æ‰ä¸€äº›ç¥ç»å…ƒï¼Œè¿™äº›ç¥ç»å…ƒè¢«Dropped-outäº†ï¼Œæ¢å¥è¯è®²ï¼Œè¿™äº›ç¥ç»å…ƒåœ¨æ­£å‘ä¼ æ’­æ—¶å¯¹ä¸‹æ¸¸çš„å¯åŠ¨å½±å“è¢«å¿½ç•¥ï¼Œåå‘ä¼ æ’­æ—¶ä¹Ÿä¸ä¼šæ›´æ–°æƒé‡ã€‚Dropoutçš„æ•ˆæœæ˜¯ï¼Œç½‘ç»œå¯¹æŸä¸ªç¥ç»å…ƒçš„æƒé‡å˜åŒ–æ›´ä¸æ•æ„Ÿï¼Œå¢åŠ æ³›åŒ–èƒ½åŠ›ï¼Œå‡å°‘è¿‡æ‹Ÿåˆã€‚</p><p>AlexNetåœ¨çœ¼ç–¾ç­›æŸ¥æ•°æ®é›†iChallenge-PMä¸Šå…·ä½“å®ç°çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥éœ€è¦çš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D, MaxPool2D, Linear, Dropout</span><br><span class="line"><span class="comment">## ç»„ç½‘</span></span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ AlexNet ç½‘ç»œç»“æ„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AlexNet</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">1</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(AlexNet, self).__init__()</span><br><span class="line">        <span class="comment"># AlexNetä¸LeNetä¸€æ ·ä¹Ÿä¼šåŒæ—¶ä½¿ç”¨å·ç§¯å’Œæ± åŒ–å±‚æå–å›¾åƒç‰¹å¾</span></span><br><span class="line">        <span class="comment"># ä¸LeNetä¸åŒçš„æ˜¯æ¿€æ´»å‡½æ•°æ¢æˆäº†â€˜reluâ€™</span></span><br><span class="line">        self.conv1 = Conv2D(in_channels=<span class="number">3</span>, out_channels=<span class="number">96</span>, kernel_size=<span class="number">11</span>, stride=<span class="number">4</span>, padding=<span class="number">5</span>)</span><br><span class="line">        self.max_pool1 = MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line">        self.conv2 = Conv2D(in_channels=<span class="number">96</span>, out_channels=<span class="number">256</span>, kernel_size=<span class="number">5</span>, stride=<span class="number">1</span>, padding=<span class="number">2</span>)</span><br><span class="line">        self.max_pool2 = MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line">        self.conv3 = Conv2D(in_channels=<span class="number">256</span>, out_channels=<span class="number">384</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.conv4 = Conv2D(in_channels=<span class="number">384</span>, out_channels=<span class="number">384</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.conv5 = Conv2D(in_channels=<span class="number">384</span>, out_channels=<span class="number">256</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.max_pool5 = MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        self.fc1 = Linear(in_features=<span class="number">12544</span>, out_features=<span class="number">4096</span>)</span><br><span class="line">        self.drop_ratio1 = <span class="number">0.5</span></span><br><span class="line">        self.drop1 = Dropout(self.drop_ratio1)</span><br><span class="line">        self.fc2 = Linear(in_features=<span class="number">4096</span>, out_features=<span class="number">4096</span>)</span><br><span class="line">        self.drop_ratio2 = <span class="number">0.5</span></span><br><span class="line">        self.drop2 = Dropout(self.drop_ratio2)</span><br><span class="line">        self.fc3 = Linear(in_features=<span class="number">4096</span>, out_features=num_classes)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = self.max_pool1(x)</span><br><span class="line">        x = self.conv2(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = self.max_pool2(x)</span><br><span class="line">        x = self.conv3(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = self.conv4(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = self.conv5(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = self.max_pool5(x)</span><br><span class="line">        x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>])</span><br><span class="line">        x = self.fc1(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        <span class="comment"># è¿™é‡Œï¼Œå…¨è¿æ¥å±‚çš„è¾“å‡ºæ•°é‡æ˜¯LeNetä¸­çš„å¥½å‡ å€ã€‚ä½¿ç”¨dropoutå±‚æ¥å‡è½»è¿‡æ‹Ÿåˆ</span></span><br><span class="line">        x = self.drop1(x)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        <span class="comment"># åœ¨å…¨è¿æ¥ä¹‹åä½¿ç”¨dropoutæŠ‘åˆ¶è¿‡æ‹Ÿåˆ</span></span><br><span class="line">        x = self.drop2(x)</span><br><span class="line">        x = self.fc3(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ„é€ ä¸€ä¸ªé«˜åº¦å’Œå®½åº¦éƒ½ä¸º224ï¼Œ3é€šé“çš„æ•°æ®æ¥è§‚å¯Ÿæ¯ä¸€å±‚è¾“å‡ºçš„å½¢çŠ¶ã€‚ å®ƒä¸AlexNetæ¶æ„ç›¸åŒ¹é…ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = AlexNet()</span><br><span class="line">x = paddle.randn(shape=(<span class="number">1</span>, <span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>))</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> model.sublayers():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        x = item(x)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>])</span><br><span class="line">        x = item(x)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(item.parameters())==<span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(item.full_name(), x.shape)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(item.full_name(), x.shape)</span><br></pre></td></tr></table></figure><pre><code>conv2d_18 [1, 96, 56, 56]max_pool2d_12 [1, 96, 28, 28]conv2d_19 [1, 256, 28, 28]max_pool2d_13 [1, 256, 14, 14]conv2d_20 [1, 384, 14, 14]conv2d_21 [1, 384, 14, 14]conv2d_22 [1, 256, 14, 14]max_pool2d_14 [1, 256, 7, 7]linear_12 [1, 4096]dropout_0 [1, 4096]linear_13 [1, 4096]dropout_1 [1, 4096]linear_14 [1, 1]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = AlexNet()</span><br><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">opt = paddle.optimizer.Adam(learning_rate=<span class="number">0.001</span>, </span><br><span class="line">                            parameters=model.parameters())</span><br><span class="line"></span><br><span class="line">iters_A, train_losses_A = train_pm(model, optimizer=opt)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºè®­ç»ƒè¿‡ç¨‹ä¸­Lossçš„å˜åŒ–æ›²çº¿</span></span><br><span class="line">plt.figure()</span><br><span class="line">plt.title(<span class="string">&quot;AlexNet-train loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;iter&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.plot(iters_A, train_losses_A, color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;train loss&#x27;</span>)</span><br><span class="line">plt.grid()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/52.png" alt="png"></p><p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥å‘ç°ï¼Œåœ¨çœ¼ç–¾ç­›æŸ¥æ•°æ®é›†iChallenge-PMä¸Šä½¿ç”¨AlexNetï¼Œlossèƒ½æœ‰æ•ˆä¸‹é™ï¼Œç»è¿‡5ä¸ªepochçš„è®­ç»ƒï¼Œåœ¨éªŒè¯é›†ä¸Šçš„å‡†ç¡®ç‡å¯ä»¥è¾¾åˆ°94%å·¦å³ã€‚</p><h1 id="ä¸‰ã€VGG"><a href="#ä¸‰ã€VGG" class="headerlink" title="ä¸‰ã€VGG"></a>ä¸‰ã€VGG</h1><p>è™½ç„¶AlexNetè¯æ˜æ·±å±‚ç¥ç»ç½‘ç»œå“æœ‰æˆæ•ˆï¼Œä½†å®ƒæ²¡æœ‰æä¾›ä¸€ä¸ªé€šç”¨çš„æ¨¡æ¿æ¥æŒ‡å¯¼åç»­çš„ç ”ç©¶äººå‘˜è®¾è®¡æ–°çš„ç½‘ç»œã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæœ‰äººä¼šé—®ï¼šAlexNetä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿæƒ³è¦æŠŠç½‘ç»œè®¾è®¡çš„æ›´å¥½ï¼Œæˆ‘åº”è¯¥æ€ä¹ˆå»ä¼˜åŒ–æˆ‘çš„ç½‘ç»œï¼Ÿåœ¨ä¸‹é¢çš„å‡ ä¸ªç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›å¸¸ç”¨äºè®¾è®¡æ·±å±‚ç¥ç»ç½‘ç»œçš„å¯å‘å¼æ¦‚å¿µã€‚</p><p>VGGæ˜¯å½“å‰æœ€æµè¡Œçš„CNNæ¨¡å‹ä¹‹ä¸€ï¼Œ2014å¹´ç”±Simonyanå’ŒZissermanæå‡ºï¼Œå…¶å‘½åæ¥æºäºè®ºæ–‡ä½œè€…æ‰€åœ¨çš„å®éªŒå®¤è§†è§‰å‡ ä½•ç»„(Visual Geometry Group)ã€‚</p><p>AlexNetæ¨¡å‹é€šè¿‡æ„é€ å¤šå±‚ç½‘ç»œï¼Œå–å¾—äº†è¾ƒå¥½çš„æ•ˆæœï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç»™å‡ºæ·±åº¦ç¥ç»ç½‘ç»œè®¾è®¡çš„æ–¹å‘ã€‚VGGé€šè¿‡ä½¿ç”¨<strong>ä¸€ç³»åˆ—å¤§å°ä¸º3x3çš„å°å°ºå¯¸å·ç§¯æ ¸å’Œæ± åŒ–å±‚</strong>æ„é€ æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œï¼Œå¹¶å–å¾—äº†è¾ƒå¥½çš„æ•ˆæœã€‚VGGæ¨¡å‹å› ä¸ºç»“æ„ç®€å•ã€åº”ç”¨æ€§æå¼ºè€Œå¹¿å—ç ”ç©¶è€…æ¬¢è¿ï¼Œå°¤å…¶æ˜¯å®ƒçš„ç½‘ç»œç»“æ„è®¾è®¡æ–¹æ³•ï¼Œä¸ºæ„å»ºæ·±åº¦ç¥ç»ç½‘ç»œæä¾›äº†æ–¹å‘ã€‚</p><p><strong>å›¾7</strong> æ˜¯VGG-16çš„ç½‘ç»œç»“æ„ç¤ºæ„å›¾ï¼Œæœ‰13å±‚å·ç§¯å’Œ3å±‚å…¨è¿æ¥å±‚ã€‚VGGç½‘ç»œçš„è®¾è®¡ä¸¥æ ¼ä½¿ç”¨$3\times 3$çš„å·ç§¯å±‚å’Œæ± åŒ–å±‚æ¥æå–ç‰¹å¾ï¼Œå¹¶åœ¨ç½‘ç»œçš„æœ€åé¢ä½¿ç”¨ä¸‰å±‚å…¨è¿æ¥å±‚ï¼Œå°†æœ€åä¸€å±‚å…¨è¿æ¥å±‚çš„è¾“å‡ºä½œä¸ºåˆ†ç±»çš„é¢„æµ‹ã€‚åœ¨VGGä¸­æ¯å±‚å·ç§¯å°†ä½¿ç”¨ReLUä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œåœ¨å…¨è¿æ¥å±‚ä¹‹åæ·»åŠ dropoutæ¥æŠ‘åˆ¶è¿‡æ‹Ÿåˆã€‚</p><p>VGGçš„åˆ›æ–°ä¹‹å¤„åœ¨äºä½¿ç”¨ä¸¤å±‚$3\times 3$å·ç§¯å±‚ï¼Œè€Œä¸æ˜¯ä½¿ç”¨$5 \times 5$çš„å·ç§¯å±‚ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿ</p><p>åŸå› æ˜¯ä½¿ç”¨å°çš„å·ç§¯æ ¸èƒ½å¤Ÿæœ‰æ•ˆåœ°å‡å°‘å‚æ•°çš„ä¸ªæ•°ï¼Œä½¿å¾—è®­ç»ƒå’Œæµ‹è¯•å˜å¾—æ›´åŠ æœ‰æ•ˆã€‚ç”±äºå·ç§¯æ ¸æ¯”è¾ƒå°ï¼Œå¯ä»¥å †å æ›´å¤šçš„å·ç§¯å±‚ï¼ŒåŠ æ·±ç½‘ç»œçš„æ·±åº¦ï¼Œè¿™å¯¹äºå›¾åƒåˆ†ç±»ä»»åŠ¡æ¥è¯´æ˜¯æœ‰åˆ©çš„ã€‚VGGæ¨¡å‹çš„æˆåŠŸè¯æ˜äº†å¢åŠ ç½‘ç»œçš„æ·±åº¦ï¼Œå¯ä»¥æ›´å¥½çš„å­¦ä¹ å›¾åƒä¸­çš„ç‰¹å¾æ¨¡å¼ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/3b6e1725e5934d2293e03b9c0a83e1d48660137f3c4449ba89bf9766d4380f3a" width = "1000"></center><center><br>å›¾7ï¼šVGGæ¨¡å‹ç½‘ç»œç»“æ„ç¤ºæ„å›¾</br></center><p><br></br></p><p>VGGåœ¨çœ¼ç–¾è¯†åˆ«æ•°æ®é›†iChallenge-PMä¸Šçš„å…·ä½“å®ç°å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># VGGæ¨¡å‹ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="comment"># from paddle.nn import Conv2D, MaxPool2D, BatchNorm, Linear</span></span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D, MaxPool2D, BatchNorm2D, Linear</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰vggç½‘ç»œ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VGG</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(VGG, self).__init__()</span><br><span class="line">        in_channels = [<span class="number">3</span>, <span class="number">64</span>, <span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>, <span class="number">512</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å®šä¹‰ç¬¬ä¸€ä¸ªblockï¼ŒåŒ…å«ä¸¤ä¸ªå·ç§¯</span></span><br><span class="line">        self.conv1_1 = Conv2D(in_channels=in_channels[<span class="number">0</span>], out_channels=in_channels[<span class="number">1</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv1_2 = Conv2D(in_channels=in_channels[<span class="number">1</span>], out_channels=in_channels[<span class="number">1</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># å®šä¹‰ç¬¬äºŒä¸ªblockï¼ŒåŒ…å«ä¸¤ä¸ªå·ç§¯</span></span><br><span class="line">        self.conv2_1 = Conv2D(in_channels=in_channels[<span class="number">1</span>], out_channels=in_channels[<span class="number">2</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv2_2 = Conv2D(in_channels=in_channels[<span class="number">2</span>], out_channels=in_channels[<span class="number">2</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># å®šä¹‰ç¬¬ä¸‰ä¸ªblockï¼ŒåŒ…å«ä¸‰ä¸ªå·ç§¯</span></span><br><span class="line">        self.conv3_1 = Conv2D(in_channels=in_channels[<span class="number">2</span>], out_channels=in_channels[<span class="number">3</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv3_2 = Conv2D(in_channels=in_channels[<span class="number">3</span>], out_channels=in_channels[<span class="number">3</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv3_3 = Conv2D(in_channels=in_channels[<span class="number">3</span>], out_channels=in_channels[<span class="number">3</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># å®šä¹‰ç¬¬å››ä¸ªblockï¼ŒåŒ…å«ä¸‰ä¸ªå·ç§¯</span></span><br><span class="line">        self.conv4_1 = Conv2D(in_channels=in_channels[<span class="number">3</span>], out_channels=in_channels[<span class="number">4</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv4_2 = Conv2D(in_channels=in_channels[<span class="number">4</span>], out_channels=in_channels[<span class="number">4</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv4_3 = Conv2D(in_channels=in_channels[<span class="number">4</span>], out_channels=in_channels[<span class="number">4</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># å®šä¹‰ç¬¬äº”ä¸ªblockï¼ŒåŒ…å«ä¸‰ä¸ªå·ç§¯</span></span><br><span class="line">        self.conv5_1 = Conv2D(in_channels=in_channels[<span class="number">4</span>], out_channels=in_channels[<span class="number">5</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv5_2 = Conv2D(in_channels=in_channels[<span class="number">5</span>], out_channels=in_channels[<span class="number">5</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv5_3 = Conv2D(in_channels=in_channels[<span class="number">5</span>], out_channels=in_channels[<span class="number">5</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä½¿ç”¨Sequential å°†å…¨è¿æ¥å±‚å’Œreluç»„æˆä¸€ä¸ªçº¿æ€§ç»“æ„ï¼ˆfc + reluï¼‰</span></span><br><span class="line">        <span class="comment"># å½“è¾“å…¥ä¸º224x224æ—¶ï¼Œç»è¿‡äº”ä¸ªå·ç§¯å—å’Œæ± åŒ–å±‚åï¼Œç‰¹å¾ç»´åº¦å˜ä¸º[512x7x7]</span></span><br><span class="line">        self.fc1 = paddle.nn.Sequential(paddle.nn.Linear(<span class="number">512</span> * <span class="number">7</span> * <span class="number">7</span>, <span class="number">4096</span>), paddle.nn.ReLU())</span><br><span class="line">        self.drop1_ratio = <span class="number">0.5</span></span><br><span class="line">        self.dropout1 = paddle.nn.Dropout(self.drop1_ratio, mode=<span class="string">&#x27;upscale_in_train&#x27;</span>)</span><br><span class="line">        <span class="comment"># ä½¿ç”¨Sequential å°†å…¨è¿æ¥å±‚å’Œreluç»„æˆä¸€ä¸ªçº¿æ€§ç»“æ„ï¼ˆfc + reluï¼‰</span></span><br><span class="line">        self.fc2 = paddle.nn.Sequential(paddle.nn.Linear(<span class="number">4096</span>, <span class="number">4096</span>), paddle.nn.ReLU())</span><br><span class="line"></span><br><span class="line">        self.drop2_ratio = <span class="number">0.5</span></span><br><span class="line">        self.dropout2 = paddle.nn.Dropout(self.drop2_ratio, mode=<span class="string">&#x27;upscale_in_train&#x27;</span>)</span><br><span class="line">        self.fc3 = paddle.nn.Linear(<span class="number">4096</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        self.relu = paddle.nn.ReLU()</span><br><span class="line">        self.pool = MaxPool2D(stride=<span class="number">2</span>, kernel_size=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.relu(self.conv1_1(x))</span><br><span class="line">        x = self.relu(self.conv1_2(x))</span><br><span class="line">        x = self.pool(x)</span><br><span class="line"></span><br><span class="line">        x = self.relu(self.conv2_1(x))</span><br><span class="line">        x = self.relu(self.conv2_2(x))</span><br><span class="line">        x = self.pool(x)</span><br><span class="line"></span><br><span class="line">        x = self.relu(self.conv3_1(x))</span><br><span class="line">        x = self.relu(self.conv3_2(x))</span><br><span class="line">        x = self.relu(self.conv3_3(x))</span><br><span class="line">        x = self.pool(x)</span><br><span class="line"></span><br><span class="line">        x = self.relu(self.conv4_1(x))</span><br><span class="line">        x = self.relu(self.conv4_2(x))</span><br><span class="line">        x = self.relu(self.conv4_3(x))</span><br><span class="line">        x = self.pool(x)</span><br><span class="line"></span><br><span class="line">        x = self.relu(self.conv5_1(x))</span><br><span class="line">        x = self.relu(self.conv5_2(x))</span><br><span class="line">        x = self.relu(self.conv5_3(x))</span><br><span class="line">        x = self.pool(x)</span><br><span class="line"></span><br><span class="line">        x = paddle.flatten(x, <span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">        x = self.dropout1(self.relu(self.fc1(x)))</span><br><span class="line">        x = self.dropout2(self.relu(self.fc2(x)))</span><br><span class="line">        x = self.fc3(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = VGG()</span><br><span class="line">model.sublayers()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># opt = paddle.optimizer.Adam(learning_rate=0.001, parameters=model.parameters())</span></span><br><span class="line">opt = paddle.optimizer.Momentum(learning_rate=<span class="number">0.001</span>, </span><br><span class="line">                                momentum=<span class="number">0.9</span>, </span><br><span class="line">                                parameters=model.parameters())</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">iters_V, train_losses_V = train_pm(model, optimizer=opt)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºè®­ç»ƒè¿‡ç¨‹ä¸­Lossçš„å˜åŒ–æ›²çº¿</span></span><br><span class="line">plt.figure()</span><br><span class="line">plt.title(<span class="string">&quot;VGGNet-train loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;iter&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.plot(iters_V, train_losses_V, color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;train loss&#x27;</span>)</span><br><span class="line">plt.grid()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥å‘ç°ï¼Œåœ¨çœ¼ç–¾ç­›æŸ¥æ•°æ®é›†iChallenge-PMä¸Šä½¿ç”¨VGGï¼Œlossèƒ½æœ‰æ•ˆçš„ä¸‹é™ï¼Œç»è¿‡5ä¸ªepochçš„è®­ç»ƒï¼Œåœ¨éªŒè¯é›†ä¸Šçš„å‡†ç¡®ç‡å¯ä»¥è¾¾åˆ°94%å·¦å³ã€‚</p><h1 id="å››ã€GoogLeNet"><a href="#å››ã€GoogLeNet" class="headerlink" title="å››ã€GoogLeNet"></a>å››ã€GoogLeNet</h1><p>GoogLeNetæ˜¯2014å¹´ImageNetæ¯”èµ›çš„å† å†›ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯ç½‘ç»œä¸ä»…æœ‰æ·±åº¦ï¼Œè¿˜åœ¨æ¨ªå‘ä¸Šå…·æœ‰â€œå®½åº¦â€ã€‚ç”±äºå›¾åƒä¿¡æ¯åœ¨ç©ºé—´å°ºå¯¸ä¸Šçš„å·¨å¤§å·®å¼‚ï¼Œå¦‚ä½•é€‰æ‹©åˆé€‚çš„å·ç§¯æ ¸æ¥æå–ç‰¹å¾å°±æ˜¾å¾—æ¯”è¾ƒå›°éš¾äº†ã€‚ç©ºé—´åˆ†å¸ƒèŒƒå›´æ›´å¹¿çš„å›¾åƒä¿¡æ¯é€‚åˆç”¨è¾ƒå¤§çš„å·ç§¯æ ¸æ¥æå–å…¶ç‰¹å¾ï¼›è€Œç©ºé—´åˆ†å¸ƒèŒƒå›´è¾ƒå°çš„å›¾åƒä¿¡æ¯åˆ™é€‚åˆç”¨è¾ƒå°çš„å·ç§¯æ ¸æ¥æå–å…¶ç‰¹å¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGoogLeNetæå‡ºäº†ä¸€ç§è¢«ç§°ä¸ºInceptionæ¨¡å—çš„æ–¹æ¡ˆã€‚å¦‚ <strong>å›¾8</strong> æ‰€ç¤ºï¼š</p><hr><p><strong>è¯´æ˜ï¼š</strong></p><ul><li>Googleçš„ç ”ç©¶äººå‘˜ä¸ºäº†å‘LeNetè‡´æ•¬ï¼Œç‰¹åœ°å°†æ¨¡å‹å‘½åä¸ºGoogLeNetã€‚</li><li>Inceptionä¸€è¯æ¥æºäºç”µå½±ã€Šç›—æ¢¦ç©ºé—´ã€‹ï¼ˆInceptionï¼‰ã€‚</li></ul><hr><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/ebc171e0281549a9b6aace1113f92fb72df08b947059446ca62a07b9af22e4b4" width = "1000"></center><center><br>å›¾8ï¼šInceptionæ¨¡å—ç»“æ„ç¤ºæ„å›¾</br></center><p><br></br></p><p>å›¾8(a)æ˜¯Inceptionæ¨¡å—çš„è®¾è®¡æ€æƒ³ï¼Œä½¿ç”¨3ä¸ªä¸åŒå¤§å°çš„å·ç§¯æ ¸å¯¹è¾“å…¥å›¾ç‰‡è¿›è¡Œå·ç§¯æ“ä½œï¼Œå¹¶é™„åŠ æœ€å¤§æ± åŒ–ï¼Œå°†è¿™4ä¸ªæ“ä½œçš„è¾“å‡ºæ²¿ç€é€šé“è¿™ä¸€ç»´åº¦è¿›è¡Œæ‹¼æ¥ï¼Œæ„æˆçš„è¾“å‡ºç‰¹å¾å›¾å°†ä¼šåŒ…å«ç»è¿‡ä¸åŒå¤§å°çš„å·ç§¯æ ¸æå–å‡ºæ¥çš„ç‰¹å¾ï¼Œä»è€Œè¾¾åˆ°æ•æ‰ä¸åŒå°ºåº¦ä¿¡æ¯çš„æ•ˆæœã€‚</p><p>Inceptionæ¨¡å—é‡‡ç”¨å¤šé€šè·¯(multi-path)çš„è®¾è®¡å½¢å¼ï¼Œæ¯ä¸ªæ”¯è·¯ä½¿ç”¨ä¸åŒå¤§å°çš„å·ç§¯æ ¸ï¼Œæœ€ç»ˆè¾“å‡ºç‰¹å¾å›¾çš„é€šé“æ•°æ˜¯æ¯ä¸ªæ”¯è·¯è¾“å‡ºé€šé“æ•°çš„æ€»å’Œï¼Œè¿™å°†ä¼šå¯¼è‡´è¾“å‡ºé€šé“æ•°å˜å¾—å¾ˆå¤§ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨å¤šä¸ªInceptionæ¨¡å—ä¸²è”æ“ä½œçš„æ—¶å€™ï¼Œæ¨¡å‹å‚æ•°é‡ä¼šå˜å¾—éå¸¸å¤§ã€‚</p><p>ä¸ºäº†å‡å°å‚æ•°é‡ï¼ŒInceptionæ¨¡å—ä½¿ç”¨äº†å›¾(b)ä¸­çš„è®¾è®¡æ–¹å¼ï¼Œåœ¨æ¯ä¸ª3x3å’Œ5x5çš„å·ç§¯å±‚ä¹‹å‰ï¼Œå¢åŠ 1x1çš„å·ç§¯å±‚æ¥æ§åˆ¶è¾“å‡ºé€šé“æ•°ï¼›åœ¨æœ€å¤§æ± åŒ–å±‚åé¢å¢åŠ 1x1å·ç§¯å±‚å‡å°è¾“å‡ºé€šé“æ•°ã€‚åŸºäºè¿™ä¸€è®¾è®¡æ€æƒ³ï¼Œå½¢æˆäº†ä¸Šå›¾(b)ä¸­æ‰€ç¤ºçš„ç»“æ„ã€‚ä¸‹é¢è¿™æ®µç¨‹åºæ˜¯Inceptionå—çš„å…·ä½“å®ç°æ–¹å¼ï¼Œå¯ä»¥å¯¹ç…§å›¾(b)å’Œä»£ç ä¸€èµ·é˜…è¯»ã€‚</p><hr><p><strong>æç¤ºï¼š</strong></p><p>å¯èƒ½æœ‰è¯»è€…ä¼šé—®ï¼Œç»è¿‡3x3çš„æœ€å¤§æ± åŒ–ä¹‹åå›¾åƒå°ºå¯¸ä¸ä¼šå‡å°å—ï¼Œä¸ºä»€ä¹ˆè¿˜èƒ½è·Ÿå¦å¤–3ä¸ªå·ç§¯è¾“å‡ºçš„ç‰¹å¾å›¾è¿›è¡Œæ‹¼æ¥ï¼Ÿè¿™æ˜¯å› ä¸ºæ± åŒ–æ“ä½œå¯ä»¥æŒ‡å®šçª—å£å¤§å°$k_h &#x3D; k_w &#x3D; 3$ï¼Œstride&#x3D;1å’Œpadding&#x3D;1ï¼Œè¾“å‡ºç‰¹å¾å›¾å°ºå¯¸å¯ä»¥ä¿æŒä¸å˜ã€‚</p><hr><p>Inceptionæ¨¡å—çš„å…·ä½“å®ç°å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GoogLeNetæ¨¡å‹ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D, MaxPool2D, AdaptiveAvgPool2D, Linear</span><br><span class="line"><span class="comment">## ç»„ç½‘</span></span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰Inceptionå—</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Inception</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, c0, c1, c2, c3, c4, **kwargs</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        Inceptionæ¨¡å—çš„å®ç°ä»£ç ï¼Œ</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        c1,å›¾(b)ä¸­ç¬¬ä¸€æ¡æ”¯è·¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯æ•´æ•°</span></span><br><span class="line"><span class="string">        c2,å›¾(b)ä¸­ç¬¬äºŒæ¡æ”¯è·¯å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯tupleæˆ–list, </span></span><br><span class="line"><span class="string">               å…¶ä¸­c2[0]æ˜¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œc2[1]æ˜¯3x3</span></span><br><span class="line"><span class="string">        c3,å›¾(b)ä¸­ç¬¬ä¸‰æ¡æ”¯è·¯å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯tupleæˆ–list, </span></span><br><span class="line"><span class="string">               å…¶ä¸­c3[0]æ˜¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œc3[1]æ˜¯3x3</span></span><br><span class="line"><span class="string">        c4,å›¾(b)ä¸­ç¬¬ä¸€æ¡æ”¯è·¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯æ•´æ•°</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">super</span>(Inception, self).__init__()</span><br><span class="line">        <span class="comment"># ä¾æ¬¡åˆ›å»ºInceptionå—æ¯æ¡æ”¯è·¯ä¸Šä½¿ç”¨åˆ°çš„æ“ä½œ</span></span><br><span class="line">        self.p1_1 = Conv2D(in_channels=c0,out_channels=c1, kernel_size=<span class="number">1</span>)</span><br><span class="line">        self.p2_1 = Conv2D(in_channels=c0,out_channels=c2[<span class="number">0</span>], kernel_size=<span class="number">1</span>)</span><br><span class="line">        self.p2_2 = Conv2D(in_channels=c2[<span class="number">0</span>],out_channels=c2[<span class="number">1</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.p3_1 = Conv2D(in_channels=c0,out_channels=c3[<span class="number">0</span>], kernel_size=<span class="number">1</span>)</span><br><span class="line">        self.p3_2 = Conv2D(in_channels=c3[<span class="number">0</span>],out_channels=c3[<span class="number">1</span>], kernel_size=<span class="number">5</span>, padding=<span class="number">2</span>)</span><br><span class="line">        self.p4_1 = MaxPool2D(kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.p4_2 = Conv2D(in_channels=c0,out_channels=c4, kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment"># æ”¯è·¯1åªåŒ…å«ä¸€ä¸ª1x1å·ç§¯</span></span><br><span class="line">        p1 = F.relu(self.p1_1(x))</span><br><span class="line">        <span class="comment"># æ”¯è·¯2åŒ…å« 1x1å·ç§¯ + 3x3å·ç§¯</span></span><br><span class="line">        p2 = F.relu(self.p2_2(F.relu(self.p2_1(x))))</span><br><span class="line">        <span class="comment"># æ”¯è·¯3åŒ…å« 1x1å·ç§¯ + 5x5å·ç§¯</span></span><br><span class="line">        p3 = F.relu(self.p3_2(F.relu(self.p3_1(x))))</span><br><span class="line">        <span class="comment"># æ”¯è·¯4åŒ…å« æœ€å¤§æ± åŒ–å’Œ1x1å·ç§¯</span></span><br><span class="line">        p4 = F.relu(self.p4_2(self.p4_1(x)))</span><br><span class="line">        <span class="comment"># å°†æ¯ä¸ªæ”¯è·¯çš„è¾“å‡ºç‰¹å¾å›¾æ‹¼æ¥åœ¨ä¸€èµ·ä½œä¸ºæœ€ç»ˆçš„è¾“å‡ºç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> paddle.concat([p1, p2, p3, p4], axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>GoogLeNetçš„æ¶æ„å¦‚ <strong>å›¾9</strong> æ‰€ç¤ºï¼Œåœ¨ä¸»ä½“å·ç§¯éƒ¨åˆ†ä¸­ä½¿ç”¨5ä¸ªæ¨¡å—ï¼ˆblockï¼‰ï¼Œæ¯ä¸ªæ¨¡å—ä¹‹é—´ä½¿ç”¨æ­¥å¹…ä¸º2çš„3 Ã—3æœ€å¤§æ± åŒ–å±‚æ¥å‡å°è¾“å‡ºé«˜å®½ã€‚</p><ul><li>ç¬¬ä¸€æ¨¡å—ä½¿ç”¨ä¸€ä¸ª64é€šé“çš„7 Ã— 7å·ç§¯å±‚ã€‚</li><li>ç¬¬äºŒæ¨¡å—ä½¿ç”¨2ä¸ªå·ç§¯å±‚:é¦–å…ˆæ˜¯64é€šé“çš„1 Ã— 1å·ç§¯å±‚ï¼Œç„¶åæ˜¯å°†é€šé“å¢å¤§3å€çš„3 Ã— 3å·ç§¯å±‚ã€‚</li><li>ç¬¬ä¸‰æ¨¡å—ä¸²è”2ä¸ªå®Œæ•´çš„Inceptionå—ã€‚</li><li>ç¬¬å››æ¨¡å—ä¸²è”äº†5ä¸ªInceptionå—ã€‚</li><li>ç¬¬äº”æ¨¡å—ä¸²è”äº†2 ä¸ªInceptionå—ã€‚</li><li>ç¬¬äº”æ¨¡å—çš„åé¢ç´§è·Ÿè¾“å‡ºå±‚ï¼Œä½¿ç”¨å…¨å±€å¹³å‡æ± åŒ–å±‚æ¥å°†æ¯ä¸ªé€šé“çš„é«˜å’Œå®½å˜æˆ1ï¼Œæœ€åæ¥ä¸Šä¸€ä¸ªè¾“å‡ºä¸ªæ•°ä¸ºæ ‡ç­¾ç±»åˆ«æ•°çš„å…¨è¿æ¥å±‚ã€‚</li></ul><hr><blockquote><p>è¯´æ˜ï¼š<br>åœ¨åŸä½œè€…çš„è®ºæ–‡ä¸­æ·»åŠ äº†å›¾ä¸­æ‰€ç¤ºçš„softmax1å’Œsoftmax2ä¸¤ä¸ªè¾…åŠ©åˆ†ç±»å™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®­ç»ƒæ—¶å°†ä¸‰ä¸ªåˆ†ç±»å™¨çš„æŸå¤±å‡½æ•°è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œä»¥ç¼“è§£æ¢¯åº¦æ¶ˆå¤±ç°è±¡ã€‚è¿™é‡Œçš„ç¨‹åºä½œäº†ç®€åŒ–ï¼Œæ²¡æœ‰åŠ å…¥è¾…åŠ©åˆ†ç±»å™¨ã€‚</p></blockquote><hr><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/9d0794b330934bc9be72cba9f056d62eb77d3ba6c2ac450fae64cf86d86f2e04" width = "800"></center><center><br>å›¾9ï¼šGoogLeNetæ¨¡å‹ç½‘ç»œç»“æ„ç¤ºæ„å›¾</br></center><p><br></br></p><p>GoogLeNetçš„å…·ä½“å®ç°å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GoogLeNetæ¨¡å‹ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D, MaxPool2D, AdaptiveAvgPool2D, Linear</span><br><span class="line"><span class="comment">## ç»„ç½‘</span></span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰Inceptionå—</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Inception</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, c0, c1, c2, c3, c4, **kwargs</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        Inceptionæ¨¡å—çš„å®ç°ä»£ç ï¼Œ</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        c1,å›¾(b)ä¸­ç¬¬ä¸€æ¡æ”¯è·¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯æ•´æ•°</span></span><br><span class="line"><span class="string">        c2,å›¾(b)ä¸­ç¬¬äºŒæ¡æ”¯è·¯å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯tupleæˆ–list, </span></span><br><span class="line"><span class="string">               å…¶ä¸­c2[0]æ˜¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œc2[1]æ˜¯3x3</span></span><br><span class="line"><span class="string">        c3,å›¾(b)ä¸­ç¬¬ä¸‰æ¡æ”¯è·¯å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯tupleæˆ–list, </span></span><br><span class="line"><span class="string">               å…¶ä¸­c3[0]æ˜¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œc3[1]æ˜¯3x3</span></span><br><span class="line"><span class="string">        c4,å›¾(b)ä¸­ç¬¬ä¸€æ¡æ”¯è·¯1x1å·ç§¯çš„è¾“å‡ºé€šé“æ•°ï¼Œæ•°æ®ç±»å‹æ˜¯æ•´æ•°</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">super</span>(Inception, self).__init__()</span><br><span class="line">        <span class="comment"># ä¾æ¬¡åˆ›å»ºInceptionå—æ¯æ¡æ”¯è·¯ä¸Šä½¿ç”¨åˆ°çš„æ“ä½œ</span></span><br><span class="line">        self.p1_1 = Conv2D(in_channels=c0,out_channels=c1, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.p2_1 = Conv2D(in_channels=c0,out_channels=c2[<span class="number">0</span>], kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.p2_2 = Conv2D(in_channels=c2[<span class="number">0</span>],out_channels=c2[<span class="number">1</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.p3_1 = Conv2D(in_channels=c0,out_channels=c3[<span class="number">0</span>], kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.p3_2 = Conv2D(in_channels=c3[<span class="number">0</span>],out_channels=c3[<span class="number">1</span>], kernel_size=<span class="number">5</span>, padding=<span class="number">2</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.p4_1 = MaxPool2D(kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.p4_2 = Conv2D(in_channels=c0,out_channels=c4, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ–°åŠ ä¸€å±‚batchnormç¨³å®šæ”¶æ•›ã€æ‰¹é‡å½’ä¸€åŒ–å±‚ã€‘</span></span><br><span class="line">        self.batchnorm = paddle.nn.BatchNorm2D(c1+c2[<span class="number">1</span>]+c3[<span class="number">1</span>]+c4)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment"># æ”¯è·¯1åªåŒ…å«ä¸€ä¸ª1x1å·ç§¯</span></span><br><span class="line">        p1 = F.relu(self.p1_1(x))</span><br><span class="line">        <span class="comment"># æ”¯è·¯2åŒ…å« 1x1å·ç§¯ + 3x3å·ç§¯</span></span><br><span class="line">        p2 = F.relu(self.p2_2(F.relu(self.p2_1(x))))</span><br><span class="line">        <span class="comment"># æ”¯è·¯3åŒ…å« 1x1å·ç§¯ + 5x5å·ç§¯</span></span><br><span class="line">        p3 = F.relu(self.p3_2(F.relu(self.p3_1(x))))</span><br><span class="line">        <span class="comment"># æ”¯è·¯4åŒ…å« æœ€å¤§æ± åŒ–å’Œ1x1å·ç§¯</span></span><br><span class="line">        p4 = F.relu(self.p4_2(self.p4_1(x)))</span><br><span class="line">        <span class="comment"># å°†æ¯ä¸ªæ”¯è·¯çš„è¾“å‡ºç‰¹å¾å›¾æ‹¼æ¥åœ¨ä¸€èµ·ä½œä¸ºæœ€ç»ˆçš„è¾“å‡ºç»“æœ</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> self.batchnorm(paddle.concat([p1, p2, p3, p4], axis=<span class="number">1</span>))</span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GoogLeNet</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(GoogLeNet, self).__init__()</span><br><span class="line">        <span class="comment"># GoogLeNetåŒ…å«äº”ä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åé¢ç´§è·Ÿä¸€ä¸ªæ± åŒ–å±‚</span></span><br><span class="line">        <span class="comment"># ç¬¬ä¸€ä¸ªæ¨¡å—åŒ…å«1ä¸ªå·ç§¯å±‚</span></span><br><span class="line">        self.conv1 = Conv2D(in_channels=<span class="number">3</span>,out_channels=<span class="number">64</span>, kernel_size=<span class="number">7</span>, padding=<span class="number">3</span>, stride=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 3x3æœ€å¤§æ± åŒ–</span></span><br><span class="line">        self.pool1 = MaxPool2D(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># ç¬¬äºŒä¸ªæ¨¡å—åŒ…å«2ä¸ªå·ç§¯å±‚</span></span><br><span class="line">        self.conv2_1 = Conv2D(in_channels=<span class="number">64</span>,out_channels=<span class="number">64</span>, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        self.conv2_2 = Conv2D(in_channels=<span class="number">64</span>,out_channels=<span class="number">192</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 3x3æœ€å¤§æ± åŒ–</span></span><br><span class="line">        self.pool2 = MaxPool2D(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># ç¬¬ä¸‰ä¸ªæ¨¡å—åŒ…å«2ä¸ªInceptionå—</span></span><br><span class="line">        self.block3_1 = Inception(<span class="number">192</span>, <span class="number">64</span>, (<span class="number">96</span>, <span class="number">128</span>), (<span class="number">16</span>, <span class="number">32</span>), <span class="number">32</span>)</span><br><span class="line">        self.block3_2 = Inception(<span class="number">256</span>, <span class="number">128</span>, (<span class="number">128</span>, <span class="number">192</span>), (<span class="number">32</span>, <span class="number">96</span>), <span class="number">64</span>)</span><br><span class="line">        <span class="comment"># 3x3æœ€å¤§æ± åŒ–</span></span><br><span class="line">        self.pool3 = MaxPool2D(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># ç¬¬å››ä¸ªæ¨¡å—åŒ…å«5ä¸ªInceptionå—</span></span><br><span class="line">        self.block4_1 = Inception(<span class="number">480</span>, <span class="number">192</span>, (<span class="number">96</span>, <span class="number">208</span>), (<span class="number">16</span>, <span class="number">48</span>), <span class="number">64</span>)</span><br><span class="line">        self.block4_2 = Inception(<span class="number">512</span>, <span class="number">160</span>, (<span class="number">112</span>, <span class="number">224</span>), (<span class="number">24</span>, <span class="number">64</span>), <span class="number">64</span>)</span><br><span class="line">        self.block4_3 = Inception(<span class="number">512</span>, <span class="number">128</span>, (<span class="number">128</span>, <span class="number">256</span>), (<span class="number">24</span>, <span class="number">64</span>), <span class="number">64</span>)</span><br><span class="line">        self.block4_4 = Inception(<span class="number">512</span>, <span class="number">112</span>, (<span class="number">144</span>, <span class="number">288</span>), (<span class="number">32</span>, <span class="number">64</span>), <span class="number">64</span>)</span><br><span class="line">        self.block4_5 = Inception(<span class="number">528</span>, <span class="number">256</span>, (<span class="number">160</span>, <span class="number">320</span>), (<span class="number">32</span>, <span class="number">128</span>), <span class="number">128</span>)</span><br><span class="line">        <span class="comment"># 3x3æœ€å¤§æ± åŒ–</span></span><br><span class="line">        self.pool4 = MaxPool2D(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># ç¬¬äº”ä¸ªæ¨¡å—åŒ…å«2ä¸ªInceptionå—</span></span><br><span class="line">        self.block5_1 = Inception(<span class="number">832</span>, <span class="number">256</span>, (<span class="number">160</span>, <span class="number">320</span>), (<span class="number">32</span>, <span class="number">128</span>), <span class="number">128</span>)</span><br><span class="line">        self.block5_2 = Inception(<span class="number">832</span>, <span class="number">384</span>, (<span class="number">192</span>, <span class="number">384</span>), (<span class="number">48</span>, <span class="number">128</span>), <span class="number">128</span>)</span><br><span class="line">        <span class="comment"># å…¨å±€æ± åŒ–ï¼Œç”¨çš„æ˜¯global_poolingï¼Œä¸éœ€è¦è®¾ç½®pool_stride</span></span><br><span class="line">        self.pool5 = AdaptiveAvgPool2D(output_size=<span class="number">1</span>)</span><br><span class="line">        self.fc = Linear(in_features=<span class="number">1024</span>, out_features=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.pool1(F.relu(self.conv1(x)))</span><br><span class="line">        x = self.pool2(F.relu(self.conv2_2(F.relu(self.conv2_1(x)))))</span><br><span class="line">        x = self.pool3(self.block3_2(self.block3_1(x)))</span><br><span class="line">        x = self.block4_3(self.block4_2(self.block4_1(x)))</span><br><span class="line">        x = self.pool4(self.block4_5(self.block4_4(x)))</span><br><span class="line">        x = self.pool5(self.block5_2(self.block5_1(x)))</span><br><span class="line">        x = paddle.reshape(x, [x.shape[<span class="number">0</span>], -<span class="number">1</span>])</span><br><span class="line">        x = self.fc(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = GoogLeNet()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(model.parameters()))</span><br><span class="line">opt = paddle.optimizer.Momentum(learning_rate=<span class="number">0.001</span>, </span><br><span class="line">                                momentum=<span class="number">0.9</span>, </span><br><span class="line">                                parameters=model.parameters(), </span><br><span class="line">                                weight_decay=<span class="number">0.001</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">iters_G, train_losses_G = train_pm(model, opt)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”»å‡ºè®­ç»ƒè¿‡ç¨‹ä¸­Lossçš„å˜åŒ–æ›²çº¿</span></span><br><span class="line">plt.figure()</span><br><span class="line">plt.title(<span class="string">&quot;GoogLeNet-train loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;iter&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.plot(iters_G, train_losses_G, color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;train loss&#x27;</span>)</span><br><span class="line">plt.grid()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥å‘ç°ï¼Œä½¿ç”¨GoogLeNetåœ¨çœ¼ç–¾ç­›æŸ¥æ•°æ®é›†iChallenge-PMä¸Šï¼Œlossèƒ½æœ‰æ•ˆçš„ä¸‹é™ã€‚</p><h1 id="äº”ã€ResNet"><a href="#äº”ã€ResNet" class="headerlink" title="äº”ã€ResNet"></a>äº”ã€ResNet</h1><p>ResNetæ˜¯2015å¹´ImageNetæ¯”èµ›çš„å† å†›ï¼Œå°†è¯†åˆ«é”™è¯¯ç‡é™ä½åˆ°äº†3.6%ï¼Œè¿™ä¸ªç»“æœç”šè‡³è¶…å‡ºäº†æ­£å¸¸äººçœ¼è¯†åˆ«çš„ç²¾åº¦ã€‚</p><p>é€šè¿‡å‰é¢å‡ ä¸ªç»å…¸æ¨¡å‹å­¦ä¹ ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°éšç€æ·±åº¦å­¦ä¹ çš„ä¸æ–­å‘å±•ï¼Œæ¨¡å‹çš„å±‚æ•°è¶Šæ¥è¶Šå¤šï¼Œç½‘ç»œç»“æ„ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚é‚£ä¹ˆæ˜¯å¦åŠ æ·±ç½‘ç»œç»“æ„ï¼Œå°±ä¸€å®šä¼šå¾—åˆ°æ›´å¥½çš„æ•ˆæœå‘¢ï¼Ÿä»ç†è®ºä¸Šæ¥è¯´ï¼Œå‡è®¾æ–°å¢åŠ çš„å±‚éƒ½æ˜¯æ’ç­‰æ˜ å°„ï¼Œåªè¦åŸæœ‰çš„å±‚å­¦å‡ºè·ŸåŸæ¨¡å‹ä¸€æ ·çš„å‚æ•°ï¼Œé‚£ä¹ˆæ·±æ¨¡å‹ç»“æ„å°±èƒ½è¾¾åˆ°åŸæ¨¡å‹ç»“æ„çš„æ•ˆæœã€‚æ¢å¥è¯è¯´ï¼ŒåŸæ¨¡å‹çš„è§£åªæ˜¯æ–°æ¨¡å‹çš„è§£çš„å­ç©ºé—´ï¼Œåœ¨æ–°æ¨¡å‹è§£çš„ç©ºé—´é‡Œåº”è¯¥èƒ½æ‰¾åˆ°æ¯”åŸæ¨¡å‹è§£å¯¹åº”çš„å­ç©ºé—´æ›´å¥½çš„ç»“æœã€‚ä½†æ˜¯å®è·µè¡¨æ˜ï¼Œå¢åŠ ç½‘ç»œçš„å±‚æ•°ä¹‹åï¼Œè®­ç»ƒè¯¯å·®å¾€å¾€ä¸é™åå‡ã€‚</p><p>Kaiming Heç­‰äººæå‡ºäº†æ®‹å·®ç½‘ç»œResNetæ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå…¶åŸºæœ¬æ€æƒ³å¦‚ <strong>å›¾10</strong>æ‰€ç¤ºã€‚</p><ul><li>å›¾10(a)ï¼šè¡¨ç¤ºå¢åŠ ç½‘ç»œçš„æ—¶å€™ï¼Œå°†$x$æ˜ å°„æˆ$y&#x3D;F(x)$è¾“å‡ºã€‚</li><li>å›¾10(b)ï¼šå¯¹å›¾10(a)ä½œäº†æ”¹è¿›ï¼Œè¾“å‡º$y&#x3D;F(x) + x$ã€‚è¿™æ—¶ä¸æ˜¯ç›´æ¥å­¦ä¹ è¾“å‡ºç‰¹å¾$y$çš„è¡¨ç¤ºï¼Œè€Œæ˜¯å­¦ä¹ $y-x$ã€‚<ul><li>å¦‚æœæƒ³å­¦ä¹ å‡ºåŸæ¨¡å‹çš„è¡¨ç¤ºï¼Œåªéœ€å°†$F(x)$çš„å‚æ•°å…¨éƒ¨è®¾ç½®ä¸º0ï¼Œåˆ™$y&#x3D;x$æ˜¯æ’ç­‰æ˜ å°„ã€‚</li><li>$F(x) &#x3D; y - x$ä¹Ÿå«åšæ®‹å·®é¡¹ï¼Œå¦‚æœ$x\rightarrow y$çš„æ˜ å°„æ¥è¿‘æ’ç­‰æ˜ å°„ï¼Œå›¾10(b)ä¸­é€šè¿‡å­¦ä¹ æ®‹å·®é¡¹ä¹Ÿæ¯”å›¾10(a)å­¦ä¹ å®Œæ•´æ˜ å°„å½¢å¼æ›´åŠ å®¹æ˜“ã€‚</li></ul></li></ul><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e10f22f054704daabf4261ab46719629a36749631db74eb0a368499de3e5d3d6" width = "500"></center><center><br>å›¾10ï¼šæ®‹å·®å—è®¾è®¡æ€æƒ³</br></center><p><br></br></p><p>å›¾10(b)çš„ç»“æ„æ˜¯æ®‹å·®ç½‘ç»œçš„åŸºç¡€ï¼Œè¿™ç§ç»“æ„ä¹Ÿå«åš<strong>æ®‹å·®å—ï¼ˆResidual blockï¼‰</strong>ã€‚è¾“å…¥$x$é€šè¿‡è·¨å±‚è¿æ¥ï¼Œèƒ½æ›´å¿«çš„å‘å‰ä¼ æ’­æ•°æ®ï¼Œæˆ–è€…å‘åä¼ æ’­æ¢¯åº¦ã€‚é€šä¿—çš„æ¯”å–»ï¼Œåœ¨ç«çƒ­çš„ç”µè§†èŠ‚ç›®ã€Šç‹ç‰Œå¯¹ç‹ç‰Œã€‹ä¸Šæœ‰ä¸€ä¸ªâ€œä¼ å£°ç­’â€çš„æ¸¸æˆï¼Œæ’åœ¨é˜Ÿé¦–çš„å˜‰å®¾æŠŠçœ‹åˆ°çš„å½±è§†ç‰‡æ®µè¡¨æ¼”ç»™åé¢ä¸€ä¸ªå˜‰å®¾çœ‹ï¼Œç»è¿‡å››äº”ä¸ªå˜‰å®¾åï¼Œæœ€åä¸€ä¸ªå˜‰å®¾å¦‚æœèƒ½è¡¨æ¼”å‡ºæ›´å¤šåŸå‰§çš„å†…å®¹ï¼Œå°±èƒ½å–å¾—é«˜åˆ†ã€‚æˆ‘ä»¬å¸¸å¸¸ä¼šå‘ç°åˆšå¼€å§‹çš„å˜‰å®¾å¾€å¾€è¡¨æ¼”å‡ºæœ€å¤šçš„ä¿¡æ¯ï¼ˆç±»ä¼¼äºLossï¼‰ï¼Œè€Œéšç€è¡¨æ¼”çš„ä¼ é€’ï¼Œæœ‰æ•ˆçš„è¡¨æ¼”ä¿¡æ¯è¶Šæ¥è¶Šå°‘ï¼ˆç±»ä¼¼äºæ¢¯åº¦å¼¥æ•£ï¼‰ã€‚å¦‚æœæ¯ä¸ªå˜‰å®¾éƒ½èƒ½çœ‹åˆ°åŸå§‹çš„å½±è§†ç‰‡æ®µï¼Œé‚£ä¹ˆç›¸ä¿¡ä¼ å£°ç­’çš„æ•ˆæœä¼šå¥½å¾ˆå¤šã€‚ç±»ä¼¼çš„ï¼Œç”±äºResNetæ¯å±‚éƒ½å­˜åœ¨ç›´è¿çš„æ—è·¯ï¼Œç›¸å½“äºæ¯ä¸€å±‚éƒ½å’Œæœ€ç»ˆçš„æŸå¤±æœ‰â€œç›´æ¥å¯¹è¯â€çš„æœºä¼šï¼Œè‡ªç„¶å¯ä»¥æ›´å¥½çš„è§£å†³æ¢¯åº¦å¼¥æ•£çš„é—®é¢˜ã€‚</p><p>æ®‹å·®å—çš„å…·ä½“è®¾è®¡æ–¹æ¡ˆå¦‚ <strong>å›¾11</strong> æ‰€ç¤ºï¼Œè¿™ç§è®¾è®¡æ–¹æ¡ˆä¹Ÿå¸¸ç§°ä½œç“¶é¢ˆç»“æ„ï¼ˆBottleNeckï¼‰ã€‚1*1çš„å·ç§¯æ ¸å¯ä»¥éå¸¸æ–¹ä¾¿çš„è°ƒæ•´ä¸­é—´å±‚çš„é€šé“æ•°ï¼Œåœ¨è¿›å…¥3*3çš„å·ç§¯å±‚ä¹‹å‰å‡å°‘é€šé“æ•°ï¼ˆ256-&gt;64ï¼‰ï¼Œç»è¿‡è¯¥å·ç§¯å±‚åå†æ¢å¤é€šé“æ•°(64-&gt;256)ï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘ç½‘ç»œçš„å‚æ•°é‡ã€‚è¿™ä¸ªç»“æ„ï¼ˆ256-&gt;64-&gt;256ï¼‰åƒä¸€ä¸ªä¸­é—´ç»†ï¼Œä¸¤å¤´ç²—çš„ç“¶é¢ˆï¼Œæ‰€ä»¥è¢«ç§°ä¸ºâ€œBottleNeckâ€ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/322b26358d43401ba81546dd134a310cfb11ecafb3314aab88b5885ff642870b" width = "500"></center><center><br>å›¾11ï¼šæ®‹å·®å—ç»“æ„ç¤ºæ„å›¾</br></center><p><br></br></p><p>ä¸‹å›¾è¡¨ç¤ºå‡ºäº†ResNet-50çš„ç»“æ„ï¼Œä¸€å…±åŒ…å«49å±‚å·ç§¯å’Œ1å±‚å…¨è¿æ¥ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºResNet-50ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/8f42b3b5b7b34e45847a9c61580f1f8239a80ca6fa67448e8baeeb0209a2d556" width = "1000"></center><center><br>å›¾12ï¼šResNet-50æ¨¡å‹ç½‘ç»œç»“æ„ç¤ºæ„å›¾</br></center><p><br></br></p><p>ResNet-50çš„å…·ä½“å®ç°å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><hr><p><strong>è¯´æ˜</strong> ï¼š</p><p>å¸¦æ³„éœ²ä¿®æ­£çº¿æ€§å•å…ƒï¼ˆLeaky ReLUï¼‰å‡½æ•°æ˜¯ç»å…¸ï¼ˆä»¥åŠå¹¿æ³›ä½¿ç”¨çš„ï¼‰çš„ReLuæ¿€æ´»å‡½æ•°çš„å˜ä½“ï¼Œè¯¥å‡½æ•°è¾“å‡ºå¯¹è´Ÿå€¼è¾“å…¥æœ‰å¾ˆå°çš„å¡åº¦ã€‚ç”±äºå¯¼æ•°æ€»æ˜¯ä¸ä¸ºé›¶ï¼Œè¿™èƒ½å‡å°‘é™é»˜ç¥ç»å…ƒçš„å‡ºç°ï¼Œå…è®¸åŸºäºæ¢¯åº¦çš„å­¦ä¹ ï¼ˆè™½ç„¶ä¼šå¾ˆæ…¢ï¼‰ï¼Œè§£å†³äº†Reluå‡½æ•°è¿›å…¥è´ŸåŒºé—´åï¼Œå¯¼è‡´ç¥ç»å…ƒä¸å­¦ä¹ çš„é—®é¢˜ã€‚</p><p><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d75c6e01a5db456a990bc6060647b8a3a9ff83e3797a45469aca303485de1bcb" width = "500"></center><center><br>å›¾13ï¼šLeaky ReLU</br></center><p><br></br></p><p><a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/functional/leaky_relu_cn.html#leaky-relu">paddle.nn.functional.leaky_relu(x, negative_slope&#x3D;0.01, name&#x3D;None)</a></p><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ResNetæ¨¡å‹ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> paddle.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;-------å®šä¹‰å·ç§¯æ‰¹å½’ä¸€åŒ–å—-------&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConvBNLayer</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 num_channels,</span></span><br><span class="line"><span class="params">                 num_filters,</span></span><br><span class="line"><span class="params">                 filter_size,</span></span><br><span class="line"><span class="params">                 stride=<span class="number">1</span>,</span></span><br><span class="line"><span class="params">                 groups=<span class="number">1</span>,</span></span><br><span class="line"><span class="params">                 act=<span class="literal">None</span></span>):</span><br><span class="line">       </span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        num_channels, å·ç§¯å±‚çš„è¾“å…¥é€šé“æ•°</span></span><br><span class="line"><span class="string">        num_filters, å·ç§¯å±‚çš„è¾“å‡ºé€šé“æ•°</span></span><br><span class="line"><span class="string">        filter_size, å·ç§¯æ ¸å¤§å°</span></span><br><span class="line"><span class="string">        stride, å·ç§¯å±‚çš„æ­¥å¹…</span></span><br><span class="line"><span class="string">        groups, å·ç§¯æ ¸ç»„æ•°ï¼Œé»˜è®¤groups=1ä¸ä½¿ç”¨åˆ†ç»„å·ç§¯</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">super</span>(ConvBNLayer, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ›å»ºå·ç§¯å±‚</span></span><br><span class="line">        self._conv = nn.Conv2D(</span><br><span class="line">            in_channels=num_channels,</span><br><span class="line">            out_channels=num_filters,</span><br><span class="line">            kernel_size=filter_size,</span><br><span class="line">            stride=stride,</span><br><span class="line">            padding=(filter_size - <span class="number">1</span>) // <span class="number">2</span>,</span><br><span class="line">            groups=groups,</span><br><span class="line">            bias_attr=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ›å»ºBatchNormå±‚</span></span><br><span class="line">        <span class="comment"># ResNetä¸­ä½¿ç”¨äº†BatchNormå±‚ï¼Œåœ¨å·ç§¯å±‚çš„åé¢åŠ ä¸ŠBatchNormä»¥æå‡æ•°å€¼ç¨³å®šæ€§</span></span><br><span class="line">        self._batch_norm = paddle.nn.BatchNorm2D(num_filters)</span><br><span class="line">        </span><br><span class="line">        self.act = act</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        y = self._conv(inputs)</span><br><span class="line">        y = self._batch_norm(y)</span><br><span class="line">        <span class="keyword">if</span> self.act == <span class="string">&#x27;leaky&#x27;</span>:</span><br><span class="line">            y = F.leaky_relu(x=y, negative_slope=<span class="number">0.1</span>)</span><br><span class="line">        <span class="keyword">elif</span> self.act == <span class="string">&#x27;relu&#x27;</span>:</span><br><span class="line">            y = F.relu(x=y)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;--------å®šä¹‰æ®‹å·®å—---------&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># æ¯ä¸ªæ®‹å·®å—ä¼šå¯¹è¾“å…¥å›¾ç‰‡åšä¸‰æ¬¡å·ç§¯ï¼Œç„¶åè·Ÿè¾“å…¥å›¾ç‰‡è¿›è¡ŒçŸ­æ¥</span></span><br><span class="line"><span class="comment"># å¦‚æœæ®‹å·®å—ä¸­ç¬¬ä¸‰æ¬¡å·ç§¯è¾“å‡ºç‰¹å¾å›¾çš„å½¢çŠ¶ä¸è¾“å…¥ä¸ä¸€è‡´ï¼Œåˆ™å¯¹è¾“å…¥å›¾ç‰‡åš1x1å·ç§¯ï¼Œå°†å…¶è¾“å‡ºå½¢çŠ¶è°ƒæ•´æˆä¸€è‡´</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BottleneckBlock</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                 num_channels,</span></span><br><span class="line"><span class="params">                 num_filters,</span></span><br><span class="line"><span class="params">                 stride,</span></span><br><span class="line"><span class="params">                 shortcut=<span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(BottleneckBlock, self).__init__()</span><br><span class="line">        <span class="comment"># åˆ›å»ºç¬¬ä¸€ä¸ªå·ç§¯å±‚ 1x1</span></span><br><span class="line">        self.conv0 = ConvBNLayer(</span><br><span class="line">            num_channels=num_channels,</span><br><span class="line">            num_filters=num_filters,</span><br><span class="line">            filter_size=<span class="number">1</span>,</span><br><span class="line">            act=<span class="string">&#x27;relu&#x27;</span>)</span><br><span class="line">        <span class="comment"># åˆ›å»ºç¬¬äºŒä¸ªå·ç§¯å±‚ 3x3</span></span><br><span class="line">        self.conv1 = ConvBNLayer(</span><br><span class="line">            num_channels=num_filters,</span><br><span class="line">            num_filters=num_filters,</span><br><span class="line">            filter_size=<span class="number">3</span>,</span><br><span class="line">            stride=stride,</span><br><span class="line">            act=<span class="string">&#x27;relu&#x27;</span>)</span><br><span class="line">        <span class="comment"># åˆ›å»ºç¬¬ä¸‰ä¸ªå·ç§¯ 1x1ï¼Œä½†è¾“å‡ºé€šé“æ•°ä¹˜ä»¥4</span></span><br><span class="line">        self.conv2 = ConvBNLayer(</span><br><span class="line">            num_channels=num_filters,</span><br><span class="line">            num_filters=num_filters * <span class="number">4</span>,</span><br><span class="line">            filter_size=<span class="number">1</span>,</span><br><span class="line">            act=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœconv2çš„è¾“å‡ºè·Ÿæ­¤æ®‹å·®å—çš„è¾“å…¥æ•°æ®å½¢çŠ¶ä¸€è‡´ï¼Œåˆ™shortcut=True</span></span><br><span class="line">        <span class="comment"># å¦åˆ™shortcut = Falseï¼Œæ·»åŠ 1ä¸ª1x1çš„å·ç§¯ä½œç”¨åœ¨è¾“å…¥æ•°æ®ä¸Šï¼Œä½¿å…¶å½¢çŠ¶å˜æˆè·Ÿconv2ä¸€è‡´</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> shortcut:</span><br><span class="line">            self.short = ConvBNLayer(</span><br><span class="line">                num_channels=num_channels,</span><br><span class="line">                num_filters=num_filters * <span class="number">4</span>,</span><br><span class="line">                filter_size=<span class="number">1</span>,</span><br><span class="line">                stride=stride)</span><br><span class="line"></span><br><span class="line">        self.shortcut = shortcut</span><br><span class="line"></span><br><span class="line">        self._num_channels_out = num_filters * <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        y = self.conv0(inputs)</span><br><span class="line">        conv1 = self.conv1(y)</span><br><span class="line">        conv2 = self.conv2(conv1)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœshortcut=Trueï¼Œç›´æ¥å°†inputsè·Ÿconv2çš„è¾“å‡ºç›¸åŠ </span></span><br><span class="line">        <span class="comment"># å¦åˆ™éœ€è¦å¯¹inputsè¿›è¡Œä¸€æ¬¡å·ç§¯ï¼Œå°†å½¢çŠ¶è°ƒæ•´æˆè·Ÿconv2è¾“å‡ºä¸€è‡´</span></span><br><span class="line">        <span class="keyword">if</span> self.shortcut:</span><br><span class="line">            short = inputs</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            short = self.short(inputs)</span><br><span class="line">        y = paddle.add(x=short, y=conv2)</span><br><span class="line">        y = F.relu(y)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;--------å®šä¹‰ResNetæ¨¡å‹--------&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ResNet</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, layers=<span class="number">50</span>, class_dim=<span class="number">1</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        layers, ç½‘ç»œå±‚æ•°ï¼Œå¯ä»¥æ˜¯50, 101æˆ–è€…152</span></span><br><span class="line"><span class="string">        class_dimï¼Œåˆ†ç±»æ ‡ç­¾çš„ç±»åˆ«æ•°</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">super</span>(ResNet, self).__init__()</span><br><span class="line">        self.layers = layers</span><br><span class="line"></span><br><span class="line">        <span class="comment">## æ”¯æŒçš„resnetå±‚æ•°</span></span><br><span class="line">        supported_layers = [<span class="number">18</span>, <span class="number">34</span>, <span class="number">50</span>, <span class="number">101</span>, <span class="number">152</span>]</span><br><span class="line">        <span class="keyword">assert</span> layers <span class="keyword">in</span> supported_layers, \</span><br><span class="line">            <span class="string">&quot;supported layers are &#123;&#125; but input layer is &#123;&#125;&quot;</span>.<span class="built_in">format</span>(supported_layers, layers)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> layers == <span class="number">18</span>:</span><br><span class="line">            <span class="comment">#ResNet18åŒ…å«å¤šä¸ªæ¨¡å—ï¼Œå…¶ä¸­ç¬¬2åˆ°ç¬¬5ä¸ªæ¨¡å—åˆ†åˆ«åŒ…å«2ã€2ã€2ã€2ä¸ªæ®‹å·®å—</span></span><br><span class="line">            depth = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">        <span class="keyword">elif</span> layers == <span class="number">34</span> <span class="keyword">or</span> layers == <span class="number">50</span>:</span><br><span class="line">            <span class="comment">#ResNet34/50åŒ…å«å¤šä¸ªæ¨¡å—ï¼Œå…¶ä¸­ç¬¬2åˆ°ç¬¬5ä¸ªæ¨¡å—åˆ†åˆ«åŒ…å«3ã€4ã€6ã€3ä¸ªæ®‹å·®å—</span></span><br><span class="line">            depth = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">3</span>]</span><br><span class="line">        <span class="keyword">elif</span> layers == <span class="number">101</span>:</span><br><span class="line">            <span class="comment">#ResNet101åŒ…å«å¤šä¸ªæ¨¡å—ï¼Œå…¶ä¸­ç¬¬2åˆ°ç¬¬5ä¸ªæ¨¡å—åˆ†åˆ«åŒ…å«3ã€4ã€23ã€3ä¸ªæ®‹å·®å—</span></span><br><span class="line">            depth = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">23</span>, <span class="number">3</span>]</span><br><span class="line">        <span class="keyword">elif</span> layers == <span class="number">152</span>:</span><br><span class="line">            <span class="comment">#ResNet152åŒ…å«å¤šä¸ªæ¨¡å—ï¼Œå…¶ä¸­ç¬¬2åˆ°ç¬¬5ä¸ªæ¨¡å—åˆ†åˆ«åŒ…å«3ã€8ã€36ã€3ä¸ªæ®‹å·®å—</span></span><br><span class="line">            depth = [<span class="number">3</span>, <span class="number">8</span>, <span class="number">36</span>, <span class="number">3</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ®‹å·®å—ä¸­ä½¿ç”¨åˆ°çš„å·ç§¯çš„è¾“å‡ºé€šé“æ•°</span></span><br><span class="line">        num_filters = [<span class="number">64</span>, <span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ResNetçš„ç¬¬ä¸€ä¸ªæ¨¡å—ï¼ŒåŒ…å«1ä¸ª7x7å·ç§¯ï¼Œåé¢è·Ÿç€1ä¸ªæœ€å¤§æ± åŒ–å±‚</span></span><br><span class="line">        self.conv = ConvBNLayer(</span><br><span class="line">            num_channels=<span class="number">3</span>,</span><br><span class="line">            num_filters=<span class="number">64</span>,</span><br><span class="line">            filter_size=<span class="number">7</span>,</span><br><span class="line">            stride=<span class="number">2</span>,</span><br><span class="line">            act=<span class="string">&#x27;relu&#x27;</span>)</span><br><span class="line">        self.pool2d_max = nn.MaxPool2D(</span><br><span class="line">            kernel_size=<span class="number">3</span>,</span><br><span class="line">            stride=<span class="number">2</span>,</span><br><span class="line">            padding=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ResNetçš„ç¬¬äºŒåˆ°ç¬¬äº”ä¸ªæ¨¡å—c2ã€c3ã€c4ã€c5</span></span><br><span class="line">        self.bottleneck_block_list = []</span><br><span class="line">        num_channels = <span class="number">64</span></span><br><span class="line">        <span class="keyword">for</span> block <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(depth)):</span><br><span class="line">            shortcut = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(depth[block]):</span><br><span class="line">                <span class="comment"># c3ã€c4ã€c5å°†ä¼šåœ¨ç¬¬ä¸€ä¸ªæ®‹å·®å—ä½¿ç”¨stride=2ï¼›å…¶ä½™æ‰€æœ‰æ®‹å·®å—stride=1</span></span><br><span class="line">                <span class="comment"># add_sublayeræ–¹æ³•ï¼šè¿”å›ä¸€ä¸ªç”±æ‰€æœ‰å­å±‚ç»„æˆçš„åˆ—è¡¨</span></span><br><span class="line">                <span class="comment"># å­—ç¬¦ä¸²æ ¼å¼åŒ–: %dæŠŠåé¢å¯¹åº”çš„å€¼ç”¨æ•´æ•°çš„å½¢å¼æ˜¾ç¤º</span></span><br><span class="line">                bottleneck_block = self.add_sublayer(</span><br><span class="line">                    <span class="string">&#x27;bottleneck_block_%d_%d&#x27;</span> % (block, i),</span><br><span class="line">                    BottleneckBlock(</span><br><span class="line">                        num_channels=num_channels,</span><br><span class="line">                        num_filters=num_filters[block],</span><br><span class="line">                        stride=<span class="number">2</span> <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">and</span> block != <span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span>, </span><br><span class="line">                        shortcut=shortcut))</span><br><span class="line">                num_channels = bottleneck_block._num_channels_out</span><br><span class="line">                self.bottleneck_block_list.append(bottleneck_block)</span><br><span class="line">                shortcut = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># åœ¨c5çš„è¾“å‡ºç‰¹å¾å›¾ä¸Šä½¿ç”¨å…¨å±€æ± åŒ–</span></span><br><span class="line">        self.pool2d_avg = paddle.nn.AdaptiveAvgPool2D(output_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># stdvç”¨æ¥ä½œä¸ºå…¨è¿æ¥å±‚éšæœºåˆå§‹åŒ–å‚æ•°çš„æ–¹å·®</span></span><br><span class="line">        <span class="keyword">import</span> math</span><br><span class="line">        stdv = <span class="number">1.0</span> / math.sqrt(<span class="number">2048</span> * <span class="number">1.0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ›å»ºå…¨è¿æ¥å±‚ï¼Œè¾“å‡ºå¤§å°ä¸ºç±»åˆ«æ•°ç›®ï¼Œç»è¿‡æ®‹å·®ç½‘ç»œçš„å·ç§¯å’Œå…¨å±€æ± åŒ–åï¼Œ</span></span><br><span class="line">        <span class="comment"># å·ç§¯ç‰¹å¾çš„ç»´åº¦æ˜¯[B,2048,1,1]ï¼Œæ•…æœ€åä¸€å±‚å…¨è¿æ¥çš„è¾“å…¥ç»´åº¦æ˜¯2048</span></span><br><span class="line">        self.out = nn.Linear(in_features=<span class="number">2048</span>, out_features=class_dim,</span><br><span class="line">                      weight_attr=paddle.ParamAttr(</span><br><span class="line">                          initializer=paddle.nn.initializer.Uniform(-stdv, stdv)))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        y = self.conv(inputs)</span><br><span class="line">        y = self.pool2d_max(y)</span><br><span class="line">        <span class="keyword">for</span> bottleneck_block <span class="keyword">in</span> self.bottleneck_block_list:</span><br><span class="line">            y = bottleneck_block(y)</span><br><span class="line">        y = self.pool2d_avg(y)</span><br><span class="line">        y = paddle.reshape(y, [y.shape[<span class="number">0</span>], -<span class="number">1</span>])</span><br><span class="line">        y = self.out(y)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;bottleneck_block_%d_%d&#x27;</span> % (<span class="number">1.2</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><pre><code>&#39;bottleneck_block_1_1&#39;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = ResNet(layers=<span class="number">18</span>)</span><br><span class="line">model</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨</span></span><br><span class="line">opt = paddle.optimizer.Momentum(learning_rate=<span class="number">0.001</span>, </span><br><span class="line">                                momentum=<span class="number">0.9</span>, </span><br><span class="line">                                parameters=model.parameters(), </span><br><span class="line">                                weight_decay=<span class="number">0.001</span>)</span><br><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">iters_R, train_losses_R = train_pm(model, opt)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥å‘ç°ï¼Œä½¿ç”¨ResNetåœ¨çœ¼ç–¾ç­›æŸ¥æ•°æ®é›†iChallenge-PMä¸Šï¼Œlossèƒ½æœ‰æ•ˆçš„ä¸‹é™ã€‚</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a><strong>å°ç»“</strong></h1><ul><li>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç±»ä½¿ç”¨å·ç§¯å±‚çš„ç½‘ç»œã€‚</li><li>åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬ç»„åˆä½¿ç”¨å·ç§¯å±‚ã€éçº¿æ€§æ¿€æ´»å‡½æ•°å’Œæ± åŒ–å±‚ã€‚</li><li>ä¸ºäº†æ„é€ é«˜æ€§èƒ½çš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬é€šå¸¸å¯¹å·ç§¯å±‚è¿›è¡Œæ’åˆ—ï¼Œé€æ¸é™ä½å…¶è¡¨ç¤ºçš„ç©ºé—´åˆ†è¾¨ç‡ï¼ŒåŒæ—¶å¢åŠ é€šé“æ•°ã€‚</li><li>åœ¨ä¼ ç»Ÿçš„å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå·ç§¯å—ç¼–ç å¾—åˆ°çš„è¡¨å¾åœ¨è¾“å‡ºä¹‹å‰éœ€ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå…¨è¿æ¥å±‚è¿›è¡Œå¤„ç†ã€‚</li><li>LeNetæ˜¯æœ€æ—©å‘å¸ƒçš„å·ç§¯ç¥ç»ç½‘ç»œä¹‹ä¸€ï¼Œå…ˆä½¿ç”¨å·ç§¯å±‚å­¦ä¹ å›¾ç‰‡ç©ºé—´ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨å…¨è¿æ¥å±‚æ¥è½¬æ¢åˆ°ç±»åˆ«ç©ºé—´ã€‚</li><li>AlexNetçš„æ¶æ„ä¸LeNetç›¸ä¼¼ï¼Œä½†ä½¿ç”¨äº†æ›´å¤šçš„å·ç§¯å±‚å’Œæ›´å¤šçš„å‚æ•°æ¥æ‹Ÿåˆå¤§è§„æ¨¡çš„ImageNetæ•°æ®é›†ã€‚</li><li>ä»Šå¤©ï¼ŒAlexNetå·²ç»è¢«æ›´æœ‰æ•ˆçš„æ¶æ„æ‰€è¶…è¶Šï¼Œä½†å®ƒæ˜¯ä»æµ…å±‚ç½‘ç»œåˆ°æ·±å±‚ç½‘ç»œçš„å…³é”®ä¸€æ­¥ã€‚</li><li>å°½ç®¡AlexNetçš„ä»£ç åªæ¯”LeNetå¤šå‡ºå‡ è¡Œï¼Œä½†å­¦æœ¯ç•ŒèŠ±äº†å¾ˆå¤šå¹´æ‰æ¥å—æ·±åº¦å­¦ä¹ è¿™ä¸€æ¦‚å¿µï¼Œå¹¶åº”ç”¨å…¶å‡ºè‰²çš„å®éªŒç»“æœã€‚è¿™ä¹Ÿæ˜¯ç”±äºç¼ºä¹æœ‰æ•ˆçš„è®¡ç®—å·¥å…·ã€‚</li><li>Dropoutã€ReLUå’Œé¢„å¤„ç†æ˜¯æå‡è®¡ç®—æœºè§†è§‰ä»»åŠ¡æ€§èƒ½çš„å…¶ä»–å…³é”®æ­¥éª¤ã€‚</li><li>å—çš„ä½¿ç”¨ä½¿å¾—ç½‘ç»œå®šä¹‰çš„éå¸¸ç®€æ´ã€‚ä½¿ç”¨å—å¯ä»¥æœ‰æ•ˆåœ°è®¾è®¡å¤æ‚çš„ç½‘ç»œã€‚</li><li>æˆ‘ä»¬å‘ç°æ·±å±‚ä¸”çª„çš„å·ç§¯ï¼ˆå³$3 \times 3$ï¼‰æ¯”è¾ƒæµ…å±‚ä¸”å®½çš„å·ç§¯æ›´æœ‰æ•ˆã€‚</li><li>ä¸åŒçš„è¶…å‚æ•°å¯ä»¥å¾—åˆ°ä¸åŒå¤æ‚åº¦çš„å˜ç§ã€‚</li><li>Inceptionå—ç›¸å½“äºä¸€ä¸ªæœ‰4æ¡è·¯å¾„çš„å­ç½‘ç»œã€‚å®ƒé€šè¿‡ä¸åŒçª—å£å½¢çŠ¶ï¼ˆè¶…å‚æ•°ï¼‰çš„å·ç§¯å±‚å’Œæœ€å¤§æ± åŒ–å±‚æ¥å¹¶è¡ŒæŠ½å–ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨$1Ã—1$å·ç§¯å±‚å‡å°‘æ¯åƒç´ çº§åˆ«ä¸Šçš„é€šé“ç»´æ•°ä»è€Œé™ä½æ¨¡å‹å¤æ‚åº¦ï¼Œä»è€Œé™ä½è®¡ç®—å¤æ‚åº¦ã€‚</li><li>GoogLeNetå°†å¤šä¸ªè®¾è®¡ç²¾ç»†çš„Inceptionå—ä¸å…¶ä»–å±‚ï¼ˆå·ç§¯å±‚ã€å…¨è¿æ¥å±‚ï¼‰ä¸²è”èµ·æ¥ã€‚å…¶ä¸­Inceptionå—çš„é€šé“æ•°åˆ†é…ä¹‹æ¯”æ˜¯åœ¨ImageNetæ•°æ®é›†ä¸Šé€šè¿‡å¤§é‡çš„å®éªŒå¾—æ¥çš„ã€‚</li><li>GoogLeNetå’Œå®ƒçš„åç»§è€…ä»¬ä¸€åº¦æ˜¯ImageNetä¸Šæœ€æœ‰æ•ˆçš„æ¨¡å‹ä¹‹ä¸€ï¼šå®ƒä»¥è¾ƒä½çš„è®¡ç®—å¤æ‚åº¦æä¾›äº†ç±»ä¼¼çš„æµ‹è¯•ç²¾åº¦ã€‚</li><li>GoogLeNetä½¿ç”¨äº†9ä¸ªInceptionå—ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªè¾¾åˆ°ä¸Šç™¾å±‚çš„ç½‘ç»œï¼Œä¸”åœ¨åç»­æœ‰äº†ä¸€ç³»åˆ—çš„æ”¹è¿›ã€‚</li><li>åˆ©ç”¨æ®‹å·®å—ï¼ˆresidual blocksï¼‰å¯ä»¥è®­ç»ƒå‡ºä¸€ä¸ªæœ‰æ•ˆçš„æ·±å±‚ç¥ç»ç½‘ç»œï¼šè¾“å…¥å¯ä»¥é€šè¿‡å±‚é—´çš„æ®‹ä½™è¿æ¥æ›´å¿«åœ°å‘å‰ä¼ æ’­ã€‚</li></ul><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h1><p>[1] Yann LeCun, LÃ©on Bottou, Yoshua Bengio, and Patrick Haffner. Gradient-based learn- ing applied to document recognition. Proc. of the IEEE, 86(11):2278â€“2324, 1998 </p><p>[2] Alex Krizhevsky, Ilya Sutskever, and Geoffrey E. Hinton. Imagenet classification with deep convolutional neural networks. In Advances in Neural Information Processing Systems, pages 1097â€“1105, 2012. </p><p>[3] Karen Simonyan and Andrew Zisserman. Very deep convolutional networks for large-scale image recognition. arXiv preprint arXiv:1409.1556, 2014b. </p><p>[4]Christian Szegedy, Wei Liu, Yangqing Jia, Pierre Sermanet, Scott Reed, Dragomir Anguelov, Dumitru Erhan, Vincent Vanhoucke, and Andrew Rabinovich. Going deeper with convolu- tions. In Proc. of the IEEE Conference on Computer Vision and Pattern Recognition, pages 1â€“9, 2015. </p><p>[5] Kaiming He, Xiangyu Zhang, Shaoqing Ren, and Jian Sun. Deep residual learning for im- age recognition. In Proc. of the IEEE Conference on Computer Vision and Pattern Recognition, pages 770â€“778, 2016a. </p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_å·ç§¯åŸºæœ¬æ¦‚å¿µåŠç»å…¸æ¨¡å‹å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 5.1-ä»å…¨è¿æ¥å±‚åˆ°å·ç§¯</title>
      <link href="/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.1-%E4%BB%8E%E5%85%A8%E8%BF%9E%E6%8E%A5%E5%B1%82%E5%88%B0%E5%8D%B7%E7%A7%AF/"/>
      <url>/2023/01/01/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05.1-%E4%BB%8E%E5%85%A8%E8%BF%9E%E6%8E%A5%E5%B1%82%E5%88%B0%E5%8D%B7%E7%A7%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»å…¨è¿æ¥å±‚åˆ°å·ç§¯"><a href="#ä»å…¨è¿æ¥å±‚åˆ°å·ç§¯" class="headerlink" title="ä»å…¨è¿æ¥å±‚åˆ°å·ç§¯"></a><strong>ä»å…¨è¿æ¥å±‚åˆ°å·ç§¯</strong></h1><p>:label:<code>sec_why-conv</code></p><p>å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ul><li>èƒ½å¤Ÿåˆ†æå…¨è¿æ¥å±‚çš„å±€é™ï¼Œåˆ†æåˆ©å¼Šï¼›</li><li>ç†è§£å·ç§¯ç¥ç»ç½‘ç»œç†è®ºæå‡ºçš„ä¾æ®ï¼Œå³ç©ºé—´ä¸å˜æ€§ï¼›</li></ul><hr><h2 id="ä¸€ã€å…¨è¿æ¥å±‚çš„å±€é™"><a href="#ä¸€ã€å…¨è¿æ¥å±‚çš„å±€é™" class="headerlink" title="ä¸€ã€å…¨è¿æ¥å±‚çš„å±€é™"></a>ä¸€ã€å…¨è¿æ¥å±‚çš„å±€é™</h2><p>æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„å¤šå±‚æ„ŸçŸ¥æœºååˆ†é€‚åˆå¤„ç†è¡¨æ ¼æ•°æ®ï¼Œå…¶ä¸­è¡Œå¯¹åº”æ ·æœ¬ï¼Œåˆ—å¯¹åº”ç‰¹å¾ã€‚</p><p>å¯¹äºè¡¨æ ¼æ•°æ®ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„æ¨¡å¼å¯èƒ½æ¶‰åŠç‰¹å¾ä¹‹é—´çš„äº¤äº’ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½é¢„å…ˆå‡è®¾ä»»ä½•ä¸ç‰¹å¾äº¤äº’ç›¸å…³çš„å…ˆéªŒç»“æ„ã€‚æ­¤æ—¶ï¼Œå¤šå±‚æ„ŸçŸ¥æœºå¯èƒ½æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œç„¶è€Œå¯¹äºé«˜ç»´æ„ŸçŸ¥æ•°æ®ï¼Œè¿™ç§ç¼ºå°‘ç»“æ„çš„ç½‘ç»œå¯èƒ½ä¼šå˜å¾—ä¸å®ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒMLPæ˜¯ä¸€ç§ç¨ å¯†ç‰¹å¾æå–æ–¹å¼ï¼Œè€Œå¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬å­¦ä¹ åˆ°çš„å¾ˆå¯èƒ½æ˜¯ä¸€ç§ç¨€ç–çš„ç‰¹å¾ã€‚æ¯”å¦‚ä¸‹é¢çš„å›¾ç‰‡è¯†åˆ«ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/9868a70ef4af44329e7220f869d239ba1df8397ad1cc41beb279754572d82cfc" width = "500"></center><center><br>å›¾1ï¼šå®é™…åœºæ™¯ä¸­çš„å›¾ç‰‡æ•°æ®</br></center><hr><blockquote><p><strong>æ‰©å±•</strong>ï¼šç¨ å¯†ç‰¹å¾ä¸ç¨€ç–ç‰¹å¾</p><p>å‡å¦‚æ¯ä¸ªç»´åº¦ä¸Šéƒ½æœ‰å€¼ï¼Œæœ¬æ¥æ˜¯åœ¨ n ä¸ªç»´åº¦ä¸Šæ¥è¡¨è¾¾è¿™ä¸ªæ ·æœ¬ï¼Œè€Œç°åœ¨åªæœ‰ä¸ªåˆ«ç»´åº¦ä¸Šæœ‰æ•ˆåœ°è¡¨è¾¾äº†è¿™ä¸ªæ ·æœ¬ï¼Œè¿™ä¸ªç‰¹å¾å¯ä»¥è¯´æ˜¯ç¨€ç–ç‰¹å¾ã€‚</p><p>ç¨ å¯†ç‰¹å¾ä¸€èˆ¬æ˜¯ç›¸å¯¹ç¨€ç–ç‰¹å¾æ¥è¯´çš„ï¼Œç±»åˆ«ç‰¹å¾ç»è¿‡ç‹¬çƒ­ç¼–ç ä¹‹åæ¯”è¾ƒç¨€ç–ï¼Œæ¯”å¦‚ç±»åˆ«<code>[&#39;å°çŒ«&#39;,&#39;å°ç‹—&#39;,&#39;å°ç†Š&#39;,&#39;å°çŒ´&#39;]</code>è¢«ç‹¬çƒ­ç¼–ç åçš„æ•°æ®ç»“æ„ä¸º<code>[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]</code>ã€‚ä½†æ˜¯åƒæ¡Œå­çš„é•¿åº¦è¿™ç§ç¨ å¯†ç‰¹å¾æ•°æ®çš„è¡¨è¾¾æ–¹å¼å°±æ˜¯<code>[3.4,2.6,8.9,6.7]</code>ã€‚</p></blockquote><hr><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå›¾ç‰‡åœ¨è®¡ç®—æœºå†…éƒ¨ä»¥åƒç´ å€¼çš„æ–¹å¼è¢«å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤å¼ å›¾åœ¨è®¡ç®—æœºçœ‹æ¥ï¼Œå…¶å®æ˜¯è¿™æ ·å­çš„ã€‚å…¶ä¸­1ä»£è¡¨ç™½è‰²ï¼Œ-1ä»£è¡¨é»‘è‰²ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/492f53fee2aa4c07864943a1952c463bb0f3ccd95ff043878d97b78f8caa1cb8" width = "500"></center><center><br>å›¾2ï¼šè®¡ç®—æœºçœ¼ä¸­çš„å›¾ç‰‡æ•°æ®</br></center><p>å¦‚æœæŠŠåƒç´ æ‹†å¼€ï¼ŒæŒ‰ç…§æ¯åƒç´ é€ä¸ªæ¯”è¾ƒè‚¯å®šæ˜¯ä¸ç§‘å­¦çš„ï¼Œå› ä¸ºå•ä¸ªåƒç´ æ˜¯æ— æ³•åæ˜ æ•´ä½“çš„ï¼Œè¿™æ ·åšä¼šå¯¼è‡´è¾“å…¥æ•°æ®çš„<code>ç©ºé—´ä¿¡æ¯</code>è¢«ä¸¢å¤±ã€‚</p><p>é™¤æ­¤ä»¥å¤–ï¼Œä½¿ç”¨å…¨è¿æ¥ç½‘ç»œå‚æ•°è¿‡å¤šæ—¶ï¼Œç½‘ç»œè®­ç»ƒç¼“æ…¢ã€‚ä¾‹å¦‚ï¼Œåœ¨çŒ«ç‹—åˆ†ç±»çš„ä¾‹å­ä¸­ï¼šå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¶³å¤Ÿå……åˆ†çš„ç…§ç‰‡æ•°æ®é›†ï¼Œæ•°æ®é›†ä¸­æ˜¯æ‹¥æœ‰æ ‡æ³¨çš„ç…§ç‰‡ï¼Œæ¯å¼ ç…§ç‰‡å…·æœ‰ç™¾ä¸‡çº§åƒç´ ï¼Œè¿™æ„å‘³ç€ç½‘ç»œçš„æ¯æ¬¡è¾“å…¥éƒ½æœ‰ä¸€ç™¾ä¸‡ä¸ªç»´åº¦ã€‚å³ä½¿å°†éšè—å±‚ç»´åº¦é™ä½åˆ°1000ï¼Œè¿™ä¸ªå…¨è¿æ¥å±‚ä¹Ÿå°†æœ‰$10^6 \times 10^3 &#x3D; 10^9$ä¸ªå‚æ•°ã€‚æƒ³è¦è®­ç»ƒè¿™ä¸ªæ¨¡å‹å°†ä¸å¯å®ç°ï¼Œå› ä¸ºéœ€è¦æœ‰å¤§é‡çš„GPUã€åˆ†å¸ƒå¼ä¼˜åŒ–è®­ç»ƒçš„ç»éªŒå’Œè¶…ä¹å¸¸äººçš„è€å¿ƒã€‚</p><p>è™½ç„¶æˆ‘ä»¬ä¼šè®¤ä¸ºè¦æ±‚ç™¾ä¸‡åƒç´ çš„åˆ†è¾¨ç‡å¯èƒ½ä¸æ˜¯å¿…è¦çš„ã€‚ç„¶è€Œï¼Œå³ä½¿åˆ†è¾¨ç‡å‡å°ä¸ºåä¸‡åƒç´ ï¼Œä½¿ç”¨ 1000 ä¸ªéšè—å•å…ƒçš„éšè—å±‚ä¹Ÿå¯èƒ½ä¸è¶³ä»¥å­¦ä¹ åˆ°è‰¯å¥½çš„å›¾åƒç‰¹å¾ï¼Œåœ¨çœŸå®çš„ç³»ç»Ÿä¸­æˆ‘ä»¬ä»ç„¶éœ€è¦æ•°åäº¿ä¸ªå‚æ•°ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥<strong>å·ç§¯ç¥ç»ç½‘ç»œè¿›è¡Œç‰¹å¾æå–</strong>ï¼Œæ—¢èƒ½æå–åˆ°<strong>ç›¸é‚»åƒç´ ç‚¹ä¹‹é—´</strong>çš„ç‰¹å¾æ¨¡å¼ï¼Œåˆèƒ½ä¿è¯å‚æ•°çš„ä¸ªæ•°ä¸éšå›¾ç‰‡å°ºå¯¸å˜åŒ–ã€‚</p><p>ä¸‹å›¾æ˜¯ä¸€ä¸ªå…¸å‹çš„å·ç§¯ç¥ç»ç½‘ç»œç»“æ„ï¼Œå¤šå±‚å·ç§¯å’Œæ± åŒ–å±‚ç»„åˆä½œç”¨åœ¨è¾“å…¥å›¾ç‰‡ä¸Šï¼Œåœ¨ç½‘ç»œçš„æœ€åé€šå¸¸ä¼šåŠ å…¥ä¸€ç³»åˆ—å…¨è¿æ¥å±‚ï¼ŒReLU æ¿€æ´»å‡½æ•°ä¸€èˆ¬åŠ åœ¨å·ç§¯æˆ–è€…å…¨è¿æ¥å±‚çš„è¾“å‡ºä¸Šï¼Œç½‘ç»œä¸­é€šå¸¸è¿˜ä¼šåŠ å…¥ Dropout æ¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/6d1440daa10944c899a7c98e1bed3931a09bae52730d4c20a65b322193d284e1" width = "1000"></center><center><br>å›¾3ï¼šå·ç§¯ç¥ç»ç½‘ç»œç»å…¸ç»“æ„</br></center><hr><h2 id="äºŒã€ç©ºé—´ä¸å˜æ€§"><a href="#äºŒã€ç©ºé—´ä¸å˜æ€§" class="headerlink" title="äºŒã€ç©ºé—´ä¸å˜æ€§"></a>äºŒã€ç©ºé—´ä¸å˜æ€§</h2><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå‡è®¾ä½ æƒ³ä»ä¸€å¼ å›¾ç‰‡ä¸­æ‰¾åˆ°æŸä¸ªç‰©ä½“ã€‚åˆç†çš„å‡è®¾æ˜¯ï¼šæ— è®ºå“ªç§æ–¹æ³•æ‰¾åˆ°è¿™ä¸ªç‰©ä½“ï¼Œéƒ½åº”è¯¥å’Œç‰©ä½“çš„ä½ç½®æ— å…³ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿåº”è¯¥èƒ½å¤Ÿåˆ©ç”¨å¸¸è¯†ï¼šçŒªé€šå¸¸ä¸åœ¨å¤©ä¸Šé£ï¼Œé£æœºé€šå¸¸ä¸åœ¨æ°´é‡Œæ¸¸æ³³ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸€åªçŒªå‡ºç°åœ¨å›¾ç‰‡é¡¶éƒ¨ï¼Œæˆ‘ä»¬è¿˜æ˜¯åº”è¯¥è®¤å‡ºå®ƒã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä»å„¿ç«¥æ¸¸æˆâ€æ²ƒå°”å¤šåœ¨å“ªé‡Œâ€ä¸­å¾—åˆ°çµæ„Ÿï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/207441057fea4c52a46c4362b5158dbae7ca2ffec7214b1f876f34929f5d00df" width = "700"></center><center><br>å›¾4ï¼šWhere's Waldo?</br></center><p>åœ¨è¿™ä¸ªæ¸¸æˆä¸­åŒ…å«äº†è®¸å¤šå……æ–¥ç€æ´»åŠ¨çš„æ··ä¹±åœºæ™¯ï¼Œè€Œæ²ƒå°”å¤šé€šå¸¸æ½œä¼åœ¨ä¸€äº›ä¸å¤ªå¯èƒ½çš„ä½ç½®ï¼Œè¯»è€…çš„ç›®æ ‡å°±æ˜¯æ‰¾å‡ºä»–ã€‚å°½ç®¡æ²ƒå°”å¤šçš„è£…æ‰®å¾ˆæœ‰ç‰¹ç‚¹ï¼Œä½†æ˜¯åœ¨çœ¼èŠ±ç¼­ä¹±çš„åœºæ™¯ä¸­æ‰¾åˆ°ä»–ä¹Ÿå¦‚å¤§æµ·æé’ˆã€‚</p><p>ç„¶è€Œæ²ƒå°”å¤šçš„æ ·å­å¹¶ä¸å–å†³äºä»–æ½œè—çš„åœ°æ–¹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªâ€œæ²ƒå°”å¤šæ£€æµ‹å™¨â€æ‰«æå›¾åƒï¼Œè¯¥æ£€æµ‹å™¨å°†å›¾åƒåˆ†å‰²æˆå¤šä¸ªåŒºåŸŸï¼Œå¹¶ä¸ºæ¯ä¸ªåŒºåŸŸåŒ…å«æ²ƒå°”å¤šçš„å¯èƒ½æ€§æ‰“åˆ†ã€‚</p><p>å·ç§¯ç¥ç»ç½‘ç»œæ­£æ˜¯å°†<strong>ç©ºé—´ä¸å˜æ€§ï¼ˆspatial invarianceï¼‰</strong> çš„è¿™ä¸€æ¦‚å¿µç³»ç»ŸåŒ–ï¼Œä»è€ŒåŸºäºè¿™ä¸ªæ¨¡å‹ä½¿ç”¨è¾ƒå°‘çš„å‚æ•°æ¥å­¦ä¹ æœ‰ç”¨çš„è¡¨ç¤ºã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä¸Šè¿°æƒ³æ³•æ€»ç»“ä¸€ä¸‹ï¼Œä»è€Œå¸®åŠ©æˆ‘ä»¬è®¾è®¡é€‚åˆäºè®¡ç®—æœºè§†è§‰çš„ç¥ç»ç½‘ç»œæ¶æ„ï¼š</p><ol><li><p><strong>å¹³ç§»ä¸å˜æ€§ï¼ˆtranslation invarianceï¼‰</strong>ï¼šè¯†åˆ«å™¨çš„æ ‡å‡†æ˜¯ç»Ÿä¸€çš„ï¼Œä¸ç®¡æ£€æµ‹å¯¹è±¡å‡ºç°åœ¨å›¾åƒä¸­çš„å“ªä¸ªä½ç½®ï¼Œè¯†åˆ«å™¨åº”è¯¥å¯¹ç›¸åŒçš„å›¾åƒåŒºåŸŸå…·æœ‰ç›¸ä¼¼çš„ååº”ã€‚</p></li><li><p><strong>å±€éƒ¨æ€§ï¼ˆlocalityï¼‰</strong>ï¼šè¯†åˆ«å™¨åº”è¯¥åªæ¢ç´¢è¾“å…¥å›¾åƒä¸­çš„å±€éƒ¨åŒºåŸŸï¼Œè€Œä¸è¿‡åº¦åœ¨æ„å›¾åƒä¸­ç›¸éš”è¾ƒè¿œåŒºåŸŸçš„å…³ç³»ã€‚æœ€ç»ˆï¼Œå¯ä»¥èšåˆè¿™äº›å±€éƒ¨ç‰¹å¾ï¼Œä»¥åœ¨æ•´ä¸ªå›¾åƒçº§åˆ«è¿›è¡Œé¢„æµ‹ã€‚</p></li></ol><p>è®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›åŸåˆ™æ˜¯å¦‚ä½•è½¬åŒ–ä¸ºæ•°å­¦è¡¨ç¤ºçš„ã€‚é¦–å…ˆï¼Œå¤šå±‚æ„ŸçŸ¥æœºçš„è¾“å…¥æ˜¯äºŒç»´å›¾åƒ$\mathbf{X}$ï¼ˆå®½åº¦ã€é«˜åº¦ï¼‰ï¼Œå…¶éšè—è¡¨ç¤º$\mathbf{H}$åœ¨æ•°å­¦ä¸Šæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œåœ¨ä»£ç ä¸­è¡¨ç¤ºä¸ºäºŒç»´å¼ é‡ã€‚<br>å…¶ä¸­$\mathbf{X}$å’Œ$\mathbf{H}$å…·æœ‰ç›¸åŒçš„å½¢çŠ¶ã€‚ä½¿ç”¨$[\mathbf{X}]<em>{i, j}$å’Œ$[\mathbf{H}]</em>{i, j}$åˆ†åˆ«è¡¨ç¤ºè¾“å…¥å›¾åƒå’Œéšè—è¡¨ç¤ºä¸­ä½ç½®ï¼ˆ$i$,$j$ï¼‰å¤„çš„åƒç´ ã€‚ä¸ºäº†ä½¿æ¯ä¸ªéšè—ç¥ç»å…ƒéƒ½èƒ½æ¥æ”¶åˆ°æ¯ä¸ªè¾“å…¥åƒç´ çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†å‚æ•°ä»æƒé‡çŸ©é˜µï¼ˆå¦‚åŒæˆ‘ä»¬å…ˆå‰åœ¨å¤šå±‚æ„ŸçŸ¥æœºä¸­æ‰€åšçš„é‚£æ ·ï¼‰æ›¿æ¢ä¸ºå››é˜¶æƒé‡å¼ é‡$\mathsf{W}$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä»æ¥æ”¶è¾“å…¥çš„é•¿åº¦å˜åŒ–å˜æˆäº†æ¥æ”¶è¾“å…¥çš„é«˜å®½ä¸¤ä¸ªç»´åº¦çš„å˜åŒ–ï¼Œè¾“å…¥å’Œè¾“å‡ºå„å¢åŠ äº†ä¸€ä¸ªç»´åº¦ï¼Œå› æ­¤æˆ‘ä»¬çš„æƒé‡å˜ä¸º<code>å››ç»´</code>ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/2c7a0cf210544349a96eb6c3c0e42cf7bfd86b3674ae4d5e90614e09f3a20b12" width = "600"></center><center><br>å›¾5ï¼šå…¨è¿æ¥ä¸å·ç§¯å¯¹æ¯”</br></center><p>å‡è®¾$\mathbf{U}$åŒ…å«åç½®å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¨è¿æ¥å±‚å½¢å¼åŒ–åœ°è¡¨ç¤ºä¸º</p><p>$$<br>\begin{aligned} \left[\mathbf{H}\right]<em>{i, j} &amp;&#x3D; [\mathbf{U}]</em>{i, j} + \sum_k \sum_l[\mathsf{W}]<em>{i, j, k, l}  [\mathbf{X}]</em>{k, l}\ &amp;&#x3D;   [\mathbf{U}]<em>{i, j} +<br>\sum_a \sum_b [\mathsf{V}]</em>{i, j, a, b}  [\mathbf{X}]<em>{i+a, j+b}.\end{aligned}<br>$$<br>å…¶ä¸­ï¼Œä»$\mathsf{W}$åˆ°$\mathsf{V}$çš„è½¬æ¢åªæ˜¯å½¢å¼ä¸Šçš„è½¬æ¢ï¼Œå› ä¸ºåœ¨è¿™ä¸¤ä¸ªå››é˜¶å¼ é‡çš„å…ƒç´ ä¹‹é—´å­˜åœ¨ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚<br>æˆ‘ä»¬åªéœ€é‡æ–°ç´¢å¼•ä¸‹æ ‡$(k, l)$ï¼ŒåŸæ¥çš„$(k, l)$ä»£è¡¨çš„æ˜¯åƒç´ åœ¨å›¾ç‰‡ä¸­çš„ç»å¯¹ä½ç½®ï¼Œç°åœ¨æˆ‘ä»¬å¼•å…¥äº†ç´¢å¼•$a$å’Œ$b$é€šè¿‡åœ¨æ­£åç§»å’Œè´Ÿåç§»ä¹‹é—´ç§»åŠ¨è¦†ç›–äº†æ•´ä¸ªå›¾åƒï¼Œä½¿$k &#x3D; i+a$ã€$l &#x3D; j+b$ï¼Œç”±æ­¤å¯å¾—$[\mathsf{V}]</em>{i, j, a, b} &#x3D; [\mathsf{W}]<em>{i, j, i+a, j+b}$ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨$a$å’Œ$b$æ¥è¡¨ç¤ºç›¸å¯¹äºæŸä¸€ä»»æ„ç‚¹$(i, j)$çš„ç›¸å¯¹ä½ç½®ã€‚å¯¹äºéšè—è¡¨ç¤ºä¸­ä»»æ„ç»™å®šä½ç½®ï¼ˆ$i$,$j$ï¼‰å¤„çš„åƒç´ å€¼$[\mathbf{H}]</em>{i, j}$ï¼Œå¯ä»¥é€šè¿‡åœ¨$x$ä¸­ä»¥$(i, j)$ä¸ºä¸­å¿ƒå¯¹åƒç´ è¿›è¡ŒåŠ æƒæ±‚å’Œå¾—åˆ°ï¼ŒåŠ æƒä½¿ç”¨çš„æƒé‡ä¸º$[\mathsf{V}]_{i, j, a, b}$ã€‚</p><blockquote><p>åªè€ƒè™‘å½“å‰è§‚å¯Ÿå™¨æ‰«åˆ°çš„åŒºåŸŸï¼Œä¸è€ƒè™‘å›¾ç‰‡çš„å…¶ä»–ä»–åŒºåŸŸï¼Œæ‰€ä»¥ç”¨ç›¸å¯¹ä½ç½®æ›´ä¸ºæ–¹ä¾¿ã€‚</p></blockquote><h3 id="1ï¼‰å¹³ç§»ä¸å˜æ€§"><a href="#1ï¼‰å¹³ç§»ä¸å˜æ€§" class="headerlink" title="1ï¼‰å¹³ç§»ä¸å˜æ€§"></a>1ï¼‰å¹³ç§»ä¸å˜æ€§</h3><p>ç°åœ¨å¼•ç”¨ä¸Šè¿°çš„ç¬¬ä¸€ä¸ªåŸåˆ™ï¼šå¹³ç§»ä¸å˜æ€§ã€‚è¿™æ„å‘³ç€æ£€æµ‹å¯¹è±¡åœ¨è¾“å…¥$\mathbf{X}$ä¸­çš„å¹³ç§»ï¼Œåº”è¯¥ä»…å¯¼è‡´éšè—è¡¨ç¤º$\mathbf{H}$ä¸­çš„å¹³ç§»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ$\mathsf{V}$å’Œ$\mathbf{U}$å®é™…ä¸Šä¸ä¾èµ–äº$(i, j)$çš„å€¼ï¼Œå³$[\mathsf{V}]<em>{i, j, a, b} &#x3D; [\mathbf{V}]</em>{a, b}$ã€‚æ— è®ºè¯†åˆ«å‡ºæ¥çš„ç›®æ ‡ç‰¹å¾åœ¨ä»€ä¹ˆä½ç½®ï¼Œæˆ‘ä»¬çš„æƒé‡éƒ½æ˜¯ä¸å˜çš„ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›ï¼Œå›¾åƒçš„ä¸€éƒ¨åˆ†çš„ç»Ÿè®¡ç‰¹æ€§ä¸å…¶ä»–éƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸€éƒ¨åˆ†å­¦ä¹ çš„ç‰¹å¾ç”¨åœ¨å¦ä¸€éƒ¨åˆ†ä¸Šï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸ªå›¾åƒä¸Šçš„æ‰€æœ‰ä½ç½®ï¼Œæˆ‘ä»¬éƒ½èƒ½ä½¿ç”¨åŒæ ·çš„å­¦ä¹ ç‰¹å¾ã€‚è¿™å°±æ˜¯<strong>å·ç§¯æ ¸ï¼ˆconvolution kernelï¼‰</strong> çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒä¸€å¼ å·ç§¯æ ¸éå†æ•´å¼ å›¾ç‰‡ã€‚å¹¶ä¸”$\mathbf{U}$æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œæ¯”å¦‚$u$ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–$\mathbf{H}$å®šä¹‰ä¸ºï¼š</p><p>$$<br>[\mathbf{H}]<em>{i, j} &#x3D; u + \sum_a\sum_b [\mathbf{V}]</em>{a, b} [\mathbf{X}]<em>{i+a, j+b}.<br>$$<br>è¿™å°±æ˜¯<strong>å·ç§¯ï¼ˆconvolutionï¼‰</strong>ã€‚æˆ‘ä»¬æ˜¯åœ¨ä½¿ç”¨ç³»æ•°$[\mathbf{V}]</em>{a, b}$å¯¹ä½ç½®$(i, j)$é™„è¿‘çš„åƒç´ $(i+a, j+b)$è¿›è¡ŒåŠ æƒå¾—åˆ°$[\mathbf{H}]<em>{i, j}$ã€‚æ³¨æ„ï¼Œ$[\mathbf{V}]</em>{a, b}$çš„ç³»æ•°æ¯”$[\mathsf{V}]_{i, j, a, b}$å°‘å¾ˆå¤šï¼Œå› ä¸ºå‰è€…ä¸å†ä¾èµ–äºå›¾åƒä¸­çš„ä½ç½®ã€‚</p><p>åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œå·ç§¯è¢«å®šä¹‰ä¸ºä¸åŒä½ç½®çš„ç‰¹å¾æ£€æµ‹å™¨ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œæ— è®ºç›®æ ‡å‡ºç°åœ¨å›¾åƒä¸­çš„å“ªä¸ªä½ç½®ï¼Œå®ƒéƒ½ä¼šæ£€æµ‹åˆ°åŒæ ·çš„è¿™äº›ç‰¹å¾ï¼Œè¾“å‡ºåŒæ ·çš„å“åº”ã€‚æ¯”å¦‚äººè„¸è¢«ç§»åŠ¨åˆ°äº†å›¾åƒå·¦ä¸‹è§’ï¼Œå·ç§¯æ ¸ç›´åˆ°ç§»åŠ¨åˆ°å·¦ä¸‹è§’çš„ä½ç½®æ‰ä¼šæ£€æµ‹åˆ°å®ƒçš„ç‰¹å¾ã€‚</p><h3 id="2ï¼‰å±€éƒ¨æ€§"><a href="#2ï¼‰å±€éƒ¨æ€§" class="headerlink" title="2ï¼‰å±€éƒ¨æ€§"></a>2ï¼‰å±€éƒ¨æ€§</h3><p>ç°åœ¨å¼•ç”¨ä¸Šè¿°çš„ç¬¬äºŒä¸ªåŸåˆ™ï¼šå±€éƒ¨æ€§ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œä¸ºäº†æ”¶é›†ç”¨æ¥è®­ç»ƒå‚æ•°$[\mathbf{H}]<em>{i, j}$çš„ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸åº”åç¦»åˆ°è·$(i, j)$å¾ˆè¿œçš„åœ°æ–¹ã€‚è¿™æ„å‘³ç€åœ¨$|a|&gt; \Delta$æˆ–$|b| &gt; \Delta$çš„èŒƒå›´ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®$[\mathbf{V}]</em>{a, b} &#x3D; 0$ã€‚ä»¥ $(i, y)$ ä¸ºä¸­å¿ƒä½ç½®ï¼Œæˆ‘ä»¬å…è®¸å‘å‰å‘åç§»åŠ¨ ${\Delta}$ ä¸ªä½ç½®ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†$[\mathbf{H}]_{i, j}$é‡å†™ä¸º</p><p>$$<br>[\mathbf{H}]<em>{i, j} &#x3D; u + \sum</em>{a &#x3D; -\Delta}^{\Delta} \sum_{b &#x3D; -\Delta}^{\Delta} [\mathbf{V}]<em>{a, b}  [\mathbf{X}]</em>{i+a, j+b}.<br>$$<br>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å·ç§¯å±‚çš„æƒæŒ‡çš„æ•°é‡ä¼šæˆå€çš„å‡å°‘ï¼Œä½†ä»ç„¶è€ƒè™‘åˆ°äº†æ•´ä¸ªå›¾ç‰‡çš„æƒæŒ‡çš„ä¿¡æ¯ã€‚æ—¢è€ƒè™‘åˆ°æ•´ä¸ªçš„å±æ€§ï¼Œåˆç…§é¡¾åˆ°äº†è·Ÿå®ƒå±€éƒ¨ç›¸å…³çš„ç‚¹ã€‚å¯¹å…¨è¿æ¥å±‚ä½¿ç”¨å¹³ç§»ä¸å˜æ€§å’Œå±€éƒ¨æ€§ä¼šå¾—åˆ°å·ç§¯å±‚ï¼Œæ‰€ä»¥å·ç§¯æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å…¨è¿æ¥å±‚ã€‚</p><h3 id="3ï¼‰å¤šé€šé“"><a href="#3ï¼‰å¤šé€šé“" class="headerlink" title="3ï¼‰å¤šé€šé“"></a><strong>3ï¼‰å¤šé€šé“</strong></h3><p>ç„¶è€Œè¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬å¿½ç•¥äº†å›¾åƒä¸€èˆ¬åŒ…å«ä¸‰ä¸ªé€šé“&#x2F;ä¸‰ç§åŸè‰²ï¼ˆçº¢è‰²ã€ç»¿è‰²å’Œè“è‰²ï¼‰ã€‚å®é™…ä¸Šï¼Œå›¾åƒä¸æ˜¯äºŒç»´å¼ é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªç”±é«˜åº¦ã€å®½åº¦å’Œé¢œè‰²ç»„æˆçš„ä¸‰ç»´å¼ é‡ï¼Œæ¯”å¦‚åŒ…å«$1024 \times 1024 \times 3$ä¸ªåƒç´ ã€‚å‰ä¸¤ä¸ªè½´ä¸åƒç´ çš„ç©ºé—´ä½ç½®æœ‰å…³ï¼Œè€Œç¬¬ä¸‰ä¸ªè½´å¯ä»¥çœ‹ä½œæ˜¯æ¯ä¸ªåƒç´ çš„å¤šç»´è¡¨ç¤ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†$\mathsf{X}$ç´¢å¼•ä¸º$[\mathsf{X}]<em>{i, j, k}$ã€‚ç”±æ­¤å·ç§¯ç›¸åº”åœ°è°ƒæ•´ä¸º$[\mathsf{V}]</em>{a,b,c}$ï¼Œè€Œä¸æ˜¯$[\mathbf{V}]_{a,b}$ã€‚</p><p>æ­¤å¤–ï¼Œç”±äºè¾“å…¥å›¾åƒæ˜¯ä¸‰ç»´çš„ï¼Œæˆ‘ä»¬çš„éšè—è¡¨ç¤º$\mathsf{H}$ä¹Ÿæœ€å¥½é‡‡ç”¨ä¸‰ç»´å¼ é‡ã€‚æ¢å¥è¯è¯´ï¼Œå¯¹äºæ¯ä¸€ä¸ªç©ºé—´ä½ç½®ï¼Œæˆ‘ä»¬æƒ³è¦é‡‡ç”¨ä¸€ç»„è€Œä¸æ˜¯ä¸€ä¸ªéšè—è¡¨ç¤ºã€‚è¿™æ ·ä¸€ç»„éšè—è¡¨ç¤ºå¯ä»¥æƒ³è±¡æˆä¸€äº›äº’ç›¸å †å çš„äºŒç»´ç½‘æ ¼ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠéšè—è¡¨ç¤ºæƒ³è±¡ä¸ºä¸€ç³»åˆ—å…·æœ‰äºŒç»´å¼ é‡çš„é€šé“ï¼ˆchannelï¼‰ã€‚è¿™äº›é€šé“æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º<strong>ç‰¹å¾æ˜ å°„ï¼ˆfeature mapsï¼‰</strong>ï¼Œå› ä¸ºæ¯ä¸ªé€šé“éƒ½å‘åç»­å±‚æä¾›ä¸€ç»„ç©ºé—´åŒ–çš„å­¦ä¹ ç‰¹å¾ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒCNNå¯èƒ½ä½¿ç”¨æ›´å¤šçš„ç”šè‡³å‡ åä¸ªç‰¹å¾æ˜ å°„ï¼Œä»¥æ‰‹å†™æ•°å­—è¯†åˆ«ä¸ºä¾‹ï¼Œå­¦ä¹ åˆ°çš„ç‰¹å¾å¦‚ä¸‹ï¼Œè¿™20å¼ å›¾ç‰‡å¯¹åº”äº†20ä¸ªç‰¹å¾æ˜ å°„ï¼Œæ¯ä¸€ä¸ªç‰¹å¾æ˜ å°„ç”± <em>5X5</em> çš„å›¾åƒè¡¨ç¤ºï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/9474ec1bab0b4081b18fd6e34c77063d640d7618f993459fb68d6270bb94553f" width = "600"></center><center><br>å›¾6ï¼šç‰¹å¾æ˜ å°„</br></center><p>ä¸ºäº†æ”¯æŒè¾“å…¥$\mathsf{X}$å’Œéšè—è¡¨ç¤º$\mathsf{H}$ä¸­çš„å¤šä¸ªé€šé“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨$\mathsf{V}$ä¸­æ·»åŠ ç¬¬å››ä¸ªåæ ‡ï¼Œå³$[\mathsf{V}]_{a, b, c, d}$ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œ</p><p>$$<br>[\mathsf{H}]<em>{i,j,d} &#x3D; \sum</em>{a &#x3D; -\Delta}^{\Delta} \sum_{b &#x3D; -\Delta}^{\Delta} \sum_c [\mathsf{V}]<em>{a, b, c, d} [\mathsf{X}]</em>{i+a, j+b, c},<br>$$<br>å…¶ä¸­éšè—è¡¨ç¤º$\mathsf{H}$ä¸­çš„ç´¢å¼•$d$è¡¨ç¤ºè¾“å‡ºé€šé“ï¼Œè€Œéšåçš„è¾“å‡ºå°†ç»§ç»­ä»¥ä¸‰ç»´å¼ é‡$\mathsf{H}$ä½œä¸ºè¾“å…¥è¿›å…¥ä¸‹ä¸€ä¸ªå·ç§¯å±‚ã€‚æ‰€ä»¥è¿™ä¸ªæœ€ç»ˆçš„å…¬å¼å¯ä»¥å®šä¹‰å…·æœ‰å¤šä¸ªé€šé“çš„å·ç§¯å±‚ï¼Œè€Œå…¶ä¸­$\mathsf{V}$æ˜¯è¯¥å·ç§¯å±‚çš„æƒé‡ã€‚</p><h2 id="ä¸‰ã€å·ç§¯ï¼ˆConvolutionï¼‰"><a href="#ä¸‰ã€å·ç§¯ï¼ˆConvolutionï¼‰" class="headerlink" title="ä¸‰ã€å·ç§¯ï¼ˆConvolutionï¼‰"></a>ä¸‰ã€å·ç§¯ï¼ˆConvolutionï¼‰</h2><p>è¿™ä¸€å°èŠ‚å°†ä»‹ç»å·ç§¯ç®—æ³•çš„åŸç†å’Œå®ç°æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•ä½¿ç”¨å·ç§¯å¯¹å›¾ç‰‡è¿›è¡Œæ“ä½œï¼Œå­¦ä¹ æœ¬èŠ‚éœ€è¦æŒæ¡å¦‚ä¸‹å†…å®¹ï¼š</p><ul><li><p>å·ç§¯è®¡ç®—</p></li><li><p>å¡«å……ï¼ˆpaddingï¼‰</p></li><li><p>æ­¥å¹…ï¼ˆstrideï¼‰</p></li><li><p>æ„Ÿå—é‡ï¼ˆReceptive Fieldï¼‰</p></li><li><p>å¤šè¾“å…¥é€šé“ã€å¤šè¾“å‡ºé€šé“</p></li><li><p>é£æ¡¨å·ç§¯APIä»‹ç»</p></li><li><p>å·ç§¯ç®—å­åº”ç”¨ä¸¾ä¾‹</p></li></ul><hr><h3 id="1ï¼‰å·ç§¯è®¡ç®—"><a href="#1ï¼‰å·ç§¯è®¡ç®—" class="headerlink" title="1ï¼‰å·ç§¯è®¡ç®—"></a>1ï¼‰å·ç§¯è®¡ç®—</h3><blockquote><p>å°†å·ç§¯æ ¸ä¸å›¾ç‰‡å…³è”èµ·æ¥ã€‚</p></blockquote><p>å·ç§¯æ˜¯æ•°å­¦åˆ†æä¸­çš„ä¸€ç§ç§¯åˆ†å˜æ¢çš„æ–¹æ³•ï¼Œåœ¨å›¾åƒå¤„ç†ä¸­é‡‡ç”¨çš„æ˜¯å·ç§¯çš„ç¦»æ•£å½¢å¼ã€‚è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå·ç§¯å±‚çš„å®ç°æ–¹å¼å®é™…ä¸Šæ˜¯æ•°å­¦ä¸­å®šä¹‰çš„<strong>äº’ç›¸å…³ï¼ˆcross-correlationï¼‰</strong> è¿ç®—ï¼Œä¸æ•°å­¦åˆ†æä¸­çš„å·ç§¯å®šä¹‰æœ‰æ‰€ä¸åŒï¼Œè¿™é‡Œè·Ÿå…¶ä»–æ¡†æ¶å’Œå·ç§¯ç¥ç»ç½‘ç»œçš„æ•™ç¨‹ä¿æŒä¸€è‡´ï¼Œéƒ½ä½¿ç”¨äº’ç›¸å…³è¿ç®—ä½œä¸ºå·ç§¯çš„å®šä¹‰ï¼Œäº’ç›¸å…³æ˜¯ä¸€ä¸ªè¡¡é‡ä¸¤ä¸ªåºåˆ—ç›¸å…³æ€§çš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯ç”¨æ»‘åŠ¨çª—å£çš„ç‚¹ç§¯è®¡ç®—æ¥å®ç°ã€‚</p><p>å…·ä½“çš„è®¡ç®—è¿‡ç¨‹å¦‚ <strong>å›¾7</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d5019afe174745efbf7a3d3c604b9c85eeddc947f7184446a9147d128863864d" width = "700"></center><center><br>å›¾7ï¼šå·ç§¯è®¡ç®—è¿‡ç¨‹</br></center><hr><blockquote><p><strong>è¯´æ˜ï¼š</strong></p><p><strong>å·ç§¯æ ¸ï¼ˆkernelï¼‰</strong> ä¹Ÿè¢«å«åš<strong>æ»¤æ³¢å™¨ï¼ˆfilterï¼‰</strong>ï¼Œå‡è®¾å·ç§¯æ ¸çš„é«˜å’Œå®½åˆ†åˆ«ä¸º$k_h$å’Œ$k_w$ï¼Œåˆ™å°†ç§°ä¸º$k_h\times k_w$å·ç§¯ï¼Œæ¯”å¦‚$3\times5$å·ç§¯ï¼Œå°±æ˜¯æŒ‡å·ç§¯æ ¸çš„é«˜ä¸º3, å®½ä¸º5ã€‚</p></blockquote><hr><ul><li>å¦‚å›¾7ï¼ˆaï¼‰æ‰€ç¤ºï¼šå·¦è¾¹çš„å›¾å¤§å°æ˜¯$3\times3$ï¼Œè¡¨ç¤ºè¾“å…¥æ•°æ®æ˜¯ä¸€ä¸ªç»´åº¦ä¸º$3\times3$çš„äºŒç»´æ•°ç»„ï¼›ä¸­é—´çš„å›¾å¤§å°æ˜¯$2\times2$ï¼Œè¡¨ç¤ºä¸€ä¸ªç»´åº¦ä¸º$2\times2$çš„äºŒç»´æ•°ç»„ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªäºŒç»´æ•°ç»„ç§°ä¸ºå·ç§¯æ ¸ã€‚å…ˆå°†å·ç§¯æ ¸çš„å·¦ä¸Šè§’ä¸è¾“å…¥æ•°æ®çš„å·¦ä¸Šè§’ï¼ˆå³ï¼šè¾“å…¥æ•°æ®çš„(0, 0)ä½ç½®ï¼‰å¯¹é½ï¼ŒæŠŠå·ç§¯æ ¸çš„æ¯ä¸ªå…ƒç´ è·Ÿå…¶ä½ç½®å¯¹åº”çš„è¾“å…¥æ•°æ®ä¸­çš„å…ƒç´ ç›¸ä¹˜ï¼Œå†æŠŠæ‰€æœ‰ä¹˜ç§¯ç›¸åŠ ï¼Œå¾—åˆ°å·ç§¯è¾“å‡ºçš„ç¬¬ä¸€ä¸ªç»“æœï¼š</li></ul><p>$$<br>0\times1 + 1\times2 + 2\times4 + 3\times5 &#x3D; 25  \ \ \ \ \ \ \ (a)<br>$$</p><ul><li>å¦‚å›¾7ï¼ˆbï¼‰æ‰€ç¤ºï¼šå°†å·ç§¯æ ¸å‘å³æ»‘åŠ¨ï¼Œè®©å·ç§¯æ ¸å·¦ä¸Šè§’ä¸è¾“å…¥æ•°æ®ä¸­çš„(0,1)ä½ç½®å¯¹é½ï¼ŒåŒæ ·å°†å·ç§¯æ ¸çš„æ¯ä¸ªå…ƒç´ è·Ÿå…¶ä½ç½®å¯¹åº”çš„è¾“å…¥æ•°æ®ä¸­çš„å…ƒç´ ç›¸ä¹˜ï¼Œå†æŠŠè¿™4ä¸ªä¹˜ç§¯ç›¸åŠ ï¼Œå¾—åˆ°å·ç§¯è¾“å‡ºçš„ç¬¬äºŒä¸ªç»“æœï¼š</li></ul><p>$$<br>0\times2 + 1\times3 + 2\times5 + 3\times6 &#x3D; 31  \ \ \ \ \ \ \ (b)<br>$$</p><ul><li>å¦‚å›¾7ï¼ˆcï¼‰æ‰€ç¤ºï¼šå°†å·ç§¯æ ¸å‘ä¸‹æ»‘åŠ¨ï¼Œè®©å·ç§¯æ ¸å·¦ä¸Šè§’ä¸è¾“å…¥æ•°æ®ä¸­çš„(1, 0)ä½ç½®å¯¹é½ï¼Œå¯ä»¥è®¡ç®—å¾—åˆ°å·ç§¯è¾“å‡ºçš„ç¬¬ä¸‰ä¸ªç»“æœï¼š</li></ul><p>$$<br>0\times4 + 1\times5 + 2\times7 + 3\times8 &#x3D; 43   \ \ \ \ \ \ \ (c)<br>$$</p><ul><li>å¦‚å›¾7ï¼ˆdï¼‰æ‰€ç¤ºï¼šå°†å·ç§¯æ ¸å‘å³æ»‘åŠ¨ï¼Œè®©å·ç§¯æ ¸å·¦ä¸Šè§’ä¸è¾“å…¥æ•°æ®ä¸­çš„(1, 1)ä½ç½®å¯¹é½ï¼Œå¯ä»¥è®¡ç®—å¾—åˆ°å·ç§¯è¾“å‡ºçš„ç¬¬å››ä¸ªç»“æœï¼š</li></ul><p>$$<br>0\times5 + 1\times6 + 2\times8 + 3\times9 &#x3D; 49   \ \ \ \ \ \ \ (d)<br>$$</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4219539eac53411281d1318343d84c38e1d21662c69742b8bd89df7c906cbe45" width = "700"></center><p>æ³¨æ„ï¼Œè¾“å‡ºå¤§å°ç•¥å°äºè¾“å…¥å¤§å°ã€‚è¿™æ˜¯å› ä¸ºå·ç§¯æ ¸çš„å®½åº¦å’Œé«˜åº¦å¤§äº1ï¼Œè€Œå·ç§¯æ ¸åªä¸å›¾åƒä¸­æ¯ä¸ªå¤§å°å®Œå…¨é€‚åˆçš„ä½ç½®è¿›è¡Œäº’ç›¸å…³è¿ç®—ï¼Œè¿™å°±å¯¼è‡´å¿…ç„¶ä¼šæœ‰ä¸€äº›å€¼ä¸å‚ä¸è¿ç®—ã€‚</p><p>æ‰€ä»¥ï¼Œè¾“å‡ºå¤§å°ç­‰äºè¾“å…¥å¤§å°å‡å»å·ç§¯æ ¸å¤§å°$k_h \times k_w$å†åŠ ä¸Šèˆå¼ƒæ‰çš„å€¼ï¼Œå³ï¼š</p><p>$$<br>H_{out} &#x3D; H - k_h + 1<br>$$</p><p>$$<br>W_{out} &#x3D; W - k_w + 1<br>$$</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¼å­æ¥è¡¨ç¤ºè¾“å‡ºå€¼$Y$ï¼Œå…¶ä¸­ï¼Œ$W$å’Œ$b$éƒ½æ˜¯æˆ‘ä»¬éœ€è¦å­¦ä¹ çš„å‚æ•°ï¼š</p><p>$$<br>Y &#x3D; XÂ·W + b<br>$$<br>å› ä¸ºæˆ‘ä»¬éœ€è¦è¶³å¤Ÿçš„ç©ºé—´åœ¨å›¾åƒä¸Šâ€œç§»åŠ¨â€å·ç§¯æ ¸ã€‚ç¨åï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•é€šè¿‡<strong>åœ¨å›¾åƒè¾¹ç•Œå‘¨å›´å¡«å……é›¶</strong>æ¥ä¿è¯æœ‰è¶³å¤Ÿçš„ç©ºé—´ç§»åŠ¨å·ç§¯æ ¸ï¼Œä»è€Œä¿æŒè¾“å‡ºå¤§å°ä¸å˜ã€‚</p><p><strong>å®ç°å·ç§¯è¿ç®—</strong></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨<code>corr2d</code>å‡½æ•°ä¸­å®ç°å¦‚ä¸Šè¿‡ç¨‹ï¼Œè¯¥å‡½æ•°æ¥å—è¾“å…¥å¼ é‡<code>X</code>å’Œå·ç§¯æ ¸å¼ é‡<code>K</code>ï¼Œå¹¶è¿”å›è¾“å‡ºå¼ é‡<code>Y</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line">X = paddle.to_tensor([[<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>], [<span class="number">4.0</span>, <span class="number">5.0</span>, <span class="number">6.0</span>], [<span class="number">7.0</span>, <span class="number">8.0</span>, <span class="number">9.0</span>]])</span><br><span class="line">K = paddle.to_tensor([[<span class="number">0.0</span>, <span class="number">1.0</span>], [<span class="number">2.0</span>, <span class="number">3.0</span>]])</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;è®¡ç®—äºŒç»´äº’ç›¸å…³è¿ç®—&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">corr2d</span>(<span class="params">X, K</span>):</span><br><span class="line">    h, w = K.shape</span><br><span class="line">    <span class="comment"># æ ¹æ®ä¸Šé¢å…¬å¼è®¡ç®—è¾“å‡ºçš„hå’Œw</span></span><br><span class="line">    Y = paddle.zeros(shape=(X.shape[<span class="number">0</span>] - h + <span class="number">1</span>, X.shape[<span class="number">1</span>] - w + <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Y.shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(Y.shape[<span class="number">1</span>]):</span><br><span class="line">            Y[i, j] = (X[i:i+h, j:j+w] * K).<span class="built_in">sum</span>()</span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(corr2d(X, K))</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[25., 31.],        [43., 49.]])</code></pre><h3 id="2ï¼‰å¡«å……"><a href="#2ï¼‰å¡«å……" class="headerlink" title="2ï¼‰å¡«å……"></a><strong>2ï¼‰å¡«å……</strong></h3><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸ä¸º$3\times3$ï¼Œè¾“å‡ºå›¾ç‰‡å°ºå¯¸ä¸º$2\times2$ï¼Œç»è¿‡ä¸€æ¬¡å·ç§¯ä¹‹åï¼Œå›¾ç‰‡å°ºå¯¸å˜å°ã€‚å·ç§¯è¾“å‡ºç‰¹å¾å›¾çš„å°ºå¯¸è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼ˆå·ç§¯æ ¸çš„é«˜å’Œå®½åˆ†åˆ«ä¸º$k_h$å’Œ$k_w$ï¼‰ï¼š</p><p>$$<br>H_{out} &#x3D; H - k_h + 1<br>$$</p><p>$$<br>W_{out} &#x3D; W - k_w + 1<br>$$</p><p>å¦‚æœè¾“å…¥å°ºå¯¸ä¸º4ï¼Œå·ç§¯æ ¸å¤§å°ä¸º3æ—¶ï¼Œè¾“å‡ºå°ºå¯¸ä¸º$4-3+1&#x3D;2$ã€‚å½“å·ç§¯æ ¸å°ºå¯¸å¤§äº1æ—¶ï¼Œè¾“å‡ºç‰¹å¾å›¾çš„å°ºå¯¸ä¼šå°äºè¾“å…¥å›¾ç‰‡å°ºå¯¸ã€‚å¦‚æœç»è¿‡å¤šæ¬¡å·ç§¯ï¼Œè¾“å‡ºå›¾ç‰‡å°ºå¯¸ä¼šä¸æ–­å‡å°ã€‚ä¸ºäº†é¿å…å·ç§¯ä¹‹åå›¾ç‰‡å°ºå¯¸å˜å°ï¼Œé€šå¸¸ä¼šåœ¨å›¾ç‰‡çš„å¤–å›´è¿›è¡Œ**å¡«å……(padding)**ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/01d311ec2c65435f85059953a84ec7ea8ef2fd236452450e912346a7da201c5f" width = "700"></center><center><br>å›¾8ï¼šå›¾å½¢å¡«å…… </br></center><ul><li><p>å¦‚å›¾8ï¼ˆaï¼‰æ‰€ç¤ºï¼šå¡«å……çš„å¤§å°ä¸º1ï¼Œå¡«å……å€¼ä¸º0ã€‚å¡«å……ä¹‹åï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸ä»$4\times4$å˜æˆäº†$6\times6$ï¼Œä½¿ç”¨$3\times3$çš„å·ç§¯æ ¸ï¼Œè¾“å‡ºå›¾ç‰‡å°ºå¯¸ä¸º$4\times4$ã€‚</p></li><li><p>å¦‚å›¾8ï¼ˆbï¼‰æ‰€ç¤ºï¼šå¡«å……çš„å¤§å°ä¸º2ï¼Œå¡«å……å€¼ä¸º0ã€‚å¡«å……ä¹‹åï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸ä»$4\times4$å˜æˆäº†$8\times8$ï¼Œä½¿ç”¨$3\times3$çš„å·ç§¯æ ¸ï¼Œè¾“å‡ºå›¾ç‰‡å°ºå¯¸ä¸º$6\times6$ã€‚</p></li></ul><p>å¦‚æœåœ¨å›¾ç‰‡é«˜åº¦æ–¹å‘ï¼Œåœ¨ç¬¬ä¸€è¡Œä¹‹å‰å¡«å……$p_{h1}$è¡Œï¼Œåœ¨æœ€åä¸€è¡Œä¹‹åå¡«å……$p_{h2}$è¡Œï¼›åœ¨å›¾ç‰‡çš„å®½åº¦æ–¹å‘ï¼Œåœ¨ç¬¬1åˆ—ä¹‹å‰å¡«å……$p_{w1}$åˆ—ï¼Œåœ¨æœ€å1åˆ—ä¹‹åå¡«å……$p_{w2}$åˆ—ï¼›åˆ™å¡«å……ä¹‹åçš„å›¾ç‰‡å°ºå¯¸ä¸º$(H + p_{h1} + p_{h2})\times(W + p_{w1} + p_{w2})$ã€‚ç»è¿‡å¤§å°ä¸º$k_h\times k_w$çš„å·ç§¯æ ¸æ“ä½œä¹‹åï¼Œè¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸ä¸ºï¼š<br>$$<br>H_{out} &#x3D; H + p_{h1} + p_{h2} - k_h + 1<br>$$</p><p>$$<br>W_{out} &#x3D; W + p_{w1} + p_{w2} - k_w + 1<br>$$</p><p>åœ¨å·ç§¯è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šåœ¨é«˜åº¦æˆ–è€…å®½åº¦çš„ä¸¤ä¾§é‡‡å–ç­‰é‡å¡«å……ï¼Œå³$p_{h1} &#x3D; p_{h2} &#x3D; p_h,\ \ p_{w1} &#x3D; p_{w2} &#x3D; p_w$ï¼Œä¸Šé¢è®¡ç®—å…¬å¼ä¹Ÿå°±å˜ä¸ºï¼š<br>$$<br>H_{out} &#x3D; H + 2p_h - k_h + 1<br>$$</p><p>$$<br>W_{out} &#x3D; W + 2p_w - k_w + 1<br>$$</p><p>å·ç§¯æ ¸å¤§å°é€šå¸¸ä½¿ç”¨<code>1ï¼Œ3ï¼Œ5ï¼Œ7</code>è¿™æ ·çš„å¥‡æ•°ï¼Œå¦‚æœä½¿ç”¨çš„å¡«å……å¤§å°ä¸º$p_h&#x3D;(k_h-1)&#x2F;2 ï¼Œp_w&#x3D;(k_w-1)&#x2F;2$ï¼Œåˆ™å·ç§¯ä¹‹åå›¾åƒå°ºå¯¸ä¸å˜ã€‚ä¾‹å¦‚å½“<code>å·ç§¯æ ¸å¤§å°ä¸º3æ—¶ï¼Œpaddingå¤§å°ä¸º1</code>ï¼Œå·ç§¯ä¹‹åå›¾åƒå°ºå¯¸ä¸å˜ï¼›åŒç†ï¼Œå¦‚æœ<code>å·ç§¯æ ¸å¤§å°ä¸º5ï¼Œpaddingå¤§å°ä¸º2</code>ï¼Œä¹Ÿèƒ½ä¿æŒå›¾åƒå°ºå¯¸ä¸å˜ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé«˜åº¦å’Œå®½åº¦ä¸º3çš„äºŒç»´å·ç§¯å±‚ï¼Œå¹¶åœ¨æ‰€æœ‰ä¾§è¾¹å¡«å……1ä¸ªåƒç´ ã€‚ç»™å®šé«˜åº¦å’Œå®½åº¦ä¸º8çš„è¾“å…¥ï¼Œåˆ™è¾“å‡ºçš„é«˜åº¦å’Œå®½åº¦ä¹Ÿæ˜¯8ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">comp_conv2d</span>(<span class="params">conv2d, X</span>):</span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„ï¼ˆ1ï¼Œ1ï¼‰è¡¨ç¤ºæ‰¹é‡å¤§å°å’Œé€šé“æ•°éƒ½æ˜¯1ï¼ŒXä¸ºï¼ˆæ‰¹é‡å¤§å°ï¼Œé€šé“æ•°ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼‰</span></span><br><span class="line">    X = X.reshape([<span class="number">1</span>, <span class="number">1</span>] + X.shape)</span><br><span class="line">    Y = conv2d(X)</span><br><span class="line">    <span class="built_in">print</span>(Y.shape)</span><br><span class="line">    <span class="keyword">return</span> Y.reshape(Y.shape[<span class="number">2</span>:]) <span class="comment"># çœç•¥å‰ä¸¤ä¸ªç»´åº¦ï¼šæ‰¹é‡å¤§å°å’Œé€šé“</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;å¡«å……&#x27;&#x27;&#x27;</span></span><br><span class="line">conv2d = nn.Conv2D(<span class="number">1</span>, <span class="number">1</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>) <span class="comment"># è¿™é‡Œæ¯è¾¹éƒ½å¡«å……äº†1è¡Œæˆ–1åˆ—ï¼Œå› æ­¤æ€»å…±æ·»åŠ äº†2è¡Œæˆ–2åˆ—</span></span><br><span class="line">X = paddle.rand(shape=(<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line">comp_conv2d(conv2d, X).shape</span><br></pre></td></tr></table></figure><pre><code>[1, 1, 4, 4][4, 4]</code></pre><p>å½“å·ç§¯æ ¸çš„é«˜åº¦å’Œå®½åº¦ä¸åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¡«å……ä¸åŒçš„é«˜åº¦å’Œå®½åº¦ï¼Œä½¿è¾“å‡ºå’Œè¾“å…¥å…·æœ‰ç›¸åŒçš„é«˜åº¦å’Œå®½åº¦ã€‚åœ¨å¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é«˜åº¦ä¸º5ï¼Œå®½åº¦ä¸º3çš„å·ç§¯æ ¸ï¼Œé«˜åº¦å’Œå®½åº¦ä¸¤è¾¹çš„å¡«å……åˆ†åˆ«ä¸º2å’Œ1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conv2d = nn.Conv2D(<span class="number">1</span>, <span class="number">1</span>, kernel_size=(<span class="number">5</span>, <span class="number">3</span>), padding=(<span class="number">2</span>, <span class="number">1</span>)) <span class="comment">#ph = kh-1</span></span><br><span class="line">comp_conv2d(conv2d, X).shape</span><br></pre></td></tr></table></figure><pre><code>[1, 1, 4, 4][4, 4]</code></pre><h3 id="3ï¼‰æ­¥å¹…"><a href="#3ï¼‰æ­¥å¹…" class="headerlink" title="3ï¼‰æ­¥å¹…"></a><strong>3ï¼‰æ­¥å¹…</strong></h3><p><strong>å›¾8</strong> ä¸­å·ç§¯æ ¸æ¯æ¬¡æ»‘åŠ¨ä¸€ä¸ªåƒç´ ç‚¹ï¼Œè¿™æ˜¯<strong>æ­¥å¹…ï¼ˆstrideï¼‰</strong> ä¸º1çš„ç‰¹æ®Šæƒ…å†µã€‚<strong>å›¾9</strong> æ˜¯æ­¥å¹…ä¸º2çš„å·ç§¯è¿‡ç¨‹ï¼Œå·ç§¯æ ¸åœ¨å›¾ç‰‡ä¸Šç§»åŠ¨æ—¶ï¼Œæ¯æ¬¡ç§»åŠ¨å¤§å°ä¸º2ä¸ªåƒç´ ç‚¹ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/afdae9af02fc45eabdd9663ee6474e4da86675fa1f444c78aea0e21539b32cf0" width = "800"></center><center><br>å›¾9ï¼šæ­¥å¹…ä¸º2çš„å·ç§¯è¿‡ç¨‹ </br></center><p>å½“å®½å’Œé«˜æ–¹å‘çš„æ­¥å¹…åˆ†åˆ«ä¸º$s_h$å’Œ$s_w$æ—¶ï¼Œè¾“å‡ºç‰¹å¾å›¾å°ºå¯¸çš„è®¡ç®—å…¬å¼æ˜¯ï¼š</p><p>$$<br>H_{out} &#x3D; \frac{H + 2p_h - k_h}{s_h} + 1<br>$$</p><p>$$<br>W_{out} &#x3D; \frac{W + 2p_w - k_w}{s_w} + 1<br>$$</p><p>å‡è®¾è¾“å…¥å›¾ç‰‡å°ºå¯¸æ˜¯$H\times W &#x3D; 100 \times 100$ï¼Œå·ç§¯æ ¸å¤§å°$k_h \times k_w &#x3D; 3 \times 3$ï¼Œå¡«å……$p_h &#x3D; p_w &#x3D; 1$ï¼Œæ­¥å¹…ä¸º$s_h &#x3D; s_w &#x3D; 2$ï¼Œåˆ™è¾“å‡ºç‰¹å¾å›¾çš„å°ºå¯¸ä¸ºï¼š</p><p>$$<br>H_{out} &#x3D; \frac{100 + 2 - 3}{2} + 1 &#x3D; 50<br>$$</p><p>$$<br>W_{out} &#x3D; \frac{100 + 2 - 3}{2} + 1 &#x3D; 50<br>$$</p><p>ä¸‹é¢ï¼Œæˆ‘å°†é«˜åº¦å’Œå®½åº¦çš„æ­¥å¹…è®¾ç½®ä¸º2ï¼Œä»è€Œå°†è¾“å…¥çš„é«˜åº¦å’Œå®½åº¦å‡åŠã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;æ­¥å¹…&#x27;&#x27;&#x27;</span></span><br><span class="line">conv2d = nn.Conv2D(<span class="number">1</span>, <span class="number">1</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">2</span>)</span><br><span class="line">comp_conv2d(conv2d, X).shape</span><br></pre></td></tr></table></figure><pre><code>[1, 1, 2, 2][2, 2]</code></pre><p>æ¥ä¸‹æ¥ï¼Œçœ‹ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¾‹å­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X = paddle.rand(shape=(<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line"><span class="comment"># [(4+0-3)/3]+1[(4+2-5)/4]+1</span></span><br><span class="line">conv2d = nn.Conv2D(<span class="number">1</span>, <span class="number">1</span>, kernel_size=(<span class="number">3</span>, <span class="number">5</span>), padding=(<span class="number">0</span>, <span class="number">1</span>), stride=(<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">comp_conv2d(conv2d, X).shape</span><br></pre></td></tr></table></figure><pre><code>[1, 1, 1, 1][1, 1]</code></pre><h3 id="4ï¼‰æ„Ÿå—é‡"><a href="#4ï¼‰æ„Ÿå—é‡" class="headerlink" title="4ï¼‰æ„Ÿå—é‡"></a><strong>4ï¼‰æ„Ÿå—é‡</strong></h3><p>è¾“å‡ºç‰¹å¾å›¾ä¸Šæ¯ä¸ªç‚¹çš„æ•°å€¼ï¼Œæ˜¯ç”±è¾“å…¥å›¾ç‰‡ä¸Šå¤§å°ä¸º$k_h\times k_w$çš„åŒºåŸŸçš„å…ƒç´ ä¸å·ç§¯æ ¸æ¯ä¸ªå…ƒç´ ç›¸ä¹˜å†ç›¸åŠ å¾—åˆ°çš„ï¼Œæ‰€ä»¥è¾“å…¥å›¾åƒä¸Š$k_h\times k_w$åŒºåŸŸå†…æ¯ä¸ªå…ƒç´ æ•°å€¼çš„æ”¹å˜ï¼Œéƒ½ä¼šå½±å“è¾“å‡ºç‚¹çš„åƒç´ å€¼ã€‚æˆ‘ä»¬å°†è¿™ä¸ªåŒºåŸŸå«åšè¾“å‡ºç‰¹å¾å›¾ä¸Šå¯¹åº”ç‚¹çš„<strong>æ„Ÿå—é‡ï¼ˆReceptive Fieldï¼‰</strong>ã€‚æ„Ÿå—é‡å†…æ¯ä¸ªå…ƒç´ æ•°å€¼çš„å˜åŠ¨ï¼Œéƒ½ä¼šå½±å“è¾“å‡ºç‚¹çš„æ•°å€¼å˜åŒ–ã€‚æ¯”å¦‚$3\times3$å·ç§¯å¯¹åº”çš„æ„Ÿå—é‡å¤§å°å°±æ˜¯$3\times3$ï¼Œå¦‚ <strong>å›¾10</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/1021536721524f4d8f4c1aefa89693c4b0fd388f21a347b583d413b3ac41241b" width = "800"></center><center><br>å›¾10ï¼šæ„Ÿå—é‡ä¸º3Ã—3çš„å·ç§¯ </br></center><p>è€Œå½“é€šè¿‡ä¸¤å±‚$3\times3$çš„å·ç§¯ä¹‹åï¼Œæ„Ÿå—é‡çš„å¤§å°å°†ä¼šå¢åŠ åˆ°$5\times5$ï¼Œå¦‚ <strong>å›¾11</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/ac14916db81e40a48a25ab894d7a95e33fa0eece71d44a55af7bffab462fb7a7" width = "800"></center><center><br>å›¾11ï¼šæ„Ÿå—é‡ä¸º5Ã—5çš„å·ç§¯ </br></center><p>å› æ­¤ï¼Œå½“å¢åŠ å·ç§¯ç½‘ç»œæ·±åº¦çš„åŒæ—¶ï¼Œæ„Ÿå—é‡å°†ä¼šå¢å¤§ï¼Œè¾“å‡ºç‰¹å¾å›¾ä¸­çš„ä¸€ä¸ªåƒç´ ç‚¹å°†ä¼šåŒ…å«æ›´å¤šçš„å›¾åƒè¯­ä¹‰ä¿¡æ¯ã€‚</p><h3 id="5ï¼‰å¤šè¾“å…¥é€šé“ã€å¤šè¾“å‡ºé€šé“"><a href="#5ï¼‰å¤šè¾“å…¥é€šé“ã€å¤šè¾“å‡ºé€šé“" class="headerlink" title="5ï¼‰å¤šè¾“å…¥é€šé“ã€å¤šè¾“å‡ºé€šé“"></a>5ï¼‰å¤šè¾“å…¥é€šé“ã€å¤šè¾“å‡ºé€šé“</h3><p>å‰é¢ä»‹ç»çš„å·ç§¯è®¡ç®—è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå®é™…åº”ç”¨æ—¶ï¼Œå¤„ç†çš„é—®é¢˜è¦å¤æ‚çš„å¤šã€‚ä¾‹å¦‚ï¼šå¯¹äºå½©è‰²å›¾ç‰‡æœ‰RGBä¸‰ä¸ªé€šé“ï¼Œéœ€è¦å¤„ç†å¤šè¾“å…¥é€šé“çš„åœºæ™¯ã€‚è¾“å‡ºç‰¹å¾å›¾å¾€å¾€ä¹Ÿä¼šå…·æœ‰å¤šä¸ªé€šé“ï¼Œè€Œä¸”åœ¨ç¥ç»ç½‘ç»œçš„è®¡ç®—ä¸­å¸¸å¸¸æ˜¯æŠŠä¸€ä¸ªæ‰¹æ¬¡çš„æ ·æœ¬æ”¾åœ¨ä¸€èµ·è®¡ç®—ï¼Œæ‰€ä»¥å·ç§¯ç®—å­éœ€è¦å…·æœ‰æ‰¹é‡å¤„ç†å¤šè¾“å…¥å’Œå¤šè¾“å‡ºé€šé“æ•°æ®çš„åŠŸèƒ½ï¼Œä¸‹é¢å°†åˆ†åˆ«ä»‹ç»è¿™å‡ ç§åœºæ™¯çš„æ“ä½œæ–¹å¼ã€‚</p><p><strong>å¤šè¾“å…¥é€šé“åœºæ™¯</strong></p><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå·ç§¯å±‚çš„æ•°æ®æ˜¯ä¸€ä¸ª2ç»´æ•°ç»„ï¼Œä½†å®é™…ä¸Šä¸€å¼ å›¾ç‰‡å¾€å¾€å«æœ‰RGBä¸‰ä¸ªé€šé“ï¼Œè¦è®¡ç®—å·ç§¯çš„è¾“å‡ºç»“æœï¼Œå·ç§¯æ ¸çš„å½¢å¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚å‡è®¾è¾“å…¥å›¾ç‰‡çš„é€šé“æ•°ä¸º$C_{in}$ï¼Œè¾“å…¥æ•°æ®çš„å½¢çŠ¶æ˜¯$C_{in}\times{H_{in}}\times{W_{in}}$ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚ <strong>å›¾12</strong> æ‰€ç¤ºã€‚</p><ol><li><p>å¯¹æ¯ä¸ªé€šé“åˆ†åˆ«è®¾è®¡ä¸€ä¸ª2ç»´æ•°ç»„ä½œä¸ºå·ç§¯æ ¸ï¼Œå·ç§¯æ ¸æ•°ç»„çš„å½¢çŠ¶æ˜¯$C_{in}\times{k_h}\times{k_w}$ã€‚</p></li><li><p>å¯¹ä»»ä¸€é€šé“$C_{in} \in [0, C_{in})$ï¼Œåˆ†åˆ«ç”¨å¤§å°ä¸º$k_h\times{k_w}$çš„å·ç§¯æ ¸åœ¨å¤§å°ä¸º$H_{in}\times{W_{in}}$çš„äºŒç»´æ•°ç»„ä¸Šåšå·ç§¯ã€‚</p></li><li><p>å°†è¿™$C_{in}$ä¸ªé€šé“çš„è®¡ç®—ç»“æœç›¸åŠ ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå½¢çŠ¶ä¸º$H_{out}\times{W_{out}}$çš„äºŒç»´æ•°ç»„ã€‚</p></li></ol><center><img src="https://ai-studio-static-online.cdn.bcebos.com/92186667b8424a7ca781b22de6766fa62e31512cf2e24e33a4b796541177c9dd" width = "800"></center><center><br>å›¾12ï¼šå¤šè¾“å…¥é€šé“è®¡ç®—è¿‡ç¨‹ </br></center><p>ä¸ºäº†åŠ æ·±ç†è§£ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸‹å¤šè¾“å…¥é€šé“äº’ç›¸å…³è¿ç®—ã€‚ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬æ‰€åšçš„å°±æ˜¯å¯¹æ¯ä¸ªé€šé“æ‰§è¡Œäº’ç›¸å…³æ“ä½œï¼Œç„¶åå°†ç»“æœç›¸åŠ ã€‚</p><hr><blockquote><p>è¯´æ˜ï¼š</p><p><code>zip()</code>å‡½æ•°ç”¨äºå°†å¯è¿­ä»£çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†å¯¹è±¡ä¸­å¯¹åº”çš„å…ƒç´ æ‰“åŒ…æˆä¸€ä¸ªä¸ªå…ƒç»„ï¼Œç„¶åè¿”å›ç”±è¿™äº›å…ƒç»„ç»„æˆçš„åˆ—è¡¨ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">corr2d_multi_in</span>(<span class="params">X, K</span>): </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(corr2d(x, k) <span class="keyword">for</span> x, k <span class="keyword">in</span> <span class="built_in">zip</span>(X, K)) </span><br><span class="line"></span><br><span class="line">X = paddle.to_tensor([[[<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">2.0</span>], [<span class="number">3.0</span>, <span class="number">4.0</span>, <span class="number">5.0</span>], [<span class="number">6.0</span>, <span class="number">7.0</span>, <span class="number">8.0</span>]],</span><br><span class="line">               [[<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>], [<span class="number">4.0</span>, <span class="number">5.0</span>, <span class="number">6.0</span>], [<span class="number">7.0</span>, <span class="number">8.0</span>, <span class="number">9.0</span>]]])</span><br><span class="line"></span><br><span class="line">K = paddle.to_tensor([[[<span class="number">0.0</span>, <span class="number">1.0</span>], [<span class="number">2.0</span>, <span class="number">3.0</span>]], [[<span class="number">1.0</span>, <span class="number">2.0</span>], [<span class="number">3.0</span>, <span class="number">4.0</span>]]])</span><br><span class="line"></span><br><span class="line">corr2d_multi_in(X, K)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[56. , 72. ],        [104., 120.]])</code></pre><p><strong>å¤šè¾“å‡ºé€šé“åœºæ™¯</strong></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå·ç§¯æ“ä½œçš„è¾“å‡ºç‰¹å¾å›¾ä¹Ÿä¼šå…·æœ‰å¤šä¸ªé€šé“$C_{out}$ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è®¾è®¡$C_{out}$ä¸ªç»´åº¦ä¸º$C_{in}\times{k_h}\times{k_w}$çš„å·ç§¯æ ¸ï¼Œå·ç§¯æ ¸æ•°ç»„çš„ç»´åº¦æ˜¯$C_{out}\times C_{in}\times{k_h}\times{k_w}$ï¼Œå¦‚ <strong>å›¾13</strong> æ‰€ç¤ºã€‚</p><ol><li>å¯¹ä»»ä¸€è¾“å‡ºé€šé“$c_{out} \in [0, C_{out})$ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸Šé¢æè¿°çš„å½¢çŠ¶ä¸º$C_{in}\times{k_h}\times{k_w}$çš„å·ç§¯æ ¸å¯¹è¾“å…¥å›¾ç‰‡åšå·ç§¯ã€‚</li><li>å°†è¿™$C_{out}$ä¸ªå½¢çŠ¶ä¸º$H_{out}\times{W_{out}}$çš„äºŒç»´æ•°ç»„æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆç»´åº¦ä¸º$C_{out}\times{H_{out}}\times{W_{out}}$çš„ä¸‰ç»´æ•°ç»„ã€‚</li></ol><hr><blockquote><p><strong>è¯´æ˜ï¼š</strong></p><p>é€šå¸¸å°†å·ç§¯æ ¸çš„è¾“å‡ºé€šé“æ•°å«åšå·ç§¯æ ¸çš„ä¸ªæ•°ã€‚</p><p>ä¸€ç»„è¾“å…¥ä¸€ä¸ªè¾“å‡º</p></blockquote><hr><center><img src="https://ai-studio-static-online.cdn.bcebos.com/cf1fbddc141349e4b7aaeade9a201b78a16d249e069c4f8aaeb77e0ea1a95c31" width = "800"></center><center><br>å›¾13ï¼šå¤šè¾“å‡ºé€šé“è®¡ç®—è¿‡ç¨‹ </br></center><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªè®¡ç®—å¤šä¸ªé€šé“çš„è¾“å‡ºçš„äº’ç›¸å…³å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">corr2d_multi_in_out</span>(<span class="params">X, K</span>):</span><br><span class="line">    <span class="keyword">return</span> paddle.stack([corr2d_multi_in(X, k) <span class="keyword">for</span> k <span class="keyword">in</span> K], <span class="number">0</span>)</span><br><span class="line">    <span class="comment"># paddle.stack æœ€åå°†æ‰€æœ‰ç»“æœéƒ½å åŠ åœ¨ä¸€èµ·</span></span><br><span class="line">    <span class="comment"># è¾“å…¥ x ä¸º N ä¸ª Shape ä¸º [A, B]çš„ Tensor, å¦‚æœ axis = 0 , åˆ™è¾“å‡º Tensor çš„ Shape ä¸º [N, A, B]</span></span><br><span class="line"></span><br><span class="line">K = paddle.to_tensor([[[<span class="number">0.0</span>, <span class="number">1.0</span>], [<span class="number">2.0</span>, <span class="number">3.0</span>]], [[<span class="number">1.0</span>, <span class="number">2.0</span>], [<span class="number">3.0</span>, <span class="number">4.0</span>]]])</span><br><span class="line">K = paddle.stack((K, K + <span class="number">1</span>, K + <span class="number">2</span>), <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;(C_out,C_in,k_h,k_w)ï¼š&#x27;</span>, K.shape)</span><br><span class="line"></span><br><span class="line">corr2d_multi_in_out(X, K)</span><br></pre></td></tr></table></figure><pre><code>(C_out,C_in,k_h,k_w)ï¼š [3, 2, 2, 2]Tensor(shape=[3, 2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[[56. , 72. ],         [104., 120.]],        [[76. , 100.],         [148., 172.]],        [[96. , 128.],         [192., 224.]]])</code></pre><p><strong>æ‰¹é‡æ“ä½œ</strong></p><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œçš„è®¡ç®—ä¸­ï¼Œé€šå¸¸å°†å¤šä¸ªæ ·æœ¬æ”¾åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªmini-batchè¿›è¡Œæ‰¹é‡æ“ä½œï¼Œå³è¾“å…¥æ•°æ®çš„ç»´åº¦æ˜¯$N\times{C_{in}}\times{H_{in}}\times{W_{in}}$ã€‚ç”±äºä¼šå¯¹æ¯å¼ å›¾ç‰‡ä½¿ç”¨åŒæ ·çš„å·ç§¯æ ¸è¿›è¡Œå·ç§¯æ“ä½œï¼Œå·ç§¯æ ¸çš„ç»´åº¦ä¸ä¸Šé¢å¤šè¾“å‡ºé€šé“çš„æƒ…å†µä¸€æ ·ï¼Œä»ç„¶æ˜¯$C_{out}\times C_{in}\times{k_h}\times{k_w}$ï¼Œè¾“å‡ºç‰¹å¾å›¾çš„ç»´åº¦æ˜¯$N\times{C_{out}}\times{H_{out}}\times{W_{out}}$ï¼Œå¦‚ <strong>å›¾14</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/60760d68001c40d6a6c500b17f57d8deae7b5921631b4b6b896b057b904d24b1" width = "800"></center><center><br>å›¾14ï¼šæ‰¹é‡æ“ä½œ </br></center><h3 id="6ï¼‰1-times-1-å·ç§¯å±‚"><a href="#6ï¼‰1-times-1-å·ç§¯å±‚" class="headerlink" title="6ï¼‰1 $\times$ 1 å·ç§¯å±‚"></a><strong>6ï¼‰1 $\times$ 1 å·ç§¯å±‚</strong></h3><p>å› ä¸ºä½¿ç”¨äº†æœ€å°çª—å£ï¼Œ$1\times 1$å·ç§¯å¤±å»äº†å·ç§¯å±‚çš„ç‰¹æœ‰èƒ½åŠ›ï¼Œå³åœ¨é«˜åº¦å’Œå®½åº¦ç»´åº¦ä¸Šï¼Œè¯†åˆ«ç›¸é‚»å…ƒç´ é—´ç›¸äº’ä½œç”¨çš„èƒ½åŠ›ã€‚å…¶å®$1\times 1$å·ç§¯çš„ä½œç”¨åœ¨äºï¼šå®ƒä¸è¯†åˆ«ç©ºé—´æ¨¡å¼ï¼Œåªæ˜¯èåˆé€šé“ã€‚ä¸‹å›¾å±•ç¤ºäº†ä½¿ç”¨$1\times 1$å·ç§¯æ ¸ä¸$3$ä¸ªè¾“å…¥é€šé“å’Œ$2$ä¸ªè¾“å‡ºé€šé“çš„äº’ç›¸å…³è®¡ç®—ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/1b206e97ea5f4e3aabbd335848830262280ee32c91cd4b5e8bad5b8b0f9ed8d4" width = "450"></center><center><br>å›¾15ï¼š1Ã—1å·ç§¯ </br></center><blockquote><p>é€šé“èåˆï¼šå°†ä¸‰ä¸ªé€šé“çš„æ•°Ã—å·ç§¯å¹¶ç›¸åŠ åœ¨äº†ä¸€èµ·ã€‚</p></blockquote><p>è¿™é‡Œè¾“å…¥å’Œè¾“å‡ºå…·æœ‰ç›¸åŒçš„é«˜åº¦å’Œå®½åº¦ï¼Œè¾“å‡ºä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä»è¾“å…¥å›¾åƒä¸­åŒä¸€ä½ç½®çš„å…ƒç´ çš„çº¿æ€§ç»„åˆã€‚æˆ‘ä»¬å¯ä»¥å°†$1\times 1$å·ç§¯å±‚çœ‹ä½œæ˜¯åœ¨æ¯ä¸ªåƒç´ ä½ç½®åº”ç”¨çš„å…¨è¿æ¥å±‚ï¼Œä»¥$c_i$ä¸ªè¾“å…¥å€¼è½¬æ¢ä¸º$c_o$ä¸ªè¾“å‡ºå€¼ã€‚å› ä¸ºè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå·ç§¯å±‚ï¼Œæ‰€ä»¥è·¨åƒç´ çš„æƒé‡æ˜¯ä¸€è‡´çš„ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•çš„è®¤ä¸ºï¼Œè¿™æ ·çš„ç›®çš„æ›´å¤šçš„æ˜¯ä¸ºäº†å®ç°é€šé“çš„çº¿æ€§å˜æ¢ï¼Œé‡æ–°æ’åˆ—ç»„åˆä¸ºæ›´å¥½çš„ç‰¹å¾åŸºåº•ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¨è¿æ¥å±‚å’Œäº’ç›¸å…³å‡½æ•°åˆ†åˆ«å®ç°$1 \times 1$å·ç§¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;1 x 1 çš„å·ç§¯å±‚&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">corr2d_multi_in_out_1x1</span>(<span class="params">X, K</span>):</span><br><span class="line">    c_i, h, w = X.shape</span><br><span class="line">    c_o = K.shape[<span class="number">0</span>]</span><br><span class="line">    X = X.reshape((c_i, h * w))</span><br><span class="line">    K = K.reshape((c_o, c_i))</span><br><span class="line">    Y = paddle.matmul(K, X) <span class="comment"># matmul çŸ©é˜µä¹˜æ³•</span></span><br><span class="line">    <span class="keyword">return</span> Y.reshape((c_o, h, w))</span><br><span class="line"></span><br><span class="line">X = paddle.normal(<span class="number">0</span>, <span class="number">1</span>, (<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>)) <span class="comment">#ï¼ˆè¾“å…¥ï¼Œh*wï¼‰</span></span><br><span class="line">K = paddle.normal(<span class="number">0</span>, <span class="number">1</span>, (<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>)) <span class="comment"># ï¼ˆè¾“å‡ºï¼Œè¾“å…¥ï¼Œ1*1ï¼‰</span></span><br><span class="line"></span><br><span class="line">Y1 = corr2d_multi_in_out_1x1(X, K)</span><br><span class="line">Y2 = corr2d_multi_in_out(X, K)</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">float</span>(paddle.<span class="built_in">abs</span>(Y1 - Y2).<span class="built_in">sum</span>()) &lt; <span class="number">1e-6</span> <span class="comment"># ç”±äºæµ®ç‚¹æ•°ç²¾åº¦çš„åŒºåˆ«ï¼Œå‡ ä¹è®¤ä¸ºY1=Y2ï¼Œä¹Ÿå°±æ˜¯å…¨è¿æ¥ä¸1*1äº’ç›¸å…³è¿ç®—çš„ç»“æœç›¸åŒã€‚</span></span><br><span class="line">paddle.<span class="built_in">abs</span>(Y1 - Y2).<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=True,       [0.00000015])</code></pre><h2 id="å››ã€é£æ¡¨å·ç§¯APIä»‹ç»"><a href="#å››ã€é£æ¡¨å·ç§¯APIä»‹ç»" class="headerlink" title="å››ã€é£æ¡¨å·ç§¯APIä»‹ç»"></a>å››ã€é£æ¡¨å·ç§¯APIä»‹ç»</h2><p>é£æ¡¨å·ç§¯ç®—å­å¯¹åº”çš„APIæ˜¯ <a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Conv2D_cn.html">paddle.nn.Conv2D</a>ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥è°ƒç”¨APIè¿›è¡Œè®¡ç®—ï¼Œä¹Ÿå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šä¿®æ”¹ã€‚Conv2Dåç§°ä¸­çš„â€œ2Dâ€è¡¨æ˜å·ç§¯æ ¸æ˜¯äºŒç»´çš„ï¼Œå¤šç”¨äºå¤„ç†å›¾åƒæ•°æ®ã€‚ç±»ä¼¼çš„ï¼Œä¹Ÿæœ‰Conv3Då¯ä»¥ç”¨äºå¤„ç†è§†é¢‘æ•°æ®ï¼ˆå›¾åƒçš„åºåˆ—ï¼‰ã€‚</p><blockquote><p><em>class</em> paddle.nn.Conv2D(<em>in_channels, out_channels, kernel_size, stride&#x3D;1, padding&#x3D;0, dilation&#x3D;1, groups&#x3D;1, padding_mode&#x3D;â€™zerosâ€™, weight_attr&#x3D;None, bias_attr&#x3D;None, data_format&#x3D;â€™NCHWâ€™</em>)</p></blockquote><p>å¸¸ç”¨çš„å‚æ•°å¦‚ä¸‹ï¼š</p><ul><li><code>in_channels(int)</code> - è¾“å…¥å›¾åƒçš„é€šé“æ•°ã€‚</li><li><code>out_channels(int)</code> - å·ç§¯æ ¸çš„ä¸ªæ•°ï¼Œå’Œè¾“å‡ºç‰¹å¾å›¾é€šé“æ•°ç›¸åŒï¼Œç›¸å½“äºä¸Šæ–‡ä¸­çš„$C_{out}$ã€‚</li><li><code>kernel_size(int|list|tuple)</code> - å·ç§¯æ ¸å¤§å°ï¼Œå¯ä»¥æ˜¯æ•´æ•°ï¼Œæ¯”å¦‚3ï¼Œè¡¨ç¤ºå·ç§¯æ ¸çš„é«˜å’Œå®½å‡ä¸º3 ï¼›æˆ–è€…æ˜¯ä¸¤ä¸ªæ•´æ•°çš„listï¼Œä¾‹å¦‚[3,2]ï¼Œè¡¨ç¤ºå·ç§¯æ ¸çš„é«˜ä¸º3ï¼Œå®½ä¸º2ã€‚</li><li><code>stride(int|list|tupleï¼Œå¯é€‰)</code> - æ­¥é•¿å¤§å°ï¼Œå¯ä»¥æ˜¯æ•´æ•°ï¼Œé»˜è®¤å€¼ä¸º1ï¼Œè¡¨ç¤ºå‚ç›´å’Œæ°´å¹³æ»‘åŠ¨æ­¥å¹…å‡ä¸º1ï¼›æˆ–è€…æ˜¯ä¸¤ä¸ªæ•´æ•°çš„listï¼Œä¾‹å¦‚[3,2]ï¼Œè¡¨ç¤ºå‚ç›´æ»‘åŠ¨æ­¥å¹…ä¸º3ï¼Œæ°´å¹³æ»‘åŠ¨æ­¥å¹…ä¸º2ã€‚</li><li><code>padding(int|list|tuple|strï¼Œå¯é€‰)</code> - å¡«å……å¤§å°ï¼Œå¯ä»¥æ˜¯æ•´æ•°ï¼Œæ¯”å¦‚1ï¼Œè¡¨ç¤ºç«–ç›´å’Œæ°´å¹³è¾¹ç•Œå¡«å……å¤§å°å‡ä¸º1ï¼›æˆ–è€…æ˜¯ä¸¤ä¸ªæ•´æ•°çš„listï¼Œä¾‹å¦‚[2,1]ï¼Œè¡¨ç¤ºç«–ç›´è¾¹ç•Œå¡«å……å¤§å°ä¸º2ï¼Œæ°´å¹³è¾¹ç•Œå¡«å……å¤§å°ä¸º1ã€‚</li></ul><hr><blockquote><p><strong>å¼ºè°ƒ</strong>ï¼š</p><ul><li>è¾“å…¥æ•°æ®ç»´åº¦ï¼š$[N, C_{in}, H_{in}, W_{in}]$ ã€å›¾ç‰‡æ•°,è¾“å…¥é€šé“æ•°,å›¾ç‰‡çš„é«˜,å›¾ç‰‡çš„å®½ã€‘</li><li>è¾“å‡ºæ•°æ®ç»´åº¦ï¼š$[N, out_channels, H_{out}, W_{out}]$     ã€æ‰¹é‡ç»´ï¼šç”Ÿæˆçš„ç‰¹å¾ç»„æ•°ï¼Œè¾“å‡ºé€šé“æ•°(å¯ä»¥è°ƒæ•´)ã€‘</li><li>æƒé‡å‚æ•°$w$çš„ç»´åº¦ï¼š$[out_channels, C_{in}, filter_size_h, filter_size_w]$</li><li>åç½®å‚æ•°$b$çš„ç»´åº¦æ˜¯ï¼š$[out_channels]$</li></ul><p>æ³¨æ„ï¼Œ**å³ä½¿è¾“å…¥åªæœ‰ä¸€å¼ ç°åº¦å›¾ç‰‡$[H_{in}, W_{in}]$ï¼Œä¹Ÿéœ€è¦å¤„ç†æˆå››ä¸ªç»´åº¦çš„è¾“å…¥å‘é‡$[1, 1, H_{in}, W_{in}]$**ã€‚</p></blockquote><hr><h3 id="å·ç§¯ç®—å­åº”ç”¨ä¸¾ä¾‹"><a href="#å·ç§¯ç®—å­åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="å·ç§¯ç®—å­åº”ç”¨ä¸¾ä¾‹"></a><strong>å·ç§¯ç®—å­åº”ç”¨ä¸¾ä¾‹</strong></h3><p>ä¸‹é¢ä»‹ç»å·ç§¯ç®—å­åœ¨å›¾ç‰‡ä¸­åº”ç”¨çš„ä¸‰ä¸ªæ¡ˆä¾‹ï¼Œå¹¶è§‚å¯Ÿå…¶è®¡ç®—ç»“æœã€‚</p><h5 id="æ¡ˆä¾‹1â€”â€”ç®€å•çš„é»‘ç™½è¾¹ç•Œæ£€æµ‹"><a href="#æ¡ˆä¾‹1â€”â€”ç®€å•çš„é»‘ç™½è¾¹ç•Œæ£€æµ‹" class="headerlink" title="æ¡ˆä¾‹1â€”â€”ç®€å•çš„é»‘ç™½è¾¹ç•Œæ£€æµ‹"></a>æ¡ˆä¾‹1â€”â€”ç®€å•çš„é»‘ç™½è¾¹ç•Œæ£€æµ‹</h5><p>ä¸‹é¢æ˜¯ä½¿ç”¨Conv2Dç®—å­å®Œæˆä¸€ä¸ªå›¾åƒè¾¹ç•Œæ£€æµ‹çš„ä»»åŠ¡ã€‚å›¾åƒå·¦è¾¹ä¸ºå…‰äº®éƒ¨åˆ†ï¼Œå³è¾¹ä¸ºé»‘æš—éƒ¨åˆ†ï¼Œéœ€è¦æ£€æµ‹å‡ºå…‰äº®è·Ÿé»‘æš—çš„åˆ†ç•Œå¤„ã€‚</p><p>è®¾ç½®å®½åº¦æ–¹å‘çš„å·ç§¯æ ¸ä¸º$[1, 0, -1]$ï¼Œæ­¤å·ç§¯æ ¸ä¼šå°†å®½åº¦æ–¹å‘é—´éš”ä¸º1çš„ä¸¤ä¸ªåƒç´ ç‚¹çš„æ•°å€¼ç›¸å‡ã€‚å½“å·ç§¯æ ¸åœ¨å›¾ç‰‡ä¸Šæ»‘åŠ¨æ—¶ï¼Œå¦‚æœå®ƒæ‰€è¦†ç›–çš„åƒç´ ç‚¹ä½äºäº®åº¦ç›¸åŒçš„åŒºåŸŸï¼Œåˆ™å·¦å³é—´éš”ä¸º1çš„ä¸¤ä¸ªåƒç´ ç‚¹æ•°å€¼çš„å·®ä¸º0ã€‚åªæœ‰å½“å·ç§¯æ ¸è¦†ç›–çš„åƒç´ ç‚¹æœ‰çš„å¤„äºå…‰äº®åŒºåŸŸï¼Œæœ‰çš„å¤„åœ¨é»‘æš—åŒºåŸŸæ—¶ï¼Œå·¦å³é—´éš”ä¸º1çš„ä¸¤ä¸ªç‚¹åƒç´ å€¼çš„å·®æ‰ä¸ä¸º0ã€‚å°†æ­¤å·ç§¯æ ¸ä½œç”¨åˆ°å›¾ç‰‡ä¸Šï¼Œè¾“å‡ºç‰¹å¾å›¾ä¸Šåªæœ‰å¯¹åº”é»‘ç™½åˆ†ç•Œçº¿çš„åœ°æ–¹åƒç´ å€¼æ‰ä¸ä¸º0ã€‚å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œç»“æœè¾“å‡ºåœ¨ä¸‹æ–¹çš„å›¾æ¡ˆä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D</span><br><span class="line"><span class="keyword">from</span> paddle.nn.initializer <span class="keyword">import</span> Assign</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¾“å…¥å›¾ç‰‡ï¼Œå›¾ç‰‡å·¦è¾¹çš„åƒç´ ç‚¹å–å€¼ä¸º1ï¼Œå³è¾¹çš„åƒç´ ç‚¹å–å€¼ä¸º0</span></span><br><span class="line">img = np.ones([<span class="number">50</span>, <span class="number">50</span>], dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">img[:, <span class="number">30</span>:] = <span class="number">0.</span></span><br><span class="line">plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å›¾ç‰‡å½¢çŠ¶è°ƒæ•´ä¸º[N, C, H, W]çš„å½¢å¼</span></span><br><span class="line">x = img.reshape([<span class="number">1</span>, <span class="number">1</span>, <span class="number">50</span>, <span class="number">50</span>])</span><br><span class="line">x = paddle.to_tensor(x)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/45.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåˆå§‹åŒ–æƒé‡å‚æ•°w</span></span><br><span class="line">w = np.array([<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>], dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"><span class="comment"># å°†æƒé‡å‚æ•°è°ƒæ•´æˆç»´åº¦ä¸º[cout, cin, kh, kw]çš„å››ç»´å¼ é‡</span></span><br><span class="line">w = w.reshape([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå·ç§¯ç®—å­ï¼Œè®¾ç½®è¾“å‡ºé€šé“æ•°ï¼Œå·ç§¯æ ¸å¤§å°ï¼Œå’Œåˆå§‹åŒ–æƒé‡å‚æ•°ï¼Œé€šè¿‡å‚æ•°å±æ€§weight_attræŒ‡å®šå‚æ•°åˆå§‹åŒ–æ–¹å¼ï¼ˆé»˜è®¤Xavierï¼‰</span></span><br><span class="line">conv = Conv2D(in_channels=<span class="number">1</span>, out_channels=<span class="number">1</span>, kernel_size=[<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">       weight_attr=paddle.ParamAttr(initializer=Assign(value=w)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å·ç§¯ç®—å­ä½œç”¨åœ¨è¾“å…¥å›¾ç‰‡ä¸Š</span></span><br><span class="line">y = conv(x)</span><br><span class="line"><span class="comment"># å°†è¾“å‡ºtensorè½¬åŒ–ä¸ºnumpy.ndarray</span></span><br><span class="line">out = y.numpy()</span><br></pre></td></tr></table></figure><p>å·ç§¯ç®—å­Conv2Dè¾“å‡ºæ•°æ®å½¢çŠ¶ä¸º<code>[N, C, H, W]</code>å½¢å¼ï¼Œæ­¤å¤„è¾“å‡ºæ•°æ®å½¢çŠ¶ä¸º<code>[1, 1, H, W]</code>ï¼Œæ˜¯ 4 ç»´æ•°ç»„ï¼Œä½†æ˜¯ç”»å›¾å‡½æ•°<code>plt.imshow</code>ç”»ç°åº¦å›¾æ—¶ï¼Œåªæ¥å— 2 ç»´æ•°ç»„ã€‚é€šè¿‡ <code>numpy.squeeze</code> å‡½æ•°å°†å¤§å°ä¸º1çš„ç»´åº¦æ¶ˆé™¤ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»˜åˆ¶å­å›¾</span></span><br><span class="line">f = plt.subplot(<span class="number">121</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;input image&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line">f = plt.subplot(<span class="number">122</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;output featuremap&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.imshow(out.squeeze(), cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/46.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å·ç§¯å±‚çš„æƒé‡å‚æ•°åå­—å’Œæ•°å€¼</span></span><br><span class="line"><span class="built_in">print</span>(conv.weight)</span><br><span class="line"><span class="comment"># å‚çœ‹å·ç§¯å±‚çš„åç½®å‚æ•°åå­—å’Œæ•°å€¼</span></span><br><span class="line"><span class="built_in">print</span>(conv.bias)</span><br></pre></td></tr></table></figure><pre><code>Parameter containing:Tensor(shape=[1, 1, 1, 3], dtype=float32, place=Place(cpu), stop_gradient=False,       [[[[ 1.,  0., -1.]]]])Parameter containing:Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=False,       [0.])</code></pre><h5 id="æ¡ˆä¾‹2â€”â€”å›¾åƒä¸­ç‰©ä½“è¾¹ç¼˜æ£€æµ‹"><a href="#æ¡ˆä¾‹2â€”â€”å›¾åƒä¸­ç‰©ä½“è¾¹ç¼˜æ£€æµ‹" class="headerlink" title="æ¡ˆä¾‹2â€”â€”å›¾åƒä¸­ç‰©ä½“è¾¹ç¼˜æ£€æµ‹"></a>æ¡ˆä¾‹2â€”â€”å›¾åƒä¸­ç‰©ä½“è¾¹ç¼˜æ£€æµ‹</h5><p>ä¸Šé¢å±•ç¤ºçš„æ˜¯ä¸€ä¸ªäººä¸ºæ„é€ å‡ºæ¥çš„ç®€å•å›¾ç‰‡ï¼Œä½¿ç”¨å·ç§¯ç½‘ç»œæ£€æµ‹å›¾ç‰‡æ˜æš—åˆ†ç•Œå¤„çš„ç¤ºä¾‹ã€‚</p><p>å¯¹äºçœŸå®çš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆé€‚çš„å·ç§¯æ ¸ï¼ˆ$3X3$å·ç§¯æ ¸çš„ä¸­é—´å€¼æ˜¯ $8$ ï¼Œå‘¨å›´ä¸€åœˆçš„å€¼æ˜¯ $-1$ ï¼‰å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œç”¨æ¥æ£€æµ‹ç‰©ä½“çš„å¤–å½¢è½®å»“ï¼Œè§‚å¯Ÿè¾“å‡ºç‰¹å¾å›¾è·ŸåŸå›¾ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D</span><br><span class="line"><span class="keyword">from</span> paddle.nn.initializer <span class="keyword">import</span> Assign</span><br><span class="line"></span><br><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">&#x27;work/1.jpg&#x27;</span>)</span><br><span class="line"><span class="comment"># å°†è¯»å…¥çš„å›¾ç‰‡è½¬åŒ–ä¸ºfloat32ç±»å‹çš„numpy.ndarray</span></span><br><span class="line">x = np.array(img).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(x.shape)<span class="comment"># (672,960,3)</span></span><br><span class="line"><span class="comment"># å›¾ç‰‡è¯»å…¥æˆndarryæ—¶ï¼Œå½¢çŠ¶æ˜¯[H, W, 3]ï¼Œå°†é€šé“è¿™ä¸€ç»´åº¦è°ƒæ•´åˆ°æœ€å‰é¢</span></span><br><span class="line">x = np.transpose(x, (<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(x.shape)<span class="comment"># (3,672,960)</span></span><br><span class="line"><span class="comment"># å°†æ•°æ®å½¢çŠ¶è°ƒæ•´ä¸º[N, C, H, W]æ ¼å¼</span></span><br><span class="line">x = x.reshape(<span class="number">1</span>, <span class="number">3</span>, img.height, img.width)</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line"><span class="built_in">print</span>(x.shape) [<span class="number">1</span>, <span class="number">3</span>, <span class="number">672</span>, <span class="number">960</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®å·ç§¯æ ¸å‚æ•°</span></span><br><span class="line"><span class="comment"># ä¸‹é¢é™¤ä»¥8çš„åŸå› æ˜¯å‘å¯¹å·ç§¯æ ¸çš„æ•°å€¼è¿›è¡Œç®—æ”¾ï¼Œè¡¨ç¤ºæˆåˆ†æ•°</span></span><br><span class="line">w = np.array([[-<span class="number">1</span>,-<span class="number">1</span>,-<span class="number">1</span>], [-<span class="number">1</span>,<span class="number">8</span>,-<span class="number">1</span>], [-<span class="number">1</span>,-<span class="number">1</span>,-<span class="number">1</span>]], dtype=<span class="string">&#x27;float32&#x27;</span>)/<span class="number">8</span></span><br><span class="line">w = w.reshape([<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment"># ç”±äºè¾“å…¥é€šé“æ•°æ˜¯3ï¼Œå°†å·ç§¯æ ¸çš„å½¢çŠ¶ä»[1,1,3,3]é€šè¿‡repeatæ–¹å¼è°ƒæ•´ä¸º[1,3,3,3]</span></span><br><span class="line">w = np.repeat(w, <span class="number">3</span>, axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºå·ç§¯ç®—å­ï¼Œè¾“å‡ºé€šé“æ•°ä¸º1ï¼Œå·ç§¯æ ¸å¤§å°ä¸º3x3ï¼Œå¹¶ä½¿ç”¨ä¸Šé¢çš„è®¾ç½®å¥½çš„æ•°å€¼ä½œä¸ºå·ç§¯æ ¸æƒé‡çš„åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">conv = Conv2D(in_channels=<span class="number">3</span>, out_channels=<span class="number">1</span>, kernel_size=[<span class="number">3</span>, <span class="number">3</span>], </span><br><span class="line">            weight_attr=paddle.ParamAttr(initializer=Assign(value=w)))</span><br><span class="line"></span><br><span class="line">y = conv(x)</span><br><span class="line">out = y.numpy()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»˜åˆ¶å­å›¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>, <span class="number">10</span>))</span><br><span class="line">f = plt.subplot(<span class="number">121</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;input image&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.imshow(img)</span><br><span class="line"></span><br><span class="line">f = plt.subplot(<span class="number">122</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;output feature map&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.imshow(out.squeeze(), cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/47.png" alt="png"></p><h5 id="æ¡ˆä¾‹3â€”â€”å›¾åƒå‡å€¼æ¨¡ç³Š"><a href="#æ¡ˆä¾‹3â€”â€”å›¾åƒå‡å€¼æ¨¡ç³Š" class="headerlink" title="æ¡ˆä¾‹3â€”â€”å›¾åƒå‡å€¼æ¨¡ç³Š"></a>æ¡ˆä¾‹3â€”â€”å›¾åƒå‡å€¼æ¨¡ç³Š</h5><p>å¦å¤–ä¸€ç§æ¯”è¾ƒå¸¸è§çš„å·ç§¯æ ¸ï¼ˆ$5X5$çš„å·ç§¯æ ¸ä¸­æ¯ä¸ªå€¼å‡ä¸º$1$ï¼‰æ˜¯ç”¨å½“å‰åƒç´ è·Ÿå®ƒé‚»åŸŸå†…çš„åƒç´ å–å¹³å‡ï¼Œè¿™æ ·å¯ä»¥èƒ½å¤Ÿæœ‰æ•ˆçš„æŠ‘åˆ¶å™ªå£°ï¼Œå¹³æ»‘å›¾åƒï¼ˆé«˜æ–¯æ»¤æ³¢ï¼‰ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Conv2D</span><br><span class="line"><span class="keyword">from</span> paddle.nn.initializer <span class="keyword">import</span> Assign</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å…¥å›¾ç‰‡å¹¶è½¬æˆnumpy.ndarray</span></span><br><span class="line"><span class="comment"># æ¢æˆç°åº¦å›¾</span></span><br><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">&#x27;work/2.jpg&#x27;</span>).convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">img = np.array(img)</span><br><span class="line">x = img.astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x = x.reshape(<span class="number">1</span>, <span class="number">1</span>, img.shape[<span class="number">0</span>], img.shape[<span class="number">1</span>])</span><br><span class="line">x = paddle.to_tensor(x)</span><br><span class="line">x</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 1, 720, 1280], dtype=float32, place=Place(cpu), stop_gradient=True,       [[[[191., 195., 195., ..., 185., 184., 184.],          [189., 193., 194., ..., 185., 186., 186.],          [191., 195., 195., ..., 185., 186., 186.],          ...,          [184., 183., 181., ..., 210., 209., 216.],          [178., 179., 179., ..., 208., 208., 213.],          [171., 172., 174., ..., 211., 210., 210.]]]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">w = np.ones([<span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>], dtype = <span class="string">&#x27;float32&#x27;</span>)/<span class="number">25</span></span><br><span class="line">conv = Conv2D(in_channels=<span class="number">1</span>, out_channels=<span class="number">1</span>, kernel_size=[<span class="number">5</span>, <span class="number">5</span>], </span><br><span class="line">        weight_attr=paddle.ParamAttr(initializer=Assign(value=w)))</span><br><span class="line"></span><br><span class="line">y = conv(x)</span><br><span class="line">out = y.numpy()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">12</span>, <span class="number">12</span>))</span><br><span class="line">f = plt.subplot(<span class="number">121</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;input image&#x27;</span>)</span><br><span class="line">plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line">f = plt.subplot(<span class="number">122</span>)</span><br><span class="line">f.set_title(<span class="string">&#x27;output feature map&#x27;</span>)</span><br><span class="line">out = out.squeeze()<span class="comment"># å‰”é™¤æ‰å‰é¢çš„ä¸¤ä¸ªç»´åº¦ï¼Œå¾—åˆ°äºŒç»´çš„æ•°æ®</span></span><br><span class="line">plt.imshow(out, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/48.png" alt="png"></p><h2 id="äº”ã€æ± åŒ–ï¼ˆPoolingï¼‰"><a href="#äº”ã€æ± åŒ–ï¼ˆPoolingï¼‰" class="headerlink" title="äº”ã€æ± åŒ–ï¼ˆPoolingï¼‰"></a>äº”ã€æ± åŒ–ï¼ˆPoolingï¼‰</h2><p>â€‹æ± åŒ–æ˜¯ä½¿ç”¨æŸä¸€ä½ç½®çš„ç›¸é‚»è¾“å‡ºçš„æ€»ä½“ç»Ÿè®¡ç‰¹å¾ä»£æ›¿ç½‘ç»œåœ¨è¯¥ä½ç½®çš„è¾“å‡ºï¼Œå…¶å¥½å¤„æ˜¯å½“è¾“å…¥æ•°æ®åšå‡ºå°‘é‡å¹³ç§»æ—¶ï¼Œç»è¿‡æ± åŒ–å‡½æ•°åçš„å¤§å¤šæ•°è¾“å‡ºè¿˜èƒ½ä¿æŒä¸å˜ã€‚æ¯”å¦‚ï¼šå½“è¯†åˆ«ä¸€å¼ å›¾åƒæ˜¯å¦æ˜¯äººè„¸æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“äººè„¸å·¦è¾¹æœ‰ä¸€åªçœ¼ç›ï¼Œå³è¾¹ä¹Ÿæœ‰ä¸€åªçœ¼ç›ï¼Œè€Œä¸éœ€è¦çŸ¥é“çœ¼ç›çš„ç²¾ç¡®ä½ç½®ï¼Œè¿™æ—¶å€™é€šè¿‡æ± åŒ–æŸä¸€ç‰‡åŒºåŸŸçš„åƒç´ ç‚¹æ¥å¾—åˆ°æ€»ä½“ç»Ÿè®¡ç‰¹å¾ä¼šæ˜¾å¾—å¾ˆæœ‰ç”¨ã€‚</p><p>â€‹ä½¿ç”¨æ± åŒ–å±‚ï¼Œä½¿å¾—å›¾åƒå‹ç¼©æ—¶å»æ‰ä¸€äº›æ— å…³ç´§è¦çš„ä¿¡æ¯ï¼Œè€Œç•™ä¸‹çš„ä¿¡æ¯åˆ™æ˜¯å…·æœ‰<strong>å°ºåº¦ä¸å˜æ€§</strong>çš„ç‰¹å¾ï¼Œæ˜¯æœ€èƒ½è¡¨è¾¾å›¾åƒçš„ç‰¹å¾ã€‚ç”±äºæ± åŒ–ä¹‹åç‰¹å¾å›¾ä¼šå˜å¾—æ›´å°ï¼Œå¦‚æœåé¢è¿æ¥çš„æ˜¯å…¨è¿æ¥å±‚ï¼Œèƒ½æœ‰æ•ˆçš„å‡å°ç¥ç»å…ƒçš„ä¸ªæ•°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´å¹¶æé«˜è®¡ç®—æ•ˆç‡ã€‚</p><p>â€‹æ€»ç»“æ¥è¯´ï¼Œæ± åŒ–å±‚çš„ä¸»è¦ç›®çš„æ˜¯ï¼š<code>é™ä½å·ç§¯å±‚å¯¹ä½ç½®çš„æ•æ„Ÿæ€§</code>ã€‚</p><h3 id="5-1-å¹³å‡æ± åŒ–ä¸æœ€å¤§æ± åŒ–"><a href="#5-1-å¹³å‡æ± åŒ–ä¸æœ€å¤§æ± åŒ–" class="headerlink" title="5.1 å¹³å‡æ± åŒ–ä¸æœ€å¤§æ± åŒ–"></a>5.1 å¹³å‡æ± åŒ–ä¸æœ€å¤§æ± åŒ–</h3><p>å¦‚ <strong>å›¾15</strong> æ‰€ç¤ºï¼Œå°†ä¸€ä¸ª$2\times 2$çš„åŒºåŸŸ<strong>æ± åŒ–ï¼ˆPoolingï¼‰</strong> æˆä¸€ä¸ªåƒç´ ç‚¹ã€‚</p><p>ä¸åŒäºå·ç§¯å±‚ä¸­çš„è¾“å…¥ä¸å·ç§¯æ ¸ä¹‹é—´çš„äº’ç›¸å…³è®¡ç®—ï¼Œæ± åŒ–å±‚ä¸åŒ…å«å‚æ•°ã€‚ ç›¸åï¼Œæ± è¿ç®—æ˜¯ç¡®å®šæ€§çš„ï¼Œæˆ‘ä»¬é€šå¸¸è®¡ç®—æ± åŒ–çª—å£ä¸­æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼æˆ–å¹³å‡å€¼ã€‚è¿™äº›æ“ä½œåˆ†åˆ«ç§°ä¸ºæœ€å¤§æ± åŒ–ï¼ˆmaximum poolingï¼‰å’Œå¹³å‡æ± åŒ–ï¼ˆaverage poolingï¼‰ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/5479daa3734d424bb710615d3c4f7e017ba2558808a8421ca7c914f3fced0a48" width = "600"></center><center><br>å›¾15ï¼šæ± åŒ– </br></center><ul><li>å¦‚å›¾15ï¼ˆaï¼‰ï¼šå¹³å‡æ± åŒ–ã€‚è¿™é‡Œä½¿ç”¨å¤§å°ä¸º$2\times2$çš„æ± åŒ–çª—å£ï¼Œæ¯æ¬¡ç§»åŠ¨çš„æ­¥å¹…ä¸º2ï¼Œå¯¹æ± åŒ–çª—å£è¦†ç›–åŒºåŸŸå†…çš„åƒç´ å–å¹³å‡å€¼ï¼Œå¾—åˆ°ç›¸åº”çš„è¾“å‡ºç‰¹å¾å›¾çš„åƒç´ å€¼ã€‚</li><li>å¦‚å›¾15ï¼ˆbï¼‰ï¼šæœ€å¤§æ± åŒ–ã€‚å¯¹æ± åŒ–çª—å£è¦†ç›–åŒºåŸŸå†…çš„åƒç´ å–æœ€å¤§å€¼ï¼Œå¾—åˆ°è¾“å‡ºç‰¹å¾å›¾çš„åƒç´ å€¼ã€‚å½“æ± åŒ–çª—å£åœ¨å›¾ç‰‡ä¸Šæ»‘åŠ¨æ—¶ï¼Œä¼šå¾—åˆ°æ•´å¼ è¾“å‡ºç‰¹å¾å›¾ã€‚æ± åŒ–çª—å£çš„å¤§å°ç§°ä¸ºæ± åŒ–å¤§å°ï¼Œç”¨$k_h \times k_w$è¡¨ç¤ºã€‚åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯çª—å£å¤§å°ä¸º$2 \times 2$ï¼Œæ­¥å¹…ä¸º2çš„æ± åŒ–ã€‚</li></ul><p>ä¸å·ç§¯æ ¸ç±»ä¼¼ï¼Œæ± åŒ–çª—å£åœ¨å›¾ç‰‡ä¸Šæ»‘åŠ¨æ—¶ï¼Œæ¯æ¬¡ç§»åŠ¨çš„æ­¥é•¿ç§°ä¸ºæ­¥å¹…ï¼Œå½“å®½å’Œé«˜æ–¹å‘çš„ç§»åŠ¨å¤§å°ä¸ä¸€æ ·æ—¶ï¼Œåˆ†åˆ«ç”¨$s_w$å’Œ$s_h$è¡¨ç¤ºã€‚ä¹Ÿå¯ä»¥å¯¹éœ€è¦è¿›è¡Œæ± åŒ–çš„å›¾ç‰‡è¿›è¡Œå¡«å……ï¼Œå¡«å……æ–¹å¼ä¸å·ç§¯ç±»ä¼¼ï¼Œå‡è®¾åœ¨ç¬¬ä¸€è¡Œä¹‹å‰å¡«å……$p_{h1}$è¡Œï¼Œåœ¨æœ€åä¸€è¡Œåé¢å¡«å……$p_{h2}$è¡Œã€‚åœ¨ç¬¬ä¸€åˆ—ä¹‹å‰å¡«å……$p_{w1}$åˆ—ï¼Œåœ¨æœ€åä¸€åˆ—ä¹‹åå¡«å……$p_{w2}$åˆ—ï¼Œåˆ™æ± åŒ–å±‚çš„è¾“å‡ºç‰¹å¾å›¾å¤§å°ä¸ºï¼š</p><p>$$<br>H_{out} &#x3D; \frac{H + p_{h1} + p_{h2} - k_h}{s_h} + 1<br>$$</p><p>$$<br>W_{out} &#x3D; \frac{W + p_{w1} + p_{w2} - k_w}{s_w} + 1<br>$$</p><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œé€šå¸¸ä½¿ç”¨$2\times2$å¤§å°çš„æ± åŒ–çª—å£ï¼Œæ­¥å¹…ä¹Ÿä½¿ç”¨2ï¼Œå¡«å……ä¸º0ï¼Œåˆ™è¾“å‡ºç‰¹å¾å›¾çš„å°ºå¯¸ä¸ºï¼š</p><p>$$<br>H_{out} &#x3D; \frac{H}{2}<br>$$</p><p>$$<br>W_{out} &#x3D; \frac{W}{2}<br>$$</p><p>é€šè¿‡è¿™ç§æ–¹å¼çš„æ± åŒ–ï¼Œè¾“å‡ºç‰¹å¾å›¾çš„é«˜å’Œå®½éƒ½å‡åŠï¼Œä½†é€šé“æ•°ä¸ä¼šæ”¹å˜ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­çš„<code>pool2d</code>å‡½æ•°ï¼Œæˆ‘ä»¬å®ç°æ± åŒ–å±‚çš„å‰å‘ä¼ æ’­ã€‚è¿™ç±»ä¼¼äºä¹‹å‰ä¸­çš„<code>corr2d</code>å‡½æ•°ã€‚ç„¶è€Œï¼Œè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰å·ç§¯æ ¸ï¼Œè¾“å‡ºä¸ºè¾“å…¥ä¸­æ¯ä¸ªåŒºåŸŸçš„æœ€å¤§å€¼æˆ–å¹³å‡å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line">X = paddle.to_tensor([[<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">2.0</span>], [<span class="number">3.0</span>, <span class="number">4.0</span>, <span class="number">5.0</span>], [<span class="number">6.0</span>, <span class="number">7.0</span>, <span class="number">8.0</span>]])</span><br><span class="line"><span class="built_in">print</span>(X, X.shape)<span class="comment"># [3,3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pool2d</span>(<span class="params">X, pool_size, mode=<span class="string">&#x27;max&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># Xä¸ºéœ€è¦æ± åŒ–çš„è¾“å…¥æ•°æ®</span></span><br><span class="line">    <span class="comment"># pool_sizeä¸ºæ± åŒ–çš„å¤§å°</span></span><br><span class="line">    <span class="comment"># modeè¡¨ç¤ºæ˜¯ä»¥æœ€å¤§æ± åŒ–è¿˜æ˜¯å‡å€¼æ± åŒ–</span></span><br><span class="line">    p_h, p_w = pool_size</span><br><span class="line">    <span class="comment"># è®¡ç®—Yçš„å½¢çŠ¶</span></span><br><span class="line">    Y = paddle.zeros(shape=(X.shape[<span class="number">0</span>] - p_h + <span class="number">1</span>, X.shape[<span class="number">1</span>] - p_w + <span class="number">1</span>))</span><br><span class="line">    <span class="comment"># ä¸‹é¢è®¡ç®—æ•°å€¼</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Y.shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(Y.shape[<span class="number">1</span>]):</span><br><span class="line">            <span class="comment"># ä¸‹é¢ç§»åŠ¨çš„æ­¥é•¿éƒ½ä¸º1</span></span><br><span class="line">            <span class="keyword">if</span> mode == <span class="string">&#x27;max&#x27;</span>:</span><br><span class="line">                Y[i, j] = X[i: i + p_h, j: j + p_w].<span class="built_in">max</span>()</span><br><span class="line">            <span class="keyword">elif</span> mode == <span class="string">&#x27;avg&#x27;</span>:</span><br><span class="line">                Y[i, j] = X[i: i + p_h, j: j + p_w].mean()</span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(pool2d(X, (<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(pool2d(X, (<span class="number">2</span>, <span class="number">2</span>), <span class="string">&#x27;avg&#x27;</span>))</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[3, 3], dtype=float32, place=Place(cpu), stop_gradient=True,       [[0., 1., 2.],        [3., 4., 5.],        [6., 7., 8.]]) [3, 3]Tensor(shape=[2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[4., 5.],        [7., 8.]])Tensor(shape=[2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[2., 3.],        [5., 6.]])</code></pre><h3 id="5-2-å¡«å……å’Œæ­¥å¹…"><a href="#5-2-å¡«å……å’Œæ­¥å¹…" class="headerlink" title="5.2 å¡«å……å’Œæ­¥å¹…"></a>5.2 å¡«å……å’Œæ­¥å¹…</h3><p>ä¸å·ç§¯å±‚ä¸€æ ·ï¼Œæ± åŒ–å±‚ä¹Ÿå¯ä»¥æ”¹å˜è¾“å‡ºå½¢çŠ¶ã€‚å’Œä»¥å‰ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¡«å……å’Œæ­¥å¹…ä»¥è·å¾—æ‰€éœ€çš„è¾“å‡ºå½¢çŠ¶ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­å†…ç½®çš„äºŒç»´æœ€å¤§æ± åŒ–å±‚ï¼Œæ¥æ¼”ç¤ºæ± åŒ–å±‚ä¸­å¡«å……å’Œæ­¥å¹…çš„ä½¿ç”¨ã€‚æˆ‘ä»¬é¦–å…ˆæ„é€ äº†ä¸€ä¸ªè¾“å…¥å¼ é‡$X$ï¼Œå®ƒæœ‰å››ä¸ªç»´åº¦ï¼Œå…¶ä¸­æ ·æœ¬æ•°å’Œé€šé“æ•°éƒ½æ˜¯1ã€‚</p><p><code>paddle.nn.MaxPool2D(kernel_size, stride=None, padding=0)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X = paddle.arange(<span class="number">16</span>, dtype=paddle.float32).reshape((<span class="number">1</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line">X</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 1, 4, 4], dtype=float32, place=Place(cpu), stop_gradient=True,       [[[[0. , 1. , 2. , 3. ],          [4. , 5. , 6. , 7. ],          [8. , 9. , 10., 11.],          [12., 13., 14., 15.]]]])</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­çš„æ­¥å¹…ä¸æ± åŒ–çª—å£çš„å¤§å°ç›¸åŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pool2d = nn.MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>, padding=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># è¿™é‡Œæ˜¯2Ã—2çš„æ± åŒ–çª—å£ï¼Œæ­¥é•¿ä¸º2ï¼Œæœ€å¤§æ± åŒ–</span></span><br><span class="line">pool2d(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 1, 2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[[[5. , 7. ],          [13., 15.]]]])</code></pre><p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¾å®šä¸€ä¸ªä»»æ„å¤§å°çš„çŸ©å½¢æ± åŒ–çª—å£ï¼Œå¹¶åˆ†åˆ«è®¾å®šå¡«å……å’Œæ­¥å¹…çš„é«˜åº¦å’Œå®½åº¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pool2d = nn.MaxPool2D((<span class="number">2</span>, <span class="number">3</span>), stride=(<span class="number">2</span>, <span class="number">3</span>), padding=(<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment"># è¿™é‡Œ2Ã—3çš„æ± åŒ–çª—å£ï¼Œé«˜åº¦2æ­¥é•¿å®½åº¦3æ­¥é•¿ï¼Œé«˜åº¦æ–¹å‘ä¸å¡«å……ï¼Œå®½åº¦æ–¹å‘ä¸Šå·¦å³å„å¡«å……ä¸€åˆ—</span></span><br><span class="line">pool2d(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 1, 2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[[[5. , 7. ],          [13., 15.]]]])</code></pre><h3 id="5-3-å¤šä¸ªé€šé“"><a href="#5-3-å¤šä¸ªé€šé“" class="headerlink" title="5.3 å¤šä¸ªé€šé“"></a>5.3 å¤šä¸ªé€šé“</h3><p>åœ¨å¤„ç†å¤šé€šé“è¾“å…¥æ•°æ®æ—¶ï¼Œæ± åŒ–å±‚åœ¨æ¯ä¸ªè¾“å…¥é€šé“ä¸Šå•ç‹¬è¿ç®—ï¼Œè€Œä¸æ˜¯åƒå·ç§¯å±‚ä¸€æ ·åœ¨é€šé“ä¸Šå¯¹è¾“å…¥è¿›è¡Œæ±‡æ€»ã€‚è¿™æ„å‘³ç€<strong>æ± åŒ–å±‚çš„è¾“å‡ºé€šé“æ•°ä¸è¾“å…¥é€šé“æ•°ç›¸åŒ</strong>ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†åœ¨é€šé“ç»´åº¦ä¸Šè¿ç»“å¼ é‡$X$å’Œ$X + 1$ï¼Œä»¥æ„å»ºå…·æœ‰ 2 ä¸ªé€šé“çš„è¾“å…¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X = paddle.concat((X, X + <span class="number">1</span>), <span class="number">1</span>)X</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 2, 4, 4], dtype=float32, place=Place(cpu), stop_gradient=True,       [[[[0. , 1. , 2. , 3. ],          [4. , 5. , 6. , 7. ],          [8. , 9. , 10., 11.],          [12., 13., 14., 15.]],         [[1. , 2. , 3. , 4. ],          [5. , 6. , 7. , 8. ],          [9. , 10., 11., 12.],          [13., 14., 15. 16.]]]])</code></pre><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œæ± åŒ–åè¾“å‡ºé€šé“çš„æ•°é‡ä»ç„¶æ˜¯2ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pool2d = nn.MaxPool2D(<span class="number">3</span>, padding=<span class="number">1</span>, stride=<span class="number">2</span>)</span><br><span class="line">pool2d(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 2, 2, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[[[5. , 7. ],          [13., 15.]],         [[6. , 8. ],          [14., 16.]]]])</code></pre><h2 id="å…­ã€æ‰¹å½’ä¸€åŒ–ï¼ˆBatch-Normalizationï¼‰"><a href="#å…­ã€æ‰¹å½’ä¸€åŒ–ï¼ˆBatch-Normalizationï¼‰" class="headerlink" title="å…­ã€æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰"></a>å…­ã€æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰</h2><p><a href="https://arxiv.org/abs/1502.03167">æ‰¹å½’ä¸€åŒ–æ–¹æ³•</a>ï¼ˆBatch Normalizationï¼ŒBatchNormï¼‰æ˜¯ç”±Ioffeå’ŒSzegedyäº2015å¹´æå‡ºçš„ï¼Œå·²è¢«å¹¿æ³›åº”ç”¨åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œå…¶ç›®çš„æ˜¯å¯¹ç¥ç»ç½‘ç»œä¸­é—´å±‚çš„è¾“å‡ºè¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œä½¿å¾—ä¸­é—´å±‚çš„è¾“å‡ºæ›´åŠ ç¨³å®šã€‚</p><p>é€šå¸¸æˆ‘ä»¬ä¼šå¯¹ç¥ç»ç½‘ç»œçš„æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œå¤„ç†åçš„æ ·æœ¬æ•°æ®é›†æ»¡è¶³å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1çš„ç»Ÿè®¡åˆ†å¸ƒï¼Œè¿™æ˜¯å› ä¸ºå½“è¾“å…¥æ•°æ®çš„åˆ†å¸ƒæ¯”è¾ƒå›ºå®šæ—¶ï¼Œæœ‰åˆ©äºç®—æ³•çš„ç¨³å®šå’Œæ”¶æ•›ã€‚å¯¹äºæ·±åº¦ç¥ç»ç½‘ç»œæ¥è¯´ï¼Œç”±äºå‚æ•°æ˜¯ä¸æ–­æ›´æ–°çš„ï¼Œå³ä½¿è¾“å…¥æ•°æ®å·²ç»åšè¿‡æ ‡å‡†åŒ–å¤„ç†ï¼Œä½†æ˜¯å¯¹äºæ¯”è¾ƒé åçš„é‚£äº›å±‚ï¼Œå…¶æ¥æ”¶åˆ°çš„è¾“å…¥ä»ç„¶æ˜¯å‰§çƒˆå˜åŒ–çš„ï¼Œé€šå¸¸ä¼šå¯¼è‡´æ•°å€¼ä¸ç¨³å®šï¼Œæ¨¡å‹å¾ˆéš¾æ”¶æ•›ã€‚BatchNormèƒ½å¤Ÿä½¿ç¥ç»ç½‘ç»œä¸­é—´å±‚çš„è¾“å‡ºå˜å¾—æ›´åŠ ç¨³å®šï¼Œå¹¶æœ‰å¦‚ä¸‹ä¸‰ä¸ªä¼˜ç‚¹ï¼š</p><ul><li><p>ä½¿å­¦ä¹ å¿«é€Ÿè¿›è¡Œï¼ˆèƒ½å¤Ÿä½¿ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡ï¼‰</p></li><li><p>é™ä½æ¨¡å‹å¯¹åˆå§‹å€¼çš„æ•æ„Ÿæ€§</p></li><li><p>ä»ä¸€å®šç¨‹åº¦ä¸ŠæŠ‘åˆ¶è¿‡æ‹Ÿåˆ</p></li></ul><p>BatchNormä¸»è¦æ€è·¯æ˜¯åœ¨è®­ç»ƒæ—¶ä»¥mini-batchä¸ºå•ä½ï¼Œå¯¹ç¥ç»å…ƒçš„æ•°å€¼è¿›è¡Œå½’ä¸€åŒ–ï¼Œä½¿æ•°æ®çš„åˆ†å¸ƒæ»¡è¶³å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ã€‚å…·ä½“è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><strong>1. è®¡ç®—mini-batchå†…æ ·æœ¬çš„å‡å€¼</strong><br>$$<br>\mu_B \leftarrow \frac{1}{m}\sum_{i&#x3D;1}^mx^{(i)}<br>$$<br>å…¶ä¸­$x^{(i)}$è¡¨ç¤ºmini-batchä¸­çš„ç¬¬$i$ä¸ªæ ·æœ¬ã€‚</p><p>ä¾‹å¦‚è¾“å…¥mini-batchåŒ…å«3ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬æœ‰2ä¸ªç‰¹å¾ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><p>$$<br>x^{(1)} &#x3D; (1,2), \ \ x^{(2)} &#x3D; (3,6), \ \ x^{(3)} &#x3D; (5,10)<br>$$<br>å¯¹æ¯ä¸ªç‰¹å¾åˆ†åˆ«è®¡ç®—mini-batchå†…æ ·æœ¬çš„å‡å€¼ï¼š</p><p>$$<br>\mu_{B0} &#x3D; \frac{1+3+5}{3} &#x3D; 3, \ \ \ \mu_{B1} &#x3D; \frac{2+6+10}{3} &#x3D; 6<br>$$<br>åˆ™æ ·æœ¬å‡å€¼æ˜¯:</p><p>$$<br>\mu_{B} &#x3D; (\mu_{B0}, \mu_{B1}) &#x3D; (3, 6)<br>$$<br><strong>2. è®¡ç®—mini-batchå†…æ ·æœ¬çš„æ–¹å·®</strong></p><p>$$<br>\sigma_B^2 \leftarrow \frac{1}{m}\sum_{i&#x3D;1}^m(x^{(i)} - \mu_B)^2<br>$$<br>ä¸Šé¢çš„è®¡ç®—å…¬å¼å…ˆè®¡ç®—ä¸€ä¸ªæ‰¹æ¬¡å†…æ ·æœ¬çš„å‡å€¼$\mu_B$å’Œæ–¹å·®$\sigma_B^2$ï¼Œç„¶åå†å¯¹è¾“å…¥æ•°æ®åšå½’ä¸€åŒ–ï¼Œå°†å…¶è°ƒæ•´æˆå‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1çš„åˆ†å¸ƒã€‚</p><p>å¯¹äºä¸Šè¿°ç»™å®šçš„è¾“å…¥æ•°æ®$x^{(1)}, x^{(2)}, x^{(3)}$ï¼Œå¯ä»¥è®¡ç®—å‡ºæ¯ä¸ªç‰¹å¾å¯¹åº”çš„æ–¹å·®ï¼š</p><p>$$<br>\sigma_{B0}^2 &#x3D; \frac{1}{3} \cdot ((1-3)^2 + (3-3)^2 + (5-3)^2) &#x3D; \frac{8}{3}<br>$$</p><p>$$<br>\sigma_{B1}^2 &#x3D; \frac{1}{3} \cdot ((2-6)^2 + (6-6)^2 + (10-6)^2) &#x3D; \frac{32}{3}<br>$$</p><p>åˆ™æ ·æœ¬æ–¹å·®æ˜¯ï¼š</p><p>$$<br>\sigma_{B}^2 &#x3D; (\sigma_{B0}^2, \sigma_{B1}^2) &#x3D; (\frac{8}{3}, \frac{32}{3})<br>$$<br><strong>3. è®¡ç®—æ ‡å‡†åŒ–ä¹‹åçš„è¾“å‡º</strong><br>$$<br>\hat{x}^{(i)} \leftarrow \frac{x^{(i)} - \mu_B}{\sqrt{(\sigma_B^2 + \epsilon)}}<br>$$<br>å…¶ä¸­$\epsilon$æ˜¯ä¸€ä¸ªå¾®å°å€¼ï¼ˆä¾‹å¦‚$1e-7$ï¼‰ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ä¸ºäº†é˜²æ­¢åˆ†æ¯ä¸º0ã€‚</p><p>å¯¹äºä¸Šè¿°ç»™å®šçš„è¾“å…¥æ•°æ®$x^{(1)}, x^{(2)}, x^{(3)}$ï¼Œå¯ä»¥è®¡ç®—å‡ºæ ‡å‡†åŒ–ä¹‹åçš„è¾“å‡ºï¼š</p><p>$$<br>\hat{x}^{(1)} &#x3D; (\frac{1 - 3}{\sqrt{\frac{8}{3}}}, \ \ \frac{2 - 6}{\sqrt{\frac{32}{3}}}) &#x3D; (-\sqrt{\frac{3}{2}}, \ \ -\sqrt{\frac{3}{2}})<br>$$</p><p>$$<br>\hat{x}^{(2)} &#x3D; (\frac{3 - 3}{\sqrt{\frac{8}{3}}}, \ \ \frac{6 - 6}{\sqrt{\frac{32}{3}}}) &#x3D; (0, \ \ 0) \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <br>$$</p><p>$$<br>\hat{x}^{(3)} &#x3D; (\frac{5 - 3}{\sqrt{\frac{8}{3}}}, \ \ \frac{10 - 6}{\sqrt{\frac{32}{3}}}) &#x3D; (\sqrt{\frac{3}{2}}, \ \ \sqrt{\frac{3}{2}}) \ \ \ <br>$$</p><hr><p>å¦‚æœå¼ºè¡Œé™åˆ¶è¾“å‡ºå±‚çš„åˆ†å¸ƒæ˜¯æ ‡å‡†åŒ–çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸäº›ç‰¹å¾æ¨¡å¼çš„ä¸¢å¤±ï¼Œæ‰€ä»¥åœ¨æ ‡å‡†åŒ–ä¹‹åï¼ŒBatchNormä¼šç´§æ¥ç€å¯¹æ•°æ®åšç¼©æ”¾å’Œå¹³ç§»ã€‚</p><p>$$<br>y_i \leftarrow \gamma \hat{x_i} + \beta<br>$$<br>å…¶ä¸­$\gamma$å’Œ$\beta$æ˜¯å¯å­¦ä¹ çš„å‚æ•°ï¼Œå¯ä»¥èµ‹åˆå§‹å€¼$\gamma &#x3D; 1, \beta &#x3D; 0$ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­å­¦ä¹ è°ƒæ•´ã€‚</p><p>ä¸Šé¢åˆ—å‡ºçš„æ˜¯BatchNormæ–¹æ³•çš„è®¡ç®—é€»è¾‘ï¼Œä¸‹é¢é’ˆå¯¹ä¸¤ç§ç±»å‹çš„è¾“å…¥æ•°æ®æ ¼å¼åˆ†åˆ«è¿›è¡Œä¸¾ä¾‹ã€‚é£æ¡¨æ”¯æŒè¾“å…¥æ•°æ®çš„ç»´åº¦å¤§å°ä¸º2ã€3ã€4ã€5å››ç§æƒ…å†µï¼Œè¿™é‡Œç»™å‡ºçš„æ˜¯ç»´åº¦å¤§å°ä¸º$2$ã€è¡¨æ ¼ã€‘å’Œ$4$ã€å›¾åƒã€‘çš„ç¤ºä¾‹ã€‚</p><ul><li><strong>ç¤ºä¾‹ä¸€ï¼š</strong> å½“è¾“å…¥æ•°æ®å½¢çŠ¶æ˜¯$[N, K]$ã€Nä¸ºæ‰¹é‡ï¼ŒKä¸ºå®é™…çš„Xçš„å–å€¼ã€‘æ—¶ï¼Œä¸€èˆ¬å¯¹åº”å…¨è¿æ¥å±‚çš„è¾“å‡ºï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</li></ul><p>è¿™ç§æƒ…å†µä¸‹ä¼šåˆ†åˆ«å¯¹Kçš„æ¯ä¸€ä¸ªåˆ†é‡è®¡ç®—Nä¸ªæ ·æœ¬çš„å‡å€¼å’Œæ–¹å·®ï¼Œæ•°æ®å’Œå‚æ•°å¯¹åº”å¦‚ä¸‹ï¼š</p><ul><li>è¾“å…¥ x, [N, K]</li><li>è¾“å‡º y, [N, K]</li><li>å‡å€¼ $\mu_B$ï¼Œ[K, ]</li><li>æ–¹å·® $\sigma_B^2$, [K, ]</li><li>ç¼©æ”¾å‚æ•°$\gamma$, [K, ]</li><li>å¹³ç§»å‚æ•°$\beta$, [K, ]</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¾“å…¥æ•°æ®å½¢çŠ¶æ˜¯ [N, K]æ—¶çš„ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> BatchNorm1D</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®</span></span><br><span class="line">data = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"><span class="comment"># ä½¿ç”¨BatchNorm1Dè®¡ç®—å½’ä¸€åŒ–çš„è¾“å‡º</span></span><br><span class="line"><span class="comment"># è¾“å…¥æ•°æ®ç»´åº¦[N, K]ï¼Œnum_featuresç­‰äºK</span></span><br><span class="line">bn = BatchNorm1D(num_features=<span class="number">3</span>)    <span class="comment"># ä¼ å…¥çš„æ˜¯ç‰¹å¾çš„ä¸ªæ•°</span></span><br><span class="line">x = paddle.to_tensor(data)</span><br><span class="line">y = bn(x)<span class="comment"># å°†xæ”¾åˆ°æ‰¹é‡å½’ä¸€åŒ–çš„å‡½æ•°ä¸­</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;output of BatchNorm1D Layer: \n &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(y.numpy()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨Numpyè®¡ç®—å‡å€¼ã€æ–¹å·®å’Œå½’ä¸€åŒ–çš„è¾“å‡º</span></span><br><span class="line"><span class="comment"># è¿™é‡Œå¯¹ç¬¬0ä¸ªç‰¹å¾è¿›è¡ŒéªŒè¯</span></span><br><span class="line">a = np.array([<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>])<span class="comment">#[2,5,8] [3,6,9]æ˜¯ç¬¬2ã€3ä¸ªç‰¹å¾</span></span><br><span class="line">a_mean = a.mean()</span><br><span class="line">a_std = a.std()</span><br><span class="line">b = (a - a_mean) / a_std</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;std &#123;&#125;, mean &#123;&#125;, \n output &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(a_mean, a_std, b))</span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœæ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">output of BatchNorm1D Layer: </span></span><br><span class="line"><span class="string"> [[-1.2247438 -1.2247438 -1.2247438]</span></span><br><span class="line"><span class="string"> [ 0.         0.         0.       ]</span></span><br><span class="line"><span class="string"> [ 1.2247438  1.2247438  1.2247438]]</span></span><br><span class="line"><span class="string">std 4.0, mean 2.449489742783178, </span></span><br><span class="line"><span class="string"> output [-1.22474487  0.          1.22474487]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºè®®è¯»è€…å¯¹ç¬¬1å’Œç¬¬2ä¸ªç‰¹å¾è¿›è¡ŒéªŒè¯ï¼Œè§‚å¯Ÿnumpyè®¡ç®—ç»“æœä¸paddleè®¡ç®—ç»“æœæ˜¯å¦ä¸€è‡´</span></span><br></pre></td></tr></table></figure><ul><li><strong>ç¤ºä¾‹äºŒï¼š</strong> å½“è¾“å…¥æ•°æ®å½¢çŠ¶æ˜¯$[N, C, H, W]$æ—¶ï¼Œ ä¸€èˆ¬å¯¹åº”å·ç§¯å±‚çš„è¾“å‡ºï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</li></ul><p>è¿™ç§æƒ…å†µä¸‹ä¼šæ²¿ç€Cè¿™ä¸€ç»´åº¦è¿›è¡Œå±•å¼€ï¼Œåˆ†åˆ«å¯¹æ¯ä¸€ä¸ªé€šé“è®¡ç®—Nä¸ªæ ·æœ¬ä¸­æ€»å…±$N\times H \times W$ä¸ªåƒç´ ç‚¹çš„å‡å€¼å’Œæ–¹å·®ï¼Œæ•°æ®å’Œå‚æ•°å¯¹åº”å¦‚ä¸‹ï¼š</p><ul><li>è¾“å…¥ x, [N, C, H, W]</li><li>è¾“å‡º y, [N, C, H, W]</li><li>å‡å€¼ $\mu_B$ï¼Œ[C, ]</li><li>æ–¹å·® $\sigma_B^2$, [C, ]</li><li>ç¼©æ”¾å‚æ•°$\gamma$, [C, ]</li><li>å¹³ç§»å‚æ•°$\beta$, [C, ]</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¾“å…¥æ•°æ®å½¢çŠ¶æ˜¯[N, C, H, W]æ—¶çš„batchnormç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> BatchNorm2D</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®éšæœºæ•°ç§å­ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯æ¬¡è¿è¡Œç»“æœä¸€è‡´</span></span><br><span class="line">np.random.seed(<span class="number">100</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®</span></span><br><span class="line">data = np.random.rand(<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"><span class="comment"># ä½¿ç”¨BatchNorm2Dè®¡ç®—å½’ä¸€åŒ–çš„è¾“å‡º</span></span><br><span class="line"><span class="comment"># è¾“å…¥æ•°æ®ç»´åº¦[N, C, H, W]ï¼Œnum_featuresç­‰äºC</span></span><br><span class="line">bn = BatchNorm2D(num_features=<span class="number">3</span>)<span class="comment"># ä¼ å…¥çš„æ˜¯é€šé“çš„ç»´æ•°</span></span><br><span class="line">x = paddle.to_tensor(data)</span><br><span class="line">y = bn(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;input of BatchNorm2D Layer: \n &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x.numpy()))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;output of BatchNorm2D Layer: \n &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(y.numpy()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–å‡ºdataä¸­ç¬¬0é€šé“çš„æ•°æ®ï¼Œ</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨numpyè®¡ç®—å‡å€¼ã€æ–¹å·®åŠå½’ä¸€åŒ–çš„è¾“å‡º</span></span><br><span class="line">a = data[:, <span class="number">0</span>, :, :]</span><br><span class="line">a_mean = a.mean()</span><br><span class="line">a_std = a.std()</span><br><span class="line">b = (a - a_mean) / a_std</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;channel 0 of input data: \n &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;std &#123;&#125;, mean &#123;&#125;, \n output: \n &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(a_mean, a_std, b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æç¤ºï¼šè¿™é‡Œé€šè¿‡numpyè®¡ç®—å‡ºæ¥çš„è¾“å‡º</span></span><br><span class="line"><span class="comment"># ä¸BatchNorm2Dç®—å­çš„ç»“æœç•¥æœ‰å·®åˆ«ï¼Œ</span></span><br><span class="line"><span class="comment"># å› ä¸ºåœ¨BatchNorm2Dç®—å­ä¸ºäº†ä¿è¯æ•°å€¼çš„ç¨³å®šæ€§ï¼Œ</span></span><br><span class="line"><span class="comment"># åœ¨åˆ†æ¯é‡Œé¢åŠ ä¸Šäº†ä¸€ä¸ªæ¯”è¾ƒå°çš„æµ®ç‚¹æ•° epsilon=1e-05</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">input of BatchNorm2D Layer: </span></span><br><span class="line"><span class="string"> [[[[0.54340494 0.2783694  0.4245176 ]</span></span><br><span class="line"><span class="string">   [0.84477615 0.00471886 0.12156912]</span></span><br><span class="line"><span class="string">   [0.67074907 0.82585275 0.13670659]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  [[0.5750933  0.89132196 0.20920213]</span></span><br><span class="line"><span class="string">   [0.18532822 0.10837689 0.21969749]</span></span><br><span class="line"><span class="string">   [0.9786238  0.8116832  0.17194101]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  [[0.81622475 0.27407375 0.4317042 ]</span></span><br><span class="line"><span class="string">   [0.9400298  0.81764936 0.33611196]</span></span><br><span class="line"><span class="string">   [0.17541045 0.37283206 0.00568851]]]</span></span><br><span class="line"><span class="string">     [[0.98092085 0.05994199 0.89054596]</span></span><br><span class="line"><span class="string">   [0.5769015  0.7424797  0.63018394]</span></span><br><span class="line"><span class="string">   [0.5818422  0.02043913 0.21002658]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  [[0.5446849  0.76911515 0.25069523]</span></span><br><span class="line"><span class="string">   [0.2858957  0.8523951  0.9750065 ]</span></span><br><span class="line"><span class="string">   [0.8848533  0.35950786 0.59885895]]]]</span></span><br><span class="line"><span class="string">output of BatchNorm2D Layer: </span></span><br><span class="line"><span class="string"> [[[[ 0.4126078  -0.46198368  0.02029109]</span></span><br><span class="line"><span class="string">   [ 1.4071034  -1.3650038  -0.97940934]</span></span><br><span class="line"><span class="string">   [ 0.832831    1.344658   -0.9294571 ]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  [[ 0.2520175   1.2038351  -0.84927964]</span></span><br><span class="line"><span class="string">   [-0.9211378  -1.1527538  -0.8176896 ]</span></span><br><span class="line"><span class="string">   [ 1.4666051   0.96413004 -0.961432  ]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  [[ 0.9541142  -0.9075856  -0.36629617]</span></span><br><span class="line"><span class="string">   [ 1.37925     0.9590063  -0.6945517 ]</span></span><br><span class="line"><span class="string">   [-1.2463869  -0.5684581  -1.8291974 ]]]</span></span><br><span class="line"><span class="string">     [[ 1.473519   -1.2985382   1.2014993 ]</span></span><br><span class="line"><span class="string">   [ 0.25745988  0.7558342   0.41783488]</span></span><br><span class="line"><span class="string">   [ 0.27233088 -1.4174379  -0.8467981 ]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  [[ 0.02166975  0.79234385 -0.98786545]</span></span><br><span class="line"><span class="string">   [-0.86699003  1.0783203   1.4993572 ]</span></span><br><span class="line"><span class="string">   [ 1.1897788  -0.6142123   0.20769882]]]]</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">channel 0 of input data: </span></span><br><span class="line"><span class="string"> [[[0.54340494 0.2783694  0.4245176 ]</span></span><br><span class="line"><span class="string">  [0.84477615 0.00471886 0.12156912]</span></span><br><span class="line"><span class="string">  [0.67074907 0.82585275 0.13670659]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[0.25242636 0.7956625  0.01525497]</span></span><br><span class="line"><span class="string">  [0.5988434  0.6038045  0.10514768]</span></span><br><span class="line"><span class="string">  [0.38194343 0.03647606 0.89041156]]]</span></span><br><span class="line"><span class="string">std 0.4183686077594757, mean 0.3030227720737457, </span></span><br><span class="line"><span class="string"> output: </span></span><br><span class="line"><span class="string"> [[[ 0.41263014 -0.46200886  0.02029219]</span></span><br><span class="line"><span class="string">  [ 1.4071798  -1.3650781  -0.9794626 ]</span></span><br><span class="line"><span class="string">  [ 0.8328762   1.3447311  -0.92950773]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> [[-0.54762304  1.2451009  -1.3303081 ]</span></span><br><span class="line"><span class="string">  [ 0.5955816   0.61195374 -1.0336547 ]</span></span><br><span class="line"><span class="string">  [-0.12020606 -1.2602768   1.5577804 ]]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>é¢„æµ‹æ—¶ä½¿ç”¨BatchNorm</strong></p><p>ä¸Šé¢ä»‹ç»äº†åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨BatchNormå¯¹ä¸€æ‰¹æ ·æœ¬è¿›è¡Œå½’ä¸€åŒ–çš„æ–¹æ³•ï¼Œä½†å¦‚æœä½¿ç”¨åŒæ ·çš„æ–¹æ³•å¯¹éœ€è¦é¢„æµ‹çš„ä¸€æ‰¹æ ·æœ¬è¿›è¡Œå½’ä¸€åŒ–ï¼Œåˆ™é¢„æµ‹ç»“æœä¼šå‡ºç°ä¸ç¡®å®šæ€§ã€‚</p><p>ä¾‹å¦‚æ ·æœ¬Aã€æ ·æœ¬Bä½œä¸ºä¸€æ‰¹æ ·æœ¬è®¡ç®—å‡å€¼å’Œæ–¹å·®ï¼Œä¸æ ·æœ¬Aã€æ ·æœ¬Cå’Œæ ·æœ¬Dä½œä¸ºä¸€æ‰¹æ ·æœ¬è®¡ç®—å‡å€¼å’Œæ–¹å·®ï¼Œå¾—åˆ°çš„ç»“æœä¸€èˆ¬æ¥è¯´æ˜¯ä¸åŒçš„ã€‚é‚£ä¹ˆæ ·æœ¬Açš„é¢„æµ‹ç»“æœå°±ä¼šå˜å¾—ä¸ç¡®å®šï¼Œè¿™å¯¹é¢„æµ‹è¿‡ç¨‹æ¥è¯´æ˜¯ä¸åˆç†çš„ã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å°†å¤§é‡æ ·æœ¬çš„å‡å€¼å’Œæ–¹å·®ä¿å­˜ä¸‹æ¥ï¼Œé¢„æµ‹æ—¶ç›´æ¥ä½¿ç”¨ä¿å­˜å¥½çš„å€¼è€Œä¸å†é‡æ–°è®¡ç®—ã€‚å®é™…ä¸Šï¼Œåœ¨BatchNormçš„å…·ä½“å®ç°ä¸­ï¼Œè®­ç»ƒæ—¶ä¼šè®¡ç®—å‡å€¼å’Œæ–¹å·®çš„ç§»åŠ¨å¹³å‡å€¼ã€‚åœ¨é£æ¡¨ä¸­ï¼Œé»˜è®¤æ˜¯é‡‡ç”¨å¦‚ä¸‹æ–¹å¼è®¡ç®—ï¼š</p><p>$$<br>saved_\mu_B \leftarrow \ saved_\mu_B \times 0.9 + \mu_B \times (1 - 0.9)<br>$$</p><p>$$<br>saved_\sigma_B^2 \leftarrow \ saved_\sigma_B^2 \times 0.9 + \sigma_B^2 \times (1 - 0.9)<br>$$</p><p>åœ¨è®­ç»ƒè¿‡ç¨‹çš„æœ€å¼€å§‹å°†$saved_\mu_B$å’Œ$saved_\sigma_B^2$è®¾ç½®ä¸º0ï¼Œæ¯æ¬¡è¾“å…¥ä¸€æ‰¹æ–°çš„æ ·æœ¬ï¼Œè®¡ç®—å‡º$\mu_B$å’Œ$\sigma_B^2$ï¼Œç„¶åé€šè¿‡ä¸Šé¢çš„å…¬å¼æ›´æ–°$saved_\mu_B$å’Œ$saved_\sigma_B^2$ï¼Œåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ä¸æ–­çš„æ›´æ–°å®ƒä»¬çš„å€¼ï¼Œå¹¶ä½œä¸ºBatchNormå±‚çš„å‚æ•°ä¿å­˜ä¸‹æ¥ã€‚é¢„æµ‹çš„æ—¶å€™å°†ä¼šåŠ è½½å‚æ•°$saved_\mu_B$å’Œ$saved_\sigma_B^2$ï¼Œç”¨ä»–ä»¬æ¥ä»£æ›¿$\mu_B$å’Œ$\sigma_B^2$ï¼Œå¢åŠ é¢„æµ‹ç»“æœçš„å¯è¡Œæ€§ã€‚</p><h2 id="ä¸ƒã€å°ç»“"><a href="#ä¸ƒã€å°ç»“" class="headerlink" title="ä¸ƒã€å°ç»“"></a>ä¸ƒã€å°ç»“</h2><ul><li>äºŒç»´å·ç§¯å±‚çš„æ ¸å¿ƒè®¡ç®—æ˜¯äºŒç»´äº’ç›¸å…³è¿ç®—ã€‚æœ€ç®€å•çš„å½¢å¼æ˜¯ï¼Œå¯¹äºŒç»´è¾“å…¥æ•°æ®å’Œå·ç§¯æ ¸æ‰§è¡Œäº’ç›¸å…³æ“ä½œï¼Œç„¶åæ·»åŠ ä¸€ä¸ªåç½®ã€‚</li><li>å½“éœ€è¦æ£€æµ‹è¾“å…¥ç‰¹å¾ä¸­æ›´å¹¿åŒºåŸŸæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªæ›´æ·±çš„å·ç§¯ç½‘ç»œã€‚</li><li>å¡«å……å¯ä»¥åœ¨è¾“å…¥å‘¨å›´é¢ä¸ºå¢åŠ è¡Œå’Œåˆ—ï¼Œç”±æ­¤å¢åŠ è¾“å‡ºçš„é«˜åº¦å’Œå®½åº¦ã€‚è¿™å¸¸ç”¨æ¥ä½¿è¾“å‡ºä¸è¾“å…¥å…·æœ‰ç›¸åŒçš„é«˜å’Œå®½ï¼Œå¡«å……é€šå¸¸ç”¨æ¥æ§åˆ¶è¾“å‡ºå½¢çŠ¶çš„å‡å°‘ã€‚</li><li>æ­¥å¹…æ˜¯æ¯æ¬¡æ»‘åŠ¨æ ¸çª—å£æ—¶è¡Œå’Œåˆ—çš„æ­¥é•¿ï¼Œå¯ä»¥æˆå€å‡å°‘è¾“å‡ºçš„å½¢çŠ¶ã€‚</li><li>å¡«å……å’Œæ­¥å¹…æ˜¯å·ç§¯å±‚çš„è¶…å‚æ•°ã€‚</li><li>è¾“å‡ºé€šé“æ•°æ˜¯å·ç§¯å±‚çš„è¶…å‚æ•°ã€‚</li><li>æ¯ä¸ªè¾“å…¥é€šé“æœ‰ä¸€ä¸ªç‹¬ç«‹çš„äºŒç»´å·ç§¯æ ¸ï¼Œæ‰€æœ‰é€šé“ç»“æœç›¸åŠ å¾—åˆ°ä¸€ä¸ªè¾“å‡ºé€šé“ç»“æœã€‚æ¯ä¸ªè¾“å‡ºé€šé“æœ‰ç‹¬ç«‹çš„ä¸‰ç»´å·ç§¯æ ¸ã€‚</li><li>å½“ä»¥æ¯åƒç´ ä¸ºåŸºç¡€åº”ç”¨æ—¶ï¼Œ$1\times 1$å·ç§¯å±‚ç›¸å½“äºå…¨è¿æ¥å±‚ã€‚</li><li>$1\times 1$å·ç§¯å±‚é€šå¸¸ç”¨äºè°ƒæ•´ç½‘ç»œå±‚çš„é€šé“æ•°é‡å’Œæ§åˆ¶æ¨¡å‹å¤æ‚æ€§ã€‚</li><li>å¯¹äºç»™å®šè¾“å…¥å…ƒç´ ï¼Œæœ€å¤§æ± åŒ–å±‚ä¼šè¾“å‡ºè¯¥çª—å£å†…çš„æœ€å¤§å€¼ï¼Œå¹³å‡æ± åŒ–å±‚ä¼šè¾“å‡ºè¯¥çª—å£å†…çš„å¹³å‡å€¼ã€‚</li><li>æ± åŒ–å±‚çš„ä¸»è¦ä¼˜ç‚¹ä¹‹ä¸€æ˜¯å‡è½»å·ç§¯å±‚å¯¹ä½ç½®çš„è¿‡åº¦æ•æ„Ÿã€‚</li><li>æˆ‘ä»¬å¯ä»¥æŒ‡å®šæ± åŒ–å±‚çš„å¡«å……å’Œæ­¥å¹…ã€‚</li><li>ä½¿ç”¨æœ€å¤§æ± åŒ–å±‚ä»¥åŠå¤§äº1çš„æ­¥å¹…ï¼Œå¯å‡å°‘ç©ºé—´ç»´åº¦ï¼ˆå¦‚é«˜åº¦å’Œå®½åº¦ï¼‰ã€‚</li><li>æ± åŒ–å±‚çš„è¾“å‡ºé€šé“æ•°ä¸è¾“å…¥é€šé“æ•°ç›¸åŒã€‚</li><li>æ± åŒ–å±‚åŒæ ·æœ‰çª—å£å¤§å°ã€å¡«å……å’Œæ­¥å¹…ä½œä¸ºè¶…å‚æ•°ã€‚æ± åŒ–å±‚æ²¡æœ‰éœ€è¦å­¦ä¹ çš„å‚æ•°ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_å·ç§¯åŸºæœ¬æ¦‚å¿µåŠç»å…¸æ¨¡å‹å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 4.2-ä½¿ç”¨æç®€æ–¹æ³•å®ç°æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡</title>
      <link href="/2022/12/30/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A04.2-%E4%BD%BF%E7%94%A8%E6%9E%81%E7%AE%80%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB%E4%BB%BB%E5%8A%A1/"/>
      <url>/2022/12/30/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A04.2-%E4%BD%BF%E7%94%A8%E6%9E%81%E7%AE%80%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ä½¿ç”¨æç®€æ–¹æ³•å®ç°æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡âœ"><a href="#ä¸€ã€ä½¿ç”¨æç®€æ–¹æ³•å®ç°æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡âœ" class="headerlink" title="ä¸€ã€ä½¿ç”¨æç®€æ–¹æ³•å®ç°æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡âœ"></a>ä¸€ã€ä½¿ç”¨æç®€æ–¹æ³•å®ç°æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡âœ</h1><p>æ•°å­—è¯†åˆ«æ˜¯è®¡ç®—æœºä»çº¸è´¨æ–‡æ¡£ã€ç…§ç‰‡æˆ–å…¶ä»–æ¥æºæ¥æ”¶ã€ç†è§£å¹¶è¯†åˆ«å¯è¯»çš„æ•°å­—çš„èƒ½åŠ›ï¼Œç›®å‰æ¯”è¾ƒå—å…³æ³¨çš„æ˜¯æ‰‹å†™æ•°å­—è¯†åˆ«ã€‚æ‰‹å†™æ•°å­—è¯†åˆ«æ˜¯ä¸€ä¸ªå…¸å‹çš„å›¾åƒåˆ†ç±»é—®é¢˜ï¼Œå·²ç»è¢«å¹¿æ³›åº”ç”¨äºæ±‡æ¬¾å•å·è¯†åˆ«ã€æ‰‹å†™é‚®æ”¿ç¼–ç è¯†åˆ«ç­‰é¢†åŸŸï¼Œå¤§å¤§ç¼©çŸ­äº†ä¸šåŠ¡å¤„ç†æ—¶é—´ï¼Œæå‡äº†å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚</p><p>åœ¨å¤„ç†å¦‚ <strong>å›¾1</strong> æ‰€ç¤ºçš„æ‰‹å†™é‚®æ”¿ç¼–ç çš„ç®€å•å›¾åƒåˆ†ç±»ä»»åŠ¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŸºäºMNISTæ•°æ®é›†çš„æ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹ã€‚MNISTæ˜¯æ·±åº¦å­¦ä¹ é¢†åŸŸæ ‡å‡†ã€æ˜“ç”¨çš„æˆç†Ÿæ•°æ®é›†ï¼ŒåŒ…å« 50000 æ¡è®­ç»ƒæ ·æœ¬å’Œ 10000 æ¡æµ‹è¯•æ ·æœ¬ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/04ab1f9d699e40659a4b69ee069a5136a15cb04bb9d848c2be536da68a8abe5e" width="800"></center><center><br>å›¾1ï¼šæ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ç¤ºæ„å›¾</br></center><ul><li>ä»»åŠ¡è¾“å…¥ï¼šä¸€ç³»åˆ—æ‰‹å†™æ•°å­—å›¾ç‰‡ï¼Œå…¶ä¸­æ¯å¼ å›¾ç‰‡éƒ½æ˜¯ 28x28 çš„åƒç´ çŸ©é˜µã€‚</li><li>ä»»åŠ¡è¾“å‡ºï¼šç»è¿‡äº†å¤§å°å½’ä¸€åŒ–å’Œå±…ä¸­å¤„ç†ï¼Œè¾“å‡ºå¯¹åº”çš„ 0~9 çš„æ•°å­—æ ‡ç­¾ã€‚</li></ul><h2 id="MNIST-æ•°æ®é›†"><a href="#MNIST-æ•°æ®é›†" class="headerlink" title="MNIST æ•°æ®é›†"></a><strong><a href="http://yann.lecun.com/exdb/mnist/">MNIST</a> æ•°æ®é›†</strong></h2><p>MNIST æ•°æ®é›†æ˜¯ä» NISTï¼ˆç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ï¼‰çš„ Special Database 3ï¼ˆSD-3ï¼‰å’Œ Special Database 1ï¼ˆSD-1ï¼‰æ„å»ºè€Œæ¥ã€‚Yann LeCunç­‰äººä» SD-1 å’Œ SD-3 ä¸­å„å–ä¸€åŠæ•°æ®ä½œä¸º MNIST è®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚</p><hr><blockquote><p><strong>æ‰©å±•</strong>ï¼š</p><p>MNIST æ•°æ®åº“ç”± NIST çš„ç‰¹æ®Šæ•°æ®åº“ 3 å’Œç‰¹æ®Šæ•°æ®åº“ 1 æ„å»ºè€Œæˆï¼Œå…¶ä¸­åŒ…å«æ‰‹å†™æ•°å­—çš„äºŒè¿›åˆ¶å›¾åƒã€‚NIST æœ€åˆæŒ‡å®š SD-3 ä½œä¸ºä»–ä»¬çš„è®­ç»ƒé›†ï¼ŒSD-1 ä½œä¸ºä»–ä»¬çš„æµ‹è¯•é›†ã€‚ä½†æ˜¯ï¼ŒSD-3 æ¯” SD-1 æ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“è¯†åˆ«ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨äººå£æ™®æŸ¥å±€å·¥ä½œäººå‘˜ä¸­æ”¶é›†äº† SD-3ï¼Œè€Œåœ¨é«˜ä¸­ç”Ÿä¸­æ”¶é›†äº† SD-1ã€‚ä»å­¦ä¹ å®éªŒä¸­å¾—å‡ºåˆç†çš„ç»“è®ºï¼Œè¦æ±‚å®éªŒç»“æœç‹¬ç«‹äºå®Œæ•´æ ·æœ¬é›†ä¸­è®­ç»ƒé›†å’Œæµ‹è¯•çš„é€‰æ‹©ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦æ··åˆNISTçš„æ•°æ®é›†å»ºç«‹ä¸€ä¸ªæ–°çš„æ•°æ®åº“ã€‚</p></blockquote><hr><p>MNISTæ•°æ®é›†çš„å‘å¸ƒï¼Œå¸å¼•äº†å¤§é‡ç§‘å­¦å®¶è®­ç»ƒæ¨¡å‹ã€‚1998 å¹´ï¼ŒLeCun åˆ†åˆ«ç”¨å•å±‚çº¿æ€§åˆ†ç±»å™¨ã€å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMultilayer Perceptron, MLPï¼‰å’Œå¤šå±‚å·ç§¯ç¥ç»ç½‘ç»œ LeNet è¿›è¡Œå®éªŒï¼Œä½¿å¾—æµ‹è¯•é›†çš„è¯¯å·®ä¸æ–­ä¸‹é™ï¼ˆä»12% ä¸‹é™åˆ°0.7% ï¼‰ã€‚åœ¨ç ”ç©¶è¿‡ç¨‹ä¸­ï¼ŒLeCun æå‡ºäº†å·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Networkï¼ŒCNNï¼‰ï¼Œå¤§å¹…åº¦åœ°æé«˜äº†æ‰‹å†™å­—ç¬¦çš„è¯†åˆ«èƒ½åŠ›ï¼Œä¹Ÿå› æ­¤æˆä¸ºäº†æ·±åº¦å­¦ä¹ é¢†åŸŸçš„å¥ åŸºäººä¹‹ä¸€ã€‚</p><p>å¦‚ä»Šåœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œå·ç§¯ç¥ç»ç½‘ç»œå æ®äº†è‡³å…³é‡è¦çš„åœ°ä½ï¼Œä»æœ€æ—© LeCun æå‡ºçš„ç®€å• LeNetï¼Œåˆ°å¦‚ä»Š ImageNet å¤§èµ›ä¸Šçš„ä¼˜èƒœæ¨¡å‹ VGGNetã€GoogLeNetã€ResNet ç­‰ï¼Œäººä»¬åœ¨å›¾åƒåˆ†ç±»é¢†åŸŸï¼Œåˆ©ç”¨å·ç§¯ç¥ç»ç½‘ç»œå¾—åˆ°äº†ä¸€ç³»åˆ—æƒŠäººçš„ç»“æœã€‚</p><h2 id="æ„å»ºæµç¨‹å¯¹æ¯”"><a href="#æ„å»ºæµç¨‹å¯¹æ¯”" class="headerlink" title="æ„å»ºæµç¨‹å¯¹æ¯”"></a><strong>æ„å»ºæµç¨‹å¯¹æ¯”</strong></h2><p>ä½¿ç”¨é£æ¡¨å®Œæˆæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹ä»»åŠ¡çš„ä»£ç ç»“æ„å¦‚ <strong>å›¾2</strong> æ‰€ç¤ºï¼Œä¸ä½¿ç”¨é£æ¡¨å®Œæˆæˆ¿ä»·é¢„æµ‹æ¨¡å‹ä»»åŠ¡çš„æµç¨‹ä¸€è‡´ï¼Œä¸‹é¢æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»æ¯ä¸ªæ­¥éª¤çš„å…·ä½“å®ç°æ–¹æ³•å’Œä¼˜åŒ–æ€è·¯ã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/38b467ff3b6e4705b9b4d34c6b13431073e449640ef847f396923475b11c913b" width="800" hegiht="" ></center><center><br>å›¾2ï¼šä½¿ç”¨é£æ¡¨æ¡†æ¶æ„å»ºç¥ç»ç½‘ç»œè¿‡ç¨‹</br></center><p><br></br></p><p>åœ¨æ¢è®¨æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡çš„å®ç°æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ç¨‹åºä»£ç ã€‚ä¸éš¾å‘ç°ï¼Œä¸ä¸Šä¸€ç« å­¦ä¹ çš„æˆ¿ä»·é¢„æµ‹ä»»åŠ¡çš„ä»£ç æ¯”è¾ƒï¼ŒäºŒè€…æ˜¯æä¸ºç›¸ä¼¼çš„ï¼Œå¦‚ <strong>å›¾3</strong> æ‰€ç¤ºã€‚<br><br></br></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/30041d662b894ef387e5f97328c6f9c149f67a6463904413ae78251158014fa2" width="1200" hegiht="" ></center><center><br>å›¾3ï¼šæˆ¿ä»·é¢„æµ‹å’Œæ‰‹å†™æ•°å­—è¯†åˆ«çš„å®ç°ä»£ç â€œç¥ä¼¼â€</br></center><p><br></br></p><ul><li><p>ä»ä»£ç ç»“æ„ä¸Šçœ‹ï¼Œæ¨¡å‹å‡ä¸º<code>æ•°æ®å¤„ç†ã€å®šä¹‰ç½‘ç»œç»“æ„å’Œè®­ç»ƒè¿‡ç¨‹</code>ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p></li><li><p>ä»ä»£ç ç»†èŠ‚æ¥çœ‹ï¼Œä¸¤ä¸ªæ¨¡å‹ä¹Ÿå¾ˆç›¸ä¼¼ã€‚</p></li></ul><p>è¿™å°±æ˜¯ä½¿ç”¨é£æ¡¨æ¡†æ¶æ­å»ºæ·±åº¦å­¦ä¹ æ¨¡å‹çš„ä¼˜åŠ¿ï¼Œåªè¦å®Œæˆä¸€ä¸ªæ¨¡å‹çš„æ¡ˆä¾‹å­¦ä¹ ï¼Œå…¶å®ƒä»»åŠ¡å³å¯è§¦ç±»æ—é€šã€‚åœ¨å·¥ä¸šå®è·µä¸­ï¼Œç¨‹åºå‘˜ç”¨é£æ¡¨æ¡†æ¶æ­å»ºæ¨¡å‹ï¼Œæ— éœ€æ¯æ¬¡éƒ½å¦èµ·ç‚‰ç¶ï¼Œå¤šæ•°æƒ…å†µæ˜¯å…ˆåœ¨é£æ¡¨æ¨¡å‹åº“ä¸­å¯»æ‰¾ä¸ç›®æ ‡ä»»åŠ¡ç±»ä¼¼çš„æ¨¡å‹ï¼Œå†åœ¨è¯¥æ¨¡å‹çš„åŸºç¡€ä¸Šä¿®æ”¹å°‘é‡ä»£ç å³å¯å®Œæˆæ–°çš„ä»»åŠ¡ã€‚</p><h1 id="äºŒã€é€šè¿‡æç®€æ–¹æ¡ˆå¿«é€Ÿæ„å»ºæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹âœ"><a href="#äºŒã€é€šè¿‡æç®€æ–¹æ¡ˆå¿«é€Ÿæ„å»ºæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹âœ" class="headerlink" title="äºŒã€é€šè¿‡æç®€æ–¹æ¡ˆå¿«é€Ÿæ„å»ºæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹âœ"></a>äºŒã€é€šè¿‡æç®€æ–¹æ¡ˆå¿«é€Ÿæ„å»ºæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹âœ</h1><p>åœ¨æ•°æ®å¤„ç†å‰ï¼Œé¦–å…ˆè¦åŠ è½½é£æ¡¨å¹³å°ä¸â€œæ‰‹å†™æ•°å­—è¯†åˆ«â€æ¨¡å‹ç›¸å…³çš„ç±»åº“ï¼Œå®ç°æ–¹æ³•å¦‚ä¸‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åŠ è½½é£æ¡¨å’Œç›¸å…³ç±»åº“</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Linear</span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure><h2 id="1-æ•°æ®å¤„ç†"><a href="#1-æ•°æ®å¤„ç†" class="headerlink" title="1.æ•°æ®å¤„ç†"></a><strong>1.æ•°æ®å¤„ç†</strong></h2><p>é£æ¡¨æä¾›äº†å¤šä¸ªå°è£…å¥½çš„æ•°æ®é›†APIï¼Œæ¶µç›–è®¡ç®—æœºè§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€æ¨èç³»ç»Ÿç­‰å¤šä¸ªé¢†åŸŸï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿå®Œæˆæ·±åº¦å­¦ä¹ ä»»åŠ¡ã€‚å¦‚åœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œé€šè¿‡<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/vision/datasets/MNIST_cn.html">paddle.vision.datasets.MNIST</a>å¯ä»¥ç›´æ¥è·å–å¤„ç†å¥½çš„MNISTè®­ç»ƒé›†ã€æµ‹è¯•é›†ã€‚</p><p>é€šè¿‡<code>paddle.vision.datasets.MNIST</code> APIè®¾ç½®æ•°æ®è¯»å–å™¨ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®æ•°æ®è¯»å–å™¨ï¼ŒAPIè‡ªåŠ¨è¯»å–MNISTæ•°æ®è®­ç»ƒé›†</span></span><br><span class="line">train_dataset = paddle.vision.datasets.MNIST(mode=<span class="string">&#x27;train&#x27;</span>)</span><br></pre></td></tr></table></figure><p> é€šè¿‡å¦‚ä¸‹ä»£ç è¯»å–ä»»æ„ä¸€ä¸ªæ•°æ®å†…å®¹ï¼Œè§‚å¯Ÿæ‰“å°ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">train_data0 = np.array(train_dataset[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line">train_label_0 = np.array(train_dataset[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.figure(<span class="string">&quot;Image&quot;</span>) <span class="comment"># å›¾åƒçª—å£åç§°</span></span><br><span class="line">plt.figure(figsize=(<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line"><span class="comment"># æ˜¾ç¤ºç¬¬ä¸€batchçš„ç¬¬ä¸€ä¸ªå›¾åƒ</span></span><br><span class="line">plt.imshow(train_data0, cmap=<span class="string">&#x27;gray&#x27;</span>)<span class="comment">#grayç°è‰²</span></span><br><span class="line">plt.title(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å›¾åƒæ•°æ®å½¢çŠ¶å’Œå¯¹åº”æ•°æ®ä¸º:&quot;</span>, train_data0.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å›¾åƒæ ‡ç­¾å½¢çŠ¶å’Œå¯¹åº”æ•°æ®ä¸º:&quot;</span>, train_label_0.shape, train_label_0)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ‰“å°ç¬¬ä¸€ä¸ªbatchçš„ç¬¬ä¸€ä¸ªå›¾åƒï¼Œå¯¹åº”æ ‡ç­¾æ•°å­—ä¸º&#123;&#125;&quot;</span>.<span class="built_in">format</span>(train_label_0))</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/42.png" alt="png"></p><pre><code>å›¾åƒæ•°æ®å½¢çŠ¶å’Œå¯¹åº”æ•°æ®ä¸º: (28, 28)å›¾åƒæ ‡ç­¾å½¢çŠ¶å’Œå¯¹åº”æ•°æ®ä¸º: (1,) [5]æ‰“å°ç¬¬ä¸€ä¸ªbatchçš„ç¬¬ä¸€ä¸ªå›¾åƒï¼Œå¯¹åº”æ ‡ç­¾æ•°å­—ä¸º[5]</code></pre><blockquote><p><strong>æ‰©å±•</strong>ï¼š</p><p><code>matplotlib.pyplot.imshow(X, cmap=None)</code>ï¼šcmap å³é¢œè‰²å›¾è°±ï¼ˆcolormap)ï¼Œé»˜è®¤ç»˜åˆ¶ä¸º RGB(A) é¢œè‰²ç©ºé—´ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">autumn çº¢-æ©™-é»„</span><br><span class="line">bone é»‘-ç™½</span><br><span class="line">cool é’-æ´‹çº¢</span><br><span class="line">copper é»‘-é“œ</span><br><span class="line">flag çº¢-ç™½-è“-é»‘</span><br><span class="line">gray é»‘-ç™½</span><br><span class="line">hot é»‘-çº¢-é»„-ç™½</span><br><span class="line">hsv çº¢-é»„-ç»¿-é’-è“-æ´‹çº¢-çº¢</span><br><span class="line">inferno é»‘-çº¢-é»„</span><br><span class="line">jet è“-é’-é»„-çº¢</span><br><span class="line">magma é»‘-çº¢-ç™½</span><br><span class="line">pink é»‘-ç²‰-ç™½</span><br><span class="line">plasma ç»¿-çº¢-é»„</span><br><span class="line">prism çº¢-é»„-ç»¿-è“-ç´«-...-ç»¿æ¨¡å¼</span><br><span class="line">spring æ´‹çº¢-é»„</span><br><span class="line">summer ç»¿-é»„</span><br><span class="line">viridis è“-ç»¿-é»„</span><br><span class="line">winter è“-ç»¿</span><br></pre></td></tr></table></figure></blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¯»å–çš„æ•°æ®è¿›è¡Œæ•°æ®é¢„å¤„ç†ï¼Œæ‰§è¡Œå½’ä¸€åŒ–ï¼Œå°†æ•°æ®èŒƒå›´ä¸º [0, 255] çš„å›¾åƒå½’ä¸€åŒ–åˆ° [0, 1] ã€‚æœ€åå°†å›¾åƒè°ƒæ•´ä¸º<code>[batch_size, H*W]</code>çš„å½¢çŠ¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å›¾åƒå½’ä¸€åŒ–å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">norm_img</span>(<span class="params">img</span>):</span><br><span class="line">    <span class="comment"># éªŒè¯ä¼ å…¥æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œimgçš„shapeä¸º[batch_size, 28, 28]</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(img.shape) == <span class="number">3</span></span><br><span class="line">    batch_size, img_h, img_w = img.shape[<span class="number">0</span>], img.shape[<span class="number">1</span>], img.shape[<span class="number">2</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å½’ä¸€åŒ–å›¾åƒæ•°æ®</span></span><br><span class="line">    img = img / <span class="number">255</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°†imgå›¾åƒreshapeä¸º[batch_size, 784]</span></span><br><span class="line">    img = paddle.reshape(img, [batch_size, img_h*img_w])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> img</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éšæœºç”Ÿæˆä¸€å¼ å›¾åƒåºåˆ—: (æ‰¹é‡, é«˜, å®½)</span></span><br><span class="line">image = paddle.rand([<span class="number">3</span>,<span class="number">28</span>,<span class="number">28</span>])</span><br><span class="line"><span class="built_in">print</span>(image.shape)<span class="comment"># æ‰“å°å›¾ç‰‡å½¢çŠ¶</span></span><br><span class="line">norm_img(image)<span class="comment"># è°ƒç”¨å‡½æ•°ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†</span></span><br></pre></td></tr></table></figure><h2 id="2-æ¨¡å‹è®¾è®¡"><a href="#2-æ¨¡å‹è®¾è®¡" class="headerlink" title="2.æ¨¡å‹è®¾è®¡"></a><strong>2.æ¨¡å‹è®¾è®¡</strong></h2><p>åœ¨æˆ¿ä»·é¢„æµ‹æ·±åº¦å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å•å±‚ä¸”æ²¡æœ‰éçº¿æ€§å˜æ¢çš„æ¨¡å‹ï¼Œå–å¾—äº†ç†æƒ³çš„é¢„æµ‹æ•ˆæœã€‚åœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶ä½¿ç”¨è¿™ä¸ªæ¨¡å‹é¢„æµ‹è¾“å…¥çš„å›¾å½¢æ•°å­—å€¼ã€‚å…¶ä¸­ï¼Œæ¨¡å‹çš„è¾“å…¥ä¸º 784 ç»´ï¼ˆ28Ã—28ï¼‰æ•°æ®ï¼Œè¾“å‡ºä¸º1ç»´æ•°æ®ï¼Œå¦‚ <strong>å›¾4</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/9c146e7d9c4a4119a8cd09f7c8b5ee61f2ac1820a221429a80430291728b9c4a" width="400" hegiht="" ></center><center><br>å›¾4ï¼šæ‰‹å†™æ•°å­—è¯†åˆ«ç½‘ç»œæ¨¡å‹</br></center><p><br></br></p><p>è¾“å…¥åƒç´ çš„ä½ç½®æ’å¸ƒä¿¡æ¯å¯¹ç†è§£å›¾åƒå†…å®¹éå¸¸é‡è¦ï¼Œå› æ­¤ç½‘ç»œçš„è¾“å…¥è®¾è®¡ä¸º 28Ã—28 çš„å°ºå¯¸ï¼Œè€Œä¸æ˜¯ 1Ã—784 ï¼Œä»¥ä¾¿äºæ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¤„ç†åƒç´ ä¹‹é—´çš„ç©ºé—´ä¿¡æ¯ã€‚</p><hr><p><strong>è¯´æ˜ï¼š</strong></p><p>äº‹å®ä¸Šï¼Œé‡‡ç”¨åªæœ‰ä¸€å±‚çš„ç®€å•ç½‘ç»œï¼ˆå¯¹è¾“å…¥æ±‚åŠ æƒå’Œï¼‰æ—¶å¹¶æ²¡æœ‰å¤„ç†ä½ç½®å…³ç³»ä¿¡æ¯ï¼Œå› æ­¤å¯ä»¥çŒœæµ‹å‡ºæ­¤æ¨¡å‹çš„é¢„æµ‹æ•ˆæœå¯èƒ½æœ‰é™ã€‚åœ¨åç»­ä¼˜åŒ–ç¯èŠ‚ä»‹ç»çš„å·ç§¯ç¥ç»ç½‘ç»œåˆ™æ›´å¥½çš„è€ƒè™‘äº†è¿™ç§ä½ç½®å…³ç³»ä¿¡æ¯ï¼Œæ¨¡å‹çš„é¢„æµ‹æ•ˆæœä¹Ÿä¼šæœ‰æ˜¾è‘—æå‡ã€‚</p><hr><p>ä¸‹é¢ä»¥ç±»çš„æ–¹å¼ç»„å»ºæ‰‹å†™æ•°å­—è¯†åˆ«çš„ç½‘ç»œï¼Œå®ç°æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰mnistæ•°æ®è¯†åˆ«ç½‘ç»œç»“æ„ï¼ŒåŒæˆ¿ä»·é¢„æµ‹ç½‘ç»œ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MNIST</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MNIST, self).__init__()<span class="comment"># çˆ¶ç±»å‡½æ•°æ¨¡å‹çš„åˆå§‹åŒ–ï¼Œå‚æ•°å¯å†™å¯ä¸å†™</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å®šä¹‰ä¸€å±‚å…¨è¿æ¥å±‚ï¼Œè¾“å‡ºç»´åº¦æ˜¯1</span></span><br><span class="line">        self.fc = paddle.nn.Linear(in_features=<span class="number">784</span>, out_features=<span class="number">1</span>)<span class="comment"># è¾“å…¥784 è¾“å‡º1</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># å®šä¹‰ç½‘ç»œç»“æ„çš„å‰å‘è®¡ç®—è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        outputs = self.fc(inputs)<span class="comment">#è¿™é‡Œæ²¡æœ‰ä»»ä½•éçº¿æ€§çš„è½¬æ¢ï¼Œç›´æ¥è¿›è¡ŒåŠ æƒå’Œçš„è®¡ç®—è¾“å‡º</span></span><br><span class="line">        <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure><h2 id="3-è®­ç»ƒé…ç½®"><a href="#3-è®­ç»ƒé…ç½®" class="headerlink" title="3.è®­ç»ƒé…ç½®"></a><strong>3.è®­ç»ƒé…ç½®</strong></h2><p>è®­ç»ƒé…ç½®éœ€è¦å…ˆç”Ÿæˆæ¨¡å‹å®ä¾‹ï¼ˆè®¾ä¸ºâ€œè®­ç»ƒâ€çŠ¶æ€ï¼‰ï¼Œå†è®¾ç½®ä¼˜åŒ–ç®—æ³•å’Œå­¦ä¹ ç‡ï¼ˆä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™SGDï¼Œå­¦ä¹ ç‡è®¾ç½®ä¸º0.001ï¼‰ï¼Œå®ç°æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜ç½‘ç»œç»“æ„</span></span><br><span class="line">model = MNIST()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model</span>):</span><br><span class="line">    <span class="comment"># å¯åŠ¨è®­ç»ƒæ¨¡å¼</span></span><br><span class="line">    model.train()</span><br><span class="line">    <span class="comment"># åŠ è½½è®­ç»ƒé›† batch_size è®¾ä¸º 16</span></span><br><span class="line">    train_loader = paddle.io.DataLoader(paddle.vision.datasets.MNIST(mode=<span class="string">&#x27;train&#x27;</span>), </span><br><span class="line">                                        batch_size=<span class="number">16</span>, </span><br><span class="line">                                        shuffle=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨ï¼Œä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™SGDä¼˜åŒ–å™¨ï¼Œå­¦ä¹ ç‡è®¾ç½®ä¸º0.001ï¼Œæ›´æ–°å‚æ•°ä¸ºæ¨¡å‹æ‰€æœ‰çš„å‚æ•°</span></span><br><span class="line">    opt = paddle.optimizer.SGD(learning_rate=<span class="number">0.001</span>, parameters=model.parameters())</span><br></pre></td></tr></table></figure><h2 id="4-è®­ç»ƒè¿‡ç¨‹"><a href="#4-è®­ç»ƒè¿‡ç¨‹" class="headerlink" title="4.è®­ç»ƒè¿‡ç¨‹"></a><strong>4.è®­ç»ƒè¿‡ç¨‹</strong></h2><p>è®­ç»ƒè¿‡ç¨‹é‡‡ç”¨äºŒå±‚å¾ªç¯åµŒå¥—æ–¹å¼ï¼Œè®­ç»ƒå®Œæˆåéœ€è¦ä¿å­˜æ¨¡å‹å‚æ•°ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚</p><ul><li><code>å†…å±‚å¾ªç¯</code>ï¼šè´Ÿè´£æ•´ä¸ªæ•°æ®é›†çš„ä¸€æ¬¡éå†ï¼Œéå†æ•°æ®é›†é‡‡ç”¨åˆ†æ‰¹æ¬¡ï¼ˆbatchï¼‰æ–¹å¼ã€‚</li><li><code>å¤–å±‚å¾ªç¯</code>ï¼šå®šä¹‰éå†æ•°æ®é›†çš„æ¬¡æ•°ï¼Œæœ¬æ¬¡è®­ç»ƒä¸­å¤–å±‚å¾ªç¯ 10 æ¬¡ï¼Œé€šè¿‡å‚æ•° EPOCH_NUM è®¾ç½®ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="comment"># ç¡®ä¿ä»paddle.vision.datasets.MNISTä¸­åŠ è½½çš„å›¾åƒæ•°æ®æ˜¯np.ndarrayç±»å‹</span></span><br><span class="line">paddle.vision.set_image_backend(<span class="string">&#x27;cv2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜ç½‘ç»œç»“æ„</span></span><br><span class="line">model = MNIST()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model</span>):</span><br><span class="line">    <span class="comment"># å¯åŠ¨è®­ç»ƒæ¨¡å¼</span></span><br><span class="line">    model.train()</span><br><span class="line">    <span class="comment"># åŠ è½½è®­ç»ƒé›† batch_size è®¾ä¸º 16</span></span><br><span class="line">    train_loader = paddle.io.DataLoader(paddle.vision.datasets.MNIST(mode=<span class="string">&#x27;train&#x27;</span>), </span><br><span class="line">                                        batch_size=<span class="number">16</span>, </span><br><span class="line">                                        shuffle=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨ï¼Œä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™SGDä¼˜åŒ–å™¨ï¼Œå­¦ä¹ ç‡è®¾ç½®ä¸º0.001</span></span><br><span class="line">    opt = paddle.optimizer.SGD(learning_rate=<span class="number">0.001</span>, parameters=model.parameters())</span><br><span class="line">    </span><br><span class="line">    EPOCH_NUM = <span class="number">10</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            <span class="comment"># å°†å›¾åƒæ•°æ®è½¬æ¢ä¸º float32 ç±»å‹ï¼Œä¸ºçš„æ˜¯ç¥ç»ç½‘ç»œå¯ä»¥è¯†åˆ«</span></span><br><span class="line">            images = norm_img(data[<span class="number">0</span>]).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            labels = data[<span class="number">1</span>].astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å‰å‘è®¡ç®—çš„è¿‡ç¨‹</span></span><br><span class="line">            predicts = model(images)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">            loss = F.square_error_cost(predicts, labels)</span><br><span class="line">            avg_loss = paddle.mean(loss)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#æ¯è®­ç»ƒäº†1000æ‰¹æ¬¡çš„æ•°æ®ï¼Œæ‰“å°ä¸‹å½“å‰Lossçš„æƒ…å†µä¸€å…±æ˜¯ 50000/16 æ¬¡ï¼Œæ¯1000æ¬¡æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">            <span class="keyword">if</span> batch_id % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;epoch_id: &#123;&#125;, batch_id: &#123;&#125;, loss is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch, batch_id, avg_loss.numpy()))</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#åå‘ä¼ æ’­ï¼Œæ›´æ–°å‚æ•°çš„è¿‡ç¨‹</span></span><br><span class="line">            avg_loss.backward()</span><br><span class="line">            opt.step()</span><br><span class="line">            opt.clear_grad()</span><br><span class="line">            </span><br><span class="line">train(model)<span class="comment">#è°ƒç”¨å‡½æ•° è¿›è¡Œè®­ç»ƒ</span></span><br><span class="line"></span><br><span class="line">paddle.save(model.state_dict(), <span class="string">&#x27;data/mnist.pdparams&#x27;</span>)<span class="comment"># ä¿å­˜å‚æ•°</span></span><br></pre></td></tr></table></figure><pre><code>epoch_id: 0, batch_id: 0, loss is: [25.360065]epoch_id: 0, batch_id: 1000, loss is: [5.9149103]epoch_id: 0, batch_id: 2000, loss is: [5.9967823]epoch_id: 0, batch_id: 3000, loss is: [2.5753934]ã€‚ã€‚ã€‚epoch_id: 9, batch_id: 0, loss is: [2.2884061]epoch_id: 9, batch_id: 1000, loss is: [3.1237333]epoch_id: 9, batch_id: 2000, loss is: [3.7671528]epoch_id: 9, batch_id: 3000, loss is: [2.7026415]</code></pre><p>å¦å¤–ï¼Œä»è®­ç»ƒè¿‡ç¨‹ä¸­æŸå¤±æ‰€å‘ç”Ÿçš„å˜åŒ–å¯ä»¥å‘ç°ï¼Œè™½ç„¶æŸå¤±æ•´ä½“ä¸Šåœ¨é™ä½ï¼Œä½†åˆ°è®­ç»ƒçš„æœ€åä¸€è½®ï¼ŒæŸå¤±å‡½æ•°å€¼ä¾ç„¶è¾ƒé«˜ã€‚å¯ä»¥çŒœæµ‹æ‰‹å†™æ•°å­—è¯†åˆ«å®Œå…¨å¤ç”¨æˆ¿ä»·é¢„æµ‹çš„ä»£ç ï¼Œè®­ç»ƒæ•ˆæœå¹¶ä¸å¥½ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡æ¨¡å‹æµ‹è¯•ï¼Œè·å–æ¨¡å‹è®­ç»ƒçš„çœŸå®æ•ˆæœã€‚</p><h2 id="5-æ¨¡å‹æµ‹è¯•"><a href="#5-æ¨¡å‹æµ‹è¯•" class="headerlink" title="5.æ¨¡å‹æµ‹è¯•"></a><strong>5.æ¨¡å‹æµ‹è¯•</strong></h2><p>æ¨¡å‹æµ‹è¯•çš„ä¸»è¦ç›®çš„æ˜¯éªŒè¯è®­ç»ƒå¥½çš„æ¨¡å‹æ˜¯å¦èƒ½æ­£ç¡®è¯†åˆ«å‡ºæ•°å­—ï¼ŒåŒ…æ‹¬å¦‚ä¸‹å››æ­¥ï¼š</p><ul><li>å£°æ˜å®ä¾‹</li><li>åŠ è½½æ¨¡å‹ï¼šåŠ è½½è®­ç»ƒè¿‡ç¨‹ä¸­ä¿å­˜çš„æ¨¡å‹å‚æ•°ï¼Œ</li><li>çŒå…¥æ•°æ®ï¼šå°†æµ‹è¯•æ ·æœ¬ä¼ å…¥æ¨¡å‹ï¼Œæ¨¡å‹çš„çŠ¶æ€è®¾ç½®ä¸ºæ ¡éªŒçŠ¶æ€ï¼ˆevalï¼‰ï¼Œæ˜¾å¼å‘Šè¯‰æ¡†æ¶æˆ‘ä»¬æ¥ä¸‹æ¥åªä¼šä½¿ç”¨å‰å‘è®¡ç®—çš„æµç¨‹ï¼Œä¸ä¼šè®¡ç®—æ¢¯åº¦å’Œæ¢¯åº¦åå‘ä¼ æ’­ã€‚</li><li>è·å–é¢„æµ‹ç»“æœï¼Œå–æ•´åä½œä¸ºé¢„æµ‹æ ‡ç­¾è¾“å‡ºã€‚</li></ul><p>åœ¨æ¨¡å‹æµ‹è¯•ä¹‹å‰ï¼Œéœ€è¦å…ˆä»<code>&#39;./work/test.png&#39;</code>æ–‡ä»¶ä¸­è¯»å–æ ·ä¾‹å›¾ç‰‡ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥å›¾åƒè¯»å–ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">img_path = <span class="string">&#x27;./work/test.jpg&#x27;</span></span><br><span class="line"><span class="comment"># è¯»å–åŸå§‹å›¾åƒå¹¶æ˜¾ç¤º</span></span><br><span class="line">im = Image.<span class="built_in">open</span>(img_path)</span><br><span class="line">plt.imshow(im)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/43.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†åŸå§‹å›¾åƒè½¬ä¸ºç°åº¦å›¾</span></span><br><span class="line">im = im.convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;åŸå§‹å›¾åƒshape: &#x27;</span>, np.array(im).shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨Image.ANTIALIASæ–¹å¼é‡‡æ ·åŸå§‹å›¾ç‰‡ --&gt; æ­¤å¤„ç”±æ¨¡å‹è¾“å…¥ç»´åº¦å†³å®šï¼Œå®ä¸ºå¯¹æµ‹è¯•å›¾åƒçš„é¢„å¤„ç†</span></span><br><span class="line">im = im.resize((<span class="number">28</span>, <span class="number">28</span>), Image.ANTIALIAS)</span><br><span class="line">plt.imshow(im)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;é‡‡æ ·åå›¾ç‰‡shape: &quot;</span>, np.array(im).shape)</span><br></pre></td></tr></table></figure><pre><code>åŸå§‹å›¾åƒshape:  (28, 28)é‡‡æ ·åå›¾ç‰‡shape:  (28, 28)</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/44.png" alt="png"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¸Šé¢å¯¹æµ‹è¯•å›¾åƒçš„å¤„ç†æ–¹å¼å°è£…ä¸ºå‡½æ•°ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–ä¸€å¼ æœ¬åœ°çš„æ ·ä¾‹å›¾ç‰‡ï¼Œè½¬å˜æˆæ¨¡å‹è¾“å…¥çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_image</span>(<span class="params">img_path</span>):</span><br><span class="line">    <span class="comment"># ä»img_pathä¸­è¯»å–å›¾åƒï¼Œå¹¶è½¬ä¸ºç°åº¦å›¾</span></span><br><span class="line">    im = Image.<span class="built_in">open</span>(img_path).convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">    im = im.resize((<span class="number">28</span>, <span class="number">28</span>), Image.ANTIALIAS)</span><br><span class="line">    im = np.array(im).reshape(<span class="number">1</span>, -<span class="number">1</span>).astype(np.float32) <span class="comment"># å°†åŸå›¾åƒè°ƒæ•´ä¸º(1, h*w)çš„å½¢çŠ¶</span></span><br><span class="line">    <span class="comment"># å›¾åƒå½’ä¸€åŒ–ï¼Œä¿æŒå’Œæ•°æ®é›†çš„æ•°æ®èŒƒå›´ä¸€è‡´ï¼Œå› ä¸ºä¸€ä¸ªæ˜¯ç™½ä½é»‘å­—ï¼Œä¸€ä¸ªæ˜¯é»‘åº•ç™½å­—</span></span><br><span class="line">    im = <span class="number">1</span> - im / <span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> im</span><br></pre></td></tr></table></figure><p>å¼€å¯é¢„æµ‹è¿‡ç¨‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰é¢„æµ‹è¿‡ç¨‹</span></span><br><span class="line">model = MNIST()</span><br><span class="line">params_file_path = <span class="string">&#x27;data/mnist.pdparams&#x27;</span></span><br><span class="line">img_path = <span class="string">&#x27;./work/test.jpg&#x27;</span></span><br><span class="line"><span class="comment"># åŠ è½½æ¨¡å‹å‚æ•°</span></span><br><span class="line">param_dict = paddle.load(params_file_path)</span><br><span class="line">model.load_dict(param_dict)</span><br><span class="line"><span class="comment"># çŒå…¥æ•°æ®</span></span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">tensor_img = load_image(img_path)</span><br><span class="line">result = model(paddle.to_tensor(tensor_img))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;result&#x27;</span>,result)</span><br><span class="line"><span class="comment">#  é¢„æµ‹è¾“å‡ºå–æ•´ï¼Œå³ä¸ºé¢„æµ‹çš„æ•°å­—ï¼Œæ‰“å°ç»“æœ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æœ¬æ¬¡é¢„æµ‹çš„æ•°å­—æ˜¯&quot;</span>, result.numpy().astype(<span class="string">&#x27;int32&#x27;</span>))</span><br></pre></td></tr></table></figure><pre><code>result Tensor(shape=[1, 1], dtype=float32, place=Place(cpu), stop_gradient=False,       [[1.14087784]])æœ¬æ¬¡é¢„æµ‹çš„æ•°å­—æ˜¯ [[1]]</code></pre><p>è¿™é‡Œåªæ˜¯éªŒè¯äº†ä¸€ä¸ªæ ·æœ¬çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬å°è¯•æ›´å¤šçš„æ ·æœ¬ï¼Œå¯å‘ç°è®¸å¤šæ•°å­—å›¾ç‰‡è¯†åˆ«ç»“æœæ˜¯é”™è¯¯çš„ã€‚å› æ­¤å®Œå…¨å¤ç”¨æˆ¿ä»·é¢„æµ‹çš„å®éªŒå¹¶ä¸é€‚ç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«ä»»åŠ¡ï¼</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šå¯¹æ‰‹å†™æ•°å­—è¯†åˆ«å®éªŒæ¨¡å‹è¿›è¡Œé€ä¸€æ”¹è¿›ï¼Œç›´åˆ°è·å¾—ä»¤äººæ»¡æ„çš„ç»“æœã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_åŸºç¡€æ¨¡å‹å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 4.1-ä½¿ç”¨é£æ¡¨å®ç°æˆ¿ä»·é¢„æµ‹ä»»åŠ¡</title>
      <link href="/2022/12/30/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A04.1-%E4%BD%BF%E7%94%A8%E9%A3%9E%E6%A1%A8%E5%AE%9E%E7%8E%B0%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B%E4%BB%BB%E5%8A%A1/"/>
      <url>/2022/12/30/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A04.1-%E4%BD%BF%E7%94%A8%E9%A3%9E%E6%A1%A8%E5%AE%9E%E7%8E%B0%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ¡ä½¿ç”¨é£æ¡¨é‡å†™æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹ä»»åŠ¡"><a href="#ğŸ¡ä½¿ç”¨é£æ¡¨é‡å†™æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹ä»»åŠ¡" class="headerlink" title="ğŸ¡ä½¿ç”¨é£æ¡¨é‡å†™æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹ä»»åŠ¡"></a><strong>ğŸ¡ä½¿ç”¨é£æ¡¨é‡å†™æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹ä»»åŠ¡</strong></h1><p>å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ul><li>äº†è§£è¾¨åˆ«åŸºç¡€æ¨¡å‹çš„æ–¹æ³•ï¼›</li><li>ç†Ÿæ‚‰è¿›è¡Œé¢„æµ‹ä»»åŠ¡ä¸æ­å»ºåŸºç¡€æ¨¡å‹çš„æµç¨‹ï¼›</li><li>æŒæ¡å±‚ä¸å—çš„åŸºæœ¬æ¦‚å¿µï¼ŒæŒæ¡è‡ªå®šä¹‰å±‚çš„æ–¹æ³•ã€‚</li></ul><hr><p>æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹æ˜¯ä¸€ä¸ªç»å…¸çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œç±»ä¼¼äºç¨‹åºå‘˜ä¸–ç•Œçš„ â€œHello Worldâ€ã€‚å’Œå¤§å®¶å¯¹æˆ¿ä»·çš„æ™®éè®¤çŸ¥ç›¸åŒï¼Œæ³¢å£«é¡¿åœ°åŒºçš„æˆ¿ä»·å—è¯¸å¤šå› ç´ å½±å“ã€‚è¯¥æ•°æ®é›†ç»Ÿè®¡äº†13ç§å¯èƒ½å½±å“æˆ¿ä»·çš„å› ç´ å’Œè¯¥ç±»å‹æˆ¿å±‹çš„å‡ä»·ï¼ŒæœŸæœ›æ„å»ºä¸€ä¸ªåŸºäº13ä¸ªå› ç´ è¿›è¡Œæˆ¿ä»·é¢„æµ‹çš„æ¨¡å‹ã€‚</p><p>å¦‚<strong>å›¾1</strong>æ‰€ç¤ºï¼Œå¯¹äºé¢„æµ‹é—®é¢˜ï¼Œå¯ä»¥æ ¹æ®é¢„æµ‹è¾“å‡ºçš„ç±»å‹æ˜¯è¿ç»­çš„å®æ•°å€¼ï¼Œè¿˜æ˜¯ç¦»æ•£çš„æ ‡ç­¾ï¼ŒåŒºåˆ†ä¸ºå›å½’ä»»åŠ¡å’Œåˆ†ç±»ä»»åŠ¡ã€‚å› ä¸ºæˆ¿ä»·æ˜¯ä¸€ä¸ªè¿ç»­å€¼ï¼Œæ‰€ä»¥æˆ¿ä»·é¢„æµ‹æ˜¾ç„¶æ˜¯ä¸€ä¸ªå›å½’ä»»åŠ¡ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/abce0cb2a92f4e679c6855cfa520491597171533a0b0447e8d51d904446e213e" width="550" hegiht="" ></center><center><br>å›¾1ï¼šæ³¢å£«é¡¿æˆ¿ä»·å½±å“å› ç´ ç¤ºæ„å›¾</br></center><p>æ·±åº¦å­¦ä¹ ä¸ä»…å®ç°äº†æ¨¡å‹çš„ç«¯åˆ°ç«¯å­¦ä¹ ï¼Œè¿˜æ¨åŠ¨äº†äººå·¥æ™ºèƒ½è¿›å…¥å·¥ä¸šå¤§ç”Ÿäº§é˜¶æ®µï¼Œäº§ç”Ÿäº†æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–å’Œæ¨¡å—åŒ–çš„é€šç”¨æ¡†æ¶ã€‚ä¸åŒåœºæ™¯çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å…·å¤‡ä¸€å®šçš„é€šç”¨æ€§ï¼Œäº”ä¸ªæ­¥éª¤å³å¯å®Œæˆæ¨¡å‹çš„æ„å»ºå’Œè®­ç»ƒï¼Œå¦‚ <strong>å›¾2</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/17a932875f5f4f28a62bf060f96678618094841fbfb54f098eac798bf0e44ca6" width="700" hegiht="" ></center><center><br>å›¾2ï¼šä½¿ç”¨é£æ¡¨æ¡†æ¶æ„å»ºç¥ç»ç½‘ç»œè¿‡ç¨‹</br></center><p>æ­£æ˜¯ç”±äºæ·±åº¦å­¦ä¹ çš„å»ºæ¨¡å’Œè®­ç»ƒçš„è¿‡ç¨‹å­˜åœ¨é€šç”¨æ€§ï¼Œåœ¨æ„å»ºä¸åŒçš„æ¨¡å‹æ—¶ï¼Œåªæœ‰<strong>æ¨¡å‹ä¸‰è¦ç´ </strong>ã€æ¨¡å‹ã€æŸå¤±ã€ä¼˜åŒ–å™¨ã€‘ä¸åŒï¼Œå…¶å®ƒæ­¥éª¤åŸºæœ¬ä¸€è‡´ï¼Œæ·±åº¦å­¦ä¹ æ¡†æ¶æ‰æœ‰ç”¨æ­¦ä¹‹åœ°ã€‚åœ¨æ•°æ®å¤„ç†ä¹‹å‰ï¼Œéœ€è¦å…ˆåŠ è½½é£æ¡¨æ¡†æ¶çš„ç›¸å…³ç±»åº“ã€‚</p><hr><p><strong>æ‰©å±•ï¼š</strong> ç«¯åˆ°ç«¯çš„å­¦ä¹ </p><p>**ç«¯åˆ°ç«¯å­¦ä¹  (End-to-End Learning)**ï¼Œä¹Ÿç§°ç«¯åˆ°ç«¯è®­ç»ƒï¼Œæ˜¯æŒ‡åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¸è¿›è¡Œåˆ†æ¨¡å—æˆ–åˆ†é˜¶æ®µè®­ç»ƒï¼Œç›´æ¥ä¼˜åŒ–ä»»åŠ¡çš„æ€»ä½“ç›®æ ‡ã€‚é€šä¿—æ¥è®²ï¼Œå…¶å®å°±æ˜¯ä¸åšå…¶ä»–é¢å¤–å¤„ç†ï¼Œä»åŸå§‹æ•°æ®è¾“å…¥åˆ°ä»»åŠ¡ç»“æœè¾“å‡ºï¼Œæ•´ä¸ªè®­ç»ƒå’Œé¢„æµ‹è¿‡ç¨‹éƒ½æ˜¯åœ¨æ¨¡å‹é‡Œå®Œæˆçš„ã€‚ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åŠ è½½é£æ¡¨ã€NumPyå’Œç›¸å…³ç±»åº“</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Linear</span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­å‚æ•°å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/Overview_cn.html">paddle</a>ï¼šé£æ¡¨çš„ä¸»åº“ï¼Œpaddle æ ¹ç›®å½•ä¸‹ä¿ç•™äº†å¸¸ç”¨APIçš„åˆ«åï¼Œå½“å‰åŒ…æ‹¬ï¼špaddle.tensorã€paddle.frameworkã€paddle.deviceç›®å½•ä¸‹çš„æ‰€æœ‰APIï¼›</li><li><a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Linear_cn.html#linear">Linear</a>ï¼šç¥ç»ç½‘ç»œçš„å…¨è¿æ¥å±‚å‡½æ•°ï¼ŒåŒ…å«æ‰€æœ‰è¾“å…¥æƒé‡ç›¸åŠ çš„åŸºæœ¬ç¥ç»å…ƒç»“æ„ã€‚åœ¨æˆ¿ä»·é¢„æµ‹ä»»åŠ¡ä¸­ï¼Œä½¿ç”¨åªæœ‰ä¸€å±‚çš„ç¥ç»ç½‘ç»œï¼ˆå…¨è¿æ¥å±‚ï¼‰å®ç°çº¿æ€§å›å½’æ¨¡å‹ã€‚</li><li><a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Overview_cn.html#paddle-nn">paddle.nn</a>ï¼šç»„ç½‘ç›¸å…³çš„APIï¼ŒåŒ…æ‹¬ Linearã€å·ç§¯ Conv2Dã€å¾ªç¯ç¥ç»ç½‘ç»œLSTMã€æŸå¤±å‡½æ•°CrossEntropyLossã€æ¿€æ´»å‡½æ•°ReLUç­‰ï¼›</li><li>paddle.nn.functionalï¼šä¸paddle.nnä¸€æ ·ï¼ŒåŒ…å«ç»„ç½‘ç›¸å…³çš„APIï¼Œå¦‚ï¼šLinearã€æ¿€æ´»å‡½æ•°ReLUç­‰ï¼ŒäºŒè€…åŒ…å«çš„åŒåæ¨¡å—åŠŸèƒ½ç›¸åŒï¼Œè¿è¡Œæ€§èƒ½ä¹ŸåŸºæœ¬ä¸€è‡´ã€‚ å·®åˆ«åœ¨äºpaddle.nnç›®å½•ä¸‹çš„æ¨¡å—å‡æ˜¯ç±»ï¼Œæ¯ä¸ªç±»è‡ªå¸¦æ¨¡å—å‚æ•°ï¼›<strong>paddle.nn.functionalç›®å½•ä¸‹çš„æ¨¡å—å‡æ˜¯å‡½æ•°ï¼Œéœ€è¦æ‰‹åŠ¨ä¼ å…¥å‡½æ•°è®¡ç®—æ‰€éœ€è¦çš„å‚æ•°ã€‚</strong> åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå·ç§¯ã€å…¨è¿æ¥å±‚ç­‰æœ¬èº«å…·æœ‰å¯å­¦ä¹ çš„å‚æ•°ï¼Œå»ºè®®ä½¿ç”¨paddle.nnï¼›è€Œæ¿€æ´»å‡½æ•°ã€æ± åŒ–ç­‰æ“ä½œæ²¡æœ‰å¯å­¦ä¹ å‚æ•°ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨paddle.nn.functionalã€‚</li></ul><hr><p><strong>è¯´æ˜ï¼š</strong></p><p>é£æ¡¨æ”¯æŒä¸¤ç§æ·±åº¦å­¦ä¹ å»ºæ¨¡ç¼–å†™æ–¹å¼ï¼Œæ›´æ–¹ä¾¿è°ƒè¯•çš„åŠ¨æ€å›¾æ¨¡å¼å’Œæ€§èƒ½æ›´å¥½å¹¶ä¾¿äºéƒ¨ç½²çš„é™æ€å›¾æ¨¡å¼ã€‚</p><ul><li>åŠ¨æ€å›¾æ¨¡å¼ï¼ˆå‘½ä»¤å¼ç¼–ç¨‹èŒƒå¼ï¼Œç±»æ¯”Pythonï¼‰ï¼šè§£æå¼çš„æ‰§è¡Œæ–¹å¼ã€‚ç”¨æˆ·æ— éœ€é¢„å…ˆå®šä¹‰å®Œæ•´çš„ç½‘ç»œç»“æ„ï¼Œæ¯å†™ä¸€è¡Œç½‘ç»œä»£ç ï¼Œå³å¯åŒæ—¶è·å¾—è®¡ç®—ç»“æœï¼›</li><li>é™æ€å›¾æ¨¡å¼ï¼ˆå£°æ˜å¼ç¼–ç¨‹èŒƒå¼ï¼Œç±»æ¯”C++ï¼‰ï¼šå…ˆç¼–è¯‘åæ‰§è¡Œçš„æ–¹å¼ã€‚ç”¨æˆ·éœ€é¢„å…ˆå®šä¹‰å®Œæ•´çš„ç½‘ç»œç»“æ„ï¼Œå†å¯¹ç½‘ç»œç»“æ„è¿›è¡Œç¼–è¯‘ä¼˜åŒ–åï¼Œæ‰èƒ½æ‰§è¡Œè·å¾—è®¡ç®—ç»“æœã€‚</li></ul><p>é£æ¡¨æ¡†æ¶2.0åŠä¹‹åçš„ç‰ˆæœ¬ï¼Œé»˜è®¤ä½¿ç”¨åŠ¨æ€å›¾æ¨¡å¼è¿›è¡Œç¼–ç ï¼ŒåŒæ—¶æä¾›äº†å®Œå¤‡çš„åŠ¨è½¬é™æ”¯æŒï¼Œå¼€å‘è€…ä»…éœ€æ·»åŠ ä¸€ä¸ªè£…é¥°å™¨ï¼ˆ <a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/jit/to_static_cn.html#to-static">to_static</a> ï¼‰ï¼Œé£æ¡¨ä¼šè‡ªåŠ¨å°†åŠ¨æ€å›¾çš„ç¨‹åºè½¬æ¢ä¸ºé™æ€å›¾çš„programï¼Œå¹¶ä½¿ç”¨è¯¥programè®­ç»ƒå¹¶å¯ä¿å­˜é™æ€æ¨¡å‹ä»¥å®ç°æ¨ç†éƒ¨ç½²ã€‚</p><hr><h2 id="1-æ•°æ®å¤„ç†"><a href="#1-æ•°æ®å¤„ç†" class="headerlink" title="1 æ•°æ®å¤„ç†"></a><strong>1 æ•°æ®å¤„ç†</strong></h2><p>æ•°æ®å¤„ç†åŒ…å«äº”ä¸ªéƒ¨åˆ†ï¼šæ•°æ®å¯¼å…¥ã€æ•°æ®å½¢çŠ¶å˜æ¢ã€æ•°æ®é›†åˆ’åˆ†ã€æ•°æ®å½’ä¸€åŒ–å¤„ç†å’Œå°è£…<code>load data</code>å‡½æ•°ã€‚æ•°æ®é¢„å¤„ç†åï¼Œæ‰èƒ½è¢«æ¨¡å‹è°ƒç”¨ã€‚</p><h3 id="1-1-è¯»å…¥æ•°æ®"><a href="#1-1-è¯»å…¥æ•°æ®" class="headerlink" title="1.1 è¯»å…¥æ•°æ®"></a><strong>1.1 è¯»å…¥æ•°æ®</strong></h3><p>é€šè¿‡å¦‚ä¸‹ä»£ç è¯»å…¥æ•°æ®ï¼Œäº†è§£ä¸‹æ³¢å£«é¡¿æˆ¿ä»·çš„æ•°æ®é›†ç»“æ„ï¼Œæ•°æ®å­˜æ”¾åœ¨æœ¬åœ°ç›®å½•ä¸‹<code>work/housing.data</code>æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥éœ€è¦ç”¨åˆ°çš„package</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># è¯»å…¥è®­ç»ƒæ•°æ®</span></span><br><span class="line">datafile = <span class="string">&#x27;work/housing.data&#x27;</span></span><br><span class="line">data = np.fromfile(datafile, sep=<span class="string">&#x27; &#x27;</span>, dtype=np.float32)</span><br><span class="line"><span class="built_in">print</span>(data, data.shape)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[6.320e-03 1.800e+01 2.310e+00 ... 3.969e+02 7.880e+00 1.190e+01] (7084,)</span><br><span class="line">è¯»å…¥çš„æ•°æ®æ˜¯ä¸æ ‡å‡†çš„ï¼Œæ˜¯å…¨å †åœ¨ä¸€åˆ—ï¼Œ</span><br><span class="line">è¿™é‡Œå¯ä»¥çœ‹åˆ°è¯»åˆ°äº†7084è¡Œï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°æ®è¿›è¡Œå½¢çŠ¶å˜æ¢</span><br></pre></td></tr></table></figure><h3 id="1-2-æ•°æ®å½¢çŠ¶å˜æ¢"><a href="#1-2-æ•°æ®å½¢çŠ¶å˜æ¢" class="headerlink" title="1.2 æ•°æ®å½¢çŠ¶å˜æ¢"></a><strong>1.2 æ•°æ®å½¢çŠ¶å˜æ¢</strong></h3><p>ç”±äºè¯»å…¥çš„åŸå§‹æ•°æ®æ˜¯1ç»´çš„ï¼Œæ‰€æœ‰æ•°æ®éƒ½è¿åœ¨ä¸€èµ·ã€‚å› æ­¤éœ€è¦æˆ‘ä»¬å°†æ•°æ®çš„å½¢çŠ¶è¿›è¡Œå˜æ¢ï¼Œå½¢æˆä¸€ä¸ª2ç»´çš„çŸ©é˜µï¼Œæ¯è¡Œä¸ºä¸€ä¸ªæ•°æ®æ ·æœ¬ï¼ˆ14ä¸ªå€¼ï¼‰ï¼Œæ¯ä¸ªæ•°æ®æ ·æœ¬åŒ…å«13ä¸ª$X$ï¼ˆå½±å“æˆ¿ä»·çš„ç‰¹å¾ï¼‰å’Œä¸€ä¸ª$Y$ï¼ˆè¯¥ç±»å‹æˆ¿å±‹çš„å‡ä»·ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å…¥ä¹‹åçš„æ•°æ®è¢«è½¬åŒ–æˆ1ç»´arrayï¼Œå…¶ä¸­arrayçš„ç¬¬0-13é¡¹æ˜¯ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¬¬14-27é¡¹æ˜¯ç¬¬äºŒæ¡æ•°æ®ï¼Œä»¥æ­¤ç±»æ¨.... </span></span><br><span class="line"><span class="comment"># è¿™é‡Œå¯¹åŸå§‹æ•°æ®åšreshapeï¼Œå˜æˆN x 14çš„å½¢å¼</span></span><br><span class="line">feature_names = [ <span class="string">&#x27;CRIM&#x27;</span>, <span class="string">&#x27;ZN&#x27;</span>, <span class="string">&#x27;INDUS&#x27;</span>, <span class="string">&#x27;CHAS&#x27;</span>, <span class="string">&#x27;NOX&#x27;</span>, <span class="string">&#x27;RM&#x27;</span>, <span class="string">&#x27;AGE&#x27;</span>,<span class="string">&#x27;DIS&#x27;</span>, </span><br><span class="line">                 <span class="string">&#x27;RAD&#x27;</span>, <span class="string">&#x27;TAX&#x27;</span>, <span class="string">&#x27;PTRATIO&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;LSTAT&#x27;</span>, <span class="string">&#x27;MEDV&#x27;</span> ]</span><br><span class="line">feature_num = <span class="built_in">len</span>(feature_names)</span><br><span class="line">data = data.reshape([data.shape[<span class="number">0</span>] // feature_num, feature_num])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ•°æ®</span></span><br><span class="line">x = data[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(x.shape)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(data.shape)</span><br></pre></td></tr></table></figure><pre><code>(14,)[6.320e-03 1.800e+01 2.310e+00 0.000e+00 5.380e-01 6.575e+00 6.520e+01 4.090e+00 1.000e+00 2.960e+02 1.530e+01 3.969e+02 4.980e+00 2.400e+01](506, 14)</code></pre><h3 id="1-3-æ•°æ®é›†åˆ’åˆ†"><a href="#1-3-æ•°æ®é›†åˆ’åˆ†" class="headerlink" title="1.3 æ•°æ®é›†åˆ’åˆ†"></a><strong>1.3 æ•°æ®é›†åˆ’åˆ†</strong></h3><p>å°†æ•°æ®é›†åˆ’åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå…¶ä¸­è®­ç»ƒé›†ç”¨äºç¡®å®šæ¨¡å‹çš„å‚æ•°ï¼Œæµ‹è¯•é›†ç”¨äºè¯„åˆ¤æ¨¡å‹çš„æ•ˆæœã€‚ä¸ºä»€ä¹ˆè¦å¯¹æ•°æ®é›†è¿›è¡Œæ‹†åˆ†ï¼Œè€Œä¸èƒ½ç›´æ¥åº”ç”¨äºæ¨¡å‹è®­ç»ƒå‘¢ï¼Ÿè¿™ä¸å­¦ç”Ÿæ—¶ä»£çš„æˆè¯¾å’Œè€ƒè¯•å…³ç³»æ¯”è¾ƒç±»ä¼¼ï¼Œå¦‚ <strong>å›¾3</strong> æ‰€ç¤ºã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/a1c845a50e28474d9aa72028edfea33f1a3deca1d54d40ec94ba366d3a18c408" width="600" hegiht="" ></center><center><br>å›¾3ï¼šè®­ç»ƒé›†å’Œæµ‹è¯•é›†æ‹†åˆ†çš„æ„ä¹‰</br></center><p>ä¸Šå­¦æ—¶æ€»æœ‰ä¸€äº›è‡ªä½œèªæ˜çš„åŒå­¦ï¼Œå¹³æ—¶ä¸è®¤çœŸå­¦ä¹ ï¼Œè€ƒè¯•å‰ä¸´é˜µæŠ±ä½›è„šï¼Œå°†ä¹ é¢˜æ­»è®°ç¡¬èƒŒä¸‹æ¥ï¼Œä½†æ˜¯æˆç»©å¾€å¾€å¹¶ä¸å¥½ã€‚å› ä¸ºå­¦æ ¡æœŸæœ›å­¦ç”ŸæŒæ¡çš„æ˜¯çŸ¥è¯†ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¹ é¢˜æœ¬èº«ã€‚å¦å‡ºæ–°çš„è€ƒé¢˜ï¼Œæ‰èƒ½é¼“åŠ±å­¦ç”ŸåŠªåŠ›å»æŒæ¡ä¹ é¢˜èƒŒåçš„åŸç†ã€‚åŒæ ·æˆ‘ä»¬æœŸæœ›æ¨¡å‹å­¦ä¹ çš„æ˜¯ä»»åŠ¡çš„æœ¬è´¨è§„å¾‹ï¼Œè€Œä¸æ˜¯è®­ç»ƒæ•°æ®æœ¬èº«ï¼Œæ¨¡å‹è®­ç»ƒæœªä½¿ç”¨çš„æ•°æ®ï¼Œæ‰èƒ½æ›´çœŸå®çš„è¯„ä¼°æ¨¡å‹çš„æ•ˆæœã€‚</p><p>åœ¨æœ¬æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†80%çš„æ•°æ®ç”¨ä½œè®­ç»ƒé›†ï¼Œ20%ç”¨ä½œæµ‹è¯•é›†ï¼Œå®ç°ä»£ç å¦‚ä¸‹ã€‚é€šè¿‡æ‰“å°è®­ç»ƒé›†çš„å½¢çŠ¶ï¼Œå¯ä»¥å‘ç°å…±æœ‰404ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬å«æœ‰13ä¸ªç‰¹å¾å’Œ1ä¸ªé¢„æµ‹å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ratio = <span class="number">0.8</span></span><br><span class="line">offset = <span class="built_in">int</span>(data.shape[<span class="number">0</span>] * ratio)</span><br><span class="line">training_data = data[:offset]</span><br><span class="line">test_data = data[offset:]</span><br><span class="line">training_data.shape</span><br><span class="line">text_data.shape</span><br></pre></td></tr></table></figure><pre><code>(404, 14)(102, 14)</code></pre><h3 id="1-4-æ•°æ®å½’ä¸€åŒ–å¤„ç†"><a href="#1-4-æ•°æ®å½’ä¸€åŒ–å¤„ç†" class="headerlink" title="1.4 æ•°æ®å½’ä¸€åŒ–å¤„ç†"></a><strong>1.4 æ•°æ®å½’ä¸€åŒ–å¤„ç†</strong></h3><p>å¯¹æ¯ä¸ªç‰¹å¾è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œä½¿å¾—æ¯ä¸ªç‰¹å¾çš„å–å€¼ç¼©æ”¾åˆ°0~1ä¹‹é—´ã€‚è¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š<strong>ä¸€æ˜¯æ¨¡å‹è®­ç»ƒæ›´é«˜æ•ˆï¼›äºŒæ˜¯ç‰¹å¾å‰çš„æƒé‡å¤§å°å¯ä»¥ä»£è¡¨è¯¥å˜é‡å¯¹é¢„æµ‹ç»“æœçš„è´¡çŒ®åº¦</strong>ï¼ˆå› ä¸ºæ¯ä¸ªç‰¹å¾å€¼æœ¬èº«çš„èŒƒå›´ç›¸åŒï¼‰ã€‚å½’ä¸€åŒ–å…¬å¼å¦‚ä¸‹ï¼š</p><p>$$<br>xâ€™ &#x3D; \frac{x-x_{min}}{x_{max}-x_{min}}<br>$$</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/2eb06823355c4aa9bf25a95c4e259ae54f02b15e00fb4a119d5ed13a3adc0b67" width="650" hegiht="" ></center><center><br>å›¾4ï¼šæ•°æ®å½’ä¸€åŒ–çš„ä¼˜åŠ¿</br></center><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—trainæ•°æ®é›†çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼</span></span><br><span class="line">maximums, minimums, avgs = training_data.<span class="built_in">max</span>(axis=<span class="number">0</span>), \</span><br><span class="line">                            training_data.<span class="built_in">min</span>(axis=<span class="number">0</span>),\</span><br><span class="line">                            training_data.<span class="built_in">sum</span>(axis=<span class="number">0</span>) / training_data.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(feature_num):</span><br><span class="line">    data[:, i] = (data[:, i] - minimums[i]) / (maximums[i] - minimums[i])</span><br></pre></td></tr></table></figure><h3 id="1-5-å°è£…æˆload-dataå‡½æ•°"><a href="#1-5-å°è£…æˆload-dataå‡½æ•°" class="headerlink" title="1.5 å°è£…æˆload dataå‡½æ•°"></a><strong>1.5 å°è£…æˆload dataå‡½æ•°</strong></h3><p>å°†ä¸Šè¿°å‡ ä¸ªæ•°æ®å¤„ç†æ“ä½œå°è£…æˆ<code>load data</code>å‡½æ•°ï¼Œä»¥ä¾¿ä¸‹ä¸€æ­¥æ¨¡å‹çš„è°ƒç”¨ï¼Œå®ç°æ–¹æ³•å¦‚ä¸‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_data</span>():</span><br><span class="line">    <span class="comment"># ä»æ–‡ä»¶å¯¼å…¥æ•°æ®</span></span><br><span class="line">    datafile = <span class="string">&#x27;./work/housing.data&#x27;</span></span><br><span class="line">    data = np.fromfile(datafile, sep=<span class="string">&#x27; &#x27;</span>, dtype=np.float32)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¯æ¡æ•°æ®åŒ…æ‹¬14é¡¹ï¼Œå…¶ä¸­å‰é¢13é¡¹æ˜¯å½±å“å› ç´ ï¼Œç¬¬14é¡¹æ˜¯ç›¸åº”çš„æˆ¿å±‹ä»·æ ¼ä¸­ä½æ•°</span></span><br><span class="line">    feature_names = [ <span class="string">&#x27;CRIM&#x27;</span>, <span class="string">&#x27;ZN&#x27;</span>, <span class="string">&#x27;INDUS&#x27;</span>, <span class="string">&#x27;CHAS&#x27;</span>, <span class="string">&#x27;NOX&#x27;</span>, <span class="string">&#x27;RM&#x27;</span>, <span class="string">&#x27;AGE&#x27;</span>, \</span><br><span class="line">                      <span class="string">&#x27;DIS&#x27;</span>, <span class="string">&#x27;RAD&#x27;</span>, <span class="string">&#x27;TAX&#x27;</span>, <span class="string">&#x27;PTRATIO&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;LSTAT&#x27;</span>, <span class="string">&#x27;MEDV&#x27;</span> ]</span><br><span class="line">    feature_num = <span class="built_in">len</span>(feature_names)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†åŸå§‹æ•°æ®è¿›è¡ŒReshapeï¼Œå˜æˆ[N, 14]è¿™æ ·çš„å½¢çŠ¶</span></span><br><span class="line">    data = data.reshape([data.shape[<span class="number">0</span>] // feature_num, feature_num])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†åŸæ•°æ®é›†æ‹†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œä½¿ç”¨80%çš„æ•°æ®åšè®­ç»ƒï¼Œ20%çš„æ•°æ®åšæµ‹è¯•</span></span><br><span class="line">    <span class="comment"># æµ‹è¯•é›†å’Œè®­ç»ƒé›†å¿…é¡»æ˜¯æ²¡æœ‰äº¤é›†çš„</span></span><br><span class="line">    ratio = <span class="number">0.8</span></span><br><span class="line">    offset = <span class="built_in">int</span>(data.shape[<span class="number">0</span>] * ratio)</span><br><span class="line">    training_data = data[:offset]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—trainæ•°æ®é›†çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼</span></span><br><span class="line">    maximums, minimums = training_data.<span class="built_in">max</span>(axis=<span class="number">0</span>), training_data.<span class="built_in">min</span>(axis=<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®°å½•æ•°æ®çš„å½’ä¸€åŒ–å‚æ•°ï¼Œåœ¨é¢„æµ‹æ—¶å¯¹æ•°æ®åšå½’ä¸€åŒ–[æ–¹ä¾¿åç»­çš„åå½’ä¸€åŒ–çš„ä½¿ç”¨]</span></span><br><span class="line">    <span class="keyword">global</span> max_values</span><br><span class="line">    <span class="keyword">global</span> min_values</span><br><span class="line">   </span><br><span class="line">    max_values = maximums</span><br><span class="line">    min_values = minimums</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(feature_num):</span><br><span class="line">        data[:, i] = (data[:, i] - min_values[i]) / (maximums[i] - minimums[i])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆ’åˆ†æ¯”ä¾‹</span></span><br><span class="line">    training_data = data[:offset]</span><br><span class="line">    test_data = data[offset:]</span><br><span class="line">    <span class="keyword">return</span> training_data, test_data</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æ•°æ®</span></span><br><span class="line">training_data, test_data = load_data()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ•°æ®</span></span><br><span class="line"><span class="built_in">print</span>(training_data.shape, test_data.shape)</span><br><span class="line"><span class="built_in">print</span>(training_data[<span class="number">1</span>,:])<span class="comment">#ç¬¬ä¸€æ¡æ ·æœ¬</span></span><br></pre></td></tr></table></figure><pre><code>(404, 14) (102, 14)[2.35922547e-04 0.00000000e+00 2.62405723e-01 0.00000000e+00 1.72839552e-01 5.47997713e-01 7.82698274e-01 3.48961979e-01 4.34782617e-02 1.14822544e-01 5.53191364e-01 1.00000000e+00 2.04470202e-01 3.68888885e-01]</code></pre><h2 id="2-æ¨¡å‹è®¾è®¡"><a href="#2-æ¨¡å‹è®¾è®¡" class="headerlink" title="2 æ¨¡å‹è®¾è®¡"></a><strong>2 æ¨¡å‹è®¾è®¡</strong></h2><h3 id="ã€å±‚ä¸å—ã€‘"><a href="#ã€å±‚ä¸å—ã€‘" class="headerlink" title="ã€å±‚ä¸å—ã€‘"></a><strong>ã€å±‚ä¸å—ã€‘</strong></h3><p>å‰å‡ ç¯‡è®¨è®ºçš„æ¨¡å‹å¤æ‚åº¦æœ‰é™ï¼Œæœ€å¤æ‚çš„æ˜¯å«ä¸€ä¸ªéšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºæ¨¡å‹ï¼Œç„¶è€Œå®é™…æƒ…å†µä¸­ï¼Œè¿™ç§æ¨¡å‹è¿‡äºç®€å•ï¼Œè¡¨è¾¾æ•ˆæœä¸å¤Ÿå¥½ï¼Œå› æ­¤éœ€è¦ç ”ç©¶è¾ƒä¸ºå¤æ‚çš„æ¨¡å‹ã€‚ç„¶è€Œè¾ƒä¸ºå¤æ‚çš„æ¨¡å‹ä¹Ÿæ˜¯ç”±ç®€å•æ¨¡å‹ç»„æˆï¼Œå› æ­¤æœ‰å¿…è¦ç ”ç©¶ç®€å•æ¨¡å‹å¦‚ä½•ç»„æˆå¤æ‚æ¨¡å‹ã€‚äº‹å®è¯æ˜å¯ä»¥é€šè¿‡ â€œå †å â€ ç®€å•æ¨¡å‹å®ç°ï¼Œä¸ºäº†æè¿°å¦‚ä½•å †å ï¼Œå¼•å…¥<strong>å—ï¼ˆblockï¼‰</strong> çš„æ¦‚å¿µã€‚å—å¯ä»¥æè¿°å•å±‚ã€å¤šå±‚ç»„æˆçš„ç»„ä»¶æˆ–è€…æ•´ä¸ªæ¨¡å‹ã€‚ä½¿ç”¨å—çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥å°†ä¸€äº›å—ç»„åˆæˆæ›´å¤§çš„ç»„ä»¶ï¼Œè¿™ä¸€è¿‡ç¨‹é€šå¸¸æ˜¯é€’å½’çš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å®šä¹‰ä»£ç æ¥ç”Ÿæˆä»»æ„å¤æ‚åº¦çš„å—ï¼Œå¯ä»¥é€šè¿‡ç®€æ´çš„ä»£ç å®ç°å¤æ‚çš„ç¥ç»ç½‘ç»œã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/ef8b24068e894be8ab3fede36a6ad7ab4b275bbd21ba409b893f3ad8b58ffb20" width="700" hegiht="" ></center><center><br>å›¾5ï¼šâ€œå †å â€çš„å—</br></center><p>äº‹å®è¯æ˜ï¼Œç ”ç©¶è®¨è®ºâ€œæ¯”å•ä¸ªå±‚å¤§â€ä½†â€œæ¯”æ•´ä¸ªæ¨¡å‹å°â€çš„ç»„ä»¶æ›´æœ‰ä»·å€¼ã€‚å¯¹äºå¤šå±‚æ„ŸçŸ¥æœºè€Œè¨€ï¼Œæ•´ä¸ªæ¨¡å‹åŠå…¶ç»„æˆå±‚éƒ½æ˜¯è¿™ç§æ¶æ„ã€‚ æ•´ä¸ªæ¨¡å‹æ¥å—åŸå§‹è¾“å…¥ï¼ˆç‰¹å¾ï¼‰ï¼Œç”Ÿæˆè¾“å‡ºï¼ˆé¢„æµ‹ï¼‰ï¼Œ å¹¶åŒ…å«ä¸€äº›å‚æ•°ï¼ˆæ‰€æœ‰ç»„æˆå±‚çš„å‚æ•°é›†åˆï¼‰ã€‚ åŒæ ·ï¼Œæ¯ä¸ªå•ç‹¬çš„å±‚æ¥æ”¶è¾“å…¥ï¼ˆç”±å‰ä¸€å±‚æä¾›ï¼‰ï¼Œ ç”Ÿæˆè¾“å‡ºï¼ˆåˆ°ä¸‹ä¸€å±‚çš„è¾“å…¥ï¼‰ï¼Œå¹¶ä¸”å…·æœ‰ä¸€ç»„å¯è°ƒå‚æ•°ï¼Œ è¿™äº›å‚æ•°æ ¹æ®ä»ä¸‹ä¸€å±‚åå‘ä¼ æ’­çš„ä¿¡å·è¿›è¡Œæ›´æ–°ã€‚</p><p>åœ¨æ„é€ è‡ªå®šä¹‰å—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹å¤šå±‚æ„ŸçŸ¥æœºçš„ä»£ç ã€‚ä¸‹é¢çš„ä»£ç ç”Ÿæˆä¸€ä¸ªç½‘ç»œï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå…·æœ‰256ä¸ªå•å…ƒå’ŒReLUæ¿€æ´»å‡½æ•°çš„å…¨è¿æ¥éšè—å±‚ï¼Œç„¶åæ˜¯ä¸€ä¸ªå…·æœ‰10ä¸ªéšè—å•å…ƒä¸”ä¸å¸¦æ¿€æ´»å‡½æ•°çš„å…¨è¿æ¥è¾“å‡ºå±‚ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> functional <span class="keyword">as</span> F <span class="comment"># nnä¸‹çš„å®ç”¨åŠŸèƒ½ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å…·æœ‰ä¸€ä¸ªéšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºï¼Œå¦‚ä¸Šå›¾5çš„ç¬¬ä¸€ä¸ªå›¾</span></span><br><span class="line">net = nn.Sequential(nn.Linear(<span class="number">20</span>, <span class="number">256</span>), nn.ReLU(), nn.Linear(<span class="number">256</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2æ˜¯æ‰¹é‡å¤§å°ï¼Œ20æ˜¯Xçš„ç»´åº¦å€¼ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¼ è¿›æ¥äº†ä¸¤æ¡20ç»´çš„æ ·æœ¬</span></span><br><span class="line"><span class="comment"># è¿™é‡Œå¿…é¡»æ˜¯20ï¼Œå› ä¸ºä¸Šé¢å®šä¹‰ç½‘ç»œæ—¶æ¥å—çš„æ•°æ®å°±æ˜¯20ç»´</span></span><br><span class="line">X = paddle.rand((<span class="number">2</span>, <span class="number">20</span>))</span><br><span class="line"><span class="built_in">print</span>(X)</span><br><span class="line">net(X)<span class="comment"># æŠŠxæ”¾è¿›ç½‘ç»œä¸­æŸ¥çœ‹è¾“å‡ºç»“æœ</span></span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[2, 20], dtype=float32, place=Place(cpu), stop_gradient=True,       [[0.10209441, 0.16913104, 0.44511813, 0.28342801, 0.65742350, 0.44651571,         0.36694321, 0.03608739, 0.25556597, 0.75385630, 0.59597689, 0.00202843,         0.81059551, 0.68003124, 0.18284233, 0.79699272, 0.73747963, 0.67146826,         0.55906087, 0.61247164],        [0.69550031, 0.46067774, 0.51894343, 0.93576533, 0.81870192, 0.48760650,         0.13647318, 0.78110564, 0.49254259, 0.61881417, 0.73745596, 0.97040987,         0.49153054, 0.17309034, 0.07548618, 0.78019077, 0.56080866, 0.51286954,         0.66860092, 0.46016651]])Tensor(shape=[2, 10], dtype=float32, place=Place(cpu), stop_gradient=False,       [[ 0.02718867,  0.33097127, -0.22596562, -0.10938051,  0.30752018,          0.09025095, -0.10254925,  0.09890905, -0.44127771,  0.13845670],        [-0.18452074,  0.47807249, -0.28389767, -0.22750369,  0.37274802,          0.17845176, -0.08270003, -0.07816530, -0.30161276,  0.00834796]])</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å®ä¾‹åŒ–<code>nn.Sequential</code>æ¥æ„å»ºæˆ‘ä»¬çš„æ¨¡å‹ï¼Œ <code>nn.Sequential</code>å®šä¹‰äº†ä¸€ç§ç‰¹æ®Šçš„<code>Module</code>ï¼ˆå—ï¼‰ï¼Œ å®ƒç»´æŠ¤äº†ä¸€ä¸ªç”±<code>Module</code>ç»„æˆçš„æœ‰åºåˆ—è¡¨ã€‚</p><h3 id="ã€è‡ªå®šä¹‰å—ã€‘"><a href="#ã€è‡ªå®šä¹‰å—ã€‘" class="headerlink" title="ã€è‡ªå®šä¹‰å—ã€‘"></a><strong>ã€è‡ªå®šä¹‰å—ã€‘</strong></h3><p>æ¨¡å‹å®šä¹‰çš„å®è´¨æ˜¯å®šä¹‰çº¿æ€§å›å½’çš„ç½‘ç»œç»“æ„ï¼Œé£æ¡¨å»ºè®®é€šè¿‡åˆ›å»ºPythonç±»çš„æ–¹å¼å®Œæˆæ¨¡å‹ç½‘ç»œçš„å®šä¹‰ï¼Œè¯¥ç±»éœ€è¦ç»§æ‰¿paddle.nn.Layerçˆ¶ç±»ï¼Œå¹¶ä¸”åœ¨ç±»ä¸­å®šä¹‰<code>init</code>å‡½æ•°å’Œ<code>forward</code>å‡½æ•°ã€‚<code>forward</code>å‡½æ•°æ˜¯æ¡†æ¶æŒ‡å®šå®ç°å‰å‘è®¡ç®—é€»è¾‘çš„å‡½æ•°ï¼Œç¨‹åºåœ¨è°ƒç”¨æ¨¡å‹å®ä¾‹æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œ<code>forward</code>å‡½æ•°ä¸­ä½¿ç”¨çš„ç½‘ç»œå±‚éœ€è¦åœ¨<code>init</code>å‡½æ•°ä¸­å£°æ˜ã€‚</p><ul><li><strong>å®šä¹‰<code>init</code>å‡½æ•°</strong>ï¼šåœ¨ç±»çš„åˆå§‹åŒ–å‡½æ•°ä¸­å£°æ˜æ¯ä¸€å±‚ç½‘ç»œçš„å®ç°å‡½æ•°ã€‚</li><li><strong>å®šä¹‰<code>forward</code>å‡½æ•°</strong>ï¼šæ„å»ºç¥ç»ç½‘ç»œç»“æ„ï¼Œå®ç°å‰å‘è®¡ç®—è¿‡ç¨‹ï¼Œå¹¶è¿”å›é¢„æµ‹ç»“æœã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è‡ªå®šä¹‰å—Sequential</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MLP</span>(nn.Layer):</span><br><span class="line">    <span class="comment"># ç”¨æ¨¡å‹å‚æ•°å£°æ˜å±‚ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å£°æ˜ä¸¤ä¸ªå…¨è¿æ¥çš„å±‚</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MLP, self).__init__()<span class="comment"># è°ƒç”¨MLPçš„çˆ¶ç±»Moduleçš„æ„é€ å‡½æ•°æ¥æ‰§è¡Œå¿…è¦çš„å‡½æ•°åˆå§‹åŒ–ã€‚</span></span><br><span class="line">        <span class="comment"># è¿™æ ·ï¼Œåœ¨ç±»å®ä¾‹åŒ–æ—¶ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–å‡½æ•°å‚æ•°ã€‚</span></span><br><span class="line">        self.hidden = nn.Linear(in_features=<span class="number">20</span>, out_features=<span class="number">256</span>) <span class="comment"># éšè—å±‚</span></span><br><span class="line">        self.out = nn.Linear(<span class="number">256</span>, <span class="number">10</span>) <span class="comment"># è¾“å‡ºå±‚</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®šä¹‰æ¨¡å‹çš„å‰å‘ä¼ æ’­ï¼Œå³å¦‚ä½•æ ¹æ®è¾“å…¥Xè¿”å›æ‰€éœ€çš„æ¨¡å‹è¾“å‡º</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, X</span>):</span><br><span class="line">        <span class="comment"># æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ReLUçš„å‡½æ•°ç‰ˆæœ¬ï¼Œå…¶åœ¨nn.functionalæ¨¡å—ä¸­å®šä¹‰ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> self.out(F.relu(self.hidden(X)))<span class="comment">#å‡½æ•°è°ƒç”¨æ–¹å¼ï¼šè°ƒç”¨ReLuæ¿€æ´»å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">X = paddle.rand((<span class="number">2</span>, <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">net = MLP()<span class="comment">#å°†MLPå°è£…èµ·æ¥ï¼Œå°è£…æˆä¸€ä¸ªnetç½‘ç»œ</span></span><br><span class="line">net(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[2, 10], dtype=float32, place=Place(cpu), stop_gradient=False,       [[-0.12201045, -0.15452111,  0.06742557, -0.00087534,  0.01926781,         -0.25647265, -0.11357559,  0.21616164,  0.00257475, -0.01310621],        [ 0.02261407, -0.16433953,  0.07217564, -0.11244217,  0.14721063,         -0.20428163, -0.14929581,  0.06752300,  0.04719778,  0.13807677]])</code></pre><p><strong>æ‰©å±•ï¼š</strong> Module ç±»</p><p>Module æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œæ¯æ¬¡æˆ‘ä»¬è¦æ­å»ºè‡ªå·±çš„ç¥ç»ç½‘ç»œçš„æ—¶å€™éƒ½è¦ç»§æ‰¿è¿™ä¸ªç±»ï¼Œç»§æ‰¿è¿™ä¸ªç±»ä¼šä½¿å¾—æˆ‘ä»¬æ­å»ºç½‘ç»œçš„è¿‡ç¨‹å˜å¾—å¼‚å¸¸ç®€å•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Module</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, *<span class="built_in">input</span></span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_module</span>(<span class="params">self,name,module</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cuda</span>(<span class="params">self,device=<span class="literal">None</span></span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cpu</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *<span class="built_in">input</span>, **kwargs</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parameters</span>(<span class="params">self, recurse=<span class="literal">True</span></span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">named_parameters</span>(<span class="params">self, prefix=<span class="string">&#x27;&#x27;</span>, recurse=<span class="literal">True</span></span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">children</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">named_children</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">modules</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">named_modules</span>(<span class="params">self,memo=<span class="literal">None</span>,prefix=<span class="string">&#x27;&#x27;</span></span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">self,mode=<span class="literal">True</span></span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">eval</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">zero_grad</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__dir__</span>(<span class="params">self</span>):</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥ä»»æ„æ­å»ºç¥ç»ç½‘ç»œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª<code>è¾“å…¥ç»´åº¦ä¸º20ã€è¾“å‡ºç»´åº¦ä¸º5ï¼Œä¸¤ä¸ªéšè—å±‚ã€ä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°</code>çš„ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">myMLP</span>(nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()<span class="comment">#å…ˆè°ƒç”¨ä¸€ä¸‹çˆ¶ç±»ï¼Œè¿›è¡Œå‡½æ•°çš„åˆå§‹åŒ–</span></span><br><span class="line">        self.hidden1 = nn.Linear(<span class="number">20</span>, <span class="number">32</span>)<span class="comment">#å®šä¹‰ä¸€ä¸ª20è¾“å…¥32è¾“å‡ºçš„éšè—å±‚</span></span><br><span class="line">        self.hidden2 = nn.Linear(<span class="number">32</span>, <span class="number">64</span>)<span class="comment">#å®šä¹‰ä¸€ä¸ª32è¾“å…¥64è¾“å‡ºçš„éšè—å±‚</span></span><br><span class="line">        self.act = nn.ReLU()<span class="comment">#å±‚æ­å»ºæ–¹å¼ï¼šå®šä¹‰ä¸€ä¸ªäººReLuæ¿€æ´»å‡½æ•°</span></span><br><span class="line">        self.output = nn.Linear(<span class="number">64</span>, <span class="number">5</span>)<span class="comment">#å®šä¹‰ä¸€ä¸ª64è¾“å…¥5è¾“å‡ºçš„è¾“å‡ºå±‚</span></span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, X</span>):<span class="comment">#å‰å‘ä¼ æ’­å‡½æ•°</span></span><br><span class="line">        y = self.hidden1(X)</span><br><span class="line">        y = self.act(y)</span><br><span class="line">        y = self.hidden2(y)</span><br><span class="line">        y = self.act(y)</span><br><span class="line">        y = self.output(y)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line">X = paddle.rand((<span class="number">2</span>, <span class="number">20</span>))<span class="comment">#ä¼ å…¥çš„Xåœ¨è¿™é‡Œå¿…é¡»æ˜¯20çš„æ ·æœ¬</span></span><br><span class="line"></span><br><span class="line">net = myMLP()<span class="comment">#å®šä¹‰å¥½çš„MLPç±»å°è£…èµ·æ¥</span></span><br><span class="line">net(X)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[2, 5], dtype=float32, place=Place(cpu), stop_gradient=False,       [[ 0.33403778,  0.10073330, -0.62100554, -0.13195495,  0.38762105],        [ 0.50147879,  0.08661372, -0.59700704, -0.05069904,  0.40827096]])</code></pre><h3 id="ã€æ­å»ºæˆ¿ä»·é¢„æµ‹æ¨¡å‹ã€‘"><a href="#ã€æ­å»ºæˆ¿ä»·é¢„æµ‹æ¨¡å‹ã€‘" class="headerlink" title="ã€æ­å»ºæˆ¿ä»·é¢„æµ‹æ¨¡å‹ã€‘"></a><strong>ã€æ­å»ºæˆ¿ä»·é¢„æµ‹æ¨¡å‹ã€‘</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Regressor</span>(nn.Layer):<span class="comment">#è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å•å±‚ç½‘ç»œ</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.fc = Linear(<span class="number">13</span>, <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        x = self.fc(inputs)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><h2 id="3-è®­ç»ƒé…ç½®"><a href="#3-è®­ç»ƒé…ç½®" class="headerlink" title="3 è®­ç»ƒé…ç½®"></a><strong>3 è®­ç»ƒé…ç½®</strong></h2><p>è®­ç»ƒé…ç½®è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/96075d4df5ae4e01ac1491ebf176fa557bd122b646ba49238f65c9b38a98cab4" width="700" hegiht="" ></center><center><br>å›¾6ï¼šè®­ç»ƒé…ç½®æµç¨‹ç¤ºæ„å›¾</br></center><ul><li>æœ¬æ•™ç¨‹é»˜è®¤ä½¿ç”¨AI Studioè®­ç»ƒæ¨¡å‹ï¼Œå› æ­¤æ— éœ€æŒ‡å®šæœºå™¨èµ„æºï¼›</li><li>å£°æ˜å®šä¹‰å¥½çš„å›å½’æ¨¡å‹å®ä¾‹ä¸ºRegressorï¼Œå¹¶å°†æ¨¡å‹çš„çŠ¶æ€è®¾ç½®ä¸º<code>train</code>ï¼›</li><li>ä½¿ç”¨<code>load_data</code>å‡½æ•°åŠ è½½è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®ï¼›</li><li>è®¾ç½®ä¼˜åŒ–ç®—æ³•å’Œå­¦ä¹ ç‡ï¼Œä¼˜åŒ–ç®—æ³•é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™SGDï¼Œå­¦ä¹ ç‡è®¾ç½®ä¸º0.01ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜å®šä¹‰å¥½çš„çº¿æ€§å›å½’æ¨¡å‹</span></span><br><span class="line">model = Regressor()</span><br><span class="line"><span class="comment"># å¼€å¯æ¨¡å‹è®­ç»ƒæ¨¡å¼</span></span><br><span class="line">model.train()</span><br><span class="line"><span class="comment"># åŠ è½½æ•°æ®</span></span><br><span class="line">training_data, test_data = load_data()</span><br><span class="line"><span class="comment"># å®šä¹‰ä¼˜åŒ–ç®—æ³•ï¼Œä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™SGD</span></span><br><span class="line"><span class="comment"># å­¦ä¹ ç‡è®¾ç½®ä¸º0.01</span></span><br><span class="line">opt = paddle.optimizer.SGD(learning_rate=<span class="number">0.01</span>, parameters=model.parameters())</span><br></pre></td></tr></table></figure><hr><p><strong>è¯´æ˜ï¼š</strong></p><p>æ¨¡å‹å®ä¾‹æœ‰ä¸¤ç§çŠ¶æ€ï¼šè®­ç»ƒçŠ¶æ€<code>.train()</code>å’Œé¢„æµ‹çŠ¶æ€<code>.eval()</code>ã€‚è®­ç»ƒæ—¶è¦æ‰§è¡Œæ­£å‘è®¡ç®—å’Œåå‘ä¼ æ’­æ¢¯åº¦ä¸¤ä¸ªè¿‡ç¨‹ï¼Œè€Œé¢„æµ‹æ—¶åªéœ€è¦æ‰§è¡Œæ­£å‘è®¡ç®—ã€‚</p><hr><h2 id="4-è®­ç»ƒè¿‡ç¨‹"><a href="#4-è®­ç»ƒè¿‡ç¨‹" class="headerlink" title="4 è®­ç»ƒè¿‡ç¨‹"></a><strong>4 è®­ç»ƒè¿‡ç¨‹</strong></h2><p>è®­ç»ƒè¿‡ç¨‹é‡‡ç”¨äºŒå±‚å¾ªç¯åµŒå¥—æ–¹å¼ï¼š</p><ul><li><p><strong>å†…å±‚å¾ªç¯ï¼š</strong> è´Ÿè´£æ•´ä¸ªæ•°æ®é›†çš„ä¸€æ¬¡éå†ï¼Œé‡‡ç”¨åˆ†æ‰¹æ¬¡æ–¹å¼ï¼ˆbatchï¼‰ã€‚å‡è®¾æ•°æ®é›†æ ·æœ¬æ•°é‡ä¸º1000ï¼Œä¸€ä¸ªæ‰¹æ¬¡æœ‰10ä¸ªæ ·æœ¬ï¼Œåˆ™éå†ä¸€æ¬¡æ•°æ®é›†çš„æ‰¹æ¬¡æ•°é‡æ˜¯1000&#x2F;10&#x3D;100ï¼Œå³å†…å±‚å¾ªç¯éœ€è¦æ‰§è¡Œ100æ¬¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> iter_id, mini_batch <span class="keyword">in</span> <span class="built_in">enumerate</span>(mini_batches):</span><br></pre></td></tr></table></figure></li><li><p><strong>å¤–å±‚å¾ªç¯ï¼š</strong> å®šä¹‰éå†æ•°æ®é›†çš„æ¬¡æ•°ï¼Œé€šè¿‡å‚æ•°EPOCH_NUMè®¾ç½®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch_id <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br></pre></td></tr></table></figure></li></ul><hr><p><strong>è¯´æ˜</strong>:</p><p>batchçš„å–å€¼ä¼šå½±å“æ¨¡å‹è®­ç»ƒæ•ˆæœï¼Œbatchè¿‡å¤§ï¼Œä¼šå¢å¤§å†…å­˜æ¶ˆè€—å’Œè®¡ç®—æ—¶é—´ï¼Œä¸”è®­ç»ƒæ•ˆæœå¹¶ä¸ä¼šæ˜æ˜¾æå‡ï¼ˆæ¯æ¬¡å‚æ•°åªå‘æ¢¯åº¦åæ–¹å‘ç§»åŠ¨ä¸€å°æ­¥ï¼Œå› æ­¤æ–¹å‘æ²¡å¿…è¦ç‰¹åˆ«ç²¾ç¡®ï¼‰ï¼›batchè¿‡å°ï¼Œæ¯ä¸ªbatchçš„æ ·æœ¬æ•°æ®æ²¡æœ‰ç»Ÿè®¡æ„ä¹‰ï¼Œè®¡ç®—çš„æ¢¯åº¦æ–¹å‘å¯èƒ½åå·®è¾ƒå¤§ã€‚ç”±äºæˆ¿ä»·é¢„æµ‹æ¨¡å‹çš„è®­ç»ƒæ•°æ®é›†è¾ƒå°ï¼Œå› æ­¤å°†batchè®¾ç½®ä¸º10ã€‚</p><hr><p>æ¯æ¬¡å†…å±‚å¾ªç¯éƒ½éœ€è¦æ‰§è¡Œå¦‚ <strong>å›¾7</strong> æ‰€ç¤ºçš„æ­¥éª¤ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/8154cf612a024a3f9144b4e31f59568ef9ad59c155b344919221d63bb9ccfcc8" width="700" hegiht="" ></center><center><br>å›¾7ï¼šå†…å¾ªç¯è®¡ç®—è¿‡ç¨‹</br></center><ul><li>æ•°æ®å‡†å¤‡ï¼šå°†ä¸€ä¸ªæ‰¹æ¬¡çš„æ•°æ®å…ˆè½¬æ¢æˆ nparray æ ¼å¼ï¼Œå†è½¬æ¢æˆ<code>Tensor</code>æ ¼å¼ï¼›</li><li>å‰å‘è®¡ç®—ï¼šå°†ä¸€ä¸ªæ‰¹æ¬¡çš„æ ·æœ¬æ•°æ®çŒå…¥ç½‘ç»œä¸­ï¼Œè®¡ç®—è¾“å‡ºç»“æœï¼›</li><li>è®¡ç®—æŸå¤±å‡½æ•°ï¼šä»¥å‰å‘è®¡ç®—ç»“æœå’ŒçœŸå®æˆ¿ä»·ä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡æŸå¤±å‡½æ•° <a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/2.4rc/api/paddle/nn/functional/square_error_cost_cn.html#square-error-cost">square_error_cost</a> APIè®¡ç®—å‡ºæŸå¤±å‡½æ•°å€¼ï¼ˆLossï¼‰ï¼›</li><li>åå‘ä¼ æ’­ï¼šæ‰§è¡Œæ¢¯åº¦åå‘ä¼ æ’­<code>backward</code>å‡½æ•°ï¼Œå³ä»ååˆ°å‰é€å±‚è®¡ç®—æ¯ä¸€å±‚çš„æ¢¯åº¦ï¼Œå¹¶æ ¹æ®è®¾ç½®çš„ä¼˜åŒ–ç®—æ³•æ›´æ–°å‚æ•°ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">EPOCH_NUM = <span class="number">10</span>   <span class="comment"># è®¾ç½®å¤–å±‚å¾ªç¯æ¬¡æ•°</span></span><br><span class="line">BATCH_SIZE = <span class="number">10</span>  <span class="comment"># è®¾ç½®batchå¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¤–å±‚å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> epoch_id <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">    <span class="comment"># åœ¨æ¯è½®è¿­ä»£å¼€å§‹ä¹‹å‰ï¼Œå°†è®­ç»ƒæ•°æ®çš„é¡ºåºéšæœºçš„æ‰“ä¹±</span></span><br><span class="line">    np.random.shuffle(training_data)</span><br><span class="line">    <span class="comment"># å°†è®­ç»ƒæ•°æ®è¿›è¡Œæ‹†åˆ†ï¼Œå¾—åˆ°å°æ‰¹é‡çš„æ•°æ®ï¼Œæ¯ä¸ªbatchåŒ…å«10æ¡æ•°æ®</span></span><br><span class="line">    mini_batches = [training_data[k:k+BATCH_SIZE] <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(training_data), BATCH_SIZE)]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®šä¹‰å†…å±‚å¾ªç¯</span></span><br><span class="line">    <span class="keyword">for</span> iter_id, mini_batch <span class="keyword">in</span> <span class="built_in">enumerate</span>(mini_batches):</span><br><span class="line">        x = np.array(mini_batch[:, :-<span class="number">1</span>]) <span class="comment"># è·å¾—å½“å‰æ‰¹æ¬¡è®­ç»ƒæ•°æ®</span></span><br><span class="line">        y = np.array(mini_batch[:, -<span class="number">1</span>:]) <span class="comment"># è·å¾—å½“å‰æ‰¹æ¬¡è®­ç»ƒæ ‡ç­¾ï¼ˆçœŸå®æˆ¿ä»·ï¼‰</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å°†numpyæ•°æ®è½¬ä¸ºé£æ¡¨åŠ¨æ€å›¾tensorçš„æ ¼å¼,æ–¹ä¾¿æ•°æ®åœ¨æ•´ä¸ªpaddleæ¡†æ¶ä¸­é€šç”¨</span></span><br><span class="line">        house_features = paddle.to_tensor(x)</span><br><span class="line">        prices = paddle.to_tensor(y)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å‰å‘è®¡ç®—ï¼Œå¾—åˆ°é¢„æµ‹çš„y</span></span><br><span class="line">        predicts = model(house_features)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">        loss = F.square_error_cost(predicts, label=prices)</span><br><span class="line">        avg_loss = paddle.mean(loss)<span class="comment">#å¹³å‡æŸå¤±</span></span><br><span class="line">        <span class="keyword">if</span> iter_id%<span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, iter: &#123;&#125;, loss is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch_id, iter_id, avg_loss.numpy()))</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åå‘ä¼ æ’­æŸå¤±ï¼Œè®¡ç®—æ¯å±‚å‚æ•°çš„æ¢¯åº¦å€¼</span></span><br><span class="line">        avg_loss.backward()</span><br><span class="line">        <span class="comment"># ä¼˜åŒ–å™¨æ›´æ–°å‚æ•°ï¼Œæ ¹æ®è®¾ç½®å¥½çš„å­¦ä¹ ç‡è¿­ä»£ä¸€æ­¥</span></span><br><span class="line">        opt.step()</span><br><span class="line">        <span class="comment"># æ¸…ç©ºæ¢¯åº¦å˜é‡ï¼Œä»¥å¤‡ä¸‹ä¸€è½®è®¡ç®—</span></span><br><span class="line">        opt.clear_grad()</span><br><span class="line">        </span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è®­ç»ƒç»“æœï¼Œå†æ‰§è¡Œä¸€éç¨‹åºï¼Œä¼šç»§ç»­å‘ä¸‹è®­ç»ƒï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹</span></span><br></pre></td></tr></table></figure><pre><code>epoch: 0, iter: 0, loss is: [0.02828562]epoch: 1, iter: 0, loss is: [0.01003132]epoch: 2, iter: 0, loss is: [0.02788146]epoch: 3, iter: 0, loss is: [0.01141991]epoch: 4, iter: 0, loss is: [0.04065816]epoch: 5, iter: 0, loss is: [0.0243281]epoch: 6, iter: 0, loss is: [0.03753167]epoch: 7, iter: 0, loss is: [0.02115335]epoch: 8, iter: 0, loss is: [0.0295791]epoch: 9, iter: 0, loss is: [0.01928121]</code></pre><h2 id="5-ä¿å­˜å¹¶æµ‹è¯•æ¨¡å‹"><a href="#5-ä¿å­˜å¹¶æµ‹è¯•æ¨¡å‹" class="headerlink" title="5 ä¿å­˜å¹¶æµ‹è¯•æ¨¡å‹"></a><strong>5 ä¿å­˜å¹¶æµ‹è¯•æ¨¡å‹</strong></h2><h3 id="5-1-ä¿å­˜æ¨¡å‹"><a href="#5-1-ä¿å­˜æ¨¡å‹" class="headerlink" title="5.1 ä¿å­˜æ¨¡å‹"></a><strong>5.1 ä¿å­˜æ¨¡å‹</strong></h3><p>ä½¿ç”¨ <a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/save_cn.html#save">paddle.save API</a> å°†æ¨¡å‹å½“å‰çš„å‚æ•°æ•°æ® <code>model.state_dict()</code> ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œç”¨äºæ¨¡å‹é¢„æµ‹æˆ–æ ¡éªŒçš„ç¨‹åºè°ƒç”¨ã€‚</p><blockquote><p>dataç›®å½•æ¯æ¬¡å¯åŠ¨é¡¹ç›®ä¼šæ¸…ç©ºï¼Œæ°¸ä¹…ä¿å­˜éœ€è¦æ”¾åˆ°workç›®å½•ä¸‹</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿å­˜æ¨¡å‹çš„æ•´ä¸ªå‚æ•°ï¼Œæ–‡ä»¶åä¸º xxx.pdparams</span></span><br><span class="line">paddle.save(model.state_dict(), <span class="string">&#x27;data/LR_model.pdparams&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ¨¡å‹ä¿å­˜æˆåŠŸï¼Œæ¨¡å‹å‚æ•°ä¿å­˜åœ¨data/LR_model.pdparamsä¸­&quot;</span>)</span><br></pre></td></tr></table></figure><hr><p><strong>è¯´æ˜ï¼š</strong></p><p>ç†è®ºè€Œè¨€ï¼Œç›´æ¥ä½¿ç”¨æ¨¡å‹å®ä¾‹å³å¯å®Œæˆé¢„æµ‹ï¼Œä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè®­ç»ƒæ¨¡å‹å’Œä½¿ç”¨æ¨¡å‹å¾€å¾€æ˜¯ä¸åŒçš„åœºæ™¯ã€‚æ¨¡å‹è®­ç»ƒé€šå¸¸ä½¿ç”¨å¤§é‡çš„çº¿ä¸‹æœåŠ¡å™¨ï¼ˆä¸å¯¹å¤–å‘ä¼ä¸šçš„å®¢æˆ·&#x2F;ç”¨æˆ·æä¾›åœ¨çº¿æœåŠ¡ï¼‰ï¼›æ¨¡å‹é¢„æµ‹åˆ™é€šå¸¸ä½¿ç”¨çº¿ä¸Šæä¾›é¢„æµ‹æœåŠ¡çš„æœåŠ¡å™¨å®ç°æˆ–è€…å°†å·²ç»å®Œæˆçš„é¢„æµ‹æ¨¡å‹åµŒå…¥æ‰‹æœºæˆ–å…¶ä»–ç»ˆç«¯è®¾å¤‡ä¸­ä½¿ç”¨ã€‚å› æ­¤â€œå…ˆä¿å­˜æ¨¡å‹ï¼Œå†åŠ è½½æ¨¡å‹â€æ›´è´´åˆçœŸå®åœºæ™¯çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><hr><h3 id="5-2-æµ‹è¯•æ¨¡å‹"><a href="#5-2-æµ‹è¯•æ¨¡å‹" class="headerlink" title="5.2 æµ‹è¯•æ¨¡å‹"></a><strong>5.2 æµ‹è¯•æ¨¡å‹</strong></h3><p>ä¸‹é¢é€‰æ‹©ä¸€æ¡æ•°æ®æ ·æœ¬ï¼Œæµ‹è¯•ä¸‹æ¨¡å‹çš„é¢„æµ‹æ•ˆæœã€‚æµ‹è¯•è¿‡ç¨‹å’Œåœ¨åº”ç”¨åœºæ™¯ä¸­ä½¿ç”¨æ¨¡å‹çš„è¿‡ç¨‹ä¸€è‡´ï¼Œä¸»è¦å¯åˆ†æˆå¦‚ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol><li>é…ç½®æ¨¡å‹é¢„æµ‹çš„æœºå™¨èµ„æºã€‚æœ¬æ¡ˆä¾‹é»˜è®¤ä½¿ç”¨æœ¬æœºï¼Œå› æ­¤æ— éœ€å†™ä»£ç æŒ‡å®šã€‚</li><li>å°†è®­ç»ƒå¥½çš„æ¨¡å‹å‚æ•°åŠ è½½åˆ°æ¨¡å‹å®ä¾‹ä¸­ã€‚ç”±ä¸¤ä¸ªè¯­å¥å®Œæˆï¼Œç¬¬ä¸€å¥æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–æ¨¡å‹å‚æ•°ï¼›ç¬¬äºŒå¥æ˜¯å°†å‚æ•°å†…å®¹åŠ è½½åˆ°æ¨¡å‹ã€‚åŠ è½½å®Œæ¯•åï¼Œéœ€è¦å°†æ¨¡å‹çš„çŠ¶æ€è°ƒæ•´ä¸º<code>eval()</code>ï¼ˆæ ¡éªŒï¼‰ã€‚ä¸Šæ–‡ä¸­æåˆ°ï¼Œè®­ç»ƒçŠ¶æ€çš„æ¨¡å‹éœ€è¦åŒæ—¶æ”¯æŒå‰å‘è®¡ç®—å’Œåå‘ä¼ å¯¼æ¢¯åº¦ï¼Œæ¨¡å‹çš„å®ç°è¾ƒä¸ºè‡ƒè‚¿ï¼Œè€Œæ ¡éªŒå’Œé¢„æµ‹çŠ¶æ€çš„æ¨¡å‹åªéœ€è¦æ”¯æŒå‰å‘è®¡ç®—ï¼Œæ¨¡å‹çš„å®ç°æ›´åŠ ç®€å•ï¼Œæ€§èƒ½æ›´å¥½ã€‚</li><li>å°†å¾…é¢„æµ‹çš„æ ·æœ¬ç‰¹å¾è¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼Œæ‰“å°è¾“å‡ºçš„é¢„æµ‹ç»“æœã€‚</li></ol><p>é€šè¿‡<code>load_one_example</code>å‡½æ•°å®ç°ä»æ•°æ®é›†ä¸­æŠ½ä¸€æ¡æ ·æœ¬ä½œä¸ºæµ‹è¯•æ ·æœ¬ï¼Œå…·ä½“å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_one_example</span>():</span><br><span class="line">    <span class="comment"># ä»ä¸Šè¾¹å·²åŠ è½½çš„æµ‹è¯•é›†ä¸­ï¼Œéšæœºé€‰æ‹©ä¸€æ¡ä½œä¸ºæµ‹è¯•æ•°æ®</span></span><br><span class="line">    idx = np.random.randint(<span class="number">0</span>, test_data.shape[<span class="number">0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æŠ½å–çš„æ˜¯ç¬¬&#x27;</span>, idx, <span class="string">&#x27;æ¡æ ·æœ¬&#x27;</span>)</span><br><span class="line">    one_data, label = test_data[idx, :-<span class="number">1</span>], test_data[idx, -<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ç‰¹å¾æ˜¯ï¼š&#x27;</span>, one_data, one_data.shape)<span class="comment"># å³x</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æ ‡ç­¾æ˜¯ï¼š&#x27;</span>, label, label.shape)<span class="comment"># å³y</span></span><br><span class="line">    <span class="comment"># ä¿®æ”¹è¯¥æ¡æ•°æ®shapeä¸º[1,13]</span></span><br><span class="line">    one_data =  one_data.reshape([<span class="number">1</span>,-<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> one_data, label</span><br></pre></td></tr></table></figure><p>å°†è®­ç»ƒå¥½çš„æ¨¡å‹å‚æ•°åŠ è½½åˆ°æ¨¡å‹å®ä¾‹ä¸­ã€‚åŒæ—¶æŠ½å–ä¸€æ¡æ ·æœ¬ï¼š<code>ç‰¹å¾+æ ‡ç­¾</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‚æ•°ä¸ºä¿å­˜æ¨¡å‹å‚æ•°çš„æ–‡ä»¶åœ°å€</span></span><br><span class="line">model_dict = paddle.load(<span class="string">&#x27;data/LR_model.pdparams&#x27;</span>)</span><br><span class="line">model.load_dict(model_dict)<span class="comment"># å°†å‚æ•°é“ºåˆ°æ¨¡å‹å½“ä¸­</span></span><br><span class="line">model.<span class="built_in">eval</span>()<span class="comment"># å¼€å¯è¯„ä¼°æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°ä¸ºæ•°æ®é›†çš„æ–‡ä»¶åœ°å€</span></span><br><span class="line">one_data, label = load_one_example()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ•°æ®è½¬ä¸ºåŠ¨æ€å›¾çš„variableæ ¼å¼ </span></span><br><span class="line">one_data = paddle.to_tensor(one_data)</span><br><span class="line">predict = model(one_data)<span class="comment"># æ”¾å…¥æ•°æ®å¾—åˆ°é¢„æµ‹ç»“æœ</span></span><br></pre></td></tr></table></figure><pre><code>æŠ½å–çš„æ˜¯ç¬¬ 76 æ¡æ ·æœ¬ç‰¹å¾æ˜¯ï¼š [0.06538943 0.         0.7002779  0.         0.30246916 0.51369995 0.6364572  0.2086588  1.         1.         0.8085107  1. 0.2486203 ] (13,)æ ‡ç­¾æ˜¯ï¼š 0.4 ()</code></pre><p>å› ä¸ºæˆ‘ä»¬åœ¨æ­£å¼å¼€å§‹è®­ç»ƒä¹‹å‰å¯¹æ•°æ®è¿›è¡Œäº†å½’ä¸€åŒ–å¤„ç†ï¼Œå®é™…å–å‡ºçš„ç‰¹å¾ä¸æ ‡ç­¾å€¼å¹¶ä¸ç¬¦åˆå®é™…æ•°æ®ï¼Œå› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å¯¹é¢„æµ‹ç»“æœè¿›è¡Œåå½’ä¸€åŒ–å¤„ç†ã€‚</p><p>$$<br>xâ€™ &#x3D; \frac{x-x_{min}}{x_{max}-x_{min}}<br>$$<br>åå½’ä¸€åŒ–å…¬å¼å¦‚ä¸‹ï¼š</p><p>$$<br>x &#x3D; xâ€™Â·({x_{max}-x_{min}}) + x_{min}<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹ç»“æœåšåå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line">predict = predict * (max_values[-<span class="number">1</span>] - min_values[-<span class="number">1</span>]) + min_values[-<span class="number">1</span>]</span><br><span class="line"><span class="comment"># å¯¹labelæ•°æ®åšåå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line">label = label * (max_values[-<span class="number">1</span>] - min_values[-<span class="number">1</span>]) + min_values[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Inference result is &#123;&#125;, the corresponding label is &#123;&#125;&quot;</span>.<span class="built_in">format</span>(predict.numpy(), label))</span><br></pre></td></tr></table></figure><pre><code>Inference result is [[23.333654]], the corresponding label is 23.0</code></pre><p>é€šè¿‡æ¯”è¾ƒâ€œæ¨¡å‹é¢„æµ‹å€¼â€å’Œâ€œçœŸå®æˆ¿ä»·â€å¯è§ï¼Œæ¨¡å‹çš„é¢„æµ‹æ•ˆæœä¸çœŸå®æˆ¿ä»·æ¥è¿‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_åŸºç¡€æ¨¡å‹å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 3.2-æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜ç­–ç•¥ï¼ˆä¸‹ï¼‰</title>
      <link href="/2022/12/26/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A03.2-%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9%E4%B8%8E%E8%B0%83%E4%BC%98%E7%AD%96%E7%95%A5%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
      <url>/2022/12/26/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A03.2-%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9%E4%B8%8E%E8%B0%83%E4%BC%98%E7%AD%96%E7%95%A5%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="è°ƒä¼˜ç­–ç•¥"><a href="#è°ƒä¼˜ç­–ç•¥" class="headerlink" title="è°ƒä¼˜ç­–ç•¥"></a>è°ƒä¼˜ç­–ç•¥</h1><p>ğŸ˜å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ol><li>é’ˆå¯¹ç³»ç»Ÿä¸­å‡ºç°çš„é—®é¢˜é€‰æ‹©ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥ä»¥æé«˜ç³»ç»Ÿçš„èƒ½åŠ›ã€‚</li></ol><hr><blockquote><h4 id="ppl-pyæ–‡ä»¶"><a href="#ppl-pyæ–‡ä»¶" class="headerlink" title="ppl.pyæ–‡ä»¶"></a>ppl.pyæ–‡ä»¶</h4><p>å°†åœ¨æ­¤ä½¿ç”¨çš„ç›¸åŒçš„å‡½æ•°æ”¾åˆ°ä¸€èµ·ï¼Œä½œä¸ºä¸€ä¸ªåº“ï¼Œåœ¨ä½¿ç”¨å…¶ä¸­çš„å‡½æ•°æ—¶ï¼Œç›´æ¥<code>import ppl</code>å¯¼å…¥å³å¯ï¼Œæˆ–è€…<code>from ppl import å‡½æ•°å</code>ï¼›</p><p>æˆ‘å°†ppl.pyæ–‡ä»¶æ”¾åœ¨äº†<code>C:\Users\21431\Desktop\è®¡ç®—æœºå­¦ä¹ \äººå·¥æ™ºèƒ½\äººå·¥æ™ºèƒ½å±±å¤§åŸ¹è®­\æ·±åº¦å­¦ä¹ </code>ï¼›</p><p>åœ¨æœ¬åœ°ä½¿ç”¨æ—¶ï¼Œå¤åˆ¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹å³å¯ï¼›</p><p>AI Studioä¸­æ”¾åˆ°é¡¹ç›®ä¸­å³å¯ã€‚</p></blockquote><hr><h2 id="ä¸€ã€è§£å†³æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ"><a href="#ä¸€ã€è§£å†³æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ" class="headerlink" title="ä¸€ã€è§£å†³æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ"></a>ä¸€ã€è§£å†³æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ</h2><p>æ¬ æ‹Ÿåˆæ˜¯æŒ‡æ¨¡å‹ä¸èƒ½å†è®­ç»ƒé›†ä¸Šè·å¾—è¶³å¤Ÿä½çš„è¯¯å·®ï¼Œå³æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®æ¯”äººç±»æ°´å¹³è¾¾åˆ°çš„è¯¯å·®è¦é«˜ï¼Œæ­¤æ—¶æ¨¡å‹è¿˜æœ‰æå‡çš„ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æ¨¡å‹æ·±åº¦å’Œè®­ç»ƒæ¬¡æ•°ã€è¿­ä»£å‘¨æœŸã€‘æˆ–é€‰æ‹©ä¸€äº›ä¼˜åŒ–ç®—æ³•ç»§ç»­æé«˜æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚è€Œè¿‡æ‹Ÿåˆæ˜¯æŒ‡å­¦ä¹ æ—¶é€‰æ‹©çš„æ¨¡å‹åŒ…å«çš„å‚æ•°è¿‡å¤šã€æ¨¡å‹çš„å¤æ‚åº¦è¾ƒé«˜ã€‘ï¼Œä»¥è‡³äºè¿™ä¸€æ¨¡å‹å¯¹å·²çŸ¥æ•°æ®é¢„æµ‹çš„å¾ˆå¥½ï¼Œä½†å¯¹æœªçŸ¥æ•°æ®é¢„æµ‹çš„å¾ˆå·®ã€‚è¿‡æ‹Ÿåˆé€šå¸¸è¢«ç§°ä¸ºæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ä¸å¥½ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æ•°æ®é›†ã€åŠ å…¥ä¸€äº›æ­£åˆ™åŒ–æ–¹æ³•æˆ–è€…æ”¹å˜è¶…å‚æ•°æ¥è°ƒæ•´ã€‚</p><p><strong>ã€æ¨¡å‹å¤æ‚æ€§ã€‘</strong></p><p>æ¨¡å‹çš„è®­ç»ƒç¨‹åº¦å¯ä»¥ç”¨æ¨¡å‹å¤æ‚åº¦æ¥è¡¡é‡ã€‚å½“æˆ‘ä»¬æœ‰ç®€å•çš„æ¨¡å‹å’Œå¤§é‡çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æœŸæœ›æ³›åŒ–è¯¯å·®ä¸è®­ç»ƒè¯¯å·®ç›¸è¿‘ï¼Œå¾ˆå®¹æ˜“å‡ºç°æ¬ æ‹Ÿåˆï¼›å½“æˆ‘ä»¬æœ‰æ›´å¤æ‚çš„æ¨¡å‹å’Œæ›´å°‘çš„æ ·æœ¬æ—¶ï¼Œæˆ‘ä»¬é¢„è®¡è®­ç»ƒè¯¯å·®ä¼šä¸‹é™ï¼Œä½†æ³›åŒ–è¯¯å·®ä¼šå¢å¤§ï¼Œå¾ˆå®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆã€‚åº”å¯¹æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆçš„ä¸€ä¸ªåŠæ³•æ˜¯é’ˆå¯¹æ•°æ®é›†é€‰æ‹©åˆé€‚å¤æ‚åº¦çš„æ¨¡å‹ã€‚</p><p>æ¨¡å‹å¤æ‚æ€§ç”±ä»€ä¹ˆæ„æˆæ˜¯ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ¨¡å‹å¤æ‚å°±æ˜¯æœºå™¨æ›´æ™ºèƒ½ã€‚ä¸€ä¸ªæ¨¡å‹æ˜¯å¦èƒ½å¾ˆå¥½åœ°æ³›åŒ–å–å†³äºå¾ˆå¤šå› ç´ ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰æ›´å¤šå‚æ•°çš„æ¨¡å‹å¯èƒ½è¢«è®¤ä¸ºæ›´å¤æ‚ï¼Œå‚æ•°æœ‰æ›´å¤§å–å€¼èŒƒå›´çš„æ¨¡å‹å¯èƒ½æ›´ä¸ºå¤æ‚ã€‚é€šå¸¸å¯¹äºç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬è®¤ä¸ºéœ€è¦æ›´å¤šè®­ç»ƒè¿­ä»£çš„æ¨¡å‹ä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚æˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å‡ ä¸ªå€¾å‘äºå½±å“æ¨¡å‹å¤æ‚åº¦çš„å› ç´ ï¼š</p><ol><li>å¯è°ƒæ•´å‚æ•°çš„æ•°é‡ã€‚å½“å¯è°ƒæ•´å‚æ•°çš„æ•°é‡ï¼ˆæœ‰æ—¶ç§°ä¸ºè‡ªç”±åº¦ï¼‰å¾ˆå¤§æ—¶ï¼Œæ¨¡å‹å¾€å¾€æ›´å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</li><li>å‚æ•°é‡‡ç”¨çš„å€¼ã€‚å½“æƒé‡çš„å–å€¼èŒƒå›´è¾ƒå¤§æ—¶ï¼Œæ¨¡å‹å¯èƒ½æ›´å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</li></ol><p>ä¾‹å¦‚ï¼Œå› ä¸ºé«˜é˜¶å¤šé¡¹å¼å‡½æ•°æ¨¡å‹å‚æ•°æ›´å¤šï¼Œæ¨¡å‹å‡½æ•°çš„é€‰æ‹©ç©ºé—´æ›´å¤§ï¼Œæ‰€ä»¥é«˜é˜¶å¤šé¡¹å¼å‡½æ•°æ¯”ä½é˜¶å¤šé¡¹å¼å‡½æ•°çš„å¤æ‚åº¦æ›´é«˜ã€‚</p><p><strong>ã€æ•°æ®é›†å¤§å°ã€‘</strong></p><p>å¦ä¸€ä¸ªé‡è¦å› ç´ æ˜¯æ•°æ®é›†çš„å¤§å°ã€‚<strong>æ•°æ®çš„å¤æ‚åº¦å—åˆ°æ ·æœ¬çš„ä¸ªæ•°ã€æ¯ä¸ªæ ·æœ¬çš„å…ƒç´ ä¸ªæ•°ã€æ—¶é—´ç©ºé—´ç»“æ„å’Œå¤šæ ·æ€§çš„å½±å“</strong>ã€‚è®­ç»ƒæ•°æ®é›†ä¸­çš„æ ·æœ¬è¶Šå°‘ï¼Œæˆ‘ä»¬å°±è¶Šæœ‰å¯èƒ½ï¼ˆä¸”æ›´ä¸¥é‡åœ°ï¼‰è¿‡æ‹Ÿåˆã€‚éšç€è®­ç»ƒæ•°æ®é‡çš„å¢åŠ ï¼Œæ³›åŒ–è¯¯å·®é€šå¸¸ä¼šå‡å°ã€‚</p><p>æ­¤å¤–ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ›´å¤šçš„æ•°æ®ä¸ä¼šæœ‰ä»€ä¹ˆåå¤„ã€‚å¯¹äºå›ºå®šçš„ä»»åŠ¡å’Œæ•°æ®åˆ†å¸ƒï¼Œæ¨¡å‹å¤æ‚æ€§å’Œæ•°æ®é›†å¤§å°ä¹‹é—´é€šå¸¸å­˜åœ¨å…³ç³»ã€‚ç»™å‡ºæ›´å¤šçš„æ•°æ®ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°è¯•æ‹Ÿåˆä¸€ä¸ªæ›´å¤æ‚çš„æ¨¡å‹ã€‚èƒ½å¤Ÿæ‹Ÿåˆæ›´å¤æ‚çš„æ¨¡å‹å¯èƒ½æ˜¯æœ‰ç›Šçš„ã€‚å¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„æ•°æ®ï¼Œç®€å•çš„æ¨¡å‹å¯èƒ½æ›´æœ‰ç”¨ã€‚</p><p>å¯¹äºè®¸å¤šä»»åŠ¡ï¼Œæ·±åº¦å­¦ä¹ åªæœ‰åœ¨æœ‰æ•°åƒä¸ªè®­ç»ƒæ ·æœ¬æ—¶æ‰ä¼˜äºçº¿æ€§æ¨¡å‹ã€‚ä»ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ<strong>æ·±åº¦å­¦ä¹ ç›®å‰çš„ç”Ÿæœºè¦å½’åŠŸäºå»‰ä»·å­˜å‚¨ã€äº’è”è®¾å¤‡ä»¥åŠæ•°å­—åŒ–ç»æµå¸¦æ¥çš„æµ·é‡æ•°æ®é›†ã€‚</strong></p><p><strong>ã€å®ç°å¤šé¡¹å¼å›å½’ã€‘</strong></p><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡å¤šé¡¹å¼æ‹Ÿåˆæ¥æ¢ç´¢è¿™äº›æ¦‚å¿µã€‚é€šè¿‡å¯¹è¾“å…¥æ•°æ®çš„æ§åˆ¶åˆ†åˆ«å±•ç¤ºæ¬ æ‹Ÿåˆã€æ­£å¸¸æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆçš„æƒ…å†µã€‚</p><p>ç»™å®š$x$ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹ä¸‰é˜¶å¤šé¡¹å¼æ¥ç”Ÿæˆè®­ç»ƒå’Œæµ‹è¯•æ•°æ®çš„æ ‡ç­¾ï¼š</p><p>$$<br>y &#x3D; 5 + 1.2x - 3.4\frac{x^2} {2!} + 5.6 \frac{x^3} {3!} + \epsilon \text{ where }<br>\epsilon \sim \mathcal{N}(0, 0.1^2).<br>$$</p><p>å™ªå£°é¡¹$\epsilon$æœä»å‡å€¼ä¸º0ä¸”æ ‡å‡†å·®ä¸º0.1çš„æ­£æ€åˆ†å¸ƒã€‚åœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›é¿å…éå¸¸å¤§çš„æ¢¯åº¦å€¼æˆ–æŸå¤±å€¼ï¼Œå› æ­¤æˆ‘ä»¬å°†ç‰¹å¾ä»$x^i$è°ƒæ•´ä¸º$\frac{x^i} {i!}$ï¼Œè¿™æ ·å¯ä»¥é¿å…å¾ˆå¤§çš„$i$å¸¦æ¥çš„ç‰¹åˆ«å¤§çš„æŒ‡æ•°å€¼ã€‚æˆ‘ä»¬å°†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†å„ç”Ÿæˆ100ä¸ªæ ·æœ¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> TensorDataset, DataLoader</span><br><span class="line"></span><br><span class="line">max_degree = <span class="number">20</span> <span class="comment"># ç”Ÿæˆ20ç»´çš„æ•°æ®æ ·æœ¬ï¼Œæˆ‘ä»¬åªéœ€è¦å‰4ä¸ªç»´åº¦ï¼Œåè¾¹çš„æ˜¯å™ªå£°</span></span><br><span class="line">n_train, n_test = <span class="number">100</span>, <span class="number">100</span></span><br><span class="line">true_w = np.zeros(shape=(max_degree,))</span><br><span class="line">true_w[<span class="number">0</span>: <span class="number">4</span>] = np.array([<span class="number">5</span>, <span class="number">1.2</span>, -<span class="number">3.4</span>, <span class="number">5.6</span>])</span><br><span class="line"></span><br><span class="line">features = np.random.normal(size=(n_train + n_test, <span class="number">1</span>))</span><br><span class="line">np.random.shuffle(features)</span><br><span class="line">poly_features = np.power(features, np.arange(max_degree).reshape((<span class="number">1</span>, -<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">math.gamma(N)å…¶è¡¨ç¤ºNåœ¨N-1åˆ°0èŒƒå›´å†…çš„æ•´æ•°é˜¶ä¹˜ã€‚</span></span><br><span class="line"><span class="string">å…¬å¼ä¸ºï¼šgamma(N)=(N-1)*(N-2)*...*2*1</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(max_degree):</span><br><span class="line">    poly_features[:, i] /= math.gamma(i+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># labelsçš„ç»´åº¦:(n_train+n_test,)</span></span><br><span class="line">labels = np.dot(poly_features, true_w)</span><br><span class="line">labels += np.random.normal(scale=<span class="number">0.1</span>, size=labels.shape)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">true_w, features, poly_features, labels = [</span><br><span class="line">    paddle.to_tensor(x, dtype=paddle.float32) </span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> [true_w, features, poly_features, labels]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(poly_features[:<span class="number">1</span>, :], <span class="string">&#x27;\n&#x27;</span>, labels[:<span class="number">1</span>])</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[1, 20], dtype=float32, place=Place(cpu), stop_gradient=True,       [[1.        , 1.28171623, 0.82139820, 0.35093310, 0.11244916, 0.02882558,         0.00615770, 0.00112749, 0.00018064, 0.00002573, 0.00000330, 0.00000038,         0.00000004, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000,         0.00000000, 0.00000000]])  Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=True,       [5.66237640])</code></pre><p>é¦–å…ˆè®©æˆ‘ä»¬å®ç°ä¸€ä¸ªå‡½æ•°æ¥è¯„ä¼°æ¨¡å‹åœ¨ç»™å®šæ•°æ®é›†ä¸Šçš„æŸå¤±ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Accumulator</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åœ¨nä¸ªå˜é‡ä¸Šç´¯åŠ &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * n</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, *args</span>):</span><br><span class="line">        self.data = [a + <span class="built_in">float</span>(b) <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self.data, args)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * <span class="built_in">len</span>(self.data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="keyword">return</span> self.data[idx]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evaluate_loss</span>(<span class="params">net, data_iter, loss</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯„ä¼°ç»™å®šæ•°æ®é›†ä¸Šæ¨¡å‹çš„æŸå¤±&quot;&quot;&quot;</span></span><br><span class="line">    metric = Accumulator(<span class="number">2</span>) <span class="comment"># æŸå¤±çš„æ€»å’Œ,æ ·æœ¬æ•°é‡</span></span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">        out = net(X)</span><br><span class="line">        y = y.reshape(out.shape)</span><br><span class="line">        l = loss(out, y)</span><br><span class="line">        metric.add(l.<span class="built_in">sum</span>(), l.numel())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> metric[<span class="number">0</span>] / metric[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>ç°åœ¨è¯»å–æ•°æ®å¹¶å®šä¹‰è®­ç»ƒå‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_array</span>(<span class="params">data_array, batch_size, is_train=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="comment"># æ„é€ æ•°æ®è¿­ä»£å™¨</span></span><br><span class="line">    dataset = TensorDataset(data_array)</span><br><span class="line">    <span class="keyword">return</span> DataLoader(dataset, batch_size=batch_size, shuffle=is_train)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_epoch_ch3</span>(<span class="params">net, train_iter, loss, updater</span>):  <span class="comment">#@save</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è®­ç»ƒæ¨¡å‹ä¸€ä¸ªè¿­ä»£å‘¨æœŸ&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># å°†æ¨¡å‹è®¾ç½®ä¸ºè®­ç»ƒæ¨¡å¼</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(net, paddle.nn.Layer):</span><br><span class="line">        net.train()</span><br><span class="line">    <span class="comment"># è®­ç»ƒæŸå¤±æ€»å’Œã€è®­ç»ƒå‡†ç¡®åº¦æ€»å’Œã€æ ·æœ¬æ•°</span></span><br><span class="line">    metric = Accumulator(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter():</span><br><span class="line">        <span class="comment"># è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°å‚æ•°</span></span><br><span class="line">        y_hat = net(X)</span><br><span class="line">        l = loss(y_hat, y)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(updater, paddle.optimizer.Optimizer):</span><br><span class="line">            updater.clear_grad()</span><br><span class="line">            l.backward()</span><br><span class="line">            updater.step()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            l.<span class="built_in">sum</span>().backward()</span><br><span class="line">            W, b = updater(W, b, X.shape[<span class="number">0</span>])</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;updated W, b:&quot;</span>, W, b)</span><br><span class="line">            metric.add(<span class="built_in">float</span>(l.<span class="built_in">sum</span>()), accuracy(y_hat, y), y.numel())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">train_features, test_features, train_labels, test_labels, num_epochs=<span class="number">400</span></span>):</span><br><span class="line">    loss = nn.MSELoss(reduction=<span class="string">&#x27;none&#x27;</span>)<span class="comment">#å‡æ–¹æŸå¤±</span></span><br><span class="line">    input_shape = train_features.shape[-<span class="number">1</span>]</span><br><span class="line">    net = nn.Sequential(nn.Linear(input_shape, <span class="number">1</span>, bias_attr=<span class="literal">False</span>))</span><br><span class="line">    batch_size = <span class="built_in">min</span>(<span class="number">10</span>, train_labels.shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    train_iter = load_array((train_features, train_labels.reshape((-<span class="number">1</span>, <span class="number">1</span>))), batch_size)</span><br><span class="line">    test_iter = load_array((test_features, test_labels.reshape((-<span class="number">1</span>, <span class="number">1</span>))), batch_size, is_train=<span class="literal">False</span>)</span><br><span class="line">    trainer = paddle.optimizer.SGD(<span class="number">0.001</span>, net.parameters())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        train_epoch_ch3(net, train_iter, loss, trainer)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;weight:&#x27;</span>, net[<span class="number">0</span>].weight)</span><br></pre></td></tr></table></figure><p><strong>1ï¼‰ä¸‰é˜¶å¤šé¡¹å¼å‡½æ•°æ‹Ÿåˆ(æ­£å¸¸)</strong></p><blockquote><p>å¦‚å›¾æ‰€ç¤ºï¼š</p><p>train_losså°±æ˜¯è®­ç»ƒè¯¯å·®ï¼›</p><p>test_losså°±æ˜¯æ³›åŒ–è¯¯å·®ã€‚</p></blockquote><p>ç°åœ¨æˆ‘ä»¬æ­£å¸¸å°†æ ·æœ¬æŠ•å…¥åˆ°è®­ç»ƒä¸­ï¼Œå­¦ä¹ åˆ°çš„æ¨¡å‹å‚æ•°ä¹Ÿæ¥è¿‘çœŸå®å€¼$w &#x3D; [5, 1.2, -3.4, 5.6]$ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d24d18e751094cc5a09e9fec7159ae410eb9d1df692b4f34b6e1796bcca3b7bf" width="350" hegiht="" ></center><center>å›¾4ï¼šæ­£å¸¸æ‹Ÿåˆ </center><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»å¤šé¡¹å¼ç‰¹å¾ä¸­é€‰æ‹©å‰4ä¸ªç»´åº¦ï¼Œå³1,x,x^2/2!,x^3/3!</span></span><br><span class="line">train(poly_features[:n_train, :<span class="number">4</span>], poly_features[n_train:, :<span class="number">4</span>], labels[:n_train], labels[n_train:])</span><br></pre></td></tr></table></figure><pre><code>weight: Parameter containing:Tensor(shape=[4, 1], dtype=float32, place=Place(cpu), stop_gradient=False,       [[ 4.98475456],        [ 1.18825924],        [-3.37832952],        [ 5.63073015]])</code></pre><p><strong>2ï¼‰çº¿æ€§å‡½æ•°æ‹Ÿåˆ(æ¬ æ‹Ÿåˆ)</strong></p><p>å½“æˆ‘ä»¬æ²¡æœ‰æä¾›è¶³é‡çš„æ•°æ®ï¼Œåªæä¾›å‰ä¸¤åˆ—ï¼ˆæ•°æ®ä¸å…¨ï¼‰ï¼Œ<br>å½“ç”¨æ¥æ‹Ÿåˆéçº¿æ€§æ¨¡å¼ï¼ˆå¦‚è¿™é‡Œçš„ä¸‰é˜¶å¤šé¡¹å¼å‡½æ•°ï¼‰æ—¶ï¼Œçº¿æ€§æ¨¡å‹å®¹æ˜“æ¬ æ‹Ÿåˆã€‚</p><p>$w &#x3D; [5, 1.2, -3.4, 5.6]$</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d8488a4e261c4493be2f8f916790a68c53f322094f9d4c8b93b2f44a2e3045d7" width="350" hegiht="" ></center><center>å›¾5ï¼šæ¬ æ‹Ÿåˆ </center><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»å¤šé¡¹å¼ç‰¹å¾ä¸­é€‰æ‹©å‰2ä¸ªç»´åº¦ï¼Œå³1å’Œx</span></span><br><span class="line">train(poly_features[:n_train, :<span class="number">2</span>], poly_features[n_train:, :<span class="number">2</span>], </span><br><span class="line">        labels[:n_train], labels[n_train:])</span><br></pre></td></tr></table></figure><pre><code>weight: Parameter containing:Tensor(shape=[2, 1], dtype=float32, place=Place(cpu), stop_gradient=False,       [[3.09112906],        [4.18816757]])</code></pre><p><strong>3ï¼‰é«˜é˜¶å¤šé¡¹å¼å‡½æ•°æ‹Ÿåˆ(è¿‡æ‹Ÿåˆ)</strong></p><p>æ¥ä¸‹æ¥æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½ç»™æ¨¡å‹ï¼Œè¿™ä¸ªè¿‡äºå¤æ‚çš„æ¨¡å‹ä¼šè½»æ˜“å—åˆ°è®­ç»ƒæ•°æ®ä¸­å™ªå£°çš„å½±å“ã€‚<br>è™½ç„¶è®­ç»ƒæŸå¤±å¯ä»¥æœ‰æ•ˆåœ°é™ä½ï¼Œä½†æµ‹è¯•æŸå¤±ä»ç„¶å¾ˆé«˜ã€‚<br>ç»“æœè¡¨æ˜ï¼Œå¤æ‚æ¨¡å‹å¯¹æ•°æ®é€ æˆäº†è¿‡æ‹Ÿåˆã€‚</p><p>$w &#x3D; [5, 1.2, -3.4, 5.6]$</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d0e8eec69cba4648bb56dcedf4f7c28f835fb7d2231944fd87bcf13591cf7855" width="350" hegiht="" ></center><center>å›¾6ï¼šè¿‡æ‹Ÿåˆ </center><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»å¤šé¡¹å¼ç‰¹å¾ä¸­é€‰å–æ‰€æœ‰ç»´åº¦</span></span><br><span class="line">train(poly_features[:n_train, :], poly_features[n_train:, :],</span><br><span class="line">      labels[:n_train], labels[n_train:], num_epochs=<span class="number">1500</span>)</span><br></pre></td></tr></table></figure><pre><code>weight: Parameter containing:Tensor(shape=[20, 1], dtype=float32, place=Place(cpu), stop_gradient=False,       [[ 4.96567392],        [ 1.28106725],        [-3.26861453],        [ 5.17804003],        [-0.45723167],        [ 1.17682230],        [ 0.58788991],        [ 0.11369380],        [-0.00772932],        [ 0.34586436],        [ 0.51956356],        [ 0.03097064],        [-0.40698799],        [ 0.23049854],        [-0.52523530],        [-0.27161127],        [-0.42720860],        [-0.45747021],        [-0.48819304],        [ 0.42260706]])</code></pre><h2 id="äºŒã€æ•°å€¼ç¨³å®šæ€§å’Œæ¨¡å‹åˆå§‹åŒ–"><a href="#äºŒã€æ•°å€¼ç¨³å®šæ€§å’Œæ¨¡å‹åˆå§‹åŒ–" class="headerlink" title="äºŒã€æ•°å€¼ç¨³å®šæ€§å’Œæ¨¡å‹åˆå§‹åŒ–"></a>äºŒã€æ•°å€¼ç¨³å®šæ€§å’Œæ¨¡å‹åˆå§‹åŒ–</h2><p>â€‹        åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å®ç°çš„æ¯ä¸ªæ¨¡å‹éƒ½æ˜¯æ ¹æ®æŸä¸ªé¢„å…ˆæŒ‡å®šçš„åˆ†å¸ƒæ¥åˆå§‹åŒ–æ¨¡å‹çš„å‚æ•°ã€‚åˆå§‹åŒ–æ–¹æ¡ˆçš„é€‰æ‹©åœ¨ç¥ç»ç½‘ç»œå­¦ä¹ ä¸­èµ·ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ï¼Œå®ƒå¯¹ä¿æŒæ•°å€¼ç¨³å®šæ€§è‡³å…³é‡è¦ã€‚æ­¤å¤–ï¼Œè¿™äº›åˆå§‹åŒ–æ–¹æ¡ˆçš„é€‰æ‹©å¯ä»¥ä¸éçº¿æ€§æ¿€æ´»å‡½æ•°çš„é€‰æ‹©æœ‰è¶£çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬é€‰æ‹©å“ªä¸ªå‡½æ•°ä»¥åŠå¦‚ä½•åˆå§‹åŒ–å‚æ•°å¯ä»¥å†³å®šä¼˜åŒ–ç®—æ³•æ”¶æ•›çš„é€Ÿåº¦æœ‰å¤šå¿«ã€‚ç³Ÿç³•é€‰æ‹©å¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬åœ¨è®­ç»ƒæ—¶é‡åˆ°æ¢¯åº¦çˆ†ç‚¸æˆ–æ¢¯åº¦æ¶ˆå¤±ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°æ¢è®¨è¿™äº›ä¸»é¢˜ï¼Œå¹¶è®¨è®ºä¸€äº›æœ‰ç”¨çš„å¯å‘å¼æ–¹æ³•ã€‚</p><p>â€‹        æ·±åº¦å­¦ä¹ çš„è®­ç»ƒæœ¬è´¨æ˜¯ä¼˜åŒ–æŸå¤±ï¼Œä¼˜åŒ–çš„æ–¹å¼æ˜¯è®¡ç®—æ¢¯åº¦ï¼Œç„¶åé€šè¿‡ä¼˜åŒ–ç®—æ³•æ›´æ–°å‚æ•°ã€‚å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›å¿†ä¸€ä¸‹æ¢¯åº¦å…¬å¼çš„æ•°å­¦æ„ä¹‰ï¼Œå®ƒæè¿°äº†å‡½æ•°åœ¨æŸç‚¹å‡½æ•°å€¼å¢åŠ æœ€å¿«çš„æ–¹å‘ï¼Œå®ƒçš„æ¨¡å°±ç­‰äºå‡½æ•°åœ¨è¯¥ç‚¹æ–¹å‘å¯¼æ•°çš„æœ€å¤§å€¼ã€‚ç”¨ç›´è§‚çš„è§£é‡Šå°±æ˜¯ï¼Œå‡è®¾ä½ ç°åœ¨ä½äºä¸€åº§å±±ä¸Šï¼Œåˆ™è¿™ä¸€ç‚¹çš„æ¢¯åº¦æ˜¯åœ¨è¯¥ç‚¹å¡åº¦ï¼ˆæˆ–è€…è¯´æ–œåº¦ï¼‰æœ€é™¡çš„æ–¹å‘ï¼Œæ¢¯åº¦çš„å¤§å°å‘Šè¯‰æˆ‘ä»¬å¡åº¦åˆ°åº•æœ‰å¤šé™¡ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/7b41140018cd482eb6b1438dc713be416375e9d920a44f63895f6f9ca26485b2" width="500" hegiht="" ></center><center>å›¾1ï¼šæ¢¯åº¦æ›´æ–°çš„åŸç† </center><p>æ ¹æ®æ¢¯åº¦é“¾å¼ä¼ é€’æ³•åˆ™å¯ä»¥å‘ç°ï¼Œ<strong>æ¿€æ´»å‡½æ•°çš„æ±‚å¯¼å€¼å’Œæƒé‡å€¼ä¼šä»¥è¿ä¹˜çš„å½¢å¼å‚ä¸åˆ°è¯¥å±‚æƒé‡çš„æ¢¯åº¦è®¡ç®—ä¸­</strong>ï¼Œè€Œ<strong>é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„åå·®ä»¥åŠç¥ç»å…ƒçš„è¾“å…¥å€¼åªæ˜¯ä»¥å¸¸æ•°çš„å½¢å¼å‚ä¸è®¡ç®—</strong>ã€‚</p><p>æ¢¯åº¦æ˜¯çŸ©é˜µä¸æ¢¯åº¦å‘é‡çš„ä¹˜ç§¯ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å®¹æ˜“å—åˆ°æ•°å€¼ä¸‹æº¢é—®é¢˜çš„å½±å“ã€‚</p><p>ä¸ç¨³å®šæ¢¯åº¦å¸¦æ¥çš„é£é™©ä¸æ­¢åœ¨äºæ•°å€¼è¡¨ç¤ºï¼Œä¸ç¨³å®šæ¢¯åº¦ä¹Ÿå¨èƒåˆ°æˆ‘ä»¬ä¼˜åŒ–ç®—æ³•çš„ç¨³å®šæ€§ã€‚æˆ‘ä»¬å¯èƒ½é¢ä¸´ä¸€äº›é—®é¢˜ï¼Œè¦ä¹ˆæ˜¯<strong>æ¢¯åº¦çˆ†ç‚¸ï¼ˆgradient explodingï¼‰</strong> é—®é¢˜ï¼šå‚æ•°æ›´æ–°è¿‡å¤§ï¼Œç ´åäº†æ¨¡å‹çš„ç¨³å®šæ”¶æ•›ï¼›è¦ä¹ˆæ˜¯<strong>æ¢¯åº¦æ¶ˆå¤±ï¼ˆgradient vanishingï¼‰</strong> é—®é¢˜ï¼šå‚æ•°æ›´æ–°è¿‡å°ï¼Œåœ¨æ¯æ¬¡æ›´æ–°æ—¶å‡ ä¹ä¸ä¼šç§»åŠ¨ï¼Œå¯¼è‡´æ¨¡å‹æ— æ³•å­¦ä¹ ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ ï¼Œæ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸æ˜¯åå‘ä¼ æ’­è®­ç»ƒæ³•åˆ™çš„å…ˆå¤©æ€§ä¸è¶³ï¼Œæœ¬è´¨æ˜¯æ¢¯åº¦åå‘ä¼ æ’­ä¸­çš„è¿ä¹˜æ•ˆåº”ã€‚æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸çš„äº§ç”ŸåŸå› åœ¨äºç¥ç»ç½‘ç»œçš„æ›´æ–°ä¸­ï¼Œæ¢¯åº¦çš„ä¼ é€’æ˜¯é‡‡ç”¨è¿ä¹˜å‡½æ•°çš„å½¢å¼ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒæŒ‡æ•°çº§åˆ«çš„å¢é•¿æ˜¯çˆ†ç‚¸å¼çš„ï¼Œå› æ­¤å¯èƒ½å¼•èµ·æ·±å±‚ç½‘ç»œçš„æµ…å±‚èŠ‚ç‚¹æ›´æ–°ä½¿ç”¨ä¸€ä¸ªè¿‡å°æˆ–è€…è¿‡å¤§çš„æ¢¯åº¦å€¼ï¼Œè¿™ç§æ·±åº¦å­¦ä¹ ç°è±¡å«åšæ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸ã€‚</p><h3 id="2-1-æ¢¯åº¦æ¶ˆå¤±"><a href="#2-1-æ¢¯åº¦æ¶ˆå¤±" class="headerlink" title="2.1 æ¢¯åº¦æ¶ˆå¤±"></a>2.1 æ¢¯åº¦æ¶ˆå¤±</h3><p>æ›¾ç»sigmoidå‡½æ•°å¾ˆæµè¡Œï¼Œå› ä¸ºå®ƒç±»ä¼¼äºé˜ˆå€¼å‡½æ•°ã€‚ç”±äºæ—©æœŸçš„äººå·¥ç¥ç»ç½‘ç»œå—åˆ°ç”Ÿç‰©ç¥ç»ç½‘ç»œçš„å¯å‘ï¼Œç¥ç»å…ƒè¦ä¹ˆå®Œå…¨æ¿€æ´»è¦ä¹ˆå®Œå…¨ä¸æ¿€æ´»ï¼ˆå°±åƒç”Ÿç‰©ç¥ç»å…ƒï¼‰çš„æƒ³æ³•å¾ˆæœ‰å¸å¼•åŠ›ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/8e6c84ff23204602ae7e8a3bbe35c43fee9e0a818fd6452192594885139a4fb5" width="400" hegiht="" ></center><center>å›¾2ï¼šsoftmaxæ¿€æ´»å‡½æ•°æ›²çº¿ </center><p>ç„¶è€Œï¼Œå®ƒå´æ˜¯å¯¼è‡´æ¢¯åº¦æ¶ˆå¤±é—®é¢˜çš„ä¸€ä¸ªå¸¸è§çš„åŸå› ï¼Œå½“sigmoidå‡½æ•°çš„è¾“å…¥å¾ˆå¤§æˆ–æ˜¯å¾ˆå°æ—¶ï¼Œå®ƒçš„æ¢¯åº¦éƒ½ä¼šæ¶ˆå¤±ã€‚æ­¤å¤–ï¼Œå½“åå‘ä¼ æ’­é€šè¿‡è®¸å¤šå±‚æ—¶ï¼Œé™¤éæˆ‘ä»¬åœ¨åˆšåˆšå¥½çš„åœ°æ–¹ï¼Œè¿™äº›åœ°æ–¹sigmoidå‡½æ•°çš„è¾“å…¥æ¥è¿‘äºé›¶ï¼Œå¦åˆ™æ•´ä¸ªä¹˜ç§¯çš„æ¢¯åº¦å¯èƒ½ä¼šæ¶ˆå¤±ã€‚å½“æˆ‘ä»¬çš„ç½‘ç»œæœ‰å¾ˆå¤šå±‚æ—¶ï¼Œé™¤éæˆ‘ä»¬å¾ˆå°å¿ƒï¼Œå¦åˆ™åœ¨æŸä¸€å±‚å¯èƒ½ä¼šåˆ‡æ–­æ¢¯åº¦ã€‚<br>å› æ­¤ï¼Œæ›´ç¨³å®šçš„ReLUç³»åˆ—å‡½æ•°å·²ç»æˆä¸ºä»ä¸šè€…çš„é»˜è®¤é€‰æ‹©ï¼ŒReLUå‡½æ•°çš„å¯¼æ•°åœ¨æ­£æ•°éƒ¨åˆ†æ˜¯æ’ç­‰äº1çš„ï¼Œå› æ­¤åœ¨æ·±å±‚ç½‘ç»œä¸­ä½¿ç”¨æ›´ä¼˜çš„æ¿€æ´»å‡½æ•°ï¼ˆä¾‹å¦‚ReLUç­‰ï¼‰å¯ä»¥å‡è½»æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ã€‚</p><h3 id="2-2-æ¢¯åº¦çˆ†ç‚¸"><a href="#2-2-æ¢¯åº¦çˆ†ç‚¸" class="headerlink" title="2.2 æ¢¯åº¦çˆ†ç‚¸"></a>2.2 æ¢¯åº¦çˆ†ç‚¸</h3><p>ç›¸åï¼Œæ¢¯åº¦çˆ†ç‚¸å¯èƒ½åŒæ ·ä»¤äººçƒ¦æ¼ã€‚ä¸ºäº†æ›´å¥½åœ°è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ç”Ÿæˆ100ä¸ªé«˜æ–¯éšæœºçŸ©é˜µï¼Œå¹¶å°†å®ƒä»¬ä¸æŸä¸ªåˆå§‹çŸ©é˜µç›¸ä¹˜ã€‚å¯ä»¥å‘ç°å‡ºç°äº†æ¢¯åº¦çˆ†ç‚¸çš„æƒ…å†µï¼Œå½“è¿™ç§æƒ…å†µæ˜¯ç”±äºæ·±åº¦ç½‘ç»œçš„åˆå§‹åŒ–æ‰€å¯¼è‡´æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æœºä¼šè®©æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨æ”¶æ•›ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">M = paddle.normal(<span class="number">0</span>, <span class="number">1</span>, shape=[<span class="number">4</span>, <span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸€ä¸ªçŸ©é˜µ \n&#x27;</span>,M)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    M = paddle.mm(M,paddle.normal(<span class="number">0</span>, <span class="number">1</span>, shape=[<span class="number">4</span>, <span class="number">4</span>]))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¹˜ä»¥100ä¸ªçŸ©é˜µå\n&#x27;</span>, M)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ä¸€ä¸ªçŸ©é˜µ </span></span><br><span class="line"><span class="string"> Tensor(shape=[4, 4], dtype=float32, place=Place(cpu), stop_gradient=True,</span></span><br><span class="line"><span class="string">       [[-1.19920492, -1.51656413, -0.66636622,  0.62597984],</span></span><br><span class="line"><span class="string">        [-0.00658856,  0.70853168,  0.45729700,  0.10293817],</span></span><br><span class="line"><span class="string">        [ 0.27025989, -0.19260350, -0.12201850, -1.42817235],</span></span><br><span class="line"><span class="string">        [-0.04502322,  0.19740644, -0.95305598,  0.35635617]])</span></span><br><span class="line"><span class="string">ä¹˜ä»¥100ä¸ªçŸ©é˜µå</span></span><br><span class="line"><span class="string"> Tensor(shape=[4, 4], dtype=float32, place=Place(cpu), stop_gradient=True,</span></span><br><span class="line"><span class="string">       [[ 303895516951572182466560. ,  232979873649558818914304. ,</span></span><br><span class="line"><span class="string">         -2250137589105981078372352., -5345116457122281304358912.],</span></span><br><span class="line"><span class="string">        [-136164064919334751830016. , -104411381703363541336064. ,</span></span><br><span class="line"><span class="string">          1008128975147034581401600.,  2394808197116681298903040.],</span></span><br><span class="line"><span class="string">        [ 113319943119065864732672. ,  86876427403012165599232.  ,</span></span><br><span class="line"><span class="string">         -839054477648321230929920. , -1993143315278582639493120.],</span></span><br><span class="line"><span class="string">        [ 13815522565998537342976.  ,  10588780127280403841024.  ,</span></span><br><span class="line"><span class="string">         -102303525940968309129216. , -243013515316971584880640. ]])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>â€‹æˆ‘ä»¬çŸ¥é“ï¼Œæ¢¯åº¦éœ€è¦å’Œå­¦ä¹ ç‡ç›¸ç»“åˆï¼Œå½“å‡ºç°è¿‡å°çš„æ¢¯åº¦ï¼ˆæˆ–ä¸º0ï¼‰ï¼Œæ— è®ºå­¦ä¹ ç‡æ€ä¹ˆè°ƒæ•´ï¼Œæˆ‘ä»¬éƒ½æ— æ³•å®ç°è®­ç»ƒçš„è¿›å±•ï¼Œåº•éƒ¨å±‚æ¢¯åº¦ä¸º0çš„æƒ…å†µä¼šå°¤ä¸ºä¸¥é‡ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ— è®ºè¾“å…¥çš„å€¼æ˜¯å¤šå°‘ï¼Œåº•éƒ¨å±‚éƒ½æ— æ³•å¯¹æ•°å€¼è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå†æ·±çš„ç½‘ç»œç»“æ„éƒ½æ¯«æ— æ„ä¹‰ï¼Œå®é™…æ•ˆæœå’Œå•å±‚ç¥ç»ç½‘ç»œçš„æ•ˆæœéƒ½æ˜¯ç›¸åŒçš„ã€‚</p><p>â€‹åŒæ ·åœ°ï¼Œæ¢¯åº¦çˆ†ç‚¸ä¹Ÿä¼šå¸¦æ¥è®¸å¤šé—®é¢˜ï¼Œè¿™ä¼šä½¿æ¨¡å‹å¯¹å­¦ä¹ ç‡å˜å¾—æ›´åŠ æ•æ„Ÿï¼Œç¨å¤§çš„å­¦ä¹ ç‡å°±ä¼šå¯¼è‡´å‚æ•°åŠ¨è¡ï¼Œæ— æ³•æ”¶æ•›ï¼Œå§‹ç»ˆå¤„äºä¸€ä¸ªå¤§çš„å‚æ•°å€¼çš„çŠ¶æ€ï¼›å­¦ä¹ ç‡å°ï¼Œè™½ç„¶é¿å…äº†ä¸Šé¢çš„æƒ…å†µï¼Œä½†å¾€å¾€ä¼šå¯¼è‡´è®­ç»ƒæ— è¿›å±•ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­åœ°å»è°ƒæ•´å­¦ä¹ ç‡ã€‚</p><h3 id="2-3-åˆç†çš„æƒé‡åˆå§‹åŒ–çš„æ–¹æ³•"><a href="#2-3-åˆç†çš„æƒé‡åˆå§‹åŒ–çš„æ–¹æ³•" class="headerlink" title="2.3 åˆç†çš„æƒé‡åˆå§‹åŒ–çš„æ–¹æ³•"></a>2.3 åˆç†çš„æƒé‡åˆå§‹åŒ–çš„æ–¹æ³•</h3><p>â€‹é’ˆå¯¹ç€ä¸Šé¢çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¾ˆå¤šæ–¹æ³•æ¥å®ç°å‚æ•°çš„ç¨³å®šï¼Œç›®æ ‡æ˜¯ä½¿æ¢¯åº¦å€¼åœ¨ä¸€ä¸ªåˆç†çš„èŒƒå›´å†…ï¼Œæœ€ç»ˆæ¨åŠ¨è®­ç»ƒçš„ç¨³å®šã€‚<em><strong>æœ¬èŠ‚ä¸»è¦ä»‹ç»åˆç†çš„æƒé‡åˆå§‹åŒ–çš„æ–¹æ³•</strong></em>ã€‚å¯¹äºæ¨¡å‹è€Œè¨€å‚æ•°åˆå§‹åŒ–æ˜¯åˆå§‹é˜¶æ®µæ¯”è¾ƒé‡è¦çš„é˜¶æ®µï¼Œç³Ÿç³•çš„åˆå§‹åŒ–ä¼šå¯¼è‡´æ¨¡å‹ä¸æ”¶æ•›æˆ–è€…æ ¹æœ¬è®­ç»ƒæ²¡ååº”ã€‚</p><p><strong>1ï¼‰æ‰“ç ´å¯¹ç§°æ€§</strong></p><p>â€‹å½“æ‰€æœ‰åˆå§‹å€¼éƒ½ç›¸åŒæ—¶ï¼Œä¾‹å¦‚å°†æ¯ä¸ªæƒé‡åˆå§‹åŒ–ä¸º0ï¼Œç„¶ååœ¨è¿›è¡Œåå‘ä¼ æ’­æ—¶ï¼Œæ‰€æœ‰æƒé‡å°†è·å¾—ç›¸åŒçš„æ¢¯åº¦ï¼Œå› æ­¤è¿›è¡Œç›¸åŒçš„æ›´æ–°ã€‚<br>ç›´è§‚åœ°è¯´ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰èŠ‚ç‚¹éƒ½å°†å­¦ä¹ ç›¸åŒçš„ä¸œè¥¿ï¼Œè€Œæˆ‘ä»¬ä¸å¸Œæœ›é‚£æ ·ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›ç½‘ç»œå­¦ä¹ ä¸åŒç§ç±»çš„ç‰¹å¾ã€‚è¿™å°±æ˜¯æ‰€è°“çš„æ‰“ç ´å¯¹ç§°æ€§ã€‚</p><p>â€‹å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„å¤šå±‚æ„ŸçŸ¥æœºï¼Œå®ƒæœ‰ä¸€ä¸ªéšè—å±‚å’Œä¸¤ä¸ªéšè—å•å…ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªéšè—å•å…ƒä¸ç¬¬äºŒä¸ªéšè—å•å…ƒæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åŒºåˆ«å‡è®¾æˆ‘ä»¬å°†éšè—å±‚çš„æ‰€æœ‰å‚æ•°åˆå§‹åŒ–ä¸º$\mathbf{W}^{(1)} &#x3D; c$ï¼Œ$c$ä¸ºå¸¸é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨å‰å‘ä¼ æ’­æœŸé—´ï¼Œä¸¤ä¸ªéšè—å•å…ƒé‡‡ç”¨ç›¸åŒçš„è¾“å…¥å’Œå‚æ•°ï¼Œäº§ç”Ÿç›¸åŒçš„æ¿€æ´»ï¼Œè¯¥æ¿€æ´»è¢«é€åˆ°è¾“å‡ºå•å…ƒã€‚åœ¨åå‘ä¼ æ’­æœŸé—´ï¼Œæ ¹æ®å‚æ•°$\mathbf{W}^{(1)}$å¯¹è¾“å‡ºå•å…ƒè¿›è¡Œå¾®åˆ†ï¼Œå¾—åˆ°ä¸€ä¸ªæ¢¯åº¦ï¼Œå…¶å…ƒç´ éƒ½å–ç›¸åŒçš„å€¼ã€‚å› æ­¤ï¼Œåœ¨åŸºäºæ¢¯åº¦çš„è¿­ä»£ä¹‹åï¼Œ$\mathbf{W}^{(1)}$çš„æ‰€æœ‰å…ƒç´ ä»ç„¶é‡‡ç”¨ç›¸åŒçš„å€¼ã€‚è¿™æ ·çš„è¿­ä»£æ°¸è¿œä¸ä¼šæ‰“ç ´å¯¹ç§°æ€§ï¼Œæˆ‘ä»¬å¯èƒ½æ°¸è¿œä¹Ÿæ— æ³•å®ç°ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ï¼Œéšè—å±‚çš„è¡Œä¸ºå°±å¥½åƒåªæœ‰ä¸€ä¸ªå•å…ƒã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¯¹ç§°æ€§ã€‚</p><p>â€‹å› æ­¤ï¼Œæˆ‘ä»¬å†³ä¸èƒ½æŠŠæ‰€æœ‰å‚æ•°åˆå§‹åŒ–ä¸º0ï¼ŒåŒæ ·ä¹Ÿä¸èƒ½åˆå§‹åŒ–ä¸ºä»»ä½•ç›¸åŒçš„å€¼ï¼Œæˆ‘ä»¬å¿…é¡»â€œæ‰“ç ´å¯¹ç§°æ€§â€ï¼æˆ‘ä»¬å¸Œæœ›ä¸åŒçš„èŠ‚ç‚¹ï¼ˆç¥ç»å…ƒï¼‰å­¦ä¹ åˆ°ä¸åŒçš„å‚æ•°ï¼Œä½†æ˜¯å¦‚æœå‚æ•°ç›¸åŒä»¥åŠè¾“å‡ºå€¼éƒ½ä¸€æ ·ï¼Œä¸åŒçš„èŠ‚ç‚¹æ ¹æœ¬å­¦ä¹ ä¸åˆ°ä¸åŒçš„ç‰¹å¾ï¼Œè¿™æ ·å°±å¤±å»äº†ç½‘ç»œå­¦ä¹ ç‰¹å¾çš„æ„ä¹‰äº†ã€‚</p><p>â€‹è§£å†³ï¼ˆæˆ–è‡³å°‘å‡è½»ï¼‰ä¸Šè¿°é—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯è¿›è¡Œå‚æ•°åˆå§‹åŒ–ï¼Œè¿™æ˜¯é€šè¿‡éšæœºåˆå§‹åŒ–æ¥å®ç°çš„ï¼Œå› ä¸ºè¿™æ ·æ¢¯åº¦ä¼šä¸åŒï¼Œæ¯ä¸ªèŠ‚ç‚¹å°†å˜å¾—ä¸å…¶ä»–èŠ‚ç‚¹æ›´åŠ ä¸åŒï¼Œä»è€Œå®ç°å¤šæ ·åŒ–çš„ç‰¹å¾æå–ã€‚</p><p><strong>2ï¼‰é»˜è®¤éšæœºåˆå§‹åŒ–</strong></p><p>â€‹åœ¨å‰é¢çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ­£æ€åˆ†å¸ƒæ¥åˆå§‹åŒ–æƒé‡å€¼ã€‚å¦‚æœæˆ‘ä»¬ä¸æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œæ¡†æ¶å°†ä½¿ç”¨é»˜è®¤çš„éšæœºåˆå§‹åŒ–æ–¹æ³•ï¼Œå¯¹äºä¸­ç­‰éš¾åº¦çš„é—®é¢˜ï¼Œè¿™ç§æ–¹æ³•é€šå¸¸å¾ˆæœ‰æ•ˆã€‚é€šå¸¸æ¥è¯´ï¼Œ$b$ä¸ç”¨éšæœºåˆå§‹åŒ–ï¼Œå› ä¸º$w$éšæœºä¹‹åï¼Œå·²ç»æ‰“ç ´å¯¹ç§°ã€‚</p><p><strong>3ï¼‰Xavieråˆå§‹åŒ–</strong></p><p>â€‹è¦æè¿°â€œå·®å¼‚æ€§â€ï¼Œé¦–å…ˆå°±èƒ½æƒ³åˆ°æ¦‚ç‡ç»Ÿè®¡ä¸­çš„æ–¹å·®è¿™ä¸ªåŸºæœ¬ç»Ÿè®¡é‡ï¼Œä¸ºäº†ä½¿ç½‘ç»œä¸­çš„ä¿¡æ¯æ›´å¥½çš„æµåŠ¨ï¼Œæ¯ä¸€å±‚è¾“å‡ºçš„æ–¹å·®åº”è¯¥å°½é‡ç›¸ç­‰ã€‚è¿™å°±æ˜¯ç°åœ¨æ ‡å‡†ä¸”å®ç”¨çš„Xavieråˆå§‹åŒ–çš„åŸºç¡€ã€‚<br>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨å…¬å¼æ¥è§£è¯»ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/7163751298e8498ab850641790f1307f8636695442ad47429b7893c946390d5b" width="150" hegiht="" ></center><p>å…¶ä¸­$n$æ˜¯ä¸Šä¸€å±‚ç¥ç»å…ƒçš„æ•°é‡ã€‚å› æ­¤ï¼Œæ ¹æ®æ¦‚ç‡ç»Ÿè®¡é‡Œçš„ä¸¤ä¸ªéšæœºå˜é‡ä¹˜ç§¯çš„æ–¹å·®å±•å¼€ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f691ddd1dc114039ac7b48b644adbbb1fea2e2fd72a5465fba5087dd5b367cfa" width="650" hegiht="" ></center><p> $E(X)$è¡¨ç¤ºå˜é‡$X$çš„æœŸæœ›ã€‚å¯ä»¥å¾—åˆ°ï¼Œå¦‚æœ$E(xi)&#x3D;E(wi)&#x3D;0$ï¼Œé‚£ä¹ˆå°±æœ‰:</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4895a6a26c3b47908a5cc7ea9d0eeb89a1f8470b3bf44889bffc0ab24333f01a" width="290" hegiht="" ></center><p> å¦‚æœéšæœºå˜é‡$xi$å’Œ$wi$å†æ»¡è¶³ç‹¬ç«‹åŒåˆ†å¸ƒçš„è¯:</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/2fb25022dc284683b1818e56c52e2f07e9acccc8406b410c8b3abefbea183b29" width="450" hegiht="" ></center><p>â€‹æ ¹æ®æ–‡ç« ã€Šæ¿€æ´»å‡½æ•°ã€‹ï¼Œæ•´ä¸ªå¤§å‹å‰é¦ˆç¥ç»ç½‘ç»œæ— éå°±æ˜¯ä¸€ä¸ªè¶…çº§å¤§æ˜ å°„ï¼Œå°†åŸå§‹æ ·æœ¬ç¨³å®šçš„æ˜ å°„æˆå®ƒçš„ç±»åˆ«,ä¹Ÿå°±æ˜¯å°†æ ·æœ¬ç©ºé—´æ˜ å°„åˆ°ç±»åˆ«ç©ºé—´ã€‚</p><p>â€‹è¯•æƒ³ï¼Œå¦‚æœæ ·æœ¬ç©ºé—´ä¸ç±»åˆ«ç©ºé—´çš„åˆ†å¸ƒå·®å¼‚å¾ˆå¤§ã€è¿™é‡Œæ ·æœ¬ç©ºé—´å°±æ˜¯xï¼Œç±»åˆ«ç©ºé—´å°±æ˜¯zã€‘ï¼Œæ¯”å¦‚è¯´ç±»åˆ«ç©ºé—´ç‰¹åˆ«ç¨ å¯†ï¼Œæ ·æœ¬ç©ºé—´ç‰¹åˆ«ç¨€ç–è¾½é˜”ï¼Œé‚£ä¹ˆåœ¨ç±»åˆ«ç©ºé—´å¾—åˆ°çš„ç”¨äºåå‘ä¼ æ’­çš„è¯¯å·®ä¸¢ç»™æ ·æœ¬ç©ºé—´åç®€ç›´å˜å¾—å¾®ä¸è¶³é“ï¼Œä¹Ÿå°±æ˜¯ä¼šå¯¼è‡´æ¨¡å‹çš„è®­ç»ƒéå¸¸ç¼“æ…¢ã€‚</p><p>â€‹åŒæ ·ï¼Œå¦‚æœç±»åˆ«ç©ºé—´ç‰¹åˆ«ç¨€ç–ï¼Œæ ·æœ¬ç©ºé—´ç‰¹åˆ«ç¨ å¯†ï¼Œé‚£ä¹ˆåœ¨ç±»åˆ«ç©ºé—´ç®—å‡ºæ¥çš„è¯¯å·®ä¸¢ç»™æ ·æœ¬ç©ºé—´åç®€ç›´æ˜¯çˆ†ç‚¸èˆ¬çš„å­˜åœ¨ï¼Œå³å¯¼è‡´æ¨¡å‹å‘æ•£éœ‡è¡ï¼Œæ— æ³•æ”¶æ•›ã€‚</p><p>â€‹å› æ­¤ï¼Œæˆ‘ä»¬è¦è®©æ ·æœ¬ç©ºé—´ä¸ç±»åˆ«ç©ºé—´çš„åˆ†å¸ƒå·®å¼‚ï¼ˆå¯†åº¦å·®åˆ«ï¼‰ä¸è¦å¤ªå¤§ï¼Œä¹Ÿå°±æ˜¯è¦è®©å®ƒä»¬çš„<strong>æ–¹å·®å°½å¯èƒ½ç›¸ç­‰</strong>ã€‚</p><p>â€‹å› æ­¤ä¸ºäº†å¾—åˆ°$Var(z)&#x3D;Var(x)$ï¼Œåªèƒ½è®©$nÃ—Var(w)&#x3D;1$ï¼Œä¹Ÿå°±æ˜¯$Var(w)&#x3D;1&#x2F;n$ã€‚<br>åŒæ ·çš„é“ç†ï¼Œæ­£å‘ä¼ æ’­æ—¶æ˜¯ä»å‰å¾€åè®¡ç®—çš„ï¼Œå› æ­¤$Var(w)&#x3D;\frac{1} {n_{in} }$ï¼Œåå‘ä¼ æ’­æ—¶æ˜¯ä»åå¾€å‰è®¡ç®—çš„ï¼Œå› æ­¤$Var(w)&#x3D;\frac{1} {n_{out} }$ï¼Œç„¶è€Œ$n_{in}$å’Œ$n_{out}$å¾€å¾€ä¸ç›¸ç­‰ï¼Œå› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä»–ä»¬çš„å‡å€¼ï¼Œå³ä»¤ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d4936358413f4939af9a804e516d7b36fe65e32d33334343830721086c686d08" width="180" hegiht="" ></center><p>â€‹å…¶ä¸­$n_{in}$ä¸$n_{out}$åˆ†åˆ«æ˜¯è¾“å…¥å±‚ä¸è¾“å‡ºå±‚çš„ç¥ç»å…ƒä¸ªæ•°ã€‚é€šå¸¸ï¼ŒXavieråˆå§‹åŒ–ä»å‡å€¼ä¸ºé›¶ï¼Œæ–¹å·®$\sigma^2 &#x3D; \frac{2} {n_\mathrm{in} + n_\mathrm{out} }$çš„é«˜æ–¯åˆ†å¸ƒä¸­é‡‡æ ·æƒé‡ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨Xavierçš„ç›´è§‰æ¥é€‰æ‹©ä»å‡åŒ€åˆ†å¸ƒä¸­æŠ½å–æƒé‡æ—¶çš„æ–¹å·®ã€‚æ³¨æ„å‡åŒ€åˆ†å¸ƒ$U(-a, a)$çš„æ–¹å·®ä¸º$\frac{a^2} {3}$ã€‚å°†$\frac{a^2} {3}$ä»£å…¥åˆ°$\sigma^2$çš„æ¡ä»¶ä¸­ï¼Œå°†å¾—åˆ°åˆå§‹åŒ–å€¼åŸŸï¼š</p><p>$$<br>U\left(-\sqrt{\frac{6} {n_\mathrm{in} + n_\mathrm{out} }}, \sqrt{\frac{6} {n_\mathrm{in} + n_\mathrm{out} }}\right).<br>$$<br>â€‹å¾—åˆ°çš„è¿™ä¸ªç»“è®ºå°±æ˜¯Xavieråˆå§‹åŒ–æ–¹æ³•ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•ï¼Œä½†é™¤éä½ çš„ç½‘ç»œè®¾è®¡çš„æ˜æ˜¾ä¸æ»¡è¶³Xavierçš„å‡è®¾ï¼Œå¦åˆ™ä½¿ç”¨Xavierå¾€å¾€ä¸ä¼šå‡ºé”™ã€‚</p><p>ï¼ˆè¡¥å……ï¼šè‹¥ X æœä» [ a , b ] ä¸Šçš„å‡åŒ€åˆ†å¸ƒï¼Œåˆ™æ•°å­¦æœŸæœ› EX &#x3D;ï¼ˆa + bï¼‰&#x2F; 2 ï¼›æ–¹å·® DX &#x3D;ï¼ˆb - aï¼‰Â² &#x2F; 12 ï¼‰</p><h3 id="2-4-å°ç»“"><a href="#2-4-å°ç»“" class="headerlink" title="2.4 å°ç»“"></a>2.4 å°ç»“</h3><ul><li>ReLUæ¿€æ´»å‡½æ•°ç¼“è§£äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œè¿™æ ·å¯ä»¥åŠ é€Ÿæ”¶æ•›ã€‚</li><li>éšæœºåˆå§‹åŒ–æ˜¯ä¿è¯åœ¨è¿›è¡Œä¼˜åŒ–å‰æ‰“ç ´å¯¹ç§°æ€§çš„å…³é”®ã€‚</li></ul><h2 id="ä¸‰ã€é™ä½åå·®â€“ä¼˜åŒ–ç®—æ³•"><a href="#ä¸‰ã€é™ä½åå·®â€“ä¼˜åŒ–ç®—æ³•" class="headerlink" title="ä¸‰ã€é™ä½åå·®â€“ä¼˜åŒ–ç®—æ³•"></a>ä¸‰ã€é™ä½åå·®â€“ä¼˜åŒ–ç®—æ³•</h2><p>ä¼˜åŒ–é—®é¢˜æ˜¯æŒ‡åœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹ï¼Œåœ¨ä¼—å¤šæ–¹æ¡ˆæˆ–å‚æ•°å€¼ä¸­å¯»æ‰¾æœ€ä¼˜æ–¹æ¡ˆæˆ–å‚æ•°å€¼ï¼Œä»¥ä½¿å¾—æŸä¸ªæˆ–å¤šä¸ªåŠŸèƒ½æŒ‡æ ‡è¾¾åˆ°æœ€ä¼˜ï¼Œæˆ–ä½¿ç³»ç»Ÿçš„æŸäº›æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°æœ€å¤§å€¼æˆ–æœ€å°å€¼ã€‚</p><p>æ·±åº¦ç½‘ç»œæ¨¡å‹ä¼˜åŒ–ç®—æ³•ä¸»è¦ä¾æ®æœ€å°åŒ–æˆ–æœ€å¤§åŒ–ç›®æ ‡å‡½æ•°ï¼Œæ›´æ–°å¯¹æ¨¡å‹çš„è®­ç»ƒå’Œè¡¨è¾¾èƒ½åŠ›é€ æˆå½±å“çš„å‚æ•°ï¼Œä½¿è¿™äº›å‚æ•°è¾¾åˆ°æˆ–å°½å¯èƒ½æ¥è¿‘ç›®æ ‡å‡½æ•°çš„æœ€ä¼˜å€¼ï¼Œä»è€Œæé«˜æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ï¼Œè·å¾—é¢„æœŸçš„ç½‘ç»œæ¨¡å‹ã€‚å½“æ¨¡å‹å‡ºç°æ¬ æ‹Ÿåˆçš„çŠ¶å†µæ—¶ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´ä¼˜åŒ–ç®—æ³•æ¥æ”¹å–„æ¨¡å‹çš„è®­ç»ƒï¼Œé™ä½æ¨¡å‹çš„é¢„æµ‹åå·®ï¼Œæå‡æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p><blockquote><p>ç¥ç»ç½‘ç»œä¸­çš„ä¼˜åŒ–æ˜¯ä¸€ä¸ªæœ€å°å€¼çš„ä¼˜åŒ–ï¼Œä¼˜åŒ–çš„ç›®æ ‡å¯¹è±¡æ˜¯æŸå¤±ã€‚</p></blockquote><h3 id="ã€è®¾ç½®å­¦ä¹ ç‡ã€‘"><a href="#ã€è®¾ç½®å­¦ä¹ ç‡ã€‘" class="headerlink" title="ã€è®¾ç½®å­¦ä¹ ç‡ã€‘"></a><strong>ã€è®¾ç½®å­¦ä¹ ç‡ã€‘</strong></h3><p>åœ¨æ·±åº¦å­¦ä¹ ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­ï¼Œé€šå¸¸ä½¿ç”¨æ ‡å‡†çš„éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•æ›´æ–°å‚æ•°ï¼Œå­¦ä¹ ç‡ä»£è¡¨å‚æ•°æ›´æ–°å¹…åº¦çš„å¤§å°ï¼Œå³æ­¥é•¿ã€‚å½“å­¦ä¹ ç‡æœ€ä¼˜æ—¶ï¼Œæ¨¡å‹çš„æœ‰æ•ˆå®¹é‡æœ€å¤§ï¼Œæœ€ç»ˆèƒ½è¾¾åˆ°çš„æ•ˆæœæœ€å¥½ã€‚å­¦ä¹ ç‡å’Œæ·±åº¦å­¦ä¹ ä»»åŠ¡ç±»å‹æœ‰å…³ï¼Œåˆé€‚çš„å­¦ä¹ ç‡å¾€å¾€éœ€è¦å¤§é‡çš„å®éªŒå’Œè°ƒå‚ç»éªŒã€‚æ¢ç´¢å­¦ä¹ ç‡æœ€ä¼˜å€¼æ—¶éœ€è¦æ³¨æ„å¦‚ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li>å­¦ä¹ ç‡ä¸æ˜¯è¶Šå°è¶Šå¥½ã€‚å­¦ä¹ ç‡è¶Šå°ï¼ŒæŸå¤±å‡½æ•°çš„å˜åŒ–é€Ÿåº¦è¶Šæ…¢ï¼Œæ„å‘³ç€æˆ‘ä»¬éœ€è¦èŠ±è´¹æ›´é•¿çš„æ—¶é—´è¿›è¡Œæ”¶æ•›ï¼Œå¦‚å·¦å›¾æ‰€ç¤ºã€‚</li><li>å­¦ä¹ ç‡ä¸æ˜¯è¶Šå¤§è¶Šå¥½ã€‚åªæ ¹æ®æ€»æ ·æœ¬é›†ä¸­çš„ä¸€ä¸ªæ‰¹æ¬¡è®¡ç®—æ¢¯åº¦ï¼ŒæŠ½æ ·è¯¯å·®ä¼šå¯¼è‡´è®¡ç®—å‡ºçš„æ¢¯åº¦ä¸æ˜¯å…¨å±€æœ€ä¼˜çš„æ–¹å‘ï¼Œä¸”å­˜åœ¨æ³¢åŠ¨ã€‚åœ¨æ¥è¿‘æœ€ä¼˜è§£æ—¶ï¼Œè¿‡å¤§çš„å­¦ä¹ ç‡ä¼šå¯¼è‡´å‚æ•°åœ¨æœ€ä¼˜è§£é™„è¿‘éœ‡è¡ï¼ŒæŸå¤±éš¾ä»¥æ”¶æ•›ï¼Œå¦‚å³å›¾æ‰€ç¤ºã€‚</li></ul><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4266917491ee489e8ca0296565f1fe5edc2cb68d4a4546f3b8979e1200691bb5" width="550" hegiht="" ></center><center>å›¾1ï¼šä¸åŒå­¦ä¹ ç‡çš„å½±å“ </center><p>åœ¨è®­ç»ƒå‰ï¼Œæˆ‘ä»¬å¾€å¾€ä¸æ¸…æ¥šä¸€ä¸ªç‰¹å®šé—®é¢˜è®¾ç½®æˆæ€æ ·çš„å­¦ä¹ ç‡æ˜¯åˆç†çš„ï¼Œå› æ­¤åœ¨è®­ç»ƒæ—¶å¯ä»¥å°è¯•è°ƒå°æˆ–è°ƒå¤§ï¼Œé€šè¿‡è§‚å¯Ÿ$Loss$ä¸‹é™çš„æƒ…å†µåˆ¤æ–­åˆç†çš„å­¦ä¹ ç‡ã€‚<br>å­¦ä¹ ç‡æ˜¯ä¼˜åŒ–å™¨çš„ä¸€ä¸ªå‚æ•°ï¼Œè°ƒæ•´å­¦ä¹ ç‡çœ‹ä¼¼æ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ï¼Œéœ€è¦ä¸æ–­çš„è°ƒæ•´æ­¥é•¿ï¼Œè§‚å¯Ÿè®­ç»ƒæ—¶é—´å’Œ$Loss$çš„å˜åŒ–ã€‚ç»è¿‡ç ”ç©¶å‘˜çš„ä¸æ–­çš„å®éªŒï¼Œå½“å‰å·²ç»å½¢æˆäº†å››ç§æ¯”è¾ƒæˆç†Ÿçš„ä¼˜åŒ–ç®—æ³•ï¼šSGDã€Momentumã€AdaGradå’ŒAdamã€‚</p><h3 id="3-1-æ¢¯åº¦ä¸‹é™"><a href="#3-1-æ¢¯åº¦ä¸‹é™" class="headerlink" title="3.1 æ¢¯åº¦ä¸‹é™"></a>3.1 æ¢¯åº¦ä¸‹é™</h3><h4 id="3-1-1-æ¢¯åº¦ä¸‹é™"><a href="#3-1-1-æ¢¯åº¦ä¸‹é™" class="headerlink" title="3.1.1 æ¢¯åº¦ä¸‹é™"></a>3.1.1 æ¢¯åº¦ä¸‹é™</h4><p>ğŸ¨<code>sec_gd</code></p><p>ä¸ºä»€ä¹ˆæ¢¯åº¦ä¸‹é™ç®—æ³•å¯ä»¥ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Ÿä¸€ç»´ä¸­çš„æ¢¯åº¦ä¸‹é™ç»™æˆ‘ä»¬å¾ˆå¥½çš„å¯å‘ã€‚</p><p>æ¢¯åº¦ä¸‹é™æ³•æ˜¯ä¸€ä¸ªä¸€é˜¶æœ€ä¼˜åŒ–ç®—æ³•ï¼Œé€šå¸¸ä¹Ÿç§°ä¸ºæœ€é™¡ä¸‹é™æ³•ã€‚è¦ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°çš„å±€éƒ¨æå°å€¼ï¼Œå¿…é¡»æœå‘å‡½æ•°ä¸Šå½“å‰ç‚¹å¯¹åº”æ¢¯åº¦ï¼ˆæˆ–è€…æ˜¯è¿‘ä¼¼æ¢¯åº¦ï¼‰çš„åæ–¹å‘çš„è§„å®šæ­¥é•¿è·ç¦»ç‚¹è¿›è¡Œè¿­ä»£æœç´¢ã€‚å¦‚æœç›¸ååœ°å‘æ¢¯åº¦æ­£æ–¹å‘è¿­ä»£è¿›è¡Œæœç´¢ï¼Œåˆ™ä¼šæ¥è¿‘å‡½æ•°çš„å±€éƒ¨æå¤§å€¼ç‚¹ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d44fbf84938642e1a0acf335cc7f4271444efbdbad5d4ff58222e19482fef8df" width="450" hegiht="" ></center><center>å›¾2ï¼šæ¢¯åº¦ä¸‹é™æ³• </center><p><strong>ä¼˜åŒ–ç®—æ³•ä¸»è¦æ˜¯é’ˆå¯¹å‡¸å‡½æ•°</strong>ã€‚ä¸‹é¢å†æ¥å›é¡¾ä»¥ä¸‹æœ‰å…³ç†è®ºï¼š</p><ol><li>é›†åˆä¸­ä»»æ„ä¸¤ç‚¹çš„è¿çº¿éƒ½åœ¨é›†åˆä¸­ï¼Œä¸ºå‡¸é›†åˆã€‚åœ¨äºŒç»´ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡¸é›†è§†ä¸ºä¸€ä¸ªå½¢çŠ¶ï¼Œæ— è®ºç”¨ä»€ä¹ˆçº¿è¿æ¥é›†ä¸­çš„ä¸¤ä¸ªç‚¹ï¼Œéƒ½ä¸ä¼šåœ¨é›†å¤–ã€‚</li><li>äºŒé˜¶å¯¼æ•°éœ€å¤§äº0æ‰æ˜¯å‡¸å‡½æ•°ã€‚äºŒé˜¶å¯¼æ•°æ˜¯ä¸€é˜¶å¯¼æ•°çš„å¯¼æ•°ã€‚ä»åŸç†ä¸Šçœ‹ï¼Œå®ƒè¡¨ç¤ºä¸€é˜¶å¯¼æ•°çš„å˜åŒ–ç‡ï¼›ä»å›¾å½¢ä¸Šçœ‹ï¼Œå®ƒåæ˜ çš„æ˜¯å‡½æ•°å›¾åƒçš„å‡¹å‡¸æ€§ã€‚</li><li>ç›®æ ‡å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼Œå˜é‡æ‰€å±é›†åˆæ˜¯å‡¸é›†åˆçš„ä¼˜åŒ–é—®é¢˜ä¸ºå‡¸ä¼˜åŒ–é—®é¢˜ï¼Œå¯¹äºå‡¸ä¼˜åŒ–é—®é¢˜æ¥è¯´ï¼Œå±€éƒ¨æœ€ä¼˜è§£å°±æ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚</li></ol><p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€äº›å‡¸ä¼˜åŒ–ç†è®ºã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ¢¯åº¦ä¸‹é™æ³•è¢«åº”ç”¨äºå¯»æ‰¾ä»£ä»·å‡½æ•°çš„å…¨å±€æœ€å°å€¼ã€‚ä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å­˜åœ¨ä¸€ä¸ªå…¨å±€æœ€å°å€¼å‘¢ï¼Ÿå½“æœ€å°åŒ–å‡½æ•°æ—¶ï¼Œå‡¸å‡½æ•°å¯ç¡®ä¿å¦‚æœå­˜åœ¨æœ€å°å€¼ï¼Œåˆ™å®ƒå°†æ˜¯å…¨å±€æœ€å°å€¼ã€‚äºŒæ¬¡å‡½æ•°ï¼ˆä¾‹å¦‚çº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ï¼‰æ˜¯å¼ºå‡¸çš„ã€‚è¿™æ„å‘³ç€è¯¥å‡½æ•°å…·æœ‰å”¯ä¸€çš„æœ€å°å€¼ï¼Œè€Œè¯¥æœ€å°å€¼æ˜¯å…¨å±€æœ€å°å€¼ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬åº”ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿¡å®ƒå°†æ”¶æ•›äºæ­£ç¡®çš„æœ€å°å€¼ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾æœ€å°åŒ–çš„å‡½æ•°æ˜¯éå‡¸çš„ï¼Œåˆ™æ¢¯åº¦ä¸‹é™å¯èƒ½ä¼šæ”¶æ•›äºå±€éƒ¨æœ€å°å€¼è€Œä¸æ˜¯å…¨å±€æœ€å°å€¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨éå‡¸å‡½æ•°è¦å›°éš¾å¾—å¤šï¼Œè¿™å¾ˆé‡è¦ï¼Œå› ä¸ºè®¸å¤šæœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆæœ€è‘—åçš„æ˜¯ç¥ç»ç½‘ç»œï¼‰æ˜¯éå‡¸çš„ã€‚</p><h5 id="1ï¼‰ä¸€ç»´æ¢¯åº¦ä¸‹é™"><a href="#1ï¼‰ä¸€ç»´æ¢¯åº¦ä¸‹é™" class="headerlink" title="1ï¼‰ä¸€ç»´æ¢¯åº¦ä¸‹é™"></a><strong>1ï¼‰ä¸€ç»´æ¢¯åº¦ä¸‹é™</strong></h5><p>ä¸‹é¢æˆ‘ä»¬æ¥å±•ç¤ºå¦‚ä½•å®ç°æ¢¯åº¦ä¸‹é™ã€‚</p><p>ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬é€‰ç”¨ç›®æ ‡å‡½æ•°$f(x)&#x3D;x^2$ã€‚å°½ç®¡æˆ‘ä»¬çŸ¥é“$x&#x3D;0$æ—¶$f(x)$èƒ½å–å¾—æœ€å°å€¼ï¼Œä½†æˆ‘ä»¬ä»ç„¶ä½¿ç”¨è¿™ä¸ªç®€å•çš„å‡½æ•°æ¥è§‚å¯Ÿ$x$çš„å˜åŒ–ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> turtle <span class="keyword">import</span> color</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x</span>): <span class="comment"># ç›®æ ‡å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> x ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f_grad</span>(<span class="params">x</span>): <span class="comment"># ç›®æ ‡å‡½æ•°çš„æ¢¯åº¦ï¼ˆå¯¼æ•°ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * x</span><br></pre></td></tr></table></figure><p><strong>æ¢¯åº¦ä¸‹é™ä¸‰æ­¥èµ°</strong>ï¼š</p><ul><li>é€‰å®šåˆå§‹$X_0$</li><li>å¯¹$t&#x3D;1,2,3â€¦T$</li><li>æ±‚æ¢¯åº¦ï¼š$X_t &#x3D; X_{t-1} - \eta fâ€™(X_{t-1})$</li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨$x&#x3D;10$ä½œä¸ºåˆå§‹å€¼ï¼Œå¹¶å‡è®¾$\eta&#x3D;0.2$ã€‚<br>ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•è¿­ä»£$x$å…±10æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ$x$çš„å€¼æœ€ç»ˆå°†æ¥è¿‘æœ€ä¼˜è§£ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">gd</span>(<span class="params">eta, f_grad</span>):</span><br><span class="line">    x = <span class="number">10.0</span></span><br><span class="line">    results = [x]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        x -= eta * f_grad(x)</span><br><span class="line">        results.append(<span class="built_in">float</span>(x))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;epoch 10, x: %f&#x27;</span>%x)</span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line">results = gd(<span class="number">0.2</span>, f_grad)<span class="comment"># æ­¤æ—¶å­¦ä¹ ç‡ä¸º0.02ï¼Œè¿™æ˜¯ç»è¿‡å¤šæ¬¡å¾—å‡ºæ¥çš„é€‚ä¸­çš„å€¼ã€‚</span></span><br><span class="line"><span class="built_in">print</span>(results)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 10, x: 0.060466</span></span><br><span class="line"><span class="string">[10.0, 6.0, 3.5999999999999996, 2.1599999999999997, 1.2959999999999998, 0.7775999999999998, 0.46655999999999986, 0.2799359999999999, 0.16796159999999993, 0.10077695999999996, 0.06046617599999997]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>å¯¹è¿›è¡Œ$x$ä¼˜åŒ–çš„è¿‡ç¨‹å¯ä»¥ç»˜åˆ¶å¦‚ä¸‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">show_trace</span>(<span class="params">results, f</span>):</span><br><span class="line">    n = <span class="built_in">max</span>(<span class="built_in">abs</span>(<span class="built_in">min</span>(results)), <span class="built_in">abs</span>(<span class="built_in">max</span>(results)))</span><br><span class="line">    <span class="comment">#print(n)</span></span><br><span class="line">    f_line = paddle.arange(-n, n, <span class="number">0.01</span>, dtype=paddle.float32)</span><br><span class="line">    tensor_list = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> f_line:</span><br><span class="line">        tensor_list.append(f(x))</span><br><span class="line">        <span class="comment">#print(tensor_list)</span></span><br><span class="line">    final_tensor=paddle.stack(tensor_list, axis=<span class="number">0</span>)</span><br><span class="line">    <span class="comment">#print(final_tensor)</span></span><br><span class="line">    ppl.set_figsize()</span><br><span class="line">    ppl.plot([f_line, results], </span><br><span class="line">            [final_tensor, [f(x) <span class="keyword">for</span> x <span class="keyword">in</span> results]], </span><br><span class="line">            <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;f(x)&#x27;</span>, fmts=[<span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;-o&#x27;</span>])</span><br><span class="line"></span><br><span class="line">show_trace(results, f)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/10.svg" alt="svg"></p><blockquote><h5 id="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‘ç°æ¢¯åº¦ä¸‹é™è¶Šæ¥è¶Šæ…¢ï¼ŒåŸå› æ˜¯æ–œç‡è¶Šæ¥è¶Šå°ï¼Œæ¢¯åº¦-å­¦ä¹ ç‡çš„å€¼ä¹Ÿå°±è¶Šæ¥è¶Šå°ï¼Œæ›´æ–°çš„è¶Šæ¥è¶Šæ…¢ã€‚"><a href="#å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‘ç°æ¢¯åº¦ä¸‹é™è¶Šæ¥è¶Šæ…¢ï¼ŒåŸå› æ˜¯æ–œç‡è¶Šæ¥è¶Šå°ï¼Œæ¢¯åº¦-å­¦ä¹ ç‡çš„å€¼ä¹Ÿå°±è¶Šæ¥è¶Šå°ï¼Œæ›´æ–°çš„è¶Šæ¥è¶Šæ…¢ã€‚" class="headerlink" title="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‘ç°æ¢¯åº¦ä¸‹é™è¶Šæ¥è¶Šæ…¢ï¼ŒåŸå› æ˜¯æ–œç‡è¶Šæ¥è¶Šå°ï¼Œæ¢¯åº¦*å­¦ä¹ ç‡çš„å€¼ä¹Ÿå°±è¶Šæ¥è¶Šå°ï¼Œæ›´æ–°çš„è¶Šæ¥è¶Šæ…¢ã€‚"></a>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‘ç°æ¢¯åº¦ä¸‹é™è¶Šæ¥è¶Šæ…¢ï¼ŒåŸå› æ˜¯æ–œç‡è¶Šæ¥è¶Šå°ï¼Œ<code>æ¢¯åº¦*å­¦ä¹ ç‡</code>çš„å€¼ä¹Ÿå°±è¶Šæ¥è¶Šå°ï¼Œæ›´æ–°çš„è¶Šæ¥è¶Šæ…¢ã€‚</h5><h5 id="å­¦ä¹ ç‡é€‚ä¸­ï¼Œ10è½®åï¼Œå¾—åˆ°çš„xå€¼ä¸º0-06ï¼Œå·²ç»éå¸¸æ¥è¿‘æœ€ä¼˜è§£äº†"><a href="#å­¦ä¹ ç‡é€‚ä¸­ï¼Œ10è½®åï¼Œå¾—åˆ°çš„xå€¼ä¸º0-06ï¼Œå·²ç»éå¸¸æ¥è¿‘æœ€ä¼˜è§£äº†" class="headerlink" title="å­¦ä¹ ç‡é€‚ä¸­ï¼Œ10è½®åï¼Œå¾—åˆ°çš„xå€¼ä¸º0.06ï¼Œå·²ç»éå¸¸æ¥è¿‘æœ€ä¼˜è§£äº†"></a>å­¦ä¹ ç‡é€‚ä¸­ï¼Œ10è½®åï¼Œå¾—åˆ°çš„xå€¼ä¸º0.06ï¼Œå·²ç»éå¸¸æ¥è¿‘æœ€ä¼˜è§£äº†</h5></blockquote><p>æˆ‘ä»¬å¯ä»¥å°è¯•è°ƒæ•´å­¦ä¹ ç‡çš„å¤§å°æ¥æŸ¥çœ‹å®ƒå¯¹äºæ¨¡å‹ä¼˜åŒ–çš„å½±å“ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘åŒä¸€ä¼˜åŒ–é—®é¢˜ä¸­$\eta &#x3D; 0.05$çš„è¿›åº¦ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œå°½ç®¡ç»è¿‡äº†10ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬ä»ç„¶ç¦»æœ€ä¼˜è§£å¾ˆè¿œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show_trace(gd(<span class="number">0.05</span>, f_grad), f)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 10, x: 3.486784</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/11.svg" alt="svg"></p><blockquote><h5 id="å¦‚ä¸Šå›¾æ‰€ç¤º-å­¦ä¹ ç‡å¤ªå°ï¼Œæ›´æ–°çš„å¹…åº¦ä¹Ÿå°±å˜å°ï¼Œç»è¿‡è½®è¿‡åï¼Œxå€¼ä¸º3-48ï¼Œä¸æœ€ä¼˜è§£ç›¸å·®è¾ƒè¿œã€‚"><a href="#å¦‚ä¸Šå›¾æ‰€ç¤º-å­¦ä¹ ç‡å¤ªå°ï¼Œæ›´æ–°çš„å¹…åº¦ä¹Ÿå°±å˜å°ï¼Œç»è¿‡è½®è¿‡åï¼Œxå€¼ä¸º3-48ï¼Œä¸æœ€ä¼˜è§£ç›¸å·®è¾ƒè¿œã€‚" class="headerlink" title="å¦‚ä¸Šå›¾æ‰€ç¤º,å­¦ä¹ ç‡å¤ªå°ï¼Œæ›´æ–°çš„å¹…åº¦ä¹Ÿå°±å˜å°ï¼Œç»è¿‡è½®è¿‡åï¼Œxå€¼ä¸º3.48ï¼Œä¸æœ€ä¼˜è§£ç›¸å·®è¾ƒè¿œã€‚"></a>å¦‚ä¸Šå›¾æ‰€ç¤º,å­¦ä¹ ç‡å¤ªå°ï¼Œæ›´æ–°çš„å¹…åº¦ä¹Ÿå°±å˜å°ï¼Œç»è¿‡è½®è¿‡åï¼Œxå€¼ä¸º3.48ï¼Œä¸æœ€ä¼˜è§£ç›¸å·®è¾ƒè¿œã€‚</h5></blockquote><p>ç›¸åï¼Œå­¦ä¹ ç‡ä¹Ÿä¸å¯è¿‡å¤§ï¼Œè¿‡å¤§å¯èƒ½åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­é”™è¿‡æ¢¯åº¦ä¸º0çš„æœ€ä¼˜ç‚¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show_trace(gd(<span class="number">1.1</span>, f_grad), f)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 10, x: 61.917364</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/12.svg" alt="svg"></p><blockquote><h5 id="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œåœ¨æœ€ä¼˜è§£é™„è¿‘æŒ¯è¡ï¼Œè¾¾ä¸åˆ°æœ€ä¼˜è§£ã€‚"><a href="#å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œåœ¨æœ€ä¼˜è§£é™„è¿‘æŒ¯è¡ï¼Œè¾¾ä¸åˆ°æœ€ä¼˜è§£ã€‚" class="headerlink" title="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œåœ¨æœ€ä¼˜è§£é™„è¿‘æŒ¯è¡ï¼Œè¾¾ä¸åˆ°æœ€ä¼˜è§£ã€‚"></a>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œåœ¨æœ€ä¼˜è§£é™„è¿‘æŒ¯è¡ï¼Œè¾¾ä¸åˆ°æœ€ä¼˜è§£ã€‚</h5></blockquote><h5 id="2ï¼‰å±€éƒ¨æœ€å°å€¼"><a href="#2ï¼‰å±€éƒ¨æœ€å°å€¼" class="headerlink" title="2ï¼‰å±€éƒ¨æœ€å°å€¼"></a><strong>2ï¼‰å±€éƒ¨æœ€å°å€¼</strong></h5><p>ä¸ºäº†æ¼”ç¤ºéå‡¸å‡½æ•°çš„æ¢¯åº¦ä¸‹é™ï¼Œè€ƒè™‘å‡½æ•°$f(x) &#x3D; x \cdot \cos(cx)$ï¼Œå…¶ä¸­$c$ä¸ºæŸå¸¸æ•°ã€‚è¿™ä¸ªå‡½æ•°æœ‰æ— ç©·å¤šä¸ªå±€éƒ¨æœ€å°å€¼ã€‚æ ¹æ®æˆ‘ä»¬é€‰æ‹©çš„å­¦ä¹ ç‡ï¼Œæˆ‘ä»¬æœ€ç»ˆå¯èƒ½åªä¼šå¾—åˆ°è®¸å¤šè§£çš„ä¸€ä¸ªã€‚ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†ï¼ˆä¸åˆ‡å®é™…çš„ï¼‰é«˜å­¦ä¹ ç‡å¦‚ä½•å¯¼è‡´è¾ƒå·®çš„å±€éƒ¨æœ€å°å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å±€éƒ¨æœ€å°å€¼</span></span><br><span class="line">c = paddle.to_tensor(<span class="number">0.15</span> * np.pi) <span class="comment"># 0.15Ï€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * paddle.cos(c * x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f_grad</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> paddle.cos(c * x) - c * x * paddle.sin(c * x)</span><br></pre></td></tr></table></figure><p>å¯¹è¿›è¡Œ$x$ä¼˜åŒ–çš„è¿‡ç¨‹å¯ä»¥ç»˜åˆ¶å¦‚ä¸‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">show_trace1</span>(<span class="params">results, f</span>):</span><br><span class="line">    n = <span class="built_in">max</span>(<span class="built_in">abs</span>(<span class="built_in">min</span>(results)), <span class="built_in">abs</span>(<span class="built_in">max</span>(results)))</span><br><span class="line">    <span class="comment">#print(n)</span></span><br><span class="line">    f_line = paddle.arange(-n, n, <span class="number">0.01</span>, dtype=paddle.float32)</span><br><span class="line">    fx_in_fline = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> f_line:</span><br><span class="line">        fx_in_fline.append(f(x))</span><br><span class="line">        <span class="comment">#print(fx_in_fline)</span></span><br><span class="line">    fx_in_fline = paddle.stack(fx_in_fline, axis=<span class="number">0</span>)</span><br><span class="line">    fx_in_results = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> results:</span><br><span class="line">        fx_in_results.append(f(x))</span><br><span class="line">    fx_in_results = paddle.stack(fx_in_results, axis=<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    ppl.set_figsize()</span><br><span class="line">    ppl.plot([f_line, results], </span><br><span class="line">            [fx_in_fline, fx_in_results], </span><br><span class="line">            <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;f(x)&#x27;</span>, fmts=[<span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;-o&#x27;</span>])</span><br><span class="line"></span><br><span class="line">show_trace1(gd(<span class="number">2</span>, f_grad), f)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 10, x: -1.528165</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/13.svg" alt="svg"></p><blockquote><h5 id="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œå¯¼è‡´ç¬¬ä¸€æ¬¡çš„æ¢¯åº¦æ›´æ–°ï¼Œç›´æ¥è·³è¿‡äº†æœ€ä¼˜è§£ï¼Œç„¶åç»§ç»­æ›´æ–°ï¼Œæœ€ç»ˆæ‰¾åˆ°çš„æ˜¯å±€éƒ¨æœ€å°å€¼ã€‚"><a href="#å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œå¯¼è‡´ç¬¬ä¸€æ¬¡çš„æ¢¯åº¦æ›´æ–°ï¼Œç›´æ¥è·³è¿‡äº†æœ€ä¼˜è§£ï¼Œç„¶åç»§ç»­æ›´æ–°ï¼Œæœ€ç»ˆæ‰¾åˆ°çš„æ˜¯å±€éƒ¨æœ€å°å€¼ã€‚" class="headerlink" title="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œå¯¼è‡´ç¬¬ä¸€æ¬¡çš„æ¢¯åº¦æ›´æ–°ï¼Œç›´æ¥è·³è¿‡äº†æœ€ä¼˜è§£ï¼Œç„¶åç»§ç»­æ›´æ–°ï¼Œæœ€ç»ˆæ‰¾åˆ°çš„æ˜¯å±€éƒ¨æœ€å°å€¼ã€‚"></a>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå­¦ä¹ ç‡è¿‡é«˜ï¼Œå¯¼è‡´ç¬¬ä¸€æ¬¡çš„æ¢¯åº¦æ›´æ–°ï¼Œç›´æ¥è·³è¿‡äº†æœ€ä¼˜è§£ï¼Œç„¶åç»§ç»­æ›´æ–°ï¼Œæœ€ç»ˆæ‰¾åˆ°çš„æ˜¯å±€éƒ¨æœ€å°å€¼ã€‚</h5></blockquote><h5 id="3ï¼‰å¤šå…ƒæ¢¯åº¦ä¸‹é™"><a href="#3ï¼‰å¤šå…ƒæ¢¯åº¦ä¸‹é™" class="headerlink" title="3ï¼‰å¤šå…ƒæ¢¯åº¦ä¸‹é™"></a><strong>3ï¼‰å¤šå…ƒæ¢¯åº¦ä¸‹é™</strong></h5><p>æˆ‘ä»¬æ„é€ ä¸€ä¸ªç›®æ ‡å‡½æ•°$f(\mathbf{x})&#x3D;x_1^2+2x_2^2$ï¼Œå¹¶æœ‰äºŒç»´å‘é‡$\mathbf{x} &#x3D; [x_1, x_2]^\top$ï¼ˆåˆ—å‘é‡ï¼‰ä½œä¸ºè¾“å…¥ï¼Œæ ‡é‡ä½œä¸ºè¾“å‡ºã€‚æ¢¯åº¦ç”±$\nabla f(\mathbf{x}) &#x3D; [2x_1, 4x_2]^\top$ç»™å‡ºã€‚æˆ‘ä»¬å°†ä»åˆå§‹ä½ç½®$[-5, -2]$é€šè¿‡æ¢¯åº¦ä¸‹é™è§‚å¯Ÿ$\mathbf{x}$çš„è½¨è¿¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;å¤šå…ƒæ¢¯åº¦ä¸‹é™&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_2d</span>(<span class="params">trainer, steps=<span class="number">20</span>, f_grad=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç”¨å®šåˆ¶çš„è®­ç»ƒæœºä¼˜åŒ–2Dç›®æ ‡å‡½æ•°&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># s1 å’Œ s2 æ˜¯ç¨åå°†ä½¿ç”¨çš„å†…éƒ¨çŠ¶æ€å˜é‡</span></span><br><span class="line">    <span class="comment"># çŠ¶æ€å˜é‡ï¼šä¸€ä¸ªä¸å¯è®­ç»ƒçš„å˜é‡ï¼Œä¸ä¼šè¢«ä¼˜åŒ–å™¨æ›´æ–°ï¼Œä½†åœ¨è¯„ä¼°æˆ–é¢„æµ‹é˜¶æ®µå¯èƒ½æ˜¯å¿…è¦çš„ã€‚</span></span><br><span class="line">    <span class="comment"># æ¯”å¦‚ BatchNorm ä¸­çš„å‡å€¼å’Œæ–¹å·®ã€‚</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œè¿­ä»£å‘¨æœŸæˆ‘ä»¬å®šä¹‰ä¸º20ï¼Œå¯ä»¥ä¿®æ”¹</span></span><br><span class="line">    x1, x2, s1, s2 = -<span class="number">5</span>, -<span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    results = [(x1, x2)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(steps):</span><br><span class="line">        <span class="keyword">if</span> f_grad: <span class="comment"># å¦‚å­˜åœ¨æ¢¯åº¦ï¼Œåˆ™éœ€è¦æ›´æ–°æ¢¯åº¦</span></span><br><span class="line">            x1, x2, s1, s2 = trainer(x1, x2, s1, s2, f_grad)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            x1, x2, s1, s2 = trainer(x1, x2, s1, s2)</span><br><span class="line">        results.append((x1, x2)) <span class="comment"># è·å–x1å’Œx2çš„åæ ‡</span></span><br><span class="line">        <span class="comment">#print(f&#x27;epoch &#123;i+1&#125;, x1:&#123;float(x1): f&#125;, x2: &#123;float(x2):f&#125;&#x27;)</span></span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_trace_2d</span>(<span class="params">f, results</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ˜¾ç¤ºä¼˜åŒ–è¿‡ç¨‹ä¸­2Då˜é‡çš„è½¨è¿¹&quot;&quot;&quot;</span></span><br><span class="line">    ppl.set_figsize()</span><br><span class="line">    ppl.plt.plot(*<span class="built_in">zip</span>(*results), <span class="string">&#x27;-o&#x27;</span>, color=<span class="string">&#x27;#ff7f0e&#x27;</span>)</span><br><span class="line">    x1, x2 = paddle.meshgrid( <span class="comment"># è¾“å…¥å˜é‡ä¸º k ä¸ªä¸€ç»´å¼ é‡, è¾“å‡º k ä¸ª k ç»´å¼ é‡</span></span><br><span class="line">        <span class="comment"># paddle.arange(start=0, end=None, step=1)</span></span><br><span class="line">        paddle.arange(-<span class="number">5.5</span>, <span class="number">1.0</span>, <span class="number">0.1</span>, dtype=paddle.float32),</span><br><span class="line">        paddle.arange(-<span class="number">3.0</span>, <span class="number">1.0</span>, <span class="number">0.1</span>, dtype=paddle.float32)</span><br><span class="line">        )</span><br><span class="line">    <span class="comment"># plt.contouræ˜¯pythonä¸­ç”¨äºç”»ç­‰é«˜çº¿çš„å‡½æ•°</span></span><br><span class="line">    ppl.plt.contour(x1, x2, f(x1, x2), colors=<span class="string">&#x27;#1f77b4&#x27;</span>)</span><br><span class="line">    ppl.plt.xlabel(<span class="string">&#x27;x1&#x27;</span>)</span><br><span class="line">    ppl.plt.ylabel(<span class="string">&#x27;x2&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è§‚å¯Ÿå­¦ä¹ ç‡$\eta &#x3D; 0.05$æ—¶ä¼˜åŒ–å˜é‡$\mathbf{x}$çš„è½¨è¿¹ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡20æ­¥ä¹‹åï¼Œ$\mathbf{x}$çš„å€¼æ¥è¿‘å…¶ä½äº$[0, 0]$çš„æœ€å°å€¼ã€‚è™½ç„¶è¿›å±•ç›¸å½“é¡ºåˆ©ï¼Œä½†ç›¸å½“ç¼“æ…¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f_2d</span>(<span class="params">x1, x2</span>): <span class="comment"># ç›®æ ‡å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> x1 ** <span class="number">2</span> + <span class="number">2</span> * x2 ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f_2d_grad</span>(<span class="params">x1, x2</span>): <span class="comment"># ç›®æ ‡å‡½æ•°çš„æ¢¯åº¦</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="number">2</span> * x1, <span class="number">4</span> * x2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gd_2d</span>(<span class="params">x1, x2, s1, s2, f_grad</span>):</span><br><span class="line">    g1, g2 = f_grad(x1, x2)</span><br><span class="line">    <span class="keyword">return</span> (x1 - eta * g1, x2 - eta * g2, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">eta = <span class="number">0.05</span><span class="comment"># å­¦ä¹ ç‡</span></span><br><span class="line">show_trace_2d(f_2d, train_2d(gd_2d, f_grad=f_2d_grad))</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/14.svg" alt="svg"></p><h4 id="3-1-2-éšæœºæ¢¯åº¦ä¸‹é™"><a href="#3-1-2-éšæœºæ¢¯åº¦ä¸‹é™" class="headerlink" title="3.1.2 éšæœºæ¢¯åº¦ä¸‹é™"></a>3.1.2 éšæœºæ¢¯åº¦ä¸‹é™</h4><p>ğŸ¨<code>sec_sgd</code></p><p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œç›®æ ‡å‡½æ•°é€šå¸¸æ˜¯è®­ç»ƒæ•°æ®é›†ä¸­æ¯ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°çš„å¹³å‡å€¼ã€‚ç»™å®š$n$ä¸ªæ ·æœ¬çš„è®­ç»ƒæ•°æ®é›†ï¼Œæˆ‘ä»¬å‡è®¾$f_i(\mathbf{x})$æ˜¯å…³äºç´¢å¼•$i$çš„è®­ç»ƒæ ·æœ¬çš„æŸå¤±å‡½æ•°ï¼Œå…¶ä¸­$\mathbf{x}$æ˜¯å‚æ•°å‘é‡ã€‚ç„¶åæˆ‘ä»¬å¾—åˆ°ç›®æ ‡å‡½æ•°</p><p>$$<br>f(\mathbf{x}) &#x3D; \frac{1} {n} \sum_{i &#x3D; 1}^n f_i(\mathbf{x}).<br>$$<br>$\mathbf{x}$çš„ç›®æ ‡å‡½æ•°çš„æ¢¯åº¦è®¡ç®—ä¸º</p><p>$$<br>\nabla f(\mathbf{x}) &#x3D; \frac{1} {n} \sum_{i &#x3D; 1}^n \nabla f_i(\mathbf{x}).<br>$$<br>å¦‚æœä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼Œåˆ™æ¯ä¸ªè‡ªå˜é‡è¿­ä»£çš„è®¡ç®—ä»£ä»·ä¸º$\mathcal{O}(n)$ï¼Œå®ƒéš$n$çº¿æ€§å¢é•¿ã€‚å› æ­¤ï¼Œå½“è®­ç»ƒæ•°æ®é›†è¾ƒå¤§æ—¶ï¼Œæ¯æ¬¡è¿­ä»£çš„æ¢¯åº¦ä¸‹é™è®¡ç®—ä»£ä»·å°†è¾ƒé«˜ã€‚éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆSGDï¼‰å¯é™ä½æ¯æ¬¡è¿­ä»£æ—¶çš„è®¡ç®—ä»£ä»·ã€‚åœ¨éšæœºæ¢¯åº¦ä¸‹é™çš„æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å¯¹æ•°æ®æ ·æœ¬éšæœºå‡åŒ€é‡‡æ ·ä¸€ä¸ªç´¢å¼•$i$ï¼Œå…¶ä¸­$i\in{1,\ldots, n}$ï¼Œå¹¶è®¡ç®—æ¢¯åº¦$\nabla f_i(\mathbf{x})$ä»¥æ›´æ–°$\mathbf{x}$ï¼š</p><p>$$<br>\mathbf{x} \leftarrow \mathbf{x} - \eta \nabla f_i(\mathbf{x}),<br>$$<br>å…¶ä¸­$\eta$æ˜¯å­¦ä¹ ç‡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡è¿­ä»£çš„è®¡ç®—å¼€é”€é™åˆ°äº†å¸¸æ•°çº§ï¼Œè€Œä¸”éšæœºæ¢¯åº¦æ˜¯å¯¹æ¢¯åº¦çš„æ— åä¼°è®¡ï¼Œå³ä½¿ç”¨éšæœºæ¢¯åº¦æ˜¯å¯¹æ¢¯åº¦çš„ä¸€ä¸ªè‰¯å¥½ä¼°è®¡ã€‚</p><ul><li>æ¢¯åº¦ä¸‹é™æ³•æ˜¯åˆå§‹åŒ–æ¨¡å‹å‚æ•°ï¼Œç„¶åè®¡ç®—æ‰€æœ‰æ ·æœ¬åœ¨æœ¬æ¨¡å‹å‚æ•°ä¸‹çš„è¾“å‡ºå’Œæ¢¯åº¦ï¼Œå†æ±‚æ¢¯åº¦çš„å‡å€¼ï¼Œå»æ›´æ–°ç½‘ç»œå‚æ•°ã€‚åœ¨ä¸‹ä¸€æ¬¡è¿­ä»£ï¼Œä»ç„¶è®¡ç®—å…¨éƒ¨æ ·æœ¬ã€‚</li><li>éšæœºæ¢¯åº¦ä¸‹é™æ³•æ˜¯åˆå§‹åŒ–æ¨¡å‹å‚æ•°ï¼Œç„¶åéšæœºé€‰å‡ºä¸€ä¸ªæ ·æœ¬ï¼Œè®¡ç®—è¯¥æ ·æœ¬åœ¨å½“å‰å‚æ•°ä¸‹çš„è¾“å‡ºå’Œæ¢¯åº¦ï¼Œå»æ›´æ–°ä¸€æ¬¡æ¨¡å‹å‚æ•°ã€‚åœ¨ä¸‹ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œå†éšæœºé€‰æ‹©ä¸€ä¸ªæ ·æœ¬ï¼Œè®¡ç®—è¾“å‡ºå’Œæ¢¯åº¦å†æ›´æ–°æ¨¡å‹å‚æ•°ã€‚</li></ul><p> ç”±äºéšæœºæ¢¯åº¦ä¸‹é™å¯¹æ¯ä¸ªæ ·æœ¬éƒ½è¿›è¡Œæ›´æ–°ï¼Œä½¿å¾—å‚æ•°çš„å˜åŒ–è¿‡äºé¢‘ç¹ï¼Œå‚æ•°ä¹‹é—´çš„æ–¹å·®åé«˜ï¼Œæ¯æ¬¡æ›´æ–°å¯èƒ½å¹¶ä¸ä¼šæŒ‰ç…§æ­£ç¡®çš„æ–¹å‘è¿›è¡Œï¼Œå› æ­¤å¯ä»¥å¸¦æ¥ä¼˜åŒ–æ³¢åŠ¨ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/8e183f5ad03545fdb5725146f5daaecbd9e092f889a9422d9ddaeb84f4a2bdc4" width="450" hegiht="" ></center><center>å›¾3ï¼šSGDæ…åŠ¨ </center> <p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†æŠŠå®ƒä¸æ¢¯åº¦ä¸‹é™è¿›è¡Œæ¯”è¾ƒï¼Œæ–¹æ³•æ˜¯å‘æ¢¯åº¦æ·»åŠ å‡å€¼ä¸º0ã€æ–¹å·®ä¸º1çš„éšæœºå™ªå£°ï¼Œä»¥æ¨¡æ‹Ÿéšæœºæ¢¯åº¦ä¸‹é™ã€‚ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x1, x2</span>): <span class="comment"># ç›®æ ‡å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> x1 ** <span class="number">2</span> + <span class="number">2</span> * x2 ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f_grad</span>(<span class="params">x1, x2</span>): <span class="comment"># ç›®æ ‡å‡½æ•°çš„æ¢¯åº¦</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * x1, <span class="number">4</span> * x2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sgd</span>(<span class="params">x1, x2, s1, s2, f_grad</span>):</span><br><span class="line">    g1, g2 = f_grad(x1, x2)</span><br><span class="line">    <span class="comment"># paddle.normal(mean=0.0, std=1.0, shape=None)</span></span><br><span class="line">    g1 += paddle.normal(<span class="number">0.0</span>, <span class="number">1</span>, (<span class="number">1</span>, ))</span><br><span class="line">    g2 += paddle.normal(<span class="number">0.0</span>, <span class="number">1</span>, (<span class="number">1</span>, ))</span><br><span class="line">    eta_t = eta * lr()</span><br><span class="line">    <span class="keyword">return</span> (x1 - eta_t * g1, x2 - eta_t * g2, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">constant_lr</span>(): <span class="comment"># å¸¸é‡lrï¼šå­¦ä¹ ç‡è°ƒåº¦çš„ä»»ä½•åŠŸèƒ½éƒ½å¤„äºä¼‘çœ çŠ¶æ€ï¼ˆä½¿ç”¨å¸¸é‡çš„å­¦ä¹ ç‡ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">eta = <span class="number">0.1</span></span><br><span class="line">lr = constant_lr <span class="comment"># eta*å¸¸é‡lr</span></span><br><span class="line">ppl.show_trace_2d(f, ppl.train_2d(sgd, steps=<span class="number">500</span>, f_grad=f_grad))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 500, x1:-0.085716, x2: -0.015954</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/15.svg" alt="svg"></p><p>æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œéšæœºæ¢¯åº¦ä¸‹é™ä¸­å˜é‡çš„è½¨è¿¹æ¯”æˆ‘ä»¬åœ¨ä¹‹å‰æ¢¯åº¦ä¸‹é™ä¸­è§‚å¯Ÿåˆ°çš„è½¨è¿¹å˜ˆæ‚å¾—å¤šã€‚è¿™æ˜¯ç”±äºæ¢¯åº¦çš„éšæœºæ€§è´¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿æˆ‘ä»¬æ¥è¿‘æœ€å°å€¼ï¼Œæˆ‘ä»¬ä»ç„¶å—åˆ°é€šè¿‡$\eta \nabla f_i(\mathbf{x})$çš„ç¬é—´æ¢¯åº¦æ‰€æ³¨å…¥çš„ä¸ç¡®å®šæ€§çš„å½±å“ã€‚å³ä½¿ç»è¿‡50æ¬¡è¿­ä»£ï¼Œè´¨é‡ä»ç„¶ä¸é‚£ä¹ˆå¥½ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œç»è¿‡é¢å¤–çš„æ­¥éª¤ï¼Œå®ƒä¸ä¼šå¾—åˆ°æ”¹å–„ã€‚</p><h4 id="3-1-3-å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™"><a href="#3-1-3-å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™" class="headerlink" title="3.1.3 å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™"></a>3.1.3 å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™</h4><p>ğŸ¨<code>sec_minibatch_sgd</code></p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åœ¨åŸºäºæ¢¯åº¦çš„å­¦ä¹ æ–¹æ³•ä¸­é‡åˆ°äº†ä¸¤ä¸ªæç«¯æƒ…å†µï¼š</p><ul><li>åœ¨<code>sec_gd</code>ä¸­ä½¿ç”¨æ•´ä¸ªè®­ç»ƒæ•°æ®é›†æ¥è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°å‚æ•°ï¼Œå› æ­¤å®ƒæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º<strong>æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆbatch gradient descentï¼‰</strong>ã€‚</li><li>åœ¨<code>sec_sgd</code>åœ¨æ¯æ¬¡è¿­ä»£ä¸­åªéšæœºé‡‡æ ·ä¸€ä¸ªæ ·æœ¬æ¥è®¡ç®—æ¢¯åº¦ä»¥å–å¾—è¿›å±•ã€‚</li></ul><p>äºŒè€…å„æœ‰åˆ©å¼Šï¼šæ¯å½“æ•°æ®éå¸¸ç›¸ä¼¼æ—¶ï¼Œæ¢¯åº¦ä¸‹é™å¹¶ä¸æ˜¯éå¸¸â€œæ•°æ®é«˜æ•ˆâ€ã€‚è€Œç”±äºCPUå’ŒGPUæ— æ³•å……åˆ†åˆ©ç”¨å‘é‡åŒ–ï¼Œç¡¬ä»¶èµ„æºéš¾å¾—åˆ°å®Œå…¨åˆ©ç”¨ï¼Œéšæœºæ¢¯åº¦ä¸‹é™å¹¶ä¸ç‰¹åˆ«â€œè®¡ç®—é«˜æ•ˆâ€ã€‚è¿™æš—ç¤ºäº†ä¸¤è€…ä¹‹é—´å¯èƒ½æœ‰æŠ˜ä¸­æ–¹æ¡ˆï¼Œè¿™ä¾¿æ¶‰åŠåˆ°<strong>å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆminibatch gradient descentï¼‰</strong>ã€‚æ‰¹é‡ä¸º1å°±æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ï¼Œä¸ºnå°±æ˜¯æ¢¯åº¦ä¸‹é™ï¼Œä¸ºä¹‹é—´çš„å€¼å°±æ˜¯å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ã€‚</p><p><strong>1ï¼‰å‘é‡åŒ–å’Œç¼“å­˜</strong></p><p>ä½¿ç”¨å°æ‰¹é‡çš„å†³ç­–çš„æ ¸å¿ƒæ˜¯è®¡ç®—æ•ˆç‡ã€‚å‡è½»è¿™äº›é™åˆ¶çš„æ–¹æ³•æ˜¯ä½¿ç”¨è¶³å¤Ÿå¿«çš„CPUç¼“å­˜å±‚æ¬¡ç»“æ„æ¥ä¸ºå¤„ç†å™¨æä¾›æ•°æ®ã€‚è¿™æ˜¯æ·±åº¦å­¦ä¹ ä¸­æ‰¹é‡å¤„ç†èƒŒåçš„æ¨åŠ¨åŠ›ã€‚ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šçŸ©é˜µ-çŸ©é˜µä¹˜æ³•ã€‚<br>æ¯”å¦‚$\mathbf{A} &#x3D; \mathbf{B}\mathbf{C}$ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šæ–¹æ³•æ¥è®¡ç®—$\mathbf{A}$ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p><ul><li>æˆ‘ä»¬å¯ä»¥è®¡ç®—$\mathbf{A}<em>{ij} &#x3D; \mathbf{B}</em>{i,:} \mathbf{C}_{:,j}^\top$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹ç§¯è¿›è¡Œé€å…ƒç´ è®¡ç®—ã€‚</li><li>æˆ‘ä»¬å¯ä»¥è®¡ç®—$\mathbf{A}<em>{:,j} &#x3D; \mathbf{B} \mathbf{C}</em>{:,j}^\top$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡è®¡ç®—ä¸€åˆ—ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡è®¡ç®—ä¸€è¡Œã€‚</li><li>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°è®¡ç®—$\mathbf{A} &#x3D; \mathbf{B} \mathbf{C}$ã€‚</li><li>æˆ‘ä»¬å¯ä»¥å°†$\mathbf{B}$å’Œ$\mathbf{C}$åˆ†æˆè¾ƒå°çš„åŒºå—çŸ©é˜µï¼Œç„¶åä¸€æ¬¡è®¡ç®—$\mathbf{A}$çš„ä¸€ä¸ªåŒºå—ã€‚</li></ul><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€ä¸ªé€‰æ‹©ï¼Œæ¯æ¬¡æˆ‘ä»¬è®¡ç®—ä¸€ä¸ªå…ƒç´ $\mathbf{A}<em>{ij}$æ—¶ï¼Œéƒ½éœ€è¦å°†ä¸€è¡Œå’Œä¸€åˆ—å‘é‡å¤åˆ¶åˆ°CPUä¸­ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œç”±äºçŸ©é˜µå…ƒç´ æ˜¯æŒ‰é¡ºåºå¯¹é½çš„ï¼Œå› æ­¤å½“ä»å†…å­˜ä¸­è¯»å–å®ƒä»¬æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¿é—®ä¸¤ä¸ªå‘é‡ä¸­è®¸å¤šä¸ç›¸äº¤çš„ä½ç½®ï¼›ç¬¬äºŒç§é€‰æ‹©ç›¸å¯¹æ›´æœ‰åˆ©ï¼šæˆ‘ä»¬èƒ½å¤Ÿåœ¨éå†$\mathbf{B}$çš„åŒæ—¶ï¼Œå°†åˆ—å‘é‡$\mathbf{C}</em>{:,j}$ä¿ç•™åœ¨CPUç¼“å­˜ä¸­ï¼Œå®ƒå°†å†…å­˜å¸¦å®½éœ€æ±‚å‡åŠï¼Œç›¸åº”åœ°æé«˜äº†è®¿é—®é€Ÿåº¦ï¼›ç¬¬ä¸‰ç§é€‰æ‹©è¡¨é¢ä¸Šæ˜¯æœ€å¯å–çš„ï¼Œç„¶è€Œå¤§å¤šæ•°çŸ©é˜µå¯èƒ½ä¸èƒ½å®Œå…¨æ”¾å…¥ç¼“å­˜ä¸­ï¼›ç¬¬å››ç§é€‰æ‹©æä¾›äº†ä¸€ä¸ªå®è·µä¸Šå¾ˆæœ‰ç”¨çš„æ–¹æ¡ˆï¼šæˆ‘ä»¬å¯ä»¥å°†çŸ©é˜µçš„åŒºå—ç§»åˆ°ç¼“å­˜ä¸­ç„¶ååœ¨æœ¬åœ°å°†å®ƒä»¬ç›¸ä¹˜ã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æ“ä½œåœ¨å®è·µä¸­çš„æ•ˆç‡å¦‚ä½•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pickletools <span class="keyword">import</span> optimize</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"></span><br><span class="line">timer = ppl.Timer()</span><br><span class="line"><span class="comment"># å®šä¹‰ä¸‰ä¸ª256*256çš„çŸ©é˜µ</span></span><br><span class="line">A = paddle.zeros((<span class="number">256</span>, <span class="number">256</span>))</span><br><span class="line">B = paddle.zeros((<span class="number">256</span>, <span class="number">256</span>))</span><br><span class="line">C = paddle.zeros((<span class="number">256</span>, <span class="number">256</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€å…ƒç´ è®¡ç®—A=BC</span></span><br><span class="line">timer.start()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">        A[i, j] = paddle.dot(B[i, :], C[:, j]) <span class="comment"># è®¡ç®—å‘é‡çš„å†…ç§¯</span></span><br><span class="line">timer.stop()</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š8.538275241851807</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€åˆ—è®¡ç®—A=BC</span></span><br><span class="line">timer.start()</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">    A[:, j] = paddle.mv(B, C[:, j]) <span class="comment"># è®¡ç®—çŸ©é˜µå’Œå‘é‡çš„ä¹˜ç§¯</span></span><br><span class="line">timer.stop()</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š0.06382012367248535</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€æ¬¡æ€§è®¡ç®—A=BC</span></span><br><span class="line">timer.start()</span><br><span class="line">A = paddle.mm(B, C) <span class="comment"># çŸ©é˜µç›¸ä¹˜</span></span><br><span class="line">timer.stop()</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š0.0013420581817626953</span></span><br></pre></td></tr></table></figure><p><strong>2ï¼‰å°æ‰¹é‡</strong></p><p>ğŸ¨<code>sec_minibatches</code></p><p>ä¹‹å‰æˆ‘ä»¬ä¼šç†æ‰€å½“ç„¶åœ°è¯»å–æ•°æ®çš„å°æ‰¹é‡ï¼Œè€Œä¸æ˜¯è§‚æµ‹å•ä¸ªæ•°æ®æ¥æ›´æ–°å‚æ•°ï¼Œç°åœ¨ç®€è¦è§£é‡Šä¸€ä¸‹åŸå› ã€‚å¤„ç†å•ä¸ªè§‚æµ‹å€¼éœ€è¦æˆ‘ä»¬æ‰§è¡Œè®¸å¤šå•ä¸€çŸ©é˜µ-çŸ¢é‡ï¼ˆç”šè‡³çŸ¢é‡-çŸ¢é‡ï¼‰ä¹˜æ³•ï¼Œè¿™è€—è´¹ç›¸å½“å¤§ï¼Œè€Œä¸”å¯¹åº”æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹Ÿè¦å·¨å¤§çš„å¼€é”€ã€‚è¿™æ—¢é€‚ç”¨äºè®¡ç®—æ¢¯åº¦ä»¥æ›´æ–°å‚æ•°æ—¶ï¼Œä¹Ÿé€‚ç”¨äºç”¨ç¥ç»ç½‘ç»œé¢„æµ‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯å½“æˆ‘ä»¬æ‰§è¡Œ$\mathbf{w} \leftarrow \mathbf{w} - \eta_t \mathbf{g}_t$æ—¶ï¼Œæ¶ˆè€—å·¨å¤§ã€‚å…¶ä¸­ï¼š</p><p>$$<br>\mathbf{g}<em>t &#x3D; \partial</em>{\mathbf{w} } f(\mathbf{x}_{t}, \mathbf{w})<br>$$<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å…¶åº”ç”¨äºä¸€ä¸ªå°æ‰¹é‡è§‚æµ‹å€¼æ¥æé«˜æ­¤æ“ä½œçš„è®¡ç®—æ•ˆç‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å°†æ¢¯åº¦$\mathbf{g}_t$æ›¿æ¢ä¸ºä¸€ä¸ªå°æ‰¹é‡è€Œä¸æ˜¯å•ä¸ªè§‚æµ‹å€¼ï¼š</p><p>$$<br>\mathbf{g}<em>t &#x3D; \partial</em>{\mathbf{w} } \frac{1} {|\mathcal{B}<em>t|} \sum</em>{i \in \mathcal{B}<em>t} f(\mathbf{x}</em>{i}, \mathbf{w})<br>$$<br>æ¯ä¸ªè¿­ä»£å‘¨æœŸçš„è€—æ—¶åœ¨æ¢¯åº¦ä¸‹é™å’Œéšæœºæ¢¯åº¦ä¸‹é™ä¹‹é—´ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™å¯¹$\mathbf{g}_t$çš„ç»Ÿè®¡å±æ€§æœ‰ä»€ä¹ˆå½±å“ï¼šç”±äº$\mathbf{x}_t$å’Œå°æ‰¹é‡$\mathcal{B}_t$çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä»è®­ç»ƒé›†ä¸­éšæœºæŠ½å‡ºçš„ï¼Œå› æ­¤æ¢¯åº¦çš„é¢„æœŸä¿æŒä¸å˜ï¼Œä¿ç•™äº†éšæœºæ¢¯åº¦ä¸‹é™çš„ä¼˜åŠ¿ï¼ˆæ— åä¼°è®¡ï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œæ–¹å·®ï¼ˆæ•°æ®ç¦»æ•£ç¨‹åº¦ï¼‰æ˜¾è‘—é™ä½ã€‚</p><h4 id="3-1-4-å®ç°æ¢¯åº¦ä¸‹é™æ³•"><a href="#3-1-4-å®ç°æ¢¯åº¦ä¸‹é™æ³•" class="headerlink" title="3.1.4 å®ç°æ¢¯åº¦ä¸‹é™æ³•"></a>3.1.4 å®ç°æ¢¯åº¦ä¸‹é™æ³•</h4><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä»æ•°æ®ä¸­æœ‰æ•ˆåœ°ç”Ÿæˆå°æ‰¹é‡ã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨NASAå¼€å‘çš„æµ‹è¯•æœºç¿¼çš„æ•°æ®é›†<a href="https://archive.ics.uci.edu/ml/datasets/Airfoil+Self-Noise">ä¸åŒé£è¡Œå™¨äº§ç”Ÿçš„å™ªå£°</a>æ¥æ¯”è¾ƒè¿™äº›ä¼˜åŒ–ç®—æ³•ã€‚ä¸ºæ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬åªä½¿ç”¨å‰$1,500$æ ·æœ¬å¹¶è¿›è¡Œæ•°æ®é¢„å¤„ç†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">data = np.genfromtxt(</span><br><span class="line">        <span class="string">&#x27;work/airfoil_self_noise.dat&#x27;</span>, <span class="comment"># æ•°æ®é›†åœ¨é£å°†çš„workæ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line">        dtype=np.float32,</span><br><span class="line">        delimiter=<span class="string">&#x27;\t&#x27;</span> <span class="comment"># æ°´å¹³åˆ¶è¡¨ï¼štab</span></span><br><span class="line">        )</span><br><span class="line"><span class="built_in">print</span>(data, data.shape)</span><br><span class="line">data = paddle.to_tensor((data - data.mean(axis=<span class="number">0</span>)) / data.std(axis=<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(data, data.shape)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data_ch11</span>(<span class="params">batch_size=<span class="number">10</span>, n=<span class="number">1500</span></span>):<span class="comment"># è¯»å–æ­¤æ•°æ®é›†çš„å‰1500ä¸ªæ•°æ®ï¼Œå¹¶æŒ‰æ¯10ä¸ªæ•°æ®æ‰“åŒ…</span></span><br><span class="line">    data = np.genfromtxt(</span><br><span class="line">        <span class="string">&#x27;work/airfoil_self_noise.dat&#x27;</span>,</span><br><span class="line">        dtype=np.float32,</span><br><span class="line">        delimiter=<span class="string">&#x27;\t&#x27;</span></span><br><span class="line">        )</span><br><span class="line">    data = paddle.to_tensor((data - data.mean(axis=<span class="number">0</span>)) / data.std(axis=<span class="number">0</span>))</span><br><span class="line">    data_iter = ppl.load_array(</span><br><span class="line">        (data[:n, :-<span class="number">1</span>],</span><br><span class="line">        data[:n, -<span class="number">1</span>]),</span><br><span class="line">        batch_size,</span><br><span class="line">        is_train=<span class="literal">True</span></span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">return</span> data_iter, data.shape[<span class="number">1</span>]-<span class="number">1</span> </span><br></pre></td></tr></table></figure><p><strong>1ï¼‰ä»é›¶å¼€å§‹å®ç°</strong></p><p>æˆ‘ä»¬åœ¨è¿™é‡Œå°†å®ƒçš„è¾“å…¥å‚æ•°å˜å¾—æ›´åŠ é€šç”¨ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æœ¬ç« åé¢ä»‹ç»çš„å…¶ä»–ä¼˜åŒ–ç®—æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„è¾“å…¥ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªçŠ¶æ€è¾“å…¥<code>states</code>å¹¶å°†è¶…å‚æ•°æ”¾åœ¨å­—å…¸<code>hyperparams</code>ä¸­ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†åœ¨è®­ç»ƒå‡½æ•°é‡Œå¯¹å„ä¸ªå°æ‰¹é‡æ ·æœ¬çš„æŸå¤±æ±‚å¹³å‡ï¼Œå› æ­¤ä¼˜åŒ–ç®—æ³•ä¸­çš„æ¢¯åº¦ä¸éœ€è¦é™¤ä»¥æ‰¹é‡å¤§å°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sgd</span>(<span class="params">params, states, hyperparams</span>):</span><br><span class="line">    <span class="comment"># paramsä¸ºå¾…æ›´æ–°çš„å‚æ•°</span></span><br><span class="line">    <span class="comment"># statesä¸ºçŠ¶æ€å˜é‡</span></span><br><span class="line">    <span class="comment"># hyperparamsä¸ºè¶…å‚æ•°</span></span><br><span class="line">    <span class="comment"># åœ¨ç¥ç»ç½‘ç»œä¸­æˆ‘ä»¬èƒ½æ§åˆ¶çš„å°±æ˜¯è¿™ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> params:</span><br><span class="line">        p.stop_gradient = <span class="literal">True</span><span class="comment"># æ¢¯åº¦åœæ­¢æ›´æ–°</span></span><br><span class="line">        p.subtract_(hyperparams[<span class="string">&#x27;lr&#x27;</span>] * p.grad) <span class="comment"># subtract_ç®—å®Œä¹‹åå³å¯è¿›è¡Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line">        p.grad.zero_()</span><br><span class="line">        p.stop_gradient = <span class="literal">False</span><span class="comment"># æ¢¯åº¦å¼€å§‹æ›´æ–°</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢å®ç°ä¸€ä¸ªé€šç”¨çš„è®­ç»ƒå‡½æ•°ã€å› ä¸ºæˆ‘ä»¬ä¼šå­¦6å¤§ä¼˜åŒ–ç®—æ³•ã€‘ï¼Œä»¥æ–¹ä¾¿æœ¬ç« åé¢ä»‹ç»çš„å…¶ä»–ä¼˜åŒ–ç®—æ³•ä½¿ç”¨ã€‚å®ƒåˆå§‹åŒ–äº†ä¸€ä¸ªçº¿æ€§å›å½’æ¨¡å‹ï¼Œç„¶åå¯ä»¥ä½¿ç”¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ä»¥åŠåç»­å°èŠ‚ä»‹ç»çš„å…¶ä»–ç®—æ³•æ¥è®­ç»ƒæ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train_ch11</span>(<span class="params">trainer_fn, states, hyperparams, data_iter,</span></span><br><span class="line"><span class="params">               feature_dim, num_epochs=<span class="number">2</span></span>):</span><br><span class="line">    <span class="comment"># trainer_fnï¼šçº¿æ€§å›å½’æ¨¡å‹</span></span><br><span class="line">    <span class="comment"># data_iterï¼šæ•°æ®é›†</span></span><br><span class="line">    <span class="comment"># feature_dimï¼šç‰¹å¾æ•°</span></span><br><span class="line">    <span class="comment"># num_epochsï¼šè¿­ä»£å‘¨æœŸ</span></span><br><span class="line">    w = paddle.normal(mean=<span class="number">0.0</span>, std=<span class="number">0.01</span>, shape=(feature_dim, <span class="number">1</span>))</span><br><span class="line">    w.stop_gradient = <span class="literal">False</span></span><br><span class="line">    b = paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    b.stop_gradient = <span class="literal">False</span></span><br><span class="line">    net, loss = <span class="keyword">lambda</span> X: ppl.linreg(X, w, b), ppl.squared_loss</span><br><span class="line">    animator = ppl.Animator(xlabel=<span class="string">&#x27;epoch&#x27;</span>, ylabel=<span class="string">&#x27;loss&#x27;</span>,</span><br><span class="line">                            xlim=[<span class="number">0</span>, num_epochs], ylim=[<span class="number">0.22</span>, <span class="number">0.35</span>])</span><br><span class="line">    n, timer = <span class="number">0</span>, ppl.Timer()</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">            l = loss(net(X), y).mean()</span><br><span class="line">            l.backward()</span><br><span class="line">            trainer_fn([w, b], states, hyperparams)</span><br><span class="line">            n += X.shape[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span> n % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">                timer.stop()</span><br><span class="line">                animator.add(n/X.shape[<span class="number">0</span>]/<span class="built_in">len</span>(data_iter),</span><br><span class="line">                             (ppl.evaluate_loss(net, data_iter, loss),))</span><br><span class="line">                timer.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;loss: <span class="subst">&#123;animator.Y[<span class="number">0</span>][-<span class="number">1</span>]:<span class="number">.3</span>f&#125;</span>, <span class="subst">&#123;timer.avg():<span class="number">.3</span>f&#125;</span> sec/epoch&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> timer.cumsum(), animator.Y[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train_sgd</span>(<span class="params">lr, batch_size, num_epochs=<span class="number">2</span></span>):</span><br><span class="line">    data_iter, feature_dim = get_data_ch11(batch_size)</span><br><span class="line">    <span class="keyword">return</span> train_ch11(</span><br><span class="line">        sgd, <span class="literal">None</span>, &#123;<span class="string">&#x27;lr&#x27;</span>: lr&#125;, data_iter, feature_dim, num_epochs</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">gd_res = train_sgd(<span class="number">1</span>, <span class="number">1500</span>, <span class="number">10</span>)<span class="comment"># æ‰¹é‡æ¢¯åº¦ä¸‹é™</span></span><br><span class="line">sgd_res = train_sgd(<span class="number">0.005</span>, <span class="number">1</span>)<span class="comment"># éšæœºæ¢¯åº¦ä¸‹é™</span></span><br><span class="line">mini1_res = train_sgd(<span class="number">0.4</span>, <span class="number">100</span>)<span class="comment"># å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ã€ä»¥100ä¸ºæ‰¹é‡æ•°batchã€‘</span></span><br><span class="line">mini2_res = train_sgd(<span class="number">0.05</span>, <span class="number">10</span>)<span class="comment"># å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ã€ä»¥10ä¸ºæ‰¹é‡æ•°batchã€‘</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ä¸Šè¿°å››ä¸ªæ¨¡å‹æ˜¯è¶…å‚æ•°ä¸åŒçš„åŒç±»æ¨¡å‹ï¼Œå®ƒä»¬è¦æ‰§è¡Œçš„ä»»åŠ¡éƒ½æ˜¯åŒä¸€ä¸ªä»»åŠ¡,éƒ½æ˜¯å»åˆ†æå‰é¢1500ä¸ªå…³äºæµ‹è¯•æœºç¿¼çš„æ•°æ®ï¼Œä¸åŒç‚¹æ˜¯æ‹¿è¿›æ¥çš„æ‰¹é‡ä¸ä¸€æ ·ã€å­¦ä¹ ç‡ä¸ä¸€æ ·ï¼Œç”±æ­¤äº§ç”Ÿäº†ä¸åŒçš„æ¨¡å‹ã€‚</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">ppl.set_figsize([<span class="number">6</span>, <span class="number">3</span>])</span><br><span class="line">ppl.plot(</span><br><span class="line">    *<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">list</span>, <span class="built_in">zip</span>(gd_res, sgd_res, mini1_res, mini2_res))),</span><br><span class="line">    <span class="string">&#x27;time (sec)&#x27;</span>, <span class="string">&#x27;loss&#x27;</span>, xlim=[<span class="number">1e-2</span>, <span class="number">10</span>],</span><br><span class="line">    legend=[<span class="string">&#x27;gd&#x27;</span>, <span class="string">&#x27;sgd&#x27;</span>, <span class="string">&#x27;batch_size=100&#x27;</span>, <span class="string">&#x27;batch_size=10&#x27;</span>])</span><br><span class="line">ppl.plt.gca().set_xscale(<span class="string">&#x27;log&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/16.svg" alt="svg"></p><center>æ‰¹é‡æ¢¯åº¦ä¸‹é™</center><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/17.svg" alt="svg"></p><center>éšæœºæ¢¯åº¦ä¸‹é™</center><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/18.svg" alt="svg"></p><center>æ‰¹é‡æ¢¯åº¦ä¸‹é™</center><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/19.svg" alt="svg"></p><center>å››ä¸ªä¼˜åŒ–ç®—æ³•æ±‡æ€»</center><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒå‰å››ä¸ªå®éªŒçš„æ—¶é—´ä¸æŸå¤±ã€‚å¯ä»¥çœ‹å‡ºï¼Œå°½ç®¡åœ¨å¤„ç†çš„æ ·æœ¬æ•°æ–¹é¢ï¼Œéšæœºæ¢¯åº¦ä¸‹é™çš„æ”¶æ•›é€Ÿåº¦å¿«äºæ¢¯åº¦ä¸‹é™ï¼Œä½†ä¸æ¢¯åº¦ä¸‹é™ç›¸æ¯”ï¼Œå®ƒéœ€è¦æ›´å¤šçš„æ—¶é—´æ¥è¾¾åˆ°åŒæ ·çš„æŸå¤±ï¼Œå› ä¸ºé€ä¸ªæ ·æœ¬æ¥è®¡ç®—æ¢¯åº¦å¹¶ä¸é‚£ä¹ˆæœ‰æ•ˆã€‚å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™èƒ½å¤Ÿå¹³è¡¡æ”¶æ•›é€Ÿåº¦å’Œè®¡ç®—æ•ˆç‡ã€‚å¤§å°ä¸º10çš„å°æ‰¹é‡æ¯”éšæœºæ¢¯åº¦ä¸‹é™æ›´æœ‰æ•ˆï¼›å¤§å°ä¸º100çš„å°æ‰¹é‡åœ¨è¿è¡Œæ—¶é—´ä¸Šç”šè‡³ä¼˜äºæ¢¯åº¦ä¸‹é™ã€‚</p><p><strong>2ï¼‰ç®€æ´å®ç°</strong></p><p>ä¸‹é¢ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶è‡ªå¸¦ç®—æ³•å®ç°ä¸€ä¸ªé€šç”¨çš„è®­ç»ƒå‡½æ•°ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç« ä¸­å…¶å®ƒå°ç»“ä½¿ç”¨å®ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train_concise_ch11</span>(<span class="params">trainer_fn, hyperparams, data_iter, num_epochs=<span class="number">4</span></span>):</span><br><span class="line">    net = nn.Sequential(nn.Linear(<span class="number">5</span>, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">init_weights</span>(<span class="params">m</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">type</span>(m) == nn.Linear:</span><br><span class="line">            new_weight = paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, shape=m.weight.shape)</span><br><span class="line">            m.weight.set_value(new_weight)</span><br><span class="line">    net.apply(init_weights)</span><br><span class="line"></span><br><span class="line">    optimize = trainer_fn(parameters=net.parameters(), **hyperparams)</span><br><span class="line"></span><br><span class="line">    loss = nn.MSELoss(reduction=<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">    animator = ppl.Animator(xlabel=<span class="string">&#x27;epoch&#x27;</span>, ylabel=<span class="string">&#x27;loss&#x27;</span>,</span><br><span class="line">                            xlim=[<span class="number">0</span>, num_epochs], ylim=[<span class="number">0.22</span>, <span class="number">0.35</span>])</span><br><span class="line">    n, timer = <span class="number">0</span>, ppl.Timer()</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">            optimize.clear_grad()</span><br><span class="line">            out = net(X)</span><br><span class="line">            y = y.reshape(out.shape)</span><br><span class="line">            l = loss(out, y)</span><br><span class="line">            l.mean().backward()</span><br><span class="line">            optimize.step()</span><br><span class="line">            n += X.shape[<span class="number">0</span>] <span class="comment"># ç´¯åŠ çš„æ‰¹é‡ï¼ˆ0--nï¼Œæ¯æ¬¡åŠ bä¸ªï¼‰</span></span><br><span class="line">            <span class="keyword">if</span> n % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">                timer.stop()</span><br><span class="line">                animator.add(</span><br><span class="line">                    n/X.shape[<span class="number">0</span>]/<span class="built_in">len</span>(data_iter),</span><br><span class="line">                    (ppl.evaluate_loss(net, data_iter, loss) / <span class="number">2</span>, ))</span><br><span class="line">                timer.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;loss: <span class="subst">&#123;animator.Y[<span class="number">0</span>][-<span class="number">1</span>]:<span class="number">.3</span>f&#125;</span> sec/epoch&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä½¿ç”¨è¿™ä¸ªè®­ç»ƒå‡½æ•°ï¼Œå¤ç°ä¹‹å‰çš„å®éªŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_iter, _ = get_data_ch11(<span class="number">10</span>)</span><br><span class="line">trainer = paddle.optimizer.SGD</span><br><span class="line">train_concise_ch11(trainer, &#123;<span class="string">&#x27;learning_rate&#x27;</span>: <span class="number">0.01</span>&#125;, data_iter)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/20.svg" alt="svg"></p><h4 id="3-1-5-å°ç»“"><a href="#3-1-5-å°ç»“" class="headerlink" title="3.1.5 å°ç»“"></a>3.1.5 å°ç»“</h4><ul><li>å­¦ä¹ ç‡çš„å¤§å°å¾ˆé‡è¦ï¼šå­¦ä¹ ç‡å¤ªå¤§ä¼šä½¿æ¨¡å‹å‘æ•£ï¼Œå­¦ä¹ ç‡å¤ªå°ä¼šæ²¡æœ‰è¿›å±•ã€‚</li><li>å¯¹äºå‡¸é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¯æ˜ï¼Œå¯¹äºå¹¿æ³›çš„å­¦ä¹ ç‡é€‰æ‹©ï¼Œéšæœºæ¢¯åº¦ä¸‹é™å°†æ”¶æ•›åˆ°æœ€ä¼˜è§£ã€‚</li><li>å¦‚æœå­¦ä¹ ç‡å¤ªå°æˆ–å¤ªå¤§ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚å®é™…ä¸Šï¼Œé€šå¸¸åªæœ‰ç»è¿‡å¤šæ¬¡å®éªŒåæ‰èƒ½æ‰¾åˆ°åˆé€‚çš„å­¦ä¹ ç‡ã€‚</li><li>å½“è®­ç»ƒæ•°æ®é›†ä¸­æœ‰æ›´å¤šæ ·æœ¬æ—¶ï¼Œè®¡ç®—æ¢¯åº¦ä¸‹é™çš„æ¯æ¬¡è¿­ä»£çš„ä»£ä»·æ›´é«˜ï¼Œå› æ­¤åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œé¦–é€‰éšæœºæ¢¯åº¦ä¸‹é™ã€‚</li><li>éšæœºæ¢¯åº¦ä¸‹é™çš„æœ€ä½³æ€§ä¿è¯åœ¨éå‡¸æƒ…å†µä¸‹ä¸€èˆ¬ä¸å¯ç”¨ï¼Œå› ä¸ºéœ€è¦æ£€æŸ¥çš„å±€éƒ¨æœ€å°å€¼çš„æ•°é‡å¯èƒ½æ˜¯æŒ‡æ•°çº§çš„ã€‚</li><li>åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œç”±äºå­˜åœ¨å™ªéŸ³ï¼Œä¸‹é™ä¼šæœå‘æœ€å°å€¼ï¼Œä½†æ˜¯ä¸ä¼šç²¾ç¡®æ”¶æ•›ï¼Œåªä¼šåœ¨é™„è¿‘æ‘†åŠ¨ï¼Œæ›´é‡è¦çš„åŸå› åœ¨äºï¼šå­¦ä¹ ç‡æ˜¯ä¸€ä¸ªå›ºå®šå€¼ã€‚</li><li>ç”±äºå‡å°‘äº†æ·±åº¦å­¦ä¹ æ¡†æ¶çš„é¢å¤–å¼€é”€ï¼Œä½¿ç”¨æ›´å¥½çš„å†…å­˜æ–¹ä½ä»¥åŠCPUå’ŒGPUä¸Šçš„ç¼“å­˜ï¼Œå‘é‡åŒ–ä½¿ä»£ç æ›´åŠ é«˜æ•ˆã€‚</li><li>éšæœºæ¢¯åº¦ä¸‹é™çš„â€œç»Ÿè®¡æ•ˆç‡â€ä¸å¤§æ‰¹é‡ä¸€æ¬¡å¤„ç†æ•°æ®çš„â€œè®¡ç®—æ•ˆç‡â€ä¹‹é—´å­˜åœ¨æƒè¡¡ã€‚å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™æä¾›äº†ä¸¤å…¨å…¶ç¾çš„ç­”æ¡ˆï¼šè®¡ç®—å’Œç»Ÿè®¡æ•ˆç‡ã€‚</li><li>åœ¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ä¸­ï¼Œæˆ‘ä»¬å¤„ç†é€šè¿‡è®­ç»ƒæ•°æ®çš„éšæœºæ’åˆ—è·å¾—çš„æ‰¹é‡æ•°æ®ï¼ˆå³æ¯ä¸ªè§‚æµ‹å€¼åªå¤„ç†ä¸€æ¬¡ï¼Œä½†æŒ‰éšæœºé¡ºåºï¼‰ã€‚</li><li>åœ¨è®­ç»ƒæœŸé—´é™ä½å­¦ä¹ ç‡æœ‰åŠ©äºè®­ç»ƒã€‚</li><li>ä¸€èˆ¬æ¥è¯´ï¼Œå°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™æ¯”éšæœºæ¢¯åº¦ä¸‹é™å’Œæ¢¯åº¦ä¸‹é™çš„é€Ÿåº¦å¿«ï¼Œæ”¶æ•›é£é™©è¾ƒå°ã€‚</li><li>æ‰¹é‡åˆé€‚å¾ˆé‡è¦ï¼šè¿‡å¤§é‚£ä¹ˆè®¡ç®—ä»£ä»·å¤§ï¼Œè¿‡å°è™½ç„¶æ”¶æ•›å¿«ä½†æ˜¯è®¡ç®—æ…¢ã€‚</li></ul><h3 id="3-2-åŠ¨é‡æ³•"><a href="#3-2-åŠ¨é‡æ³•" class="headerlink" title="3.2 åŠ¨é‡æ³•"></a>3.2 åŠ¨é‡æ³•</h3><p>ğŸ¨<code>sec_momentum</code></p><p>æ¨¡å‹é€šè¿‡è®­ç»ƒæ•°æ®æ¥æ‹Ÿåˆæ¨¡å‹å‚æ•°ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ ¹æ®è¾“å…¥æ¥æ­£ç¡®è¾“å‡ºã€‚é‚£ä¹ˆå¦‚æœè¾“å‡ºè·ç¦»æˆ‘ä»¬æ­£ç¡®ç­”æ¡ˆæœ‰å·®å¼‚ï¼Œæˆ‘ä»¬å°†è¡¡é‡å·®å¼‚çš„å‡½æ•°å®šä¹‰ä¸ºç›®æ ‡å‡½æ•°ï¼ˆæŸå¤±å‡½æ•°ç­‰ï¼‰ã€‚<br>æˆ‘ä»¬å¸Œæœ›ç›®æ ‡å‡½æ•°ä¸º0ï¼Œè¿™æ ·å°±è¡¨æ˜æˆ‘ä»¬æ¨¡å‹å®Œå…¨æ­£ç¡®è¾“å‡ºæˆ‘ä»¬çš„æœŸæœ›ã€‚ä½†æ˜¯å› ä¸ºç‰¹å¾ç»´åº¦çš„ä¸°å¯Œï¼Œç›®æ ‡å‡½æ•°çš„è§£æè§£ï¼Œä¸å¯æ±‚æˆ–è€…ä¸å¥½æ±‚ï¼Œæ‰€ä»¥è¿ç”¨è®¡ç®—æœºå¼ºå¤§çš„è¿ç®—èƒ½åŠ›æ¥æ±‚æ•°å€¼è§£ï¼Œå³ï¼šåªè¦è¯¯å·®åœ¨å¯æ¥å—èŒƒå›´å†…ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªè§£é‡Šæˆ‘ä»¬çš„ç›®æ ‡è§£ã€‚</p><p>æˆ‘ä»¬æ±‚è§£æ•°å€¼è§£çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†<strong>è¿­ä»£é€¼è¿‘</strong>çš„æ–¹æ³•ã€‚ä¸€æ¬¡æ¬¡è¿­ä»£xçš„å€¼ï¼Œä½¿å…¶é€æ¸é€¼è¿‘è¯¯å·®å‡½æ•°çš„æœ€å°å€¼ã€‚<br>ä½†æ˜¯è¿™æ ·é€Ÿåº¦å¤ªæ…¢ï¼Œä¸ºæ­¤æˆ‘ä»¬è€ƒè™‘æ²¿ç€åæ¢¯åº¦æ–¹å‘å¯æ˜¯å®ç°æœ€é€Ÿä¸‹é™ï¼Œæ•…å¼•å…¥äº†æ¢¯åº¦ä¸‹é™æ³•ã€‚</p><h4 id="3-2-1-è´¨ç–‘"><a href="#3-2-1-è´¨ç–‘" class="headerlink" title="3.2.1 è´¨ç–‘"></a>3.2.1 è´¨ç–‘</h4><p>æœ‰äººè§‰å¾—ä»…ä»…è€ƒè™‘æ²¿æ¢¯åº¦ä¸‹é™è¿˜ä¸å¤Ÿã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæ¢¯åº¦ä¸‹é™æ ¹æ®è‡ªå˜é‡å½“å‰ä½ç½®ï¼Œæ²¿ç€å½“å‰ä½ç½®çš„æ¢¯åº¦æ›´æ–°è‡ªå˜é‡ï¼Œåœ¨å½“å‰ä½ç½®ä¸‹é™ï¼Œæœ‰äººæå‡ºè´¨ç–‘ï¼šä»…ä»…è€ƒè™‘å½“å‰ä½ç½®ä¸è¡Œçš„ï¼Œ<br>è¦è€ƒè™‘æ•´ä½“æ–¹å‘ï¼Œè¿åŠ¨ä¹Ÿæœ‰ä¸ªæƒ¯æ€§ï¼Œå†å²ä¹Ÿæœ‰å¤§åŠ¿æ‰€è¶‹ï¼Œè‚¯å®šä¸èƒ½åªçœ‹å½“å‰ä½ç½®ã€‚æ‰€ä»¥åœ¨è‡ªå˜é‡æ›´æ–°çš„æ—¶å€™è€ƒè™‘å¼•å…¥é€Ÿåº¦å˜é‡ï¼Œæœ‰é€Ÿåº¦å°±æœ‰æƒ¯æ€§ã€‚æƒ¯æ€§è¶Šå¤§ï¼Œè¶ŠåŠ¿ä¸å¯æŒ¡ã€‚</p><p><strong>æ¢¯åº¦ä¸‹é™çš„é—®é¢˜</strong></p><p>ä¸ºäº†æ›´å¥½åœ°äº†è§£åŠ¨é‡æ³•çš„å‡ ä½•å±æ€§ï¼Œæˆ‘ä»¬å¤ä¹ ä¸€ä¸‹æ¢¯åº¦ä¸‹é™ã€‚æˆ‘ä»¬æ„é€ ä¸€ä¸ªç›®æ ‡å‡½æ•°$f(\mathbf{x})&#x3D;x_1^2+2x_2^2$ï¼Œå¹¶æœ‰äºŒç»´å‘é‡$\mathbf{x} &#x3D; [x_1, x_2]^\top$ä½œä¸ºè¾“å…¥ï¼Œæ ‡é‡ä½œä¸ºè¾“å‡ºã€‚åœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬ç¨åŠ æ”¹åŠ¨ã€‚</p><p>$$<br>f(\mathbf{x}) &#x3D; 0.1 x_1^2 + 2 x_2^2.<br>$$<br>ä¸ä¹‹å‰ä¸€æ ·ï¼Œ$f$åœ¨$(0, 0)$æœ‰æœ€å°å€¼ï¼Œè¯¥å‡½æ•°åœ¨$x_1$çš„æ–¹å‘ä¸Šéå¸¸å¹³å¦ã€‚è®©æˆ‘ä»¬çœ‹çœ‹åœ¨è¿™ä¸ªæ–°å‡½æ•°ä¸Šæ‰§è¡Œæ¢¯åº¦ä¸‹é™æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"></span><br><span class="line">eta = <span class="number">0.04</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f_2d</span>(<span class="params">x1, x2</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.1</span> * x1**<span class="number">2</span> + <span class="number">2</span> * x2**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gd_2d</span>(<span class="params">x1, x2, s1, s2</span>):</span><br><span class="line">    <span class="keyword">return</span> (x1 - eta * <span class="number">0.2</span> * x1, x2 - eta * <span class="number">4</span> * x2, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">ppl.show_trace_2d(f_2d, ppl.train_2d(gd_2d))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 20, x1:-4.257978, x2: -0.061181</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/21.svg" alt="svg"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒä¸€ä½ç½®ä¸Šï¼Œç›®æ ‡å‡½æ•°åœ¨ç«–ç›´æ–¹å‘æ¯”åœ¨æ°´å¹³æ–¹å‘çš„æ–œç‡çš„ç»å¯¹å€¼æ›´å¤§ã€‚å› æ­¤ï¼Œç»™å®šå­¦ä¹ ç‡ï¼Œæ¢¯åº¦ä¸‹é™è¿­ä»£è‡ªå˜é‡æ—¶ä¼šä½¿è‡ªå˜é‡åœ¨ç«–ç›´æ–¹å‘æ¯”åœ¨æ°´å¹³æ–¹å‘ç§»åŠ¨å¹…åº¦æ›´å¤§ã€‚<br>å› æ­¤ï¼Œæˆ‘ä»¬é™·å…¥ä¸¤éš¾ï¼šå¦‚æœé€‰æ‹©è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œæˆ‘ä»¬ä¼šç¡®ä¿è§£ä¸ä¼šåœ¨$x_2$æ–¹å‘å‘æ•£ï¼Œä½†è¦æ‰¿å—åœ¨$x_1$æ–¹å‘çš„ç¼“æ…¢æ”¶æ•›ã€‚ç›¸åï¼Œå¦‚æœå­¦ä¹ ç‡è¾ƒé«˜ï¼Œæˆ‘ä»¬åœ¨$x_1$æ–¹å‘ä¸Šè¿›å±•å¾ˆå¿«ï¼Œä½†åœ¨$x_2$æ–¹å‘å°†ä¼šå‘æ•£ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†å³ä½¿å­¦ä¹ ç‡ä»$0.4$ç•¥å¾®æé«˜åˆ°$0.6$ï¼Œä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼š$x_1$æ–¹å‘ä¸Šçš„æ”¶æ•›æœ‰æ‰€æ”¹å–„ï¼Œä½†æ•´ä½“æ¥çœ‹è§£çš„è´¨é‡æ›´å·®äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">eta = <span class="number">0.6</span></span><br><span class="line">ppl.show_trace_2d(f_2d, ppl.train_2d(gd_2d))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 20, x1:-0.387814, x2: -1673.365109</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/22.svg" alt="svg"></p><p>åœ¨æ¢¯åº¦ä¸‹é™ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾ƒå°çš„å­¦ä¹ ç‡ä»è€Œé¿å…è‡ªå˜é‡åœ¨æ¢¯åº¦è¾ƒå¤§çš„æ–¹å‘ä¸Šè¶Šè¿‡ç›®æ ‡å‡½æ•°æœ€ä¼˜è§£ï¼Œç„¶è€Œï¼Œè¿™ä¼šé€ æˆè‡ªå˜é‡åœ¨æ¢¯åº¦è¾ƒå°çš„æ–¹å‘ä¸Šæœæœ€ä¼˜è§£ç§»åŠ¨å˜æ…¢ï¼›æˆ‘ä»¬è¯•ç€å°†å­¦ä¹ ç‡è°ƒå¾—ç¨å¤§ä¸€ç‚¹ï¼Œæ­¤æ—¶è‡ªå˜é‡åœ¨æ¢¯åº¦è¾ƒå¤§çš„æ–¹å‘åˆä¼šä¸æ–­è¶Šè¿‡æœ€ä¼˜è§£å¹¶é€æ¸å‘æ•£ã€‚</p><h4 id="3-2-2-åŠ¨é‡æ³•åœ°æå‡º"><a href="#3-2-2-åŠ¨é‡æ³•åœ°æå‡º" class="headerlink" title="3.2.2 åŠ¨é‡æ³•åœ°æå‡º"></a>3.2.2 åŠ¨é‡æ³•åœ°æå‡º</h4><p><strong>åŠ¨é‡æ³•ï¼ˆmomentumï¼‰</strong> ä½¿æˆ‘ä»¬èƒ½å¤Ÿè§£å†³ä¸Šé¢æè¿°çš„æ¢¯åº¦ä¸‹é™é—®é¢˜ã€‚åŠ¨é‡æ³•åˆè¢«ç§°ä½œåŸºäºåŠ¨é‡çš„æ¢¯åº¦ä¸‹é™æ³•(SGD with momentum)ï¼Œæ˜¯ä¸€ç§ä½¿æ¢¯åº¦å‘é‡å‘ç›¸å…³æ–¹å‘åŠ é€Ÿå˜åŒ–ã€æœ€ç»ˆå®ç°åŠ é€Ÿæ”¶æ•›çš„æ–¹æ³•ã€‚åŠ¨é‡æ³•å¼•å…¥ç‰©ç†â€œåŠ¨é‡â€çš„æ¦‚å¿µï¼Œç´¯ç§¯é€Ÿåº¦ï¼Œå‡å°‘éœ‡è¡ï¼Œä½¿å‚æ•°æ›´æ–°çš„æ–¹å‘æ›´ç¨³å®šã€‚</p><p>åœ¨ä¸­å­¦ç‰©ç†ä¸­ï¼Œåˆ»ç”»æƒ¯æ€§çš„ç‰©ç†é‡æ˜¯åŠ¨é‡ï¼Œæ²¿å±±è°·æ»šä¸‹çš„é“çƒä¼šæ”¶åˆ°æ²¿å¡é“å‘ä¸‹çš„åŠ›å’Œä¸å·¦å³å±±å£ç¢°æ’çš„å¼¹åŠ›ï¼Œå‘ä¸‹çš„åŠ›ï¼ˆé‡åŠ›ï¼‰ç¨³å®šä¸å˜ï¼Œäº§ç”Ÿçš„åŠ¨é‡ä¸æ–­ç´¯ç§¯ï¼Œé€Ÿåº¦è¶Šæ¥è¶Šå¿«ï¼›å·¦å³çš„å¼¹åŠ›æ€»æ˜¯åœ¨ä¸åœåˆ‡æ¢ï¼ŒåŠ¨é‡ç´¯ç§¯çš„ç»“æœæ˜¯ç›¸äº’æŠµæ¶ˆï¼Œå‡å¼±äº†çƒçš„æ¥å›éœ‡è¡ã€‚å› æ­¤ï¼Œä¸éšæœºæ¢¯åº¦ä¸‹é™ç›¸æ¯”ï¼ŒåŠ¨é‡æ–¹æ³•çš„æ”¶æ•›é€Ÿåº¦æ›´å¿«ï¼Œæ”¶æ•›æ›²çº¿ä¹Ÿæ›´ç¨³å®šï¼Œè§ä¸‹å›¾ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/da1bdcde82e445b8be8070b97eeef064ba5c62d5a2ff45c6bd203482e2df3be1" width="500" hegiht="" ></center><center>å›¾4ï¼šSGDä¸å¸¦åŠ¨é‡SGD </center><p>æ¯ä¸ªæ‰¹æ¬¡çš„æ•°æ®å«æœ‰æŠ½æ ·è¯¯å·®ï¼Œå¯¼è‡´æ¢¯åº¦æ›´æ–°çš„æ–¹å‘æ³¢åŠ¨è¾ƒå¤§ã€‚å¦‚æœæˆ‘ä»¬å¼•å…¥ç‰©ç†åŠ¨é‡çš„æ¦‚å¿µï¼Œç»™æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹åŠ å…¥ä¸€å®šçš„â€œæƒ¯æ€§â€ç´¯ç§¯ï¼Œå°±å¯ä»¥å‡å°‘æ›´æ–°è·¯å¾„ä¸Šçš„éœ‡è¡ï¼Œå³<strong>æ¯æ¬¡æ›´æ–°çš„æ¢¯åº¦ç”±â€œå†å²å¤šæ¬¡æ¢¯åº¦çš„ç´¯ç§¯æ–¹å‘â€å’Œâ€œå½“æ¬¡æ¢¯åº¦â€åŠ æƒç›¸åŠ </strong> å¾—åˆ°ã€‚å†å²å¤šæ¬¡æ¢¯åº¦çš„ç´¯ç§¯æ–¹å‘å¾€å¾€æ˜¯ä»å…¨å±€è§†è§’æ›´æ­£ç¡®çš„æ–¹å‘ï¼Œè¿™ä¸â€œæƒ¯æ€§â€çš„ç‰©ç†æ¦‚å¿µå¾ˆåƒï¼Œä¹Ÿæ˜¯ä¸ºä½•å…¶èµ·åä¸ºâ€œMomentumâ€çš„åŸå› ã€‚ç±»ä¼¼ä¸åŒå“ç‰Œå’Œæè´¨çš„ç¯®çƒæœ‰ä¸€å®šçš„é‡é‡å·®åˆ«ï¼Œè¡—å¤´ç¯®çƒé˜Ÿä¸­çš„æŠ•æ‰‹ï¼ˆæ“…é•¿ä¸­è¿œè·ç¦»æŠ•ç¯®ï¼‰å–œæ¬¢ç¨é‡ç¯®çƒçš„æ¯”ä¾‹è¾ƒé«˜ï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› æ˜¯ï¼Œé‡çš„ç¯®çƒæƒ¯æ€§å¤§ï¼Œæ›´ä¸å®¹æ˜“å—åˆ°æ‰‹åŠ¿çš„å°å¹…å˜å½¢æˆ–é£å¹çš„å½±å“ã€‚</p><p><strong>1ï¼‰åŠ¨é‡æ³•å…¬å¼</strong></p><p>åŠ¨é‡æ³•å¼•å…¥äº†é€Ÿåº¦$\mathbf{v}_t$ï¼Œå®ƒåŒ…å«äº†å‚æ•°åœ¨å‚æ•°ç©ºé—´ç§»åŠ¨çš„æ–¹å‘å’Œé€Ÿç‡ã€‚ä½¿ç”¨$\mathbf{v}_t$è€Œä¸æ˜¯æ¢¯åº¦$\mathbf{g}_t$å¯ä»¥ç”Ÿæˆä»¥ä¸‹æ›´æ–°ç­‰å¼ï¼š</p><p>$$<br>\begin{aligned}<br>\mathbf{v}<em>t &amp;\leftarrow \beta \mathbf{v}</em>{t-1} + \eta_t \mathbf{g}_{t}, \<br>\mathbf{x}<em>t &amp;\leftarrow \mathbf{x}</em>{t-1} -  \mathbf{v}_t.<br>\end{aligned}<br>$$</p><p>è¿™é‡Œçš„$\mathbf{v}_t$å°±æ˜¯åŠ¨é‡ï¼Œå®ƒæ˜¯ä¸€æ®µæ—¶é—´å†…å¹³å‡é¢„æµ‹çš„å€¼ï¼Œ$\beta$ä¸ºåŠ¨é‡ç³»æ•°ã€‚å¯¹äº$\beta &#x3D; 0$ï¼Œæˆ‘ä»¬æ¢å¤å¸¸è§„çš„æ¢¯åº¦ä¸‹é™ã€‚<br>åœ¨æ·±å…¥ç ”ç©¶å®ƒçš„æ•°å­¦å±æ€§ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹ç®—æ³•åœ¨å®éªŒä¸­çš„è¡¨ç°å¦‚ä½•ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬åœ¨æ—¶é—´$t&#x3D;0$åˆå§‹åŒ–$\mathbf{v}_0 &#x3D; 0$ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">momentum_2d</span>(<span class="params">x1, x2, v1, v2</span>):</span><br><span class="line">    <span class="comment">#print(v1,v2)</span></span><br><span class="line">    v1 = beta * v1 + eta * <span class="number">0.2</span> * x1</span><br><span class="line">    v2 = beta * v2 + eta * <span class="number">4</span> * x2</span><br><span class="line">    <span class="keyword">return</span> x1 - v1, x2 - v2, v1, v2</span><br><span class="line"></span><br><span class="line">eta, beta = <span class="number">0.6</span>, <span class="number">0.5</span></span><br><span class="line">ppl.show_trace_2d(f_2d, ppl.train_2d(momentum_2d))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 20, x1: 0.007188, x2: 0.002553</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/23.svg" alt="svg"></p><p>æ­£å¦‚æ‰€è§ï¼Œå°½ç®¡å­¦ä¹ ç‡ä¸æˆ‘ä»¬ä»¥å‰ä½¿ç”¨çš„ç›¸åŒï¼ŒåŠ¨é‡æ³•ä»ç„¶å¾ˆå¥½åœ°æ”¶æ•›äº†ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å½“é™ä½åŠ¨é‡å‚æ•°æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å°†å…¶å‡åŠè‡³$\beta &#x3D; 0.25$ä¼šå¯¼è‡´ä¸€æ¡å‡ ä¹æ²¡æœ‰æ”¶æ•›çš„è½¨è¿¹ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒæ¯”æ²¡æœ‰åŠ¨é‡æ—¶è§£å°†ä¼šå‘æ•£è¦å¥½å¾—å¤šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">eta, beta = <span class="number">0.6</span>, <span class="number">0.25</span></span><br><span class="line">ppl.show_trace_2d(f_2d, ppl.train_2d(momentum_2d))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 20, x1:-0.126340, x2: -0.186632</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/24.svg" alt="svg"></p><p><strong>2ï¼‰æŒ‡æ•°åŠ æƒå¹³å‡</strong></p><p>æˆ‘ä»¬å¯ä»¥ç”¨æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ç†è§£åŠ¨é‡æ³•ã€‚åœ¨åŠ¨é‡æ³•ä¸­ï¼Œè‡ªå˜é‡åœ¨å„ä¸ªæ–¹å‘ä¸Šçš„ç§»åŠ¨å¹…åº¦ä¸ä»…å–å†³å½“å‰æ¢¯åº¦ï¼Œè¿˜å–å†³äºè¿‡å»çš„å„ä¸ªæ¢¯åº¦åœ¨å„ä¸ªæ–¹å‘ä¸Šæ˜¯å¦ä¸€è‡´ã€‚</p><p>**æ»‘åŠ¨å¹³å‡(exponential moving average)<strong>ï¼Œæˆ–è€…å«åš</strong>æŒ‡æ•°åŠ æƒå¹³å‡(exponentially weighted moving average)**ï¼Œå¯ä»¥ç”¨æ¥ä¼°è®¡å˜é‡çš„å±€éƒ¨å‡å€¼ï¼Œä½¿å¾—å˜é‡çš„æ›´æ–°ä¸ä¸€æ®µæ—¶é—´å†…çš„å†å²å–å€¼æœ‰å…³ã€‚æŒ‡æ•°ç§»åŠ¨åŠ æƒå¹³å‡æ³•ï¼Œæ˜¯æŒ‡å„æ•°å€¼çš„åŠ æƒç³»æ•°éšæ—¶é—´å‘ˆæŒ‡æ•°å¼é€’å‡ï¼Œè¶Šé è¿‘å½“å‰æ—¶åˆ»çš„æ•°å€¼åŠ æƒç³»æ•°å°±è¶Šå¤§ï¼Œè¾ƒä¼ ç»Ÿçš„å¹³å‡æ³•æ¥è¯´ï¼Œä¸€æ˜¯ä¸éœ€è¦ä¿å­˜è¿‡å»æ‰€æœ‰çš„æ•°å€¼ï¼›äºŒæ˜¯è®¡ç®—é‡æ˜¾è‘—å‡å°ã€‚<br>$$<br>\begin{aligned}<br>\mathbf{v}<em>t &amp;\leftarrow \beta \mathbf{v}</em>{t-1} +({1-\beta}) \mathbf{Î¸}_{t}<br>\end{aligned}<br>$$</p><p>ä¸Šå¼ä¸­ $Î¸t$ä¸ºæ—¶åˆ»$t$ çš„å®é™…å€¼ï¼›ç³»æ•° $Î²$ è¡¨ç¤ºåŠ æƒä¸‹é™çš„é€Ÿç‡ï¼Œå…¶å€¼è¶Šå°ä¸‹é™çš„è¶Šå¿«ï¼›$vt$ ä¸º $t$æ—¶åˆ»EWMAï¼ˆæŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼‰ çš„å€¼ã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å°†$\mathbf{v}<em>t$ çœ‹åšæ˜¯å¯¹æœ€è¿‘ $\frac{1} {1-\beta}$ä¸ªæ—¶é—´æ­¥çš„$\mathbf{Î¸}</em>{t}$å€¼çš„åŠ æƒå¹³å‡ã€‚æˆ‘ä»¬ä½¿ç”¨$\beta &#x3D; 0.9$æ¥éªŒè¯è¿™ä¸ªå…¬å¼ã€‚</p><p>$$<br>\begin{aligned}<br>\mathbf{v}<em>{100} &#x3D; 0.9 \mathbf{v}</em>{99} + 0.1 \mathbf{Î¸}_{100}<br>\end{aligned}<br>$$</p><p>$$<br>\begin{aligned}<br>\mathbf{v}<em>{99} &#x3D; 0.9 \mathbf{v}</em>{98} + 0.1 \mathbf{Î¸}_{99}<br>\end{aligned}<br>$$</p><p>$$<br>\begin{aligned}<br>\mathbf{v}<em>{98} &#x3D; 0.9 \mathbf{v}</em>{97} + 0.1 \mathbf{Î¸}_{98}<br>\end{aligned}<br>$$</p><p>$$<br>\begin{aligned}<br>â€¦<br>\end{aligned}<br>$$</p><p>æˆ‘ä»¬å°†å¼å­ä¸€æ­¥ä¸€æ­¥çš„å¸¦å…¥å¾—åˆ°æœ€ç»ˆçš„æ¨å¯¼ï¼š</p><p>$$<br>\begin{aligned}<br>\mathbf{v}<em>{n} &#x3D; 0.1 \mathbf{Î¸}</em>{n} + (0.9)^{1}0.1 \mathbf{Î¸}<em>{n-1} + (0.9)^{2}0.1 \mathbf{Î¸}</em>{n-2} â€¦â€¦+ (0.9)^{n-1}0.1 \mathbf{Î¸}_{1}<br>\end{aligned}<br>$$</p><p>æ‰€ä»¥æˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„$\mathbf{v}<em>{n}$å®é™…ä¸Šæ˜¯åŒ…å«äº†ä»¥å‰æ‰€æœ‰çš„ç»“æœã€‚å¯¹äº$\mathbf{v}</em>{20}$å„å‚æ•°çš„æ•°å€¼å¦‚ä¸‹å›¾ï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/a21079e5e7f84d53b822c3786c1e750f1702d4a2f89542af8f6162a7e3ca08a4" width="600" hegiht="" ></center><center>å›¾5ï¼š$\mathbf{v}_{20}$å‚æ•°å–å€¼ </center><p>å¯ä»¥çœ‹å‡ºï¼Œå¯¹äº$\mathbf{v}<em>{20}$æ¥è¯´ï¼Œ$\mathbf{Î¸}</em>{20}$çš„æƒé‡å‡ ä¹æ˜¯$\mathbf{Î¸}<em>{1}$çš„9å€ï¼Œè¿™ä¸ªæ—¶å€™å³ä½¿æˆ‘ä»¬å¿½ç•¥$\mathbf{Î¸}</em>{1}$å…¶å®å¯¹ç»“æœä¹Ÿæ²¡æœ‰å¤ªå¤§çš„å½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›ä¸€æ­¥è§„å®šï¼Œå¦‚æœæƒé‡ä½äº$\mathbf{Î¸}<em>{n}$çš„$\frac{1} {e}$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºè¯¥æ•°å€¼åœ¨å¹³å‡ä¸­èµ·å¾ˆå°çš„ä½œç”¨ï¼Œåœ¨æ•°å­¦ä¸Šä¸€èˆ¬ä¼šä»¥$\frac{1} {e}$ä½œä¸ºä¸€ä¸ªä¸´ç•Œå€¼ï¼Œå°äºè¯¥å€¼çš„åŠ æƒç³»æ•°çš„å€¼ä¸åšè€ƒè™‘ã€‚è¿™æ ·ä¸Šå›¾æˆ‘ä»¬å¯ä»¥å°†$\mathbf{v}</em>{20}$çœ‹ä½œæ˜¯çº¢çº¿ä»¥ä¸Šçš„10ä¸ªæ•°æ®çš„æŒ‡æ•°åŠ æƒå¹³å‡ï¼Œå½“$\beta &#x3D; 0.9$æ—¶ï¼ŒæŒ‡æ•°åŠ æƒå¹³å‡è€ƒè™‘äº†ä¼°è®¡ç‚¹é™„è¿‘çš„10ä¸ªæ•°æ®ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¯¹åŠ¨é‡æ³•çš„é€Ÿåº¦å˜é‡åšå˜å½¢ï¼š</p><p>$$<br>\begin{aligned}<br>\mathbf{v}<em>t &amp;\leftarrow \beta \mathbf{v}</em>{t-1} +({1-\beta}) (\frac{\eta_t} { {1-\beta} }\mathbf{g}_{t})<br>\end{aligned}<br>$$</p><p>æŒ‡æ•°åŠ æƒå¹³å‡æ˜¯åœ¨å°†å½“å‰å€¼ç”¨å…¶å‰é¢æ—¶é—´çš„å€¼è¡¨ç¤ºï¼Œæ‰€ä»¥åŠ¨é‡æ³•ä¸­å½“å‰çš„åŠ¨é‡å°±å¯ä»¥ç”¨å‰é¢çš„åŠ¨é‡è¡¨ç¤ºï¼Œå†åˆ©ç”¨å½“å‰åŠ¨é‡å½±å“è‡ªå˜é‡ã€‚æ‰€ä»¥è¯´ï¼Œåœ¨åŠ¨é‡æ³•ä¸­ï¼Œæˆ‘ä»¬æ ¹æ® $\beta$ çš„å€¼ï¼Œç¡®å®šå½“å‰çš„åŠ¨é‡æ˜¯æ ¹æ®å‰å¤šå°‘ä¸ªæ—¶é—´æ­¥çš„åŠ¨é‡åšçš„æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼Œåˆ©ç”¨è¿™äº›æ•°æ®é€æ¸ç¼©å°å‚æ•°æ”¶æ•›é€Ÿç‡ã€‚</p><h4 id="3-2-3-å®ç°åŠ¨é‡æ³•"><a href="#3-2-3-å®ç°åŠ¨é‡æ³•" class="headerlink" title="3.2.3 å®ç°åŠ¨é‡æ³•"></a>3.2.3 å®ç°åŠ¨é‡æ³•</h4><p>ç›¸æ¯”äºå°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ï¼ŒåŠ¨é‡æ–¹æ³•éœ€è¦ç»´æŠ¤ä¸€ç»„è¾…åŠ©å˜é‡ï¼Œå³é€Ÿåº¦ï¼Œå®ƒä¸æ¢¯åº¦ä»¥åŠä¼˜åŒ–é—®é¢˜çš„å˜é‡å…·æœ‰ç›¸åŒçš„å½¢çŠ¶ã€‚ç±»æ¯”ä¸­å­¦ç‰©ç†çŸ¥è¯†ï¼Œå½“å‰æ¢¯åº¦å°±å¥½æ¯”å½“å‰æ—¶åˆ»å—åŠ›äº§ç”Ÿçš„åŠ é€Ÿåº¦ï¼Œè€Œæ­¥é•¿åˆ™æ˜¯æ—¶é—´ï¼Œå‰ä¸€æ¬¡æ­¥ä¼å¥½æ¯”å‰ä¸€æ—¶åˆ»çš„é€Ÿåº¦ã€‚æ ‡å‡†æ¢¯åº¦ä¸‹é™ç®—æ³•åœ¨æ¯æ¬¡è¡ŒåŠ¨æ—¶ï¼Œéƒ½å¿½ç•¥å‰ä¸€æ—¶åˆ»çš„é€Ÿåº¦ï¼Œè€Œé‡æ–°æ ¹æ®å½“å‰æ—¶åˆ»çš„åŠ é€Ÿåº¦å’Œæ—¶é—´æ¥è¡Œèµ°ï¼Œå› æ­¤å½“åŠ é€Ÿåº¦è¶‹äºé›¶æ—¶å°±å¾ˆéš¾ç»§ç»­ç§»åŠ¨ã€‚<br>è€ŒåŠ¨é‡æ–¹æ³•åˆ™è€ƒè™‘å‰ä¸€æ—¶åˆ»é€Ÿåº¦å’Œå½“å‰åŠ é€Ÿåº¦çš„å…±åŒä½œç”¨ã€‚</p><p><strong>1ï¼‰ä»é›¶å¼€å§‹å®ç°</strong></p><p>åœ¨ä¸‹é¢çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬ç§°è¿™äº›å˜é‡ä¸º<code>states</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">init_momentum_states</span>(<span class="params">feature_dim</span>): <span class="comment"># è·å–ä¼˜åŒ–çš„ç‰¹å¾ä¸ªæ•°ï¼Œå¯¹åº”é€Ÿåº¦(çŠ¶æ€å˜é‡)çš„ä¸ªæ•°</span></span><br><span class="line">    v_w = paddle.zeros((feature_dim, <span class="number">1</span>))</span><br><span class="line">    v_b = paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    <span class="keyword">return</span> (v_w, v_b)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;SGDåŠ¨é‡&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sgd_momentum</span>(<span class="params">params, states, hyperparams</span>): <span class="comment"># å‚æ•° çŠ¶æ€å˜é‡ è¶…å‚æ•°</span></span><br><span class="line">    <span class="keyword">for</span> p, v <span class="keyword">in</span> <span class="built_in">zip</span>(params, states):</span><br><span class="line">        <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">            v[:] = hyperparams[<span class="string">&#x27;momentum&#x27;</span>] * v + hyperparams[<span class="string">&#x27;learning_rate&#x27;</span>] * p.grad</span><br><span class="line">            p[:] -=  v</span><br><span class="line">        p.grad.zero_()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_momentum</span>(<span class="params">lr, momentum, num_epochs=<span class="number">2</span></span>):</span><br><span class="line">    ppl.train_ch11(</span><br><span class="line">        sgd_momentum, init_momentum_states(feature_dim),</span><br><span class="line">        &#123;<span class="string">&#x27;learning_rate&#x27;</span>: lr, <span class="string">&#x27;momentum&#x27;</span>: momentum&#125;, data_iter,</span><br><span class="line">        feature_dim, num_epochs</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">data_iter, feature_dim = ppl.get_data_ch11(batch_size=<span class="number">10</span>) <span class="comment"># åˆ†åˆ«å¯¹åº”æ•°æ®è¿­ä»£å™¨å’Œç‰¹å¾ä¸ªæ•°</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_momentum(<span class="number">0.02</span>, <span class="number">0.5</span>)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/25.svg" alt="svg"></p><p>åœ¨å®é™…è¿‡ç¨‹ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„åŠ¨é‡å‚æ•°å¯¹æ¨¡å‹çš„æ”¶æ•›ååˆ†å…³é”®ã€‚å½“æˆ‘ä»¬å°†åŠ¨é‡è¶…å‚æ•°<code>momentum</code>å¢åŠ åˆ°0.9æ—¶ï¼Œå®ƒç›¸å½“äºæœ‰æ•ˆæ ·æœ¬æ•°é‡å¢åŠ åˆ°$\frac{1} {1 - 0.9} &#x3D; 10$ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒæŸå¤±ä¸€ç›´åœ¨åŠ¨è¡ï¼Œç”šè‡³å‡ºç°äº†å‰§å¢ï¼Œæ¨¡å‹ä¸æ”¶æ•›ï¼Œä¸”æ•ˆæœä¸ç¨³å®šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_momentum(<span class="number">0.02</span>, <span class="number">0.9</span>)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/26.svg" alt="svg"></p><p>é™ä½å­¦ä¹ ç‡è¿›ä¸€æ­¥è§£å†³äº†ä»»ä½•éå¹³æ»‘ä¼˜åŒ–é—®é¢˜çš„å›°éš¾ï¼Œå°†å…¶è®¾ç½®ä¸º$0.005$ä¼šäº§ç”Ÿè‰¯å¥½çš„æ”¶æ•›æ€§èƒ½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_momentum(<span class="number">0.005</span>, <span class="number">0.9</span>)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/27.svg" alt="svg"></p><p><strong>2ï¼‰ç®€æ´å®ç°</strong></p><p>æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­çš„ä¼˜åŒ–å™¨æ—©å·²æ„å»ºäº†åŠ¨é‡æ³•ã€‚<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/optimizer/Overview_cn.html">paddle.optimizer</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trainer = paddle.optimizer.Momentum</span><br><span class="line">ppl.train_concise_ch11(trainer, &#123;<span class="string">&#x27;learning_rate&#x27;</span>: <span class="number">0.005</span>, <span class="string">&#x27;momentum&#x27;</span>: <span class="number">0.9</span>&#125;, data_iter)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/28.svg" alt="svg"></p><h4 id="3-2-4-å°ç»“"><a href="#3-2-4-å°ç»“" class="headerlink" title="3.2.4 å°ç»“"></a>3.2.4 å°ç»“</h4><ul><li>åŠ¨é‡æ³•ç”¨è¿‡å»æ¢¯åº¦çš„å¹³å‡å€¼æ¥æ›¿æ¢æ¢¯åº¦ï¼Œè¿™å¤§å¤§åŠ å¿«äº†æ”¶æ•›é€Ÿåº¦ã€‚</li><li>å¯¹äºæ— å™ªå£°æ¢¯åº¦ä¸‹é™å’Œå˜ˆæ‚éšæœºæ¢¯åº¦ä¸‹é™ï¼ŒåŠ¨é‡æ³•éƒ½æ˜¯å¯å–çš„ã€‚</li><li>åŠ¨é‡æ³•å¯ä»¥é˜²æ­¢åœ¨éšæœºæ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–è¿‡ç¨‹åœæ»çš„é—®é¢˜ã€‚</li><li>åŠ¨é‡æ³•çš„å®ç°éå¸¸ç®€å•ï¼Œä½†å®ƒéœ€è¦æˆ‘ä»¬å­˜å‚¨é¢å¤–çš„çŠ¶æ€å‘é‡ï¼ˆåŠ¨é‡$\mathbf{v}$ï¼‰ã€‚</li><li>ç”±äºå¯¹è¿‡å»çš„æ•°æ®è¿›è¡Œäº†æŒ‡æ•°é™æƒï¼Œæœ‰æ•ˆæ¢¯åº¦æ•°ä¸º$\frac{1} {1-\beta}$ã€‚</li></ul><h3 id="3-3-AdaGrad"><a href="#3-3-AdaGrad" class="headerlink" title="3.3 AdaGrad"></a>3.3 AdaGrad</h3><p>ğŸ¨<code>sec_adagrad</code></p><p>åœ¨ä¹‹å‰ä»‹ç»è¿‡çš„ä¼˜åŒ–ç®—æ³•ä¸­ï¼Œç›®æ ‡å‡½æ•°è‡ªå˜é‡çš„æ¯ä¸€ä¸ªå…ƒç´ åœ¨ç›¸åŒæ—¶é—´æ­¥éƒ½ä½¿ç”¨åŒä¸€ä¸ªå­¦ä¹ ç‡æ¥è‡ªæˆ‘è¿­ä»£ã€‚åœ¨åŠ¨é‡æ³•ä¸€èŠ‚é‡Œæˆ‘ä»¬çœ‹åˆ°ï¼Œå½“$x1$å’Œ$x2$çš„æ¢¯åº¦å€¼æœ‰è¾ƒå¤§å·®åˆ«æ—¶ï¼Œéœ€è¦é€‰æ‹©è¶³å¤Ÿå°çš„å­¦ä¹ ç‡ä½¿å¾—è‡ªå˜é‡åœ¨æ¢¯åº¦å€¼è¾ƒå¤§çš„ç»´åº¦ä¸Šä¸å‘æ•£ã€‚ä½†è¿™æ ·ä¼šå¯¼è‡´è‡ªå˜é‡åœ¨æ¢¯åº¦å€¼è¾ƒå°çš„ç»´åº¦ä¸Šè¿­ä»£è¿‡æ…¢ã€‚</p><p><strong>åŠ¨é‡æ³•ä¾èµ–æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ä½¿å¾—è‡ªå˜é‡çš„æ›´æ–°æ–¹å‘æ›´åŠ ä¸€è‡´ï¼Œä»è€Œé™ä½å‘æ•£çš„å¯èƒ½</strong>ã€‚æœ¬èŠ‚æˆ‘ä»¬ä»‹ç»$AdaGrad$ç®—æ³•ï¼Œ<strong>å®ƒæ ¹æ®è‡ªå˜é‡åœ¨æ¯ä¸ªç»´åº¦çš„æ¢¯åº¦å€¼çš„å¤§å°æ¥è°ƒæ•´å„ä¸ªç»´åº¦ä¸Šçš„å­¦ä¹ ç‡</strong>ï¼Œä»è€Œé¿å…ç»Ÿä¸€çš„å­¦ä¹ ç‡éš¾ä»¥é€‚åº”æ‰€æœ‰ç»´åº¦çš„é—®é¢˜ã€‚è¿™æœ‰ä¸¤ä¸ªå¥½å¤„ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬ä¸å†éœ€è¦å†³å®šæ¢¯åº¦ä½•æ—¶ç®—è¶³å¤Ÿå¤§ã€‚å…¶æ¬¡ï¼Œå®ƒä¼šéšæ¢¯åº¦çš„å¤§å°è‡ªåŠ¨å˜åŒ–ã€‚é€šå¸¸å¯¹åº”äºè¾ƒå¤§æ¢¯åº¦çš„åæ ‡ä¼šæ˜¾è‘—ç¼©å°ï¼Œè€Œå…¶ä»–æ¢¯åº¦è¾ƒå°çš„åæ ‡åˆ™ä¼šå¾—åˆ°æ›´å¹³æ»‘çš„å¤„ç†ã€‚</p><h5 id="1ï¼‰ç¨€ç–ç‰¹å¾å’Œå­¦ä¹ ç‡"><a href="#1ï¼‰ç¨€ç–ç‰¹å¾å’Œå­¦ä¹ ç‡" class="headerlink" title="1ï¼‰ç¨€ç–ç‰¹å¾å’Œå­¦ä¹ ç‡"></a><strong>1ï¼‰ç¨€ç–ç‰¹å¾å’Œå­¦ä¹ ç‡</strong></h5><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨è®­ç»ƒä¸€ä¸ªè¯­è¨€æ¨¡å‹ã€‚ä¸ºäº†è·å¾—è‰¯å¥½çš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬å¤§å¤šå¸Œæœ›åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­é™ä½å­¦ä¹ ç‡ï¼ŒåŸå› åœ¨äºç¨€ç–ç‰¹å¾ï¼ˆå³åªåœ¨å¶å°”å‡ºç°çš„ç‰¹å¾ï¼‰çš„å½±å“ï¼Œè¿™å¯¹è‡ªç„¶è¯­è¨€æ¥è¯´å¾ˆå¸¸è§ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çœ‹åˆ°â€œé¢„å…ˆæ¡ä»¶â€è¿™ä¸ªè¯æ¯”â€œå­¦ä¹ â€è¿™ä¸ªè¯çš„å¯èƒ½æ€§è¦å°å¾—å¤šã€‚ä½†æ˜¯ï¼Œå®ƒåœ¨è®¡ç®—å¹¿å‘Šå­¦å’Œä¸ªæ€§åŒ–ååŒè¿‡æ»¤ç­‰å…¶ä»–é¢†åŸŸä¹Ÿå¾ˆå¸¸è§ã€‚åªæœ‰åœ¨è¿™äº›ä¸å¸¸è§çš„ç‰¹å¾å‡ºç°æ—¶ï¼Œä¸å…¶ç›¸å…³çš„å‚æ•°æ‰ä¼šå¾—åˆ°æœ‰æ„ä¹‰çš„æ›´æ–°ã€‚é‰´äºå­¦ä¹ ç‡ä¸‹é™ï¼Œæˆ‘ä»¬å¯èƒ½æœ€ç»ˆä¼šé¢ä¸´è¿™æ ·çš„æƒ…å†µï¼šå¸¸è§ç‰¹å¾çš„å‚æ•°ç›¸å½“è¿…é€Ÿåœ°æ”¶æ•›åˆ°æœ€ä½³å€¼ï¼Œè€Œå¯¹äºä¸å¸¸è§çš„ç‰¹å¾ï¼Œæˆ‘ä»¬ä»ç¼ºä¹è¶³å¤Ÿçš„è§‚æµ‹ä»¥ç¡®å®šå…¶æœ€ä½³å€¼ã€‚æ¢å¥è¯è¯´ï¼Œå­¦ä¹ ç‡è¦ä¹ˆå¯¹äºå¸¸è§ç‰¹å¾è€Œè¨€é™ä½å¤ªæ…¢ï¼Œè¦ä¹ˆå¯¹äºä¸å¸¸è§ç‰¹å¾è€Œè¨€é™ä½å¤ªå¿«ã€‚</p><p>è§£å†³æ­¤é—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯è®°å½•æˆ‘ä»¬çœ‹åˆ°ç‰¹å®šç‰¹å¾çš„æ¬¡æ•°ï¼Œç„¶åå°†å…¶ç”¨ä½œè°ƒæ•´å­¦ä¹ ç‡ã€AdaGradç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€‘ã€‚</p><h5 id="2ï¼‰AdaGradç®—æ³•"><a href="#2ï¼‰AdaGradç®—æ³•" class="headerlink" title="2ï¼‰AdaGradç®—æ³•"></a><strong>2ï¼‰AdaGradç®—æ³•</strong></h5><p>AdaGradä¼˜åŒ–ç®—æ³•åœ¨æ¯æ¬¡ä½¿ç”¨ä¸€ä¸ªæ‰¹é‡çš„æ•°æ®è¿›è¡Œå‚æ•°æ›´æ–°çš„æ—¶å€™ï¼Œè®¡ç®—æ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ï¼Œä½¿ç”¨å˜é‡$\mathbf{s}_t$æ¥ç´¯åŠ è¿‡å»çš„å°æ‰¹é‡éšæœºæ¢¯åº¦$\mathbf{g}_t^2$ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬å°†ç›®æ ‡å‡½æ•°è‡ªå˜é‡ä¸­æ¯ä¸ªå…ƒç´ çš„å­¦ä¹ ç‡é€šè¿‡æŒ‰å…ƒç´ è¿ç®—é‡æ–°è°ƒæ•´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>$$<br>\begin{aligned}<br>    \mathbf{g}<em>t &amp; &#x3D; \partial</em>{\mathbf{w} } l(y_t, f(\mathbf{x}_t, \mathbf{w})), \<br>    \mathbf{s}<em>t &amp; &#x3D; \mathbf{s}</em>{t-1} + \mathbf{g}_t^2, \<br>    \mathbf{w}<em>t &amp; &#x3D; \mathbf{w}</em>{t-1} - \frac{\eta} {\sqrt{\mathbf{s}_t + \epsilon} } \cdot \mathbf{g}_t.<br>\end{aligned}<br>$$<br>åœ¨è¿™é‡Œï¼Œæ“ä½œæ˜¯æŒ‰ç…§åæ ‡é¡ºåºåº”ç”¨ï¼Œè¿™é‡Œå¼€æ–¹ã€é™¤æ³•å’Œä¹˜æ³•çš„è¿ç®—éƒ½æ˜¯æŒ‰å…ƒç´ è¿ç®—çš„ã€‚è¿™äº›æŒ‰å…ƒç´ è¿ç®—ä½¿å¾—ç›®æ ‡å‡½æ•°è‡ªå˜é‡ä¸­æ¯ä¸ªå…ƒç´ éƒ½åˆ†åˆ«æ‹¥æœ‰è‡ªå·±çš„å­¦ä¹ ç‡ã€‚ä¸ä¹‹å‰ä¸€æ ·ï¼Œ$\eta$æ˜¯å­¦ä¹ ç‡ï¼Œ$\epsilon$æ˜¯ä¸€ä¸ªä¸ºç»´æŒæ•°å€¼ç¨³å®šæ€§è€Œæ·»åŠ çš„å¸¸æ•°ï¼Œç”¨æ¥ç¡®ä¿æˆ‘ä»¬ä¸ä¼šé™¤ä»¥$0$ã€‚å› ä¸ºæœ‰å¯èƒ½ $\mathbf{s}$ çš„å€¼ä¸º 0ï¼Œé‚£ä¹ˆ 0 å‡ºç°åœ¨åˆ†æ¯å°±ä¼šå‡ºç°æ— ç©·å¤§çš„æƒ…å†µã€‚è¿™æ ·ä¸åŒçš„å‚æ•°ç”±äºæ¢¯åº¦ä¸åŒï¼Œä»–ä»¬å¯¹åº”çš„ $\mathbf{s}$ å¤§å°ä¹Ÿå°±ä¸åŒï¼Œæ‰€ä»¥ä¸Šé¢çš„å…¬å¼å¾—åˆ°çš„å­¦ä¹ ç‡ä¹Ÿå°±ä¸åŒï¼Œè¿™ä¹Ÿå°±å®ç°äº†è‡ªé€‚åº”çš„å­¦ä¹ ç‡ã€‚æœ€åï¼Œæˆ‘ä»¬åˆå§‹åŒ–$\mathbf{s}_0 &#x3D; \mathbf{0}$ã€‚</p><p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå°æ‰¹é‡éšæœºæ¢¯åº¦æŒ‰å…ƒç´ å¹³æ–¹çš„ç´¯åŠ å˜é‡$\large s_{t}$å‡ºç°åœ¨å­¦ä¹ ç‡çš„åˆ†æ¯é¡¹ä¸­ã€‚å› æ­¤ï¼š</p><ul><li>å¦‚æœç›®æ ‡å‡½æ•°æœ‰å…³è‡ªå˜é‡ä¸­æŸä¸ªå…ƒç´ çš„åå¯¼æ•°ä¸€ç›´éƒ½è¾ƒå¤§ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ çš„å­¦ä¹ ç‡å°†ä¸‹é™è¾ƒå¿«ã€‚</li><li>å¦‚æœç›®æ ‡å‡½æ•°æœ‰å…³è‡ªå˜é‡ä¸­æŸä¸ªå…ƒç´ çš„åå¯¼æ•°ä¸€ç›´éƒ½è¾ƒå°ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ çš„å­¦ä¹ ç‡å°†ä¸‹é™è¾ƒæ…¢ã€‚</li></ul><p>æˆ‘ä»¬ä½¿ç”¨è‡ªé€‚åº”çš„å­¦ä¹ ç‡å°±å¯ä»¥å¸®åŠ©ç®—æ³•åœ¨æ¢¯åº¦å¤§çš„å‚æ•°æ–¹å‘å‡ç¼“å­¦ä¹ é€Ÿç‡ï¼Œè€Œåœ¨æ¢¯åº¦å°çš„å‚æ•°æ–¹å‘åŠ å¿«å­¦ä¹ é€Ÿç‡ï¼Œè¿™å°±å¯¼è‡´äº†ç¥ç»ç½‘ç»œçš„è®­ç»ƒé€Ÿåº¦çš„åŠ å¿«ã€‚ç„¶è€Œï¼Œç”±äºç´¯åŠ å˜é‡$\large s_{t}$ä¸€ç›´åœ¨ç´¯åŠ æŒ‰å…ƒç´ å¹³æ–¹çš„æ¢¯åº¦ï¼Œè‡ªå˜é‡ä¸­æ¯ä¸ªå…ƒç´ çš„å­¦ä¹ ç‡åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸€ç›´åœ¨é™ä½ï¼ˆæˆ–ä¸å˜ï¼‰ã€‚æ‰€ä»¥ï¼Œå½“å­¦ä¹ ç‡åœ¨è¿­ä»£æ—©æœŸé™å¾—è¾ƒå¿«ä¸”å½“å‰è§£ä¾ç„¶ä¸ä½³æ—¶ï¼ŒAdaGradç®—æ³•åœ¨è¿­ä»£åæœŸç”±äºå­¦ä¹ ç‡è¾ƒå°ï¼Œå¯èƒ½è¾ƒéš¾æ‰¾åˆ°ä¸€ä¸ªæœ‰ç”¨çš„è§£ã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æ›´æ…¢åœ°é™ä½å­¦ä¹ ç‡ï¼Œè¿™å¼•å‡ºäº†è®¸å¤šAdaGradç®—æ³•çš„å˜ä½“ï¼Œæˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚ä¸­è®¨è®ºå®ƒä»¬ã€‚</p><p>çœ¼ä¸‹è®©æˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒåœ¨äºŒæ¬¡å‡¸é—®é¢˜ä¸­çš„è¡¨ç°å¦‚ä½•ã€‚æˆ‘ä»¬ä»ç„¶åŒä¸€å‡½æ•°ä¸ºä¾‹ï¼š</p><p>$$<br>f(\mathbf{x}) &#x3D; 0.1 x_1^2 + 2 x_2^2.<br>$$<br>æˆ‘ä»¬å°†ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„å­¦ä¹ ç‡æ¥å®ç°AdaGradç®—æ³•ï¼Œå³$\eta &#x3D; 0.4$ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">adagrad_2d</span>(<span class="params">x1, x2, s1, s2</span>):</span><br><span class="line">    eps = <span class="number">1e-6</span> <span class="comment"># ä¸ºç»´æŒæ•°å€¼ç¨³å®šæ€§è€Œæ·»åŠ çš„å¸¸æ•°</span></span><br><span class="line">    g1, g2 = <span class="number">0.2</span> * x1, <span class="number">4</span> * x2 <span class="comment"># è‡ªå˜é‡æ¢¯åº¦</span></span><br><span class="line">    <span class="comment"># ç´¯åŠ å˜é‡ s1 s2 å˜é‡ x1 x2</span></span><br><span class="line">    s1 += g1 ** <span class="number">2</span> </span><br><span class="line">    s2 += g2 ** <span class="number">2</span></span><br><span class="line">    x1 -= eta / math.sqrt(s1 + eps) * g1</span><br><span class="line">    x2 -= eta / math.sqrt(s2 + eps) * g2</span><br><span class="line">    <span class="keyword">return</span> x1, x2, s1, s2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f_2d</span>(<span class="params">x1, x2</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.1</span> * x1 ** <span class="number">2</span> + <span class="number">2</span> * x2 ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line">eta = <span class="number">0.4</span></span><br><span class="line">ppl.show_trace_2d(f_2d, ppl.train_2d(adagrad_2d))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 20, x1:-2.382563, x2: -0.158591</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/29.svg" alt="svg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè‡ªå˜é‡çš„è¿­ä»£è½¨è¿¹è¾ƒå¹³æ»‘ã€‚ä½†ç”±äº$\boldsymbol{s}_t$çš„ç´¯åŠ æ•ˆæœä½¿å­¦ä¹ ç‡ä¸æ–­è¡°å‡ï¼Œè‡ªå˜é‡åœ¨è¿­ä»£åæœŸçš„ç§»åŠ¨å¹…åº¦è¾ƒå°ã€‚æˆ‘ä»¬å°†å­¦ä¹ ç‡æé«˜åˆ°$2$ï¼Œå¯ä»¥çœ‹åˆ°æ›´å¥½çš„è¡¨ç°ï¼Œè¿™è¯´æ˜å­¦ä¹ ç‡é™ä½çš„æƒ…å†µå¯èƒ½ç›¸å½“å‰§çƒˆï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å‚æ•°èƒ½å¤Ÿé€‚å½“åœ°æ”¶æ•›ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">eta = <span class="number">2</span></span><br><span class="line">ppl.show_trace_2d(f_2d, ppl.train_2d(adagrad_2d))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 20, x1:-0.002295, x2: -0.000000</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/30.svg" alt="svg"></p><h4 id="3ï¼‰å®ç°"><a href="#3ï¼‰å®ç°" class="headerlink" title="3ï¼‰å®ç°"></a><strong>3ï¼‰å®ç°</strong></h4><p>åŒåŠ¨é‡æ³•ä¸€æ ·ï¼ŒAdaGradç®—æ³•éœ€è¦å¯¹æ¯ä¸ªè‡ªå˜é‡ç»´æŠ¤åŒå®ƒä¸€æ ·å½¢çŠ¶çš„çŠ¶æ€å˜é‡ã€‚ä¸åŒç‚¹åœ¨äºï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨<em><strong>æ›´å¤§çš„å­¦ä¹ ç‡</strong></em>æ¥è®­ç»ƒæ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">init_adagrad_states</span>(<span class="params">feature_dim</span>):</span><br><span class="line">    s_w = paddle.zeros((feature_dim, <span class="number">1</span>))</span><br><span class="line">    s_b = paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    <span class="keyword">return</span> (s_w, s_b)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;adagradç®—æ³•&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">adagrad</span>(<span class="params">params, states, hyperparams</span>):</span><br><span class="line">    eps = <span class="number">1e-6</span></span><br><span class="line">    <span class="keyword">for</span> p, s <span class="keyword">in</span> <span class="built_in">zip</span>(params, states):</span><br><span class="line">        <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">            s[:] += paddle.square(p.grad)</span><br><span class="line">            p[:] -= hyperparams[<span class="string">&#x27;learning_rate&#x27;</span>] * p.grad / paddle.sqrt(s + eps)</span><br><span class="line">        p.grad.zero_()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_ch11</span>(<span class="params">trainer_fn, states, hyperparams, data_iter,</span></span><br><span class="line"><span class="params">               feature_dim, num_epochs=<span class="number">2</span></span>):</span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–æ¨¡å‹</span></span><br><span class="line">    w = paddle.normal(mean=<span class="number">0.0</span>, std=<span class="number">0.01</span>, shape=(feature_dim, <span class="number">1</span>))</span><br><span class="line">    w.stop_gradient = <span class="literal">False</span></span><br><span class="line">    b = paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    b.stop_gradient = <span class="literal">False</span></span><br><span class="line">    net, loss = <span class="keyword">lambda</span> X: ppl.linreg(X, w, b), ppl.squared_loss</span><br><span class="line">    <span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">    animator = ppl.Animator(xlabel=<span class="string">&#x27;epoch&#x27;</span>, ylabel=<span class="string">&#x27;loss&#x27;</span>,</span><br><span class="line">                            xlim=[<span class="number">0</span>, num_epochs], ylim=[<span class="number">0.22</span>, <span class="number">0.35</span>])</span><br><span class="line">    n, timer = <span class="number">0</span>, ppl.Timer()</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">            l = loss(net(X), y).mean()</span><br><span class="line">            l.backward()</span><br><span class="line">            trainer_fn([w, b], states, hyperparams) <span class="comment"># ä¼˜åŒ–ç®—æ³•</span></span><br><span class="line">            n += X.shape[<span class="number">0</span>] <span class="comment"># æ¯æ¬¡å¢åŠ bä¸ªæ ·æœ¬</span></span><br><span class="line">            <span class="keyword">if</span> n % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">                timer.stop()</span><br><span class="line">                animator.add(n/X.shape[<span class="number">0</span>]/<span class="built_in">len</span>(data_iter), <span class="comment"># xè½´ä¸€è½®è¿­ä»£çš„æ—¶é—´åæ ‡</span></span><br><span class="line">                             (ppl.evaluate_loss(net, data_iter, loss),))</span><br><span class="line">                timer.start()</span><br><span class="line">    <span class="keyword">return</span> timer.avg(), animator.Y[<span class="number">0</span>][-<span class="number">1</span>] <span class="comment"># è¿”å›æ¯ä¸€è½®è¿­ä»£æ—¶é—´çš„å¹³å‡å€¼ã€æœ€ç»ˆçš„è¯¯å·®å€¼</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data_iter, feature_dim = ppl.get_data_ch11(batch_size=<span class="number">10</span>)</span><br><span class="line">train_ch11(</span><br><span class="line">    adagrad, init_adagrad_states(feature_dim),</span><br><span class="line">    &#123;<span class="string">&#x27;learning_rate&#x27;</span>: <span class="number">0.1</span>&#125;, data_iter, feature_dim)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(0.062071673075358075, 0.24227345788478852)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/31.svg" alt="svg"></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­æä¾›çš„AdaGradç®—æ³•æ¥è®­ç»ƒæ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trainer = paddle.optimizer.Adagrad</span><br><span class="line">ppl.train_concise_ch11(trainer, &#123;<span class="string">&#x27;learning_rate&#x27;</span>: <span class="number">0.1</span>&#125;, data_iter)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/32.svg" alt="svg"></p><p>â€‹AdaGrad çš„æ ¸å¿ƒæƒ³æ³•å°±æ˜¯ï¼Œå¦‚æœä¸€ä¸ªå‚æ•°çš„æ¢¯åº¦ä¸€ç›´éƒ½éå¸¸å¤§ï¼Œé‚£ä¹ˆå…¶å¯¹åº”çš„å­¦ä¹ ç‡å°±å˜å°ä¸€ç‚¹ï¼Œé˜²æ­¢éœ‡è¡ï¼Œè€Œä¸€ä¸ªå‚æ•°çš„æ¢¯åº¦ä¸€ç›´éƒ½éå¸¸å°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°çš„å­¦ä¹ ç‡å°±å˜å¤§ä¸€ç‚¹ï¼Œä½¿å¾—å…¶èƒ½å¤Ÿæ›´å¿«åœ°æ›´æ–°ï¼Œè¿™å°±æ˜¯Adagradç®—æ³•åŠ å¿«æ·±å±‚ç¥ç»ç½‘ç»œçš„è®­ç»ƒé€Ÿåº¦çš„æ ¸å¿ƒã€‚<br>ç±»ä¼¼äºæ‰“é«˜å°”å¤«çƒï¼Œä¸“ä¸šè¿åŠ¨å‘˜ç¬¬ä¸€æ†å¼€çƒæ—¶ï¼Œé€šå¸¸ä¼šå¤§åŠ›æ‰“ä¸€ä¸ªè¿œçƒï¼Œè®©çƒå°½é‡è½åœ¨æ´å£é™„è¿‘ã€‚å½“ç¬¬äºŒæ†é¢å¯¹ç¦»æ´å£è¾ƒè¿‘çš„çƒæ—¶ï¼Œä»–ä¼šæ›´è½»æŸ”è€Œç»†è‡´çš„æ¨æ†ï¼Œé¿å…å°†çƒæ‰“é£ã€‚æ ¹æ®è¿™ä¸ªæ€æƒ³ç¼–å†™çš„ä¼˜åŒ–ç®—æ³•ç§°ä¸ºâ€œAdaGradâ€ï¼ŒAdaæ˜¯Adaptiveçš„ç¼©å†™ï¼Œè¡¨ç¤ºâ€œé€‚åº”ç¯å¢ƒè€Œå˜åŒ–â€çš„æ„æ€ã€‚</p><h4 id="3-4-RMSProp"><a href="#3-4-RMSProp" class="headerlink" title="3.4 RMSProp"></a>3.4 RMSProp</h4><p>ğŸ¨<code>sec_rmsprop</code></p><p>ä¸Šä¸€èŠ‚AdaGradç®—æ³•ä¸­ï¼Œæˆ‘ä»¬æåˆ°ï¼Œå› ä¸ºè°ƒæ•´å­¦ä¹ ç‡æ—¶åˆ†æ¯ä¸Šçš„ç´¯åŠ å˜é‡ä¸€ç›´åœ¨ç´¯åŠ æŒ‰å…ƒç´ å¹³æ–¹çš„å°æ‰¹é‡éšæœºæ¢¯åº¦ï¼Œæ‰€ä»¥ç›®æ ‡å‡½æ•°è‡ªå˜é‡æ¯ä¸ªå…ƒç´ çš„å­¦ä¹ ç‡åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸€ç›´åœ¨é™ä½ï¼ˆæˆ–ä¸å˜ï¼‰ã€‚<br>å› æ­¤ï¼Œå½“å­¦ä¹ ç‡åœ¨è¿­ä»£æ—©æœŸé™å¾—è¾ƒå¿«ä¸”å½“å‰è§£ä¾ç„¶ä¸ä½³æ—¶ï¼ŒAdaGradç®—æ³•åœ¨è¿­ä»£åæœŸç”±äºå­¦ä¹ ç‡è¿‡å°ï¼Œå¯èƒ½è¾ƒéš¾æ‰¾åˆ°ä¸€ä¸ªæœ‰ç”¨çš„è§£ã€‚ç®€è¨€ä¹‹ï¼šå†²çš„å¤ªçŒ›äº†ã€‚</p><p>é—®é¢˜åœ¨äºï¼ŒAdagradç®—æ³•å°†æ¢¯åº¦$\mathbf{g}_t$çš„å¹³æ–¹ç´¯åŠ æˆçŠ¶æ€çŸ¢é‡$\mathbf{s}<em>t &#x3D; \mathbf{s}</em>{t-1} + \mathbf{g}_t^2$ã€‚å› æ­¤ï¼Œç”±äºç¼ºä¹è§„èŒƒåŒ–ï¼Œæ²¡æœ‰çº¦æŸåŠ›ï¼Œ$\mathbf{s}_t$æŒç»­å¢é•¿ï¼Œå‡ ä¹ä¸Šæ˜¯åœ¨ç®—æ³•æ”¶æ•›æ—¶å‘ˆçº¿æ€§é€’å¢ã€‚</p><p>RMSPropæ˜¯åœ¨AdaGradåŸºç¡€ä¸Šçš„æ”¹è¿›ï¼Œå­¦ä¹ ç‡éšç€æ¢¯åº¦å˜åŒ–è€Œé€‚åº”ï¼Œè§£å†³AdaGradå­¦ä¹ ç‡æ€¥å‰§ä¸‹é™çš„é—®é¢˜ã€‚</p><h5 id="1ï¼‰RMSPropç®—æ³•"><a href="#1ï¼‰RMSPropç®—æ³•" class="headerlink" title="1ï¼‰RMSPropç®—æ³•"></a><strong>1ï¼‰RMSPropç®—æ³•</strong></h5><p>RMSPropç®—æ³•å’ŒAdaGradç®—æ³•çš„ä¸åŒåœ¨äºï¼ŒRMSPropç®—æ³•ä½¿ç”¨äº†å°æ‰¹é‡éšæœºæ¢¯åº¦æŒ‰å…ƒç´ å¹³æ–¹çš„æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡æ¥è°ƒæ•´å­¦ä¹ ç‡ã€‚è®©æˆ‘ä»¬è¯¦ç»†å†™å‡ºè¿™äº›æ–¹ç¨‹å¼ã€‚</p><p>$$<br>\begin{aligned}<br>    \mathbf{s}<em>t &amp; \leftarrow \gamma \mathbf{s}</em>{t-1} + (1 - \gamma) \mathbf{g}_t^2, \<br>    \mathbf{x}<em>t &amp; \leftarrow \mathbf{x}</em>{t-1} - \frac{\eta} {\sqrt{\mathbf{s}_t + \epsilon} } \odot \mathbf{g}_t.<br>\end{aligned}<br>$$<br>å¸¸æ•°$\epsilon &gt; 0$é€šå¸¸è®¾ç½®ä¸º$10^{-6}$ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ä¸ä¼šå› é™¤ä»¥é›¶æˆ–æ­¥é•¿è¿‡å¤§è€Œå—åˆ°å½±å“ã€‚é‰´äºè¿™ç§æ‰©å±•ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è‡ªç”±æ§åˆ¶å­¦ä¹ ç‡$\eta$ï¼Œè€Œä¸è€ƒè™‘åŸºäºæ¯ä¸ªåæ ‡åº”ç”¨çš„ç¼©æ”¾ã€‚</p><h5 id="2ï¼‰å®ç°"><a href="#2ï¼‰å®ç°" class="headerlink" title="2ï¼‰å®ç°"></a><strong>2ï¼‰å®ç°</strong></h5><p>å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨äºŒæ¬¡å‡½æ•°$f(\mathbf{x})&#x3D;0.1x_1^2+2x_2^2$æ¥è§‚å¯ŸRMSPropç®—æ³•çš„è½¨è¿¹ã€‚å›æƒ³åœ¨ :numref:<code>sec_adagrad</code>ä¸€èŠ‚ä¸­ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å­¦ä¹ ç‡ä¸º0.4çš„AdaGradç®—æ³•æ—¶ï¼Œå˜é‡åœ¨ç®—æ³•çš„åæœŸé˜¶æ®µç§»åŠ¨éå¸¸ç¼“æ…¢ï¼Œå› ä¸ºå­¦ä¹ ç‡è¡°å‡å¤ªå¿«ã€‚RMSPropç®—æ³•ä¸­ä¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå› ä¸º$\eta$æ˜¯å•ç‹¬æ§åˆ¶çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cProfile <span class="keyword">import</span> label <span class="comment"># æ€§èƒ½åˆ†ææ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rmsprop_2d</span>(<span class="params">x1, x2, s1, s2</span>):</span><br><span class="line">    g1, g2, eps = <span class="number">0.2</span> * x1, <span class="number">4</span> * x2, <span class="number">1e-6</span></span><br><span class="line">    s1 = gamma * s1 + (<span class="number">1</span> - gamma) * g1 ** <span class="number">2</span></span><br><span class="line">    s2 = gamma * s2 + (<span class="number">1</span> - gamma) * g2 ** <span class="number">2</span></span><br><span class="line">    x1 -= eta / math.sqrt(s1 + eps) * g1</span><br><span class="line">    x2 -= eta / math.sqrt(s2 + eps) * g2</span><br><span class="line">    <span class="keyword">return</span> x1, x2, s1, s2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f_2d</span>(<span class="params">x1, x2</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.1</span> * x1 ** <span class="number">2</span> + <span class="number">2</span> * x2 ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line">eta, gamma = <span class="number">0.4</span>, <span class="number">0.9</span></span><br><span class="line">ppl.show_trace_2d(f_2d, ppl.train_2d(rmsprop_2d))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">epoch 20, x1:-0.010599, x2: 0.000000</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/33.svg" alt="svg"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æ·±åº¦ç½‘ç»œä¸­å®ç°RMSPropç®—æ³•ã€‚åœ¨è¿™é‡Œï¼Œ$\mathbf{s}$ç´¯åŠ äº†è¿‡å»çš„$1&#x2F;(1-\gamma) &#x3D; 10$æ¬¡å¹³æ–¹æ¢¯åº¦è§‚æµ‹å€¼çš„å¹³å‡å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">init_rmsprop_state</span>(<span class="params">feature_dim</span>):</span><br><span class="line">    s_w = paddle.zeros((feature_dim, <span class="number">1</span>))</span><br><span class="line">    s_b = paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    <span class="keyword">return</span> (s_w, s_b)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;RMSPropç®—æ³•&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rmsprop</span>(<span class="params">params, states, hyperparams</span>):</span><br><span class="line">    gamma, eps = hyperparams[<span class="string">&#x27;gamma&#x27;</span>], <span class="number">1e-6</span></span><br><span class="line">    <span class="keyword">for</span> p, s <span class="keyword">in</span> <span class="built_in">zip</span>(params, states):</span><br><span class="line">        <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">            s[:] = gamma * s + (<span class="number">1</span> - gamma) * paddle.square(p.grad)</span><br><span class="line">            p[:] -= hyperparams[<span class="string">&#x27;lr&#x27;</span>] * p.grad / paddle.sqrt(s + eps)</span><br><span class="line">        p.grad.zero_()</span><br><span class="line"></span><br><span class="line">data_iter, feature_dim = ppl.get_data_ch11(batch_size=<span class="number">10</span>)</span><br><span class="line">train_ch11(</span><br><span class="line">    rmsprop, init_rmsprop_state(feature_dim),</span><br><span class="line">    &#123;<span class="string">&#x27;lr&#x27;</span>: <span class="number">0.01</span>, <span class="string">&#x27;gamma&#x27;</span>: <span class="number">0.9</span>&#125;, data_iter, feature_dim</span><br><span class="line">)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(0.07110411326090495, 0.24332575956980387)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/34.svg" alt="svg"></p><p>æˆ‘ä»¬å¯ç›´æ¥ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­æä¾›çš„RMSPropç®—æ³•æ¥è®­ç»ƒæ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">trainer = paddle.optimizer.RMSProp</span><br><span class="line">ppl.train_concise_ch11(</span><br><span class="line">    trainer, &#123;<span class="string">&#x27;learning_rate&#x27;</span>: <span class="number">0.01</span>, <span class="string">&#x27;rho&#x27;</span>: <span class="number">0.9</span>&#125;, data_iter)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/35.svg" alt="svg"></p><h4 id="3-5-Adadelta"><a href="#3-5-Adadelta" class="headerlink" title="3.5 Adadelta"></a>3.5 Adadelta</h4><p>ğŸ¨<code>sec_adadelta</code></p><p>é™¤äº†RMSPropç®—æ³•ä»¥å¤–ï¼Œå¦ä¸€ä¸ªå¸¸ç”¨ä¼˜åŒ–ç®—æ³•AdaDeltaç®—æ³•ä¹Ÿé’ˆå¯¹AdaGradç®—æ³•åœ¨è¿­ä»£åæœŸè¾ƒéš¾æ‰¾åˆ°æœ‰ç”¨è§£çš„é—®é¢˜åšäº†æ”¹è¿›ï¼šä¸»è¦åŒºåˆ«åœ¨äºå‰è€…å‡å°‘äº†å­¦ä¹ ç‡é€‚åº”åæ ‡çš„æ•°é‡ã€‚ æ­¤å¤–ï¼Œå¹¿ä¹‰ä¸ŠAdadeltaè¢«ç§°ä¸ºæ²¡æœ‰å­¦ä¹ ç‡ï¼Œå› ä¸ºå®ƒä½¿ç”¨å˜åŒ–é‡æœ¬èº«ä½œä¸ºæœªæ¥å˜åŒ–çš„æ ¡å‡†ã€‚</p><h5 id="1ï¼‰Adadeltaç®—æ³•"><a href="#1ï¼‰Adadeltaç®—æ³•" class="headerlink" title="1ï¼‰Adadeltaç®—æ³•"></a><strong>1ï¼‰Adadeltaç®—æ³•</strong></h5><p>Adadeltaä½¿ç”¨ä¸¤ä¸ªçŠ¶æ€å˜é‡ï¼Œ$\mathbf{s}_t$æ¥æ¥æ”¶å°æ‰¹é‡éšæœºæ¢¯åº¦æŒ‰å…ƒç´ å¹³æ–¹çš„æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡å˜é‡ï¼š</p><p>$$<br>\begin{aligned}<br>    \mathbf{s}<em>t &amp; &#x3D; \rho \mathbf{s}</em>{t-1} + (1 - \rho) \mathbf{g}<em>t^2.<br>\end{aligned}<br>$$<br>ä¸ä¹‹å‰ç®—æ³•çš„ä¸åŒç‚¹åœ¨äºï¼Œé¢å¤–å¢åŠ äº†ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼š$\Delta\mathbf{x}<em>t$ï¼Œæˆ‘ä»¬å°†$\Delta \mathbf{x}</em>{0}$åˆå§‹åŒ–ä¸º$0$ï¼Œä½¿ç”¨$\Delta \mathbf{x}</em>{t-1}$ã€ä¸Šä¸€æ¬¡æ›´æ–°çš„é•¿åº¦ã€‘æ¥è®¡ç®—è‡ªå˜é‡çš„å˜åŒ–é‡ï¼Œ$\epsilon$ï¼ˆä¾‹å¦‚$10^{-5}$è¿™æ ·çš„å°å€¼ï¼‰æ˜¯ä¸ºäº†ä¿æŒæ•°å­—ç¨³å®šæ€§è€ŒåŠ å…¥çš„ï¼š</p><p>$$<br>\begin{aligned}<br>    \mathbf{g}<em>tâ€™ &amp; &#x3D; \frac{\sqrt{\Delta\mathbf{x}</em>{t-1} + \epsilon} } {\sqrt{ {\mathbf{s}_t + \epsilon} }} \odot \mathbf{g}_t, \<br>\end{aligned}<br>$$</p><p>æ¥ç€æˆ‘ä»¬ä½¿ç”¨é‡æ–°ç¼©æ”¾çš„æ¢¯åº¦$\mathbf{g}_tâ€™$æ‰§è¡Œæ›´æ–°ï¼Œå³ï¼š</p><p>$$<br>\begin{aligned}<br>    \mathbf{x}<em>t  &amp; &#x3D; \mathbf{x}</em>{t-1} - \mathbf{g}<em>tâ€™. \<br>\end{aligned}<br>$$<br>æˆ‘ä»¬ä½¿ç”¨$\large \Delta x</em>{t}$æ¥è®°å½•è‡ªå˜é‡å˜åŒ–é‡$\large {g}â€™_{t}$æŒ‰å…ƒç´ å¹³æ–¹çš„æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼Œå³ï¼š</p><p>$$<br>\begin{aligned}<br>    \Delta \mathbf{x}<em>t &amp; &#x3D; \rho \Delta\mathbf{x}</em>{t-1} + (1 - \rho) {\mathbf{g}<em>tâ€™}^2,<br>\end{aligned}<br>$$<br>AdaDeltaç®—æ³•è·ŸRMSPropç®—æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºä½¿ç”¨$\large \sqrt{\Delta x</em>{t-1} }$æ¥æ›¿ä»£å­¦ä¹ ç‡$\large \eta$ã€‚</p><h5 id="2ï¼‰å®ç°-1"><a href="#2ï¼‰å®ç°-1" class="headerlink" title="2ï¼‰å®ç°"></a><strong>2ï¼‰å®ç°</strong></h5><p>Adadeltaéœ€è¦ä¸ºæ¯ä¸ªå˜é‡ç»´æŠ¤ä¸¤ä¸ªçŠ¶æ€å˜é‡ï¼Œå³$\mathbf{s}_t$å’Œ$\Delta\mathbf{x}_t$ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_adadelta_states</span>(<span class="params">feature_dim</span>):</span><br><span class="line">    s_w, s_b = paddle.zeros((feature_dim, <span class="number">1</span>)), paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    delta_w, delta_b = paddle.zeros((feature_dim, <span class="number">1</span>)), paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    <span class="keyword">return</span> ((s_w, delta_w), (s_b, delta_b))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">adadelta</span>(<span class="params">params, states, hyperparams</span>):</span><br><span class="line">    rho, eps = hyperparams[<span class="string">&#x27;rho&#x27;</span>], <span class="number">1e-5</span></span><br><span class="line">    <span class="keyword">for</span> p, (s, delta) <span class="keyword">in</span> <span class="built_in">zip</span>(params, states):</span><br><span class="line">        <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">            s[:] = rho * s + (<span class="number">1</span> - rho) * paddle.square(p.grad)</span><br><span class="line">            g = (paddle.sqrt(delta + eps) / paddle.sqrt(s + eps)) * p.grad</span><br><span class="line">            p[:] -= g</span><br><span class="line">            delta[:] = rho * delta + (<span class="number">1</span> - rho) * g * g</span><br><span class="line">        p.grad.zero_()</span><br><span class="line"></span><br><span class="line">data_iter, feature_dim = ppl.get_data_ch11(batch_size=<span class="number">10</span>)</span><br><span class="line">train_ch11(</span><br><span class="line">    adadelta, init_adadelta_states(feature_dim), </span><br><span class="line">    &#123;<span class="string">&#x27;rho&#x27;</span>: <span class="number">0.9</span>&#125;, data_iter, feature_dim)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(0.08289804458618164, 0.24341165928045908)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/36.svg" alt="svg"></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€æ´å®ç°adadeltaç®—æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trainer = paddle.optimizer.Adadelta</span><br><span class="line">ppl.train_concise_ch11(trainer, &#123;<span class="string">&#x27;rho&#x27;</span>: <span class="number">0.9</span>&#125;, data_iter)<span class="comment"># æ²¡æœ‰å­¦ä¹ ç‡è¿™ä¸ªè¶…å‚æ•°äº†</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/37.svg" alt="svg"></p><blockquote><p>åˆå§‹åŒ–æ²¡æœ‰æ•°æ®æ”¯æ’‘ï¼Œå°±æ˜¯éšä¾¿ä¸‹é™ï¼Œæ‰€ä»¥ä¸‹é™çš„æ¯”è¾ƒç¼“æ…¢ã€‚ã€‚</p></blockquote><h4 id="3-6-Adam"><a href="#3-6-Adam" class="headerlink" title="3.6 Adam"></a>3.6 Adam</h4><p>ğŸ¨<code>sec_adam</code></p><p>ç”±äºåŠ¨é‡å’Œè‡ªé€‚åº”å­¦ä¹ ç‡ä¸¤ä¸ªä¼˜åŒ–æ€è·¯æ˜¯æ­£äº¤çš„ï¼Œå› æ­¤å¯ä»¥å°†ä¸¤ä¸ªæ€è·¯ç»“åˆèµ·æ¥ï¼Œè¿™å°±æ˜¯å½“å‰å¹¿æ³›åº”ç”¨çš„ç®—æ³•ã€‚</p><h5 id="1ï¼‰Adamç®—æ³•"><a href="#1ï¼‰Adamç®—æ³•" class="headerlink" title="1ï¼‰Adamç®—æ³•"></a><strong>1ï¼‰Adamç®—æ³•</strong></h5><p>Adamç®—æ³•çš„å…³é”®ç»„æˆéƒ¨åˆ†ä¹‹ä¸€æ˜¯ï¼šå®ƒä½¿ç”¨ä½¿ç”¨äº†åŠ¨é‡æ³•ä¸­çš„åŠ¨é‡å˜é‡$\mathbf{v}_t$å’ŒRMSPropç®—æ³•ä¸­çš„å°æ‰¹é‡éšæœºæ¢¯åº¦æŒ‰å…ƒç´ å¹³æ–¹çš„æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡å˜é‡$\mathbf{s}_t$ï¼Œå³ï¼š</p><p>$$<br>\begin{aligned}<br>    \mathbf{v}<em>t &amp; \leftarrow \beta_1 \mathbf{v}</em>{t-1} + (1 - \beta_1) \mathbf{g}_t, \<br>    \mathbf{s}<em>t &amp; \leftarrow \beta_2 \mathbf{s}</em>{t-1} + (1 - \beta_2) \mathbf{g}_t^2.<br>\end{aligned}<br>$$<br>è¿™é‡Œ$\beta_1$å’Œ$\beta_2$æ˜¯éè´ŸåŠ æƒå‚æ•°ã€‚ä»–ä»¬çš„å¸¸è§è®¾ç½®æ˜¯$\beta_1 &#x3D; 0.9$å’Œ$\beta_2 &#x3D; 0.999$ã€‚æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬åˆå§‹åŒ–$\mathbf{v}_0 &#x3D; \mathbf{s}_0 &#x3D; 0$ï¼Œå°±ä¼šè·å¾—ä¸€ä¸ªç›¸å½“å¤§çš„åˆå§‹åå·®ï¼ŒåŸå› åœ¨äºæ¯ä¸ªæœ€æ–°æ•°æ®å€¼ï¼Œéƒ½ä¾èµ–äºä»¥å‰çš„æ•°æ®ç»“æœã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨<strong>åå·®ä¿®æ­£ï¼ˆbias correctionï¼‰</strong> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨$\hat{\mathbf{v} }_t$å’Œ$\hat{\mathbf{s} }_t$ï¼Œå…¬å¼ä¸ºï¼š</p><p>$$<br>\hat{\mathbf{v} }_t &#x3D; \frac{\mathbf{v}_t} {1 - \beta_1^t} \text{ and } \hat{\mathbf{s} }_t &#x3D; \frac{\mathbf{s}_t} {1 - \beta_2^t}.<br>$$<br>é€šè¿‡å…¬å¼å‘ç°ï¼Œéšç€$t$å¢åŠ ï¼Œ$\beta^t$æ¥è¿‘äº0ï¼Œæ‰€ä»¥å½“$t$å¾ˆå¤§çš„æ—¶å€™ï¼Œåå·®ä¿®æ­£å‡ ä¹æ²¡æœ‰ä½œç”¨ï¼Œä¸è¿‡åœ¨å¼€å§‹å­¦ä¹ é˜¶æ®µï¼Œåå·®ä¿®æ­£å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½é¢„æµ‹ã€‚æœ‰äº†æ­£ç¡®çš„ä¼°è®¡ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å†™å‡ºæ›´æ–°æ–¹ç¨‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»¥éå¸¸ç±»ä¼¼äºRMSPropç®—æ³•çš„æ–¹å¼é‡æ–°ç¼©æ”¾æ¢¯åº¦ä»¥è·å¾—</p><p>$$<br>\mathbf{g}_tâ€™ &#x3D; \frac{\eta \hat{\mathbf{v} }_t} {\sqrt{\hat{\mathbf{s} }_t} + \epsilon}.<br>$$<br>ä¸RMSPropä¸åŒï¼Œæˆ‘ä»¬çš„æ›´æ–°ä½¿ç”¨åŠ¨é‡$\hat{\mathbf{v} }_t$è€Œä¸æ˜¯æ¢¯åº¦æœ¬èº«ã€‚æ­¤å¤–ï¼Œç”±äºä½¿ç”¨$\frac{1} {\sqrt{\hat{\mathbf{s} }_t} + \epsilon}$è€Œä¸æ˜¯$\frac{1} {\sqrt{\hat{\mathbf{s} }_t + \epsilon} }$è¿›è¡Œç¼©æ”¾ï¼Œä¸¤è€…ä¼šç•¥æœ‰å·®å¼‚ã€‚å‰è€…åœ¨å®è·µä¸­æ•ˆæœç•¥å¥½ä¸€äº›ï¼Œå› æ­¤ä¸RMSPropç®—æ³•æœ‰æ‰€åŒºåˆ†ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬é€‰æ‹©$\epsilon &#x3D; 10^{-6}$ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨æ•°å€¼ç¨³å®šæ€§å’Œé€¼çœŸåº¦ä¹‹é—´å–å¾—è‰¯å¥½çš„å¹³è¡¡ã€‚æœ€åï¼Œæˆ‘ä»¬ç®€å•æ›´æ–°ï¼š</p><p>$$<br>\mathbf{x}<em>t \leftarrow \mathbf{x}</em>{t-1} - \mathbf{g}_tâ€™.<br>$$</p><h5 id="2ï¼‰å®ç°-2"><a href="#2ï¼‰å®ç°-2" class="headerlink" title="2ï¼‰å®ç°"></a><strong>2ï¼‰å®ç°</strong></h5><p>æˆ‘ä»¬å°†æ—¶é—´æ­¥$t$å­˜å‚¨åœ¨<code>hyperparams</code>å­—å…¸ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> ppl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_adam_states</span>(<span class="params">feature_dim</span>):</span><br><span class="line">    v_w, v_b = paddle.zeros((feature_dim, <span class="number">1</span>)), paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    s_w, s_b = paddle.zeros((feature_dim, <span class="number">1</span>)), paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    <span class="keyword">return</span> ((v_w, s_w), (v_b, s_b))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">adam</span>(<span class="params">params, states, hyperparams</span>):</span><br><span class="line">    beta1, beta2, eps = <span class="number">0.9</span>, <span class="number">0.999</span>, <span class="number">1e-6</span></span><br><span class="line">    <span class="keyword">for</span> p, (v, s) <span class="keyword">in</span> <span class="built_in">zip</span>(params, states):</span><br><span class="line">        <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">            v[:] = beta1 * v + (<span class="number">1</span> - beta1) * p.grad</span><br><span class="line">            s[:] = beta2 * s + (<span class="number">1</span> - beta2) * paddle.square(p.grad)</span><br><span class="line">            v_bias_corr = v / (<span class="number">1</span> - beta1 ** hyperparams[<span class="string">&#x27;t&#x27;</span>])</span><br><span class="line">            s_bias_corr = s / (<span class="number">1</span> - beta2 ** hyperparams[<span class="string">&#x27;t&#x27;</span>])</span><br><span class="line">            p[:] -= hyperparams[<span class="string">&#x27;lr&#x27;</span>] * v_bias_corr / (paddle.sqrt(s_bias_corr) + eps)</span><br><span class="line">        p.grad.zero_()</span><br><span class="line">    hyperparams[<span class="string">&#x27;t&#x27;</span>] += <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨ä»¥ä¸ŠAdamç®—æ³•æ¥è®­ç»ƒæ¨¡å‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨$\eta &#x3D; 0.01$çš„å­¦ä¹ ç‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data_iter, feature_dim = ppl.get_data_ch11(batch_size=<span class="number">10</span>)</span><br><span class="line">train_ch11(</span><br><span class="line">    adam, init_adam_states(feature_dim),</span><br><span class="line">    &#123;<span class="string">&#x27;lr&#x27;</span>: <span class="number">0.01</span>, <span class="string">&#x27;t&#x27;</span>: <span class="number">1</span>&#125;, data_iter, feature_dim)</span><br></pre></td></tr></table></figure><pre><code>(0.07531051635742188, 0.24483665378888447)</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/38.svg" alt="svg"></p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶è‡ªå¸¦ç®—æ³•åº”ç”¨Adamç®—æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬åªéœ€è¦ä¼ é€’é…ç½®å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trainer = paddle.optimizer.Adam</span><br><span class="line">ppl.train_concise_ch11(trainer, &#123;<span class="string">&#x27;learning_rate&#x27;</span>: <span class="number">0.01</span>&#125;, data_iter)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/39.svg" alt="svg"></p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a><em><strong>å°ç»“</strong></em></h4><ul><li>AdaGradç®—æ³•ä¼šåœ¨å•ä¸ªåæ ‡å±‚é¢åŠ¨æ€é™ä½å­¦ä¹ ç‡ã€‚</li><li>AdaGradç®—æ³•åˆ©ç”¨æ¢¯åº¦çš„å¤§å°ä½œä¸ºè°ƒæ•´é€Ÿç‡çš„æ‰‹æ®µï¼šç”¨è¾ƒå°çš„å­¦ä¹ ç‡æ¥è¡¥å¿å¸¦æœ‰è¾ƒå¤§æ¢¯åº¦çš„åæ ‡ã€‚</li><li>å¦‚æœä¼˜åŒ–é—®é¢˜çš„ç»“æ„ç›¸å½“ä¸å‡åŒ€ï¼ŒAdaGradç®—æ³•å¯ä»¥å¸®åŠ©ç¼“è§£æ‰­æ›²ã€‚</li><li>AdaGradç®—æ³•å¯¹äºç¨€ç–ç‰¹å¾ç‰¹åˆ«æœ‰æ•ˆï¼Œåœ¨æ­¤æƒ…å†µä¸‹ç”±äºä¸å¸¸å‡ºç°çš„é—®é¢˜ï¼Œå­¦ä¹ ç‡éœ€è¦æ›´æ…¢åœ°é™ä½ã€‚</li><li>AdaGradç®—æ³•åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸æ–­è°ƒæ•´å­¦ä¹ ç‡ï¼Œå¹¶è®©ç›®æ ‡å‡½æ•°è‡ªå˜é‡ä¸­æ¯ä¸ªå…ƒç´ éƒ½åˆ†åˆ«æ‹¥æœ‰è‡ªå·±çš„å­¦ä¹ ç‡ã€‚</li><li>ä½¿ç”¨AdaGradç®—æ³•æ—¶ï¼Œè‡ªå˜é‡ä¸­æ¯ä¸ªå…ƒç´ çš„å­¦ä¹ ç‡åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸€ç›´åœ¨é™ä½ï¼ˆæˆ–ä¸å˜ï¼‰ã€‚</li><li>RMSPropç®—æ³•ä¸Adagradç®—æ³•éå¸¸ç›¸ä¼¼ï¼Œå› ä¸ºä¸¤è€…éƒ½ä½¿ç”¨æ¢¯åº¦çš„å¹³æ–¹æ¥ç¼©æ”¾ç³»æ•°ã€‚</li><li>RMSPropç®—æ³•ä½¿ç”¨äº†å°æ‰¹é‡éšæœºæ¢¯åº¦æŒ‰å…ƒç´ å¹³æ–¹çš„æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡æ¥è°ƒæ•´å­¦ä¹ ç‡ã€‚</li><li>Adadeltaæ²¡æœ‰å­¦ä¹ ç‡å‚æ•°ã€‚ç›¸åï¼Œå®ƒä½¿ç”¨å‚æ•°æœ¬èº«çš„å˜åŒ–ç‡æ¥è°ƒæ•´å­¦ä¹ ç‡ã€‚</li><li>Adamç®—æ³•åœ¨RMSPropç®—æ³•çš„åŸºç¡€ä¸Šå¯¹å°æ‰¹é‡éšæœºæ¢¯åº¦ä¹Ÿåšäº†æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ã€‚</li><li>Adamç®—æ³•ä½¿ç”¨äº†åå·®ä¿®æ­£ã€‚</li><li>å’ŒAdaGradç®—æ³•ã€RMSPropç®—æ³•ä»¥åŠAdaDeltaç®—æ³•ä¸€æ ·ï¼Œç›®æ ‡å‡½æ•°è‡ªå˜é‡ä¸­æ¯ä¸ªå…ƒç´ éƒ½åˆ†åˆ«æ‹¥æœ‰è‡ªå·±çš„å­¦ä¹ ç‡ã€‚</li></ul><h2 id="å››ã€æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›â€“æ­£åˆ™åŒ–æ–¹æ³•"><a href="#å››ã€æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›â€“æ­£åˆ™åŒ–æ–¹æ³•" class="headerlink" title="å››ã€æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›â€“æ­£åˆ™åŒ–æ–¹æ³•"></a>å››ã€æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›â€“æ­£åˆ™åŒ–æ–¹æ³•</h2><p>é™ä½åå·®å¯ä»¥æé«˜æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„è¡¨ç°ã€‚ä½†å®é™…ä¸Šï¼Œè¯„ä»·ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹çš„æ€§èƒ½ï¼Œä¸ä»…è¦çœ‹å…¶åœ¨è®­ç»ƒé›†ä¸Šçš„è¡¨ç°ï¼Œè¿˜è¦è¯„ä¼°å®ƒåœ¨æœªè§‚æµ‹åˆ°çš„æ•°æ®ä¸Šçš„è¡¨ç°ï¼Œè¿™å°±è¦æ±‚æ¨¡å‹å…·æœ‰è‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›ã€‚æœ¬èŠ‚ä»‹ç»çš„æ­£åˆ™åŒ–æ–¹æ³•èƒ½å¤Ÿæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›ï¼Œå‡å°‘è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®çš„å·®è·ã€‚ä¸‹é¢å°†ä»‹ç»å‡ ç§å¸¸è§çš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚</p><h3 id="4-1-L2æ­£åˆ™ä¸L1æ­£åˆ™"><a href="#4-1-L2æ­£åˆ™ä¸L1æ­£åˆ™" class="headerlink" title="4.1 L2æ­£åˆ™ä¸L1æ­£åˆ™"></a>4.1 L2æ­£åˆ™ä¸L1æ­£åˆ™</h3><p>æ­£åˆ™åŒ–æ–¹æ³•æ˜¯åœ¨ç›®æ ‡å‡½æ•°æˆ–ä»£ä»·å‡½æ•°åé¢åŠ ä¸Šä¸€ä¸ªæ­£åˆ™é¡¹ï¼Œå¯¹å‚æ•°è¿›è¡Œçº¦æŸï¼Œæ¥é™åˆ¶æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ï¼Œæ˜¯åº”å¯¹è¿‡æ‹Ÿåˆçš„å¸¸ç”¨æ–¹æ³•ã€‚å›æƒ³ä¸€ä¸‹ï¼Œåœ¨å¤šé¡¹å¼å›å½’çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´æ‹Ÿåˆå¤šé¡¹å¼çš„é˜¶æ•°æ¥é™åˆ¶æ¨¡å‹çš„å®¹é‡ï¼Œä¹Ÿå°±æ˜¯é™åˆ¶å‚æ•°å€¼çš„é€‰æ‹©èŒƒå›´ã€‚</p><p>$$<br>L(\mathbf{w}, b) æ»¡è¶³ ||\mathbf{w}||^2 â‰¤ \lambda<br>$$</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿å¾—æƒé‡çš„å¹³æ–¹å’Œå°äºä¸€ä¸ªå€¼ï¼Œä»¥æ­¤æ¥é™åˆ¶å‚æ•°å€¼ä»¥è¾¾åˆ°æ§åˆ¶æ¨¡å‹å¤æ‚åº¦çš„ç›®çš„ï¼Œå› ä¸ºåç½®å¯¹æ¨¡å‹å¤æ‚åº¦çš„å½±å“è¾ƒå°ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¸é™åˆ¶ã€‚</p><h4 id="L2æ­£åˆ™"><a href="#L2æ­£åˆ™" class="headerlink" title="L2æ­£åˆ™"></a><strong>L2æ­£åˆ™</strong></h4><p>L2å‚æ•°æ­£åˆ™åŒ–æ–¹æ³•ä¹Ÿå«åšæƒé‡è¡°å‡ã€‚<strong>æƒé‡è¡°å‡ï¼ˆweight decayï¼‰</strong> æ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„æ­£åˆ™åŒ–çš„æŠ€æœ¯ä¹‹ä¸€ã€‚$L_2$èŒƒæ•°æƒ©ç½šé¡¹æ˜¯æ¨¡å‹æƒé‡å‚æ•°æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹å’Œä¸ä¸€ä¸ªæ­£çš„å¸¸æ•°çš„ä¹˜ç§¯ã€‚æˆ‘ä»¬é€šè¿‡æ­£åˆ™åŒ–å¸¸æ•°$\lambda$æ¥æè¿°è¿™ç§æƒè¡¡ï¼Œ$L_2$èŒƒæ•°æ­£åˆ™åŒ–åœ¨æ¨¡å‹åŸæŸå¤±å‡½æ•°çš„åŸºç¡€ä¸Šæ·»åŠ $L_2$èŒƒæ•°æƒ©ç½šé¡¹ï¼Œä»è€Œå¾—åˆ°è®­ç»ƒå¾—åˆ°æ‰€éœ€çš„æœ€å°åŒ–å‡½æ•°ã€‚å½“å‚æ•°è¶Šå¤šæˆ–å–å€¼è¶Šå¤§æ—¶ï¼Œè¯¥æƒ©ç½šé¡¹è¶Šå¤§ï¼š<br>$$<br>L(\mathbf{w}, b) + \frac{\lambda} {2} |\mathbf{w}|^2<br>$$<br>å¯¹äº$\lambda &#x3D; 0$ï¼Œæˆ‘ä»¬æ¢å¤äº†åŸæ¥çš„æŸå¤±å‡½æ•°ã€‚å¯¹äº$\lambda &gt; 0$ï¼Œæˆ‘ä»¬é™åˆ¶$| \mathbf{w} |$çš„å¤§å°ã€‚è¿™é‡Œæˆ‘ä»¬ä»ç„¶é™¤ä»¥$2$ï¼šå½“æˆ‘ä»¬å–ä¸€ä¸ªäºŒæ¬¡å‡½æ•°çš„å¯¼æ•°æ—¶ï¼Œ$2$å’Œ$1&#x2F;2$ä¼šæŠµæ¶ˆï¼Œä»¥ç¡®ä¿æ›´æ–°è¡¨è¾¾å¼çœ‹èµ·æ¥æ—¢æ¼‚äº®åˆç®€å•ã€‚</p><p>æ ¹æ®ä¹‹å‰ç« èŠ‚æ‰€è®²çš„ï¼Œæˆ‘ä»¬æ ¹æ®ä¼°è®¡å€¼ä¸è§‚æµ‹å€¼ä¹‹é—´çš„å·®å¼‚æ¥æ›´æ–°$\mathbf{w}$ã€‚ç„¶è€Œï¼ŒåŠ å…¥äº†æ­£åˆ™åŒ–ä¹‹åï¼Œæˆ‘ä»¬åŒæ—¶ä¹Ÿåœ¨è¯•å›¾å°†$\mathbf{w}$çš„å¤§å°è¿›ä¸€æ­¥ç¼©å°ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•æœ‰æ—¶è¢«ç§°ä¸ºæƒé‡è¡°å‡ã€‚æˆ‘ä»¬ä»…è€ƒè™‘æƒ©ç½šé¡¹ï¼Œä¼˜åŒ–ç®—æ³•åœ¨è®­ç»ƒçš„æ¯ä¸€æ­¥è¡°å‡æƒé‡ã€‚ä¸ç‰¹å¾é€‰æ‹©ç›¸æ¯”ï¼Œæƒé‡è¡°å‡ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§è¿ç»­çš„æœºåˆ¶æ¥è°ƒæ•´å‡½æ•°çš„å¤æ‚åº¦ã€‚è¾ƒå°çš„$\lambda$å€¼å¯¹åº”è¾ƒå°‘çº¦æŸçš„$\mathbf{w}$ï¼Œè€Œè¾ƒå¤§çš„$\lambda$å€¼å¯¹$\mathbf{w}$çš„çº¦æŸæ›´å¤§ã€‚</p><h4 id="L1æ­£åˆ™"><a href="#L1æ­£åˆ™" class="headerlink" title="L1æ­£åˆ™"></a><strong>L1æ­£åˆ™</strong></h4><p>L1æ­£åˆ™åŒ–ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œå®ƒä½¿æ¨¡å‹çš„å‚æ•°å°½å¯èƒ½ç¨€ç–åŒ–ã€‚L1æ­£åˆ™åŒ–è¢«å®šä¹‰ä¸ºå„ä¸ªå‚æ•°çš„ç»å¯¹å€¼ä¹‹å’Œï¼š</p><p>$$<br>L(\mathbf{w}, b) + |\mathbf{w}|<br>$$<br>æ­¤å¤–ï¼Œä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆæˆ‘ä»¬é¦–å…ˆä½¿ç”¨$L_2$èŒƒæ•°ï¼Œè€Œä¸æ˜¯$L_1$èŒƒæ•°ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªé€‰æ‹©åœ¨æ•´ä¸ªç»Ÿè®¡é¢†åŸŸä¸­éƒ½æ˜¯æœ‰æ•ˆçš„å’Œå—æ¬¢è¿çš„ã€‚ä½¿ç”¨$L_2$èŒƒæ•°çš„ä¸€ä¸ªåŸå› æ˜¯å®ƒå¯¹æƒé‡å‘é‡çš„å¤§åˆ†é‡æ–½åŠ äº†å·¨å¤§çš„æƒ©ç½šã€‚è¿™ä½¿å¾—æˆ‘ä»¬çš„å­¦ä¹ ç®—æ³•åå‘äºåœ¨å¤§é‡ç‰¹å¾ä¸Šå‡åŒ€åˆ†å¸ƒæƒé‡çš„æ¨¡å‹ã€‚åœ¨å®è·µä¸­ï¼Œè¿™å¯èƒ½ä½¿å®ƒä»¬å¯¹å•ä¸ªå˜é‡ä¸­çš„è§‚æµ‹è¯¯å·®æ›´ä¸ºç¨³å®šã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ$L_1$æƒ©ç½šä¼šå¯¼è‡´æ¨¡å‹å°†æƒé‡é›†ä¸­åœ¨ä¸€å°éƒ¨åˆ†ç‰¹å¾ä¸Šï¼Œè€Œå°†å…¶ä»–æƒé‡æ¸…é™¤ä¸ºé›¶ã€‚è¿™ç§°ä¸º<strong>ç‰¹å¾é€‰æ‹©ï¼ˆfeature selectionï¼‰</strong>ï¼Œè¿™å¯èƒ½æ˜¯å…¶ä»–åœºæ™¯ä¸‹éœ€è¦çš„ã€‚</p><h4 id="1ï¼‰ä»é›¶å¼€å§‹å®ç°"><a href="#1ï¼‰ä»é›¶å¼€å§‹å®ç°" class="headerlink" title="1ï¼‰ä»é›¶å¼€å§‹å®ç°"></a><strong>1ï¼‰ä»é›¶å¼€å§‹å®ç°</strong></h4><p>ä¸‹é¢æˆ‘ä»¬å°†ä»å¤´å¼€å§‹å®ç°æƒé‡è¡°å‡ï¼Œåªéœ€å°†$L_2$çš„å¹³æ–¹æƒ©ç½šæ·»åŠ åˆ°åŸå§‹ç›®æ ‡å‡½æ•°ä¸­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åƒä»¥å‰ä¸€æ ·ç”Ÿæˆä¸€äº›æ•°æ®ï¼Œç”Ÿæˆå…¬å¼å¦‚ä¸‹ï¼š</p><p>$$<br>y &#x3D; 0.05 + \sum_{i &#x3D; 1}^d 0.01 x_i + \epsilon \text{ where }<br>\epsilon \sim \mathcal{N}(0, 0.01^2).<br>$$<br>æˆ‘ä»¬é€‰æ‹©æ ‡ç­¾æ˜¯å…³äºè¾“å…¥çš„çº¿æ€§å‡½æ•°ã€‚æ ‡ç­¾åŒæ—¶è¢«å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º0.01é«˜æ–¯å™ªå£°ç ´åã€‚ä¸ºäº†ä½¿è¿‡æ‹Ÿåˆçš„æ•ˆæœæ›´åŠ æ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥å°†é—®é¢˜çš„ç»´æ•°å¢åŠ åˆ°$d &#x3D; 200$ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªåªåŒ…å«20ä¸ªæ ·æœ¬çš„å°è®­ç»ƒé›†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> paddle.tensor <span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> IPython <span class="keyword">import</span> display</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> TensorDataset, DataLoader</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ•°æ®é›†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">synthetic_data</span>(<span class="params">w, b, num_examples</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç”Ÿæˆy=Xw+b+å™ªå£°&quot;&quot;&quot;</span></span><br><span class="line">    X = paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, (num_examples, <span class="built_in">len</span>(w)))<span class="comment">#å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º0.01ï¼Œnä¸ªæ ·æœ¬ï¼Œwé•¿åº¦çš„ç‰¹å¾</span></span><br><span class="line">    y = paddle.matmul(X, w) + b</span><br><span class="line">    y += paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, y.shape)<span class="comment">#å™ªéŸ³</span></span><br><span class="line">    <span class="keyword">return</span> X, y.reshape((-<span class="number">1</span>, <span class="number">1</span>)) <span class="comment">#reshape(-1,1)è½¬æ¢æˆ1åˆ—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_array</span>(<span class="params">data_array, batch_size, is_train=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="comment"># æ„é€ æ•°æ®è¿­ä»£å™¨</span></span><br><span class="line">    dataset = TensorDataset(data_array)<span class="comment"># ç”±å¼ é‡åˆ—è¡¨å®šä¹‰çš„æ•°æ®é›†</span></span><br><span class="line">    <span class="built_in">print</span>(dataset)</span><br><span class="line">    <span class="keyword">return</span> DataLoader(dataset, batch_size=batch_size, shuffle=is_train) <span class="comment"># ä¹‹åä»DataLoaderä¸­éšæœºæŒ‘é€‰bä¸ªæ ·æœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ¨¡å‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">linreg</span>(<span class="params">X, w, b</span>):</span><br><span class="line">    <span class="comment"># print(&quot;linreg: &quot;, X, w, b)</span></span><br><span class="line">    <span class="keyword">return</span> paddle.matmul(X, w) + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">squared_loss</span>(<span class="params">y_hat, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å‡æ–¹æŸå¤±&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment">#print(&quot;squared_loss: &quot;, y_hat, y)</span></span><br><span class="line">    loss = (y_hat - y.reshape(y_hat.shape)) ** <span class="number">2</span> / <span class="number">2</span> <span class="comment"># loss=1/2(y_hat-y)^2</span></span><br><span class="line">    <span class="comment">#print(&quot;loss&gt;&gt;&gt;&quot;, loss)</span></span><br><span class="line">    <span class="keyword">return</span> loss</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Accumulator</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åœ¨nä¸ªå˜é‡ä¸Šç´¯åŠ &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * n</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, *args</span>):</span><br><span class="line">        self.data = [a + <span class="built_in">float</span>(b) <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self.data, args)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * <span class="built_in">len</span>(self.data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="keyword">return</span> self.data[idx]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evaluate_loss</span>(<span class="params">net, data_iter, loss</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯„ä¼°ç»™å®šæ•°æ®é›†ä¸Šæ¨¡å‹çš„æŸå¤±&quot;&quot;&quot;</span></span><br><span class="line">    metric = Accumulator(<span class="number">2</span>) <span class="comment"># æŸå¤±çš„æ€»å’Œ,æ ·æœ¬æ•°é‡</span></span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">        out = net(X)</span><br><span class="line">        y = y.reshape(out.shape)</span><br><span class="line">        l = loss(out, y)</span><br><span class="line">        metric.add(l.<span class="built_in">sum</span>(), l.numel())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> metric[<span class="number">0</span>] / metric[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">n_train, n_test, num_inputs, batch_size = <span class="number">20</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">5</span></span><br><span class="line">true_w, true_b = paddle.ones((num_inputs, <span class="number">1</span>)) * <span class="number">0.01</span>, <span class="number">0.05</span></span><br><span class="line">train_data = synthetic_data(true_w, true_b, n_train)</span><br><span class="line">train_iter = load_array(train_data, batch_size)</span><br><span class="line">test_data = synthetic_data(true_w, true_b, n_test)</span><br><span class="line">test_iter = load_array(test_data, batch_size)</span><br></pre></td></tr></table></figure><h5 id="ã€åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"><a href="#ã€åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘" class="headerlink" title="ã€åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"></a><strong>ã€åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘</strong></h5><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥éšæœºåˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">init_params</span>():</span><br><span class="line">    w = paddle.normal(<span class="number">0</span>, <span class="number">1</span>, shape=(num_inputs, <span class="number">1</span>))</span><br><span class="line">    w.stop_gradient = <span class="literal">False</span></span><br><span class="line">    b = paddle.zeros((<span class="number">1</span>, ))</span><br><span class="line">    b.stop_gradient = <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> [w, b]</span><br></pre></td></tr></table></figure><h5 id="ã€å®šä¹‰-L-2-èŒƒæ•°æƒ©ç½šã€‘"><a href="#ã€å®šä¹‰-L-2-èŒƒæ•°æƒ©ç½šã€‘" class="headerlink" title="ã€å®šä¹‰$L_2$èŒƒæ•°æƒ©ç½šã€‘"></a><strong>ã€å®šä¹‰$L_2$èŒƒæ•°æƒ©ç½šã€‘</strong></h5><p>å®ç°è¿™ä¸€æƒ©ç½šæœ€æ–¹ä¾¿çš„æ–¹æ³•æ˜¯å¯¹æ‰€æœ‰é¡¹æ±‚å¹³æ–¹åå¹¶å°†å®ƒä»¬æ±‚å’Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">l2_penalty</span>(<span class="params">w</span>):</span><br><span class="line">    <span class="keyword">return</span> paddle.<span class="built_in">sum</span>(w.<span class="built_in">pow</span>(<span class="number">2</span>)) / <span class="number">2</span></span><br></pre></td></tr></table></figure><h5 id="ã€å®šä¹‰è®­ç»ƒä»£ç å®ç°ã€‘"><a href="#ã€å®šä¹‰è®­ç»ƒä»£ç å®ç°ã€‘" class="headerlink" title="ã€å®šä¹‰è®­ç»ƒä»£ç å®ç°ã€‘"></a><strong>ã€å®šä¹‰è®­ç»ƒä»£ç å®ç°ã€‘</strong></h5><p>ä¸‹é¢çš„ä»£ç å°†æ¨¡å‹æ‹Ÿåˆè®­ç»ƒæ•°æ®é›†ï¼Œå¹¶åœ¨æµ‹è¯•æ•°æ®é›†ä¸Šè¿›è¡Œè¯„ä¼°ã€‚å·²çŸ¥ï¼Œçº¿æ€§ç½‘ç»œå’Œå¹³æ–¹æŸå¤±æ²¡æœ‰å˜åŒ–ï¼Œå”¯ä¸€çš„å˜åŒ–æ˜¯æŸå¤±ç°åœ¨åŒ…æ‹¬äº†æƒ©ç½šé¡¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib_inline</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_axes</span>(<span class="params">axes, xlabel, ylabel, xlim, ylim, xscale, yscale, legend</span>):</span><br><span class="line">    axes.set_xlabel(xlabel)</span><br><span class="line">    axes.set_ylabel(ylabel)</span><br><span class="line">    axes.set_xscale(xscale)</span><br><span class="line">    axes.set_yscale(yscale)</span><br><span class="line">    axes.set_xlim(xlim)</span><br><span class="line">    axes.set_ylim(ylim)</span><br><span class="line">    <span class="keyword">if</span> legend:</span><br><span class="line">        axes.legend(legend)</span><br><span class="line">    axes.grid()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animator</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åœ¨åŠ¨ç”»ä¸­ç»˜åˆ¶æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, xlabel=<span class="literal">None</span>, ylabel=<span class="literal">None</span>, legend=<span class="literal">None</span>, xlim=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">                 ylim=<span class="literal">None</span>, xscale=<span class="string">&#x27;linear&#x27;</span>, yscale=<span class="string">&#x27;linear&#x27;</span>,</span></span><br><span class="line"><span class="params">                 fmts=(<span class="params"><span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;m--&#x27;</span>, <span class="string">&#x27;g-.&#x27;</span>, <span class="string">&#x27;r:&#x27;</span></span>), nrows=<span class="number">1</span>, ncols=<span class="number">1</span>,</span></span><br><span class="line"><span class="params">                 figsize=(<span class="params"><span class="number">3.5</span>, <span class="number">2.5</span></span>)</span>):</span><br><span class="line">        <span class="comment"># å¢é‡åœ°ç»˜åˆ¶å¤šæ¡çº¿</span></span><br><span class="line">        <span class="keyword">if</span> legend <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            legend = []</span><br><span class="line">        matplotlib_inline.backend_inline.set_matplotlib_formats(<span class="string">&#x27;svg&#x27;</span>)</span><br><span class="line">        self.fig, self.axes = plt.subplots(nrows, ncols, figsize=figsize)</span><br><span class="line">        <span class="keyword">if</span> nrows * ncols == <span class="number">1</span>:</span><br><span class="line">            self.axes = [self.axes, ]</span><br><span class="line">        <span class="comment"># ä½¿ç”¨lambdaå‡½æ•°æ•è·å‚æ•°</span></span><br><span class="line">        self.config_axes = set_axes( self.axes[<span class="number">0</span>], xlabel, ylabel, xlim, ylim, xscale, yscale, legend)</span><br><span class="line">        self.X, self.Y, self.fmts = <span class="literal">None</span>, <span class="literal">None</span>, fmts</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        <span class="comment"># å‘å›¾è¡¨ä¸­æ·»åŠ å¤šä¸ªæ•°æ®ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(y, <span class="string">&quot;__len__&quot;</span>):</span><br><span class="line">            y = [y]</span><br><span class="line">        n = <span class="built_in">len</span>(y)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(x, <span class="string">&quot;__len__&quot;</span>):</span><br><span class="line">            x = [x] * n</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.X:</span><br><span class="line">            self.X = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.Y:</span><br><span class="line">            self.Y = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">        <span class="keyword">for</span> i, (a, b) <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">zip</span>(x, y)):</span><br><span class="line">            <span class="keyword">if</span> a <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> b <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                self.X[i].append(a)</span><br><span class="line">                self.Y[i].append(b)</span><br><span class="line">        self.axes[<span class="number">0</span>].cla()</span><br><span class="line">        <span class="keyword">for</span> x, y, fmt <span class="keyword">in</span> <span class="built_in">zip</span>(self.X, self.Y, self.fmts):</span><br><span class="line">            self.axes[<span class="number">0</span>].plot(x, y, fmt)</span><br><span class="line">        self.config_axes</span><br><span class="line">        display.display(self.fig)</span><br><span class="line">        display.clear_output(wait=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">lambd</span>):<span class="comment">#lambdè¶…å‚æ•°</span></span><br><span class="line">    w, b = init_params()<span class="comment">#åˆå§‹åŒ–</span></span><br><span class="line">    net, loss = <span class="keyword">lambda</span> X: linreg(X, w, b), squared_loss<span class="comment">#çº¿æ€§å›å½’ï¼Œå‡æ–¹æŸå¤±</span></span><br><span class="line">    num_epochs, lr = <span class="number">100</span>, <span class="number">0.03</span></span><br><span class="line">    animator = Animator(xlabel=<span class="string">&#x27;epochs&#x27;</span>, ylabel=<span class="string">&#x27;loss&#x27;</span>, yscale=<span class="string">&#x27;log&#x27;</span>,</span><br><span class="line">                            xlim=[<span class="number">5</span>, num_epochs], legend=[<span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;test&#x27;</span>])</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter:</span><br><span class="line">            <span class="comment"># å¢åŠ äº†L2èŒƒæ•°æƒ©ç½šé¡¹</span></span><br><span class="line">            l = loss(net(X), y) + lambd * l2_penalty(w)</span><br><span class="line">            l.<span class="built_in">sum</span>().backward()</span><br><span class="line">            <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">                w -= lr * w.grad / X.shape[<span class="number">0</span>]</span><br><span class="line">                b -= lr * b.grad / batch_size</span><br><span class="line">                w.clear_grad()</span><br><span class="line">                b.clear_grad()</span><br><span class="line">                w.stop_gradient = <span class="literal">False</span></span><br><span class="line">                b.stop_gradient = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> (epoch + <span class="number">1</span>) % <span class="number">5</span> == <span class="number">0</span>:</span><br><span class="line">            animator.add(epoch + <span class="number">1</span>, (evaluate_loss(net, train_iter, loss),</span><br><span class="line">                                     evaluate_loss(net, test_iter, loss)))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;wçš„L2èŒƒæ•°æ˜¯ï¼š&quot;</span>, paddle.norm(w).item())</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>â‘ ã€å¿½ç•¥æ­£åˆ™åŒ–ç›´æ¥è®­ç»ƒã€‘</strong></p><p>æˆ‘ä»¬ç°åœ¨ç”¨<code>lambd = 0</code>ç¦ç”¨æƒé‡è¡°å‡åè¿è¡Œè¿™ä¸ªä»£ç ã€‚è¿™é‡Œè®­ç»ƒè¯¯å·®æœ‰äº†å‡å°‘ï¼Œä½†æµ‹è¯•è¯¯å·®æ²¡æœ‰å‡å°‘ï¼Œè¿™æ„å‘³ç€å‡ºç°äº†ä¸¥é‡çš„è¿‡æ‹Ÿåˆã€‚</p><blockquote><p>ç²‰è‰²ï¼šæµ‹è¯•è¯¯å·®</p><p>è“è‰²ï¼šè®­ç»ƒè¯¯å·®</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train(lambd=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/40.svg" alt="svg"></p><p><strong>â‘¡ã€ä½¿ç”¨æƒé‡è¡°å‡ã€‘</strong></p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨æƒé‡è¡°å‡æ¥è¿è¡Œä»£ç ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æœŸæœ›ä»æ­£åˆ™åŒ–ä¸­å¾—åˆ°çš„æ•ˆæœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train(lambd=<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/41.svg" alt="svg"></p><h4 id="2ï¼‰ç®€æ´å®ç°"><a href="#2ï¼‰ç®€æ´å®ç°" class="headerlink" title="2ï¼‰ç®€æ´å®ç°"></a><strong>2ï¼‰ç®€æ´å®ç°</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train_concise</span>(<span class="params">wd</span>):</span><br><span class="line">    net = nn.Sequential(nn.Linear(num_inputs, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> param <span class="keyword">in</span> net.parameters():</span><br><span class="line">        param.set_value(paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, shape=param.shape))</span><br><span class="line"></span><br><span class="line">    loss = paddle.nn.MSELoss()</span><br><span class="line">    num_epochs, lr = <span class="number">100</span>, <span class="number">0.003</span></span><br><span class="line">    sdg = paddle.optimizer.SGD(learning_rate=lr, parameters=net.parameters(), weight_decay=<span class="built_in">float</span>(wd))<span class="comment"># æ³¨æ„ï¼šæƒé‡è¡°å‡çš„ç³»æ•°è¦æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°~</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter:</span><br><span class="line">            l = loss(net(X), y)</span><br><span class="line">            l.backward()</span><br><span class="line">            sdg.step()</span><br><span class="line">            sdg.clear_grad()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;wçš„L2èŒƒæ•°ï¼š&#x27;</span>, net[<span class="number">0</span>].weight.norm().item())</span><br><span class="line">    <span class="built_in">print</span>(net[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">train_concise(<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure><pre><code>wçš„L2èŒƒæ•°ï¼š 0.11938107758760452Linear(in_features=200, out_features=1, dtype=float32)</code></pre><h3 id="4-2-æš‚é€€æ³•"><a href="#4-2-æš‚é€€æ³•" class="headerlink" title="4.2 æš‚é€€æ³•"></a>4.2 æš‚é€€æ³•</h3><p>ğŸ¨<code>sec_dropout</code></p><p><strong>æš‚é€€æ³•ï¼ˆdropoutï¼‰</strong> æ˜¯é€šè¿‡ä¿®æ”¹æ¨¡å‹æœ¬èº«ç»“æ„æ¥å®ç°çš„ï¼Œè®¡ç®—æ–¹ä¾¿ä½†åŠŸèƒ½å¼ºå¤§ã€‚è¿™ç§æ–¹æ³•ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºæš‚é€€æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä»è¡¨é¢ä¸Šçœ‹æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸¢å¼ƒï¼ˆdrop outï¼‰ä¸€äº›ç¥ç»å…ƒã€‚åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹çš„æ¯ä¸€æ¬¡è¿­ä»£å¼€å§‹æ—¶ï¼ŒæŒ‰ç…§ä¸€å®šçš„æ¦‚ç‡éšæœºé€‰æ‹©ä¸€äº›ç¥ç»å…ƒåˆ é™¤ï¼Œå³è®¤ä¸ºè¿™äº›ç¥ç»å…ƒä¸å­˜åœ¨ã€‚</p><p>æˆ‘ä»¬åœ¨ä¹‹å‰å®Œæˆäº†ä¸€ä¸ªå¸¦æœ‰1ä¸ªéšè—å±‚å’Œ5ä¸ªéšè—å•å…ƒçš„å¤šå±‚æ„ŸçŸ¥æœºã€‚å½“æˆ‘ä»¬å°†æš‚é€€æ³•åº”ç”¨åˆ°éšè—å±‚ï¼Œæˆ‘ä»¬å°±å¯æ¶ˆé™¤æ‰ä¸€äº›é“¾æ¥ã€‚ä¾‹å¦‚ä¸‹å›¾ï¼Œè¾“å‡ºçš„è®¡ç®—ä¸å†ä¾èµ–äº$h_2$æˆ–$h_5$ï¼Œå¹¶ä¸”å®ƒä»¬å„è‡ªçš„æ¢¯åº¦åœ¨æ‰§è¡Œåå‘ä¼ æ’­æ—¶ä¹Ÿä¼šæ¶ˆå¤±ã€‚è¿™å®Œå…¨æ˜¯éšæœºçš„ï¼Œè¿™æ ·ï¼Œè¾“å‡ºå±‚çš„è®¡ç®—ä¸èƒ½è¿‡åº¦ä¾èµ–äº$h_1, \ldots, h_5$çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e4051dc691094456a4e8cfa4c8834df3c1e0711a262241ea9998c7b9a18efbf8" width="600" hegiht="" ></center><center>å›¾1ï¼šä¸¢å¼ƒå‰åçš„ç¥ç»ç½‘ç»œ </center><p>æŒ‰ç…§è¿™æ ·çš„ç½‘ç»œè®¡ç®—æ¢¯åº¦ï¼Œè¿›è¡Œæ¢¯åº¦æ›´æ–°ï¼Œåˆ é™¤çš„ç¥ç»å…ƒä¸æ›´æ–°ã€‚åœ¨ä¸‹ä¸€æ¬¡è¿­ä»£æ—¶ï¼Œåœ¨éšæœºé€‰æ‹©ä¸€äº›ç¥ç»å…ƒï¼Œé‡å¤ä¸Šé¢çš„åšæ³•ï¼Œç›´åˆ°è®­ç»ƒç»“æŸã€‚å¦‚æœé€šè¿‡è®¸å¤šä¸åŒçš„æš‚é€€æ³•é®ç›–åå¾—åˆ°çš„é¢„æµ‹ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯´ç½‘ç»œå‘æŒ¥æ›´ç¨³å®šã€‚è¿™æ ·çš„å‚æ•°æ›´æ–°ä¸å†ä¾èµ–äºæŸäº›å…±åŒä½œç”¨çš„éšè—å±‚èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°é˜²æ­¢è¿‡æ‹Ÿåˆã€‚é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•æ—¶ä¸ç”¨æš‚é€€æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> paddle.vision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> TensorDataset, DataLoader</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data_fashion_mnist</span>(<span class="params">batch_size, resize=<span class="literal">None</span></span>):</span><br><span class="line">    trans = [transforms.ToTensor()]</span><br><span class="line">    <span class="keyword">if</span> resize:</span><br><span class="line">        trans.insert(<span class="number">0</span>, transforms.Resize(resize))</span><br><span class="line">    trans = transforms.Compose(trans)</span><br><span class="line">    mnist_train = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;train&#x27;</span>, transform=trans, download=<span class="literal">True</span>)</span><br><span class="line">    mnist_test = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;test&#x27;</span>, transform=trans, download=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> (DataLoader(mnist_train, batch_size=batch_size, shuffle=<span class="literal">True</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()),</span><br><span class="line">            DataLoader(mnist_test, batch_size=batch_size, shuffle=<span class="literal">False</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_dataloader_workers</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">dropout1, dropout2 = <span class="number">0.2</span>, <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">net = nn.Sequential(nn.Flatten(),</span><br><span class="line">        nn.Linear(<span class="number">784</span>, <span class="number">256</span>),</span><br><span class="line">        nn.ReLU(),</span><br><span class="line">        <span class="comment"># åœ¨ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚ä¹‹åæ·»åŠ ä¸€ä¸ªdropoutå±‚</span></span><br><span class="line">        nn.Dropout(dropout1),</span><br><span class="line">        nn.Linear(<span class="number">256</span>, <span class="number">256</span>),</span><br><span class="line">        nn.ReLU(),</span><br><span class="line">        <span class="comment"># åœ¨ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚ä¹‹åæ·»åŠ ä¸€ä¸ªdropoutå±‚</span></span><br><span class="line">        nn.Dropout(dropout2),</span><br><span class="line">        nn.Linear(<span class="number">256</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_weights</span>(<span class="params">layer</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(layer) == nn.Linear:</span><br><span class="line">        new_weight = paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, shape=layer.weight.shape)</span><br><span class="line">        <span class="comment">#print(new_weight)</span></span><br><span class="line">        layer.weight.set_value(new_weight)</span><br><span class="line"></span><br><span class="line">net.apply(init_weights)</span><br></pre></td></tr></table></figure><pre><code>Sequential(  (0): Flatten()  (1): Linear(in_features=784, out_features=256, dtype=float32)  (2): ReLU()  (3): Dropout(p=0.2, axis=None, mode=upscale_in_train)  (4): Linear(in_features=256, out_features=256, dtype=float32)  (5): ReLU()  (6): Dropout(p=0.5, axis=None, mode=upscale_in_train)  (7): Linear(in_features=256, out_features=10, dtype=float32))</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒå’Œæµ‹è¯•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">num_epochs, lr, batch_size = <span class="number">10</span>, <span class="number">0.5</span>, <span class="number">256</span></span><br><span class="line"></span><br><span class="line">loss = nn.CrossEntropyLoss()</span><br><span class="line">trainer = paddle.optimizer.SGD(lr, net.parameters())</span><br><span class="line"></span><br><span class="line">train_iter, test_iter = load_data_fashion_mnist(batch_size)</span><br><span class="line">model=paddle.Model(net)</span><br><span class="line">model.prepare(trainer,loss,paddle.metric.Accuracy(topk=(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)))</span><br><span class="line">model.fit(train_iter,epochs=num_epochs,batch_size=batch_size,verbose=<span class="number">1</span>)<span class="comment"># 1å¼€å¯ä¸€ä¸ªå¯è§†åŒ–çš„è¿›ç¨‹</span></span><br><span class="line">eval_result = model.evaluate(test_iter, batch_size=<span class="number">256</span>,verbose=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#evaluate(eval_data, batch_size=1, log_freq=10, verbose=2, num_workers=0, callbacks=None)</span></span><br><span class="line"><span class="built_in">print</span>(eval_result)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">The loss value printed in the log is the current step, and the metric is the average value of previous steps.</span></span><br><span class="line"><span class="string">Epoch 1/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.4857 - acc_top1: 0.5263 - acc_top2: 0.7206 - acc_top3: 0.8382 - 48ms/step         </span></span><br><span class="line"><span class="string">Epoch 2/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.5302 - acc_top1: 0.7777 - acc_top2: 0.9209 - acc_top3: 0.9783 - 49ms/step         </span></span><br><span class="line"><span class="string">Epoch 3/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.3104 - acc_top1: 0.8161 - acc_top2: 0.9399 - acc_top3: 0.9815 - 50ms/step         </span></span><br><span class="line"><span class="string">Epoch 4/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.3551 - acc_top1: 0.8371 - acc_top2: 0.9505 - acc_top3: 0.9846 - 52ms/step         </span></span><br><span class="line"><span class="string">Epoch 5/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.3623 - acc_top1: 0.8453 - acc_top2: 0.9541 - acc_top3: 0.9854 - 50ms/step         </span></span><br><span class="line"><span class="string">Epoch 6/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.3932 - acc_top1: 0.8542 - acc_top2: 0.9579 - acc_top3: 0.9870 - 51ms/step         </span></span><br><span class="line"><span class="string">Epoch 7/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.4121 - acc_top1: 0.8600 - acc_top2: 0.9604 - acc_top3: 0.9876 - 49ms/step         </span></span><br><span class="line"><span class="string">Epoch 8/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.2441 - acc_top1: 0.8646 - acc_top2: 0.9617 - acc_top3: 0.9882 - 49ms/step         </span></span><br><span class="line"><span class="string">Epoch 9/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.3528 - acc_top1: 0.8673 - acc_top2: 0.9632 - acc_top3: 0.9888 - 48ms/step         </span></span><br><span class="line"><span class="string">Epoch 10/10</span></span><br><span class="line"><span class="string">step 235/235 [==============================] - loss: 0.2424 - acc_top1: 0.8722 - acc_top2: 0.9654 - acc_top3: 0.9891 - 50ms/step         </span></span><br><span class="line"><span class="string">Eval begin...</span></span><br><span class="line"><span class="string">step 40/40 [==============================] - loss: 0.1212 - acc_top1: 0.8572 - acc_top2: 0.9616 - acc_top3: 0.9878 - 48ms/step         </span></span><br><span class="line"><span class="string">Eval samples: 10000</span></span><br><span class="line"><span class="string">&#123;&#x27;loss&#x27;: [0.121200696], &#x27;acc_top1&#x27;: 0.8572, &#x27;acc_top2&#x27;: 0.9616, &#x27;acc_top3&#x27;: 0.9878&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">acc_top1ï¼šåªæ‹¿ä¸€ä¸ªçš„å‡†ç¡®ç‡</span></span><br><span class="line"><span class="string">acc_top2ï¼šæ‹¿ä¸¤ä¸ªçš„å‡†ç¡®ç‡</span></span><br><span class="line"><span class="string">acc_top3ï¼šæ‹¿ä¸‰ä¸ªçš„å‡†ç¡®ç‡</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="4-3-å°ç»“"><a href="#4-3-å°ç»“" class="headerlink" title="4.3 å°ç»“"></a>4.3 å°ç»“</h3><ul><li>L2æ­£åˆ™åŒ–æ˜¯å¤„ç†è¿‡æ‹Ÿåˆçš„å¸¸ç”¨æ–¹æ³•ï¼šåœ¨è®­ç»ƒé›†çš„æŸå¤±å‡½æ•°ä¸­åŠ å…¥æƒ©ç½šé¡¹ï¼Œä»¥é™ä½å­¦ä¹ åˆ°çš„æ¨¡å‹çš„å¤æ‚åº¦ã€‚</li><li>æš‚é€€æ³•åœ¨å‰å‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æ¯ä¸€å†…éƒ¨å±‚çš„åŒæ—¶ä¸¢å¼ƒä¸€äº›ç¥ç»å…ƒã€‚</li><li>æš‚é€€æ³•å¯ä»¥é¿å…è¿‡æ‹Ÿåˆï¼Œå®ƒé€šå¸¸ä¸æ§åˆ¶æƒé‡å‘é‡çš„ç»´æ•°å’Œå¤§å°ç»“åˆä½¿ç”¨çš„ã€‚</li><li>æš‚é€€æ³•ä»…åœ¨è®­ç»ƒæœŸé—´ä½¿ç”¨ã€‚</li><li>æš‚é€€æ³•å°†ä¸€äº›è¾“å‡ºé¡¹éšæœºç½®0æ¥æ§åˆ¶æ¨¡å‹å¤æ‚åº¦ã€‚å¸¸ç”¨åœ¨éšè—å±‚çš„è¾“å‡ºä¸Šã€‚</li><li>0.1,0.9,0.5æ˜¯å¸¸ç”¨çš„ä¸¢å¼ƒæ³•è¶…å‚æ•°çš„å€¼ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜ç­–ç•¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 3.1-æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜ç­–ç•¥ï¼ˆä¸Šï¼‰</title>
      <link href="/2022/12/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A03.1-%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9%E4%B8%8E%E8%B0%83%E4%BC%98%E7%AD%96%E7%95%A5%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
      <url>/2022/12/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A03.1-%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9%E4%B8%8E%E8%B0%83%E4%BC%98%E7%AD%96%E7%95%A5%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¨¡å‹é€‰æ‹©"><a href="#æ¨¡å‹é€‰æ‹©" class="headerlink" title="æ¨¡å‹é€‰æ‹©"></a><strong>æ¨¡å‹é€‰æ‹©</strong></h1><p>ğŸ¨â€‹<code>sec_model_selection</code></p><p>å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ol><li>å½±å“æ¨¡å‹é€‰æ‹©çš„å¤šç§å› ç´ ï¼›</li><li>å¯¹å®éªŒä¸­å‡ºç°çš„ç°è±¡è¿›è¡Œè§‚å¯Ÿï¼Œå¹¶åˆ¤æ–­ç³»ç»Ÿå½“å‰æ‰€å¤„çš„çŠ¶æ€</li></ol><hr><h2 id="ä¸€ã€å½±å“æ¨¡å‹é€‰æ‹©çš„å¤šç§å› ç´ "><a href="#ä¸€ã€å½±å“æ¨¡å‹é€‰æ‹©çš„å¤šç§å› ç´ " class="headerlink" title="ä¸€ã€å½±å“æ¨¡å‹é€‰æ‹©çš„å¤šç§å› ç´ "></a><strong>ä¸€ã€å½±å“æ¨¡å‹é€‰æ‹©çš„å¤šç§å› ç´ </strong></h2><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œé€šå¸¸éœ€è¦è¯„ä¼°è‹¥å¹²å€™é€‰æ¨¡å‹çš„è¡¨ç°å¹¶ä»ä¸­é€‰æ‹©æ¨¡å‹ã€‚è¿™ä¸€è¿‡ç¨‹ç§°ä¸º<strong>æ¨¡å‹é€‰æ‹©ï¼ˆmodel selectionï¼‰</strong>ã€‚</p><p>å¯ä¾›é€‰æ‹©çš„å€™é€‰æ¨¡å‹å¯ä»¥æ˜¯æœ‰ç€<strong>ä¸åŒè¶…å‚æ•°çš„åŒç±»æ¨¡å‹</strong>ã€‚<br>ä¾‹å¦‚ï¼Œè®­ç»ƒå¤šå±‚æ„ŸçŸ¥æœºæ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æ¯”è¾ƒå…·æœ‰ä¸åŒæ•°é‡çš„éšè—å±‚ã€ä¸åŒæ•°é‡çš„éšè—å•å…ƒä»¥åŠä¸åŒçš„çš„æ¿€æ´»å‡½æ•°ç»„åˆçš„æ¨¡å‹ã€‚</p><h3 id="1-å‘ç°æ¨¡å¼"><a href="#1-å‘ç°æ¨¡å¼" class="headerlink" title="1.å‘ç°æ¨¡å¼"></a><strong>1.å‘ç°æ¨¡å¼</strong></h3><p>ä½œä¸ºæœºå™¨å­¦ä¹ ç§‘å­¦å®¶ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å‘ç°<strong>æ¨¡å¼ï¼ˆpatternï¼‰</strong>ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰èƒ½ç¡®å®šæ¨¡å‹æ˜¯çœŸæ­£å‘ç°äº†ä¸€ç§æ³›åŒ–çš„æ¨¡å¼ï¼Œè€Œä¸æ˜¯ç®€å•åœ°è®°ä½äº†æ•°æ®å‘¢ï¼Ÿ</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨æ‚£è€…çš„åŸºå› æ•°æ®ä¸ç—´å‘†çŠ¶æ€ä¹‹é—´å¯»æ‰¾æ¨¡å¼ï¼Œå…¶ä¸­æ ‡ç­¾æ˜¯ä»é›†åˆ ${\text{ç—´å‘†}, \text{è½»åº¦è®¤çŸ¥éšœç¢}, \text{å¥åº·}}$ ä¸­æå–çš„ã€‚å› ä¸ºåŸºå› å¯ä»¥å”¯ä¸€ç¡®å®šæ¯ä¸ªä¸ªä½“ï¼ˆä¸è€ƒè™‘åŒèƒèƒï¼‰ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªä»»åŠ¡ä¸­æ˜¯æœ‰å¯èƒ½è®°ä½æ•´ä¸ªæ•°æ®é›†çš„ã€‚æˆ‘ä»¬ä¸æƒ³è®©æ¨¡å‹åªä¼šåšè¿™æ ·çš„äº‹æƒ…ï¼šâ€œé‚£æ˜¯é²å‹ƒï¼æˆ‘è®°å¾—ä»–ï¼ä»–æœ‰ç—´å‘†ç—‡ï¼â€ã€‚åŸå› å¾ˆç®€å•ï¼šå½“æˆ‘ä»¬å°†æ¥éƒ¨ç½²è¯¥æ¨¡å‹æ—¶ï¼Œæ¨¡å‹éœ€è¦åˆ¤æ–­ä»æœªè§è¿‡çš„æ‚£è€…ã€‚åªæœ‰å½“æ¨¡å‹çœŸæ­£å‘ç°äº†ä¸€ç§æ³›åŒ–æ¨¡å¼æ—¶ï¼Œæ‰ä¼šä½œå‡ºæœ‰æ•ˆçš„é¢„æµ‹ã€‚</p><p>æ›´æ­£å¼åœ°è¯´ï¼Œ<strong>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å‘ç°æŸäº›æ¨¡å¼ï¼Œè¿™äº›æ¨¡å¼æ•æ‰åˆ°äº†æˆ‘ä»¬è®­ç»ƒé›†æ½œåœ¨æ€»ä½“çš„è§„å¾‹ã€‚</strong><br>å¦‚æœæˆåŠŸåšåˆ°äº†è¿™ç‚¹ï¼Œå³ä½¿æ˜¯å¯¹ä»¥å‰ä»æœªé‡åˆ°è¿‡çš„ä¸ªä½“ï¼Œæ¨¡å‹ä¹Ÿå¯ä»¥æˆåŠŸåœ°è¯„ä¼°é£é™©ã€‚å¦‚ä½•å‘ç°å¯ä»¥æ³›åŒ–çš„æ¨¡å¼æ˜¯æœºå™¨å­¦ä¹ çš„æ ¹æœ¬é—®é¢˜ã€‚</p><h3 id="2-è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®"><a href="#2-è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®" class="headerlink" title="2.è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®"></a><strong>2.è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®</strong></h3><p>ä¸ºäº†è¿›ä¸€æ­¥è®¨è®ºè¿™ä¸€ç°è±¡ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£è®­ç»ƒè¯¯å·®å’Œæ³›åŒ–è¯¯å·®ã€‚</p><p><strong>è®­ç»ƒè¯¯å·®ï¼ˆtraining errorï¼‰</strong> æ˜¯æŒ‡ï¼Œæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šè®¡ç®—å¾—åˆ°çš„è¯¯å·®ã€‚<strong>æ³›åŒ–è¯¯å·®ï¼ˆgeneralization errorï¼‰</strong> æ˜¯æŒ‡ï¼Œæ¨¡å‹åœ¨ä»»æ„ä¸€ä¸ªæµ‹è¯•æ•°æ®æ ·æœ¬ä¸Šè¡¨ç°å‡ºçš„è¯¯å·®çš„æœŸæœ›ï¼Œå¹¶å¸¸å¸¸é€šè¿‡æµ‹è¯•æ•°æ®é›†ä¸Šçš„è¯¯å·®æ¥è¿‘ä¼¼ã€‚å‚æ•°çš„é€‰æ‹©ä¾æ®äº†æœ€å°åŒ–è®­ç»ƒè¯¯å·®ã€‚æ‰€ä»¥ï¼Œè®­ç»ƒè¯¯å·®çš„æœŸæœ›å°äºæˆ–ç­‰äºæ³›åŒ–è¯¯å·®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”±è®­ç»ƒæ•°æ®é›†å­¦åˆ°çš„æ¨¡å‹å‚æ•°ä¼šä½¿æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šçš„è¡¨ç°ä¼˜äºæˆ–ç­‰äºåœ¨æµ‹è¯•æ•°æ®é›†ä¸Šçš„è¡¨ç°ã€‚</p><p><strong>ç”±äºæ— æ³•ä»è®­ç»ƒè¯¯å·®ä¼°è®¡æ³›åŒ–è¯¯å·®ï¼Œä¸€å‘³åœ°é™ä½è®­ç»ƒè¯¯å·®å¹¶ä¸æ„å‘³ç€æ³›åŒ–è¯¯å·®ä¸€å®šä¼šé™ä½ã€‚</strong><br>ä¸‹é¢çš„ç¤ºä¾‹æœ‰åŠ©äºæ›´å¥½åœ°è¯´æ˜è¿™ç§æƒ…å†µï¼šå‡è®¾ä¸€ä¸ªå¤§å­¦ç”Ÿæ­£åœ¨åŠªåŠ›å‡†å¤‡æœŸæœ«è€ƒè¯•ã€‚ä¸€ä¸ªå‹¤å¥‹çš„å­¦ç”Ÿä¼šåŠªåŠ›åšå¥½ç»ƒä¹ ï¼Œå¹¶åˆ©ç”¨å¾€å¹´çš„è€ƒè¯•é¢˜ç›®æ¥æµ‹è¯•è‡ªå·±çš„èƒ½åŠ›ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåœ¨è¿‡å»çš„è€ƒè¯•é¢˜ç›®ä¸Šå–å¾—å¥½æˆç»©å¹¶ä¸èƒ½ä¿è¯ä»–ä¼šåœ¨çœŸæ­£è€ƒè¯•æ—¶å‘æŒ¥å‡ºè‰²ã€‚ä¾‹å¦‚ï¼Œå­¦ç”Ÿå¯èƒ½è¯•å›¾é€šè¿‡æ­»è®°ç¡¬èƒŒè€ƒé¢˜çš„ç­”æ¡ˆæ¥åšå‡†å¤‡ï¼Œä»–ç”šè‡³å¯ä»¥å®Œå…¨è®°ä½è¿‡å»è€ƒè¯•çš„ç­”æ¡ˆï¼›å¦ä¸€åå­¦ç”Ÿå¯èƒ½ä¼šé€šè¿‡è¯•å›¾ç†è§£ç»™å‡ºæŸäº›ç­”æ¡ˆçš„åŸå› æ¥åšå‡†å¤‡ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåè€…ä¼šè€ƒå¾—æ›´å¥½ã€‚<strong>æœºå™¨å­¦ä¹ æ¨¡å‹åº”å…³æ³¨é™ä½æ³›åŒ–è¯¯å·®</strong>ã€‚</p><h3 id="3-æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆ"><a href="#3-æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆ" class="headerlink" title="3.æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆ"></a><strong>3.æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆ</strong></h3><p>å½“æˆ‘ä»¬æ¯”è¾ƒè®­ç»ƒå’ŒéªŒè¯è¯¯å·®æ—¶ï¼Œæˆ‘ä»¬è¦æ³¨æ„ä¸¤ç§å¸¸è§çš„æƒ…å†µã€‚</p><p>ç¬¬ä¸€ç§æƒ…å†µæ˜¯è®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®éƒ½å¾ˆä¸¥é‡ï¼Œä½†å®ƒä»¬ä¹‹é—´ä»…æœ‰ä¸€ç‚¹å·®è·ã€‚å¦‚æœæ¨¡å‹ä¸èƒ½é™ä½è®­ç»ƒè¯¯å·®ï¼Œè¿™å¯èƒ½æ„å‘³ç€æ¨¡å‹è¿‡äºç®€å•ï¼ˆå³è¡¨è¾¾èƒ½åŠ›ä¸è¶³ï¼‰ï¼Œæ— æ³•æ•è·è¯•å›¾å­¦ä¹ çš„æ¨¡å¼ï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡å¯ä»¥ç”¨ä¸€ä¸ªæ›´å¤æ‚çš„æ¨¡å‹é™ä½è®­ç»ƒè¯¯å·®ã€‚è¿™ç§ç°è±¡è¢«ç§°ä¸º<strong>æ¬ æ‹Ÿåˆï¼ˆunderfittingï¼‰</strong>ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå½“æˆ‘ä»¬çš„è®­ç»ƒè¯¯å·®æ˜æ˜¾ä½äºéªŒè¯è¯¯å·®æ—¶è¦å°å¿ƒï¼Œè¿™è¡¨æ˜ä¸¥é‡çš„<strong>è¿‡æ‹Ÿåˆï¼ˆoverfittingï¼‰</strong>ï¼Œæ¨¡å‹æœ€ç»ˆå¯ä»¥åœ¨è®­ç»ƒé›†ä¸Šè¾¾åˆ°å®Œç¾çš„ç²¾åº¦ï¼Œæ­¤æ—¶æµ‹è¯•é›†çš„å‡†ç¡®æ€§å´ä¸‹é™äº†ã€‚æ³¨æ„ï¼Œè¿‡æ‹Ÿåˆå¹¶ä¸æ€»æ˜¯ä¸€ä»¶åäº‹ï¼Œç‰¹åˆ«æ˜¯åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œæœ€å¥½çš„é¢„æµ‹æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„è¡¨ç°å¾€å¾€æ¯”åœ¨ä¿ç•™ï¼ˆéªŒè¯ï¼‰æ•°æ®ä¸Šå¥½å¾—å¤šã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬é€šå¸¸æ›´å…³å¿ƒéªŒè¯è¯¯å·®ï¼Œè€Œä¸æ˜¯è®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®ä¹‹é—´çš„å·®è·ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/94c736d6cf914aa28587a908985e5b3f96f5a1183c9a40c688192ef8b31d6cc4" width="700" hegiht="" ></center><center>å›¾1ï¼šæ¬ æ‹Ÿåˆã€æ­£å¸¸æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆ </center><h3 id="4-è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†"><a href="#4-è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†" class="headerlink" title="4.è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†"></a><strong>4.è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†</strong></h3><p>ä¸ºäº†ç¡®å®šå€™é€‰æ¨¡å‹ä¸­çš„æœ€ä½³æ¨¡å‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨éªŒè¯é›†ã€‚åŸåˆ™ä¸Šï¼Œåœ¨æˆ‘ä»¬ç¡®å®šæ‰€æœ‰çš„è¶…å‚æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç”¨åˆ°æµ‹è¯•é›†ã€‚ä»ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œæµ‹è¯•é›†åªåœ¨æ‰€æœ‰è¶…å‚æ•°å’Œæ¨¡å‹å‚æ•°é€‰å®šåä½¿ç”¨ä¸€æ¬¡ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ¨¡å‹é€‰æ‹©è¿‡ç¨‹ä¸­ä½¿ç”¨æµ‹è¯•æ•°æ®ï¼Œå¯èƒ½ä¼šæœ‰è¿‡æ‹Ÿåˆæµ‹è¯•æ•°æ®çš„é£é™©ï¼Œé‚£å°±éº»çƒ¦å¤§äº†ã€‚å¦‚æœæˆ‘ä»¬è¿‡æ‹Ÿåˆäº†è®­ç»ƒæ•°æ®ï¼Œè¿˜å¯ä»¥åœ¨æµ‹è¯•æ•°æ®ä¸Šçš„è¯„ä¼°æ¥åˆ¤æ–­è¿‡æ‹Ÿåˆã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¿‡æ‹Ÿåˆäº†æµ‹è¯•æ•°æ®ï¼Œæˆ‘ä»¬åˆè¯¥æ€ä¹ˆçŸ¥é“å‘¢ï¼Ÿå› æ­¤ï¼Œæˆ‘ä»¬å†³ä¸èƒ½ä¾é æµ‹è¯•æ•°æ®è¿›è¡Œæ¨¡å‹é€‰æ‹©ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½ä»…ä»…ä¾é è®­ç»ƒæ•°æ®æ¥é€‰æ‹©æ¨¡å‹ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•ä¼°è®¡è®­ç»ƒæ•°æ®çš„æ³›åŒ–è¯¯å·®ã€‚</p><p>è§£å†³æ­¤é—®é¢˜çš„å¸¸è§åšæ³•æ˜¯å°†æˆ‘ä»¬çš„æ•°æ®åˆ†æˆä¸‰ä»½ï¼Œé™¤äº†è®­ç»ƒå’Œæµ‹è¯•æ•°æ®é›†ä¹‹å¤–ï¼Œå¯ä»¥é¢„ç•™ä¸€éƒ¨åˆ†åœ¨è®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ä»¥å¤–çš„æ•°æ®æ¥è¿›è¡Œæ¨¡å‹é€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯å¢åŠ ä¸€ä¸ª<strong>éªŒè¯æ•°æ®é›†ï¼ˆvalidation datasetï¼‰</strong>ã€‚æˆ‘ä»¬æ¯æ¬¡å®éªŒæŠ¥å‘Šçš„å‡†ç¡®åº¦éƒ½æ˜¯éªŒè¯é›†å‡†ç¡®åº¦ï¼Œè€Œä¸æ˜¯æµ‹è¯•é›†å‡†ç¡®åº¦ã€‚</p><p><strong>ã€$K$æŠ˜äº¤å‰éªŒè¯ã€‘</strong></p><p>é‚£ä¹ˆå¦‚æœè¯´æ ¹æœ¬æ²¡æœ‰é‚£ä¹ˆå¤šçš„è®­ç»ƒæ•°æ®å‘¢ï¼Ÿå½“è®­ç»ƒæ•°æ®ç¨€ç¼ºæ—¶ï¼Œæˆ‘ä»¬ç”šè‡³å¯èƒ½æ— æ³•æä¾›è¶³å¤Ÿçš„æ•°æ®æ¥æ„æˆä¸€ä¸ªåˆé€‚çš„éªŒè¯é›†ã€‚è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæµè¡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯é‡‡ç”¨$K$æŠ˜äº¤å‰éªŒè¯ã€‚<br>è¿™é‡Œï¼ŒåŸå§‹è®­ç»ƒæ•°æ®è¢«åˆ†æˆ$K$ï¼ˆå¸¸ç”¨çš„$K$ä¸º5æˆ–10ï¼‰ä¸ªä¸é‡å çš„å­é›†ï¼Œç„¶åæ‰§è¡Œ$K$æ¬¡æ¨¡å‹è®­ç»ƒå’ŒéªŒè¯ï¼Œæ¯æ¬¡åœ¨$K-1$ä¸ªå­é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå¹¶åœ¨å‰©ä½™çš„ä¸€ä¸ªå­é›†ï¼ˆåœ¨è¯¥è½®ä¸­æ²¡æœ‰ç”¨äºè®­ç»ƒçš„å­é›†ï¼‰ä¸Šè¿›è¡ŒéªŒè¯ã€‚ã€‚åœ¨è¿™$K$æ¬¡è®­ç»ƒå’ŒéªŒè¯ä¸­ï¼Œæ¯æ¬¡ç”¨æ¥éªŒè¯æ¨¡å‹çš„å­æ•°æ®é›†éƒ½ä¸åŒã€‚æœ€åå¯¹è¿™$K$æ¬¡è®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®åˆ†åˆ«æ±‚å¹³å‡ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/8b852abae99840019ce272b35005e5c10a867ab72b9044608a02ed3b2a4a0bb9" width="500" hegiht="" ></center><center>å›¾2ï¼š$K$æŠ˜äº¤å‰éªŒè¯ </center><p>è¿™é‡Œçš„$K$åŒæ ·æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ¥ä¼°è®¡çœŸå®å‚æ•°å€¼å¾—è¶…å‚æ•°ï¼Œå¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œè°ƒæ•´ï¼Œç»éªŒè¯é›†ç¡®å®šæœ€ç»ˆå€¼ã€‚</p><p><strong>ã€ç‹¬ç«‹åŒåˆ†å¸ƒå‡è®¾ã€‘</strong></p><p>ä¸€ä¸ªåœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œåœ¨æµ‹è¯•é›†ä¸Šä¹Ÿåº”å½“å…·æœ‰è¾ƒå¥½çš„æ•ˆæœã€‚æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªå‰æå‡è®¾å°±æ˜¯è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„ã€‚è¿™æ„å‘³ç€å¯¹æ•°æ®è¿›è¡Œé‡‡æ ·çš„è¿‡ç¨‹æ²¡æœ‰è¿›è¡Œâ€œè®°å¿†â€ã€‚æ¢å¥è¯è¯´ï¼ŒæŠ½å–çš„ç¬¬2ä¸ªæ ·æœ¬å’Œç¬¬3ä¸ªæ ·æœ¬çš„ç›¸å…³æ€§ï¼Œå¹¶ä¸æ¯”æŠ½å–çš„ç¬¬2ä¸ªæ ·æœ¬å’Œç¬¬200ä¸‡ä¸ªæ ·æœ¬çš„ç›¸å…³æ€§æ›´å¼ºã€‚</p><p>æœ‰æ—¶å€™æˆ‘ä»¬å³ä½¿è½»å¾®è¿èƒŒç‹¬ç«‹åŒåˆ†å¸ƒå‡è®¾ï¼Œæ¨¡å‹ä»å°†ç»§ç»­è¿è¡Œå¾—éå¸¸å¥½ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰è®¸å¤šæœ‰ç”¨çš„å·¥å…·å·²ç»åº”ç”¨äºç°å®ï¼Œå¦‚äººè„¸è¯†åˆ«ã€è¯­éŸ³è¯†åˆ«å’Œè¯­è¨€ç¿»è¯‘ã€‚æ¯•ç«Ÿï¼Œå‡ ä¹æ‰€æœ‰ç°å®çš„åº”ç”¨éƒ½è‡³å°‘æ¶‰åŠåˆ°ä¸€äº›è¿èƒŒç‹¬ç«‹åŒåˆ†å¸ƒå‡è®¾çš„æƒ…å†µã€‚æœ‰äº›è¿èƒŒç‹¬ç«‹åŒåˆ†å¸ƒå‡è®¾çš„è¡Œä¸ºè‚¯å®šä¼šå¸¦æ¥éº»çƒ¦ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¯•å›¾åªç”¨æ¥è‡ªå¤§å­¦ç”Ÿçš„äººè„¸æ•°æ®æ¥è®­ç»ƒä¸€ä¸ªäººè„¸è¯†åˆ«ç³»ç»Ÿï¼Œç„¶åæƒ³è¦ç”¨å®ƒæ¥ç›‘æµ‹ç–—å…»é™¢ä¸­çš„è€äººã€‚è¿™ä¸å¤ªå¯èƒ½æœ‰æ•ˆï¼Œå› ä¸ºå¤§å­¦ç”Ÿçœ‹èµ·æ¥å¾€å¾€ä¸è€å¹´äººæœ‰å¾ˆå¤§çš„ä¸åŒã€‚</p><h3 id="5-åå·®å’Œæ–¹å·®çš„å¹³è¡¡"><a href="#5-åå·®å’Œæ–¹å·®çš„å¹³è¡¡" class="headerlink" title="5.åå·®å’Œæ–¹å·®çš„å¹³è¡¡"></a><strong>5.åå·®å’Œæ–¹å·®çš„å¹³è¡¡</strong></h3><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼š<strong>åå·®ï¼ˆBiasï¼‰</strong> æŒ‡çš„æ˜¯æ¨¡å‹å¯¹æ ·æœ¬çš„é¢„æµ‹å€¼å’ŒçœŸå®å€¼çš„è¯¯å·®ã€‚å®ƒåº¦é‡äº†æœŸæœ›é¢„æµ‹å’ŒçœŸå®æ ‡ç­¾çš„åç¦»ç¨‹åº¦ï¼Œåæ˜ çš„æ˜¯æ¨¡å‹æœ¬èº«çš„ç²¾ç¡®åº¦ï¼Œå³æ¨¡å‹æœ¬èº«çš„è¡¨è¾¾èƒ½åŠ›ã€‚<strong>æ–¹å·®ï¼ˆVarianceï¼‰</strong> æŒ‡çš„æ˜¯æ¨¡å‹å¯¹æ ·æœ¬æ•°æ®ï¼ˆç”±å™ªå£°å¼•èµ·çš„ï¼‰çš„å¾®å°æ³¢åŠ¨åšå‡ºçš„ååº”ã€‚å®ƒåº¦é‡äº†ç”¨ä¸åŒè®­ç»ƒé›†å¾—åˆ°çš„è¾“å‡ºç»“æœä¸æ¨¡å‹è¾“å‡ºæœŸæœ›ä¹‹é—´çš„è¯¯å·®ï¼Œå³æ¨¡å‹çš„æ³¢åŠ¨æƒ…å†µï¼Œå®ƒåˆ»ç”»äº†å­¦ä¹ æ€§èƒ½éšè®­ç»ƒé›†å˜åŠ¨è€Œäº§ç”Ÿçš„å˜åŒ–ï¼Œå³æ•°æ®æ‰°åŠ¨é€ æˆçš„å½±å“ã€‚ç”±æ­¤å¯è§ï¼Œåå·®å’Œæ–¹å·®ä»ä¸åŒçš„ä¸¤ä¸ªè§’åº¦åˆ»ç”»ä¼°è®¡é‡çš„è¯¯å·®ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e5154bbe58694434a182ed26cd9e76884f76d989bb1e4a3995c661237825caa5" width="350" hegiht="" ></center><center>å›¾3ï¼šæ–¹å·®ä¸åå·® </center><p>å‡è®¾é¶å¿ƒåŒºåŸŸæ˜¯çœŸæ˜¯æ ‡ç­¾æ‰€åœ¨çš„åŒºåŸŸï¼Œè“ç‚¹è¡¨ç¤ºæ¨¡å‹å¯¹ä¸åŒæ•°æ®é›†çš„æ ·æœ¬è¾“å‡ºçš„é¢„æµ‹å€¼ã€‚å½“æ–¹å·®è¾ƒä½çš„æ—¶å€™ï¼Œè“ç‚¹æ¯”è¾ƒé›†ä¸­ï¼›è€Œæ–¹å·®è¾ƒé«˜çš„æ—¶å€™ï¼Œè“ç‚¹æ¯”è¾ƒåˆ†æ•£ã€‚å½“åå·®è¾ƒä½çš„æ—¶å€™ï¼Œè“ç‚¹æ›´æ¥è¿‘ä¸é¶å¿ƒï¼Œè¡¨ç¤ºé¢„æµ‹æ•ˆæœæ¯”è¾ƒå¥½ï¼Œåä¹‹ç¦»é¶å¿ƒæ¯”è¾ƒè¿œï¼Œé¢„æµ‹æ•ˆæœå˜å·®ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ–¹å·®å’Œåå·®éƒ½åº”å½“å°½å¯èƒ½åœ°ä½ï¼Œå³å…¨éƒ¨è½åœ¨é¶å¿ƒä½ç½®ï¼Œæ­¤æ—¶ä½“ç°äº†æ¨¡å‹è‰¯å¥½çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p><p>ç»™å®šäº†ä¸€ä¸ªå­¦ä¹ ç›®æ ‡ï¼Œåœ¨è®­ç»ƒçš„å¼€å§‹é˜¶æ®µï¼Œç”±äºè®­ç»ƒè¾ƒå°‘ï¼Œå­¦ä¹ ä¸è¶³ï¼Œæ¨¡å‹æ‹Ÿåˆèƒ½åŠ›ä¸å¼ºï¼Œé¢„æµ‹å€¼å’ŒçœŸæ˜¯æ ‡ç­¾å·®è·å¾ˆå¤§ï¼Œå³åå·®å¾ˆå¤§ã€‚è€Œæ¨¡å‹æ— æ³•è¾ƒå¥½åœ°è¡¨è¾¾æ•°æ®ï¼Œæ•°æ®é›†çš„æ…åŠ¨ä¹Ÿæ— æ³•äº§ç”Ÿæ˜æ˜¾çš„å˜åŒ–ï¼Œå³æ–¹å·®å¾ˆå°ï¼Œæ­¤æ—¶æ˜¯æ¬ æ‹ŸåˆçŠ¶æ€ï¼›éšç€è®­ç»ƒçš„è¿›è¡Œï¼Œæ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ä¸æ–­å¢å¼ºï¼Œå¼€å§‹èƒ½å¤Ÿæ•æ‰è®­ç»ƒæ•°æ®æ…åŠ¨å¸¦æ¥çš„å½±å“ï¼Œåœ¨å……åˆ†è®­ç»ƒåï¼Œè½»å¾®çš„æ…åŠ¨éƒ½ä¼šå¯¼è‡´æ¨¡å‹å‘ç”Ÿæ˜æ˜¾çš„å˜åŠ¨ï¼Œæ­¤æ—¶å·²ç»èƒ½å¤Ÿå­¦ä¹ è®­ç»ƒæ•°æ®é›†æœ¬èº«ç‰¹å®šçš„ã€è€Œéæ‰€æœ‰æ•°æ®é›†çš„é€šç”¨çš„ç‰¹æ€§ï¼Œè¯´æ˜æ¨¡å‹åå·®è¾ƒå°ï¼Œè€Œæ–¹å·®è¾ƒå¤§ï¼Œè¿™æ˜¯è¿‡æ‹Ÿåˆçš„è¡¨ç°ã€‚</p><h2 id="äºŒã€å°ç»“"><a href="#äºŒã€å°ç»“" class="headerlink" title="äºŒã€å°ç»“"></a><strong>äºŒã€å°ç»“</strong></h2><ul><li>æ¬ æ‹Ÿåˆæ˜¯æŒ‡æ¨¡å‹æ— æ³•ç»§ç»­å‡å°‘è®­ç»ƒè¯¯å·®ã€‚è¿‡æ‹Ÿåˆæ˜¯æŒ‡è®­ç»ƒè¯¯å·®è¿œå°äºéªŒè¯è¯¯å·®ã€‚</li><li>ç”±äºä¸èƒ½åŸºäºè®­ç»ƒè¯¯å·®æ¥ä¼°è®¡æ³›åŒ–è¯¯å·®ï¼Œå› æ­¤ç®€å•åœ°æœ€å°åŒ–è®­ç»ƒè¯¯å·®å¹¶ä¸ä¸€å®šæ„å‘³ç€æ³›åŒ–è¯¯å·®çš„å‡å°ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹éœ€è¦æ³¨æ„é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œå³é˜²æ­¢æ³›åŒ–è¯¯å·®è¿‡å¤§ã€‚</li><li>éªŒè¯é›†å¯ä»¥ç”¨äºæ¨¡å‹é€‰æ‹©ï¼Œä½†ä¸èƒ½è¿‡äºéšæ„åœ°ä½¿ç”¨å®ƒã€‚</li><li>æˆ‘ä»¬åº”è¯¥é€‰æ‹©ä¸€ä¸ªå¤æ‚åº¦é€‚å½“çš„æ¨¡å‹ï¼Œé¿å…ä½¿ç”¨æ•°é‡ä¸è¶³çš„è®­ç»ƒæ ·æœ¬ã€‚</li><li>æ¢¯åº¦æ¶ˆå¤±çš„åŸå› åœ¨äºç¥ç»ç½‘ç»œçš„éšè—å±‚è¿‡å¤šä»¥åŠä½¿ç”¨äº†ä¸åˆé€‚çš„æ¿€æ´»å‡½æ•°ï¼ˆä¾‹å¦‚softmaxå‡½æ•°ï¼‰ï¼›æ¢¯åº¦çˆ†ç‚¸çš„åŸå› åœ¨äºç¥ç»ç½‘ç»œçš„éšè—å±‚è¿‡å¤šä»¥åŠåˆå§‹åŒ–çš„æƒé‡è¿‡å¤§ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜ç­–ç•¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 2.3-å¤šå±‚æ„ŸçŸ¥æœºçš„æ­å»ºä¸å®ç°</title>
      <link href="/2022/12/23/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A02.3-%E5%A4%9A%E5%B1%82%E6%84%9F%E7%9F%A5%E6%9C%BA%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/12/23/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A02.3-%E5%A4%9A%E5%B1%82%E6%84%9F%E7%9F%A5%E6%9C%BA%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤šå±‚æ„ŸçŸ¥æœºã€å¤šå±‚è¿æ¥ã€‘"><a href="#å¤šå±‚æ„ŸçŸ¥æœºã€å¤šå±‚è¿æ¥ã€‘" class="headerlink" title="å¤šå±‚æ„ŸçŸ¥æœºã€å¤šå±‚è¿æ¥ã€‘"></a><strong>å¤šå±‚æ„ŸçŸ¥æœºã€å¤šå±‚è¿æ¥ã€‘</strong></h1><p>â³<code>sec_mlp</code></p><p>å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ol><li>ç¥ç»ç½‘ç»œçš„å·¥ä½œåŸç†ï¼šå‰å‘ä¼ æ’­ã€åå‘ä¼ æ’­å’Œæ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹ï¼›</li><li>ä¸€å®šèŒƒå›´å†…æ·±å±‚ç½‘ç»œæ¯”æµ…å±‚ç½‘ç»œèƒ½åŠ›æ›´å¼ºï¼›</li><li>æŒæ¡æ­å»ºæ·±å±‚ç¥ç»ç½‘ç»œçš„æ–¹æ³•ã€‚</li></ol><hr><h2 id="ä¸€ã€ä»æµ…å±‚åˆ°æ·±å±‚"><a href="#ä¸€ã€ä»æµ…å±‚åˆ°æ·±å±‚" class="headerlink" title="ä¸€ã€ä»æµ…å±‚åˆ°æ·±å±‚"></a><strong>ä¸€ã€ä»æµ…å±‚åˆ°æ·±å±‚</strong></h2><p>åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦è®²è¿°äº†æµ…å±‚ç¥ç»ç½‘ç»œçš„ç›¸å…³ç»†èŠ‚ï¼Œæœ¬èŠ‚å°†æµ…å±‚ç½‘ç»œçš„çŸ¥è¯†æ‰©å±•åˆ°æ·±å±‚ç½‘ç»œï¼Œ<strong>æ·±åº¦ç¥ç»ç½‘ç»œ(Deep Neural Networks, DNN)</strong> æ˜¯æ·±åº¦å­¦ä¹ çš„åŸºç¡€ã€‚</p><h3 id="å‡è®¾çš„æå‡º"><a href="#å‡è®¾çš„æå‡º" class="headerlink" title="å‡è®¾çš„æå‡º"></a><strong>å‡è®¾çš„æå‡º</strong></h3><p>ä»¿å°„å˜æ¢æ˜¯ä¸€ç§å¸¦æœ‰åç½®é¡¹çš„çº¿æ€§å˜æ¢ã€‚é¦–å…ˆï¼Œå›æƒ³ä¸€ä¸‹softmaxå›å½’çš„æ¨¡å‹æ¶æ„ï¼Œè¯¥æ¨¡å‹é€šè¿‡å•ä¸ªä»¿å°„å˜æ¢å°†æˆ‘ä»¬çš„è¾“å…¥ç›´æ¥æ˜ å°„åˆ°è¾“å‡ºï¼Œç„¶åè¿›è¡Œsoftmaxæ“ä½œã€‚å¦‚æœæˆ‘ä»¬çš„æ ‡ç­¾é€šè¿‡ä»¿å°„å˜æ¢åç¡®å®ä¸æˆ‘ä»¬çš„è¾“å…¥æ•°æ®ç›¸å…³ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•ç¡®å®è¶³å¤Ÿäº†ã€‚ä½†æ˜¯ï¼Œä»¿å°„å˜æ¢ä¸­çš„çº¿æ€§æ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„å‡è®¾ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e327ddb9f1d54a88844382662ae02f84a01eefed58a54b558532fe5b5d9cb196" width="500" hegiht="" ></center><center>å›¾1ï¼šsoftmaxæ¨¡å‹å‡è®¾ </center><p>çº¿æ€§æ„å‘³ç€å•è°ƒå‡è®¾ï¼šä»»ä½•ç‰¹å¾çš„å¢å¤§éƒ½ä¼šå¯¼è‡´æ¨¡å‹è¾“å‡ºçš„å¢å¤§ï¼ˆå¦‚æœå¯¹åº”çš„æƒé‡ä¸ºæ­£ï¼‰ï¼Œæˆ–è€…å¯¼è‡´æ¨¡å‹è¾“å‡ºçš„å‡å°ï¼ˆå¦‚æœå¯¹åº”çš„æƒé‡ä¸ºè´Ÿï¼‰ã€‚æˆ‘ä»¬ä¸èƒ½å®Œå…¨å¦å®šè¿™ç§ç»“è®ºï¼Œæœ‰æ—¶è¿™æ˜¯æœ‰é“ç†çš„ã€‚</p><h4 id="1ï¼‰é€‚ç”¨äºçº¿æ€§å‡è®¾"><a href="#1ï¼‰é€‚ç”¨äºçº¿æ€§å‡è®¾" class="headerlink" title="1ï¼‰é€‚ç”¨äºçº¿æ€§å‡è®¾"></a><strong>1ï¼‰é€‚ç”¨äºçº¿æ€§å‡è®¾</strong></h4><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾é¢„æµ‹ä¸€ä¸ªäººæ˜¯å¦ä¼šå¿è¿˜è´·æ¬¾ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œåœ¨å…¶ä»–æ¡ä»¶ä¸å˜çš„æƒ…å†µä¸‹ï¼Œæ”¶å…¥è¾ƒé«˜çš„ç”³è¯·äººæ¯”æ”¶å…¥è¾ƒä½çš„ç”³è¯·äººæ›´æœ‰å¯èƒ½å¿è¿˜è´·æ¬¾ã€‚ä½†æ˜¯ï¼Œè™½ç„¶æ”¶å…¥ä¸è¿˜æ¬¾æ¦‚ç‡å­˜åœ¨å•è°ƒæ€§ï¼Œä½†å®ƒä»¬ä¸æ˜¯çº¿æ€§ç›¸å…³çš„ã€‚</p><p>æ”¶å…¥ä»0å¢åŠ åˆ°5ä¸‡ï¼Œå¯èƒ½æ¯”ä»100ä¸‡å¢åŠ åˆ°105ä¸‡å¸¦æ¥æ›´å¤§çš„è¿˜æ¬¾å¯èƒ½æ€§ã€‚å¤„ç†è¿™ä¸€é—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯<strong>å¯¹æˆ‘ä»¬çš„æ•°æ®è¿›è¡Œé¢„å¤„ç†</strong>ï¼Œä½¿çº¿æ€§å˜å¾—æ›´åˆç†ï¼Œå¦‚ä½¿ç”¨æ”¶å…¥çš„å¯¹æ•°ä½œä¸ºæˆ‘ä»¬çš„ç‰¹å¾ã€‚</p><h4 id="2ï¼‰éƒ¨åˆ†é€‚ç”¨äºçº¿æ€§å‡è®¾"><a href="#2ï¼‰éƒ¨åˆ†é€‚ç”¨äºçº¿æ€§å‡è®¾" class="headerlink" title="2ï¼‰éƒ¨åˆ†é€‚ç”¨äºçº¿æ€§å‡è®¾"></a><strong>2ï¼‰éƒ¨åˆ†é€‚ç”¨äºçº¿æ€§å‡è®¾</strong></h4><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦æ ¹æ®ä½“æ¸©é¢„æµ‹æ­»äº¡ç‡ã€‚å¯¹äºä½“æ¸©é«˜äº37æ‘„æ°åº¦çš„äººæ¥è¯´ï¼Œæ¸©åº¦è¶Šé«˜é£é™©è¶Šå¤§ï¼Œç„¶è€Œï¼Œå¯¹äºä½“æ¸©ä½äº37æ‘„æ°åº¦çš„äººæ¥è¯´ï¼Œæ¸©åº¦è¶Šé«˜é£é™©å°±è¶Šä½ã€‚<br>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›å·§å¦™çš„<strong>é¢„å¤„ç†</strong>æ¥è§£å†³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸37æ‘„æ°åº¦çš„è·ç¦»ä½œä¸ºç‰¹å¾ã€‚</p><h4 id="3ï¼‰ä¸é€‚ç”¨äºçº¿æ€§å‡è®¾"><a href="#3ï¼‰ä¸é€‚ç”¨äºçº¿æ€§å‡è®¾" class="headerlink" title="3ï¼‰ä¸é€‚ç”¨äºçº¿æ€§å‡è®¾"></a><strong>3ï¼‰ä¸é€‚ç”¨äºçº¿æ€§å‡è®¾</strong></h4><p>ä½†æ˜¯ï¼Œå¦‚ä½•å¯¹çŒ«å’Œç‹—çš„å›¾åƒè¿›è¡Œåˆ†ç±»å‘¢ï¼Ÿå¢åŠ ä½ç½®$(13, 17)$å¤„åƒç´ çš„å¼ºåº¦æ˜¯å¦æ€»æ˜¯å¢åŠ ï¼ˆæˆ–é™ä½ï¼‰å›¾åƒæç»˜ç‹—çš„ä¼¼ç„¶ï¼Ÿå¯¹çº¿æ€§æ¨¡å‹çš„ä¾èµ–å¯¹åº”äºä¸€ä¸ªéšå«çš„å‡è®¾ï¼Œå³åŒºåˆ†çŒ«å’Œç‹—çš„å”¯ä¸€è¦æ±‚æ˜¯è¯„ä¼°å•ä¸ªåƒç´ çš„å¼ºåº¦ã€‚åœ¨ä¸€ä¸ªå€’ç½®å›¾åƒåä¾ç„¶ä¿ç•™ç±»åˆ«çš„ä¸–ç•Œé‡Œï¼Œè¿™ç§æ–¹æ³•æ³¨å®šä¼šå¤±è´¥ã€‚</p><p>ä¸æˆ‘ä»¬å‰é¢çš„ä¾‹å­ç›¸æ¯”ï¼Œè¿™é‡Œçš„çº¿æ€§å¾ˆè’è°¬ï¼Œè€Œä¸”æˆ‘ä»¬éš¾ä»¥é€šè¿‡ç®€å•çš„é¢„å¤„ç†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™æ˜¯å› ä¸ºä»»ä½•åƒç´ çš„é‡è¦æ€§éƒ½ä»¥å¤æ‚çš„æ–¹å¼å–å†³äºè¯¥åƒç´ çš„ä¸Šä¸‹æ–‡ï¼ˆå‘¨å›´åƒç´ çš„å€¼ï¼‰ã€‚</p><h4 id="4ï¼‰æ€»ç»“"><a href="#4ï¼‰æ€»ç»“" class="headerlink" title="4ï¼‰æ€»ç»“"></a><strong>4ï¼‰æ€»ç»“</strong></h4><p>æˆ‘ä»¬çš„æ•°æ®å¯èƒ½ä¼šæœ‰ä¸€ç§è¡¨ç¤ºï¼Œè¿™ç§è¡¨ç¤ºä¼šè€ƒè™‘åˆ°æˆ‘ä»¬åœ¨ç‰¹å¾ä¹‹é—´çš„ç›¸å…³äº¤äº’ä½œç”¨ã€‚åœ¨æ­¤è¡¨ç¤ºçš„åŸºç¡€ä¸Šå»ºç«‹ä¸€ä¸ªçº¿æ€§æ¨¡å‹å¯èƒ½ä¼šæ˜¯åˆé€‚çš„ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“å¦‚ä½•æ‰‹åŠ¨è®¡ç®—è¿™ä¹ˆä¸€ç§è¡¨ç¤ºã€‚<br>å¯¹äºæ·±åº¦ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è§‚æµ‹æ•°æ®ä½œç”¨äºéšè—å±‚ï¼Œç”Ÿæˆå¯ä»¥<strong>è‡ªåŠ¨</strong>å­¦ä¹ ç‰¹å¾çš„çº¿æ€§é¢„æµ‹å™¨ã€‚</p><h3 id="åœ¨ç½‘ç»œä¸­åŠ å…¥éšè—å±‚"><a href="#åœ¨ç½‘ç»œä¸­åŠ å…¥éšè—å±‚" class="headerlink" title="åœ¨ç½‘ç»œä¸­åŠ å…¥éšè—å±‚"></a><strong>åœ¨ç½‘ç»œä¸­åŠ å…¥éšè—å±‚</strong></h3><p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç½‘ç»œä¸­åŠ å…¥ä¸€ä¸ªæˆ–å¤šä¸ªéšè—å±‚æ¥å…‹æœçº¿æ€§æ¨¡å‹çš„é™åˆ¶ï¼Œä½¿å…¶èƒ½å¤„ç†æ›´æ™®éçš„å‡½æ•°å…³ç³»ç±»å‹ã€‚</strong></p><p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†è®¸å¤šå…¨è¿æ¥å±‚å †å åœ¨ä¸€èµ·ã€‚æ¯ä¸€å±‚éƒ½è¾“å‡ºåˆ°ä¸Šé¢çš„å±‚ï¼Œç›´åˆ°ç”Ÿæˆæœ€åçš„è¾“å‡ºã€‚æˆ‘ä»¬å¯ä»¥æŠŠå‰$L-1$å±‚çœ‹ä½œè¡¨ç¤ºï¼ŒæŠŠæœ€åä¸€å±‚çœ‹ä½œçº¿æ€§é¢„æµ‹å™¨ã€‚<br>è¿™ç§æ¶æ„é€šå¸¸ç§°ä¸º<strong>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆmultilayer perceptron,MLPï¼‰</strong>ã€‚ä¸‹å›¾å°±ä¸€ä¸ªå•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºï¼Œæœ‰4ä¸ªè¾“å…¥ï¼Œ3ä¸ªè¾“å‡ºï¼Œå…¶éšè—å±‚åŒ…å«5ä¸ªéšè—å•å…ƒã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/82525390c2a54d7d84614a1bbc4ae76c7ff9adcc511e4f41b367c7ab09b373d9" width="500" hegiht="" ></center><center>å›¾2ï¼šå¤šå±‚æ„ŸçŸ¥æœºæ¨¡å‹ </center><p>è¾“å…¥å±‚ä¸æ¶‰åŠä»»ä½•è®¡ç®—ï¼Œä½¿ç”¨æ­¤ç½‘ç»œäº§ç”Ÿè¾“å‡ºåªéœ€è¦å®ç°éšè—å±‚å’Œè¾“å‡ºå±‚çš„è®¡ç®—ï¼Œå› æ­¤ï¼Œè¿™ä¸ªå¤šå±‚æ„ŸçŸ¥æœºä¸­çš„å±‚æ•°ä¸º2ï¼Œæ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå±‚éƒ½æ˜¯å…¨è¿æ¥çš„ï¼Œæ¯ä¸ªè¾“å…¥éƒ½ä¼šå½±å“éšè—å±‚ä¸­çš„æ¯ä¸ªç¥ç»å…ƒï¼Œè€Œéšè—å±‚ä¸­çš„æ¯ä¸ªç¥ç»å…ƒåˆä¼šå½±å“è¾“å‡ºå±‚ä¸­çš„æ¯ä¸ªç¥ç»å…ƒã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œå…·æœ‰å…¨è¿æ¥å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºçš„å‚æ•°å¼€é”€å¯èƒ½ä¼šé«˜å¾—ä»¤äººæœ›è€Œå´æ­¥ï¼Œå› æ­¤åœ¨ä¸æ”¹å˜è¾“å…¥æˆ–è¾“å‡ºå¤§å°çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦åœ¨å‚æ•°èŠ‚çº¦å’Œæ¨¡å‹æœ‰æ•ˆæ€§ä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚</p><blockquote><p>å¤šå±‚æ„ŸçŸ¥æœºçš„å±‚æ•°ä¸è®¡ç®—è¾“å…¥å±‚ï¼›</p><p>éšè—å±‚å°±æ˜¯å¯¹ç‰¹å¾è¿›è¡Œè¿›ä¸€æ­¥çš„æå–ï¼Œå°†è¾“å…¥å±‚æå–å‡ºæ¥çš„ç‰¹å¾åœ¨è¿›è¡Œç‰¹å¾çš„æå–ï¼Œä¸€æ­¥æ­¥çš„ç»†åˆ†ã€‚</p></blockquote><h2 id="äºŒã€ä»çº¿æ€§åˆ°éçº¿æ€§"><a href="#äºŒã€ä»çº¿æ€§åˆ°éçº¿æ€§" class="headerlink" title="äºŒã€ä»çº¿æ€§åˆ°éçº¿æ€§"></a><strong>äºŒã€ä»çº¿æ€§åˆ°éçº¿æ€§</strong></h2><p>åŒä¹‹å‰çš„ç« èŠ‚ä¸€æ ·ï¼Œæˆ‘ä»¬é€šè¿‡çŸ©é˜µ$\mathbf{X} \in \mathbb{R}^{n \times d}$æ¥è¡¨ç¤º$n$ä¸ªæ ·æœ¬çš„å°æ‰¹é‡ï¼Œå…¶ä¸­æ¯ä¸ªæ ·æœ¬å…·æœ‰$d$ä¸ªè¾“å…¥ç‰¹å¾ã€‚</p><p>å¯¹äºå…·æœ‰$h$ä¸ªéšè—å•å…ƒçš„å•éšè—å±‚å¤šå±‚æ„ŸçŸ¥æœºï¼Œç”¨$\mathbf{H} \in \mathbb{R}^{n \times h}$è¡¨ç¤ºéšè—å±‚çš„è¾“å‡ºï¼Œç§°ä¸º<strong>éšè—è¡¨ç¤ºï¼ˆhidden representationsï¼‰</strong>ã€‚<br>åœ¨æ•°å­¦æˆ–ä»£ç ä¸­ï¼Œ$\mathbf{H}$ä¹Ÿè¢«ç§°ä¸º<strong>éšè—å±‚å˜é‡ï¼ˆhidden-layer variableï¼‰</strong> æˆ–<strong>éšè—å˜é‡ï¼ˆhidden variableï¼‰</strong>ã€‚<br>å› ä¸ºéšè—å±‚å’Œè¾“å‡ºå±‚éƒ½æ˜¯å…¨è¿æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰éšè—å±‚æƒé‡$\mathbf{W}^{(1)} \in \mathbb{R}^{d \times h}$å’Œéšè—å±‚åç½®$\mathbf{b}^{(1)} \in \mathbb{R}^{1 \times h}$ä»¥åŠè¾“å‡ºå±‚æƒé‡$\mathbf{W}^{(2)} \in \mathbb{R}^{h \times q}$å’Œè¾“å‡ºå±‚åç½®$\mathbf{b}^{(2)} \in \mathbb{R}^{1 \times q}$ã€‚<br>å½¢å¼ä¸Šï¼Œæˆ‘ä»¬æŒ‰å¦‚ä¸‹æ–¹å¼è®¡ç®—å•éšè—å±‚å¤šå±‚æ„ŸçŸ¥æœºçš„è¾“å‡º$\mathbf{O} \in \mathbb{R}^{n \times q}$ï¼š<br>$$<br>\begin{aligned}<br>    \mathbf{H} &amp; &#x3D; \mathbf{X} \mathbf{W}^{(1)} + \mathbf{b}^{(1)}, \<br>    \mathbf{O} &amp; &#x3D; \mathbf{H}\mathbf{W}^{(2)} + \mathbf{b}^{(2)}.<br>\end{aligned}<br>$$</p><p>ç„¶è€Œè¿™æ ·çš„ä»¿å°„å‡½æ•°çš„å åŠ å¹¶ä¸èƒ½ä¸ºæˆ‘ä»¬å¸¦æ¥å¥½å¤„ï¼Œæˆ‘ä»¬ä¹‹å‰çš„çº¿æ€§æ¨¡å‹å·²ç»èƒ½å¤Ÿè¡¨ç¤ºä»»ä½•ä»¿å°„å‡½æ•°ã€‚å› æ­¤ï¼Œä¸ºäº†å‘æŒ¥å¤šå±‚æ¶æ„çš„æ½œåŠ›ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªé¢å¤–çš„å…³é”®è¦ç´ ï¼šåœ¨ä»¿å°„å˜æ¢ä¹‹åå¯¹æ¯ä¸ªéšè—å•å…ƒåº”ç”¨<strong>éçº¿æ€§çš„æ¿€æ´»å‡½æ•°</strong> ã€‚<strong>éçº¿æ€§çš„æ¿€æ´»å‡½æ•°å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ç¥ç»ç½‘ç»œé€¼è¿‘ä»»ä½•éçº¿æ€§å‡½æ•°ï¼Œä»è€Œåº”ç”¨äºæ›´å¤šçš„éçº¿æ€§æ¨¡å‹</strong>ã€‚æ¿€æ´»å‡½æ•°çš„è¾“å‡ºï¼ˆä¾‹å¦‚ï¼Œ$\sigma(\cdot)$ï¼‰è¢«ç§°ä¸º<strong>æ´»æ€§å€¼ï¼ˆactivationsï¼‰</strong>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰äº†æ¿€æ´»å‡½æ•°ï¼Œå°±ä¸å¯èƒ½å†å°†æˆ‘ä»¬çš„å¤šå±‚æ„ŸçŸ¥æœºé€€åŒ–æˆçº¿æ€§æ¨¡å‹ï¼š</p><p>$$<br>\begin{aligned}<br>    \mathbf{H} &amp; &#x3D; \sigma(\mathbf{X} \mathbf{W}^{(1)} + \mathbf{b}^{(1)}), \<br>    \mathbf{O} &amp; &#x3D; \mathbf{H}\mathbf{W}^{(2)} + \mathbf{b}^{(2)}.\<br>\end{aligned}<br>$$</p><p>æˆ‘ä»¬åº”ç”¨äºéšè—å±‚çš„æ¿€æ´»å‡½æ•°é€šå¸¸ä¸ä»…æŒ‰è¡Œæ“ä½œï¼Œä¹ŸæŒ‰å…ƒç´ æ“ä½œã€‚è¿™æ„å‘³ç€åœ¨è®¡ç®—æ¯ä¸€å±‚çš„çº¿æ€§éƒ¨åˆ†ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—æ¯ä¸ªæ´»æ€§å€¼ï¼Œè€Œä¸éœ€è¦æŸ¥çœ‹å…¶ä»–éšè—å•å…ƒæ‰€å–çš„å€¼ã€‚å¯¹äºå¤§å¤šæ•°æ¿€æ´»å‡½æ•°éƒ½æ˜¯è¿™æ ·ã€‚</p><p>ä¸ºäº†æ„å»ºæ›´é€šç”¨çš„å¤šå±‚æ„ŸçŸ¥æœºï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­å †å è¿™æ ·çš„éšè—å±‚ï¼Œä¾‹å¦‚ï¼š<br>$<br>\mathbf{H}^{(1)} &#x3D; \sigma_1(\mathbf{X} \mathbf{W}^{(1)} + \mathbf{b}^{(1)})$å’Œ$\mathbf{H}^{(2)} &#x3D; \sigma_2(\mathbf{H}^{(1)} \mathbf{W}^{(2)} + \mathbf{b}^{(2)})<br>$<br>ï¼Œä¸€å±‚å ä¸€å±‚ï¼Œä»è€Œäº§ç”Ÿæ›´æœ‰è¡¨è¾¾èƒ½åŠ›çš„æ¨¡å‹ã€‚</p><h3 id="ã€æ¿€æ´»å‡½æ•°ã€‘"><a href="#ã€æ¿€æ´»å‡½æ•°ã€‘" class="headerlink" title="ã€æ¿€æ´»å‡½æ•°ã€‘"></a><strong>ã€æ¿€æ´»å‡½æ•°ã€‘</strong></h3><p>â³<code>subsec_activation_functions</code></p><p><strong>æ¿€æ´»å‡½æ•°ï¼ˆactivation functionï¼‰</strong> é€šè¿‡è®¡ç®—åŠ æƒå’Œå¹¶åŠ ä¸Šåç½®æ¥ç¡®å®šç¥ç»å…ƒæ˜¯å¦åº”è¯¥è¢«æ¿€æ´»ï¼Œå®ƒä»¬å°†è¾“å…¥ä¿¡å·è½¬æ¢ä¸ºè¾“å‡ºçš„å¯å¾®è¿ç®—ã€‚å¤§å¤šæ•°æ¿€æ´»å‡½æ•°éƒ½æ˜¯éçº¿æ€§çš„ ã€‚ç”±äºæ¿€æ´»å‡½æ•°æ˜¯æ·±åº¦å­¦ä¹ çš„åŸºç¡€ï¼Œä¸‹é¢(ç®€è¦ä»‹ç»ä¸€äº›å¸¸è§çš„æ¿€æ´»å‡½æ•°ã€‚</p><p><strong>1.ReLUå‡½æ•°</strong></p><p>æœ€å—æ¬¢è¿çš„æ¿€æ´»å‡½æ•°æ˜¯<strong>ä¿®æ­£çº¿æ€§å•å…ƒï¼ˆRectified linear unitï¼ŒReLUï¼‰</strong>ï¼Œå› ä¸ºå®ƒå®ç°ç®€å•ï¼ŒåŒæ—¶åœ¨å„ç§é¢„æµ‹ä»»åŠ¡ä¸­è¡¨ç°è‰¯å¥½ã€‚ReLUæä¾›äº†ä¸€ç§éå¸¸ç®€å•çš„éçº¿æ€§å˜æ¢ï¼Œå³ç»™å®šå…ƒç´ $x$ï¼ŒReLUå‡½æ•°è¢«å®šä¹‰ä¸ºè¯¥å…ƒç´ ä¸$0$çš„æœ€å¤§å€¼ï¼š</p><p>$$\operatorname{ReLU}(x) &#x3D; \max(x, 0).$$</p><p>é€šä¿—åœ°è¯´ï¼Œ<strong>ReLUå‡½æ•°é€šè¿‡å°†ç›¸åº”çš„æ´»æ€§å€¼è®¾ä¸º0ï¼Œä»…ä¿ç•™æ­£å…ƒç´ å¹¶ä¸¢å¼ƒæ‰€æœ‰è´Ÿå…ƒç´ </strong>ã€‚ä¸ºäº†ç›´è§‚æ„Ÿå—ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡ºReLUå‡½æ•°çš„æ›²çº¿å›¾ã€‚æ­£å¦‚ä»å›¾ä¸­æ‰€çœ‹åˆ°ï¼Œæ¿€æ´»å‡½æ•°æ˜¯åˆ†æ®µçº¿æ€§çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.fluid.layers.nn <span class="keyword">import</span> pad</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = paddle.arange(-<span class="number">8.0</span>, <span class="number">8.0</span>, step=<span class="number">0.1</span>, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x.stop_gradient = <span class="literal">False</span> <span class="comment"># å¼€å¯å‚æ•°æ›´æ–°</span></span><br><span class="line">y = paddle.nn.functional.relu(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;ReLU&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/3.png" alt="png"></p><p>å½“è¾“å…¥ä¸ºè´Ÿæ—¶ï¼ŒReLUå‡½æ•°çš„å¯¼æ•°ä¸º0ï¼Œè€Œå½“è¾“å…¥ä¸ºæ­£æ—¶ï¼ŒReLUå‡½æ•°çš„å¯¼æ•°ä¸º1ã€‚æ³¨æ„ï¼Œå½“è¾“å…¥å€¼ç²¾ç¡®ç­‰äº0æ—¶ï¼ŒReLUå‡½æ•°ä¸å¯å¯¼ã€‚åœ¨æ­¤æ—¶ï¼Œæˆ‘ä»¬é»˜è®¤ä½¿ç”¨å·¦ä¾§çš„å¯¼æ•°ï¼Œå³<strong>å½“è¾“å…¥ä¸º0æ—¶å¯¼æ•°ä¸º0</strong>ã€‚æˆ‘ä»¬å¯ä»¥å¿½ç•¥è¿™ç§æƒ…å†µï¼Œå› ä¸ºè¾“å…¥å¯èƒ½æ°¸è¿œéƒ½ä¸ä¼šæ˜¯0ã€‚è¿™é‡Œå¼•ç”¨ä¸€å¥å¤è€çš„è°šè¯­ï¼Œâ€œå¦‚æœå¾®å¦™çš„è¾¹ç•Œæ¡ä»¶å¾ˆé‡è¦ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½æ˜¯åœ¨ç ”ç©¶æ•°å­¦è€Œéå·¥ç¨‹â€ï¼Œè¿™ä¸ªè§‚ç‚¹æ­£å¥½é€‚ç”¨äºè¿™é‡Œã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç»˜åˆ¶ReLUå‡½æ•°çš„å¯¼æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.arange(-<span class="number">8.0</span>, <span class="number">8.0</span>, step=<span class="number">0.1</span>, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x.stop_gradient = <span class="literal">False</span></span><br><span class="line">y = paddle.nn.functional.relu(x)</span><br><span class="line">y.backward(paddle.ones_like(x), retain_graph=<span class="literal">True</span>)<span class="comment"># è®¡ç®—ç»™å®šçš„ Tensors çš„åå‘æ¢¯åº¦ã€‚</span></span><br><span class="line">plt.plot(x, x.grad)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="built_in">print</span>(x.grad)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/4.png" alt="png"></p><p>ä½¿ç”¨ReLUçš„åŸå› æ˜¯ï¼Œå®ƒæ±‚å¯¼è¡¨ç°å¾—ç‰¹åˆ«å¥½ï¼šè¦ä¹ˆè®©å‚æ•°æ¶ˆå¤±ï¼Œè¦ä¹ˆè®©å‚æ•°é€šè¿‡ï¼Œè¿™ä½¿å¾—ä¼˜åŒ–è¡¨ç°å¾—æ›´å¥½ï¼Œå¹¶ä¸”ReLUå‡è½»äº†å›°æ‰°ä»¥å¾€ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚</p><p><strong>2.sigmoidå‡½æ•°</strong></p><p>å¯¹äºä¸€ä¸ªå®šä¹‰åŸŸåœ¨$\mathbb{R}$ä¸­çš„è¾“å…¥ï¼Œsigmoidå‡½æ•°å°†è¾“å…¥å˜æ¢ä¸ºåŒºé—´(0, 1)ä¸Šçš„è¾“å‡ºã€‚å› æ­¤ï¼Œsigmoidé€šå¸¸ç§°ä¸º<strong>æŒ¤å‹å‡½æ•°ï¼ˆsquashing functionï¼‰</strong>ï¼šå®ƒå°†èŒƒå›´ï¼ˆ-inf, infï¼‰ä¸­çš„ä»»æ„è¾“å…¥å‹ç¼©åˆ°åŒºé—´ï¼ˆ0, 1ï¼‰ä¸­çš„æŸä¸ªå€¼ï¼š</p><p>$$\operatorname{sigmoid}(x) &#x3D; \frac{1}{1 + \exp(-x)}.$$</p><p>åœ¨æœ€æ—©çš„ç¥ç»ç½‘ç»œä¸­ï¼Œç§‘å­¦å®¶ä»¬æ„Ÿå…´è¶£çš„æ˜¯å¯¹â€œæ¿€å‘â€æˆ–â€œä¸æ¿€å‘â€çš„ç”Ÿç‰©ç¥ç»å…ƒè¿›è¡Œå»ºæ¨¡ï¼Œå› æ­¤ï¼Œè¿™ä¸€é¢†åŸŸçš„å…ˆé©±å¯ä»¥ä¸€ç›´è¿½æº¯åˆ°äººå·¥ç¥ç»å…ƒçš„å‘æ˜è€…ï¼Œä»–ä»¬ä¸“æ³¨äºé˜ˆå€¼å•å…ƒã€‚é˜ˆå€¼å•å…ƒåœ¨å…¶è¾“å…¥ä½äºæŸä¸ªé˜ˆå€¼æ—¶å–å€¼0ï¼Œå½“è¾“å…¥è¶…è¿‡é˜ˆå€¼æ—¶å–å€¼1ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/bd6d64cdcd454138bd990075d605ee9780161ef443cc42c09701c3ed7d7bddd4" width="300" hegiht="" ></center><center>å›¾3ï¼šå•ä½é˜¶è·ƒå‡½æ•° </center><p>å½“äººä»¬é€æ¸å…³æ³¨åˆ°åˆ°åŸºäºæ¢¯åº¦çš„å­¦ä¹ æ—¶ï¼Œsigmoidå‡½æ•°æ˜¯ä¸€ä¸ªè‡ªç„¶çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¹³æ»‘çš„ã€å¯å¾®çš„é˜ˆå€¼å•å…ƒè¿‘ä¼¼ã€‚ç„¶è€Œï¼Œsigmoidåœ¨éšè—å±‚ä¸­å·²ç»è¾ƒå°‘ä½¿ç”¨ï¼Œå®ƒåœ¨å¤§éƒ¨åˆ†æ—¶å€™è¢«æ›´ç®€å•ã€æ›´å®¹æ˜“è®­ç»ƒçš„ReLUæ‰€å–ä»£ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ç»˜åˆ¶sigmoidå‡½æ•°ã€‚æ³¨æ„ï¼Œå½“è¾“å…¥æ¥è¿‘0æ—¶ï¼Œsigmoidå‡½æ•°æ¥è¿‘çº¿æ€§å˜æ¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.arange(-<span class="number">8.0</span>, <span class="number">8.0</span>, step=<span class="number">0.1</span>, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">y = paddle.nn.functional.sigmoid(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;sigmoid&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/5.png" alt="png"></p><p>sigmoidå‡½æ•°çš„å¯¼æ•°ä¸ºä¸‹é¢çš„å…¬å¼ï¼š</p><p>$$\frac{d}{dx} \operatorname{sigmoid}(x) &#x3D; \frac{\exp(-x)}{(1 + \exp(-x))^2} &#x3D; \operatorname{sigmoid}(x)\left(1-\operatorname{sigmoid}(x)\right).$$</p><p>sigmoidå‡½æ•°çš„å¯¼æ•°å›¾åƒå¦‚ä¸‹æ‰€ç¤ºã€‚<br>æ³¨æ„ï¼Œå½“è¾“å…¥ä¸º0æ—¶ï¼Œsigmoidå‡½æ•°çš„å¯¼æ•°è¾¾åˆ°æœ€å¤§å€¼0.25ï¼›<br>è€Œè¾“å…¥åœ¨ä»»ä¸€æ–¹å‘ä¸Šè¶Šè¿œç¦»0ç‚¹æ—¶ï¼Œå¯¼æ•°è¶Šæ¥è¿‘0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.arange(-<span class="number">8.0</span>, <span class="number">8.0</span>, step=<span class="number">0.1</span>, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x.stop_gradient = <span class="literal">False</span></span><br><span class="line">y = paddle.nn.functional.sigmoid(x)</span><br><span class="line">y.backward(paddle.ones_like(x), retain_graph=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x, x.grad)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/6.png" alt="png"></p><p><strong>3.tanhå‡½æ•°</strong></p><p>ä¸sigmoidå‡½æ•°ç±»ä¼¼ï¼Œtanh(åŒæ›²æ­£åˆ‡)å‡½æ•°ä¹Ÿèƒ½å°†å…¶è¾“å…¥å‹ç¼©è½¬æ¢åˆ°åŒºé—´(-1, 1)ä¸Šã€‚tanhå‡½æ•°çš„å…¬å¼å¦‚ä¸‹ï¼š</p><p>$$\operatorname{tanh}(x) &#x3D; \frac{1 - \exp(-2x)}{1 + \exp(-2x)}.$$</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œsigmoidå‡½æ•°ã€tanhå‡½æ•°ä»–ä»¬éƒ½æ˜¯æ•°å€¼è¶Šæ˜¯é è¿‘æ­£æ— ç©·æˆ–è€…è´Ÿæ— ç©·ï¼Œå¯¹åº”çš„æ¢¯åº¦è¶Šå°ï¼Œå‚æ•°æ›´æ–°ä¹Ÿå°±è¶Šæ…¢ï¼Œå› æ­¤æˆ‘ä»¬æ€»æ˜¯å¸Œæœ›è¾“å…¥æ¥è¿‘0ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¢¯åº¦æ›´å¤§ï¼Œå‚æ•°æ›´æ–°è¶Šå¿«ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½¿è¾“å…¥å°½å¯èƒ½é™å®šåœ¨é›¶å€¼é™„è¿‘ï¼Œä»è€Œæé«˜æ¢¯åº¦ä¸‹é™ç®—æ³•è¿ç®—é€Ÿåº¦ã€‚å› æ­¤ï¼Œæ™®éæƒ…å†µä¸‹ï¼Œtanhæ¯”sigmoidåœ¨éšå«å±‚ä½œä¸ºæ¿€æ´»å‡½æ•°æ›´å¥½ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç»˜åˆ¶tanhå‡½æ•°ã€‚æ³¨æ„ï¼Œå½“è¾“å…¥åœ¨0é™„è¿‘æ—¶ï¼Œtanhå‡½æ•°æ¥è¿‘çº¿æ€§å˜æ¢ã€‚å‡½æ•°çš„å½¢çŠ¶ç±»ä¼¼äºsigmoidå‡½æ•°ï¼Œä¸åŒçš„æ˜¯tanhå‡½æ•°å…³äºåæ ‡ç³»åŸç‚¹ä¸­å¿ƒå¯¹ç§°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.arange(-<span class="number">8.0</span>, <span class="number">8.0</span>, step=<span class="number">0.1</span>, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">y = paddle.nn.functional.tanh(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;tanh&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/7.png" alt="png"></p><p>tanhå‡½æ•°çš„å¯¼æ•°æ˜¯ï¼š</p><p>$$\frac{d}{dx} \operatorname{tanh}(x) &#x3D; 1 - \operatorname{tanh}^2(x).$$</p><p>tanhå‡½æ•°çš„å¯¼æ•°å›¾åƒå¦‚ä¸‹æ‰€ç¤ºã€‚å½“è¾“å…¥æ¥è¿‘0æ—¶ï¼Œtanhå‡½æ•°çš„å¯¼æ•°æ¥è¿‘æœ€å¤§å€¼1ã€‚ä¸æˆ‘ä»¬åœ¨sigmoidå‡½æ•°å›¾åƒä¸­çœ‹åˆ°çš„ç±»ä¼¼ï¼Œè¾“å…¥åœ¨ä»»ä¸€æ–¹å‘ä¸Šè¶Šè¿œç¦»0ç‚¹ï¼Œå¯¼æ•°è¶Šæ¥è¿‘0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.arange(-<span class="number">8.0</span>, <span class="number">8.0</span>, step=<span class="number">0.1</span>, dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">x.stop_gradient = <span class="literal">False</span></span><br><span class="line">y = paddle.nn.functional.tanh(x)</span><br><span class="line">y.backward(paddle.ones_like(x), retain_graph=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x, x.grad)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/8.png" alt="png"></p><h2 id="ä¸‰ã€å¤šç±»åˆ†ç±»"><a href="#ä¸‰ã€å¤šç±»åˆ†ç±»" class="headerlink" title="ä¸‰ã€å¤šç±»åˆ†ç±»"></a><strong>ä¸‰ã€å¤šç±»åˆ†ç±»</strong></h2><p>ç°åœ¨æˆ‘ä»¬æ­£å¼æ¥çœ‹ä¸€ä¸‹å¤šå±‚æ„ŸçŸ¥æœºçš„å®šä¹‰ã€‚å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼ŒMultilayer Perceptronï¼‰ä¹Ÿå«<strong>äººå·¥ç¥ç»ç½‘ç»œï¼ˆANNï¼ŒArtificial Neural Networkï¼‰</strong>ï¼Œé™¤äº†è¾“å…¥è¾“å‡ºå±‚ï¼Œå®ƒä¸­é—´å¯ä»¥æœ‰å¤šä¸ªéšå±‚ï¼Œæœ€ç®€å•çš„MLPåªå«ä¸€ä¸ªéšå±‚ï¼Œå³ä¸‰å±‚çš„ç»“æ„ã€‚<br>ä¹‹å‰æˆ‘ä»¬å®ç°çš„softmaxæ¨¡å‹ï¼Œå®è´¨ä¸Šæ˜¯å°†è¾“å…¥çš„å€¼ç›´æ¥æ˜ å°„åˆ°ï¼ˆ0,1ï¼‰çš„åŒºé—´å†…ï¼Œæœ€åå°†æ¦‚ç‡æœ€å¤§çš„å€¼ä½œä¸ºæœ€ç»ˆçš„é¢„æµ‹ç»“æœ,ä¹Ÿæ˜¯ä¸€ä¸ªçº¿æ€§æ¨¡å‹ã€‚ç°åœ¨åœ¨åŸºæœ¬çš„softmaxç»“æ„ä¸­åŠ å…¥éšè—å±‚ï¼Œè¿™ä¸ªæ—¶å€™å°±å½¢æˆäº†å¤šå±‚æ„ŸçŸ¥æœºçš„ç»“æ„ã€‚æ¯ä¸€ä¸ªéšè—å±‚éƒ½éœ€è¦æœ‰å¯¹åº”çš„æ¿€æ´»å‡½æ•°ã€ä¸åŠ å…¥æ¿€æ´»å‡½æ•°ï¼Œé‚£ä¹ˆå±‚ä¸å±‚ä¹‹é—´ä»ç„¶æ˜¯çº¿æ€§è¿æ¥çš„ï¼Œé‚£ä¹ˆå°±å¤±å»äº†åŠ å…¥éšè—å±‚çš„æ„ä¹‰ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªéšè—å±‚éƒ½éœ€è¦åŠ å…¥ä¸€ä¸ªæ¿€æ´»å‡½æ•°ï¼›è¾“å‡ºå±‚åŠ ä¸åŠ å…¥æ¿€æ´»å‡½æ•°æˆ‘ä»¬æ ¹æ®æƒ…å†µè‡ªå·±æ¥å®šã€‘ï¼Œæœ€ç»ˆæˆ‘ä»¬é€šè¿‡softmaxè¾“å‡ºç»“æœã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/ef62b4c8072b4528b7e9c6905a605e1bcb4688a36ead4c42be7ccbddeef30784" width="500" hegiht="" ></center><center>å›¾3ï¼šå¤šç±»åˆ†ç±»æ¨¡å‹ </center><p>åœ¨å¤šå±‚æ„ŸçŸ¥æœºä¸­ï¼Œæˆ‘ä»¬æ–°åŠ å…¥äº†ä¸¤ä¸ªè¶…å‚æ•°ã€æˆ‘ä»¬è‡ªå·±å†³å®šçš„ã€‘çš„å€¼ï¼Œä¸€ä¸ªæ˜¯éšè—å±‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ¯å±‚éšè—å±‚çš„ç¥ç»å•å…ƒä¸ªæ•°ã€‚<br>å¦‚æœè¦åšå•éšè—å±‚çš„ç¥ç»ç½‘ç»œï¼Œé‚£ä¹ˆç›¸å¯¹åº”çš„éšè—å±‚çš„éœ€è¦æ›´å¤šçš„ç¥ç»å•å…ƒï¼›å¦‚æœæƒ³è¦æŠŠéšè—å±‚åšçš„å¤šä¸€ç‚¹ï¼Œåˆ™å¤§éƒ¨åˆ†æƒ…å†µä¸‹éšè—å±‚çš„ç¥ç»å•å…ƒæ•°é‡ä¼šä¾æ¬¡å‡å°‘ï¼Œæˆ‘ä»¬å¸Œæœ›æ…¢æ…¢å®ç°å‹ç¼©çš„è¿™ä¸ªæ“ä½œã€‚æ˜¯æŠŠæ¨¡å‹åšçš„â€œå®½â€ä¸€ç‚¹è¿˜æ˜¯â€œæ·±â€ä¸€ç‚¹ï¼Œè¿™ä¸ªéœ€è¦æ ¹æ®å®é™…çš„æƒ…å†µæ¥åˆ¤æ–­ï¼Œå› æ­¤è¿™è¾¹è¶…å‚æ•°æ˜¯å¯è°ƒçš„ã€‚</p><blockquote><p>éšè—å±‚çš„åŠŸèƒ½å°±æ˜¯æå–ç‰¹å¾ï¼Œæˆ‘ä»¬å¸Œæœ›æå–çš„è¶Šå¤šè¶Šå¥½ï¼Œåé¢æ‰èƒ½å¤ŸæŠŠè¿™äº›ç‰¹å¾æ•´åˆåˆ°ä¸€å—ï¼Œç„¶åæ…¢æ…¢çš„è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹ï¼Œæ‰€ä»¥ä¸ºäº†ä¸é”™è¿‡æŸäº›ç‰¹å¾ï¼Œé è¿‘è¾“å…¥å±‚çš„çš„ç¥ç»å•å…ƒæ•°ä¸€èˆ¬ä¼šæ›´å¤šä¸€äº›ï¼Œæ…¢æ…¢çš„å¾€ä¸Šå¯¹ç‰¹å¾è¿›è¡Œæ•´åˆå’Œå‹ç¼©ï¼Œè¶Šæ¥è¶Šå°‘ã€‚</p></blockquote><h2 id="å››ã€ç½‘ç»œçš„å·¥ä½œåŸç†"><a href="#å››ã€ç½‘ç»œçš„å·¥ä½œåŸç†" class="headerlink" title="å››ã€ç½‘ç»œçš„å·¥ä½œåŸç†"></a><strong>å››ã€ç½‘ç»œçš„å·¥ä½œåŸç†</strong></h2><p>ç¥ç»ç½‘ç»œç®—æ³•çš„æ ¸å¿ƒä¸‰æ­¥æ˜¯ï¼šæ­£å‘ä¼ æ’­ã€åå‘ä¼ æ’­å’Œæ¢¯åº¦ä¸‹é™ã€‚ç¥ç»ç½‘ç»œå…ˆè¦ç»å†æ­£å‘ä¼ æ’­çš„è¿‡ç¨‹ï¼Œç„¶åå†ç»å†åå‘ä¼ æ’­çš„è¿‡ç¨‹ã€‚æ­£å‘ä¼ æ’­çš„æœ¬è´¨å°±æ˜¯æ ¹æ®è¾“å…¥çš„æ ·æœ¬å‘é‡$x$ç»è¿‡ç¥ç»ç½‘ç»œå¾—å‡ºé¢„æµ‹å€¼$\hat y$çš„è¿‡ç¨‹ã€‚åªæœ‰åœ¨æ­£å‘ä¼ æ’­å¾—åˆ°äº†$\hat y$ä¹‹åï¼ŒæŸå¤±å‡½æ•°$L$æ‰èƒ½å¤Ÿè®¡ç®—ã€‚è€Œåå‘ä¼ æ’­çš„æœ¬è´¨å°±æ˜¯ä»æœ€ç»ˆè¾“å‡ºçš„æŸå¤±å‡½æ•°å¼€å§‹åå‘å›é€€ï¼Œæ ¹æ®æ±‚å¯¼çš„é“¾å¼æ³•åˆ™æœ€ç»ˆæ±‚å‡ºæ‰€æœ‰å‚æ•°çš„åå¯¼æ•°çš„è¿‡ç¨‹ã€‚</p><h3 id="4-1-æ·±å±‚ç½‘ç»œçš„å‰å‘ä¼ æ’­è¿‡ç¨‹"><a href="#4-1-æ·±å±‚ç½‘ç»œçš„å‰å‘ä¼ æ’­è¿‡ç¨‹" class="headerlink" title="4.1 æ·±å±‚ç½‘ç»œçš„å‰å‘ä¼ æ’­è¿‡ç¨‹"></a><strong>4.1 æ·±å±‚ç½‘ç»œçš„å‰å‘ä¼ æ’­è¿‡ç¨‹</strong></h3><p><strong>å‰å‘ä¼ æ’­ï¼ˆforward propagationï¼‰</strong> å°±æ˜¯ä»è¾“å…¥å‘é‡å¼€å§‹é¡ºç€ç½‘ç»œå‘åè®¡ç®—çš„è¿‡ç¨‹ï¼Œä»å±‚çš„è§’åº¦æ¥çœ‹ï¼Œæ­£å‘ä¼ æ’­å°±æ˜¯å°†å‰ä¸€å±‚çš„ä¿¡æ¯è¿›è¡ŒåŠ å·¥å†ä¼ é€’ç»™ä¸‹ä¸€å±‚ã€‚<br>æˆ‘ä»¬å°†ä¸€æ­¥æ­¥ç ”ç©¶å•éšè—å±‚ç¥ç»ç½‘ç»œçš„æœºåˆ¶ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥æ ·æœ¬æ˜¯ $\mathbf{x}\in \mathbb{R}^d$ã€‚è¿™é‡Œçš„ä¸­é—´å˜é‡æ˜¯ï¼š<br>$$<br>\mathbf{z}&#x3D; \mathbf{W}^{(1)} \mathbf{x}+{b}.<br>$$<br>å…¶ä¸­$\mathbf{W}^{(1)} \in \mathbb{R}^{h \times d}$æ˜¯éšè—å±‚çš„æƒé‡å‚æ•°ï¼Œ${b}$æ˜¯éšè—å±‚ç¥ç»å•å…ƒçš„åç½®é¡¹ã€‚å°†ä¸­é—´å˜é‡$\mathbf{z}\in \mathbb{R}^h$é€šè¿‡æ¿€æ´»å‡½æ•°$\phi$åï¼Œæˆ‘ä»¬å¾—åˆ°é•¿åº¦ä¸º$h$çš„éšè—æ¿€æ´»å‘é‡ï¼š</p><p>$$<br>\mathbf{h}&#x3D; \phi (\mathbf{z}).<br>$$<br>éšè—å˜é‡$\mathbf{h}$ä¹Ÿæ˜¯ä¸€ä¸ªä¸­é—´å˜é‡ã€‚å‡è®¾è¾“å‡ºå±‚çš„æƒé‡ä¸º$\mathbf{W}^{(2)} \in \mathbb{R}^{q \times h}$ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¾“å‡ºå±‚å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º$q$çš„å‘é‡ï¼š</p><p>$$<br>\mathbf{o}&#x3D; \mathbf{W}^{(2)} \mathbf{h}+{b}.<br>$$<br> å‡è®¾æŸå¤±å‡½æ•°ä¸º$l$ï¼Œæ ·æœ¬æ ‡ç­¾ä¸º$y$ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å•ä¸ªæ•°æ®æ ·æœ¬çš„æŸå¤±é¡¹ï¼Œ</p><p>$$<br>L &#x3D; l(\mathbf{o}, y).<br>$$<br>æ ¹æ®$L_2$æ­£åˆ™åŒ–çš„å®šä¹‰ï¼Œç»™å®šè¶…å‚æ•°$\lambda$ï¼Œæ­£åˆ™åŒ–é¡¹ä¸º</p><p>$$<br>s &#x3D; \frac{\lambda}{2} \left(|\mathbf{W}^{(1)}|_F^2 + |\mathbf{W}^{(2)}|_F^2\right).<br>$$<br>æœ€åï¼Œæ¨¡å‹åœ¨ç»™å®šæ•°æ®æ ·æœ¬ä¸Šçš„æ­£åˆ™åŒ–æŸå¤±ä¸ºã€è¿™ä¸ª$s$ä¹Ÿå¯ä»¥å«åšæƒ©ç½šé¡¹ã€‘ï¼š</p><p>$$<br>J &#x3D; L + s.<br>$$<br>åœ¨ä¸‹é¢çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬å°†$J$ç§°ä¸º<strong>ç›®æ ‡å‡½æ•°ï¼ˆobjective functionï¼‰</strong>ã€‚</p><h3 id="4-2-æ·±å±‚ç½‘ç»œçš„åå‘ä¼ æ’­è¿‡ç¨‹"><a href="#4-2-æ·±å±‚ç½‘ç»œçš„åå‘ä¼ æ’­è¿‡ç¨‹" class="headerlink" title="4.2 æ·±å±‚ç½‘ç»œçš„åå‘ä¼ æ’­è¿‡ç¨‹"></a><strong>4.2 æ·±å±‚ç½‘ç»œçš„åå‘ä¼ æ’­è¿‡ç¨‹</strong></h3><p><strong>åå‘ä¼ æ’­ï¼ˆbackward propagationï¼‰</strong> æŒ‡çš„æ˜¯è®¡ç®—ç¥ç»ç½‘ç»œå‚æ•°æ¢¯åº¦çš„æ–¹æ³•ã€‚ç®€è¨€ä¹‹ï¼Œè¯¥æ–¹æ³•æ ¹æ®å¾®ç§¯åˆ†ä¸­çš„é“¾å¼æ³•åˆ™ï¼ŒæŒ‰ç›¸åçš„é¡ºåºä»è¾“å‡ºå±‚åˆ°è¾“å…¥å±‚éå†ç½‘ç»œã€‚<br>è¯¥ç®—æ³•å­˜å‚¨äº†è®¡ç®—æŸäº›å‚æ•°æ¢¯åº¦æ—¶æ‰€éœ€çš„ä»»ä½•ä¸­é—´å˜é‡ï¼ˆåå¯¼æ•°ï¼‰ã€‚å‡è®¾æˆ‘ä»¬æœ‰å‡½æ•°$\mathsf{Y}&#x3D;f(\mathsf{X})$å’Œ$\mathsf{Z}&#x3D;g(\mathsf{Y})$ï¼Œå…¶ä¸­è¾“å…¥å’Œè¾“å‡º$\mathsf{X}, \mathsf{Y}, \mathsf{Z}$æ˜¯ä»»æ„å½¢çŠ¶çš„å¼ é‡ã€‚åˆ©ç”¨é“¾å¼æ³•åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—$\mathsf{Z}$å…³äº$\mathsf{X}$çš„å¯¼æ•°<br>$$<br>\frac{\partial \mathsf{Z}}{\partial \mathsf{X}} &#x3D; \text{prod}\left(\frac{\partial \mathsf{Z}}{\partial \mathsf{Y}}, \frac{\partial \mathsf{Y}}{\partial \mathsf{X}}\right).<br>$$<br>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨$\text{prod}$è¿ç®—ç¬¦åœ¨æ‰§è¡Œå¿…è¦çš„æ“ä½œï¼ˆå¦‚æ¢ä½å’Œäº¤æ¢è¾“å…¥ä½ç½®ï¼‰åå°†å…¶å‚æ•°ç›¸ä¹˜ã€‚å¯¹äºå‘é‡ï¼Œè¿™å¾ˆç®€å•ï¼Œå®ƒåªæ˜¯çŸ©é˜µ-çŸ©é˜µä¹˜æ³•ã€‚å¯¹äºé«˜ç»´å¼ é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨é€‚å½“çš„å¯¹åº”é¡¹ã€‚è¿ç®—ç¬¦$\text{prod}$æŒ‡ä»£äº†æ‰€æœ‰çš„è¿™äº›ç¬¦å·ã€‚</p><p>å›æƒ³ä¸€ä¸‹ï¼Œåœ¨è®¡ç®—å›¾ä¸­çš„å•éšè—å±‚ç®€å•ç½‘ç»œçš„å‚æ•°æ˜¯$\mathbf{W}^{(1)}$å’Œ$\mathbf{W}^{(2)}$ã€‚åå‘ä¼ æ’­çš„ç›®çš„æ˜¯è®¡ç®—æ¢¯åº¦$\partial J&#x2F;\partial \mathbf{W}^{(1)}$å’Œ$\partial J&#x2F;\partial \mathbf{W}^{(2)}$ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åº”ç”¨é“¾å¼æ³•åˆ™ï¼Œä¾æ¬¡è®¡ç®—æ¯ä¸ªä¸­é—´å˜é‡å’Œå‚æ•°çš„æ¢¯åº¦ã€‚*<u>è®¡ç®—çš„é¡ºåºä¸å‰å‘ä¼ æ’­ä¸­æ‰§è¡Œçš„é¡ºåºç›¸å</u>*ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä»è®¡ç®—å›¾çš„ç»“æœå¼€å§‹ï¼Œå¹¶æœç€å‚æ•°çš„æ–¹å‘åŠªåŠ›ã€‚ç¬¬ä¸€æ­¥æ˜¯è®¡ç®—ç›®æ ‡å‡½æ•°$J&#x3D;L+s$ç›¸å¯¹äºæŸå¤±é¡¹$L$å’Œæ­£åˆ™é¡¹$s$çš„æ¢¯åº¦ã€‚</p><p>$$<br>\frac{\partial J}{\partial L} &#x3D; 1 ; \text{and} ; \frac{\partial J}{\partial s} &#x3D; 1.<br>$$<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ ¹æ®é“¾å¼æ³•åˆ™è®¡ç®—ç›®æ ‡å‡½æ•°å…³äºè¾“å‡ºå±‚å˜é‡$\mathbf{o}$çš„æ¢¯åº¦ï¼š</p><p>$$<br>\frac{\partial J}{\partial \mathbf{o}}<br>&#x3D; \text{prod}\left(\frac{\partial J}{\partial L}, \frac{\partial L}{\partial \mathbf{o}}\right)<br>&#x3D; \frac{\partial L}{\partial \mathbf{o}}<br>\in \mathbb{R}^q.<br>$$</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¡ç®—æ­£åˆ™åŒ–é¡¹ç›¸å¯¹äºä¸¤ä¸ªå‚æ•°çš„æ¢¯åº¦ï¼š</p><p>$$<br>\frac{\partial s}{\partial \mathbf{W}^{(1)}} &#x3D; \lambda \mathbf{W}^{(1)}<br>; \text{and} ;<br>\frac{\partial s}{\partial \mathbf{W}^{(2)}} &#x3D; \lambda \mathbf{W}^{(2)}.<br>$$<br>ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¡ç®—æœ€æ¥è¿‘è¾“å‡ºå±‚çš„æ¨¡å‹å‚æ•°çš„æ¢¯åº¦$\partial J&#x2F;\partial \mathbf{W}^{(2)} \in \mathbb{R}^{q \times h}$ã€‚ä½¿ç”¨é“¾å¼æ³•åˆ™å¾—å‡ºï¼š</p><p>$$<br>\frac{\partial J}{\partial \mathbf{W}^{(2)}}&#x3D; \text{prod}\left(\frac{\partial J}{\partial \mathbf{o}}, \frac{\partial \mathbf{o}}{\partial \mathbf{W}^{(2)}}\right) + \text{prod}\left(\frac{\partial J}{\partial s}, \frac{\partial s}{\partial \mathbf{W}^{(2)}}\right)&#x3D; \frac{\partial J}{\partial \mathbf{o}} \mathbf{h}^\top + \lambda \mathbf{W}^{(2)}.<br>$$<br>ä¸ºäº†è·å¾—å…³äº$\mathbf{W}^{(1)}$çš„æ¢¯åº¦ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­æ²¿ç€è¾“å‡ºå±‚åˆ°éšè—å±‚åå‘ä¼ æ’­ã€‚å…³äºéšè—å±‚è¾“å‡ºçš„æ¢¯åº¦$\partial J&#x2F;\partial \mathbf{h} \in \mathbb{R}^h$ç”±ä¸‹å¼ç»™å‡ºï¼š</p><p>$$<br>\frac{\partial J}{\partial \mathbf{h}}<br>&#x3D; \text{prod}\left(\frac{\partial J}{\partial \mathbf{o}}, \frac{\partial \mathbf{o}}{\partial \mathbf{h}}\right)<br>&#x3D; {\mathbf{W}^{(2)}}^\top \frac{\partial J}{\partial \mathbf{o}}.<br>$$</p><p>ç”±äºæ¿€æ´»å‡½æ•°$\phi$æ˜¯æŒ‰å…ƒç´ è®¡ç®—çš„ï¼Œè®¡ç®—ä¸­é—´å˜é‡$\mathbf{z}$çš„æ¢¯åº¦$\partial J&#x2F;\partial \mathbf{z} \in \mathbb{R}^h$éœ€è¦ä½¿ç”¨æŒ‰å…ƒç´ ä¹˜æ³•è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬ç”¨$\odot$è¡¨ç¤ºï¼š</p><p>$$<br>\frac{\partial J}{\partial \mathbf{z}}<br>&#x3D; \text{prod}\left(\frac{\partial J}{\partial \mathbf{h}}, \frac{\partial \mathbf{h}}{\partial \mathbf{z}}\right)<br>&#x3D; \frac{\partial J}{\partial \mathbf{h}} \odot \phiâ€™\left(\mathbf{z}\right).<br>$$</p><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æœ€æ¥è¿‘è¾“å…¥å±‚çš„æ¨¡å‹å‚æ•°çš„æ¢¯åº¦$\partial J&#x2F;\partial \mathbf{W}^{(1)} \in \mathbb{R}^{h \times d}$ã€‚æ ¹æ®é“¾å¼æ³•åˆ™ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p><p>$$<br>\frac{\partial J}{\partial \mathbf{W}^{(1)}}<br>&#x3D; \text{prod}\left(\frac{\partial J}{\partial \mathbf{z}}, \frac{\partial \mathbf{z}}{\partial \mathbf{W}^{(1)}}\right) + \text{prod}\left(\frac{\partial J}{\partial s}, \frac{\partial s}{\partial \mathbf{W}^{(1)}}\right)<br>&#x3D; \frac{\partial J}{\partial \mathbf{z}} \mathbf{x}^\top + \lambda \mathbf{W}^{(1)}.<br>$$</p><h3 id="4-3-è®¡ç®—å›¾"><a href="#4-3-è®¡ç®—å›¾" class="headerlink" title="4.3 è®¡ç®—å›¾"></a><strong>4.3 è®¡ç®—å›¾</strong></h3><p>è®¡ç®—å›¾å°±æ˜¯å°†è®¡ç®—è¿‡ç¨‹å›¾å½¢åŒ–è¡¨ç¤ºå‡ºæ¥ã€‚æ˜¯ä¸€ç§æè¿°æ–¹ç¨‹çš„â€œè¯­è¨€â€ï¼Œæ—¢ç„¶æ˜¯å›¾ï¼Œåˆ™æœ‰èŠ‚ç‚¹ï¼ˆå˜é‡ï¼‰ï¼Œè¾¹ï¼ˆæ“ä½œï¼ˆç®€å•å‡½æ•°ï¼‰ï¼‰ã€‚</p><p>ç»˜åˆ¶è®¡ç®—å›¾æœ‰åŠ©äºæˆ‘ä»¬å¯è§†åŒ–è®¡ç®—ä¸­æ“ä½œç¬¦å’Œå˜é‡çš„ä¾èµ–å…³ç³»ã€‚ å…¶ä¸­æ­£æ–¹å½¢è¡¨ç¤ºå˜é‡ï¼Œåœ†åœˆè¡¨ç¤ºæ“ä½œç¬¦ã€‚å·¦ä¸‹è§’è¡¨ç¤ºè¾“å…¥ï¼Œå³ä¸Šè§’è¡¨ç¤ºè¾“å‡ºã€‚æ³¨æ„æ˜¾ç¤ºæ•°æ®æµçš„ç®­å¤´æ–¹å‘ä¸»è¦æ˜¯å‘å³å’Œå‘ä¸Šçš„ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/5a195c49c65b495bb6b58b276f20fd8a377e92b9a7a54326857b6328dfc648b8" width="600" hegiht="" ></center><center>å›¾4ï¼šå‰å‘ä¼ æ’­è®¡ç®—å›¾ </center><p>æ¯ç»è¿‡ä¸€æ¬¡å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ä¹‹åï¼Œå‚æ•°å°±æ›´æ–°ä¸€æ¬¡ï¼Œç„¶åç”¨æ–°çš„å‚æ•°å†æ¬¡å¾ªç¯ä¸Šé¢çš„è¿‡ç¨‹ã€‚è¿™å°±æ˜¯ç¥ç»ç½‘ç»œè®­ç»ƒçš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p><p>å› æ­¤ï¼Œåœ¨è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œåœ¨åˆå§‹åŒ–æ¨¡å‹å‚æ•°åï¼Œæˆ‘ä»¬äº¤æ›¿ä½¿ç”¨å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ï¼Œåˆ©ç”¨åå‘ä¼ æ’­ç»™å‡ºçš„æ¢¯åº¦æ¥æ›´æ–°æ¨¡å‹å‚æ•°ã€‚æ³¨æ„ï¼Œåå‘ä¼ æ’­é‡å¤åˆ©ç”¨å‰å‘ä¼ æ’­ä¸­å­˜å‚¨çš„ä¸­é—´å€¼ï¼Œä»¥é¿å…é‡å¤è®¡ç®—ã€‚å¸¦æ¥çš„å½±å“ä¹‹ä¸€æ˜¯æˆ‘ä»¬éœ€è¦ä¿ç•™ä¸­é—´å€¼ï¼Œç›´åˆ°åå‘ä¼ æ’­å®Œæˆã€‚è¿™ä¹Ÿæ˜¯è®­ç»ƒæ¯”å•çº¯çš„é¢„æµ‹éœ€è¦æ›´å¤šçš„å†…å­˜ï¼ˆæ˜¾å­˜ï¼‰çš„åŸå› ä¹‹ä¸€ã€‚æ­¤å¤–ï¼Œè¿™äº›ä¸­é—´å€¼çš„å¤§å°ä¸ç½‘ç»œå±‚çš„æ•°é‡å’Œæ‰¹é‡çš„å¤§å°å¤§è‡´æˆæ­£æ¯”ã€‚å› æ­¤ï¼Œä½¿ç”¨æ›´å¤§çš„æ‰¹é‡æ¥è®­ç»ƒæ›´æ·±å±‚æ¬¡çš„ç½‘ç»œæ›´å®¹æ˜“å¯¼è‡´å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚</p><h2 id="äº”ã€å¤šå±‚æ„ŸçŸ¥æœºçš„ä»é›¶å¼€å§‹å®ç°"><a href="#äº”ã€å¤šå±‚æ„ŸçŸ¥æœºçš„ä»é›¶å¼€å§‹å®ç°" class="headerlink" title="äº”ã€å¤šå±‚æ„ŸçŸ¥æœºçš„ä»é›¶å¼€å§‹å®ç°"></a><strong>äº”ã€å¤šå±‚æ„ŸçŸ¥æœºçš„ä»é›¶å¼€å§‹å®ç°</strong></h2><p>â³<code>sec_mlp_scratch</code></p><p>ä¸ºäº†ä¸ä¹‹å‰softmaxå›å½’è·å¾—çš„ç»“æœè¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨<code>Fashion-MNIST</code>å›¾åƒåˆ†ç±»æ•°æ®é›†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥æ•°æ®ï¼Œéœ€è¦ä¸‹è½½</span></span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> paddle.fluid.layers.nn <span class="keyword">import</span> shape</span><br><span class="line"><span class="keyword">from</span> paddle.vision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> TensorDataset, DataLoader</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data_fashion_mnist</span>(<span class="params">batch_size, resize=<span class="literal">None</span></span>):</span><br><span class="line">    trans = [transforms.ToTensor()]</span><br><span class="line">    <span class="keyword">if</span> resize:</span><br><span class="line">        trans.insert(<span class="number">0</span>, transforms.Resize(resize))</span><br><span class="line">    trans = transforms.Compose(trans)</span><br><span class="line">    mnist_train = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;train&#x27;</span>, transform=trans, download=<span class="literal">True</span>)</span><br><span class="line">    mnist_test = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;test&#x27;</span>, transform=trans, download=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> (DataLoader(mnist_train, batch_size=batch_size, shuffle=<span class="literal">True</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()),</span><br><span class="line">            DataLoader(mnist_test, batch_size=batch_size, shuffle=<span class="literal">False</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_dataloader_workers</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line">batch_size = <span class="number">256</span></span><br><span class="line">train_iter, test_iter = load_data_fashion_mnist(batch_size)</span><br></pre></td></tr></table></figure><h3 id="ã€1-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"><a href="#ã€1-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘" class="headerlink" title="ã€1.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"></a><strong>ã€1.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘</strong></h3><p>å›æƒ³ä¸€ä¸‹ï¼ŒFashion-MNISTä¸­çš„æ¯ä¸ªå›¾åƒç”±$28 \times 28 &#x3D; 784$ä¸ªç°åº¦åƒç´ å€¼ç»„æˆã€‚æ‰€æœ‰å›¾åƒå…±åˆ†ä¸º10ä¸ªç±»åˆ«ã€‚å¿½ç•¥åƒç´ ä¹‹é—´çš„ç©ºé—´ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªå›¾åƒè§†ä¸ºå…·æœ‰784ä¸ªè¾“å…¥ç‰¹å¾å’Œ10ä¸ªç±»çš„ç®€å•åˆ†ç±»æ•°æ®é›†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†[<strong>å®ç°ä¸€ä¸ªå…·æœ‰å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºï¼Œ<br>å®ƒåŒ…å«256ä¸ªéšè—å•å…ƒ</strong>]ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸¤ä¸ªå˜é‡éƒ½è§†ä¸ºè¶…å‚æ•°ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬é€‰æ‹©2çš„è‹¥å¹²æ¬¡å¹‚ä½œä¸ºå±‚çš„å®½åº¦ã€‚å› ä¸ºå†…å­˜åœ¨ç¡¬ä»¶ä¸­çš„åˆ†é…å’Œå¯»å€æ–¹å¼ï¼Œè¿™ä¹ˆåšå¾€å¾€å¯ä»¥åœ¨è®¡ç®—ä¸Šæ›´é«˜æ•ˆã€‚</p><p>æˆ‘ä»¬ç”¨å‡ ä¸ªå¼ é‡æ¥è¡¨ç¤ºæˆ‘ä»¬çš„å‚æ•°ã€å¼ é‡å°±æ˜¯ä¸€ç§é€šç”¨é‡æ ¼å¼ï¼Œå’Œæ•°ç»„ä¸€æ ·ï¼Œè®©è®¡ç®—æ›´åŠ ä¾¿æ·ã€‘ã€‚æ³¨æ„ï¼Œå¯¹äºæ¯ä¸€å±‚æˆ‘ä»¬éƒ½è¦è®°å½•ä¸€ä¸ªæƒé‡çŸ©é˜µå’Œä¸€ä¸ªåç½®å‘é‡ã€‚è·Ÿä»¥å‰ä¸€æ ·ï¼Œæˆ‘ä»¬è¦ä¸ºæŸå¤±å…³äºè¿™äº›å‚æ•°çš„æ¢¯åº¦åˆ†é…å†…å­˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">num_inputs, num_outputs, num_hiddens = <span class="number">784</span>, <span class="number">10</span>, <span class="number">256</span> <span class="comment"># åˆ†åˆ«ä¸ºè¾“å…¥å±‚ã€éšè—å±‚ã€è¾“å‡ºå±‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿”å›ç¬¦åˆæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼ˆå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1çš„æ­£æ€éšæœºåˆ†å¸ƒï¼‰çš„éšæœºTensorï¼Œå½¢çŠ¶ä¸º shapeï¼Œæ•°æ®ç±»å‹ä¸º dtypeã€‚</span></span><br><span class="line"><span class="comment"># wè·Ÿè¾“å…¥ã€è¾“å‡ºæœ‰å…³ï¼Œbè·Ÿè¾“å‡ºæœ‰å…³</span></span><br><span class="line">W1 = paddle.randn(shape=(num_inputs, num_hiddens)) </span><br><span class="line">W1.stop_gradient = <span class="literal">False</span></span><br><span class="line">b1 = paddle.zeros(shape=(num_hiddens, ))</span><br><span class="line">b1.stop_gradient = <span class="literal">False</span></span><br><span class="line">W2 = paddle.randn(shape=(num_hiddens, num_outputs)) </span><br><span class="line">W2.stop_gradient = <span class="literal">False</span></span><br><span class="line">b2 = paddle.zeros(shape=(num_outputs, ))</span><br><span class="line">b2.stop_gradient = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">params = [W1, b1, W2, b2]</span><br></pre></td></tr></table></figure><h3 id="ã€2-æ¿€æ´»å‡½æ•°ã€‘"><a href="#ã€2-æ¿€æ´»å‡½æ•°ã€‘" class="headerlink" title="ã€2.æ¿€æ´»å‡½æ•°ã€‘"></a><strong>ã€2.æ¿€æ´»å‡½æ•°ã€‘</strong></h3><p>ä¸ºäº†ç¡®ä¿æˆ‘ä»¬å¯¹æ¨¡å‹çš„ç»†èŠ‚äº†å¦‚æŒ‡æŒï¼Œæˆ‘ä»¬å°†[<strong>å®ç°ReLUæ¿€æ´»å‡½æ•°</strong>]ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨å†…ç½®çš„<code>relu</code>å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">relu</span>(<span class="params">X</span>):</span><br><span class="line">    a = paddle.zeros_like(X)</span><br><span class="line">    <span class="keyword">return</span> paddle.maximum(X, a)</span><br></pre></td></tr></table></figure><h3 id="ã€3-å»ºç«‹æ¨¡å‹ã€‘"><a href="#ã€3-å»ºç«‹æ¨¡å‹ã€‘" class="headerlink" title="ã€3.å»ºç«‹æ¨¡å‹ã€‘"></a><strong>ã€3.å»ºç«‹æ¨¡å‹ã€‘</strong></h3><p>å› ä¸ºæˆ‘ä»¬å¿½ç•¥äº†ç©ºé—´ç»“æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code>reshape</code>å°†æ¯ä¸ªäºŒç»´å›¾åƒè½¬æ¢ä¸ºä¸€ä¸ªé•¿åº¦ä¸º<code>num_inputs</code>çš„å‘é‡ã€‚åªéœ€å‡ è¡Œä»£ç å°±å¯ä»¥å®ç°æˆ‘ä»¬çš„æ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">net</span>(<span class="params">X</span>):</span><br><span class="line">    X = X.reshape((-<span class="number">1</span>, num_inputs))</span><br><span class="line">    H = relu(X@W1 + b1)<span class="comment"># è¿™é‡Œâ€œ@â€ä»£è¡¨çŸ©é˜µä¹˜æ³•</span></span><br><span class="line">    <span class="keyword">return</span> (H@W2 + b2)</span><br></pre></td></tr></table></figure><h3 id="ã€4-æŸå¤±å‡½æ•°ã€‘"><a href="#ã€4-æŸå¤±å‡½æ•°ã€‘" class="headerlink" title="ã€4.æŸå¤±å‡½æ•°ã€‘"></a><strong>ã€4.æŸå¤±å‡½æ•°ã€‘</strong></h3><p>ç”±äºæˆ‘ä»¬å·²ç»ä»é›¶å®ç°è¿‡softmaxå‡½æ•°ï¼Œå› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨é«˜çº§APIä¸­çš„å†…ç½®å‡½æ•°æ¥è®¡ç®—softmaxå’Œäº¤å‰ç†µæŸå¤±ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loss = nn.CrossEntropyLoss()</span><br></pre></td></tr></table></figure><h3 id="ã€5-ä¼˜åŒ–ç®—æ³•ã€‘"><a href="#ã€5-ä¼˜åŒ–ç®—æ³•ã€‘" class="headerlink" title="ã€5.ä¼˜åŒ–ç®—æ³•ã€‘"></a><strong>ã€5.ä¼˜åŒ–ç®—æ³•ã€‘</strong></h3><p>æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œåœ¨è¿™é‡Œå­¦ä¹ ç‡è®¾ç½®ä¸º0.1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trainer = paddle.optimizer.SGD(parameters=params, learning_rate=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure><h3 id="ã€6-è®­ç»ƒã€‘"><a href="#ã€6-è®­ç»ƒã€‘" class="headerlink" title="ã€6.è®­ç»ƒã€‘"></a><strong>ã€6.è®­ç»ƒã€‘</strong></h3><p>å¹¸è¿çš„æ˜¯ï¼Œå¤šå±‚æ„ŸçŸ¥æœºçš„è®­ç»ƒè¿‡ç¨‹ä¸softmaxå›å½’çš„è®­ç»ƒè¿‡ç¨‹å®Œå…¨ç›¸åŒã€‚å°†è¿­ä»£å‘¨æœŸæ•°è®¾ç½®ä¸º10ã€‚</p><h5 id="è¶…å‚æ•°"><a href="#è¶…å‚æ•°" class="headerlink" title="è¶…å‚æ•°"></a>è¶…å‚æ•°</h5><ul><li>è¿­ä»£å‘¨æœŸ<br>è®­ç»ƒçš„æ—¶é—´è¶Šé•¿ï¼Œå­¦ä¹ çš„æ—¶é—´ä¹Ÿå°±æœ‰è¶Šé•¿ï¼Œå­¦ä¹ åˆ°çš„ç‰¹å¾ä¹Ÿå°±è¶Šæ˜æ˜¾ï¼Œè¶Šæœ‰åˆ©äºåç»­çš„æµ‹è¯•å’Œåˆ¤æ–­ã€‚</li><li>å­¦ä¹ ç‡<br>å½±å“åˆ°ä¸‹é™çš„åŠ›åº¦</li><li>æ‰¹é‡å¤§å°<br>ä¸å®œå¤ªå¤§ï¼Œä¹Ÿä¸å®œå¤ªå°ï¼Œè¦é€‚ä¸­ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;ç²¾ç¡®åº¦&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">accuracy</span>(<span class="params">y_hat, y</span>):</span><br><span class="line">    y = y.reshape(shape=[y.shape[<span class="number">0</span>]])</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(y_hat.shape) &gt; <span class="number">1</span> <span class="keyword">and</span> y_hat.shape[<span class="number">1</span>] &gt; <span class="number">1</span>:</span><br><span class="line">        y_hat = y_hat.argmax(axis=<span class="number">1</span>)</span><br><span class="line">    cmp = y_hat == y</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">float</span>(cmp.<span class="built_in">sum</span>())</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;ç´¯åŠ å™¨&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Accumulator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * n</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, *args</span>):</span><br><span class="line">        self.data = [a + <span class="built_in">float</span>(b) <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self.data, args)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * <span class="built_in">len</span>(self.data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="keyword">return</span> self.data[idx]</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;è¯„ä¼°ç²¾åº¦&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evaluate_accuracy</span>(<span class="params">net, data_iter</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(net, paddle.nn.Layer):</span><br><span class="line">        net.<span class="built_in">eval</span>()</span><br><span class="line">    metric = Accumulator(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">            metric.add(accuracy(net(X), y), y.numel())</span><br><span class="line">    <span class="keyword">return</span> metric[<span class="number">0</span>] / metric[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;è®­ç»ƒ&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_epoch_ch3</span>(<span class="params">net, train_iter, loss, updater</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(net, paddle.nn.Layer):</span><br><span class="line">        net.train()</span><br><span class="line">    metric = Accumulator(<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter:</span><br><span class="line">        y_hat = net(X)</span><br><span class="line">        l = loss(y_hat, y)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(updater, paddle.optimizer.Optimizer):</span><br><span class="line">            updater.clear_grad()</span><br><span class="line">            l.backward()</span><br><span class="line">            updater.step()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            l.backward()</span><br><span class="line">            updater(X.shape[<span class="number">0</span>])</span><br><span class="line">        metric.add(<span class="built_in">float</span>(l.<span class="built_in">sum</span>()), accuracy(y_hat, y), y.numel())</span><br><span class="line">    <span class="keyword">return</span> metric[<span class="number">0</span>] / metric[<span class="number">2</span>], metric[<span class="number">1</span>] / metric[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;è®­ç»ƒè¿‡ç¨‹+ç²¾åº¦&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_ch3</span>(<span class="params">net, train_iter, test_iter, loss, num_epochs, updater</span>):</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        train_metrics = train_epoch_ch3(net, train_iter, loss, updater)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;train: &quot;</span>, train_metrics)</span><br><span class="line">        test_acc = evaluate_accuracy(net, test_iter)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;test: &quot;</span>, test_acc)</span><br><span class="line">    train_loss, train_acc = train_metrics</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num_epochs, lr = <span class="number">5</span>, <span class="number">0.03</span><span class="comment"># è¿­ä»£å‘¨æœŸå’Œå­¦ä¹ ç‡</span></span><br><span class="line">updater = paddle.optimizer.SGD(parameters=params, learning_rate=lr)</span><br><span class="line">train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)</span><br></pre></td></tr></table></figure><pre><code>train:  (0.05181671899954478, 0.6512166666666667)test:  0.6777train:  (0.02631197537581126, 0.7511)test:  0.7285train:  (0.02050904820760091, 0.7680166666666667)test:  0.7596train:  (0.016668232532342276, 0.7784666666666666)test:  0.7592train:  (0.014135322586695353, 0.78325)test:  0.7612</code></pre><p>ä¸ºäº†å¯¹å­¦ä¹ åˆ°çš„æ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼Œæˆ‘ä»¬å°†[<strong>åœ¨ä¸€äº›æµ‹è¯•æ•°æ®ä¸Šåº”ç”¨è¿™ä¸ªæ¨¡å‹</strong>]ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_fashion_mnist_labels</span>(<span class="params">labels</span>):</span><br><span class="line">    text_labels = [<span class="string">&#x27;t-shirt&#x27;</span>, <span class="string">&#x27;trouser&#x27;</span>, <span class="string">&#x27;pullover&#x27;</span>, <span class="string">&#x27;dress&#x27;</span>, <span class="string">&#x27;coat&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;sandal&#x27;</span>, <span class="string">&#x27;shirt&#x27;</span>, <span class="string">&#x27;sneaker&#x27;</span>, <span class="string">&#x27;bag&#x27;</span>, <span class="string">&#x27;ankle boot&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> [text_labels[<span class="built_in">int</span>(i)] <span class="keyword">for</span> i <span class="keyword">in</span> labels]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_images</span>(<span class="params">imgs, num_rows, num_cols, titles=<span class="literal">None</span>, scale=<span class="number">1.5</span></span>):</span><br><span class="line">    figsize = (num_cols * scale, num_rows * scale)</span><br><span class="line">    _, axes = plt.subplots(num_rows, num_cols, figsize=figsize)</span><br><span class="line">    axes = axes.flatten()</span><br><span class="line">    <span class="keyword">for</span> i, (ax, img) <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">zip</span>(axes, imgs)):</span><br><span class="line">        <span class="keyword">if</span> paddle.is_tensor(img):</span><br><span class="line">            <span class="comment"># å›¾ç‰‡å¼ é‡</span></span><br><span class="line">            ax.imshow(img.numpy())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># PILå›¾ç‰‡</span></span><br><span class="line">            ax.imshow(img)</span><br><span class="line">        ax.axes.get_xaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        ax.axes.get_yaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">if</span> titles:</span><br><span class="line">            ax.set_title(titles[i])</span><br><span class="line">    <span class="keyword">return</span> axes</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">predict</span>(<span class="params">net, test_iter, n=<span class="number">10</span></span>):</span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> test_iter:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    trues = get_fashion_mnist_labels(y)</span><br><span class="line">    preds = get_fashion_mnist_labels(net(X).argmax(axis=<span class="number">1</span>))</span><br><span class="line">    titles = [true +<span class="string">&#x27;\n&#x27;</span> + pred <span class="keyword">for</span> true, pred <span class="keyword">in</span> <span class="built_in">zip</span>(trues, preds)]</span><br><span class="line">    show_images(</span><br><span class="line">        X[<span class="number">0</span>:n].reshape((n, <span class="number">28</span>, <span class="number">28</span>)), <span class="number">1</span>, n, titles=titles[<span class="number">0</span>:n])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">predict(net, test_iter)</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/9.png" alt="png"></p><h2 id="å…­ã€å°ç»“"><a href="#å…­ã€å°ç»“" class="headerlink" title="å…­ã€å°ç»“"></a><strong>å…­ã€å°ç»“</strong></h2><ul><li>å¤šå±‚æ„ŸçŸ¥æœºåœ¨è¾“å‡ºå±‚å’Œè¾“å…¥å±‚ä¹‹é—´å¢åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…¨è¿æ¥éšè—å±‚ï¼Œå¹¶é€šè¿‡æ¿€æ´»å‡½æ•°è½¬æ¢éšè—å±‚çš„è¾“å‡ºã€‚</li><li>å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°åŒ…æ‹¬ReLUå‡½æ•°ã€sigmoidå‡½æ•°å’Œtanhå‡½æ•°ã€‚</li><li>å¤šå±‚æ„ŸçŸ¥æœºä½¿ç”¨éšè—å±‚å’Œæ¿€æ´»å‡½æ•°æ¥å¾—åˆ°éçº¿æ€§æ¨¡å‹ã€‚å…¶ä¸­ï¼Œéšè—å±‚æ•°å’Œæ¯å±‚éšè—å±‚çš„å¤§å°ä½œä¸ºè¶…å‚æ•°ã€‚</li><li>å¯¹äºç›¸åŒçš„åˆ†ç±»é—®é¢˜ï¼Œå¤šå±‚æ„ŸçŸ¥æœºçš„å®ç°ä¸softmaxå›å½’çš„å®ç°ç›¸åŒï¼Œåªæ˜¯å¤šå±‚æ„ŸçŸ¥æœºçš„å®ç°é‡Œå¢åŠ äº†å¸¦æœ‰æ¿€æ´»å‡½æ•°çš„éšè—å±‚ã€‚</li></ul><p><strong>æ‰©å±•ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;ç´¯åŠ å™¨&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Accumulator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n</span>):</span><br><span class="line">        <span class="comment"># å€˜è‹¥è¿™é‡Œçš„nä¸º2ï¼Œåˆ™æ­¤æ—¶self.dataä»¥[0.0, 0.0]è¿™æ ·çš„åˆ—è¡¨å±•ç°å‡ºæ¥</span></span><br><span class="line">        self.data = [<span class="number">0.0</span>] * n</span><br><span class="line">        <span class="comment">#print(self.data)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, *args</span>):</span><br><span class="line">        <span class="comment"># è¿™é‡Œçš„selfæ˜¯åˆšåˆšåˆå§‹åŒ–self.dataï¼Œ*argsæ¥æ”¶éå…³é”®å­—çš„ä¼ å‚å¯ä»¥æ˜¯å…ƒç»„ï¼Œæˆ–è€…æ˜¯å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">        <span class="comment">#print(*args)</span></span><br><span class="line">        <span class="comment">#for a, b in zip(self.data, args):</span></span><br><span class="line">        <span class="comment">#    print(a, b)</span></span><br><span class="line">        <span class="comment"># self.dataæ˜¯[0.0, 0.0],å€˜è‹¥argsæ¥æ”¶çš„ä¼ å‚ä¸º(4, 5),</span></span><br><span class="line">        <span class="comment"># é‚£ä¹ˆfor a, b in zip(self.data, args) è¡¨ç¤º a = 0.0,b = 4,</span></span><br><span class="line">        <span class="comment"># ç„¶åæ‰§è¡Œa + float(b)ï¼Œå¾—åˆ°ç»“æœ4.0ï¼Œæ­¤æ—¶self.data = [4.0, 0.0],</span></span><br><span class="line">        <span class="comment"># ç„¶ååŒæ ·å†æ¥ä¸€æ¬¡forå¾ªç¯ï¼Œa = 0.0, b = 5,ç„¶åæ‰§è¡Œa + float(b) å¾—åˆ°ç»“æœ5.0,</span></span><br><span class="line">        <span class="comment"># æœ€åself.data = [4.0, 5.0]</span></span><br><span class="line">        self.data = [a + <span class="built_in">float</span>(b) <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self.data, args)]</span><br><span class="line">        <span class="comment">#print(self.data)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset</span>(<span class="params">self</span>):<span class="comment"># é‡ç½®</span></span><br><span class="line">        self.data = [<span class="number">0.0</span>] * <span class="built_in">len</span>(self.data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):<span class="comment"># è¿”å›ä¸æŒ‡å®šé”®ç›¸å…³è”çš„å€¼</span></span><br><span class="line">        <span class="comment">#print(&quot;è¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨&quot;)# åªæœ‰å•ç‹¬å–æŸä¸ªå€¼æ—¶ï¼Œå³metric[1]ï¼Œæ­¤å‡½æ•°æ‰ä¼šè¢«è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">return</span> self.data[idx]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ‹è¯•</span></span><br><span class="line">metric = Accumulator(<span class="number">3</span>)</span><br><span class="line">metric.add(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_æ·±åº¦å­¦ä¹ æ€»è§ˆä¸æ¨¡å‹æ­å»º </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 2.2-ç¥ç»ç½‘ç»œä¸­çš„åˆ†ç±»ä»»åŠ¡</title>
      <link href="/2022/12/20/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A02.2-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1/"/>
      <url>/2022/12/20/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A02.2-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="softmaxå›å½’"><a href="#softmaxå›å½’" class="headerlink" title="softmaxå›å½’"></a><strong>softmaxå›å½’</strong></h1><p>:label:<code>sec_softmax</code></p><p>å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ol><li>åˆ†ç±»ä»»åŠ¡ä¸çº¿æ€§å›å½’ä»»åŠ¡çš„å¼‚åŒç‚¹ï¼›</li><li>ç‹¬çƒ­ç¼–ç çš„æ¦‚å¿µï¼›</li><li>è¯»å–å›¾åƒåˆ†ç±»æ•°æ®é›†çš„æµç¨‹ï¼›</li><li>å®ç°çº¿æ€§å›å½’æ¨¡å‹çš„æ–¹æ³•ï¼›</li></ol><hr><p>å›å½’å¯ä»¥ç”¨äºé¢„æµ‹å¤šå°‘çš„é—®é¢˜ã€‚æ¯”å¦‚é¢„æµ‹æˆ¿å±‹è¢«å”®å‡ºä»·æ ¼ï¼Œæˆ–è€…æ£’çƒé˜Ÿå¯èƒ½è·å¾—çš„èƒœåœºæ•°ï¼Œåˆæˆ–è€…æ‚£è€…ä½é™¢çš„å¤©æ•°ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯¹<strong>åˆ†ç±»é—®é¢˜</strong>æ„Ÿå…´è¶£ï¼šä¸æ˜¯é—®â€œå¤šå°‘â€ï¼Œè€Œæ˜¯é—®â€œå“ªä¸€ä¸ªâ€ï¼š</p><ul><li>æŸä¸ªç”µå­é‚®ä»¶æ˜¯å¦å±äºåƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹ï¼Ÿ</li><li>æŸä¸ªç”¨æˆ·å¯èƒ½æ³¨å†Œæˆ–ä¸æ³¨å†Œè®¢é˜…æœåŠ¡ï¼Ÿ</li><li>æŸä¸ªå›¾åƒæç»˜çš„æ˜¯é©´ã€ç‹—ã€çŒ«ã€è¿˜æ˜¯é¸¡ï¼Ÿ</li><li>æŸäººæ¥ä¸‹æ¥æœ€æœ‰å¯èƒ½çœ‹å“ªéƒ¨ç”µå½±ï¼Ÿ</li></ul><p>é€šå¸¸ï¼Œæœºå™¨å­¦ä¹ å®è·µè€…ç”¨åˆ†ç±»è¿™ä¸ªè¯æ¥æè¿°ä¸¤ä¸ªæœ‰å¾®å¦™å·®åˆ«çš„é—®é¢˜ï¼š</p><ul><li>æˆ‘ä»¬åªå¯¹æ ·æœ¬çš„â€œç¡¬æ€§â€ç±»åˆ«æ„Ÿå…´è¶£ï¼Œå³å±äºå“ªä¸ªç±»åˆ«ï¼›</li><li>æˆ‘ä»¬å¸Œæœ›å¾—åˆ°â€œè½¯æ€§â€ç±»åˆ«ï¼Œå³å¾—åˆ°å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</li></ul><p>è¿™ä¸¤è€…çš„ç•Œé™å¾€å¾€å¾ˆæ¨¡ç³Šã€‚å…¶ä¸­çš„ä¸€ä¸ªåŸå› æ˜¯ï¼š<strong>å³ä½¿æˆ‘ä»¬åªå…³å¿ƒç¡¬ç±»åˆ«ï¼Œæˆ‘ä»¬ä»ç„¶ä½¿ç”¨è½¯ç±»åˆ«çš„æ¨¡å‹</strong>ã€‚</p><p>åˆšæ‰æˆ‘ä»¬æ‰€äº†è§£çš„æ˜¯æœºå™¨å­¦ä¹ åœ¨<strong>å›å½’é—®é¢˜</strong>ä¸­çš„åº”ç”¨ï¼Œä¹Ÿå°±æ˜¯<strong>ç»™å®šä¸€ä¸ªäº‹ç‰©çš„å¤šç»„å·²çŸ¥æ•°æ®ï¼ˆå…¶ä¸­æ¯ç»„å·²çŸ¥æ•°æ®å¯ä»¥åŒ…å«â¼€ä¸ªç‰¹å¾æˆ–å¤šä¸ªç‰¹å¾ï¼‰ä»¥åŠç›¸åº”çš„å¦ä¸€ä¸ªç‰¹å¾çš„å€¼ï¼Œè¦æ±‚æ¨æ–­å‡ºä¸€ä¸ªæ¨¡å‹ï¼Œèƒ½æ ¹æ®æ–°çš„è§‚æµ‹æ•°æ®æ¨æ–­å‡ºæœªçŸ¥ç‰¹å¾çš„å€¼</strong>ã€‚è€Œæœºå™¨å­¦ä¹ è§£å†³çš„å¦å¤§ä¸€ç±»é—®é¢˜ï¼Œæ˜¯<strong>åˆ†ç±»é—®é¢˜</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>ç»™å®šä¸€ä¸ªå¯¹è±¡çš„ä¸€ç»„å·²çŸ¥æ•°æ®ï¼Œæ¨æ–­å‡ºæ‰€å±çš„ç±»åˆ«ã€‚</strong></p><h2 id="ä¸€ã€ç±»åˆ«çš„è¡¨ç¤º"><a href="#ä¸€ã€ç±»åˆ«çš„è¡¨ç¤º" class="headerlink" title="ä¸€ã€ç±»åˆ«çš„è¡¨ç¤º"></a><strong>ä¸€ã€ç±»åˆ«çš„è¡¨ç¤º</strong></h2><p>:label:<code>subsec_classification-problem</code></p><p>æˆ‘ä»¬ä»ä¸€ä¸ªå›¾åƒåˆ†ç±»é—®é¢˜å¼€å§‹ã€‚å‡è®¾æ¯æ¬¡è¾“å…¥æ˜¯ä¸€ä¸ª$2\times2$çš„ç°åº¦å›¾åƒã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ ‡é‡è¡¨ç¤ºæ¯ä¸ªåƒç´ å€¼ï¼Œæ¯ä¸ªå›¾åƒå¯¹åº”å››ä¸ªç‰¹å¾$x_1, x_2, x_3, x_4$ã€‚<br>æ­¤å¤–ï¼Œå‡è®¾æ¯ä¸ªå›¾åƒå±äºç±»åˆ«â€œçŒ«â€ï¼Œâ€œé¸¡â€å’Œâ€œç‹—â€ä¸­çš„ä¸€ä¸ªã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦é€‰æ‹©å¦‚ä½•è¡¨ç¤ºæ ‡ç­¾ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ˜æ˜¾çš„é€‰æ‹©ï¼šæœ€ç›´æ¥çš„æƒ³æ³•æ˜¯é€‰æ‹©$y \in {1, 2, 3}$ï¼Œ<br>å…¶ä¸­æ•´æ•°åˆ†åˆ«ä»£è¡¨${\text{çŒ«}, \text{é¸¡}, \text{ç‹—}}$ã€‚è¿™æ˜¯åœ¨è®¡ç®—æœºä¸Šå­˜å‚¨æ­¤ç±»ä¿¡æ¯çš„æœ‰æ•ˆæ–¹æ³•ã€‚å¦‚æœç±»åˆ«é—´æœ‰ä¸€äº›è‡ªç„¶é¡ºåºï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è¯•å›¾é¢„æµ‹${\text{å©´å„¿}, \text{å„¿ç«¥}, \text{é’å°‘å¹´}, \text{é’å¹´äºº}, \text{ä¸­å¹´äºº}, \text{è€å¹´äºº}}$ï¼Œé‚£ä¹ˆå°†è¿™ä¸ªé—®é¢˜è½¬å˜ä¸ºå›å½’é—®é¢˜ï¼Œå¹¶ä¸”ä¿ç•™è¿™ç§æ ¼å¼æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p><p><strong>ä½†æ˜¯ä¸€èˆ¬çš„åˆ†ç±»é—®é¢˜å¹¶ä¸ä¸ç±»åˆ«ä¹‹é—´çš„è‡ªç„¶é¡ºåºæœ‰å…³ã€‚</strong></p><h3 id="ã€ç‹¬çƒ­ç¼–ç ã€‘"><a href="#ã€ç‹¬çƒ­ç¼–ç ã€‘" class="headerlink" title="ã€ç‹¬çƒ­ç¼–ç ã€‘"></a><strong>ã€ç‹¬çƒ­ç¼–ç ã€‘</strong></h3><p>å¹¸è¿çš„æ˜¯ï¼Œç»Ÿè®¡å­¦å®¶å¾ˆæ—©ä»¥å‰å°±å‘æ˜äº†ä¸€ç§è¡¨ç¤ºåˆ†ç±»æ•°æ®çš„ç®€å•æ–¹æ³•ï¼š<strong>ç‹¬çƒ­ç¼–ç ï¼ˆone-hot encodingï¼‰</strong>ã€‚ç‹¬çƒ­ç¼–ç æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå®ƒçš„åˆ†é‡å’Œç±»åˆ«ä¸€æ ·å¤šã€‚ç±»åˆ«å¯¹åº”çš„åˆ†é‡è®¾ç½®ä¸º1ï¼Œå…¶ä»–æ‰€æœ‰åˆ†é‡è®¾ç½®ä¸º0ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d573ca3cf022401d857374423477b6beaab8d07acca441b3be5fcd449caa9919" width="500" hegiht="" ></center><center>å›¾1ï¼šç‹¬çƒ­ç¼–ç  </center><p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ ‡ç­¾$y$å°†æ˜¯ä¸€ä¸ªä¸‰ç»´å‘é‡ï¼Œ<br>å…¶ä¸­$(1, 0, 0)$å¯¹åº”äºâ€œçŒ«â€ã€$(0, 1, 0)$å¯¹åº”äºâ€œé¸¡â€ã€$(0, 0, 1)$å¯¹åº”äºâ€œç‹—â€ï¼š</p><p>$$y \in {(1, 0, 0), (0, 1, 0), (0, 0, 1)}.$$</p><h2 id="äºŒã€å»ºç«‹æ¨¡å‹"><a href="#äºŒã€å»ºç«‹æ¨¡å‹" class="headerlink" title="äºŒã€å»ºç«‹æ¨¡å‹"></a><strong>äºŒã€å»ºç«‹æ¨¡å‹</strong></h2><h3 id="ã€1-ç½‘ç»œæ¶æ„ã€‘"><a href="#ã€1-ç½‘ç»œæ¶æ„ã€‘" class="headerlink" title="ã€1.ç½‘ç»œæ¶æ„ã€‘"></a><strong>ã€1.ç½‘ç»œæ¶æ„ã€‘</strong></h3><p>ä¸ºäº†ä¼°è®¡æ‰€æœ‰å¯èƒ½ç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœ‰å¤šä¸ªè¾“å‡ºçš„æ¨¡å‹ï¼Œæ¯ä¸ªç±»åˆ«å¯¹åº”ä¸€ä¸ªè¾“å‡ºã€‚ä¸ºäº†è§£å†³çº¿æ€§æ¨¡å‹çš„åˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å’Œè¾“å‡ºä¸€æ ·å¤šçš„<strong>ä»¿å°„å‡½æ•°ï¼ˆaffine functionï¼‰</strong>ã€‚æ¯ä¸ªè¾“å‡ºå¯¹åº”äºå®ƒè‡ªå·±çš„ä»¿å°„å‡½æ•°ã€‚ï¼ˆä»¿å°„å‡½æ•°ï¼Œå³æœ€é«˜æ¬¡æ•°ä¸º1çš„å¤šé¡¹å¼å‡½æ•°ã€‚å¸¸æ•°é¡¹ä¸ºé›¶çš„ä»¿å°„å‡½æ•°ç§°ä¸ºçº¿æ€§å‡½æ•°ã€‚ï¼‰</p><p><strong>åœ¨çº¿æ€§æ¨¡å‹çš„åˆ†ç±»é—®é¢˜ä¸­ï¼Œéœ€è¦æ‹¥æœ‰å’Œè¾“å‡ºä¸€æ ·å¤šçš„ä»¿å°„å‡½æ•°ï¼Œæ¯ä¸ªè¾“å‡ºå¯¹åº”å®ƒè‡ªå·±çš„ä»¿å°„å‡½æ•°</strong></p><p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œç”±äºæˆ‘ä»¬æœ‰4ä¸ªç‰¹å¾å’Œ3ä¸ªå¯èƒ½çš„è¾“å‡ºç±»åˆ«ï¼Œæˆ‘ä»¬å°†éœ€è¦12ä¸ªæ ‡é‡æ¥è¡¨ç¤ºæƒé‡ï¼ˆå¸¦ä¸‹æ ‡çš„$w$ï¼‰ï¼Œ3ä¸ªæ ‡é‡æ¥è¡¨ç¤ºåç½®ï¼ˆå¸¦ä¸‹æ ‡çš„$b$ï¼‰ã€‚<br>ä¸‹é¢æˆ‘ä»¬ä¸ºæ¯ä¸ªè¾“å…¥è®¡ç®—ä¸‰ä¸ª<strong>æœªè§„èŒƒåŒ–çš„é¢„æµ‹ï¼ˆlogitï¼‰</strong>ï¼š$o_1$ã€$o_2$å’Œ$o_3$ã€‚</p><p>$$<br>\begin{aligned}<br>o_1 &amp;&#x3D; x_1 w_{11} + x_2 w_{12} + x_3 w_{13} + x_4 w_{14} + b_1,\<br>o_2 &amp;&#x3D; x_1 w_{21} + x_2 w_{22} + x_3 w_{23} + x_4 w_{24} + b_2,\<br>o_3 &amp;&#x3D; x_1 w_{31} + x_2 w_{32} + x_3 w_{33} + x_4 w_{34} + b_3.<br>\end{aligned}<br>$$</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ç¥ç»ç½‘ç»œå›¾æ¥æè¿°è¿™ä¸ªè®¡ç®—è¿‡ç¨‹ã€‚ä¸çº¿æ€§å›å½’ä¸€æ ·ï¼Œ$softmax$ å›å½’ä¹Ÿæ˜¯ä¸€ä¸ªå•å±‚ç¥ç»ç½‘ç»œã€‚ç”±äºè®¡ç®—æ¯ä¸ªè¾“å‡º$o_1$ã€$o_2$å’Œ$o_3$å–å†³äºæ‰€æœ‰è¾“å…¥$x_1$ã€$x_2$ã€$x_3$å’Œ$x_4$ã€‚<strong>æ‰€ä»¥softmaxå›å½’çš„è¾“å‡ºå±‚ä¹Ÿæ˜¯å…¨è¿æ¥å±‚ã€‚</strong></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/04eb6a3ec6ab42b9a58659506650eb4a5aaeb0af56ef4292ad916ebecd183528" width="500" hegiht="" ></center><center>å›¾2ï¼šsoftmaxåˆ†ç±»æ¨¡å‹ </center><p>ä¸ºäº†æ›´ç®€æ´åœ°è¡¨è¾¾æ¨¡å‹ï¼Œæˆ‘ä»¬ä»ç„¶ä½¿ç”¨çº¿æ€§ä»£æ•°ç¬¦å·ã€‚é€šè¿‡å‘é‡å½¢å¼è¡¨è¾¾ä¸º$\mathbf{o} &#x3D; \mathbf{W} \mathbf{x} + \mathbf{b}$ã€‚<br>ç”±æ­¤ï¼Œæˆ‘ä»¬å·²ç»å°†æ‰€æœ‰æƒé‡æ”¾åˆ°ä¸€ä¸ª$3 \times 4$çŸ©é˜µä¸­ã€‚å¯¹äºç»™å®šæ•°æ®æ ·æœ¬çš„ç‰¹å¾$\mathbf{x}$ï¼Œæˆ‘ä»¬çš„è¾“å‡ºæ˜¯ç”±æƒé‡ä¸è¾“å…¥ç‰¹å¾è¿›è¡ŒçŸ©é˜µ-å‘é‡ä¹˜æ³•å†åŠ ä¸Šåç½®$\mathbf{b}$å¾—åˆ°çš„ã€‚</p><h3 id="ã€2-softmaxå‡½æ•°ã€‘"><a href="#ã€2-softmaxå‡½æ•°ã€‘" class="headerlink" title="ã€2.softmaxå‡½æ•°ã€‘"></a><strong>ã€2.softmaxå‡½æ•°ã€‘</strong></h3><p>:label:<code>subsec_softmax_operation</code></p><p>ç°åœ¨æˆ‘ä»¬å°†ä¼˜åŒ–å‚æ•°ä»¥æœ€å¤§åŒ–è§‚æµ‹æ•°æ®çš„æ¦‚ç‡ã€‚ä¸ºäº†å¾—åˆ°é¢„æµ‹ç»“æœï¼Œæˆ‘ä»¬å°†è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œä»¥é€‰æ‹©å…·æœ‰æœ€å¤§æ¦‚ç‡çš„æ ‡ç­¾ã€‚<br>æˆ‘ä»¬å¸Œæœ›æ¨¡å‹çš„è¾“å‡º$\hat{y}_j$å¯ä»¥è§†ä¸ºå±äºç±»$j$çš„æ¦‚ç‡ï¼Œç„¶åé€‰æ‹©å…·æœ‰æœ€å¤§è¾“å‡ºå€¼çš„ç±»åˆ«$\operatorname*{argmax}_j y_j$ä½œä¸ºæˆ‘ä»¬çš„é¢„æµ‹ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœ$\hat{y}_1$ã€$\hat{y}_2$å’Œ$\hat{y}_3$åˆ†åˆ«ä¸º0.1ã€0.8å’Œ0.1ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¢„æµ‹çš„ç±»åˆ«æ˜¯2ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ä»£è¡¨â€œé¸¡â€ã€‚</p><p><strong>ç„¶è€Œæˆ‘ä»¬èƒ½å¦å°†æœªè§„èŒƒåŒ–çš„é¢„æµ‹$o$ç›´æ¥è§†ä½œæˆ‘ä»¬æ„Ÿå…´è¶£çš„è¾“å‡ºå‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚</strong><br>å› ä¸ºå°†çº¿æ€§å±‚çš„è¾“å‡ºç›´æ¥è§†ä¸ºæ¦‚ç‡æ—¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼šä¸€æ–¹é¢ï¼Œæˆ‘ä»¬æ²¡æœ‰é™åˆ¶è¿™äº›è¾“å‡ºæ•°å­—çš„æ€»å’Œä¸º1ã€‚å¦ä¸€æ–¹é¢ï¼Œæ ¹æ®è¾“å…¥çš„ä¸åŒï¼Œå®ƒä»¬å¯ä»¥ä¸ºè´Ÿå€¼ã€‚è¿™äº›è¿åäº†æ¦‚ç‡åŸºæœ¬å…¬ç†ã€‚<br><strong>è¦å°†è¾“å‡ºè§†ä¸ºæ¦‚ç‡ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯åœ¨ä»»ä½•æ•°æ®ä¸Šçš„è¾“å‡ºéƒ½æ˜¯éè´Ÿçš„ä¸”æ€»å’Œä¸º1ã€‚</strong></p><p>ç¤¾ä¼šç§‘å­¦å®¶é‚“è‚¯Â·å¢æ–¯äº1959å¹´åœ¨<strong>é€‰æ‹©æ¨¡å‹ï¼ˆchoice modelï¼‰</strong> çš„ç†è®ºåŸºç¡€ä¸Šå‘æ˜çš„softmaxå‡½æ•°æ­£æ˜¯è¿™æ ·åšçš„ï¼š<br><strong>softmaxå‡½æ•°å°†æœªè§„èŒƒåŒ–çš„é¢„æµ‹å˜æ¢ä¸ºéè´Ÿå¹¶ä¸”æ€»å’Œä¸º1ï¼ŒåŒæ—¶è¦æ±‚æ¨¡å‹ä¿æŒå¯å¯¼ã€‚</strong><br>å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><p><strong>æˆ‘ä»¬é¦–å…ˆå¯¹æ¯ä¸ªæœªè§„èŒƒåŒ–çš„é¢„æµ‹æ±‚å¹‚ï¼ˆæŒ‡æ•°å‡½æ•°çš„æ€§è´¨ï¼‰ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿è¾“å‡ºéè´Ÿã€‚<br>ä¸ºäº†ç¡®ä¿æœ€ç»ˆè¾“å‡ºçš„æ€»å’Œä¸º1ï¼Œæˆ‘ä»¬å†å¯¹æ¯ä¸ªæ±‚å¹‚åçš„ç»“æœé™¤ä»¥å®ƒä»¬çš„æ€»å’Œï¼ˆç±»ä¼¼äºæ¦‚ç‡ï¼‰ã€‚</strong></p><p>$$\hat{\mathbf{y}} &#x3D; \mathrm{softmax}(\mathbf{Z})\quad \text{å…¶ä¸­}\quad \hat{y}_j &#x3D; \frac{\exp(o_j)}{\sum_k \exp(o_k)}$$</p><p>è¿™é‡Œï¼Œå¯¹äºæ‰€æœ‰ç»è¿‡softmaxå¤„ç†çš„ $\hat{\mathbf{y}}$ çš„å€¼æ€»æœ‰$0 \leq \hat{y}_j \leq 1$ã€‚å› æ­¤ï¼Œ$\hat{\mathbf{y}}$å¯ä»¥è§†ä¸ºä¸€ä¸ªæ­£ç¡®çš„æ¦‚ç‡åˆ†å¸ƒã€‚<br>softmaxè¿ç®—ä¸ä¼šæ”¹å˜æœªè§„èŒƒåŒ–çš„é¢„æµ‹$\mathbf{Z}$ä¹‹é—´çš„é¡ºåºï¼Œåªä¼šç¡®å®šåˆ†é…ç»™æ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚å› æ­¤ï¼Œåœ¨é¢„æµ‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ç”¨ä¸‹å¼æ¥é€‰æ‹©æœ€æœ‰å¯èƒ½çš„ç±»åˆ«ã€‚<br>$$<br>\operatorname*{argmax}_j \hat y_j &#x3D; \operatorname*{argmax}_j o_j.<br>$$</p><p>å°½ç®¡softmaxæ˜¯ä¸€ä¸ªéçº¿æ€§å‡½æ•°ï¼Œä½†softmaxå›å½’çš„è¾“å‡ºä»ç„¶ç”±è¾“å…¥ç‰¹å¾çš„ä»¿å°„å˜æ¢å†³å®šã€‚å› æ­¤ï¼Œsoftmaxå›å½’æ˜¯ä¸€ä¸ª<strong>çº¿æ€§æ¨¡å‹ï¼ˆlinear modelï¼‰</strong>ã€‚</p><blockquote><p>softmaxå›å½’æ˜¯åœ¨å¯¹æ•°å‡ ç‡å‡½æ•°çš„åŸºç¡€ä¸Šè½¬æ¢æˆçš„å¤šåˆ†ç±»é—®é¢˜ã€‚</p></blockquote><h3 id="ã€3-å°æ‰¹é‡æ ·æœ¬çš„çŸ¢é‡åŒ–ã€‘"><a href="#ã€3-å°æ‰¹é‡æ ·æœ¬çš„çŸ¢é‡åŒ–ã€‘" class="headerlink" title="ã€3.å°æ‰¹é‡æ ·æœ¬çš„çŸ¢é‡åŒ–ã€‘"></a><strong>ã€3.å°æ‰¹é‡æ ·æœ¬çš„çŸ¢é‡åŒ–ã€‘</strong></h3><p>:label:<code>subsec_softmax_vectorization</code></p><p><strong>ä¸ºäº†æé«˜è®¡ç®—æ•ˆç‡å¹¶ä¸”å……åˆ†åˆ©ç”¨GPUï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé’ˆå¯¹å°æ‰¹é‡æ•°æ®æ‰§è¡ŒçŸ¢é‡è®¡ç®—ã€‚</strong><br>å‡è®¾æˆ‘ä»¬è¯»å–äº†ä¸€ä¸ªæ‰¹é‡çš„æ ·æœ¬$\mathbf{X}$ï¼Œå…¶ä¸­ç‰¹å¾ç»´åº¦ï¼ˆè¾“å…¥æ•°é‡ï¼‰ä¸º $d$ï¼Œæ‰¹é‡å¤§å°ä¸º $n$ã€‚æ­¤å¤–ï¼Œå‡è®¾æˆ‘ä»¬åœ¨è¾“å‡ºä¸­æœ‰ $q$ä¸ªç±»åˆ«ã€‚é‚£ä¹ˆå°æ‰¹é‡ç‰¹å¾ä¸º $\mathbf{X} \in \mathbb{R}^{n \times d}$ï¼Œæƒé‡ä¸º $\mathbf{W} \in \mathbb{R}^{d \times q}$ï¼Œåç½®ä¸º $\mathbf{b} \in \mathbb{R}^{1\times q}$ã€‚softmaxå›å½’çš„çŸ¢é‡è®¡ç®—è¡¨è¾¾å¼ä¸ºï¼š</p><p>$$ \begin{aligned} \mathbf{O} &amp;&#x3D; \mathbf{X} \mathbf{W} + \mathbf{b}, \ \hat{\mathbf{Y}} &amp; &#x3D; \mathrm{softmax}(\mathbf{O}). \end{aligned} $$</p><p>ç›¸å¯¹äºä¸€æ¬¡å¤„ç†ä¸€ä¸ªæ ·æœ¬ï¼Œå°æ‰¹é‡æ ·æœ¬çš„çŸ¢é‡åŒ–åŠ å¿«äº†$\mathbf{X}å’Œ\mathbf{W}$çš„çŸ©é˜µ-å‘é‡ä¹˜æ³•ã€‚ç”±äº$\mathbf{X}$ä¸­çš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ•°æ®æ ·æœ¬ï¼Œé‚£ä¹ˆsoftmaxè¿ç®—å¯ä»¥<strong>æŒ‰è¡Œï¼ˆrowwiseï¼‰</strong> æ‰§è¡Œï¼š<strong>å¯¹äº$\mathbf{O}$çš„æ¯ä¸€è¡Œï¼Œæˆ‘ä»¬å…ˆå¯¹æ‰€æœ‰é¡¹è¿›è¡Œå¹‚è¿ç®—ï¼Œç„¶åé€šè¿‡æ±‚å’Œå¯¹å®ƒä»¬è¿›è¡Œæ ‡å‡†åŒ–ã€‚</strong></p><p>$\mathbf{X} \mathbf{W} + \mathbf{b}$çš„æ±‚å’Œä¼šä½¿ç”¨å¹¿æ’­ï¼Œå°æ‰¹é‡çš„æœªè§„èŒƒåŒ–é¢„æµ‹$\mathbf{O}$å’Œè¾“å‡ºæ¦‚ç‡$\hat{\mathbf{Y}}$éƒ½æ˜¯å½¢çŠ¶ä¸º$n \times q$çš„çŸ©é˜µã€‚</p><h3 id="ã€4-æŸå¤±å‡½æ•°â€”â€”äº¤å‰ç†µæŸå¤±ã€‘"><a href="#ã€4-æŸå¤±å‡½æ•°â€”â€”äº¤å‰ç†µæŸå¤±ã€‘" class="headerlink" title="ã€4.æŸå¤±å‡½æ•°â€”â€”äº¤å‰ç†µæŸå¤±ã€‘"></a><strong>ã€4.æŸå¤±å‡½æ•°â€”â€”äº¤å‰ç†µæŸå¤±ã€‘</strong></h3><p>ç°åœ¨è®©æˆ‘ä»¬è€ƒè™‘æ•´ä¸ªç»“æœåˆ†å¸ƒçš„æƒ…å†µï¼Œå³è§‚å¯Ÿåˆ°çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç»“æœã€‚å¯¹äºæ ‡ç­¾$\mathbf{y}$ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸ä»¥å‰ç›¸åŒçš„è¡¨ç¤ºå½¢å¼ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨ä¸€ä¸ªæ¦‚ç‡å‘é‡è¡¨ç¤ºï¼Œå¦‚$(0.1, 0.2, 0.7)$ï¼Œè€Œä¸æ˜¯ä»…åŒ…å«äºŒå…ƒé¡¹çš„å‘é‡$(0, 0, 1)$ã€‚è¿™é‡Œæˆ‘ä»¬å¼•å‡ºï¼š**<em>äº¤å‰ç†µæŸå¤±</em>(cross-entropy loss)**ï¼Œå®ƒæ˜¯åˆ†ç±»é—®é¢˜æœ€å¸¸ç”¨çš„æŸå¤±ä¹‹ä¸€ã€‚</p><p>ç†µå¯ä»¥ç”¨æ¥åˆ¤æ–­æ•°æ®é›†çš„æ··ä¹±ç¨‹åº¦ã€‚åœ¨è¿™ä¸ªå…¬å¼ä¸­ï¼Œ$H$ä»£è¡¨ç†µï¼Œ$pi$ä»£è¡¨æŸä¸ª$i$ç±»åˆ«å‡ºç°çš„æ¦‚ç‡ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/67441076efb74cee8b18d2ff3cc38d22f4e2fd3a4caa4990ad4decefded16b8e" width="200" hegiht="" ></center><p>å¦‚æœæŸä¸ªç±»åˆ«å‡ºç°çš„æ¦‚ç‡ä¸º1æˆ–0ï¼Œé‚£ä¹ˆ$H$ä¸º0ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è®¤ä¸ºæ•°æ®é›†æ²¡æœ‰æ··ä¹±ï¼›ç›¸åï¼Œå¦‚æœæ•°æ®é›†ä¸­çš„æ ·æœ¬åŒ…å«å¤šä¸ªç±»åˆ«ï¼Œé‚£ä¹ˆç†µå°±ä¼šå¢å¤§ï¼Œåœ¨$ï¼ˆ0,1ï¼‰$ä¸­ç§»åŠ¨ï¼›æœ€åï¼Œå¦‚æœä¸€ä¸ªæ•°æ®é›†ä¸­ï¼Œä¸€åŠå±äºä¸€ä¸ªç±»åˆ«ï¼Œè€Œå¦ä¸€åŠå±äºå¦ä¸€ä¸ªç±»åˆ«ï¼Œé‚£ä¹ˆ$H$ä¸º1ï¼Œæ­¤æ—¶æˆ‘ä»¬è®¤ä¸ºæ•°æ®é›†éå¸¸æ··ä¹±ã€‚</p><p>ä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼Œç†µä¹Ÿè¡¡é‡æŒæ¡äº†ä¿¡æ¯çš„å¤šå°‘ã€‚ å¦‚æœâ¼€ä¸ªæ•°æ®é›†æ‰€æœ‰çš„æ ·æœ¬éƒ½å±äºåŒâ¼€ä¸ªç±»åˆ«ï¼Œä¹Ÿå°±æ˜¯å…¶ä¸­ä¸€ä¸ªç±»åˆ«å‡ºç°çš„æ¦‚ç‡ä¸º1æˆ–0ï¼Œè¿™è¯´æ˜æˆ‘ä»¬å¯¹è¿™ä¸ªæ•°æ®é›†é‡Œçš„æ•°æ®æ‰€å±çš„ç±»åˆ«éå¸¸ç¡®å®šï¼Œä¹Ÿå°±æ˜¯è¯´æ˜æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰ä¿¡æ¯ï¼› è€Œå¦‚æœä¸€ä¸ªæ•°æ®é›†é‡Œçš„æ ·æœ¬ï¼Œä¸€åŠå±äºä¸€ä¸ªç±»åˆ«ï¼Œè€Œå¦ä¸€åŠå±äºå¦ä¸€ä¸ªç±»åˆ«ï¼Œè¿™æ—¶å¦‚æœä»æ•°æ®é›†é‡Œä»»æ„æŠ½å–ä¸€ä¸ªæ ·æœ¬ï¼Œæˆ‘ä»¬å®Œå…¨æ— æ³•çŒœæµ‹å®ƒå±äºä»€ä¹ˆç±»åˆ«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ²¡æœ‰æŒæ¡ä»»ä½•ä¿¡æ¯ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ç›®æ ‡æ—¢å¯ä»¥è¯´æ˜¯å‡å°‘åˆ†ç±»åçš„æ•°æ®é›†çš„ç†µï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å¢åŠ ä¿¡æ¯ã€‚è¿™å°±è¦ç”¨åˆ°ä¿¡æ¯å¢ç›Šçš„æ¦‚å¿µäº†ã€‚</p><p>é‚£ç©¶ç«Ÿä»€ä¹ˆæ˜¯ä¿¡æ¯å¢ç›Šå‘¢ï¼Ÿå…ˆè¦å¼•å…¥ä¸€ä¸ªæ¦‚å¿µâ€”â€”æ¡ä»¶ç†µï¼Œå¦‚æœç†µå¯ä»¥ä»£è¡¨æ•´ä¸ªæ•°æ®é›†çš„æ··ä¹±ç¨‹åº¦ï¼Œé‚£ä¹ˆæ¡ä»¶ç†µå°±å¯ä»¥ç”¨æ¥æè¿°æŸä¸ªç‰¹å¾çš„æ··ä¹±ç¨‹åº¦ã€‚ä¿¡æ¯å¢ç›Šå’Œä¸¤è€…çš„å…³ç³»å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4372317ac62c45fa823bd3dff015fb1abbdd6a5c34e243d8bc84931c590323a9" width="250" hegiht="" ></center><p>å› ä¸ºä¿¡æ¯å¢ç›Š &#x3D; æ€»çš„ä¿¡æ¯ç†µ - æŸä¸ªç‰¹å¾çš„ä¿¡æ¯ç†µï¼Œä¹Ÿå°±æ˜¯è¯´æ˜ï¼Œä¸€ä¸ªæ•°æ®é›†çš„ç†µæ˜¯ä¸€å®šçš„ï¼Œå“ªä¸ªç‰¹å¾çš„ç†µè¶Šå°ï¼Œæœ€åçš„ä¿¡æ¯å¢ç›Šæ•ˆæœè¶Šå¥½ã€‚ç°åœ¨æˆ‘ä»¬å¾—åˆ°çš„æ¦‚ç‡å‘é‡ä¸º$(0.1,0.2,0.7)$ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ç‹—å¯¹åº”çš„ä¿¡æ¯å¢ç›Šæ•ˆæœæœ€å¥½ï¼Œä½¿ç”¨å…¶ç”¨æ¥åšæ‰€è°“â€œå…¨å±€â€çš„ç‰¹å¾é€‰æ‹©ã€‚</p><h3 id="ã€5-æ¨¡å‹é¢„æµ‹å’Œè¯„ä¼°ã€‘"><a href="#ã€5-æ¨¡å‹é¢„æµ‹å’Œè¯„ä¼°ã€‘" class="headerlink" title="ã€5.æ¨¡å‹é¢„æµ‹å’Œè¯„ä¼°ã€‘"></a><strong>ã€5.æ¨¡å‹é¢„æµ‹å’Œè¯„ä¼°ã€‘</strong></h3><p>åœ¨è®­ç»ƒsoftmaxå›å½’æ¨¡å‹åï¼Œç»™å‡ºä»»ä½•æ ·æœ¬ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥é¢„æµ‹æ¯ä¸ªè¾“å‡ºç±»åˆ«çš„æ¦‚ç‡ã€‚é€šå¸¸æˆ‘ä»¬ä½¿ç”¨é¢„æµ‹æ¦‚ç‡æœ€é«˜çš„ç±»åˆ«ä½œä¸ºè¾“å‡ºç±»åˆ«ã€‚å¦‚æœé¢„æµ‹ä¸å®é™…ç±»åˆ«ï¼ˆæ ‡ç­¾ï¼‰ä¸€è‡´ï¼Œåˆ™é¢„æµ‹æ˜¯æ­£ç¡®çš„ã€‚åœ¨æ¥ä¸‹æ¥çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<strong>ç²¾åº¦ï¼ˆaccuracyï¼‰</strong> æ¥è¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚ç²¾åº¦ç­‰äºæ­£ç¡®é¢„æµ‹æ•°ä¸é¢„æµ‹æ€»æ•°ä¹‹é—´çš„æ¯”ç‡ã€‚</p><h2 id="ä¸‰ã€å›¾åƒåˆ†ç±»æ•°æ®é›†"><a href="#ä¸‰ã€å›¾åƒåˆ†ç±»æ•°æ®é›†" class="headerlink" title="ä¸‰ã€å›¾åƒåˆ†ç±»æ•°æ®é›†"></a><strong>ä¸‰ã€å›¾åƒåˆ†ç±»æ•°æ®é›†</strong></h2><p>ğŸ”–<code>sec_fashion_mnist</code></p><p>æœ¬ç« æˆ‘ä»¬ä½¿ç”¨<code>Fashion-MNIST</code>æ•°æ®é›†æ¥æ¼”ç¤ºåˆ†ç±»æ¨¡å‹å®ç°çš„åŸºæœ¬æµç¨‹ã€‚Fashion-MNISTæ•°æ®é›†åŒ…å«äº†10ä¸ªç±»åˆ«çš„å›¾åƒï¼Œåˆ†åˆ«æ˜¯ï¼št-shirtï¼ˆTæ¤ï¼‰ï¼Œtrouserï¼ˆç‰›ä»”è£¤ï¼‰ï¼Œpulloverï¼ˆå¥—è¡«ï¼‰ï¼Œdressï¼ˆè£™å­ï¼‰ï¼Œcoatï¼ˆå¤–å¥—ï¼‰ï¼Œsandalï¼ˆå‡‰é‹ï¼‰ï¼Œshirtï¼ˆè¡¬è¡«ï¼‰ï¼Œsneakerï¼ˆè¿åŠ¨é‹ï¼‰ï¼Œbagï¼ˆåŒ…ï¼‰ï¼Œankle bootï¼ˆçŸ­é´ï¼‰ã€‚æ¯ä¸ªè¾“å…¥å›¾åƒçš„é«˜åº¦å’Œå®½åº¦å‡ä¸º28åƒç´ ï¼Œç”±ç°åº¦å›¾åƒç»„æˆï¼Œå…¶é€šé“æ•°ä¸º1ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/41ea426f24874702876699bf01c4cd52ae5db1a9a3ab4153b2aeba5e0a3180ad" width="400" hegiht="" ></center><center>å›¾3ï¼šæœè£…åˆ†ç±»æ•°æ®é›† </center><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> mod</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">from</span> paddle.vision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> TensorDataset, DataLoader</span><br></pre></td></tr></table></figure><h3 id="1-è¯»å–æ•°æ®é›†"><a href="#1-è¯»å–æ•°æ®é›†" class="headerlink" title="1.è¯»å–æ•°æ®é›†"></a><strong>1.è¯»å–æ•°æ®é›†</strong></h3><p>æˆ‘ä»¬å¯ä»¥[<strong>é€šè¿‡æ¡†æ¶ä¸­çš„å†…ç½®å‡½æ•°å°†Fashion-MNISTæ•°æ®é›†ä¸‹è½½å¹¶è¯»å–åˆ°å†…å­˜ä¸­</strong>]ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡ToTensorå®ä¾‹å°†å›¾åƒæ•°æ®ä»PILç±»å‹å˜æ¢æˆ32ä½æµ®ç‚¹æ•°æ ¼å¼ï¼Œ</span></span><br><span class="line"><span class="comment"># å¹¶é™¤ä»¥255ä½¿å¾—æ‰€æœ‰åƒç´ çš„æ•°å€¼å‡åœ¨0åˆ°1ä¹‹é—´</span></span><br><span class="line">trans = transforms.ToTensor() <span class="comment"># å›¾åƒé¢„å¤„ç†tensor(å°†è¯»å…¥è¿›æ¥çš„æ•°æ®è½¬æ¢ä¸ºå¼ é‡çš„å½¢å¼)</span></span><br><span class="line"><span class="comment"># è½¬æ¢ä¸ºå¼ é‡ï¼š ä¸€ä¸ªæ˜¯å°†é€šé“æ•°æå‰ï¼›ä¸€ä¸ªæ˜¯å°†0~255çš„å–å€¼è½¬æ¢ä¸º0~1çš„å–å€¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¥ç»ç½‘ç»œè¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯å¼ é‡è¿™ç§æ•°å€¼å½¢å¼å­˜åœ¨çš„</span></span><br><span class="line"><span class="comment"># ä¸€ä¸ªæ ‡é‡ï¼šä¸€ç»´å¼ é‡</span></span><br><span class="line"><span class="comment"># ä¸€ä¸ªæ•°ç»„ï¼šäºŒç»´å¼ é‡</span></span><br><span class="line"><span class="comment"># ä¸€å¼ å›¾ç‰‡ï¼›ä¸‰ç»´å¼ é‡</span></span><br><span class="line"><span class="comment"># å¤šå¼ å›¾ç‰‡ï¼šå››ç»´å¼ é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢æ˜¯è°ƒç”¨ä»–APIæ¥å£ï¼Œå°†æ•°æ®å¯¼å…¥è¿›æ¥ï¼Œå¹¶ä¸‹è½½åˆ°å†…å­˜å½“ä¸­</span></span><br><span class="line">mnist_train = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;train&#x27;</span>, transform=trans, download=<span class="literal">True</span>)<span class="comment">#è®­ç»ƒé›† </span></span><br><span class="line">mnist_test = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;test&#x27;</span>, transform=trans, download=<span class="literal">True</span>)<span class="comment">#æµ‹è¯•é›†</span></span><br></pre></td></tr></table></figure><p>Fashion-MNISTç”±10ä¸ªç±»åˆ«çš„å›¾åƒç»„æˆï¼Œæ¯ä¸ªç±»åˆ«ç”±<strong>è®­ç»ƒæ•°æ®é›†ï¼ˆtrain datasetï¼‰</strong> ä¸­çš„6000å¼ å›¾åƒå’Œ<strong>æµ‹è¯•æ•°æ®é›†ï¼ˆtest datasetï¼‰</strong> ä¸­çš„1000å¼ å›¾åƒç»„æˆã€‚å› æ­¤ï¼Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†åˆ†åˆ«åŒ…å«60000å’Œ10000å¼ å›¾åƒã€‚æµ‹è¯•æ•°æ®é›†ä¸ä¼šç”¨äºè®­ç»ƒï¼Œåªç”¨äºè¯„ä¼°æ¨¡å‹æ€§èƒ½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(mnist_train), <span class="built_in">len</span>(mnist_test), mnist_train[<span class="number">0</span>][<span class="number">0</span>].shape)</span><br><span class="line"><span class="comment"># æ‰“å°ç»“æœï¼š[1,28,28]</span></span><br><span class="line"><span class="comment"># 1ï¼šè¡¨ç¤ºå•é€šé“ï¼Œç°è‰²å›¾ç‰‡ä¸ºå•é€šé“ï¼Œå½©è‰²å›¾ç‰‡ä¸ºçº¢ç»¿è“ä¸‰é€šé“ï¼Œå¦‚æœä¸ºå½©è‰²å›¾ç‰‡ï¼Œè¿™é‡Œå³ä¸º3</span></span><br><span class="line"><span class="comment"># 28ï¼šé«˜å’Œå®½</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mnist_train[<span class="number">0</span>]<span class="comment"># ç¬¬ä¸€ä¸ªæ ·æœ¬</span></span><br><span class="line"><span class="comment"># ä¸€ä¸ªæ ·æœ¬åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†: å›¾ç‰‡+æ‰€å±ç±»åˆ«ï¼ˆæ ‡ç­¾ï¼‰</span></span><br><span class="line">mnist_train[<span class="number">0</span>][<span class="number">0</span>] <span class="comment"># å›¾ç‰‡ ---&gt; x</span></span><br><span class="line">mnist_train[<span class="number">0</span>][<span class="number">1</span>] <span class="comment"># æ ‡ç­¾ ---&gt; y</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">æ­¤æ¨¡å‹å°±æ˜¯å°†xï¼Œyä¼ å…¥ç¥ç»ç½‘ç»œï¼Œ</span></span><br><span class="line"><span class="string">æœºå™¨è‡ªåŠ¨å­¦ä¹ xå’Œyï¼Œ</span></span><br><span class="line"><span class="string">ç„¶åå½“æˆ‘ä»¬ä¼ å…¥å…¶ä»–çš„xæ—¶ï¼Œ</span></span><br><span class="line"><span class="string">ä¼šè¿”å›ç»™æˆ‘ä»¬y</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å¯è§†åŒ–è¿™äº›æ ·æœ¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è¿”å›Fashion-MNISTæ•°æ®é›†çš„æ–‡æœ¬æ ‡ç­¾</span></span><br><span class="line"><span class="string">å°±æ˜¯å°†æ•°å­—æ ‡ç­¾åˆ©ç”¨æ•°ç»„è½¬æ¢ä¸ºæ–‡æœ¬æ ‡ç­¾</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_fashion_mnist_labels</span>(<span class="params">labels</span>):</span><br><span class="line">    text_labels = [<span class="string">&#x27;t-shirt&#x27;</span>, <span class="string">&#x27;trouser&#x27;</span>, <span class="string">&#x27;pullover&#x27;</span>, <span class="string">&#x27;dress&#x27;</span>, <span class="string">&#x27;coat&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;sandal&#x27;</span>, <span class="string">&#x27;shirt&#x27;</span>, <span class="string">&#x27;sneaker&#x27;</span>, <span class="string">&#x27;bag&#x27;</span>, <span class="string">&#x27;ankle boot&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> [text_labels[<span class="built_in">int</span>(i)] <span class="keyword">for</span> i <span class="keyword">in</span> labels]</span><br><span class="line">    </span><br><span class="line"><span class="string">&quot;&quot;&quot;ç»˜åˆ¶å›¾åƒåˆ—è¡¨&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_images</span>(<span class="params">imgs, num_rows, num_cols, titles=<span class="literal">None</span>, scale=<span class="number">1.5</span></span>):</span><br><span class="line">    figsize = (num_cols * scale, num_rows * scale)</span><br><span class="line">    _, axes = plt.subplots(num_rows, num_cols, figsize=figsize)</span><br><span class="line">    axes = axes.flatten()</span><br><span class="line">    <span class="keyword">for</span> i, (ax, img) <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">zip</span>(axes, imgs)):</span><br><span class="line">        <span class="keyword">if</span> paddle.is_tensor(img):</span><br><span class="line">            <span class="comment"># å›¾ç‰‡å¼ é‡</span></span><br><span class="line">            ax.imshow(img.numpy())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># PILå›¾ç‰‡</span></span><br><span class="line">            ax.imshow(img)</span><br><span class="line">        ax.axes.get_xaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        ax.axes.get_yaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">if</span> titles:</span><br><span class="line">            ax.set_title(titles[i])</span><br><span class="line">    <span class="keyword">return</span> axes</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯è®­ç»ƒæ•°æ®é›†ä¸­å‰[<strong>å‡ ä¸ªæ ·æœ¬çš„å›¾åƒåŠå…¶ç›¸åº”çš„æ ‡ç­¾</strong>]ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X, y = <span class="built_in">next</span>(<span class="built_in">iter</span>(DataLoader(mnist_train, batch_size=<span class="number">18</span>)))</span><br><span class="line">show_images(X.reshape((<span class="number">18</span>, <span class="number">28</span>, <span class="number">28</span>)), <span class="number">2</span>, <span class="number">9</span>, titles=get_fashion_mnist_labels(y));</span><br></pre></td></tr></table></figure><h3 id="2-è¯»å–å°æ‰¹é‡"><a href="#2-è¯»å–å°æ‰¹é‡" class="headerlink" title="2.è¯»å–å°æ‰¹é‡"></a><strong>2.è¯»å–å°æ‰¹é‡</strong></h3><p>ä¸ºäº†ä½¿æˆ‘ä»¬åœ¨è¯»å–è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ—¶æ›´å®¹æ˜“ï¼Œæˆ‘ä»¬ä½¿ç”¨å†…ç½®çš„æ•°æ®è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯ä»é›¶å¼€å§‹åˆ›å»ºã€‚ å›é¡¾ä¸€ä¸‹ï¼Œåœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæ•°æ®åŠ è½½å™¨æ¯æ¬¡éƒ½ä¼šè¯»å–ä¸€å°æ‰¹é‡æ•°æ®ï¼Œå¤§å°ä¸º<code>batch_size</code>ã€‚ é€šè¿‡å†…ç½®æ•°æ®è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥éšæœºæ‰“ä¹±äº†æ‰€æœ‰æ ·æœ¬ï¼Œä»è€Œæ— åè§åœ°è¯»å–å°æ‰¹é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">batch_size = <span class="number">256</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_dataloader_workers</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä½¿ç”¨4ä¸ªè¿›ç¨‹æ¥è¯»å–æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span> <span class="comment"># æ ¹æ®CPUæ¥é€‰æ‹©</span></span><br><span class="line"><span class="comment"># DataLoaderè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨æ ¹æ® batch_sampler ç»™å®šçš„é¡ºåºè¿­ä»£ä¸€æ¬¡ç»™å®šçš„ dataset</span></span><br><span class="line"><span class="comment"># æ¯æ¬¡è¯»å–256ä¸ªæ ·æœ¬</span></span><br><span class="line">train_iter = DataLoader(mnist_train, batch_size=batch_size, shuffle=<span class="literal">True</span>,</span><br><span class="line">                             num_workers=get_dataloader_workers())</span><br></pre></td></tr></table></figure><h3 id="3-æ•´åˆç»„ä»¶"><a href="#3-æ•´åˆç»„ä»¶" class="headerlink" title="3.æ•´åˆç»„ä»¶"></a><strong>3.æ•´åˆç»„ä»¶</strong></h3><p>ç°åœ¨æˆ‘ä»¬[<strong>å®šä¹‰<code>load_data_fashion_mnist</code>å‡½æ•°</strong>]ï¼Œç”¨äºè·å–å’Œè¯»å–Fashion-MNISTæ•°æ®é›†ã€‚è¿™ä¸ªå‡½æ•°è¿”å›è®­ç»ƒé›†å’ŒéªŒè¯é›†çš„æ•°æ®è¿­ä»£å™¨ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªå‡½æ•°è¿˜æ¥å—ä¸€ä¸ªå¯é€‰å‚æ•°<code>resize</code>ï¼Œç”¨æ¥å°†å›¾åƒå¤§å°è°ƒæ•´ä¸ºå¦ä¸€ç§å½¢çŠ¶ï¼Œæ–¹ä¾¿é€‚åº”æ›´å¤šçš„å›¾å½¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_data_fashion_mnist</span>(<span class="params">batch_size, resize=<span class="literal">None</span></span>):  <span class="comment">#@save</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸‹è½½Fashion-MNISTæ•°æ®é›†ï¼Œç„¶åå°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­&quot;&quot;&quot;</span></span><br><span class="line">    trans = [transforms.ToTensor()]</span><br><span class="line">    <span class="keyword">if</span> resize:<span class="comment"># é€‚ç”¨äºæ›´å¤šå°ºå¯¸çš„å›¾åƒ</span></span><br><span class="line">        trans.insert(<span class="number">0</span>, transforms.Resize(resize))</span><br><span class="line">    trans = transforms.Compose(trans)</span><br><span class="line">    mnist_train = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;train&#x27;</span>, transform=trans, download=<span class="literal">True</span>)<span class="comment">#è®­ç»ƒé›†</span></span><br><span class="line">    mnist_test = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;test&#x27;</span>, transform=trans, download=<span class="literal">True</span>)<span class="comment">#æµ‹è¯•é›†</span></span><br><span class="line">    <span class="keyword">return</span> (DataLoader(mnist_train, batch_size=batch_size, shuffle=<span class="literal">True</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()),</span><br><span class="line">            DataLoader(mnist_test, batch_size=batch_size, shuffle=<span class="literal">False</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()))</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡æŒ‡å®š<code>resize</code>å‚æ•°æ¥æµ‹è¯•<code>load_data_fashion_mnist</code>å‡½æ•°çš„å›¾åƒå¤§å°è°ƒæ•´åŠŸèƒ½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">train_iter, test_iter = load_data_fashion_mnist(<span class="number">64</span>, resize=<span class="number">32</span>)</span><br><span class="line"><span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter():</span><br><span class="line">    <span class="built_in">print</span>(X.shape, X.dtype, y.shape, y.dtype)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(X[<span class="number">0</span>],y[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨å·²ç»å‡†å¤‡å¥½ä½¿ç”¨Fashion-MNISTæ•°æ®é›†ï¼Œä¾¿äºä¸‹é¢çš„ç« èŠ‚è°ƒç”¨æ¥è¯„ä¼°å„ç§åˆ†ç±»ç®—æ³•ã€‚</p><h2 id="å››ã€softmaxå›å½’çš„ä»é›¶å¼€å§‹å®ç°"><a href="#å››ã€softmaxå›å½’çš„ä»é›¶å¼€å§‹å®ç°" class="headerlink" title="å››ã€softmaxå›å½’çš„ä»é›¶å¼€å§‹å®ç°"></a><strong>å››ã€softmaxå›å½’çš„ä»é›¶å¼€å§‹å®ç°</strong></h2><p>ğŸ”–<code>sec_softmax_scratch</code></p><p>(å°±åƒæˆ‘ä»¬ä»é›¶å¼€å§‹å®ç°çº¿æ€§å›å½’ä¸€æ ·ï¼Œæˆ‘ä»¬è®¤ä¸ºsoftmaxå›å½’ä¹Ÿæ˜¯é‡è¦çš„åŸºç¡€ï¼Œå› æ­¤ä½ åº”è¯¥çŸ¥é“å®ç°softmaxå›å½’çš„ç»†èŠ‚ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†ä½¿ç”¨åˆšåˆšåœ¨ :numref:<code>sec_fashion_mnist</code>ä¸­å¼•å…¥çš„Fashion-MNISTæ•°æ®é›†ï¼Œå¹¶è®¾ç½®æ•°æ®è¿­ä»£å™¨çš„æ‰¹é‡å¤§å°ä¸º256ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy.core.fromnumeric <span class="keyword">import</span> partition</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> IPython <span class="keyword">import</span> display</span><br><span class="line"><span class="keyword">from</span> paddle.fluid.layers.nn <span class="keyword">import</span> pad</span><br><span class="line"><span class="keyword">from</span> paddle.tensor.linalg <span class="keyword">import</span> cross</span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> vision</span><br><span class="line"><span class="keyword">from</span> paddle.vision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> TensorDataset, DataLoader</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure><h3 id="ã€1-è¯»å–æ•°æ®é›†ã€‘"><a href="#ã€1-è¯»å–æ•°æ®é›†ã€‘" class="headerlink" title="ã€1.è¯»å–æ•°æ®é›†ã€‘"></a><strong>ã€1.è¯»å–æ•°æ®é›†ã€‘</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_dataloader_workers</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä½¿ç”¨4ä¸ªè¿›ç¨‹æ¥è¯»å–æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data_fashion_mnist</span>(<span class="params">batch_size, resize=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸‹è½½Fashion-MNISTæ•°æ®é›†ï¼Œç„¶åå°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­&quot;&quot;&quot;</span></span><br><span class="line">    trans = [transforms.ToTensor()]</span><br><span class="line">    <span class="keyword">if</span> resize:</span><br><span class="line">        trans.insert(<span class="number">0</span>, transforms.Resize(resize))</span><br><span class="line">    trans = transforms.Compose(trans)</span><br><span class="line">    mnist_train = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;train&#x27;</span>, transform=trans, download=<span class="literal">True</span>)</span><br><span class="line">    mnist_test = vision.datasets.FashionMNIST(mode=<span class="string">&#x27;test&#x27;</span>, transform=trans, download=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> (DataLoader(mnist_train, batch_size=batch_size, shuffle=<span class="literal">True</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()),</span><br><span class="line">            DataLoader(mnist_test, batch_size=batch_size, shuffle=<span class="literal">False</span>,</span><br><span class="line">                            num_workers=get_dataloader_workers()))</span><br><span class="line"><span class="comment"># å°†è®­ç»ƒé›†å’Œæµ‹è¯•é›†éƒ½è®¾ç½®æˆè¿­ä»£å™¨ï¼Œä¸€ä¸ªæ–¹ä¾¿è®­ç»ƒï¼Œä¸€ä¸ªæ–¹ä¾¿æµ‹è¯•</span></span><br><span class="line">batch_size = <span class="number">256</span></span><br><span class="line">train_iter, test_iter = load_data_fashion_mnist(batch_size)</span><br></pre></td></tr></table></figure><h3 id="ã€2-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"><a href="#ã€2-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘" class="headerlink" title="ã€2.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"></a><strong>ã€2.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘</strong></h3><p>å’Œä¹‹å‰çº¿æ€§å›å½’çš„ä¾‹å­ä¸€æ ·ï¼Œè¿™é‡Œçš„æ¯ä¸ªæ ·æœ¬éƒ½å°†ç”¨å›ºå®šé•¿åº¦çš„å‘é‡è¡¨ç¤ºã€‚åŸå§‹æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ ·æœ¬éƒ½æ˜¯$28 \times 28$çš„å›¾åƒã€‚<br>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬[<strong>å°†å±•å¹³æ¯ä¸ªå›¾åƒï¼ŒæŠŠå®ƒä»¬çœ‹ä½œé•¿åº¦ä¸º784çš„å‘é‡</strong>]ï¼Œè¿™ä¸ªåšæ³•å¹¶ä¸æ˜¯æœ€å¥½çš„åšæ³•ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºèƒ½å¤Ÿåˆ©ç”¨å›¾åƒç©ºé—´ç»“æ„çš„ç‰¹å¾ï¼Œä½†ç°åœ¨æˆ‘ä»¬æš‚æ—¶åªæŠŠæ¯ä¸ªåƒç´ ä½ç½®çœ‹ä½œä¸€ä¸ªç‰¹å¾ã€‚</p><p>å›æƒ³ä¸€ä¸‹ï¼Œåœ¨softmaxå›å½’ä¸­ï¼Œæˆ‘ä»¬çš„è¾“å‡ºä¸ç±»åˆ«ä¸€æ ·å¤šã€‚(<strong>å› ä¸ºæˆ‘ä»¬çš„æ•°æ®é›†æœ‰10ä¸ªç±»åˆ«ï¼Œæ‰€ä»¥ç½‘ç»œè¾“å‡ºç»´åº¦ä¸º10</strong>)ã€‚å› æ­¤ï¼Œæƒé‡å°†æ„æˆä¸€ä¸ª$784 \times 10$çš„çŸ©é˜µï¼Œåç½®å°†æ„æˆä¸€ä¸ª$1 \times 10$çš„è¡Œå‘é‡ã€‚ä¸çº¿æ€§å›å½’ä¸€æ ·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–æˆ‘ä»¬çš„æƒé‡<code>W</code>ï¼Œåç½®åˆå§‹åŒ–ä¸º0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num_inputs = <span class="number">784</span> <span class="comment">#å°†å±•å¹³æ¯ä¸ªå›¾åƒï¼ŒæŠŠå®ƒä»¬çœ‹ä½œé•¿åº¦ä¸º784çš„å‘é‡</span></span><br><span class="line">num_outputs = <span class="number">10</span> <span class="comment">#åä¸ªç±»åˆ«</span></span><br><span class="line"><span class="comment">#åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">W = paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, shape=(num_inputs, num_outputs))</span><br><span class="line">W.stop_gradient = <span class="literal">False</span></span><br><span class="line">b = paddle.zeros(shape=[num_outputs])</span><br><span class="line">b.stop_gradient = <span class="literal">False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;W =&quot;</span>, W,<span class="string">&quot;\n\nb =&quot;</span>, b)</span><br></pre></td></tr></table></figure><h3 id="ã€3-å®šä¹‰æ¨¡å‹ã€‘"><a href="#ã€3-å®šä¹‰æ¨¡å‹ã€‘" class="headerlink" title="ã€3.å®šä¹‰æ¨¡å‹ã€‘"></a><strong>ã€3.å®šä¹‰æ¨¡å‹ã€‘</strong></h3><p>æ€»ç»“ä¸€ä¸‹ï¼Œå®ç°softmaxæ˜¯æŒ‡ï¼š æˆ‘ä»¬é¦–å…ˆå¯¹æ¯ä¸ªæœªè§„èŒƒåŒ–çš„é¢„æµ‹æ±‚å¹‚ï¼ˆæŒ‡æ•°å‡½æ•°çš„æ€§è´¨ï¼‰ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿è¾“å‡ºéè´Ÿã€‚ä¸ºäº†ç¡®ä¿æœ€ç»ˆè¾“å‡ºçš„æ€»å’Œä¸º1ï¼Œæˆ‘ä»¬å†å¯¹æ¯ä¸ªæ±‚å¹‚åçš„ç»“æœé™¤ä»¥å®ƒä»¬çš„æ€»å’Œï¼ˆç±»ä¼¼äºæ¦‚ç‡ï¼‰ã€‚åœ¨æŸ¥çœ‹ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™ä¸ªè¡¨è¾¾å¼ï¼š</p><p>$$\mathrm{softmax}(\mathbf{X})<em>{j} &#x3D; \frac{\exp(\mathbf{X}</em>{j})}{\sum_k \exp(\mathbf{X}_{k})}.$$</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e1a4fcb3fe154a4fb263300f51880367c51b0b949d334fe0aa906051e55909c4" width="600" hegiht="" ></center><center>å›¾4ï¼šsoftmaxçš„å®ç° </center><p>softmaxç›´ç™½æ¥è¯´å°±æ˜¯å°†åŸæ¥è¾“å‡ºå€¼é€šè¿‡softmaxå‡½æ•°ä¸€ä½œç”¨ï¼Œå°±æ˜ å°„æˆä¸º(0,1)çš„å€¼ï¼Œè€Œè¿™äº›å€¼çš„ç´¯å’Œä¸º1ï¼ˆæ»¡è¶³æ¦‚ç‡çš„æ€§è´¨ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†å®ƒç†è§£æˆæ¦‚ç‡ï¼Œåœ¨æœ€åé€‰å–è¾“å‡ºç»“ç‚¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€‰å–æ¦‚ç‡æœ€å¤§ï¼ˆä¹Ÿå°±æ˜¯å€¼å¯¹åº”æœ€å¤§çš„ï¼‰ç»“ç‚¹ï¼Œä½œä¸ºæˆ‘ä»¬çš„é¢„æµ‹ç›®æ ‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰softmaxæ“ä½œ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">softmax</span>(<span class="params">X</span>):</span><br><span class="line">    X_exp = paddle.exp(X)</span><br><span class="line">    partition = X_exp.<span class="built_in">sum</span>(<span class="number">1</span>, keepdim=<span class="literal">True</span>)<span class="comment"># dim=1ä»£è¡¨å¯¹è¡Œæ±‚å’Œï¼Œkeepdimè¡¨ç¤ºæ˜¯å¦éœ€è¦ä¿æŒè¾“å‡ºçš„ç»´åº¦ä¸è¾“å…¥ä¸€æ ·</span></span><br><span class="line">    <span class="keyword">return</span> X_exp / partition  <span class="comment"># è¿™é‡Œåº”ç”¨äº†å¹¿æ’­æœºåˆ¶</span></span><br></pre></td></tr></table></figure><p><strong>éªŒè¯softmaxå‡½æ•°</strong>ï¼šsoftmaxè¿ç®—æœ¬è´¨å°±æ˜¯å°†æ¯ä¸ªå…ƒç´ å˜æˆéè´Ÿæ•°ï¼Œä¸”æ¯ä¸€è¡Œå’Œä¸º1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = paddle.normal(<span class="number">0</span>, <span class="number">1</span>, (<span class="number">3</span>, <span class="number">5</span>))<span class="comment">#å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼Œä¸‰è¡Œäº”åˆ—çš„çŸ©é˜µx</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;åŸæ¥çš„x = &#x27;</span>,x)</span><br><span class="line">x_1 = softmax(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nsoftmaxåçš„ = &#x27;</span>,x_1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nsoftmaxåçš„æ¯ä¸€è¡Œçš„å€¼ = &#x27;</span>,x_1.<span class="built_in">sum</span>(<span class="number">1</span>))</span><br></pre></td></tr></table></figure><p>å®šä¹‰softmaxæ“ä½œåï¼Œæˆ‘ä»¬å¯ä»¥å®ç°softmaxå›å½’æ¨¡å‹ã€‚ä¸‹é¢çš„ä»£ç å®šä¹‰äº†è¾“å…¥å¦‚ä½•é€šè¿‡ç½‘ç»œæ˜ å°„åˆ°è¾“å‡ºã€‚æ³¨æ„ï¼Œå°†æ•°æ®ä¼ é€’åˆ°æ¨¡å‹ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>reshape</code>å‡½æ•°å°†æ¯å¼ åŸå§‹å›¾åƒå±•å¹³ä¸ºå‘é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">net</span>(<span class="params">X</span>):</span><br><span class="line">    <span class="keyword">return</span> softmax(paddle.matmul(X.reshape((-<span class="number">1</span>, W.shape[<span class="number">0</span>])), W) + b)</span><br><span class="line">        <span class="comment"># reshape(-1,1)è¡¨ç¤ºï¼ˆä»»æ„è¡Œï¼Œ1åˆ—ï¼‰,è¿™é‡Œä¼ é€’çš„æ˜¯batchå€¼</span></span><br></pre></td></tr></table></figure><h3 id="ã€4-å®šä¹‰æŸå¤±å‡½æ•°ã€‘"><a href="#ã€4-å®šä¹‰æŸå¤±å‡½æ•°ã€‘" class="headerlink" title="ã€4.å®šä¹‰æŸå¤±å‡½æ•°ã€‘"></a><strong>ã€4.å®šä¹‰æŸå¤±å‡½æ•°ã€‘</strong></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æ·±åº¦å­¦ä¹ ä¸­æœ€å¸¸è§çš„æŸå¤±å‡½æ•°ï¼Œå› ä¸ºç›®å‰åˆ†ç±»é—®é¢˜çš„æ•°é‡è¿œè¿œè¶…è¿‡å›å½’é—®é¢˜çš„æ•°é‡ã€‚</p><p>å›é¡¾ä¸€ä¸‹ï¼Œäº¤å‰ç†µé‡‡ç”¨çœŸå®æ ‡ç­¾çš„é¢„æµ‹æ¦‚ç‡çš„è´Ÿå¯¹æ•°ä¼¼ç„¶ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/a40b4658e3df457491c1101f9821168f600a89aa463941e0827ccfbdae2365a3" width="200" hegiht="" ></center><h4 id="äº¤å‰ç†µæŸå¤±å‡½æ•°è®¡ç®—æ¡ˆä¾‹"><a href="#äº¤å‰ç†µæŸå¤±å‡½æ•°è®¡ç®—æ¡ˆä¾‹" class="headerlink" title="äº¤å‰ç†µæŸå¤±å‡½æ•°è®¡ç®—æ¡ˆä¾‹"></a><strong>äº¤å‰ç†µæŸå¤±å‡½æ•°è®¡ç®—æ¡ˆä¾‹</strong></h4><p>å‡è®¾æœ‰ä¸€ä¸ª3åˆ†ç±»é—®é¢˜ï¼ŒæŸä¸ªæ ·ä¾‹çš„æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼ˆ1ï¼Œ 0ï¼Œ 0ï¼‰ï¼š</p><ul><li>ç”²æ¨¡å‹ç»è¿‡softmaxå›å½’ä¹‹åçš„é¢„æµ‹ç­”æ¡ˆæ˜¯ï¼ˆ0.5ï¼Œ 0.2ï¼Œ 0.3ï¼‰</li><li>ä¹™æ¨¡å‹ç»è¿‡softmaxå›å½’ä¹‹åçš„é¢„æµ‹ç­”æ¡ˆæ˜¯ï¼ˆ0.7ï¼Œ 0.1ï¼Œ 0.2ï¼‰</li></ul><p>å¸¦å…¥å…¬å¼å¯çŸ¥ï¼Œä¹™æ¨¡å‹çš„é¢„æµ‹ç»“æœè¦ä¼˜äºç”²æ¨¡å‹ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e3ed5ff9a22e449aac14d978409a62f3a679f5049e3b411da0f78d81220a25fa" width="400" hegiht="" ></center><center> å›¾5 ç”²ä¹™æ¨¡å‹çš„äº¤å‰ç†µæŸå¤± </center><p>ä¸‹é¢ï¼Œæˆ‘ä»¬<strong>åˆ›å»ºä¸€ä¸ªæ•°æ®æ ·æœ¬<code>y_hat</code>ï¼Œå…¶ä¸­åŒ…å«2ä¸ªæ ·æœ¬åœ¨3ä¸ªç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ï¼Œä»¥åŠå®ƒä»¬å¯¹åº”çš„æ ‡ç­¾<code>y</code>ã€‚</strong>æœ‰äº†<code>y</code>ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ç¬¬ä¸€ä¸ªæ ·æœ¬ä¸­ï¼Œç¬¬ä¸€ç±»æ˜¯æ­£ç¡®çš„é¢„æµ‹ï¼›è€Œåœ¨ç¬¬äºŒä¸ªæ ·æœ¬ä¸­ï¼Œç¬¬ä¸‰ç±»æ˜¯æ­£ç¡®çš„é¢„æµ‹ã€‚ç„¶å(<strong>ä½¿ç”¨<code>y</code>ä½œä¸º<code>y_hat</code>ä¸­æ¦‚ç‡çš„ç´¢å¼•</strong>)ï¼Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªæ ·æœ¬ä¸­ç¬¬ä¸€ä¸ªç±»çš„æ¦‚ç‡å’Œç¬¬äºŒä¸ªæ ·æœ¬ä¸­ç¬¬ä¸‰ä¸ªç±»çš„æ¦‚ç‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹é¢å®šä¹‰äº†ä¸¤ä¸ªæ ·æœ¬ï¼Œ0å’Œ2è¡¨ç¤ºåœ¨ç¬¬0ä½å’Œç¬¬2ä½æ˜¯çœŸå®çš„ç±»åˆ«</span></span><br><span class="line"><span class="comment"># 2ä¸ªæ ·æœ¬çš„æ­£ç¡®çš„æ ‡ç­¾ç´¢å¼•å€¼[1,0,0][0,0,1]</span></span><br><span class="line">y = paddle.to_tensor([<span class="number">0</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">y_hat = paddle.to_tensor([[<span class="number">0.1</span>,<span class="number">0.3</span>,<span class="number">0.6</span>], [<span class="number">0.1</span>,<span class="number">0.2</span>,<span class="number">0.7</span>]])<span class="comment">#2ä¸ªæ ·æœ¬åœ¨3ä¸ªç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢ä½¿ç”¨yä½œä¸ºy_hatä¸­æ¦‚ç‡çš„ç´¢å¼•ï¼Œå³å‘Šè¯‰y_hatä¹Ÿæ˜¯ç¬¬0ä½å’Œç¬¬2ä½</span></span><br><span class="line"><span class="comment"># è¿‡ç¨‹ä¸ºï¼šå–å‡ºyçš„ç¬¬0ä½ä¸º0ï¼Œyçš„ç¬¬ä¸€ä½ä¸º2ï¼Œæ‰€ä»¥å»é™¤y_hatçš„ç¬¬ä¸€ä½çš„ç¬¬0ä½å’Œç¬¬1ä½çš„ç¬¬2ä½ï¼Œé¡ºç€å–å³å¯</span></span><br><span class="line">y_hat[[<span class="number">0</span>,<span class="number">1</span>], y]</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬åªéœ€ä¸€è¡Œä»£ç å°±å¯ä»¥[<strong>å®ç°äº¤å‰ç†µæŸå¤±å‡½æ•°</strong>]ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªäº¤å‰ç†µæŸå¤±å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cross_entropy</span>(<span class="params">y_hat, y</span>):</span><br><span class="line">    y = y.reshape(shape=[y.shape[<span class="number">0</span>]])</span><br><span class="line">    <span class="keyword">return</span> - paddle.log(y_hat[<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="built_in">len</span>(y_hat))), y])</span><br><span class="line"></span><br><span class="line"><span class="comment">#è°ƒç”¨å‡½æ•°æµ‹è¯•</span></span><br><span class="line">cross_entropy(y_hat, y)<span class="comment">#åˆ†åˆ«ä¸ºæ ·æœ¬1å’Œæ ·æœ¬2çš„æŸå¤± </span></span><br></pre></td></tr></table></figure><h3 id="ã€5-åˆ†ç±»ç²¾åº¦ã€‘"><a href="#ã€5-åˆ†ç±»ç²¾åº¦ã€‘" class="headerlink" title="ã€5.åˆ†ç±»ç²¾åº¦ã€‘"></a><strong>ã€5.åˆ†ç±»ç²¾åº¦ã€‘</strong></h3><p>ç»™å®šé¢„æµ‹æ¦‚ç‡åˆ†å¸ƒ<code>y_hat</code>ï¼Œå½“æˆ‘ä»¬å¿…é¡»è¾“å‡º<strong>ç¡¬é¢„æµ‹ï¼ˆhard predictionï¼‰</strong> æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸é€‰æ‹©é¢„æµ‹æ¦‚ç‡æœ€é«˜çš„ç±»ã€‚å½“é¢„æµ‹ä¸æ ‡ç­¾åˆ†ç±»<code>y</code>ä¸€è‡´æ—¶ï¼Œå³æ˜¯æ­£ç¡®çš„ã€‚</p><p>åˆ†ç±»ç²¾åº¦å³æ­£ç¡®é¢„æµ‹æ•°é‡ä¸æ€»é¢„æµ‹æ•°é‡ä¹‹æ¯”ã€‚ä¸ºäº†è®¡ç®—ç²¾åº¦ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œã€‚é¦–å…ˆï¼Œå¦‚æœ<code>y_hat</code>æ˜¯çŸ©é˜µï¼Œé‚£ä¹ˆå‡å®šç¬¬äºŒä¸ªç»´åº¦å­˜å‚¨æ¯ä¸ªç±»çš„é¢„æµ‹åˆ†æ•°ã€‚æˆ‘ä»¬ä½¿ç”¨<code>argmax</code>è·å¾—æ¯è¡Œä¸­æœ€å¤§å…ƒç´ çš„ç´¢å¼•æ¥è·å¾—é¢„æµ‹ç±»åˆ«ã€‚<br>ç„¶åæˆ‘ä»¬å°†é¢„æµ‹ç±»åˆ«ä¸çœŸå®<code>y</code>å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚ç”±äºç­‰å¼è¿ç®—ç¬¦â€œ<code>==</code>â€å¯¹æ•°æ®ç±»å‹å¾ˆæ•æ„Ÿï¼Œå› æ­¤æˆ‘ä»¬å°†<code>y_hat</code>çš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºä¸<code>y</code>çš„æ•°æ®ç±»å‹ä¸€è‡´ã€‚ç»“æœæ˜¯ä¸€ä¸ªåŒ…å«0ï¼ˆé”™ï¼‰å’Œ1ï¼ˆå¯¹ï¼‰çš„å¼ é‡ã€‚æœ€åï¼Œæˆ‘ä»¬æ±‚å’Œä¼šå¾—åˆ°æ­£ç¡®é¢„æµ‹çš„æ•°é‡ã€‚</p><h4 id="é¢„æµ‹ç±»åˆ«ä¸çœŸå®ç±»åˆ«yè¿›è¡Œæ¯”è¾ƒ"><a href="#é¢„æµ‹ç±»åˆ«ä¸çœŸå®ç±»åˆ«yè¿›è¡Œæ¯”è¾ƒ" class="headerlink" title="é¢„æµ‹ç±»åˆ«ä¸çœŸå®ç±»åˆ«yè¿›è¡Œæ¯”è¾ƒ"></a><strong>é¢„æµ‹ç±»åˆ«ä¸çœŸå®ç±»åˆ«yè¿›è¡Œæ¯”è¾ƒ</strong></h4><p>æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„å˜é‡<code>y_hat</code>å’Œ<code>y</code>åˆ†åˆ«ä½œä¸ºé¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒå’Œæ ‡ç­¾ã€‚<br>å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ªæ ·æœ¬çš„é¢„æµ‹ç±»åˆ«æ˜¯2ï¼ˆè¯¥è¡Œçš„æœ€å¤§å…ƒç´ ä¸º0.6ï¼Œç´¢å¼•ä¸º2ï¼‰ï¼Œè¿™ä¸å®é™…æ ‡ç­¾0ä¸ä¸€è‡´ã€‚<br>ç¬¬äºŒä¸ªæ ·æœ¬çš„é¢„æµ‹ç±»åˆ«æ˜¯2ï¼ˆè¯¥è¡Œçš„æœ€å¤§å…ƒç´ ä¸º0.5ï¼Œç´¢å¼•ä¸º2ï¼‰ï¼Œè¿™ä¸å®é™…æ ‡ç­¾2ä¸€è‡´ã€‚<br>å› æ­¤ï¼Œè¿™ä¸¤ä¸ªæ ·æœ¬çš„åˆ†ç±»ç²¾åº¦ç‡ä¸º0.5ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ±‚ç²¾åº¦çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">accuracy</span>(<span class="params">y_hat, y</span>): </span><br><span class="line">    y = y.reshape(shape=[y.shape[<span class="number">0</span>]])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;y&#x27;</span>,y,y_hat)</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è®¡ç®—é¢„æµ‹æ­£ç¡®çš„æ•°é‡&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># åœ¨y_hatæ˜¯ä¸€ä¸ªäºŒç»´çŸ©é˜µä¸”æ¯ä¸€è¡Œ&gt;1ä¸ª çš„æƒ…å†µä¸‹æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment"># å°±æ˜¯ç¡®ä¿y_hatæœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šæ ·æœ¬ï¼Œè¿™æ ·æ‰èƒ½å¾—å‡ºå“ªä¸ªé¢„æµ‹æ­£ç¡®ï¼Œå“ªä¸ªé¢„æµ‹é”™è¯¯</span></span><br><span class="line">    <span class="comment"># ç¡®ä¿y_hatçš„æ¯ä¸ªæ ·æœ¬æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„ç±»åˆ«ï¼Œè¿™æ ·æ‰èƒ½æœ‰æ¯”è¾ƒï¼Œæ–¹ä¾¿å’Œyæ¯”è¾ƒï¼Œçœ‹é«˜çš„æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­ä¸€ä¸‹ç¬¦ä¸ç¬¦åˆç²¾åº¦è®¡ç®—çš„è¦æ±‚</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(y_hat.shape) &gt; <span class="number">1</span> <span class="keyword">and</span> y_hat.shape[<span class="number">1</span>] &gt; <span class="number">1</span>:</span><br><span class="line">        y_hat = y_hat.argmax(axis=<span class="number">1</span>)<span class="comment">#æ¯ä¸€è¡Œä¸­é¢„æµ‹å€¼æœ€å¤§çš„ä½œä¸ºy_hatç±»åˆ«</span></span><br><span class="line">        <span class="built_in">print</span>(y_hat)<span class="comment"># [2,2,1]</span></span><br><span class="line">        <span class="built_in">print</span>(y)<span class="comment"># [0,2,1]</span></span><br><span class="line">    <span class="comment"># cmpå‡½æ•°ç”¨äºæ¯”è¾ƒ2ä¸ªå¯¹è±¡</span></span><br><span class="line">    cmp = y_hat == y<span class="comment"># æ‰€ä»¥ç­”å¯¹äº†ä¸¤ä¸ª</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">float</span>(cmp.<span class="built_in">sum</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ï¼šæ±‚å‡ºé¢„æµ‹æ­£ç¡®çš„æ•°é‡ä¸æ¦‚ç‡</span></span><br><span class="line"><span class="built_in">print</span>(y_hat)</span><br><span class="line"><span class="built_in">print</span>(accuracy(y_hat, y),accuracy(y_hat, y)/<span class="built_in">len</span>(y))</span><br></pre></td></tr></table></figure><h4 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a><strong>æ‰©å±•</strong></h4><p>åˆšåˆšæˆ‘ä»¬æ˜¯å¯¹ä¸€ç»„æ•°æ®è¿›è¡Œäº†ç²¾åº¦çš„è¯„ä¼°ï¼ŒåŒæ ·ï¼Œå¯¹äºä»»æ„æ•°æ®è¿­ä»£å™¨<code>data_iter</code>å¯è®¿é—®çš„æ•°æ®é›†ï¼Œæˆ‘ä»¬å¯ä»¥è¯„ä¼°åœ¨ä»»æ„æ¨¡å‹<code>net</code>çš„ç²¾åº¦ã€‚</p><p>è¿™é‡Œå®šä¹‰ä¸€ä¸ªå®ç”¨ç¨‹åºç±»<code>Accumulator</code>ï¼Œç”¨äºå¯¹å¤šä¸ªå˜é‡è¿›è¡Œç´¯åŠ ã€‚åœ¨<code>evaluate_accuracy</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åœ¨<code>Accumulator</code>å®ä¾‹ä¸­åˆ›å»ºäº†2ä¸ªå˜é‡ï¼Œåˆ†åˆ«ç”¨äºå­˜å‚¨æ­£ç¡®é¢„æµ‹çš„æ•°é‡å’Œé¢„æµ‹çš„æ€»æ•°é‡ã€‚å½“æˆ‘ä»¬éå†æ•°æ®é›†æ—¶ï¼Œä¸¤è€…éƒ½å°†éšç€æ—¶é—´çš„æ¨ç§»è€Œç´¯åŠ ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Accumulator</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åœ¨nä¸ªå˜é‡ä¸Šç´¯åŠ &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * n</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, *args</span>):</span><br><span class="line">        self.data = [a + <span class="built_in">float</span>(b) <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(self.data, args)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = [<span class="number">0.0</span>] * <span class="built_in">len</span>(self.data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="keyword">return</span> self.data[idx]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">evaluate_accuracy</span>(<span class="params">net, data_iter</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è®¡ç®—åœ¨æŒ‡å®šæ•°æ®é›†ä¸Šæ¨¡å‹çš„ç²¾åº¦&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(net, paddle.nn.Layer):</span><br><span class="line">        net.<span class="built_in">eval</span>()  <span class="comment"># å°†æ¨¡å‹è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼</span></span><br><span class="line">    metric = Accumulator(<span class="number">2</span>)  <span class="comment"># æ­£ç¡®é¢„æµ‹æ•°ã€é¢„æµ‹æ€»æ•°</span></span><br><span class="line">    <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter:</span><br><span class="line">            y = paddle.squeeze(y)</span><br><span class="line">            metric.add(accuracy(net(X), y), y.numel())</span><br><span class="line">    <span class="keyword">return</span> metric[<span class="number">0</span>] / metric[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬ä½¿ç”¨éšæœºæƒé‡åˆå§‹åŒ–<code>net</code>æ¨¡å‹ï¼Œå› æ­¤è¯¥æ¨¡å‹çš„ç²¾åº¦åº”æ¥è¿‘äºéšæœºçŒœæµ‹ã€‚ä¾‹å¦‚åœ¨æœ‰10ä¸ªç±»åˆ«æƒ…å†µä¸‹çš„ç²¾åº¦ä¸º0.1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">evaluate_accuracy(net, test_iter)</span><br></pre></td></tr></table></figure><h3 id="ã€6-è®­ç»ƒã€‘"><a href="#ã€6-è®­ç»ƒã€‘" class="headerlink" title="ã€6.è®­ç»ƒã€‘"></a><strong>ã€6.è®­ç»ƒã€‘</strong></h3><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥è®­ç»ƒä¸€ä¸ªè¿­ä»£å‘¨æœŸã€‚ è¯·æ³¨æ„ï¼Œupdateræ˜¯æ›´æ–°æ¨¡å‹å‚æ•°çš„å¸¸ç”¨å‡½æ•°ï¼Œå®ƒæ¥å—æ‰¹é‡å¤§å°ä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">updater</span>(<span class="params">batch_size</span>):</span><br><span class="line">    <span class="keyword">return</span> sgd([W, b], lr, batch_size)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_epoch_ch3</span>(<span class="params">net, train_iter, loss, updater</span>):  <span class="comment">#@save</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è®­ç»ƒæ¨¡å‹ä¸€ä¸ªè¿­ä»£å‘¨æœŸ&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># å°†æ¨¡å‹è®¾ç½®ä¸ºè®­ç»ƒæ¨¡å¼</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(net, paddle.nn.Layer):</span><br><span class="line">        net.train()</span><br><span class="line">    <span class="comment"># è®­ç»ƒæŸå¤±æ€»å’Œã€è®­ç»ƒå‡†ç¡®åº¦æ€»å’Œã€æ ·æœ¬æ•°</span></span><br><span class="line">    metric = Accumulator(<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter():</span><br><span class="line">        <span class="comment"># print(&quot;X, y: &quot;, X, y)</span></span><br><span class="line">        <span class="comment"># è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°å‚æ•°</span></span><br><span class="line">        y_hat = net(X)</span><br><span class="line">        l = loss(y_hat, y)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(updater, paddle.optimizer.Optimizer):</span><br><span class="line">            updater.clear_grad()</span><br><span class="line">            l.<span class="built_in">sum</span>().backward()</span><br><span class="line">            updater.step()</span><br><span class="line">            <span class="comment"># print(W, b)</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># ä½¿ç”¨å®šåˆ¶çš„ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</span></span><br><span class="line">            l.<span class="built_in">sum</span>().backward()</span><br><span class="line">            W, b = updater(W, b, X.shape[<span class="number">0</span>])</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;updated W, b:&quot;</span>, W, b)</span><br><span class="line">            metric.add(<span class="built_in">float</span>(l.<span class="built_in">sum</span>()), accuracy(y_hat, y), y.numel())</span><br><span class="line">    <span class="comment"># è¿”å›è®­ç»ƒæŸå¤±å’Œè®­ç»ƒç²¾åº¦</span></span><br><span class="line">    <span class="keyword">return</span> metric[<span class="number">0</span>] / metric[<span class="number">2</span>], metric[<span class="number">1</span>] / metric[<span class="number">2</span>]<span class="comment">#æ‰€æœ‰çš„lossç´¯åŠ /æ€»æ ·æœ¬æ•°ï¼Œåˆ†ç±»æ­£ç¡®çš„/æ€»æ ·æœ¬æ•°</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬[<strong>è®­ç»ƒæ¨¡å‹10ä¸ªè¿­ä»£å‘¨æœŸ</strong>]ã€‚<br>è¯·æ³¨æ„ï¼Œè¿­ä»£å‘¨æœŸï¼ˆ<code>num_epochs</code>ï¼‰å’Œå­¦ä¹ ç‡ï¼ˆ<code>lr</code>ï¼‰éƒ½æ˜¯å¯è°ƒèŠ‚çš„è¶…å‚æ•°ã€‚<br>é€šè¿‡æ›´æ”¹å®ƒä»¬çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥æé«˜æ¨¡å‹çš„åˆ†ç±»ç²¾åº¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">batch_size = <span class="number">256</span></span><br><span class="line">train_iter, test_iter = load_data_fashion_mnist(batch_size)</span><br><span class="line"></span><br><span class="line">num_inputs = <span class="number">784</span></span><br><span class="line">num_outputs = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">W = paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, shape=(num_inputs, num_outputs))</span><br><span class="line">W.stop_gradient = <span class="literal">False</span></span><br><span class="line">b = paddle.zeros(shape=[num_outputs])</span><br><span class="line">b.stop_gradient = <span class="literal">False</span></span><br><span class="line"><span class="comment">#print(&quot;W, b:&quot;, W, b)</span></span><br><span class="line"></span><br><span class="line">lr = <span class="number">0.2</span></span><br><span class="line">num_epochs = <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(net, paddle.nn.Layer):</span><br><span class="line">        net.train()</span><br><span class="line">    <span class="comment"># è®­ç»ƒæŸå¤±æ€»å’Œã€è®­ç»ƒå‡†ç¡®åº¦æ€»å’Œã€æ ·æœ¬æ•°</span></span><br><span class="line">    metric = Accumulator(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter():</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°å‚æ•°</span></span><br><span class="line">        y_hat = net(X)</span><br><span class="line">        <span class="comment"># print(&quot;X, y: &quot;, X.shape, y.shape, y_hat.shape)</span></span><br><span class="line">        l = cross_entropy(y_hat, y)</span><br><span class="line">        <span class="comment"># print(&quot;loss: &quot;, l.shape)</span></span><br><span class="line">        <span class="comment"># ä½¿ç”¨å®šåˆ¶çš„ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</span></span><br><span class="line">        l.<span class="built_in">sum</span>().backward()</span><br><span class="line">        <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">            W -= lr * W.grad / X.shape[<span class="number">0</span>]</span><br><span class="line">            b -= lr * b.grad / batch_size</span><br><span class="line">            W.clear_grad()</span><br><span class="line">            b.clear_grad()</span><br><span class="line">            W.stop_gradient = <span class="literal">False</span></span><br><span class="line">            b.stop_gradient = <span class="literal">False</span></span><br><span class="line">        <span class="comment"># print(&quot;updated W, b:&quot;, W, b)</span></span><br><span class="line">        metric.add(<span class="built_in">float</span>(l.<span class="built_in">sum</span>()), accuracy(y_hat, y), y.numel())</span><br><span class="line">    <span class="built_in">print</span>(metric[<span class="number">0</span>] / metric[<span class="number">2</span>], metric[<span class="number">1</span>] / metric[<span class="number">2</span>])<span class="comment">#æ‰€æœ‰çš„lossç´¯åŠ /æ€»æ ·æœ¬æ•°ï¼Œåˆ†ç±»æ­£ç¡®çš„/æ€»æ ·æœ¬æ•°</span></span><br></pre></td></tr></table></figure><h3 id="ã€7-é¢„æµ‹ã€‘"><a href="#ã€7-é¢„æµ‹ã€‘" class="headerlink" title="ã€7.é¢„æµ‹ã€‘"></a><strong>ã€7.é¢„æµ‹ã€‘</strong></h3><p>ç°åœ¨è®­ç»ƒå·²ç»å®Œæˆï¼Œæˆ‘ä»¬çš„æ¨¡å‹å·²ç»å‡†å¤‡å¥½å¯¹å›¾åƒè¿›è¡Œåˆ†ç±»é¢„æµ‹ã€‚ç»™å®šä¸€ç³»åˆ—å›¾åƒï¼Œæˆ‘ä»¬å°†æ¯”è¾ƒå®ƒä»¬çš„å®é™…æ ‡ç­¾ï¼ˆæ–‡æœ¬è¾“å‡ºçš„ç¬¬ä¸€è¡Œï¼‰å’Œæ¨¡å‹é¢„æµ‹ï¼ˆæ–‡æœ¬è¾“å‡ºçš„ç¬¬äºŒè¡Œï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;è¿”å›Fashion-MNISTæ•°æ®é›†çš„æ–‡æœ¬æ ‡ç­¾&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_fashion_mnist_labels</span>(<span class="params">labels</span>):</span><br><span class="line">    text_labels = [<span class="string">&#x27;t-shirt&#x27;</span>, <span class="string">&#x27;trouser&#x27;</span>, <span class="string">&#x27;pullover&#x27;</span>, <span class="string">&#x27;dress&#x27;</span>, <span class="string">&#x27;coat&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;sandal&#x27;</span>, <span class="string">&#x27;shirt&#x27;</span>, <span class="string">&#x27;sneaker&#x27;</span>, <span class="string">&#x27;bag&#x27;</span>, <span class="string">&#x27;ankle boot&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> [text_labels[<span class="built_in">int</span>(i)] <span class="keyword">for</span> i <span class="keyword">in</span> labels]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;ç»˜åˆ¶å›¾åƒåˆ—è¡¨&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_images</span>(<span class="params">imgs, num_rows, num_cols, titles=<span class="literal">None</span>, scale=<span class="number">1.5</span></span>):</span><br><span class="line">    figsize = (num_cols * scale, num_rows * scale)</span><br><span class="line">    _, axes = plt.subplots(num_rows, num_cols, figsize=figsize)</span><br><span class="line">    axes = axes.flatten()</span><br><span class="line">    <span class="keyword">for</span> i, (ax, img) <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">zip</span>(axes, imgs)):</span><br><span class="line">        <span class="keyword">if</span> paddle.is_tensor(img):</span><br><span class="line">            <span class="comment"># å›¾ç‰‡å¼ é‡</span></span><br><span class="line">            ax.imshow(img.numpy())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># PILå›¾ç‰‡</span></span><br><span class="line">            ax.imshow(img)</span><br><span class="line">        ax.axes.get_xaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        ax.axes.get_yaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">if</span> titles:</span><br><span class="line">            ax.set_title(titles[i])</span><br><span class="line">    <span class="keyword">return</span> axes</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">predict_ch3</span>(<span class="params">net, test_iter, n=<span class="number">10</span></span>):  <span class="comment">#@save</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;é¢„æµ‹æ ‡ç­¾ï¼ˆå®šä¹‰è§ç¬¬3ç« ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> test_iter:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    trues = get_fashion_mnist_labels(y)</span><br><span class="line">    preds = get_fashion_mnist_labels(net(X).argmax(axis=<span class="number">1</span>))</span><br><span class="line">    titles = [true +<span class="string">&#x27;\n&#x27;</span> + pred <span class="keyword">for</span> true, pred <span class="keyword">in</span> <span class="built_in">zip</span>(trues, preds)]</span><br><span class="line">    show_images(</span><br><span class="line">        X[<span class="number">0</span>:n].reshape((n, <span class="number">28</span>, <span class="number">28</span>)), <span class="number">1</span>, n, titles=titles[<span class="number">0</span>:n])</span><br><span class="line"></span><br><span class="line">predict_ch3(net, test_iter)</span><br></pre></td></tr></table></figure><h2 id="äº”ã€å°ç»“"><a href="#äº”ã€å°ç»“" class="headerlink" title="äº”ã€å°ç»“"></a><strong>äº”ã€å°ç»“</strong></h2><ul><li>softmaxå›å½’æ˜¯ä¸€ä¸ªå¤šç±»åˆ†ç±»æ¨¡å‹ã€‚</li><li>softmaxè¿ç®—è·å–ä¸€ä¸ªå‘é‡å¹¶å°†å…¶æ˜ å°„ä¸ºæ¦‚ç‡ã€‚</li><li>softmaxå›å½’é€‚ç”¨äºåˆ†ç±»é—®é¢˜ï¼Œå®ƒä½¿ç”¨äº†softmaxè¿ç®—ä¸­è¾“å‡ºç±»åˆ«çš„æ¦‚ç‡åˆ†å¸ƒã€‚</li><li>äº¤å‰ç†µæ˜¯ä¸€ä¸ªè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´å·®å¼‚çš„å¾ˆå¥½çš„åº¦é‡ã€‚</li><li>Fashion-MNISTæ˜¯ä¸€ä¸ªæœè£…åˆ†ç±»æ•°æ®é›†ï¼Œç”±10ä¸ªç±»åˆ«çš„å›¾åƒç»„æˆã€‚æˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚ä¸­ä½¿ç”¨æ­¤æ•°æ®é›†æ¥è¯„ä¼°å„ç§åˆ†ç±»ç®—æ³•ã€‚</li><li>æˆ‘ä»¬å°†é«˜åº¦$h$åƒç´ ï¼Œå®½åº¦$w$åƒç´ å›¾åƒçš„å½¢çŠ¶è®°ä¸º$h \times w$æˆ–ï¼ˆ$h$,$w$ï¼‰ã€‚</li><li>æ•°æ®è¿­ä»£å™¨æ˜¯è·å¾—æ›´é«˜æ€§èƒ½çš„å…³é”®ç»„ä»¶ã€‚ä¾é å®ç°è‰¯å¥½çš„æ•°æ®è¿­ä»£å™¨ï¼Œåˆ©ç”¨é«˜æ€§èƒ½è®¡ç®—æ¥é¿å…å‡æ…¢è®­ç»ƒè¿‡ç¨‹ã€‚</li><li>å€ŸåŠ©softmaxå›å½’ï¼Œæˆ‘ä»¬å¯ä»¥è®­ç»ƒå¤šåˆ†ç±»çš„æ¨¡å‹ã€‚</li><li>è®­ç»ƒsoftmaxå›å½’å¾ªç¯æ¨¡å‹ä¸è®­ç»ƒçº¿æ€§å›å½’æ¨¡å‹éå¸¸ç›¸ä¼¼ï¼šå…ˆè¯»å–æ•°æ®ï¼Œå†å®šä¹‰æ¨¡å‹å’ŒæŸå¤±å‡½æ•°ï¼Œç„¶åä½¿ç”¨ä¼˜åŒ–ç®—æ³•è®­ç»ƒæ¨¡å‹ã€‚å¤§å¤šæ•°å¸¸è§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹éƒ½æœ‰ç±»ä¼¼çš„è®­ç»ƒè¿‡ç¨‹ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_æ·±åº¦å­¦ä¹ æ€»è§ˆä¸æ¨¡å‹æ­å»º </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 2.1-çº¿æ€§å›å½’æ¨¡å‹çš„å®ç°</title>
      <link href="/2022/12/20/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A02.1-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/12/20/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A02.1-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿æ€§å›å½’"><a href="#çº¿æ€§å›å½’" class="headerlink" title="çº¿æ€§å›å½’"></a><strong>çº¿æ€§å›å½’</strong></h1><p>:label:<code>sec_linear_regression</code></p><p>å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ol><li>çº¿æ€§å›å½’çš„åŸºæœ¬å…ƒç´ ï¼šçº¿æ€§æ¨¡å‹ã€æŸå¤±å‡½æ•°ã€åŸºç¡€ä¼˜åŒ–ç®—æ³•ï¼›</li><li>æ­£æ€åˆ†å¸ƒçš„åŸºæœ¬æ¦‚å¿µï¼›</li><li>å®ç°çº¿æ€§å›å½’æ¨¡å‹çš„æ–¹æ³•ï¼›</li></ol><hr><p><strong>å›å½’ï¼ˆregressionï¼‰</strong> æ˜¯èƒ½ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå˜é‡ä¸å› å˜é‡ä¹‹é—´å…³ç³»å»ºæ¨¡çš„ä¸€ç±»æ–¹æ³•ã€‚<br>åœ¨è‡ªç„¶ç§‘å­¦å’Œç¤¾ä¼šç§‘å­¦é¢†åŸŸï¼Œå›å½’ç»å¸¸ç”¨æ¥è¡¨ç¤ºè¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å…³ç³»ã€‚</p><p>æœºå™¨å­¦ä¹ é¢†åŸŸä¸­çš„å¤§å¤šæ•°ä»»åŠ¡é€šå¸¸éƒ½ä¸<strong>é¢„æµ‹ï¼ˆpredictionï¼‰</strong> æœ‰å…³ã€‚<br>å½“æˆ‘ä»¬æƒ³é¢„æµ‹ä¸€ä¸ªæ•°å€¼æ—¶ï¼Œå°±ä¼šæ¶‰åŠåˆ°å›å½’é—®é¢˜ã€‚å¸¸è§çš„ä¾‹å­åŒ…æ‹¬ï¼šé¢„æµ‹ä»·æ ¼ï¼ˆæˆ¿å±‹ã€è‚¡ç¥¨ç­‰ï¼‰ã€é¢„æµ‹ä½é™¢æ—¶é—´ï¼ˆé’ˆå¯¹ä½é™¢ç—…äººç­‰ï¼‰ã€é¢„æµ‹éœ€æ±‚ï¼ˆé›¶å”®é”€é‡ç­‰ï¼‰ã€‚ä½†ä¸æ˜¯æ‰€æœ‰çš„é¢„æµ‹éƒ½æ˜¯å›å½’é—®é¢˜ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»åˆ†ç±»é—®é¢˜ã€‚åˆ†ç±»é—®é¢˜çš„ç›®æ ‡æ˜¯é¢„æµ‹æ•°æ®å±äºä¸€ç»„ç±»åˆ«ä¸­çš„å“ªä¸€ä¸ªã€‚</p><h2 id="ä¸€ã€çº¿æ€§å›å½’çš„åŸºæœ¬å…ƒç´ "><a href="#ä¸€ã€çº¿æ€§å›å½’çš„åŸºæœ¬å…ƒç´ " class="headerlink" title="ä¸€ã€çº¿æ€§å›å½’çš„åŸºæœ¬å…ƒç´ "></a>ä¸€ã€<strong>çº¿æ€§å›å½’çš„åŸºæœ¬å…ƒç´ </strong></h2><p><strong>çº¿æ€§å›å½’ï¼ˆlinear regressionï¼‰</strong> å¯ä»¥è¿½æº¯åˆ°19ä¸–çºªåˆï¼Œå®ƒåœ¨å›å½’çš„å„ç§æ ‡å‡†å·¥å…·ä¸­æœ€ç®€å•è€Œä¸”æœ€æµè¡Œã€‚</p><p>çº¿æ€§å›å½’åŸºäºå‡ ä¸ªç®€å•çš„å‡è®¾ï¼š<br><strong>é¦–å…ˆï¼Œå‡è®¾è‡ªå˜é‡$\mathbf{x}$å’Œå› å˜é‡$y$ä¹‹é—´çš„å…³ç³»æ˜¯çº¿æ€§çš„ï¼Œ<br>å³$y$å¯ä»¥è¡¨ç¤ºä¸º$\mathbf{x}$ä¸­å…ƒç´ çš„åŠ æƒå’Œï¼Œè¿™é‡Œé€šå¸¸å…è®¸åŒ…å«è§‚æµ‹å€¼çš„ä¸€äº›å™ªå£°ï¼›<br>å…¶æ¬¡ï¼Œæˆ‘ä»¬å‡è®¾ä»»ä½•å™ªå£°éƒ½æ¯”è¾ƒæ­£å¸¸ï¼Œå¦‚å™ªå£°éµå¾ªæ­£æ€åˆ†å¸ƒã€‚</strong></p><p>ä¸ºäº†è§£é‡Šçº¿æ€§å›å½’ï¼Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼šæˆ‘ä»¬å¸Œæœ›æ ¹æ®ä¸æˆ¿å±‹ç›¸å…³çš„ä¿¡æ¯æ¥ä¼°ç®—æˆ¿å±‹ä»·æ ¼ã€‚</p><p>è¿™é‡Œçš„ç›¸å…³ä¿¡æ¯åŒ…æ‹¬$ï¼šx1:å§å®¤ä¸ªæ•°ï¼Œx2:å«ç”Ÿé—´ä¸ªæ•°ï¼Œx3:å±…ä½é¢ç§¯$ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªå¼å­ï¼š$y&#x3D;w1x1+w2x2+w3x3+b$ã€‚</p><h3 id="ã€çº¿æ€§æ¨¡å‹ã€‘"><a href="#ã€çº¿æ€§æ¨¡å‹ã€‘" class="headerlink" title="ã€çº¿æ€§æ¨¡å‹ã€‘"></a><strong>ã€çº¿æ€§æ¨¡å‹ã€‘</strong></h3><p>:label:<code>subsec_linear_model</code></p><p>çº¿æ€§å‡è®¾å¦‚ä¸‹é¢çš„å¼å­ï¼š</p><p>$$y&#x3D;w1x1+w2x2+w3x3+b$$</p><p><strong>æƒé‡ï¼ˆweightï¼‰</strong>$w$å†³å®šäº†æ¯ä¸ªç‰¹å¾å¯¹æˆ‘ä»¬é¢„æµ‹å€¼çš„å½±å“ã€‚<br>$b$ç§°ä¸º<strong>åç½®ï¼ˆbiasï¼‰</strong>ã€<strong>åç§»é‡ï¼ˆoffsetï¼‰</strong> æˆ–<strong>æˆªè·ï¼ˆinterceptï¼‰</strong>ã€‚<br>åç½®æ˜¯æŒ‡å½“æ‰€æœ‰ç‰¹å¾éƒ½å–å€¼ä¸º0æ—¶ï¼Œé¢„æµ‹å€¼åº”è¯¥ä¸ºå¤šå°‘ï¼ˆåŸå…ˆå·²ç»å­˜åœ¨ï¼‰ã€‚åœ¨ç°å®çš„ä»»ä½•æƒ…å†µä¸‹æˆ‘ä»¬éƒ½éœ€è¦åç½®é¡¹ã€‚å¦‚æœæ²¡æœ‰åç½®é¡¹ï¼Œæˆ‘ä»¬æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å°†å—åˆ°é™åˆ¶ã€‚</p><p><strong>ç»™å®šä¸€ä¸ªæ•°æ®é›†ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯»æ‰¾æ¨¡å‹çš„æƒé‡$w$å’Œåç½®$b$ï¼Œä½¿å¾—æ ¹æ®æ¨¡å‹åšå‡ºçš„é¢„æµ‹å¤§ä½“ç¬¦åˆæ•°æ®é‡Œçš„çœŸå®ä»·æ ¼</strong>ã€‚</p><p>è€Œåœ¨<strong>æœºå™¨å­¦ä¹ (machine learning)</strong> é¢†åŸŸï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ˜¯é«˜ç»´æ•°æ®é›†ï¼Œå»ºæ¨¡æ—¶é‡‡ç”¨çº¿æ€§ä»£æ•°è¡¨ç¤ºæ³•ä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚<br>å½“æˆ‘ä»¬çš„è¾“å…¥åŒ…å«$d$ä¸ªç‰¹å¾æ—¶ï¼Œæˆ‘ä»¬å°†é¢„æµ‹ç»“æœ$\hat{y}$ï¼ˆé€šå¸¸ä½¿ç”¨â€œå°–è§’â€ç¬¦å·è¡¨ç¤º$y$çš„ä¼°è®¡å€¼ï¼‰è¡¨ç¤ºä¸ºï¼š</p><p>$$\hat{y} &#x3D; w_1  x_1 + â€¦ + w_d  x_d + b.$$</p><p>å°†æ‰€æœ‰ç‰¹å¾æ”¾åˆ°å‘é‡$\mathbf{x} \in \mathbb{R}^d$ä¸­ï¼Œå¹¶å°†æ‰€æœ‰æƒé‡æ”¾åˆ°å‘é‡$\mathbf{w} \in \mathbb{R}^d$ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<strong>ç‚¹ç§¯(scalar product)</strong> å½¢å¼æ¥ç®€æ´åœ°è¡¨è¾¾æ¨¡å‹ï¼š</p><p>$$\hat{y} &#x3D; \mathbf{w}Â· \mathbf{x} + b.$$</p><p>æ— è®ºæˆ‘ä»¬ä½¿ç”¨ä»€ä¹ˆæ‰‹æ®µæ¥è§‚å¯Ÿç‰¹å¾$\mathbf{X}$å’Œæ ‡ç­¾$\mathbf{y}$ï¼Œéƒ½å¯èƒ½ä¼šå‡ºç°å°‘é‡çš„<strong>è§‚æµ‹è¯¯å·®(observation error)</strong> ã€‚å› æ­¤ï¼Œå³ä½¿ç¡®ä¿¡ç‰¹å¾ä¸æ ‡ç­¾çš„æ½œåœ¨å…³ç³»æ˜¯çº¿æ€§çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåŠ å…¥ä¸€ä¸ªå™ªå£°é¡¹æ¥è€ƒè™‘è§‚æµ‹è¯¯å·®å¸¦æ¥çš„å½±å“ã€‚</p><p>åœ¨å¼€å§‹å¯»æ‰¾æœ€å¥½çš„<strong>æ¨¡å‹å‚æ•°ï¼ˆmodel parametersï¼‰</strong> $\mathbf{w}$å’Œ$b$ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸¤ä¸ªä¸œè¥¿ï¼š</p><ul><li>ï¼ˆ1ï¼‰ä¸€ç§æ¨¡å‹è´¨é‡çš„åº¦é‡æ–¹å¼ï¼›</li><li>1ï¼ˆ2ï¼‰ä¸€ç§èƒ½å¤Ÿæ›´æ–°æ¨¡å‹ä»¥æé«˜æ¨¡å‹é¢„æµ‹è´¨é‡çš„æ–¹æ³•ã€‚</li></ul><h3 id="ã€æŸå¤±å‡½æ•°â€”â€”ä¸€ç§æ¨¡å‹è´¨é‡çš„åº¦é‡æ–¹å¼ã€‘"><a href="#ã€æŸå¤±å‡½æ•°â€”â€”ä¸€ç§æ¨¡å‹è´¨é‡çš„åº¦é‡æ–¹å¼ã€‘" class="headerlink" title="ã€æŸå¤±å‡½æ•°â€”â€”ä¸€ç§æ¨¡å‹è´¨é‡çš„åº¦é‡æ–¹å¼ã€‘"></a><strong>ã€æŸå¤±å‡½æ•°â€”â€”ä¸€ç§æ¨¡å‹è´¨é‡çš„åº¦é‡æ–¹å¼ã€‘</strong></h3><p>åœ¨æˆ‘ä»¬å¼€å§‹è€ƒè™‘å¦‚ä½•ç”¨æ¨¡å‹<strong>æ‹Ÿåˆï¼ˆfitï¼‰</strong> æ•°æ®ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šä¸€ä¸ªæ‹Ÿåˆç¨‹åº¦çš„åº¦é‡ã€‚<strong>æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰èƒ½å¤Ÿé‡åŒ–ç›®æ ‡çš„å®é™…å€¼ä¸é¢„æµ‹å€¼ä¹‹é—´çš„å·®è·</strong>ã€‚é€šå¸¸æˆ‘ä»¬ä¼šé€‰æ‹©éè´Ÿæ•°ä½œä¸ºæŸå¤±ï¼Œä¸”æ•°å€¼è¶Šå°è¡¨ç¤ºæŸå¤±è¶Šå°ï¼Œå®Œç¾é¢„æµ‹æ—¶çš„æŸå¤±ä¸º0ã€‚</p><p>å›å½’é—®é¢˜ä¸­æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°æ˜¯**å¹³æ–¹è¯¯å·®å‡½æ•°(Squared error function)**ã€‚å½“æ ·æœ¬çš„é¢„æµ‹å€¼ä¸º$\hat{y}$ï¼Œå…¶ç›¸åº”çš„çœŸå®æ ‡ç­¾ä¸º$y$æ—¶ï¼Œå¹³æ–¹è¯¯å·®å¯ä»¥å®šä¹‰ä¸ºä»¥ä¸‹å…¬å¼ï¼š</p><p>$$Loss &#x3D; \frac{1}{2} \left(\hat{y} - y\right)^2.$$</p><p>å¸¸æ•°$\frac{1}{2}$ä¸ä¼šå¸¦æ¥æœ¬è´¨çš„å·®åˆ«ï¼Œä½†è¿™æ ·åœ¨å½¢å¼ä¸Šç¨å¾®ç®€å•ä¸€äº›ï¼ˆå› ä¸ºå½“æˆ‘ä»¬å¯¹æŸå¤±å‡½æ•°æ±‚å¯¼åå¸¸æ•°ç³»æ•°ä¸º1ï¼‰ã€‚</p><p>æˆ‘ä»¬ä¸ºä¸€ç»´æƒ…å†µä¸‹çš„å›å½’é—®é¢˜ç»˜åˆ¶å›¾åƒï¼š</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/98cc0446e71b414c8d18e3095faf83f84f910421aac34ba09121c306e9649f99" width="400" hegiht="" ></center> <center>å›¾1ï¼šä¸€ç»´çº¿æ€§å›å½’ </center><p>ç”±äºå¹³æ–¹è¯¯å·®å‡½æ•°ä¸­çš„äºŒæ¬¡æ–¹é¡¹ï¼Œä¼°è®¡å€¼$\hat{y}^{(i)}$å’Œè§‚æµ‹å€¼$y^{(i)}$ä¹‹é—´è¾ƒå¤§çš„å·®å¼‚å°†å¯¼è‡´æ›´å¤§çš„æŸå¤±ã€‚ä¸ºäº†åº¦é‡æ¨¡å‹åœ¨æ•´ä¸ªæ•°æ®é›†ä¸Šçš„è´¨é‡ï¼Œæˆ‘ä»¬éœ€è®¡ç®—åœ¨è®­ç»ƒé›†$n$ä¸ªæ ·æœ¬ä¸Šçš„æŸå¤±å‡å€¼ï¼ˆä¹Ÿç­‰ä»·äºæ±‚å’Œï¼‰ã€‚</p><p>$$L(\mathbf{w}, b) &#x3D;\frac{1}{n}\sum_{i&#x3D;1}^n l^{(i)}(\mathbf{w}, b) &#x3D;\frac{1}{n} \sum_{i&#x3D;1}^n \frac{1}{2}\left(\mathbf{w}Â· \mathbf{x}^{(i)} + b - y^{(i)}\right)^2.$$</p><p>åœ¨è®­ç»ƒæ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å¯»æ‰¾ä¸€ç»„å‚æ•°ï¼ˆ$\mathbf{w}^*, b^*$ï¼‰ï¼Œè¿™ç»„å‚æ•°èƒ½æœ€å°åŒ–åœ¨æ‰€æœ‰è®­ç»ƒæ ·æœ¬ä¸Šçš„æ€»æŸå¤±ã€‚å¦‚ä¸‹å¼ï¼š</p><p>$$\mathbf{w}^*, b^* &#x3D; \operatorname*{argmin}_{\mathbf{w}, b}\  L(\mathbf{w}, b).$$</p><h3 id="ã€åŸºç¡€ä¼˜åŒ–ç®—æ³•â€”â€”ä¸€ç§èƒ½å¤Ÿæ›´æ–°æ¨¡å‹ä»¥æé«˜æ¨¡å‹é¢„æµ‹è´¨é‡çš„æ–¹æ³•ã€‘"><a href="#ã€åŸºç¡€ä¼˜åŒ–ç®—æ³•â€”â€”ä¸€ç§èƒ½å¤Ÿæ›´æ–°æ¨¡å‹ä»¥æé«˜æ¨¡å‹é¢„æµ‹è´¨é‡çš„æ–¹æ³•ã€‘" class="headerlink" title="ã€åŸºç¡€ä¼˜åŒ–ç®—æ³•â€”â€”ä¸€ç§èƒ½å¤Ÿæ›´æ–°æ¨¡å‹ä»¥æé«˜æ¨¡å‹é¢„æµ‹è´¨é‡çš„æ–¹æ³•ã€‘"></a><strong>ã€åŸºç¡€ä¼˜åŒ–ç®—æ³•â€”â€”ä¸€ç§èƒ½å¤Ÿæ›´æ–°æ¨¡å‹ä»¥æé«˜æ¨¡å‹é¢„æµ‹è´¨é‡çš„æ–¹æ³•ã€‘</strong></h3><p>æˆ‘ä»¬ç”¨åˆ°ä¸€ç§åä¸º<strong>æ¢¯åº¦ä¸‹é™ï¼ˆgradient descentï¼‰</strong> çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å‡ ä¹å¯ä»¥ä¼˜åŒ–æ‰€æœ‰æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚å®ƒ<strong>é€šè¿‡ä¸æ–­åœ°åœ¨æŸå¤±å‡½æ•°é€’å‡çš„æ–¹å‘ä¸Šæ›´æ–°å‚æ•°æ¥é™ä½è¯¯å·®</strong>ã€‚</p><p>æ¢¯åº¦ä¸‹é™æœ€ç®€å•çš„ç”¨æ³•æ˜¯è®¡ç®—æŸå¤±å‡½æ•°ï¼ˆæ•°æ®é›†ä¸­æ‰€æœ‰æ ·æœ¬çš„æŸå¤±å‡å€¼ï¼‰å…³äºæ¨¡å‹å‚æ•°çš„å¯¼æ•°ï¼ˆåœ¨è¿™é‡Œä¹Ÿå¯ä»¥ç§°ä¸ºæ¢¯åº¦ï¼‰ã€‚<br>ä½†å®é™…ä¸­çš„æ‰§è¡Œå¯èƒ½ä¼šéå¸¸æ…¢ï¼šå› ä¸ºåœ¨æ¯ä¸€æ¬¡æ›´æ–°å‚æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»éå†æ•´ä¸ªæ•°æ®é›†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨æ¯æ¬¡éœ€è¦è®¡ç®—æ›´æ–°çš„æ—¶å€™éšæœºæŠ½å–ä¸€å°æ‰¹æ ·æœ¬ï¼Œè¿™ç§å˜ä½“å«åš<strong>å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆminibatch stochastic gradient descentï¼‰</strong>ã€‚</p><p>åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆéšæœºæŠ½æ ·ä¸€ä¸ªå°æ‰¹é‡$b$ï¼Œå®ƒæ˜¯ç”±å›ºå®šæ•°é‡çš„è®­ç»ƒæ ·æœ¬ç»„æˆçš„ã€‚ç„¶åï¼Œæˆ‘ä»¬è®¡ç®—å°æ‰¹é‡çš„å¹³å‡æŸå¤±å…³äºæ¨¡å‹å‚æ•°çš„å¯¼æ•°ï¼ˆä¹Ÿå¯ä»¥ç§°ä¸ºæ¢¯åº¦ï¼‰ã€‚æœ€åï¼Œæˆ‘ä»¬å°†æ¢¯åº¦ä¹˜ä»¥ä¸€ä¸ªé¢„å…ˆç¡®å®šçš„æ­£æ•°$\eta$ï¼Œå¹¶ä»å½“å‰å‚æ•°çš„å€¼ä¸­å‡æ‰ã€‚æˆ‘ä»¬ç”¨ä¸‹é¢çš„æ•°å­¦å…¬å¼æ¥è¡¨ç¤ºè¿™ä¸€æ›´æ–°è¿‡ç¨‹ï¼ˆ$\partial$è¡¨ç¤ºåå¯¼æ•°ï¼‰ï¼š</p><p>$$(\mathbf{w},b) \leftarrow (\mathbf{w},b) - \frac{\eta}{|\mathcal{B}|} \sum_{i \in \mathcal{B}} \partial_{(\mathbf{w},b)} l^{(i)}(\mathbf{w},b).$$</p><p>$b$è¡¨ç¤ºæ¯ä¸ªå°æ‰¹é‡ä¸­çš„æ ·æœ¬æ•°ï¼Œè¿™ä¹Ÿç§°ä¸º<strong>æ‰¹é‡å¤§å°ï¼ˆbatch sizeï¼‰</strong>ã€‚$\eta$è¡¨ç¤º<strong>å­¦ä¹ ç‡ã€æ­¥é•¿ï¼Œä¸€æ¬¡å­¦ä¹ è·¨è¶Šçš„é•¿åº¦ã€‘ï¼ˆlearning rateï¼‰</strong>ã€‚<br>æ‰¹é‡å¤§å°å’Œå­¦ä¹ ç‡çš„å€¼é€šå¸¸æ˜¯æ‰‹åŠ¨é¢„å…ˆæŒ‡å®šï¼Œè€Œä¸æ˜¯é€šè¿‡æ¨¡å‹è®­ç»ƒå¾—åˆ°çš„ã€‚è¿™äº›å¯ä»¥è°ƒæ•´ä½†ä¸åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ›´æ–°çš„å‚æ•°ç§°ä¸º<strong>è¶…å‚æ•°ï¼ˆhyperparameterï¼‰</strong>ã€‚</p><p><strong>è°ƒå‚ï¼ˆhyperparameter tuningï¼‰</strong> æ˜¯é€‰æ‹©è¶…å‚æ•°çš„è¿‡ç¨‹ã€‚è¶…å‚æ•°é€šå¸¸æ˜¯æˆ‘ä»¬æ ¹æ®è®­ç»ƒè¿­ä»£ç»“æœæ¥è°ƒæ•´çš„ï¼Œè€Œè®­ç»ƒè¿­ä»£ç»“æœæ˜¯åœ¨ç‹¬ç«‹çš„<strong>éªŒè¯æ•°æ®é›†ï¼ˆvalidation datasetï¼‰</strong> ä¸Šè¯„ä¼°å¾—åˆ°çš„ã€‚</p><p>åœ¨è®­ç»ƒäº†é¢„å…ˆç¡®å®šçš„è‹¥å¹²è¿­ä»£æ¬¡æ•°åï¼ˆæˆ–è€…ç›´åˆ°æ»¡è¶³æŸäº›å…¶ä»–åœæ­¢æ¡ä»¶åï¼‰ï¼Œæˆ‘ä»¬è®°å½•ä¸‹æ¨¡å‹å‚æ•°çš„ä¼°è®¡å€¼ï¼Œè¡¨ç¤ºä¸º$\hat{\mathbf{w}}, \hat{b}$ã€‚<br>ä½†æ˜¯ï¼Œ<strong>å³ä½¿æˆ‘ä»¬çš„å‡½æ•°ç¡®å®æ˜¯çº¿æ€§çš„ä¸”æ— å™ªå£°ï¼Œè¿™äº›ä¼°è®¡å€¼ä¹Ÿä¸ä¼šä½¿æŸå¤±å‡½æ•°çœŸæ­£åœ°è¾¾åˆ°æœ€å°å€¼ã€‚å› ä¸ºç®—æ³•ä¼šä½¿å¾—æŸå¤±å‘æœ€å°å€¼ç¼“æ…¢æ”¶æ•›ï¼Œä½†å´ä¸èƒ½åœ¨æœ‰é™çš„æ­¥æ•°å†…éå¸¸ç²¾ç¡®åœ°è¾¾åˆ°æœ€å°å€¼</strong>ã€‚</p><p>$$w0 \rightarrow wä¼˜$$</p><p>çº¿æ€§å›å½’æ°å¥½æ˜¯ä¸€ä¸ªåœ¨æ•´ä¸ªåŸŸä¸­åªæœ‰ä¸€ä¸ªæœ€å°å€¼çš„å­¦ä¹ é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºåƒæ·±åº¦ç¥ç»ç½‘ç»œè¿™æ ·å¤æ‚çš„æ¨¡å‹æ¥è¯´ï¼ŒæŸå¤±å¹³é¢ä¸Šé€šå¸¸åŒ…å«å¤šä¸ªæœ€å°å€¼ã€‚æ·±åº¦å­¦ä¹ å®è·µè€…å¾ˆå°‘ä¼šå»èŠ±è´¹å¤§åŠ›æ°”å¯»æ‰¾è¿™æ ·ä¸€ç»„å‚æ•°ï¼Œä½¿å¾—åœ¨è®­ç»ƒé›†ä¸Šçš„æŸå¤±è¾¾åˆ°æœ€å°ã€‚äº‹å®ä¸Šï¼Œæ›´éš¾åšåˆ°çš„æ˜¯æ‰¾åˆ°ä¸€ç»„å‚æ•°ï¼Œè¿™ç»„å‚æ•°èƒ½å¤Ÿåœ¨æˆ‘ä»¬ä»æœªè§è¿‡çš„æ•°æ®ä¸Šå®ç°è¾ƒä½çš„æŸå¤±ï¼Œè¿™ä¸€æŒ‘æˆ˜è¢«ç§°ä¸º<strong>æ³›åŒ–ï¼ˆgeneralizationï¼‰</strong>ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>ï¼ˆ1ï¼‰åˆå§‹åŒ–æ¨¡å‹å‚æ•°çš„å€¼ï¼Œå¦‚éšæœºåˆå§‹åŒ–ï¼›</li><li>ï¼ˆ2ï¼‰ä»æ•°æ®é›†ä¸­éšæœºæŠ½å–å°æ‰¹é‡æ ·æœ¬ä¸”åœ¨è´Ÿæ¢¯åº¦çš„æ–¹å‘ä¸Šæ›´æ–°å‚æ•°ï¼Œå¹¶ä¸æ–­è¿­ä»£è¿™ä¸€æ­¥éª¤ã€‚</li></ul><h2 id="äºŒã€æ­£æ€åˆ†å¸ƒä¸å¹³æ–¹æŸå¤±"><a href="#äºŒã€æ­£æ€åˆ†å¸ƒä¸å¹³æ–¹æŸå¤±" class="headerlink" title="äºŒã€æ­£æ€åˆ†å¸ƒä¸å¹³æ–¹æŸå¤±"></a>äºŒã€<strong>æ­£æ€åˆ†å¸ƒä¸å¹³æ–¹æŸå¤±</strong></h2><p>:label:<code>subsec_normal_distribution_and_squared_loss</code></p><p>æ­£æ€åˆ†å¸ƒå’Œçº¿æ€§å›å½’ä¹‹é—´çš„å…³ç³»å¾ˆå¯†åˆ‡ã€‚<br><strong>æ­£æ€åˆ†å¸ƒï¼ˆnormal distributionï¼‰</strong>ï¼Œä¹Ÿç§°ä¸º<strong>é«˜æ–¯åˆ†å¸ƒï¼ˆGaussian distributionï¼‰</strong>ï¼Œæœ€æ—©ç”±å¾·å›½æ•°å­¦å®¶é«˜æ–¯ï¼ˆGaussï¼‰åº”ç”¨äºå¤©æ–‡å­¦ç ”ç©¶ã€‚</p><p>ç®€å•çš„è¯´ï¼Œè‹¥éšæœºå˜é‡$x$å…·æœ‰å‡å€¼$\mu$å’Œæ–¹å·®$\sigma^2$ ï¼Œå…¶æ­£æ€åˆ†å¸ƒæ¦‚ç‡å¯†åº¦å‡½æ•°å¦‚ä¸‹ï¼š</p><p>$$p(x) &#x3D; \frac{1}{\sqrt{2 \pi \sigma^2}} \exp\left(-\frac{1}{2 \sigma^2} (x - \mu)^2\right).$$</p><p>ä¸‹é¢æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªPythonå‡½æ•°æ¥æ¼”ç¤ºæ­£æ€åˆ†å¸ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> IPython <span class="keyword">import</span> display</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">normal</span>(<span class="params">x, mu, sigma</span>):</span><br><span class="line">    p = <span class="number">1</span> / math.sqrt(<span class="number">2</span> * math.pi * sigma**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> p * np.exp(-<span class="number">0.5</span> / sigma**<span class="number">2</span> * (x - mu)**<span class="number">2</span>)</span><br></pre></td></tr></table></figure><pre><code>/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/matplotlib/__init__.py:107: DeprecationWarning: Using or importing the ABCs from &#39;collections&#39; instead of from &#39;collections.abc&#39; is deprecated, and in 3.8 it will stop working  from collections import MutableMapping/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/matplotlib/rcsetup.py:20: DeprecationWarning: Using or importing the ABCs from &#39;collections&#39; instead of from &#39;collections.abc&#39; is deprecated, and in 3.8 it will stop working  from collections import Iterable, Mapping/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/matplotlib/colors.py:53: DeprecationWarning: Using or importing the ABCs from &#39;collections&#39; instead of from &#39;collections.abc&#39; is deprecated, and in 3.8 it will stop working  from collections import Sized</code></pre><p>æˆ‘ä»¬ç°åœ¨å¯è§†åŒ–æ­£æ€åˆ†å¸ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">set_axes</span>(<span class="params">axes, xlabel, ylabel, xlim, ylim, xscale, yscale, legend</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è®¾ç½®matplotlibçš„è½´&quot;&quot;&quot;</span></span><br><span class="line">    axes.set_xlabel(xlabel)</span><br><span class="line">    axes.set_ylabel(ylabel)</span><br><span class="line">    axes.set_xscale(xscale)</span><br><span class="line">    axes.set_yscale(yscale)</span><br><span class="line">    axes.set_xlim(xlim)</span><br><span class="line">    axes.set_ylim(ylim)</span><br><span class="line">    <span class="keyword">if</span> legend:</span><br><span class="line">        axes.legend(legend)</span><br><span class="line">    axes.grid()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">use_svg_display</span>():  <span class="comment">#@save</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä½¿ç”¨svgæ ¼å¼åœ¨Jupyterä¸­æ˜¾ç¤ºç»˜å›¾&quot;&quot;&quot;</span></span><br><span class="line">    display.set_matplotlib_formats(<span class="string">&#x27;svg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_figsize</span>(<span class="params">figsize=(<span class="params"><span class="number">3.5</span>, <span class="number">2.5</span></span>)</span>):  <span class="comment">#@save</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è®¾ç½®matplotlibçš„å›¾è¡¨å¤§å°&quot;&quot;&quot;</span></span><br><span class="line">    use_svg_display()</span><br><span class="line">    plt.rcParams[<span class="string">&#x27;figure.figsize&#x27;</span>] = figsize</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot</span>(<span class="params">X, Y=<span class="literal">None</span>, xlabel=<span class="literal">None</span>, ylabel=<span class="literal">None</span>, legend=<span class="literal">None</span>, xlim=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">         ylim=<span class="literal">None</span>, xscale=<span class="string">&#x27;linear&#x27;</span>, yscale=<span class="string">&#x27;linear&#x27;</span>,</span></span><br><span class="line"><span class="params">         fmts=(<span class="params"><span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;m--&#x27;</span>, <span class="string">&#x27;g-.&#x27;</span>, <span class="string">&#x27;r:&#x27;</span></span>), figsize=(<span class="params"><span class="number">3.5</span>, <span class="number">2.5</span></span>), axes=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç»˜åˆ¶æ•°æ®ç‚¹&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> legend <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        legend = []</span><br><span class="line"></span><br><span class="line">    set_figsize(figsize)</span><br><span class="line">    axes = axes <span class="keyword">if</span> axes <span class="keyword">else</span> plt.gca()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœXæœ‰ä¸€ä¸ªè½´ï¼Œè¾“å‡ºTrue</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">has_one_axis</span>(<span class="params">X</span>):</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">hasattr</span>(X, <span class="string">&quot;ndim&quot;</span>) <span class="keyword">and</span> X.ndim == <span class="number">1</span> <span class="keyword">or</span> <span class="built_in">isinstance</span>(X, <span class="built_in">list</span>)</span><br><span class="line">                <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(X[<span class="number">0</span>], <span class="string">&quot;__len__&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> has_one_axis(X):</span><br><span class="line">        X = [X]</span><br><span class="line">    <span class="keyword">if</span> Y <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        X, Y = [[]] * <span class="built_in">len</span>(X), X</span><br><span class="line">    <span class="keyword">elif</span> has_one_axis(Y):</span><br><span class="line">        Y = [Y]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(X) != <span class="built_in">len</span>(Y):</span><br><span class="line">        X = X * <span class="built_in">len</span>(Y)</span><br><span class="line">    axes.cla()</span><br><span class="line">    <span class="keyword">for</span> x, y, fmt <span class="keyword">in</span> <span class="built_in">zip</span>(X, Y, fmts):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(x):</span><br><span class="line">            axes.plot(x, y, fmt)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            axes.plot(y, fmt)</span><br><span class="line">    set_axes(axes, xlabel, ylabel, xlim, ylim, xscale, yscale, legend)</span><br><span class="line"></span><br><span class="line">x = np.arange(-<span class="number">7</span>, <span class="number">7</span>, <span class="number">0.01</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><pre><code>[-7.   -6.99 -6.98 ...  6.97  6.98  6.99]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡å€¼å’Œæ ‡å‡†å·®å¯¹</span></span><br><span class="line">params = [(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">plot(x, [normal(x, mu, sigma) <span class="keyword">for</span> mu, sigma <span class="keyword">in</span> params], xlabel=<span class="string">&#x27;x&#x27;</span>,</span><br><span class="line">         ylabel=<span class="string">&#x27;p(x)&#x27;</span>, figsize=(<span class="number">4.5</span>, <span class="number">2.5</span>),</span><br><span class="line">         legend=[<span class="string">f&#x27;mean <span class="subst">&#123;mu&#125;</span>, std <span class="subst">&#123;sigma&#125;</span>&#x27;</span> <span class="keyword">for</span> mu, sigma <span class="keyword">in</span> params])</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/ipykernel_launcher.py:15: DeprecationWarning: `set_matplotlib_formats` is deprecated since IPython 7.23, directly use `matplotlib_inline.backend_inline.set_matplotlib_formats()`  from ipykernel import kernelapp as app/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/matplotlib/cbook/__init__.py:2349: DeprecationWarning: Using or importing the ABCs from &#39;collections&#39; instead of from &#39;collections.abc&#39; is deprecated, and in 3.8 it will stop working  if isinstance(obj, collections.Iterator):/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/matplotlib/cbook/__init__.py:2366: DeprecationWarning: Using or importing the ABCs from &#39;collections&#39; instead of from &#39;collections.abc&#39; is deprecated, and in 3.8 it will stop working  return list(data) if isinstance(data, collections.MappingView) else data</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/1.svg" alt="svg"></p><p>å°±åƒæˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œ<strong>å‡å€¼ä¼šäº§ç”Ÿæ²¿$x$è½´çš„åç§»ï¼Œæ–¹å·®å°†ä¼šå½±å“åˆ†å¸ƒä»¥åŠå³°å€¼</strong>ã€‚</p><p><strong>å‡æ–¹è¯¯å·®(Mean squared error function)</strong> æŸå¤±å‡½æ•°å¯ä»¥ç”¨äºçº¿æ€§å›å½’çš„ä¸€ä¸ªåŸå› æ˜¯ï¼šæˆ‘ä»¬å‡è®¾äº†è§‚æµ‹ä¸­åŒ…å«å™ªå£°ï¼Œå…¶ä¸­å™ªå£°æœä»æ­£æ€åˆ†å¸ƒã€‚å™ªå£°æ­£æ€åˆ†å¸ƒå¦‚ä¸‹å¼:</p><p>$$y &#x3D; \mathbf{w}Â· \mathbf{x} + b + \epsilon,$$</p><p>å…¶ä¸­ï¼Œ$\epsilon \sim \mathcal{N}(0, \sigma^2)$ã€‚</p><h3 id="æ­£æ€åˆ†å¸ƒ-vs-æ ‡å‡†æ­£æ€åˆ†å¸ƒ"><a href="#æ­£æ€åˆ†å¸ƒ-vs-æ ‡å‡†æ­£æ€åˆ†å¸ƒ" class="headerlink" title="æ­£æ€åˆ†å¸ƒ vs æ ‡å‡†æ­£æ€åˆ†å¸ƒ"></a>æ­£æ€åˆ†å¸ƒ vs æ ‡å‡†æ­£æ€åˆ†å¸ƒ</h3><p>åœ¨æ­£æ€åˆ†å¸ƒåˆ†å¸ƒä¸­ï¼Œæ ¹æ®å…¶æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œå¯ä»¥çŸ¥é“$Î¼$å†³å®šå…¶ä½ç½®ï¼Œè€Œ$Ïƒ$å†³å®šå¹…åº¦ï¼Œæ•´ä½“å½¢çŠ¶å‘ˆé’Ÿå‹ã€‚è€Œæ ‡å‡†æ­£æ€åˆ†å¸ƒæ˜¯æ­£æ€åˆ†å¸ƒçš„ä¸€ç§ï¼Œæ»¡è¶³$Î¼ &#x3D; 0,Ïƒ &#x3D; 1$çš„æ¡ä»¶çš„æ­£æ€åˆ†å¸ƒå³ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚ç®€å•æ¥è¯´å¹…åº¦é™å®š$ï¼ˆÏƒ &#x3D; 1ï¼‰ï¼Œy$è½´å¯¹ç§°çš„æ­£æ€åˆ†å¸ƒå°±æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/0bb4ff9ae7b74f55baade1a40dd89b46949f87aeef8e47d7bc326a0bce934ded" width="500" hegiht="" ></center><center>å›¾2ï¼šæ­£æ€åˆ†å¸ƒ </center><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸Šä»…ä¸ºå‡è®¾ã€‚å™ªå£°ä¸è§å¾—æœä»é«˜æ–¯åˆ†å¸ƒï¼Œä½†æ˜¯å¯¹æœä»é«˜æ–¯åˆ†å¸ƒçš„å™ªå£°ï¼Œå…¶ä¼°è®¡é‡å…·æœ‰æ›´å®¹æ˜“æ¨å¯¼çš„ç»Ÿè®¡æ€§è´¨ï¼Œä¹Ÿèƒ½è¿›è¡Œå°æ ·æœ¬çš„ç»Ÿè®¡å‡è®¾çš„æ£€éªŒã€‚</p><h2 id="ä¸‰ã€çº¿æ€§å›å½’çš„ä»é›¶å¼€å§‹å®ç°"><a href="#ä¸‰ã€çº¿æ€§å›å½’çš„ä»é›¶å¼€å§‹å®ç°" class="headerlink" title="ä¸‰ã€çº¿æ€§å›å½’çš„ä»é›¶å¼€å§‹å®ç°"></a>ä¸‰ã€<strong>çº¿æ€§å›å½’çš„ä»é›¶å¼€å§‹å®ç°</strong></h2><p>:label:<code>sec_linear_scratch</code></p><p>åœ¨äº†è§£çº¿æ€§å›å½’çš„å…³é”®æ€æƒ³ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹é€šè¿‡ä»£ç æ¥åŠ¨æ‰‹å®ç°çº¿æ€§å›å½’äº†ã€‚</p><p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œ(<strong>æˆ‘ä»¬å°†ä»é›¶å¼€å§‹å®ç°æ•´ä¸ªæ–¹æ³•ï¼ŒåŒ…æ‹¬æ•°æ®æµæ°´çº¿ã€æ¨¡å‹ã€æŸå¤±å‡½æ•°å’Œå°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨</strong>)ã€‚è™½ç„¶ç°ä»£çš„æ·±åº¦å­¦ä¹ æ¡†æ¶å‡ ä¹å¯ä»¥è‡ªåŠ¨åŒ–åœ°è¿›è¡Œæ‰€æœ‰è¿™äº›å·¥ä½œï¼Œä½†ä»é›¶å¼€å§‹å®ç°å¯ä»¥ç¡®ä¿ä½ çœŸæ­£çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚åŒæ—¶ï¼Œäº†è§£æ›´ç»†è‡´çš„å·¥ä½œåŸç†å°†æ–¹ä¾¿æˆ‘ä»¬è‡ªå®šä¹‰æ¨¡å‹ã€è‡ªå®šä¹‰å±‚æˆ–è‡ªå®šä¹‰æŸå¤±å‡½æ•°ã€‚</p><p>åœ¨ä¹‹åçš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šå……åˆ†åˆ©ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶çš„ä¼˜åŠ¿ï¼Œä»‹ç»æ›´ç®€æ´çš„å®ç°æ–¹å¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure><h3 id="ã€1-ç”Ÿæˆæ•°æ®é›†ã€‘"><a href="#ã€1-ç”Ÿæˆæ•°æ®é›†ã€‘" class="headerlink" title="ã€1.ç”Ÿæˆæ•°æ®é›†ã€‘"></a><strong>ã€1.ç”Ÿæˆæ•°æ®é›†ã€‘</strong></h3><p>ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†[<strong>æ ¹æ®å¸¦æœ‰å™ªå£°çš„çº¿æ€§æ¨¡å‹æ„é€ ä¸€ä¸ªäººé€ æ•°æ®é›†ã€‚</strong>]<br>æˆ‘ä»¬çš„<strong>ä»»åŠ¡æ˜¯ä½¿ç”¨è¿™ä¸ªæœ‰é™æ ·æœ¬çš„æ•°æ®é›†æ¥æ¢å¤è¿™ä¸ªæ¨¡å‹çš„å‚æ•°</strong>ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨ä½ç»´æ•°æ®ï¼Œè¿™æ ·å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†å…¶å¯è§†åŒ–ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªåŒ…å«1000ä¸ªæ ·æœ¬çš„æ•°æ®é›†ï¼Œæ¯ä¸ªæ ·æœ¬åŒ…å«ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­é‡‡æ ·çš„2ä¸ªç‰¹å¾ã€‚æˆ‘ä»¬çš„åˆæˆæ•°æ®é›†æ˜¯ä¸€ä¸ªçŸ©é˜µ$\mathbf{X}\in \mathbb{R}^{1000 \times 2}$ã€‚</p><p><strong>æˆ‘ä»¬ä½¿ç”¨çº¿æ€§æ¨¡å‹å‚æ•°$\mathbf{w} &#x3D; [2, -3.4]^\top$ã€$b &#x3D; 4.2$<br>å’Œå™ªå£°é¡¹$\epsilon$ç”Ÿæˆæ•°æ®é›†åŠå…¶æ ‡ç­¾ï¼š</strong></p><p>$$\mathbf{y}&#x3D; \mathbf{X} \mathbf{w} + b + \mathbf\epsilon.$$</p><p>ä½ å¯ä»¥å°†$\epsilon$è§†ä¸ºæ¨¡å‹é¢„æµ‹å’Œæ ‡ç­¾æ—¶çš„æ½œåœ¨è§‚æµ‹è¯¯å·®ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬è®¤ä¸ºæ ‡å‡†å‡è®¾æˆç«‹ï¼Œå³$\epsilon$æœä»å‡å€¼ä¸º0çš„æ­£æ€åˆ†å¸ƒã€‚ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å°†æ ‡å‡†å·®è®¾ä¸º0.01ã€‚</p><p>ä¸‹é¢çš„ä»£ç ç”Ÿæˆ**åˆæˆæ•°æ®é›†(Synthetic datasets)**ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆæ•°æ®é›†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">synthetic_data</span>(<span class="params">w, b, num_examples</span>):</span><br><span class="line">    X = paddle.normal(<span class="number">0</span>, <span class="number">1</span>, (num_examples, <span class="built_in">len</span>(w)))<span class="comment">#å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼Œnä¸ªæ ·æœ¬ï¼Œwé•¿åº¦çš„ç‰¹å¾</span></span><br><span class="line">    y = paddle.matmul(X, w) + b</span><br><span class="line">    y += paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, y.shape)</span><br><span class="line">    <span class="keyword">return</span> X, y.reshape((-<span class="number">1</span>, <span class="number">1</span>)) <span class="comment">#reshape(-1,1)è½¬æ¢æˆ1åˆ—</span></span><br><span class="line"></span><br><span class="line">true_w = paddle.to_tensor([<span class="number">2</span>, -<span class="number">3.4</span>])</span><br><span class="line">true_b = <span class="number">4.2</span></span><br><span class="line">features, labels = synthetic_data(true_w, true_b, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ[<strong><code>features</code>ä¸­çš„æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€ä¸ªäºŒç»´æ•°æ®æ ·æœ¬ï¼Œ<br><code>labels</code>ä¸­çš„æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€ç»´æ ‡ç­¾å€¼ï¼ˆä¸€ä¸ªæ ‡é‡ï¼‰</strong>]ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;features:&#x27;</span>, features[<span class="number">0</span>],<span class="string">&#x27;\nlabel:&#x27;</span>, labels[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶æ•£ç‚¹å›¾</span></span><br><span class="line">plt.scatter(features[:, <span class="number">1</span>].detach().numpy(), labels.detach().numpy(), <span class="number">5</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>features: Tensor(shape=[2], dtype=float32, place=Place(cpu), stop_gradient=True,       [ 0.88939798, -0.09182443]) label: Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=True,       [6.27633619])</code></pre><p><img src="https://picbed.dai2yutou.space/article_img/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/2.svg" alt="svg"></p><h3 id="ã€2-è¯»å–æ•°æ®é›†ã€‘"><a href="#ã€2-è¯»å–æ•°æ®é›†ã€‘" class="headerlink" title="ã€2.è¯»å–æ•°æ®é›†ã€‘"></a><strong>ã€2.è¯»å–æ•°æ®é›†ã€‘</strong></h3><p>å›æƒ³ä¸€ä¸‹ï¼Œè®­ç»ƒæ¨¡å‹æ—¶è¦å¯¹æ•°æ®é›†è¿›è¡Œéå†ï¼Œæ¯æ¬¡æŠ½å–ä¸€å°æ‰¹é‡æ ·æœ¬ï¼Œå¹¶ä½¿ç”¨å®ƒä»¬æ¥æ›´æ–°æˆ‘ä»¬çš„æ¨¡å‹ã€‚ç”±äºè¿™ä¸ªè¿‡ç¨‹æ˜¯è®­ç»ƒæœºå™¨å­¦ä¹ ç®—æ³•çš„åŸºç¡€ï¼Œæ‰€ä»¥æœ‰å¿…è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°èƒ½æ‰“ä¹±æ•°æ®é›†ä¸­çš„æ ·æœ¬å¹¶ä»¥å°æ‰¹é‡æ–¹å¼è·å–æ•°æ®ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬[<strong>å®šä¹‰ä¸€ä¸ª<code>data_iter</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶æ‰¹é‡å¤§å°ã€ç‰¹å¾çŸ©é˜µå’Œæ ‡ç­¾å‘é‡ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆå¤§å°ä¸º<code>batch_size</code>çš„å°æ‰¹é‡</strong>]ã€‚<br>æ¯ä¸ªå°æ‰¹é‡åŒ…å«ä¸€ç»„ç‰¹å¾å’Œæ ‡ç­¾ã€‚ã€ç‰¹å¾å°±æ˜¯xï¼Œæ ‡ç­¾å°±æ˜¯yï¼Œåˆ†çœŸå®æ ‡ç­¾å’Œé¢„æµ‹æ ‡ç­¾ã€‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–æ•°æ®é›†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">data_iter</span>(<span class="params">batch_size, features, labels</span>):</span><br><span class="line">    num_examples = <span class="built_in">len</span>(features)</span><br><span class="line">    indices = <span class="built_in">list</span>(<span class="built_in">range</span>(num_examples))</span><br><span class="line">    random.shuffle(indices)<span class="comment"># éšæœºæ‰“ä¹±</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, num_examples, batch_size):</span><br><span class="line">        batch_indices = paddle.to_tensor(</span><br><span class="line">            indices[i: <span class="built_in">min</span>(i + batch_size, num_examples)])<span class="comment"># éšæœºè¯»å–çš„æ ·æœ¬</span></span><br><span class="line">        <span class="keyword">yield</span> features[batch_indices], labels[batch_indices] <span class="comment"># yield--æ„é€ ç”Ÿæˆå™¨ï¼Œä¸åŒäºreturnï¼Œæ­¤å¤„å‡½æ•°ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šå¸¸ï¼Œæˆ‘ä»¬åˆ©ç”¨GPUå¹¶è¡Œè¿ç®—çš„ä¼˜åŠ¿ï¼Œå¤„ç†åˆç†å¤§å°çš„â€œå°æ‰¹é‡â€ã€‚æ¯ä¸ªæ ·æœ¬éƒ½å¯ä»¥å¹¶è¡Œåœ°è¿›è¡Œæ¨¡å‹è®¡ç®—ï¼Œä¸”æ¯ä¸ªæ ·æœ¬æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä¹Ÿå¯ä»¥è¢«å¹¶è¡Œè®¡ç®—ã€‚GPUå¯ä»¥åœ¨å¤„ç†å‡ ç™¾ä¸ªæ ·æœ¬æ—¶ï¼Œæ‰€èŠ±è´¹çš„æ—¶é—´ä¸æ¯”å¤„ç†ä¸€ä¸ªæ ·æœ¬æ—¶å¤šå¤ªå¤šã€‚</p><p>æˆ‘ä»¬ç›´è§‚æ„Ÿå—ä¸€ä¸‹å°æ‰¹é‡è¿ç®—ï¼šè¯»å–ç¬¬ä¸€ä¸ªå°æ‰¹é‡æ•°æ®æ ·æœ¬å¹¶æ‰“å°ã€‚æ¯ä¸ªæ‰¹é‡çš„ç‰¹å¾ç»´åº¦æ˜¾ç¤ºæ‰¹é‡å¤§å°å’Œè¾“å…¥ç‰¹å¾æ•°ã€‚åŒæ ·çš„ï¼Œæ‰¹é‡çš„æ ‡ç­¾å½¢çŠ¶ä¸<code>batch_size</code>ç›¸ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">batch_size = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter(batch_size, features, labels):</span><br><span class="line">    <span class="built_in">print</span>(X, <span class="string">&#x27;\n&#x27;</span>, y)</span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[10, 2], dtype=float32, place=Place(cpu), stop_gradient=True,       [[-0.49911308, -0.39810586],        [-0.76750195,  0.92735165],        [ 0.50302643, -0.39648017],        [ 1.14350212,  0.45846194],        [-0.58703244,  0.41355067],        [ 0.90497136, -0.58438981],        [-0.09798826,  1.66836739],        [ 0.07398646, -0.60611689],        [ 0.23126918, -0.46856895],        [-0.59221536,  0.55128318]])  Tensor(shape=[10, 1], dtype=float32, place=Place(cpu), stop_gradient=True,       [[ 4.56645775],        [-0.48575446],        [ 6.56141758],        [ 4.92852592],        [ 1.62627256],        [ 8.01213646],        [-1.67052901],        [ 6.39333963],        [ 6.26368427],        [ 1.13665283]])</code></pre><h3 id="ã€3-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"><a href="#ã€3-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘" class="headerlink" title="ã€3.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"></a><strong>ã€3.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘</strong></h3><p>[<strong>åœ¨æˆ‘ä»¬å¼€å§‹ç”¨å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–æˆ‘ä»¬çš„æ¨¡å‹å‚æ•°ä¹‹å‰</strong>]ï¼Œ<br>(<strong>æˆ‘ä»¬éœ€è¦å…ˆæœ‰ä¸€äº›å‚æ•°</strong>)ã€‚åœ¨åˆå§‹åŒ–å‚æ•°ä¹‹åï¼Œæˆ‘ä»¬çš„ä»»åŠ¡æ˜¯æ›´æ–°è¿™äº›å‚æ•°ï¼Œç›´åˆ°è¿™äº›å‚æ•°è¶³å¤Ÿæ‹Ÿåˆæˆ‘ä»¬çš„æ•°æ®ã€‚æ¯æ¬¡æ›´æ–°éƒ½éœ€è¦è®¡ç®—æŸå¤±å‡½æ•°å…³äºæ¨¡å‹å‚æ•°çš„æ¢¯åº¦ã€‚æœ‰äº†è¿™ä¸ªæ¢¯åº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘å‡å°æŸå¤±çš„æ–¹å‘æ›´æ–°æ¯ä¸ªå‚æ•°ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä»å‡å€¼ä¸º0ã€æ ‡å‡†å·®ä¸º0.01çš„æ­£æ€åˆ†å¸ƒä¸­é‡‡æ ·éšæœºæ•°æ¥åˆå§‹åŒ–æƒé‡ï¼Œå¹¶å°†åç½®åˆå§‹åŒ–ä¸º0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–æ¨¡å‹å‚æ•°</span></span><br><span class="line">w = paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, shape=(<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line">w.stop_gradient = <span class="literal">False</span> <span class="comment">#æ›´æ–°å‚æ•°</span></span><br><span class="line">b = paddle.zeros(shape=[<span class="number">1</span>])</span><br><span class="line">b.stop_gradient = <span class="literal">False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;w, b: &quot;</span>, w, b)</span><br></pre></td></tr></table></figure><pre><code>w, b:  Tensor(shape=[2, 1], dtype=float32, place=Place(cpu), stop_gradient=False,       [[-0.00806116],        [ 0.00138983]]) Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=False,       [0.])</code></pre><h3 id="ã€4-å®šä¹‰æ¨¡å‹ã€‘"><a href="#ã€4-å®šä¹‰æ¨¡å‹ã€‘" class="headerlink" title="ã€4.å®šä¹‰æ¨¡å‹ã€‘"></a><strong>ã€4.å®šä¹‰æ¨¡å‹ã€‘</strong></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿…é¡»[<strong>å®šä¹‰æ¨¡å‹ï¼Œå°†æ¨¡å‹çš„è¾“å…¥å’Œå‚æ•°åŒæ¨¡å‹çš„è¾“å‡ºå…³è”èµ·æ¥ã€‚</strong>]<br>å›æƒ³ä¸€ä¸‹ï¼Œè¦è®¡ç®—çº¿æ€§æ¨¡å‹çš„è¾“å‡ºï¼Œæˆ‘ä»¬åªéœ€è®¡ç®—è¾“å…¥ç‰¹å¾$\mathbf{X}$å’Œæ¨¡å‹æƒé‡$\mathbf{w}$çš„çŸ©é˜µ-å‘é‡ä¹˜æ³•ååŠ ä¸Šåç½®$b$ã€‚<br>æ³¨æ„ï¼Œä¸Šé¢çš„$\mathbf{XÂ·w}$æ˜¯ä¸€ä¸ªå‘é‡ï¼Œè€Œ$b$æ˜¯ä¸€ä¸ªæ ‡é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>å¹¿æ’­æœºåˆ¶(broadcast mechanism)<strong>ï¼šå¹¿æ’­æœºåˆ¶çš„æœ¬è´¨å°±æ˜¯</strong>å¼ é‡(tensor<br>)</strong> è‡ªåŠ¨æ‰©å±•ï¼Œå½“æˆ‘ä»¬ç”¨ä¸€ä¸ªå‘é‡åŠ ä¸€ä¸ªæ ‡é‡æ—¶ï¼Œæ ‡é‡ä¼šè¢«åŠ åˆ°å‘é‡çš„æ¯ä¸ªåˆ†é‡ä¸Šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æ¨¡å‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">linreg</span>(<span class="params">X, w, b</span>):</span><br><span class="line">    <span class="comment"># print(&quot;linreg: &quot;, X, w, b)</span></span><br><span class="line">    <span class="keyword">return</span> paddle.matmul(X, w) + b</span><br></pre></td></tr></table></figure><h3 id="ã€5-å®šä¹‰æŸå¤±å‡½æ•°ã€‘"><a href="#ã€5-å®šä¹‰æŸå¤±å‡½æ•°ã€‘" class="headerlink" title="ã€5.å®šä¹‰æŸå¤±å‡½æ•°ã€‘"></a><strong>ã€5.å®šä¹‰æŸå¤±å‡½æ•°ã€‘</strong></h3><p>å› ä¸ºéœ€è¦è®¡ç®—æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å…ˆå®šä¹‰æŸå¤±å‡½æ•°ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å¹³æ–¹æŸå¤±å‡½æ•°ã€‚<br>åœ¨å®ç°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†çœŸå®å€¼<code>y</code>çš„å½¢çŠ¶è½¬æ¢ä¸ºå’Œé¢„æµ‹å€¼<code>y_hat</code>çš„å½¢çŠ¶ç›¸åŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">squared_loss</span>(<span class="params">y_hat, y</span>):</span><br><span class="line">    <span class="comment">#print(&quot;squared_loss: &quot;, y_hat, y)</span></span><br><span class="line">    loss = (y_hat - y.reshape(y_hat.shape)) ** <span class="number">2</span> / <span class="number">2</span> <span class="comment"># loss=1/2(y_hat-y)^2</span></span><br><span class="line">    <span class="comment">#print(&quot;loss&gt;&gt;&gt;&quot;, loss)</span></span><br><span class="line">    <span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure><h3 id="ã€6-å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘"><a href="#ã€6-å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘" class="headerlink" title="ã€6.å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘"></a><strong>ã€6.å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘</strong></h3><p>è¿™é‡Œæˆ‘ä»¬ä»‹ç»å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ã€‚</p><p>åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œä½¿ç”¨ä»æ•°æ®é›†ä¸­éšæœºæŠ½å–çš„ä¸€ä¸ªå°æ‰¹é‡ï¼Œç„¶åæ ¹æ®å‚æ•°è®¡ç®—æŸå¤±çš„æ¢¯åº¦ã€‚<br>æ¥ä¸‹æ¥ï¼Œæœç€å‡å°‘æŸå¤±çš„æ–¹å‘æ›´æ–°æˆ‘ä»¬çš„å‚æ•°ã€‚</p><p>ä¸‹é¢çš„å‡½æ•°å®ç°å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™æ›´æ–°ã€‚<br>è¯¥å‡½æ•°æ¥å—æ¨¡å‹å‚æ•°é›†åˆã€å­¦ä¹ é€Ÿç‡å’Œæ‰¹é‡å¤§å°ä½œä¸ºè¾“å…¥ã€‚æ¯ä¸€æ­¥æ›´æ–°çš„å¤§å°ç”±å­¦ä¹ é€Ÿç‡<code>lr</code>å†³å®šã€‚<br>å› ä¸ºæˆ‘ä»¬è®¡ç®—çš„æŸå¤±æ˜¯ä¸€ä¸ªæ‰¹é‡æ ·æœ¬çš„æ€»å’Œï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨æ‰¹é‡å¤§å°ï¼ˆ<code>batch_size</code>ï¼‰<br>æ¥è§„èŒƒåŒ–æ­¥é•¿ï¼Œè¿™æ ·æ­¥é•¿å¤§å°å°±ä¸ä¼šå–å†³äºæˆ‘ä»¬å¯¹æ‰¹é‡å¤§å°çš„é€‰æ‹©ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¼˜åŒ–ç®—æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sgd</span>(<span class="params">params, lr, batch_size</span>):<span class="comment"># paramså­˜å‚¨å‚æ•°wã€b</span></span><br><span class="line">    <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">        <span class="keyword">for</span> param <span class="keyword">in</span> params:</span><br><span class="line">            <span class="comment"># print(&quot;param.grad: &quot;, param.grad)</span></span><br><span class="line">            param -= lr * param.grad / batch_size<span class="comment"># æ¢¯åº¦ä¸‹é™æ³•å…¬å¼</span></span><br><span class="line">            <span class="comment"># print(&quot;param: &quot;, param)</span></span><br><span class="line">            param.clear_grad()<span class="comment"># æ¸…é™¤å½“å‰æ¢¯åº¦å€¼</span></span><br></pre></td></tr></table></figure><h3 id="ã€7-è®­ç»ƒã€‘"><a href="#ã€7-è®­ç»ƒã€‘" class="headerlink" title="ã€7.è®­ç»ƒã€‘"></a><strong>ã€7.è®­ç»ƒã€‘</strong></h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†æ¨¡å‹è®­ç»ƒæ‰€æœ‰éœ€è¦çš„è¦ç´ ï¼Œå¯ä»¥å®ç°ä¸»è¦çš„[<strong>è®­ç»ƒè¿‡ç¨‹</strong>]éƒ¨åˆ†äº†ã€‚ç†è§£è¿™æ®µä»£ç è‡³å…³é‡è¦ï¼Œå› ä¸ºä»äº‹æ·±åº¦å­¦ä¹ åï¼Œä½ ä¼šä¸€éåˆä¸€éåœ°çœ‹åˆ°å‡ ä¹ç›¸åŒçš„è®­ç»ƒè¿‡ç¨‹ã€‚<br>åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬è¯»å–ä¸€å°æ‰¹é‡è®­ç»ƒæ ·æœ¬ï¼Œå¹¶é€šè¿‡æˆ‘ä»¬çš„æ¨¡å‹æ¥è·å¾—ä¸€ç»„é¢„æµ‹ï¼›è®¡ç®—å®ŒæŸå¤±åï¼Œæˆ‘ä»¬å¼€å§‹åå‘ä¼ æ’­ï¼Œå­˜å‚¨æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦ï¼›æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨ä¼˜åŒ–ç®—æ³•<code>sgd</code>æ¥æ›´æ–°æ¨¡å‹å‚æ•°ã€‚</p><p>æ¦‚æ‹¬ä¸€ä¸‹ï¼Œæˆ‘ä»¬å°†æ‰§è¡Œä»¥ä¸‹å¾ªç¯ï¼š</p><ul><li>åˆå§‹åŒ–å‚æ•°</li><li>é‡å¤ä»¥ä¸‹è®­ç»ƒï¼Œç›´åˆ°å®Œæˆ<ul><li>è®¡ç®—æ¢¯åº¦$\mathbf{g} \leftarrow \partial_{(\mathbf{w},b)} \frac{1}{|\mathcal{B}|} \sum_{i \in \mathcal{B}} l(\mathbf{x}^{(i)}, y^{(i)}, \mathbf{w}, b)$</li><li>æ›´æ–°å‚æ•°$(\mathbf{w}, b) \leftarrow (\mathbf{w}, b) - \eta \mathbf{g}$</li></ul></li></ul><p>åœ¨æ¯ä¸ª<strong>è¿­ä»£å‘¨æœŸï¼ˆepochï¼‰</strong> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>data_iter</code>å‡½æ•°éå†æ•´ä¸ªæ•°æ®é›†ï¼Œå¹¶å°†è®­ç»ƒæ•°æ®é›†ä¸­æ‰€æœ‰æ ·æœ¬éƒ½ä½¿ç”¨ä¸€æ¬¡ï¼ˆå‡è®¾æ ·æœ¬æ•°èƒ½å¤Ÿè¢«æ‰¹é‡å¤§å°æ•´é™¤ï¼‰ã€‚è¿™é‡Œçš„è¿­ä»£å‘¨æœŸä¸ªæ•°<code>num_epochs</code>å’Œå­¦ä¹ ç‡<code>lr</code>éƒ½æ˜¯è¶…å‚æ•°ï¼Œåˆ†åˆ«è®¾ä¸º3å’Œ0.03ã€‚è®¾ç½®è¶…å‚æ•°å¾ˆæ£˜æ‰‹ï¼Œéœ€è¦é€šè¿‡åå¤è¯•éªŒè¿›è¡Œè°ƒæ•´ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®­ç»ƒ</span></span><br><span class="line">lr = <span class="number">0.3</span></span><br><span class="line">num_epochs = <span class="number">3</span></span><br><span class="line">net = linreg</span><br><span class="line">loss = squared_loss</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter(batch_size, features, labels):</span><br><span class="line">        l = loss(net(X, w, b), y)</span><br><span class="line">        l.<span class="built_in">sum</span>().backward()</span><br><span class="line">        <span class="comment"># print(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;, l)</span></span><br><span class="line">        sgd([w, b], lr, batch_size)</span><br><span class="line">        <span class="comment"># print(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&quot;, w.grad, b.grad)</span></span><br><span class="line">        <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">            <span class="comment"># for param in [w, b]:</span></span><br><span class="line">            <span class="comment"># print(&quot;param.grad: &quot;, param.grad)</span></span><br><span class="line">            w -= lr * w.grad / batch_size</span><br><span class="line">            b -= lr * b.grad / batch_size</span><br><span class="line">            <span class="comment"># print(&quot;param: &quot;, param)</span></span><br><span class="line">            w.clear_grad()</span><br><span class="line">            b.clear_grad()</span><br><span class="line">            w.stop_gradient = <span class="literal">False</span></span><br><span class="line">            b.stop_gradient = <span class="literal">False</span></span><br><span class="line">        <span class="comment"># print(&quot;===========&quot;, w, b)</span></span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> paddle.no_grad():</span><br><span class="line">        train_l = loss(net(features, w, b), labels)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;epoch <span class="subst">&#123;epoch + <span class="number">1</span>&#125;</span>, loss <span class="subst">&#123;<span class="built_in">float</span>(train_l.mean()):f&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><pre><code>/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddle/fluid/dygraph/varbase_patch_methods.py:523: UserWarning: [93mWarning:tensor.grad will return the tensor value of the gradient. This is an incompatible upgrade for tensor.grad API.  It&#39;s return type changes from numpy.ndarray in version 2.0 to paddle.Tensor in version 2.1.0.  If you want to get the numpy value of the gradient, you can use :code:`x.grad.numpy()` [0m  warnings.warn(warning_msg)epoch 1, loss 0.000051epoch 2, loss 0.000050epoch 3, loss 0.000049</code></pre><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è‡ªå·±åˆæˆçš„æ•°æ®é›†ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“çœŸæ­£çš„å‚æ•°æ˜¯ä»€ä¹ˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å‡ºæ¯”è¾ƒ<strong>çœŸå®å‚æ•°</strong>å’Œ<strong>é€šè¿‡è®­ç»ƒå­¦åˆ°çš„å‚æ•°</strong>æ¥è¯„ä¼°è®­ç»ƒçš„æˆåŠŸç¨‹åº¦ã€‚</p><p>æ³¨æ„ï¼Œæˆ‘ä»¬ä¸åº”è¯¥æƒ³å½“ç„¶åœ°è®¤ä¸ºæˆ‘ä»¬èƒ½å¤Ÿå®Œç¾åœ°æ±‚è§£å‚æ•°ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œ<strong>æˆ‘ä»¬é€šå¸¸ä¸å¤ªå…³å¿ƒæ¢å¤çœŸæ­£çš„å‚æ•°ï¼Œè€Œæ›´å…³å¿ƒå¦‚ä½•é«˜åº¦å‡†ç¡®é¢„æµ‹å‚æ•°</strong>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(w,b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;wçš„ä¼°è®¡è¯¯å·®: <span class="subst">&#123;true_w - w.reshape(true_w.shape)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;bçš„ä¼°è®¡è¯¯å·®: <span class="subst">&#123;true_b - b&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><pre><code>Tensor(shape=[2, 1], dtype=float32, place=Place(cpu), stop_gradient=False,       [[ 2.00002027],        [-3.39890456]]) Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=False,       [4.20090818])wçš„ä¼°è®¡è¯¯å·®: Tensor(shape=[2], dtype=float32, place=Place(cpu), stop_gradient=False,       [-0.00002027, -0.00109553])bçš„ä¼°è®¡è¯¯å·®: Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=False,       [-0.00090837])</code></pre><h2 id="å››ã€çº¿æ€§å›å½’çš„ç®€æ´å®ç°"><a href="#å››ã€çº¿æ€§å›å½’çš„ç®€æ´å®ç°" class="headerlink" title="å››ã€çº¿æ€§å›å½’çš„ç®€æ´å®ç°"></a>å››ã€<strong>çº¿æ€§å›å½’çš„ç®€æ´å®ç°</strong></h2><p>:label:<code>sec_linear_concise</code></p><h3 id="ã€æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‘"><a href="#ã€æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‘" class="headerlink" title="ã€æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‘"></a><strong>ã€æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‘</strong></h3><p>åœ¨è¿‡å»çš„å‡ å¹´é‡Œï¼Œå‡ºäºå¯¹æ·±åº¦å­¦ä¹ å¼ºçƒˆçš„å…´è¶£ï¼Œè®¸å¤šå…¬å¸ã€å­¦è€…å’Œä¸šä½™çˆ±å¥½è€…å¼€å‘äº†å„ç§æˆç†Ÿçš„å¼€æºæ¡†æ¶ã€‚æ·±åº¦å­¦ä¹ æ¡†æ¶æœ‰åŠ©äºå»ºæ¨¡è€…èšç„¦ä¸šåŠ¡åœºæ™¯å’Œæ¨¡å‹è®¾è®¡æœ¬èº«ï¼Œçœå»å¤§é‡è€Œç¹ççš„ä»£ç ç¼–å†™å·¥ä½œï¼Œå…¶ä¼˜åŠ¿ä¸»è¦è¡¨ç°åœ¨å¦‚ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li>èŠ‚çœç¼–å†™å¤§é‡åº•å±‚ä»£ç çš„ç²¾åŠ›ï¼šæ·±åº¦å­¦ä¹ æ¡†æ¶å±è”½äº†åº•å±‚å®ç°ï¼Œç”¨æˆ·åªéœ€å…³æ³¨æ¨¡å‹çš„é€»è¾‘ç»“æ„ï¼ŒåŒæ—¶ç®€åŒ–äº†è®¡ç®—é€»è¾‘ï¼Œé™ä½äº†æ·±åº¦å­¦ä¹ å…¥é—¨é—¨æ§›ï¼›</li><li>çœå»äº†éƒ¨ç½²å’Œé€‚é…ç¯å¢ƒçš„çƒ¦æ¼ï¼šæ·±åº¦å­¦ä¹ æ¡†æ¶å…·å¤‡çµæ´»çš„ç§»æ¤æ€§ï¼Œå¯å°†ä»£ç éƒ¨ç½²åˆ°CPUã€GPUæˆ–ç§»åŠ¨ç«¯ä¸Šï¼Œé€‰æ‹©å…·æœ‰åˆ†å¸ƒå¼æ€§èƒ½çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¼šä½¿æ¨¡å‹è®­ç»ƒæ›´é«˜æ•ˆã€‚</li></ul><p>åœ¨æ„å»ºæ¨¡å‹çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥æ‰€éœ€è¦å®Œæˆçš„ä»»åŠ¡å‡å¯ä»¥æ‹†åˆ†æˆä¸ªæ€§åŒ–å’Œé€šç”¨åŒ–ä¸¤ä¸ªéƒ¨åˆ†ã€‚æ·±åº¦å­¦ä¹ æ¡†æ¶çš„æœ¬è´¨æ˜¯è‡ªåŠ¨å®ç°å»ºæ¨¡è¿‡ç¨‹ä¸­ç›¸å¯¹é€šç”¨çš„æ¨¡å—ï¼Œå»ºæ¨¡è€…åªå®ç°æ¨¡å‹ä¸­ä¸ªæ€§åŒ–çš„éƒ¨åˆ†ï¼Œè¿™æ ·å¯ä»¥åœ¨â€œèŠ‚çœæŠ•å…¥â€å’Œâ€œäº§å‡ºå¼ºå¤§â€ä¹‹é—´è¾¾åˆ°ä¸€ä¸ªå¹³è¡¡ã€‚</p><ul><li>ä¸ªæ€§åŒ–éƒ¨åˆ†ï¼šå¾€å¾€æ˜¯æŒ‡å®šæ¨¡å‹ç”±å“ªäº›é€»è¾‘å…ƒç´ ç»„åˆï¼Œç”±å»ºæ¨¡è€…å®Œæˆï¼›</li><li>é€šç”¨éƒ¨åˆ†ï¼šèšç„¦è¿™äº›å…ƒç´ çš„ç®—æ³•å®ç°ï¼Œç”±æ·±åº¦å­¦ä¹ æ¡†æ¶å®Œæˆã€‚</li></ul><center><img src="https://ai-studio-static-online.cdn.bcebos.com/13b074198a924cd8904389d4a4f5f58ae1791bc2aa77427786190682d2273589" width="700" hegiht="" ></center><center>å›¾3ï¼šæ·±åº¦å­¦ä¹ æ¡†æ¶è®¾è®¡æ€è·¯ </center><p>æ— è®ºæ˜¯è®¡ç®—æœºè§†è§‰ä»»åŠ¡è¿˜æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ï¼Œä½¿ç”¨çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ç»“æ„éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯åœ¨æ¯ä¸ªç¯èŠ‚æŒ‡å®šçš„å®ç°ç®—æ³•ä¸åŒã€‚å› æ­¤ï¼Œå¤šæ•°æƒ…å†µä¸‹ï¼Œç®—æ³•å®ç°åªæ˜¯ç›¸å¯¹æœ‰é™çš„ä¸€äº›é€‰æ‹©ï¼Œå¦‚å¸¸è§çš„Losså‡½æ•°ä¸è¶…è¿‡åç§ã€å¸¸ç”¨çš„ç½‘ç»œé…ç½®ä¹Ÿå°±åå‡ ç§ã€å¸¸ç”¨ä¼˜åŒ–ç®—æ³•ä¸è¶…è¿‡äº”ç§ç­‰ç­‰ï¼Œè¿™äº›ç‰¹æ€§ä½¿å¾—<strong>åŸºäºæ¡†æ¶å»ºæ¨¡æ›´åƒä¸€ä¸ªç¼–å†™â€œæ¨¡å‹é…ç½®â€çš„è¿‡ç¨‹</strong>ã€‚</p><h3 id="ã€é£æ¡¨-PaddlePaddle-æ·±åº¦å­¦ä¹ å¹³å°ã€‘"><a href="#ã€é£æ¡¨-PaddlePaddle-æ·±åº¦å­¦ä¹ å¹³å°ã€‘" class="headerlink" title="ã€é£æ¡¨(PaddlePaddle)æ·±åº¦å­¦ä¹ å¹³å°ã€‘"></a><strong>ã€é£æ¡¨(PaddlePaddle)æ·±åº¦å­¦ä¹ å¹³å°ã€‘</strong></h3><p>ç™¾åº¦å‡ºå“çš„æ·±åº¦å­¦ä¹ å¹³å°é£æ¡¨(PaddlePaddle)æ˜¯ä¸»æµæ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­ä¸€æ¬¾å®Œå…¨å›½äº§åŒ–çš„äº§å“ï¼Œä¸Google TensorFlowã€Facebook Pytorché½åã€‚ç›¸æ¯”å›½å†…å…¶ä»–äº§å“ï¼Œé£æ¡¨æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ·±åº¦å­¦ä¹ å¹³å°ï¼Œä¹Ÿæ˜¯å”¯ä¸€æˆç†Ÿç¨³å®šã€å…·å¤‡å¤§è§„æ¨¡æ¨å¹¿æ¡ä»¶çš„æ·±åº¦å­¦ä¹ å¼€æºå¼€æ”¾å¹³å°ã€‚é£æ¡¨æºäºäº§ä¸šå®è·µï¼Œå§‹ç»ˆè‡´åŠ›äºä¸äº§ä¸šæ·±å…¥èåˆï¼Œä¸åˆä½œä¼™ä¼´ä¸€èµ·å¸®åŠ©è¶Šæ¥è¶Šå¤šçš„è¡Œä¸šå®ŒæˆAIèµ‹èƒ½ï¼Œå¹¶å·²å¹¿æ³›åº”ç”¨äºæ™ºæ…§åŸå¸‚ã€æ™ºèƒ½åˆ¶é€ ã€æ™ºæ…§é‡‘èã€æ³›äº¤é€šã€æ³›äº’è”ç½‘ã€æ™ºæ…§å†œä¸šç­‰é¢†åŸŸã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/6093ab75759b4f2d88ddbd3c2344d5c194ba1f3290a14e93b45ac9882c73cc0d" width="700" hegiht="" ></center><center>å›¾4ï¼šé£æ¡¨åœ¨å„é¢†åŸŸçš„åº”ç”¨ </center><ul><li>é£æ¡¨å®˜æ–¹ç½‘ç«™ï¼š <a href="https://www.paddlepaddle.org.cn/">https://www.paddlepaddle.org.cn/</a></li><li>é£æ¡¨GitHubï¼š <a href="https://github.com/paddlepaddle">https://github.com/paddlepaddle</a></li><li>å®˜æ–¹APIæ–‡æ¡£ï¼š<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/index_cn.html">https://www.paddlepaddle.org.cn/documentation/docs/zh/api/index_cn.html</a></li></ul><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•é€šè¿‡ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶æ¥ç®€æ´åœ°å®ç°çº¿æ€§å›å½’æ¨¡å‹ã€‚</p><h3 id="ã€1-ç”Ÿæˆæ•°æ®é›†ã€‘-1"><a href="#ã€1-ç”Ÿæˆæ•°æ®é›†ã€‘-1" class="headerlink" title="ã€1.ç”Ÿæˆæ•°æ®é›†ã€‘"></a><strong>ã€1.ç”Ÿæˆæ•°æ®é›†ã€‘</strong></h3><p>ä¸:label:numref:<code>sec_linear_scratch</code>ä¸­ç±»ä¼¼ï¼Œæˆ‘ä»¬é¦–å…ˆç”Ÿæˆæ•°æ®é›†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> TensorDataset, DataLoader</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ•°æ®é›†</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">synthetic_data</span>(<span class="params">w, b, num_examples</span>):</span><br><span class="line">    X = paddle.normal(<span class="number">0</span>, <span class="number">1</span>, (num_examples, <span class="built_in">len</span>(w)))</span><br><span class="line">    y = paddle.matmul(X, w) + b</span><br><span class="line">    y += paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, y.shape)</span><br><span class="line">    <span class="keyword">return</span> X, y.reshape((-<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">true_w = paddle.to_tensor([<span class="number">2</span>, -<span class="number">3.4</span>])</span><br><span class="line">true_b = <span class="number">4.2</span></span><br><span class="line">features, labels = synthetic_data(true_w, true_b, <span class="number">1000</span>)<span class="comment">#ç”Ÿæˆç‰¹å¾å€¼å’Œæ ‡ç­¾</span></span><br></pre></td></tr></table></figure><h3 id="ã€2-è¯»å–æ•°æ®é›†ã€‘-1"><a href="#ã€2-è¯»å–æ•°æ®é›†ã€‘-1" class="headerlink" title="ã€2.è¯»å–æ•°æ®é›†ã€‘"></a><strong>ã€2.è¯»å–æ•°æ®é›†ã€‘</strong></h3><p>æˆ‘ä»¬å¯ä»¥[<strong>è°ƒç”¨æ¡†æ¶ä¸­ç°æœ‰çš„APIæ¥è¯»å–æ•°æ®</strong>]ã€‚<br>æˆ‘ä»¬å°†<code>features</code>å’Œ<code>labels</code>ä½œä¸ºAPIçš„å‚æ•°ä¼ é€’ï¼Œå¹¶é€šè¿‡æ•°æ®è¿­ä»£å™¨æŒ‡å®š<code>batch_size</code>ã€‚<br>æ­¤å¤–ï¼Œå¸ƒå°”å€¼<code>is_train</code>è¡¨ç¤ºæ˜¯å¦å¸Œæœ›æ•°æ®è¿­ä»£å™¨å¯¹è±¡åœ¨æ¯ä¸ªè¿­ä»£å‘¨æœŸå†…æ‰“ä¹±æ•°æ®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_array</span>(<span class="params">data_array, batch_size, is_train=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="comment"># æ„é€ æ•°æ®è¿­ä»£å™¨</span></span><br><span class="line">    dataset = TensorDataset(data_array)<span class="comment"># ç”±å¼ é‡åˆ—è¡¨å®šä¹‰çš„æ•°æ®é›†ï¼Œå°±æ˜¯å°†æ•°æ®è½¬æ¢ä¸ºå¼ é‡</span></span><br><span class="line">    <span class="built_in">print</span>(dataset)</span><br><span class="line">    <span class="keyword">return</span> DataLoader(dataset, batch_size=batch_size, shuffle=is_train) <span class="comment"># ä¹‹åä»DataLoaderä¸­éšæœºæŒ‘é€‰batch_sizeä¸ªæ ·æœ¬</span></span><br><span class="line"></span><br><span class="line">batch_size = <span class="number">10</span><span class="comment">#10è¡¨ç¤ºæ¯æ¬¡è¦è¯»å–10ä¸ªæ ·æœ¬</span></span><br><span class="line">data_iter = load_array((features, labels), batch_size)<span class="comment">#è°ƒç”¨å‡½æ•°</span></span><br><span class="line"><span class="built_in">next</span>(<span class="built_in">iter</span>(data_iter))<span class="comment">#Iterator--è¿­ä»£å™¨ï¼Œnextä¸æ–­è°ƒç”¨å¹¶è¿”å›ä¸‹ä¸€ä¸ªå€¼</span></span><br></pre></td></tr></table></figure><pre><code>&lt;paddle.fluid.dataloader.dataset.TensorDataset object at 0x7f5f52aaf790&gt;[Tensor(shape=[10, 2], dtype=float32, place=Place(cpu), stop_gradient=True,        [[-0.54224837, -0.39263305],         [-1.01299679,  0.94332039],         [ 0.47301245,  0.70776784],         [ 0.73045009, -1.13905752],         [ 1.54503405,  0.48081467],         [ 0.65195972, -1.31317592],         [ 0.11326745, -0.05683252],         [-0.95777512,  0.04747771],         [-0.47813359, -0.18815866],         [-0.20791157,  0.94915169]]), Tensor(shape=[10, 1], dtype=float32, place=Place(cpu), stop_gradient=True,        [[ 4.44495058],         [-1.02339399],         [ 2.72681808],         [ 9.53551197],         [ 5.67309809],         [ 9.94829559],         [ 4.62414885],         [ 2.12689281],         [ 3.88397408],         [ 0.55416900]])]</code></pre><h3 id="ã€3-å®šä¹‰æ¨¡å‹ã€‘"><a href="#ã€3-å®šä¹‰æ¨¡å‹ã€‘" class="headerlink" title="ã€3.å®šä¹‰æ¨¡å‹ã€‘"></a><strong>ã€3.å®šä¹‰æ¨¡å‹ã€‘</strong></h3><p>å…¨è¿æ¥å±‚åœ¨<code>Linear</code>ç±»ä¸­å®šä¹‰ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å°†ä¸¤ä¸ªå‚æ•°ä¼ é€’åˆ°<code>nn.Linear</code>ä¸­ã€‚ç¬¬ä¸€ä¸ªæŒ‡å®šè¾“å…¥ç‰¹å¾å½¢çŠ¶ï¼Œå³2ï¼Œç¬¬äºŒä¸ªæŒ‡å®šè¾“å‡ºç‰¹å¾å½¢çŠ¶ï¼Œè¾“å‡ºç‰¹å¾å½¢çŠ¶ä¸ºå•ä¸ªæ ‡é‡ï¼Œå› æ­¤ä¸º1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nnæ˜¯ç¥ç»ç½‘ç»œçš„ç¼©å†™</span></span><br><span class="line"><span class="keyword">from</span> paddle <span class="keyword">import</span> nn</span><br><span class="line"><span class="comment"># çº¿æ€§å›å½’æ˜¯å•å±‚ç¥ç»ç½‘ç»œï¼ŒSequentialæ˜¯ä¸€ä¸ªæœ‰åºçš„å®¹å™¨ï¼Œç¥ç»ç½‘ç»œæ¨¡å—å°†æŒ‰ç…§åœ¨ä¼ å…¥æ„é€ å™¨çš„é¡ºåºä¾æ¬¡è¢«æ·»åŠ åˆ°è®¡ç®—å›¾ä¸­æ‰§è¡Œ</span></span><br><span class="line">net = paddle.nn.Sequential(paddle.nn.Linear(<span class="number">2</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure><h3 id="ã€4-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"><a href="#ã€4-åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘" class="headerlink" title="ã€4.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘"></a><strong>ã€4.åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‘</strong></h3><blockquote><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ­¤æ­¥éª¤å¯ä»¥ä¸ç”¨å†™ï¼Œæ¡†æ¶ä¸­åˆå§‹åŒ–äº†</p></blockquote><p>åœ¨ä½¿ç”¨<code>net</code>ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‚å¦‚åœ¨çº¿æ€§å›å½’æ¨¡å‹ä¸­çš„æƒé‡å’Œåç½®ã€‚<br>æ·±åº¦å­¦ä¹ æ¡†æ¶é€šå¸¸æœ‰é¢„å®šä¹‰çš„æ–¹æ³•æ¥åˆå§‹åŒ–å‚æ•°ï¼Œæˆ‘ä»¬å…ˆä¸ä½¿ç”¨ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šæ¯ä¸ªæƒé‡å‚æ•°åº”è¯¥ä»å‡å€¼ä¸º0ã€æ ‡å‡†å·®ä¸º0.01çš„æ­£æ€åˆ†å¸ƒä¸­éšæœºé‡‡æ ·ï¼Œåç½®å‚æ•°å°†åˆå§‹åŒ–ä¸ºé›¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–æ¨¡å‹å‚æ•°</span></span><br><span class="line">w = paddle.normal(<span class="number">0</span>, <span class="number">0.01</span>, shape=(<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line">w.stop_gradient = <span class="literal">False</span></span><br><span class="line">b = paddle.zeros(shape=[<span class="number">1</span>])</span><br><span class="line">b.stop_gradient = <span class="literal">False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;w, b: &quot;</span>, w, b)</span><br></pre></td></tr></table></figure><pre><code>w, b:  Tensor(shape=[2, 1], dtype=float32, place=Place(cpu), stop_gradient=False,       [[-0.00905993],        [-0.00498687]]) Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=False,       [0.])</code></pre><h3 id="ã€5-å®šä¹‰æŸå¤±å‡½æ•°ã€‘-1"><a href="#ã€5-å®šä¹‰æŸå¤±å‡½æ•°ã€‘-1" class="headerlink" title="ã€5.å®šä¹‰æŸå¤±å‡½æ•°ã€‘"></a><strong>ã€5.å®šä¹‰æŸå¤±å‡½æ•°ã€‘</strong></h3><p>è®¡ç®—å‡æ–¹è¯¯å·®ä½¿ç”¨çš„æ˜¯<code>MSELoss</code>ç±»ï¼Œä¹Ÿç§°ä¸º$L_2$èŒƒæ•°ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›æ‰€æœ‰æ ·æœ¬æŸå¤±çš„å¹³å‡å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loss = paddle.nn.MSELoss() <span class="comment"># å‡æ–¹è¯¯å·®</span></span><br></pre></td></tr></table></figure><h3 id="ã€6-å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘-1"><a href="#ã€6-å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘-1" class="headerlink" title="ã€6.å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘"></a><strong>ã€6.å®šä¹‰ä¼˜åŒ–ç®—æ³•ã€‘</strong></h3><p>å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•æ˜¯ä¸€ç§ä¼˜åŒ–ç¥ç»ç½‘ç»œçš„æ ‡å‡†å·¥å…·ï¼Œ<br>å½“æˆ‘ä»¬(å®ä¾‹åŒ–ä¸€ä¸ª<code>SGD</code>å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬è¦æŒ‡å®šä¼˜åŒ–çš„å‚æ•°ï¼ˆå¯é€šè¿‡<code>net.parameters()</code>ä»æˆ‘ä»¬çš„æ¨¡å‹ä¸­è·å¾—ï¼‰ä»¥åŠä¼˜åŒ–ç®—æ³•æ‰€éœ€çš„è¶…å‚æ•°å­—å…¸ã€‚å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™åªéœ€è¦è®¾ç½®<code>lr</code>å€¼ï¼Œè¿™é‡Œè®¾ç½®ä¸º0.03ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trainer = paddle.optimizer.SGD(learning_rate=<span class="number">0.03</span>, parameters = net.parameters())</span><br><span class="line"><span class="comment"># learning_rateä¸ºå­¦ä¹ ç‡ã€è¶…å‚æ•°ã€‘  parametersä¸ºç¥ç»ç½‘ç»œå‚æ•°</span></span><br></pre></td></tr></table></figure><h3 id="ã€7-è®­ç»ƒã€‘-1"><a href="#ã€7-è®­ç»ƒã€‘-1" class="headerlink" title="ã€7.è®­ç»ƒã€‘"></a><strong>ã€7.è®­ç»ƒã€‘</strong></h3><p>é€šè¿‡æ·±åº¦å­¦ä¹ æ¡†æ¶çš„é«˜çº§APIæ¥å®ç°æˆ‘ä»¬çš„æ¨¡å‹åªéœ€è¦ç›¸å¯¹è¾ƒå°‘çš„ä»£ç ã€‚æˆ‘ä»¬ä¸å¿…å•ç‹¬åˆ†é…å‚æ•°ã€ä¸å¿…å®šä¹‰æˆ‘ä»¬çš„æŸå¤±å‡½æ•°ï¼Œä¹Ÿä¸å¿…æ‰‹åŠ¨å®ç°å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™ã€‚å½“æˆ‘ä»¬éœ€è¦æ›´å¤æ‚çš„æ¨¡å‹æ—¶ï¼Œé«˜çº§APIçš„ä¼˜åŠ¿å°†å¤§å¤§å¢åŠ ã€‚å½“æˆ‘ä»¬æœ‰äº†æ‰€æœ‰çš„åŸºæœ¬ç»„ä»¶ï¼Œè®­ç»ƒè¿‡ç¨‹ä»£ç ä¸æˆ‘ä»¬ä»é›¶å¼€å§‹å®ç°æ—¶æ‰€åšçš„éå¸¸ç›¸ä¼¼ã€‚</p><p>å›é¡¾ä¸€ä¸‹ï¼šåœ¨æ¯ä¸ªè¿­ä»£å‘¨æœŸé‡Œï¼Œæˆ‘ä»¬å°†å®Œæ•´éå†ä¸€æ¬¡æ•°æ®é›†ï¼ˆ<code>train_data</code>ï¼‰ï¼Œä¸åœåœ°ä»ä¸­è·å–ä¸€ä¸ªå°æ‰¹é‡çš„è¾“å…¥å’Œç›¸åº”çš„æ ‡ç­¾ã€‚å¯¹äºæ¯ä¸€ä¸ªå°æ‰¹é‡ï¼Œæˆ‘ä»¬ä¼šè¿›è¡Œä»¥ä¸‹æ­¥éª¤:</p><ul><li>é€šè¿‡è°ƒç”¨<code>net(X)</code>ç”Ÿæˆé¢„æµ‹å¹¶è®¡ç®—æŸå¤±<code>l</code>ï¼ˆå‰å‘ä¼ æ’­ï¼‰ã€‚</li><li>é€šè¿‡è¿›è¡Œåå‘ä¼ æ’­æ¥è®¡ç®—æ¢¯åº¦ã€‚</li><li>é€šè¿‡è°ƒç”¨ä¼˜åŒ–å™¨æ¥æ›´æ–°æ¨¡å‹å‚æ•°ã€‚</li></ul><p>ä¸ºäº†æ›´å¥½çš„è¡¡é‡è®­ç»ƒæ•ˆæœï¼Œæˆ‘ä»¬è®¡ç®—æ¯ä¸ªè¿­ä»£å‘¨æœŸåçš„æŸå¤±ï¼Œå¹¶æ‰“å°å®ƒæ¥ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">num_epochs = <span class="number">10</span><span class="comment"># è®­ç»ƒåè½®ï¼Œè¿­ä»£å‘¨æœŸã€è¶…å‚æ•°ã€‘</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="keyword">for</span> X, y <span class="keyword">in</span> data_iter():<span class="comment"># å°†xå’Œyåˆ†åˆ«ä»æ•°æ®è¿­ä»£å™¨ä¸­æ‹¿å‡ºæ¥</span></span><br><span class="line">        l = loss(net(X), y)<span class="comment"># è®¡ç®—æŸå¤±å‡½æ•°</span></span><br><span class="line">        trainer.clear_grad()<span class="comment"># æ¸…é™¤æ¢¯åº¦  é˜²æ­¢æ¯ä¸€å°æ­¥çš„æ¢¯åº¦ä¹‹é—´ç›¸äº’å¹²æ‰°ï¼Œä¹‹å‰ä½ç½®çš„æ¢¯åº¦ä¸ä¼šå¯¹åç»­ä½ç½®çš„æ¢¯åº¦äº§ç”Ÿå½±å“ï¼Œæ¯æ¬¡è®¡ç®—çš„éƒ½æ˜¯å½“å‰çš„æ¢¯åº¦</span></span><br><span class="line">        l.backward()<span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">        <span class="comment"># æœ€å°åŒ–lossï¼Œæ›´æ–°å‚æ•°</span></span><br><span class="line">        trainer.step()</span><br><span class="line">        </span><br><span class="line">    l = loss(net(features), labels)</span><br><span class="line">    train_cost = l.numpy()[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;epoch <span class="subst">&#123;epoch + <span class="number">1</span>&#125;</span>, loss&#x27;</span>, train_cost)</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>epoch 1, loss 0.00017633408epoch 2, loss 9.7692595e-05epoch 3, loss 9.7552016e-05epoch 4, loss 9.749315e-05epoch 5, loss 9.774655e-05epoch 6, loss 9.733056e-05epoch 7, loss 9.7501295e-05epoch 8, loss 9.8026896e-05epoch 9, loss 9.82324e-05epoch 10, loss 9.7922566e-05</code></pre><p>ä¸‹é¢æˆ‘ä»¬æ¯”è¾ƒç”Ÿæˆæ•°æ®é›†çš„çœŸå®å‚æ•°å’Œé€šè¿‡æœ‰é™æ•°æ®è®­ç»ƒè·å¾—çš„æ¨¡å‹å‚æ•°ã€‚è¦è®¿é—®å‚æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆä»<code>net</code>è®¿é—®æ‰€éœ€çš„å±‚ï¼Œç„¶åè¯»å–è¯¥å±‚çš„æƒé‡å’Œåç½®ã€‚æ­£å¦‚åœ¨ä»é›¶å¼€å§‹å®ç°ä¸­ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼°è®¡å¾—åˆ°çš„å‚æ•°ä¸ç”Ÿæˆæ•°æ®çš„çœŸå®å‚æ•°éå¸¸æ¥è¿‘ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">w = net[<span class="number">0</span>].weight<span class="comment"># ç¬¬0å±‚çš„å‚æ•°ï¼Œå³è¾“å…¥å±‚ï¼ŒçœŸå®å‚æ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;wçš„ä¼°è®¡è¯¯å·®ï¼š&#x27;</span>, true_w - w.reshape(true_w.shape))</span><br><span class="line">b = net[<span class="number">0</span>].bias</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;bçš„ä¼°è®¡è¯¯å·®ï¼š&#x27;</span>, true_b - b)</span><br></pre></td></tr></table></figure><pre><code>wçš„ä¼°è®¡è¯¯å·®ï¼š Tensor(shape=[2], dtype=float32, place=Place(cpu), stop_gradient=False,       [-0.00050569, -0.00013828])bçš„ä¼°è®¡è¯¯å·®ï¼š Tensor(shape=[1], dtype=float32, place=Place(cpu), stop_gradient=False,       [0.00014687])</code></pre><h2 id="äº”ã€å°ç»“"><a href="#äº”ã€å°ç»“" class="headerlink" title="äº”ã€å°ç»“"></a><strong>äº”ã€å°ç»“</strong></h2><ul><li>æœºå™¨å­¦ä¹ æ¨¡å‹ä¸­çš„å…³é”®è¦ç´ æ˜¯è®­ç»ƒæ•°æ®ã€æŸå¤±å‡½æ•°ã€ä¼˜åŒ–ç®—æ³•ï¼Œè¿˜æœ‰æ¨¡å‹æœ¬èº«ã€‚</li><li>çŸ¢é‡åŒ–ä½¿æ•°å­¦è¡¨è¾¾ä¸Šæ›´ç®€æ´ï¼ŒåŒæ—¶è¿è¡Œçš„æ›´å¿«ã€‚</li><li>çº¿æ€§å›å½’æ¨¡å‹ä¹Ÿæ˜¯ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œã€‚</li><li>æ¢¯åº¦ä¸‹é™æ³•é€šè¿‡ä¸æ–­æ²¿ç€åæ¢¯åº¦æ–¹å‘æ›´æ–°å‚æ•°æ±‚è§£ã€‚</li><li>å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™æ˜¯æ·±åº¦å­¦ä¹ é»˜è®¤çš„æ±‚è§£ç®—æ³•ã€‚</li><li>ä¸¤ä¸ªé‡è¦çš„è¶…å‚æ•°æ˜¯æ‰¹é‡å¤§å°å’Œå­¦ä¹ ç‡ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_æ·±åº¦å­¦ä¹ æ€»è§ˆä¸æ¨¡å‹æ­å»º </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ 1.1-æ·±åº¦å­¦ä¹ æ¦‚è®º</title>
      <link href="/2022/12/18/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A01.1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%AE%BA/"/>
      <url>/2022/12/18/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A01.1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="æ·±åº¦å­¦ä¹ æ¦‚è®º"><a href="#æ·±åº¦å­¦ä¹ æ¦‚è®º" class="headerlink" title="æ·±åº¦å­¦ä¹ æ¦‚è®º"></a><strong>æ·±åº¦å­¦ä¹ æ¦‚è®º</strong></h1><p>å­¦ä¹ æœ¬èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤ŸæŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><ol><li>äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ çš„å…³ç³»ï¼›</li><li>æ·±åº¦å­¦ä¹ å´›èµ·çš„ä¸‰ä¸ªç†ç”±ï¼›</li><li>å¸¸è§çš„æ·±åº¦å­¦ä¹ ç½‘ç»œæ¨¡å‹ï¼›</li><li>æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µï¼šå»ºç«‹æ¨¡å‹ã€æŸå¤±å‡½æ•°ã€ä¼˜åŒ–ç®—æ³•ã€‚</li></ol><hr><h2 id="äººå·¥æ™ºèƒ½-amp-æœºå™¨å­¦ä¹ -amp-æ·±åº¦å­¦ä¹ "><a href="#äººå·¥æ™ºèƒ½-amp-æœºå™¨å­¦ä¹ -amp-æ·±åº¦å­¦ä¹ " class="headerlink" title="äººå·¥æ™ºèƒ½&amp;æœºå™¨å­¦ä¹ &amp;æ·±åº¦å­¦ä¹ "></a><strong>äººå·¥æ™ºèƒ½&amp;æœºå™¨å­¦ä¹ &amp;æ·±åº¦å­¦ä¹ </strong></h2><p>åœ¨ç ”ç©¶æ·±åº¦å­¦ä¹ ä¹‹å‰ï¼Œå…ˆä»ä¸‰ä¸ªæ¦‚å¿µçš„æ­£æœ¬æ¸…æºå¼€å§‹ã€‚æ¦‚æ‹¬æ¥è¯´ï¼Œäººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ è¦†ç›–çš„æŠ€æœ¯èŒƒç•´æ˜¯é€å±‚é€’å‡çš„ï¼Œä¸‰è€…çš„å…³ç³»ï¼šäººå·¥æ™ºèƒ½ &gt; æœºå™¨å­¦ä¹  &gt; æ·±åº¦å­¦ä¹ ã€‚</p><p>äººå·¥æ™ºèƒ½æ˜¯æœ€æ—©å‡ºç°çš„ï¼ŒèŒƒå›´ä¹Ÿæœ€å¹¿ï¼›éšåå‡ºç°çš„æ˜¯æœºå™¨å­¦ä¹ ï¼›æœ€å†…å±‚çš„æ˜¯æ·±åº¦å­¦ä¹ ï¼Œä¹Ÿæ˜¯å½“ä»Šäººå·¥æ™ºèƒ½å¤§çˆ†ç‚¸çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/01793714803c4b1a9a76727a0e1afcb8a97a438362d44915b95070eaf219bc36" width="500" hegiht="500" ></center><center>å›¾1ï¼šäººå·¥æ™ºèƒ½&æœºå™¨å­¦ä¹ &æ·±åº¦å­¦ä¹ çš„å…³ç³» </center><p>ç®€å•æ¥è¯´ï¼Œæœºå™¨å­¦ä¹ æ˜¯å®ç°äººå·¥æ™ºèƒ½çš„æ–¹æ³•ï¼Œæ·±åº¦å­¦ä¹ æ˜¯å®ç°æœºå™¨å­¦ä¹ çš„æŠ€æœ¯ä¹‹ä¸€ã€‚ä¹Ÿå¯ä»¥è¯´ï¼Œæœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„å­é›†ï¼Œè€Œæ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„å­é›†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸€çœ‹è¿™ä¸‰è€…å…·ä½“åŒ…å«äº†ä»€ä¹ˆã€‚</p><h3 id="ã€äººå·¥æ™ºèƒ½ã€‘"><a href="#ã€äººå·¥æ™ºèƒ½ã€‘" class="headerlink" title="ã€äººå·¥æ™ºèƒ½ã€‘"></a><strong>ã€äººå·¥æ™ºèƒ½ã€‘</strong></h3><p><strong>äººå·¥æ™ºèƒ½(Artificial Intelligence, AI)</strong> æ˜¯ç ”ç©¶ã€å¼€å‘ç”¨äºæ¨¡æ‹Ÿã€å»¶ä¼¸å’Œæ‰©å±•äººçš„æ™ºèƒ½çš„ç†è®ºã€æ–¹æ³•ã€æŠ€æœ¯åŠåº”ç”¨ç³»ç»Ÿçš„ä¸€é—¨æ–°çš„æŠ€æœ¯ç§‘å­¦ã€‚ã€æ­¤å®šä¹‰åªæ˜¯é’ˆå¯¹ç°çŠ¶ï¼Œä¸çŸ¥æœªæ¥å¦‚ä½•ã€‘</p><p>äººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒä¼å›¾äº†è§£æ™ºèƒ½çš„å®è´¨ï¼Œå¹¶ç”Ÿäº§å‡ºä¸€ç§æ–°çš„èƒ½ä»¥<strong>äººç±»æ™ºèƒ½</strong>ç›¸ä¼¼çš„æ–¹å¼åšå‡ºååº”çš„æ™ºèƒ½æœºå™¨ï¼Œè¯¥é¢†åŸŸçš„ç ”ç©¶åŒ…æ‹¬æœºå™¨äººã€è¯­è¨€è¯†åˆ«ã€å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/624e19151f724144ab1d67cfbb6a799d5d81b823afc646f7a26d7d05a7936aba" width="700" hegiht="" ></center><center>å›¾2ï¼šäººå·¥æ™ºèƒ½ç ”ç©¶é¢†åŸŸ </center><p>2006 è‡³ä»Šï¼Œå¤§æ•°æ®åˆ†æçš„éœ€æ±‚ï¼Œç¥ç»ç½‘ç»œåˆè¢«é‡è§†ï¼Œæˆä¸ºæ·±åº¦å­¦ä¹ ç†è®ºçš„åŸºç¡€ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œäººå·¥æ™ºèƒ½åœ¨äººä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­å„ä¸ªé¢†åŸŸçš„æ™®åŠåº¦æ—¥è¶‹å‡é«˜ã€‚ç›¸å¯¹äºåˆæœŸå‘å±•é˜¶æ®µè€Œè¨€ï¼Œäººå·¥æ™ºèƒ½çš„å®ç”¨æ€§ã€åº”ç”¨ä»·å€¼å‡äº§ç”Ÿäº†è¾ƒä¸ºæ˜æ˜¾çš„å˜åŒ–ã€‚<a href="https://www.bilibili.com/video/BV19a411t7vG?spm_id_from=333.337.search-card.all.click">i am AI</a></p><h3 id="ã€æœºå™¨å­¦ä¹ ã€‘"><a href="#ã€æœºå™¨å­¦ä¹ ã€‘" class="headerlink" title="ã€æœºå™¨å­¦ä¹ ã€‘"></a><strong>ã€æœºå™¨å­¦ä¹ ã€‘</strong></h3><p>å¡å†…åŸºæ¢…éš†å¤§å­¦çš„Tom Michael Mitchell æ•™æˆåœ¨ 1997 å¹´å‡ºç‰ˆçš„ä¹¦ç±ã€Šæœºå™¨å­¦ä¹ ã€‹ä¸­å¯¹<strong>æœºå™¨å­¦ä¹ (Machine Learning)</strong> åšäº†éå¸¸ä¸“ä¸šçš„å®šä¹‰ï¼šå¦‚æœä¸€ä¸ªç¨‹åºå¯ä»¥åœ¨ä»»åŠ¡Tä¸Šï¼Œéšç€ç»éªŒEçš„å¢åŠ ï¼Œæ•ˆæœPä¹Ÿå¯ä»¥éšä¹‹å¢åŠ ï¼Œåˆ™ç§°è¿™ä¸ªç¨‹åºå¯ä»¥ä»ç»éªŒä¸­å­¦ä¹ ã€‚ä»¥ä¸‹æ£‹ä¸ºä¾‹ï¼Œè®¾è®¡å‡ºçš„ç¨‹åºå¯ä»¥éšç€å¯¹å¼ˆç›˜æ•°çš„å¢åŠ è€Œä¸æ–­ä¿®æ­£è‡ªå·±çš„ä¸‹æ£‹ç­–ç•¥ï¼Œä½¿å¾—è·èƒœç‡ä¸æ–­æé«˜ï¼Œå°±è®¤ä¸ºè¿™ä¸ªç¨‹åºå¯ä»¥åœ¨ç»éªŒä¸­å­¦ä¹ ã€‚</p><p>æœºå™¨å­¦ä¹ æ˜¯ä»äººå·¥æ™ºèƒ½ä¸­äº§ç”Ÿçš„ä¸€ä¸ªé‡è¦å­¦ç§‘åˆ†æ”¯ï¼Œæ˜¯å®ç°æ™ºèƒ½åŒ–çš„å…³é”®ã€‚</p><p>ä½†ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å­˜åœ¨ç€ä¸å¯é¿å…çš„é—®é¢˜ã€‚ä¼ ç»Ÿæœºå™¨å­¦ä¹ æœ€å…³é”®çš„é—®é¢˜æ˜¯å¿…é¡»ä¾èµ–ç»™å®šæ•°æ®çš„è¡¨ç¤ºï¼Œè€Œå®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°ä»»åŠ¡ä¸­æˆ‘ä»¬å¾ˆéš¾çŸ¥é“åº”è¯¥æå–å“ªäº›ç‰¹å¾ã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³è¦åœ¨ä¸€å †åŠ¨ç‰©çš„å›¾ç‰‡ä¸­è¾¨è®¤å‡ºçŒ«ï¼Œè¯•å›¾é€šè¿‡èƒ¡é¡»ã€è€³æœµã€å°¾å·´ç­‰å…ƒç´ çš„å­˜åœ¨ä¸å¦æ¥è¾¨è®¤ï¼Œä½†å¦‚æœç…§ç‰‡ä¸­å­˜åœ¨å¾ˆå¤šé®æŒ¡ç‰©ï¼Œæˆ–æ˜¯çŒ«çš„å§¿åŠ¿å‘ç”Ÿäº†æ”¹å˜ç­‰ï¼Œéƒ½ä¼šå½±å“åˆ°æœºå™¨è¯†åˆ«ã€‚</p><p>æ‰¾ä¸åˆ°ä¸€ä¸ªåˆç†çš„æ–¹æ³•æå–æ•°æ®ï¼Œè¿™å°±ä½¿å¾—é—®é¢˜å˜å¾—æ£˜æ‰‹ã€‚</p><p>æ·±åº¦å­¦ä¹ é‡‡ç”¨æ·±å±‚ç½‘ç»œç»“æ„ï¼Œå…·å¤‡äº†å¼ºå¤§çš„ç‰¹å¾å­¦ä¹ èƒ½åŠ›ï¼Œä»è€Œè§£å†³äº†æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒé—®é¢˜ã€‚</p><h3 id="ã€æ·±åº¦å­¦ä¹ ã€‘"><a href="#ã€æ·±åº¦å­¦ä¹ ã€‘" class="headerlink" title="ã€æ·±åº¦å­¦ä¹ ã€‘"></a><strong>ã€æ·±åº¦å­¦ä¹ ã€‘</strong></h3><p>æœºå™¨å­¦ä¹ ç®—æ³•ç†è®ºåœ¨ä¸Šä¸ªä¸–çºª90å¹´ä»£å‘å±•æˆç†Ÿï¼Œåœ¨è®¸å¤šé¢†åŸŸéƒ½å–å¾—äº†æˆåŠŸï¼Œä½†å¹³é™çš„æ—¥å­åªå»¶ç»­åˆ°2010å¹´å·¦å³ã€‚éšç€å¤§æ•°æ®çš„æ¶Œç°å’Œè®¡ç®—æœºç®—åŠ›æå‡ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹å¼‚å†›çªèµ·ï¼Œæå¤§æ”¹å˜äº†æœºå™¨å­¦ä¹ çš„åº”ç”¨æ ¼å±€ã€‚ä»Šå¤©ï¼Œå¤šæ•°æœºå™¨å­¦ä¹ ä»»åŠ¡éƒ½å¯ä»¥ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹è§£å†³ï¼Œ<strong>å°¤å…¶åœ¨è¯­éŸ³ã€è®¡ç®—æœºè§†è§‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ•ˆæœæ¯”ä¼ ç»Ÿæœºå™¨å­¦ä¹ ç®—æ³•æœ‰æ˜¾è‘—æå‡</strong>ã€‚</p><p>2016å¹´ï¼ŒAlphaGo å‡»è´¥éŸ©å›½å›´æ£‹å† å†›æä¸–çŸ³ï¼Œåœ¨åª’ä½“æŠ¥é“ä¸­ï¼Œæ›¾å¤šæ¬¡æåŠâ€œæ·±åº¦å­¦ä¹ â€è¿™ä¸ªæ¦‚å¿µã€‚è€Œæ–°ç‰ˆæœ¬çš„AlphaGoZeroï¼Œæ›´å……åˆ†åœ°è¿ç”¨äº†æ·±åº¦å­¦ä¹ æ³•ï¼Œä¸å†ä»äººç±»æ£‹æ‰‹çš„ä»¥å¾€æ£‹è°±è®°å½•ä¸­å¼€å§‹è®­ç»ƒï¼Œè€Œæ˜¯å®Œå…¨é è‡ªå·±çš„å­¦ä¹ ç®—æ³•ï¼Œé€šè¿‡è‡ªæˆ‘å¯¹å¼ˆæ¥å­¦ä¼šä¸‹æ£‹ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„è‡ªæˆ‘å­¦ä¹ ï¼Œå®ƒå°±å‡»è´¥äº†æ›¾æ‰“è´¥æä¸–çŸ³çš„ä»¥åŠæ›¾å®ŒèƒœæŸ¯æ´çš„AlphaGoç‰ˆæœ¬ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d9a67ba8091b4ab8aa757a7b92b4e06acadbaa2efdcf4537aabb883bee735260" width="500" hegiht="" ></center><center>å›¾3ï¼šAlphaGoZero </center><p>æ·±åº¦å­¦ä¹ ä½œä¸ºç›®å‰æœºå™¨å­¦ä¹ é¢†åŸŸæœ€å—å…³æ³¨çš„åˆ†æ”¯ï¼Œæ˜¯ç”¨äºå®ç°äººå·¥æ™ºèƒ½çš„å…³é”®æŠ€æœ¯ï¼Œç›¸æ¯”è¾ƒäºä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ä¸å†éœ€è¦äººå·¥çš„æ–¹å¼æå–ç‰¹å¾ï¼Œè€Œæ˜¯è‡ªåŠ¨ä»ç®€å•ç‰¹å¾ä¸­æå–ï¼Œç»„åˆæ›´å¤æ‚çš„ç‰¹å¾ï¼Œä»æ•°æ®ä¸­å­¦ä¹ åˆ°å¤æ‚çš„ç‰¹å¾è¡¨è¾¾å½¢å¼å¹¶ä½¿ç”¨è¿™äº›ç»„åˆç‰¹å¾è§£å†³é—®é¢˜ã€‚</p><p>é€šè¿‡ä»¥ä¸Šæè¿°å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œæ·±åº¦å­¦ä¹ æ˜¯åŸºäºå¤šå±‚ç¥ç»ç½‘ç»œçš„ã€ä»¥æµ·é‡æ•°æ®ä¸ºè¾“å…¥çš„è§„åˆ™è‡ªå­¦ä¹ æ–¹æ³•ã€‚æ·±åº¦å­¦ä¹ å¯ä»¥è·å¾—æ›´å¥½çš„æ–¹æ³•æ¥è¡¨ç¤ºæ•°æ®çš„ç‰¹å¾ï¼ŒåŒæ—¶ç”±äºæ¨¡å‹çš„å±‚æ¬¡æ·±ã€è¡¨è¾¾èƒ½åŠ›å¼ºï¼Œå› æ­¤æœ‰èƒ½åŠ›å¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚å¯¹äºå›¾åƒã€è¯­éŸ³è¿™ç§ç›´æ¥ç‰¹å¾ä¸æ˜æ˜¾çš„é—®é¢˜ï¼Œæ·±åº¦æ¨¡å‹èƒ½å¤Ÿåœ¨å¤§è§„æ¨¡è®­ç»ƒæ•°æ®ä¸Šå–å¾—æ›´å¥½çš„æ•ˆæœã€‚</p><p>æ—©æœŸçš„æ·±åº¦å­¦ä¹ å¯ä»¥ç†è§£ä¸ºä¼ ç»Ÿç¥ç»ç½‘ç»œçš„æ‹“å±•ï¼ŒäºŒè€…çš„ç›¸åŒä¹‹å¤„åœ¨äºï¼Œæ·±åº¦å­¦ä¹ é‡‡ç”¨äº†ä¸ç¥ç»ç½‘ç»œç›¸ä¼¼çš„åˆ†å±‚ç»“æ„ï¼šåŒ…æ‹¬è¾“å…¥å±‚ã€éšè—å±‚ã€è¾“å‡ºå±‚çš„å¤šå±‚ç½‘ç»œã€‚å…³äºç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬ä¼šåœ¨ä¹‹åçš„ç« èŠ‚å±•å¼€è®ºè¿°ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/520d0ff0b6a24a3db6ada98d294571e9d04a46ec881d48dba21b2689d150647c" width="400" hegiht="" ></center><center>å›¾4ï¼šç¥ç»ç½‘ç»œ </center><h2 id="æ·±åº¦å­¦ä¹ åŸºæœ¬æ¦‚å¿µ"><a href="#æ·±åº¦å­¦ä¹ åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="æ·±åº¦å­¦ä¹ åŸºæœ¬æ¦‚å¿µ"></a><strong>æ·±åº¦å­¦ä¹ åŸºæœ¬æ¦‚å¿µ</strong></h2><h3 id="æ·±åº¦å­¦ä¹ å´›èµ·çš„æ—¶ä»£èƒŒæ™¯"><a href="#æ·±åº¦å­¦ä¹ å´›èµ·çš„æ—¶ä»£èƒŒæ™¯" class="headerlink" title="æ·±åº¦å­¦ä¹ å´›èµ·çš„æ—¶ä»£èƒŒæ™¯"></a><strong>æ·±åº¦å­¦ä¹ å´›èµ·çš„æ—¶ä»£èƒŒæ™¯</strong></h3><p>è°ˆåˆ°æ·±åº¦å­¦ä¹ çš„å†å²ä¸å¾—ä¸è¿½æº¯åˆ°ç¥ç»ç½‘ç»œæŠ€æœ¯ã€‚æ·±åº¦å­¦ä¹ å´›èµ·ä¹‹å‰ï¼Œç¥ç»ç½‘ç»œæ›¾ç»å†ä¸¤æ¬¡é«˜æ½®ä¸ä¸¤æ¬¡ä½è°·ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/71f3874a1720415ba188a0f09a8c8990cd7f8e9caee44d4180ce03921ad1589d" width="700" hegiht="" ></center><center>å›¾5ï¼šç¥ç»ç½‘ç»œçš„å†å² </center><p>çºµä½¿ç¥ç»ç½‘ç»œåˆä¸€æ¬¡è¿›å…¥å¯’å†¬ï¼Œä½†æ°å¼—é‡ŒÂ·è¾›é¡¿ç­‰äººä»ç„¶æ²¡æœ‰æ”¾å¼ƒã€‚2006å¹´ï¼Œè¾›é¡¿åœ¨è®ºæ–‡ <em>A Fast Learning Algorithm for Deep Belief Nets</em> ä¸­ä»‹ç»äº†ä¸€ç§æˆåŠŸè®­ç»ƒå¤šå±‚ç¥ç»ç½‘ç»œçš„æ–¹æ³•ï¼Œä»–å°†è¿™ç§ç¥ç»ç½‘ç»œæˆä¸ºæ·±åº¦ä¿¡å¿µç½‘ç»œã€‚</p><p>è¾›é¡¿æå‡ºäº†ä¸¤ä¸ªè§‚ç‚¹ï¼šâ‘ å¤šå±‚äººå·¥ç¥ç»ç½‘ç»œæ¨¡å‹æœ‰å¾ˆå¼ºçš„ç‰¹å¾å­¦ä¹ èƒ½åŠ›ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹å¾—åˆ°çš„ç‰¹å¾æ•°æ®ç›¸å¯¹äºåŸå§‹æ•°æ®æœ‰æ›´æœ¬è´¨çš„ä»£è¡¨æ€§ï¼Œè¿™å°†å¤§å¤§æé«˜åˆ†ç±»è¯†åˆ«çš„èƒ½åŠ›ï¼›â‘¡å¯¹äºæ·±åº¦ç¥ç»ç½‘ç»œå¾ˆéš¾é€šè¿‡è®­ç»ƒè¾¾åˆ°æœ€ä¼˜çš„é—®é¢˜ï¼Œå¯ä»¥é‡‡å–é€å±‚è®­ç»ƒçš„æ–¹æ³•è§£å†³ï¼Œå°†ä¸Šä¸€å±‚è®­ç»ƒå¥½çš„ç»“æœä½œä¸ºä¸‹å±‚è®­ç»ƒè¿‡ç¨‹ä¸­çš„åˆå§‹åŒ–å‚æ•°ã€‚</p><p>ç”±æ­¤ï¼Œç¥ç»ç½‘ç»œå®ç°äº†æœ€æ–°çš„ä¸€æ¬¡çªç ´â€”â€”æ·±åº¦å­¦ä¹ ã€‚</p><p>æ·±åº¦å­¦ä¹ çš„è¯ç”Ÿä¼´éšç€æ›´ä¼˜åŒ–çš„ç®—æ³•ã€æ›´é«˜æ€§èƒ½çš„è®¡ç®—èƒ½åŠ›(GPU)å’Œæ›´å¤§çš„æ•°æ®é›†çš„æ—¶ä»£èƒŒæ™¯ã€‚ä½¿ç”¨GPUé›†ç¾¤å¯ä»¥å°†åŸæ¥ä¸€ä¸ªæœˆæ‰èƒ½è®­ç»ƒå‡ºçš„ç½‘ç»œåŠ é€Ÿåˆ°å‡ å°æ—¶å°±èƒ½å®Œæˆï¼Œé™¤äº†ç¡¬ä»¶çš„é£é€Ÿå‘å±•ä¸ºå…¶æä¾›æ¡ä»¶ä»¥å¤–ï¼Œæ·±åº¦å­¦ä¹ è¿˜å¾—åˆ°äº†å……åˆ†çš„ç‡ƒæ–™ï¼šå¤§æ•°æ®ã€‚ç›¸è¾ƒä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œï¼Œå°½ç®¡åœ¨ç®—æ³•ä¸Šæˆ‘ä»¬ç¡®å®ç®€åŒ–äº†æ·±åº¦æ¶æ„çš„è®­ç»ƒï¼Œä½†æœ€é‡è¦çš„è¿›å±•è¿˜æ˜¯æˆ‘ä»¬æœ‰äº†æˆåŠŸè®­ç»ƒè¿™äº›ç®—æ³•çš„èµ„æºã€‚å¯ä»¥è¯´ï¼Œäººå·¥æ™ºèƒ½åªæœ‰åœ¨æ•°æ®çš„é©±åŠ¨ä¸‹æ‰èƒ½å®ç°æ·±åº¦å­¦ä¹ ï¼Œä¸æ–­è¿­ä»£æ¨¡å‹ï¼Œå˜å¾—è¶Šæ¥è¶Šæ™ºèƒ½ã€‚</p><p>å› æ­¤ï¼Œæƒ³è¦æŒç»­å‘å±•æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œç®—æ³•ã€ç¡¬ä»¶å’Œå¤§æ•°æ®ç¼ºä¸€ä¸å¯ã€‚</p><h3 id="å¸¸è§çš„æ·±åº¦å­¦ä¹ ç½‘ç»œç»“æ„"><a href="#å¸¸è§çš„æ·±åº¦å­¦ä¹ ç½‘ç»œç»“æ„" class="headerlink" title="å¸¸è§çš„æ·±åº¦å­¦ä¹ ç½‘ç»œç»“æ„"></a><strong>å¸¸è§çš„æ·±åº¦å­¦ä¹ ç½‘ç»œç»“æ„</strong></h3><p>æ·±åº¦å­¦ä¹ å¯ä»¥åº”ç”¨åœ¨å„å¤§é¢†åŸŸä¸­ï¼Œæ ¹æ®åº”ç”¨çš„æƒ…å†µä¸åŒï¼Œæ·±åº¦ç¥ç»ç½‘ç»œçš„å½¢æ€ä¹Ÿå„ä¸ç›¸åŒã€‚å¸¸è§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ä¸»è¦æœ‰<strong>å…¨è¿æ¥ç¥ç»ç½‘ç»œ(Fully Connected Netural Network,FCN)</strong> ã€<strong>å·ç§¯ç¥ç»ç½‘ç»œ(convolutional neural network, CNN)</strong> å’Œ<strong>å¾ªç¯ç¥ç»ç½‘ç»œ(Recurrent neural network,RNN)</strong> ã€‚ä»–ä»¬å‡æœ‰ç€è‡ªèº«çš„ç‰¹ç‚¹ï¼Œå¹¶åœ¨ä¸åŒçš„åœºæ™¯ä¸­å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ã€‚</p><h4 id="ã€å…¨è¿æ¥ç¥ç»ç½‘ç»œã€‘"><a href="#ã€å…¨è¿æ¥ç¥ç»ç½‘ç»œã€‘" class="headerlink" title="ã€å…¨è¿æ¥ç¥ç»ç½‘ç»œã€‘"></a><strong>ã€å…¨è¿æ¥ç¥ç»ç½‘ç»œã€‘</strong></h4><blockquote><p>éå¸¸é€‚ç”¨äºç®€å•çš„æ¨¡å‹ï¼Œåœ¨æ•°å­¦å»ºæ¨¡çš„è¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ¯”è¾ƒå¤šã€‚</p></blockquote><p>å…¨è¿æ¥ç¥ç»ç½‘ç»œæ˜¯ä¸€ç§è¿æ¥æ–¹å¼è¾ƒä¸ºç®€å•çš„äººå·¥ç¥ç»ç½‘ç»œç»“æ„ï¼Œå…¨è¿æ¥å±‚çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¸ä¸Šä¸€å±‚çš„æ‰€æœ‰èŠ‚ç‚¹ç›¸è¿ã€‚<strong>å¤šå±‚æ„ŸçŸ¥æœº(Multi-Layer Perception,MLP)</strong> å°±å±äºå…¨è¿æ¥ç½‘ç»œï¼ŒMLP ç½‘ç»œæ˜¯å¯ä»¥åº”ç”¨äºå‡ ä¹æ‰€æœ‰ä»»åŠ¡çš„å¤šåŠŸèƒ½å­¦ä¹ æ–¹æ³•ï¼ŒåŒ…æ‹¬åˆ†ç±»ã€å›å½’ï¼Œç”šè‡³æ˜¯æ— ç›‘ç£å­¦ä¹ ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/41e0c82504b049d5bb9334247c9503bd367e92aaf4b548bba06db891d92ee1de" width="400" hegiht="" ></center><center>å›¾6ï¼šå…¨è¿æ¥ç¥ç»ç½‘ç»œ </center><p>ç„¶è€Œç”±äºå…¨è¿æ¥å±‚æ‰€æœ‰çš„è¾“å‡ºå’Œè¾“å…¥éƒ½æ˜¯ç›¸è¿çš„ï¼Œä¸€èˆ¬å…¨è¿æ¥å±‚çš„å‚æ•°æ˜¯æœ€å¤šçš„ï¼Œè¿™éœ€è¦ç›¸å½“æ•°é‡çš„å­˜å‚¨å’Œè®¡ç®—ç©ºé—´ã€‚å‚æ•°çš„å†—æ‚é—®é¢˜ä½¿å¾—å•çº¯çš„FCç»„æˆçš„å¸¸è§„ç¥ç»ç½‘ç»œå¾ˆå°‘ä¼šè¢«ç”¨äºè¾ƒä¸ºå¤æ‚çš„åœºæ™¯ä¸­ã€‚å¸¸è§„ç¥ç»ç½‘ç»œä¸€èˆ¬ç”¨äºä¾èµ–æ‰€æœ‰ç‰¹å¾çš„ç®€å•åœºæ™¯ï¼Œæ¯”å¦‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šä»‹ç»çš„æˆ¿ä»·é¢„æµ‹æ¨¡å‹ä½¿ç”¨çš„å°±æ˜¯ç›¸å¯¹æ ‡å‡†çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œã€‚</p><h4 id="ã€å·ç§¯ç¥ç»ç½‘ç»œã€‘"><a href="#ã€å·ç§¯ç¥ç»ç½‘ç»œã€‘" class="headerlink" title="ã€å·ç§¯ç¥ç»ç½‘ç»œã€‘"></a><strong>ã€å·ç§¯ç¥ç»ç½‘ç»œã€‘</strong></h4><blockquote><p>å¯ä»¥å‡å°‘å…¨è¿æ¥ç¥ç»ç½‘ç»œçš„å‚æ•°é‡ï¼›</p><p>ä¸»è¦é’ˆå¯¹å‚æ•°ä¸å‚æ•°ä¹‹é—´ã€ç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´æœ‰ç›¸äº’è¿ç»“çš„æ•°æ®ï¼›</p><p>ä¸“é—¨ç”¨æ¥å¤„ç†è®¡ç®—æœºè§†è§‰é—®é¢˜ã€‚</p></blockquote><p>å·ç§¯ç¥ç»ç½‘ç»œæ˜¯ä¸€ç§ä¸“é—¨ç”¨æ¥å¤„ç†å…·æœ‰ç±»ä¼¼ç½‘ç»œç»“æ„çš„æ•°æ®çš„ç¥ç»ç½‘ç»œï¼Œå¦‚å›¾åƒæ•°æ®ã€‚ä¸FCä¸åŒçš„åœ°æ–¹åœ¨äºï¼ŒCNNçš„ä¸Šä¸‹å±‚ç¥ç»å…ƒå¹¶ä¸éƒ½èƒ½ç›´æ¥è¿æ¥ï¼Œè€Œæ˜¯é€šè¿‡<strong>å·ç§¯æ ¸(convolution kernel)</strong> ä½œä¸ºä¸­ä»‹ï¼Œé€šè¿‡æ ¸çš„å…±äº«ï¼Œå¤§å¤§å‡å°‘äº†éšè—å±‚çš„å‚æ•°ã€‚</p><p>ç®€å•çš„CNNæ˜¯ä¸€ç³»åˆ—å±‚ï¼Œå¹¶ä¸”æ¯ä¸ªå±‚éƒ½é€šè¿‡ä¸€ä¸ªå¯å¾®å‡½æ•°å°†ä¸€ä¸ªé‡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªé‡ï¼Œè¿™äº›å±‚ä¸»è¦åŒ…æ‹¬å·ç§¯å±‚(Convolutional layer)ã€æ± åŒ–å±‚(Pooling layer) å’Œå…¨è¿æ¥å±‚(FC layer) ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/b5fe80963f054e8daa3c0f03014339f48ffd35c76fee4d43926d03c2c7564d3b" width="400" hegiht="" ></center><center>å›¾7ï¼šå·ç§¯ç¥ç»ç½‘ç»œ </center><h4 id="ã€å¾ªç¯ç¥ç»ç½‘ç»œã€‘"><a href="#ã€å¾ªç¯ç¥ç»ç½‘ç»œã€‘" class="headerlink" title="ã€å¾ªç¯ç¥ç»ç½‘ç»œã€‘"></a><strong>ã€å¾ªç¯ç¥ç»ç½‘ç»œã€‘</strong></h4><blockquote><p> ä¸“é—¨ç”¨æ¥å¤„ç†è‡ªç„¶è¯­è¨€æ–¹é¢çš„é—®é¢˜ã€‚</p></blockquote><p>å¾ªç¯ç¥ç»ç½‘ç»œä¹Ÿæ˜¯å¸¸ç”¨çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ä¹‹ä¸€ï¼Œå°±åƒCNNæ˜¯ä¸“é—¨ç”¨äºå¤„ç†ç½‘æ ¼åŒ–æ•°æ®çš„ç¥ç»ç½‘ç»œï¼ŒRNNæ˜¯ä¸€ç§ç”¨äºå¤„ç†åºåˆ—æ•°æ®çš„ç¥ç»ç½‘ç»œã€‚å¦‚éŸ³é¢‘ä¸­å«æœ‰æ—¶é—´æˆåˆ†ï¼Œå› æ­¤éŸ³é¢‘å¯ä»¥è¢«è¡¨ç¤ºä¸ºä¸€ç»´æ—¶é—´åºåˆ—ï¼›è¯­è¨€ä¸­çš„å•è¯éƒ½æ˜¯é€ä¸ªå‡ºç°çš„ï¼Œå› æ­¤è¯­è¨€çš„è¡¨ç¤ºæ–¹å¼ä¹Ÿæ˜¯åºåˆ—æ•°æ®ã€‚RNNåœ¨æœºå™¨ç¿»è¯‘ã€è¯­éŸ³è¯†åˆ«ç­‰é¢†åŸŸä¸­å‡æœ‰éå¸¸å¥½çš„è¡¨ç°ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/771862d38d94418dac47b6a19a335c6020293de0d2594ce6bd6521ce774bc15d" width="400" hegiht="" ></center><center>å›¾8ï¼šå¾ªç¯ç¥ç»ç½‘ç»œ </center><h2 id="æœºå™¨å­¦ä¹ åŸºç¡€"><a href="#æœºå™¨å­¦ä¹ åŸºç¡€" class="headerlink" title="æœºå™¨å­¦ä¹ åŸºç¡€"></a><strong>æœºå™¨å­¦ä¹ åŸºç¡€</strong></h2><p>åœ¨äº†è§£äº†æ·±åº¦å­¦ä¹ çš„æ¦‚å¿µä¹‹åï¼Œæœ¬èŠ‚å°†ä¼šä»¥æœºå™¨å­¦ä¹ çš„ç›¸å…³æ¦‚å¿µä½œä¸ºåˆ‡å…¥ç‚¹ï¼Œæ¥ä½¿ç”¨ä»£ç å®ç°åŸºæœ¬çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œè¿™äº›å®éªŒæ–¹æ³•åœ¨æ·±åº¦å­¦ä¹ ä¸­ä¹ŸåŒæ ·ä½¿ç”¨ã€‚</p><h3 id="æœºå™¨å­¦ä¹ ä¸€èˆ¬è¿‡ç¨‹"><a href="#æœºå™¨å­¦ä¹ ä¸€èˆ¬è¿‡ç¨‹" class="headerlink" title="æœºå™¨å­¦ä¹ ä¸€èˆ¬è¿‡ç¨‹"></a><strong>æœºå™¨å­¦ä¹ ä¸€èˆ¬è¿‡ç¨‹</strong></h3><p><strong>æœºå™¨å­¦ä¹ </strong>æœ‰ä¸‰ä¸ªä¸»è¦çš„ç»„æˆéƒ¨åˆ†ï¼šç»éªŒExperienceï¼ˆEï¼‰ã€ä»»åŠ¡Taskï¼ˆTï¼‰ã€ä»»åŠ¡å®Œæˆæ•ˆæœçš„è¡¡é‡æŒ‡æ ‡Performance measureï¼ˆPï¼‰ã€‚æœ‰äº†è¿™ä¸‰ä¸ªæ¦‚å¿µï¼Œæœºå™¨å­¦ä¹ çš„å®šä¹‰å¯ä»¥è¡¨è¿°ä¸ºï¼šåœ¨æœ‰äº†ç»éªŒEçš„å¸®åŠ©åï¼Œæœºå™¨å®Œæˆä»»åŠ¡Tçš„è¡¡é‡æŒ‡æ ‡Pä¼šå˜å¾—æ›´å¥½ã€‚</p><p>æœ¬èŠ‚ä»æ„é€ æ¨¡å‹çš„è§’åº¦å°†æœºå™¨å­¦ä¹ ç†è§£ä¸ºï¼š<strong>ä»æ•°æ®ä¸­äº§ç”Ÿæ¨¡å‹çš„è¿‡ç¨‹</strong>ã€‚æœºå™¨å­¦ä¹ çš„è¿‡ç¨‹å¦‚ä¸‹ï¼šè¾“å…¥è®­ç»ƒæ•°æ®ï¼Œåˆ©ç”¨ç‰¹å®šçš„æœºå™¨å­¦ä¹ æ–¹æ³•å»ºç«‹ä¼°è®¡å‡½æ•°ã€‚åœ¨è®­ç»ƒå¾—åˆ°å‡½æ•°åï¼Œå¯å°†æµ‹è¯•æ•°æ®è¾“å…¥è¯¥å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¾“å‡ºå³é¢„æµ‹ç»“æœã€‚</p><h3 id="æœºå™¨å­¦ä¹ çš„æ–¹æ³•"><a href="#æœºå™¨å­¦ä¹ çš„æ–¹æ³•" class="headerlink" title="æœºå™¨å­¦ä¹ çš„æ–¹æ³•"></a><strong>æœºå™¨å­¦ä¹ çš„æ–¹æ³•</strong></h3><p><strong>ï¼ˆ1ï¼‰æœ‰ç›‘ç£å­¦ä¹ ï¼ˆsupervised learningï¼‰</strong></p><p>ä»ç»™å®šçš„æœ‰æ ‡æ³¨çš„è®­ç»ƒæ•°æ®é›†ä¸­å­¦ä¹ å‡ºä¸€ä¸ªå‡½æ•°ï¼ˆæ¨¡å‹å‚æ•°ï¼‰ï¼Œå½“æ–°çš„æ•°æ®åˆ°æ¥æ—¶å¯ä»¥æ ¹æ®è¿™ä¸ªå‡½æ•°é¢„æµ‹ç»“æœã€‚ å¸¸è§ä»»åŠ¡åŒ…æ‹¬<strong>åˆ†ç±»</strong>ä¸<strong>å›å½’</strong>ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/d0a76f00ccad4c69a463f2b08130daf9c0d03e4340ee41cab6d48b554f789dd5" width="600" hegiht="" ></center><center>å›¾9ï¼šæœ‰ç›‘ç£å­¦ä¹  </center><p><strong>ï¼ˆ2ï¼‰æ— ç›‘ç£å­¦ä¹ ï¼ˆunsupervised learningï¼‰</strong></p><p>ä½¿ç”¨æ²¡æœ‰æ ‡æ³¨çš„è®­ç»ƒæ•°æ®é›†ï¼Œéœ€è¦æ ¹æ®æ ·æœ¬é—´çš„ç»Ÿè®¡è§„å¾‹å¯¹æ ·æœ¬é›†è¿›è¡Œåˆ†æï¼Œå¸¸è§ä»»åŠ¡å¦‚<strong>èšç±»</strong>ç­‰ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/500f4125efef4dd28357cddb05b2d0683c4ad0ae629948e886c66ba5bf679c71" width="600" hegiht="" ></center><center>å›¾10ï¼šæ— ç›‘ç£å­¦ä¹  </center><p><strong>ï¼ˆ3ï¼‰åŠç›‘ç£å­¦ä¹ ï¼ˆSemi-supervised learningï¼‰</strong></p><p>ç»“åˆï¼ˆå°‘é‡çš„ï¼‰<strong>æ ‡æ³¨è®­ç»ƒæ•°æ®</strong>å’Œï¼ˆå¤§é‡çš„ï¼‰<strong>æœªæ ‡æ³¨æ•°æ®</strong>æ¥è¿›è¡Œæ•°æ®çš„åˆ†ç±»å­¦ä¹ ã€‚</p><p><strong>ï¼ˆ4ï¼‰å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼‰</strong></p><p>å¤–éƒ¨ç¯å¢ƒå¯¹è¾“å‡ºåªç»™å‡ºè¯„ä»·ä¿¡æ¯è€Œéæ­£ç¡®ç­”æ¡ˆï¼Œå­¦ä¹ æœºé€šè¿‡å¼ºåŒ–å—å¥–åŠ±çš„åŠ¨ä½œæ¥æ”¹å–„è‡ªèº«çš„æ€§èƒ½ã€‚</p><p>å¦‚ï¼šè®©è®¡ç®—æœºå­¦ç€å»ç©Flappy Bird</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/25feff85710d4ee996fde5bc921b387e17e7185322e0445082a54ea4af355282" width="400" hegiht="" ></center><center>å›¾11ï¼šFlappy Bird æ¸¸æˆ </center><p>æˆ‘ä»¬ä¸éœ€è¦è®¾ç½®å…·ä½“çš„ç­–ç•¥ï¼Œæ¯”å¦‚å…ˆé£åˆ°ä¸Šé¢ï¼Œå†é£åˆ°ä¸‹é¢ï¼Œæˆ‘ä»¬åªæ˜¯éœ€è¦ç»™ç®—æ³•å®šä¸€ä¸ªâ€œå°ç›®æ ‡â€ï¼æ¯”å¦‚å½“è®¡ç®—æœºç©çš„å¥½çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ç»™å®ƒä¸€å®šçš„å¥–åŠ±ï¼Œå®ƒç©çš„ä¸å¥½çš„æ—¶å€™ï¼Œå°±ç»™å®ƒä¸€å®šçš„æƒ©ç½šï¼Œåœ¨è¿™ä¸ªç®—æ³•æ¡†æ¶ä¸‹ï¼Œå®ƒå°±å¯ä»¥è¶Šæ¥è¶Šå¥½ï¼Œè¶…è¿‡äººç±»ç©å®¶çš„æ°´å¹³ã€‚</p><h3 id="æœºå™¨å­¦ä¹ çš„å‡†å¤‡"><a href="#æœºå™¨å­¦ä¹ çš„å‡†å¤‡" class="headerlink" title="æœºå™¨å­¦ä¹ çš„å‡†å¤‡"></a><strong>æœºå™¨å­¦ä¹ çš„å‡†å¤‡</strong></h3><p>æœºå™¨å­¦ä¹ çš„å®ç°å¯ä»¥åˆ†æˆä¸¤æ­¥ï¼š<strong>è®­ç»ƒå’Œé¢„æµ‹</strong>ï¼Œç±»ä¼¼äºå½’çº³å’Œæ¼”ç»ï¼š</p><p><strong>å½’çº³</strong>ï¼š ä»å…·ä½“æ¡ˆä¾‹ä¸­æŠ½è±¡ä¸€èˆ¬è§„å¾‹ï¼Œæœºå™¨å­¦ä¹ ä¸­çš„â€œè®­ç»ƒâ€äº¦æ˜¯å¦‚æ­¤ã€‚ä»ä¸€å®šæ•°é‡çš„æ ·æœ¬ï¼ˆå·²çŸ¥æ¨¡å‹è¾“å…¥$X$å’Œæ¨¡å‹è¾“å‡º$Y$ï¼‰ä¸­ï¼Œå­¦ä¹ è¾“å‡º$Y$ä¸è¾“å…¥$X$çš„å…³ç³»ï¼ˆå¯ä»¥æƒ³è±¡æˆæ˜¯æŸç§è¡¨è¾¾å¼ï¼‰ã€‚</p><p><strong>æ¼”ç»</strong>ï¼š ä»ä¸€èˆ¬è§„å¾‹æ¨å¯¼å‡ºå…·ä½“æ¡ˆä¾‹çš„ç»“æœï¼Œæœºå™¨å­¦ä¹ ä¸­çš„â€œé¢„æµ‹â€äº¦æ˜¯å¦‚æ­¤ã€‚åŸºäºè®­ç»ƒå¾—åˆ°çš„$Y$ä¸$X$ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚å‡ºç°æ–°çš„è¾“å…¥$X$ï¼Œè®¡ç®—å‡ºè¾“å‡º$Y$ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœé€šè¿‡æ¨¡å‹è®¡ç®—çš„è¾“å‡ºå’ŒçœŸå®åœºæ™¯çš„è¾“å‡ºä¸€è‡´ï¼Œåˆ™è¯´æ˜æ¨¡å‹æ˜¯æœ‰æ•ˆçš„ã€‚</p><h4 id="ã€ç‰¹å¾å·¥ç¨‹ã€‘"><a href="#ã€ç‰¹å¾å·¥ç¨‹ã€‘" class="headerlink" title="ã€ç‰¹å¾å·¥ç¨‹ã€‘"></a><strong>ã€ç‰¹å¾å·¥ç¨‹ã€‘</strong></h4><center><img src="https://ai-studio-static-online.cdn.bcebos.com/194042801ccc44a2813758d7c58abbd19d564785361f44708a4751c2b4440ce7" width="500" hegiht="" ></center><center>å›¾13ï¼šäººçœ‹åˆ°çš„å›¾åƒ </center><center><img src="https://ai-studio-static-online.cdn.bcebos.com/faf29e181a5a48abb2d5671e2abbacb0db378c4f242f466a8b1c9cb9cd305fa5" width="500" hegiht="" ></center><center>å›¾14ï¼šè®¡ç®—æœºçœ‹åˆ°çš„å›¾åƒ </center><p>ç‰¹å¾å·¥ç¨‹ï¼Œæ˜¯æŒ‡ç”¨ä¸€ç³»åˆ—å·¥ç¨‹åŒ–çš„æ–¹å¼ä»åŸå§‹æ•°æ®ä¸­ç­›é€‰å‡ºæ›´å¥½çš„æ•°æ®ç‰¹å¾ï¼Œä»¥æå‡æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚ä¸šå†…æœ‰ä¸€å¥å¹¿ä¸ºæµä¼ çš„è¯æ˜¯ï¼šæ•°æ®å’Œç‰¹å¾å†³å®šäº†æœºå™¨å­¦ä¹ çš„ä¸Šé™ï¼Œè€Œæ¨¡å‹å’Œç®—æ³•æ˜¯åœ¨é€¼è¿‘è¿™ä¸ªä¸Šé™è€Œå·²ã€‚ç”±æ­¤å¯è§ï¼Œå¥½çš„æ•°æ®å’Œç‰¹å¾æ˜¯æ¨¡å‹å’Œç®—æ³•å‘æŒ¥æ›´å¤§çš„ä½œç”¨çš„å‰æã€‚</p><p>ç‰¹å¾å·¥ç¨‹é€šå¸¸åŒ…æ‹¬æ•°æ®é¢„å¤„ç†ã€ç‰¹å¾é€‰æ‹©ã€é™ç»´ç­‰ç¯èŠ‚ã€‚</p><p><strong>1.æ•°æ®é¢„å¤„ç†</strong></p><p>çœŸå®ä¸–ç•Œçš„æ•°æ®é€šå¸¸åŒ…å«å™ªå£°ã€ç¼ºå¤±å€¼ï¼Œå¹¶ä¸”å¯èƒ½é‡‡ç”¨æ— æ³•ç›´æ¥ç”¨äºæœºå™¨å­¦ä¹ æ¨¡å‹çš„ä¸å¯ç”¨æ ¼å¼ï¼ˆä¾‹å¦‚ï¼šå›¾åƒï¼‰ã€‚å½“æ”¶é›†åˆ°çœŸå®æ•°æ®åï¼Œå¾€å¾€ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œè¦æ ¹æ®æ•°æ®çš„å…·ä½“æƒ…å†µæ¥è¿›è¡Œé’ˆå¯¹æ€§çš„å¤„ç†ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/3a07e61dee96471eb52e59726f8e30717a151c0c32f94156a9361e996e6535f1" width="400" hegiht="" ></center><center>å›¾15ï¼šæ•°æ®é¢„å¤„ç† </center><ol><li>æ•°æ®æ¸…æ´—<br>å¯¹å„ç§è„æ•°æ®è¿›è¡Œå¯¹åº”æ–¹å¼çš„å¤„ç†ï¼Œå¾—åˆ°æ ‡å‡†ã€å¹²å‡€ã€è¿ç»­çš„æ•°æ®ï¼Œæä¾›ç»™æ•°æ®ç»Ÿè®¡ã€æ•°æ®æŒ–æ˜ç­‰ä½¿ç”¨ã€‚æ•°æ®çš„å®Œæ•´æ€§ã€æ•°æ®çš„åˆæ³•æ€§ã€æ•°æ®çš„å”¯ä¸€æ€§ã€æ•°æ®çš„æƒå¨æ€§ä»¥åŠæ•°æ®çš„ä¸€è‡´æ€§ç­‰ã€‚</li><li>æ•°æ®é‡‡æ ·<br>è¦é¿å…æ•°æ®çš„ä¸å¹³è¡¡ï¼ˆæ•°æ®é›†çš„ç±»åˆ«åˆ†å¸ƒä¸å‡ï¼‰ã€‚</li><li>æ•°æ®é›†æ‹†åˆ†<br>è®­ç»ƒæ•°æ®é›†ã€éªŒè¯æ•°æ®é›†ã€æµ‹è¯•æ•°æ®é›†ã€‚$K$-æŠ˜äº¤å‰éªŒè¯æ³•ï¼šæŠŠè®­ç»ƒæ ·ä¾‹åˆ†æˆ$k$ä»½ï¼Œç„¶åè¿›è¡Œ$K$æ¬¡äº¤å‰éªŒè¯è¿‡ç¨‹ï¼Œæ¯æ¬¡ä½¿ç”¨ä¸åŒçš„ä¸€ä»½æ ·æœ¬ä½œä¸ºéªŒè¯é›†åˆï¼Œå…¶ä½™$k-1$ä»½æ ·æœ¬åˆå¹¶ä½œä¸ºè®­ç»ƒé›†åˆã€‚</li></ol><p><strong>2.ç‰¹å¾é€‰æ‹©</strong></p><p>è¯·çœ‹ä¸‹é¢è¿™å¼ å›¾ç‰‡å¹¶æ€è€ƒï¼Œæ‰€æœ‰ç‰¹å¾éƒ½æœ‰ç”¨å—ï¼Ÿ</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f258b1e2ca2745dbb729055e99904dd0d11f22146e5c455bb9a917ba717ca015" width="600" hegiht="" ></center><center>å›¾16ï¼šç‰¹å¾é€‰æ‹© </center><p>ç‰¹å¾é€‰æ‹©æ–¹æ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œç›´æ¥å°†ä¸é‡è¦çš„ç‰¹å¾åˆ é™¤ã€‚ç‰¹å¾é€‰æ‹©æ–¹æ³•ä¸»è¦åŒ…æ‹¬ä¸‰å¤§ç±»ï¼š<strong>è¿‡æ»¤æ³•(Filter)<strong>ã€</strong>åŒ…è£…æ³•(Wrapper)</strong> å’Œ**åµŒå…¥æ³•(Embedded)**ã€‚</p><ol><li>è¿‡æ»¤æ³•ï¼šæ ¹æ®å‘æ•£æ€§æˆ–è€…ç›¸å…³æ€§å¯¹å„ä¸ªç‰¹å¾è¿›è¡Œè¯„åˆ†ï¼Œé€šè¿‡è®¾å®šé˜ˆå€¼æˆ–è€…å¾…é€‰æ‹©é˜ˆå€¼çš„ä¸ªæ•°æ¥é€‰æ‹©ç‰¹å¾ã€‚</li><li>åŒ…è£…æ³•ï¼šæ ¹æ®ç›®æ ‡å‡½æ•°(é€šå¸¸æ˜¯é¢„æµ‹æ•ˆæœè¯„åˆ†)æ¯æ¬¡é€‰æ‹©è‹¥å¹²ç‰¹å¾ï¼Œæˆ–è€…æ’é™¤è‹¥å¹²ç‰¹å¾ã€‚åŒ…è£…æ³•çš„æ€è·¯æ˜¯å°†æœ€ç»ˆè¦ç”¨çš„å­¦ä¹ å™¨çš„æ€§èƒ½ä½œä¸ºç‰¹å¾å­é›†çš„è¯„ä»·å‡†åˆ™ã€‚</li><li>åµŒå…¥æ³•ï¼šæ˜¯ä¸€ç§è®©ç®—æ³•è‡ªå·±å†³å®šä½¿ç”¨å“ªäº›ç‰¹å¾çš„æ–¹æ³•ï¼Œå³ç‰¹å¾é€‰æ‹©å’Œç®—æ³•è®­ç»ƒåŒæ—¶è¿›è¡Œã€‚åœ¨ä½¿ç”¨åµŒå…¥æ³•æ—¶ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨æŸäº›æœºå™¨å­¦ä¹ çš„ç®—æ³•å’Œæ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå¾—åˆ°å„ä¸ªç‰¹å¾çš„æƒå€¼ç³»æ•°ï¼Œæ ¹æ®æƒå€¼ç³»æ•°ä»å¤§åˆ°å°é€‰æ‹©ç‰¹å¾ã€‚</li></ol><p><strong>3.ç‰¹å¾é™ç»´</strong></p><p>ç‰¹å¾é€‰æ‹©å®Œæˆåï¼Œå¯èƒ½ç”±äºç‰¹å¾çŸ©é˜µè¿‡å¤§ï¼Œå¯¼è‡´è®¡ç®—é‡å¤§ã€è®­ç»ƒæ—¶é—´é•¿ï¼Œå› æ­¤é™ä½ç‰¹å¾çŸ©é˜µç»´åº¦ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚ç‰¹å¾é™ç»´ä¸»è¦æ˜¯é€šè¿‡æ˜ å°„å˜æ¢æ–¹æ³•ï¼Œå°†é«˜ç»´ç‰¹å¾å‘é‡ç©ºé—´æ˜ å°„åˆ°ä½ç»´ç‰¹å¾å‘é‡ç©ºé—´ä¸­å»ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•äº§ç”Ÿçš„çš„ç‰¹å¾éƒ½ä¸åœ¨åŸå§‹æ•°æ®ä¸­ã€‚</p><p><strong>4.ç‰¹å¾ç¼–ç </strong></p><p>æ•°æ®é›†ä¸­ç»å¸¸ä¼šå‡ºç°å­—ç¬¦ä¸²ä¿¡æ¯ï¼Œä¾‹å¦‚ç”·å¥³ã€é«˜ä¸­ä½ç­‰ï¼Œè¿™ç±»ä¿¡æ¯ä¸èƒ½ç›´æ¥ç”¨äºç®—æ³•è®¡ç®—ï¼Œéœ€è¦å°†è¿™äº›æ•°æ®è½¬åŒ–ä¸ºæ•°å€¼å½¢å¼è¿›è¡Œç¼–ç ï¼Œä¾¿äºåæœŸè¿›è¡Œå»ºæ¨¡ã€‚</p><blockquote><p>**ç‹¬çƒ­ç¼–ç (one-hot)**ï¼šå›¾ä¸­çš„Elevatorå’ŒRenovationéƒ½æ˜¯å®šç±»å‹æ•°æ®ã€‚é™¤å»ç¼ºå¤±å€¼ï¼ŒElevatoråˆ†ç±»æœ‰ç”µæ¢¯å’Œæ— ç”µæ¢¯ä¸¤ç§ï¼Œå› æ­¤å¯ç”¨01å’Œ10è¡¨ç¤ºã€‚Renovationåˆ†ä¸ºæœ‰ç²¾è£…ï¼Œç®€è£…ï¼Œæ¯›å¯å’Œå…¶å®ƒå››ç§ï¼Œå¯ç”¨0001&#x2F;0010&#x2F;0100&#x2F;1000è¡¨ç¤ºã€‚</p></blockquote><center><img src="https://ai-studio-static-online.cdn.bcebos.com/f4e28298e89f4d749dd4f68fe6c6fbb2bf5b6cb759fc4d809cae0b9e0ca2527e" width="800" hegiht="" ></center><center>å›¾17ï¼šç‹¬çƒ­ç¼–ç  </center><h4 id="ã€æ•°æ®å»ºæ¨¡ã€‘"><a href="#ã€æ•°æ®å»ºæ¨¡ã€‘" class="headerlink" title="ã€æ•°æ®å»ºæ¨¡ã€‘"></a><strong>ã€æ•°æ®å»ºæ¨¡ã€‘</strong></h4><p>ä¸–ç•Œä¸Šçš„å¯èƒ½å…³ç³»åƒåƒä¸‡ï¼Œæ¼«æ— ç›®æ ‡çš„è¯•æ¢$Y$~$X$ä¹‹é—´çš„å…³ç³»æ˜¾ç„¶æ˜¯ååˆ†ä½æ•ˆçš„ã€‚å› æ­¤å‡è®¾ç©ºé—´å…ˆåœˆå®šäº†ä¸€ä¸ªæ¨¡å‹èƒ½å¤Ÿè¡¨è¾¾çš„å…³ç³»å¯èƒ½ã€‚ä¸»è¦çš„æ•°æ®æ¨¡å‹æœ‰ä¸¤ç±»ï¼š<strong>åˆ†ç±»é—®é¢˜</strong>å’Œ<strong>å›å½’é—®é¢˜</strong>ã€‚</p><p><strong>åˆ†ç±»é—®é¢˜</strong>ï¼šåˆ†ç±»é—®é¢˜æ˜¯ç›‘ç£å­¦ä¹ çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œå®ƒä»æ•°æ®ä¸­å­¦ä¹ ä¸€ä¸ªåˆ†ç±»å†³ç­–å‡½æ•°æˆ–åˆ†ç±»æ¨¡å‹ï¼Œå¯¹æ–°çš„è¾“å…¥è¿›è¡Œè¾“å‡ºé¢„æµ‹ï¼Œè¾“å‡ºå˜é‡å–æœ‰é™ä¸ªç¦»æ•£å€¼ã€‚åˆ†ç±»åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­å¾ˆå¸¸è§ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/2e64f52ed15247faac6a3a38c80cfb7075bc5055b8c440d1be78c1c6ffb1772b" width="500" hegiht="" ></center><center>å›¾18ï¼šåˆ†ç±» </center><p><strong>å›å½’é—®é¢˜</strong>ï¼šå›å½’åˆ†æç”¨äºé¢„æµ‹è¾“å…¥å˜é‡ï¼ˆè‡ªå˜é‡ï¼‰å’Œè¾“å‡ºå˜é‡ï¼ˆå› å˜é‡ï¼‰ä¹‹é—´çš„å…³ç³»ï¼Œç‰¹åˆ«æ˜¯å½“è¾“å…¥å˜é‡çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¾“å‡ºå˜é‡å€¼éšä¹‹å‘ç”Ÿå˜åŒ–ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/18b70cc6988f4b919760c85a1c13e9546e0a56e394a54f3098161f9bf94616d0" width="400" hegiht="" ></center><center>å›¾19ï¼šå›å½’ </center><p>åœ¨æŠŠä¸€ä¸ªé—®é¢˜å»ºæ¨¡çš„æ—¶å€™ä¸€å®šè¦è€ƒè™‘å¥½éœ€æ±‚ï¼Œè®©ä½ çš„æ¨¡å‹æ›´å¥½çš„ä¸ç°å®é—®é¢˜ç›¸å¯¹åº”ã€‚</p><h4 id="ã€æ¨¡å‹è¯„ä¼°ã€‘"><a href="#ã€æ¨¡å‹è¯„ä¼°ã€‘" class="headerlink" title="ã€æ¨¡å‹è¯„ä¼°ã€‘"></a><strong>ã€æ¨¡å‹è¯„ä¼°ã€‘</strong></h4><p>æ‰€è°“æ¨¡å‹è¯„ä¼°ï¼Œå³å¯¹æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›(æ€§èƒ½)è¿›è¡Œè¯„ä¼°ï¼Œä¸€æ–¹é¢å¯ä»¥ä»å®éªŒè§’åº¦è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚äº¤å‰éªŒè¯ç­‰ï¼›å¦ä¸€æ–¹é¢å¯ä»¥åˆ©ç”¨å…·ä½“çš„æ€§èƒ½è¯„ä»·æ ‡å‡†ï¼Œå¦‚æµ‹è¯•é›†å‡†ç¡®ç‡ç­‰ã€‚é€šå¸¸æ¥è¯´, æ¨¡å‹çš„å¥½åä¸ä»…å–å†³äºç®—æ³•å’Œæ•°æ®ï¼Œè¿˜å–å†³äºä»»åŠ¡éœ€æ±‚ã€‚å› æ­¤ï¼Œä¸åŒçš„ä»»åŠ¡å¾€å¾€å¯¹åº”ä¸åŒçš„è¯„ä»·æŒ‡æ ‡ã€‚</p><p><strong>1.æ€§èƒ½è¯„ä»·æŒ‡æ ‡-åˆ†ç±»</strong></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/538c58a0539a477f84d8af43fa4a5e0b813327f8fe184d23bdd9808094de8aa7" width="400" hegiht="" ></center><center>å›¾20ï¼šåˆ†ç±»è¯„ä»· </center><p>**å‡†ç¡®ç‡(Accuracy)**ï¼šåˆ†ç±»ä»»åŠ¡ä¸­ï¼Œåˆ†ç±»æ­£ç¡®ï¼ˆåŒ…æ‹¬æ­£è´Ÿæ ·æœ¬ï¼‰çš„è®°å½•ä¸ªæ•°å æ€»è®°å½•ä¸ªæ•°çš„æ¯”ã€‚</p><p>**ç²¾ç¡®ç‡(Precision)**ï¼šåˆ†ç±»æ­£ç¡®çš„æ­£æ ·æœ¬ä¸ªæ•°å åˆ†ç±»å™¨æ‰€æœ‰çš„æ­£æ ·æœ¬ä¸ªæ•°çš„æ¯”ä¾‹ã€‚</p><p><strong>å¬å›ç‡(Recall)<strong>ï¼šä¹Ÿå«æŸ¥å…¨ç‡ï¼Œæ˜¯æŒ‡åœ¨åˆ†ç±»ä¸­æ ·æœ¬ä¸­çš„</strong>æ­£ä¾‹</strong>æœ‰å¤šå°‘è¢«é¢„æµ‹æ­£ç¡®äº†ï¼Œé€šå¸¸ï¼Œå‡†ç¡®ç‡é«˜æ—¶ï¼Œå¬å›ç‡åä½ï¼›å¬å›ç‡é«˜æ—¶ï¼Œå‡†ç¡®ç‡åä½ã€‚</p><p><strong>F1-Score</strong>ï¼šç²¾ç¡®ç‡ä¸å¬å›ç‡çš„è°ƒå’Œå¹³å‡å€¼ï¼Œå®ƒçš„å€¼æ›´æ¥è¿‘äºPrecisionä¸Recallä¸­è¾ƒå°çš„å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºåœ°éœ‡çš„é¢„æµ‹ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯å¬å›ç‡éå¸¸é«˜ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡åœ°éœ‡æˆ‘ä»¬éƒ½å¸Œæœ›é¢„æµ‹å‡ºæ¥ï¼›è€Œå¯¹äºå«Œç–‘äººçš„å®šç½ªæˆ‘ä»¬å¸Œæœ›æ˜¯éå¸¸å‡†ç¡®çš„ï¼Œå³ä½¿æœ‰æ—¶å€™æ”¾è¿‡äº†ä¸€äº›ç½ªçŠ¯ï¼ˆå¬å›ç‡ä½ï¼‰ã€‚</p><p><strong>2.æ€§èƒ½è¯„ä»·æŒ‡æ ‡-å›å½’</strong></p><p><strong>å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean Absolute Errorï¼ŒMAEï¼‰</strong>ï¼šå¹³å‡ç»å¯¹è¯¯å·®å°±æ˜¯æŒ‡é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´å¹³å‡ç›¸å·®å¤šå¤§ã€‚å¹³å‡ç»å¯¹è¯¯å·®èƒ½æ›´å¥½åœ°åæ˜ é¢„æµ‹å€¼è¯¯å·®çš„å®é™…æƒ…å†µã€‚</p><p><strong>å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼ŒMSEï¼‰</strong>ï¼šè§‚æµ‹å€¼ä¸çœŸå€¼åå·®çš„å¹³æ–¹å’Œä¸è§‚æµ‹æ¬¡æ•°çš„æ¯”å€¼ã€‚è¿™ä¹Ÿæ˜¯çº¿æ€§å›å½’ä¸­æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ï¼Œçº¿æ€§å›å½’è¿‡ç¨‹ä¸­å°½é‡è®©è¯¥æŸå¤±å‡½æ•°æœ€å°ã€‚é‚£ä¹ˆæ¨¡å‹ä¹‹é—´çš„å¯¹æ¯”ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥æ¯”è¾ƒã€‚MSEå¯ä»¥è¯„ä»·æ•°æ®çš„å˜åŒ–ç¨‹åº¦ï¼ŒMSEçš„å€¼è¶Šå°ï¼Œè¯´æ˜é¢„æµ‹æ¨¡å‹æè¿°å®éªŒæ•°æ®å…·æœ‰æ›´å¥½çš„ç²¾ç¡®åº¦ã€‚</p><p><strong>äº¤å‰éªŒè¯ï¼ˆCross-Validationï¼‰</strong>ï¼šäº¤å‰éªŒè¯ï¼Œæœ‰çš„æ—¶å€™ä¹Ÿç§°ä½œ<strong>å¾ªç¯ä¼°è®¡ï¼ˆRotation Estimationï¼‰</strong>ï¼Œæ˜¯ä¸€ç§ç»Ÿè®¡å­¦ä¸Šå°†æ•°æ®æ ·æœ¬åˆ‡å‰²æˆè¾ƒå°å­é›†çš„å®ç”¨æ–¹æ³•ã€‚åœ¨ç»™å®šçš„å»ºæ¨¡æ ·æœ¬ä¸­ï¼Œæ‹¿å‡ºå¤§éƒ¨åˆ†æ ·æœ¬è¿›è¡Œå»ºæ¨¡å‹ï¼Œç•™å°éƒ¨åˆ†æ ·æœ¬ç”¨åˆšå»ºç«‹çš„æ¨¡å‹è¿›è¡Œé¢„æŠ¥ï¼Œå¹¶æ±‚è¿™å°éƒ¨åˆ†æ ·æœ¬çš„é¢„æŠ¥è¯¯å·®ï¼Œè®°å½•å®ƒä»¬çš„å¹³æ–¹åŠ å’Œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸€ç›´è¿›è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„æ ·æœ¬éƒ½è¢«é¢„æŠ¥äº†ä¸€æ¬¡è€Œä¸”ä»…è¢«é¢„æŠ¥ä¸€æ¬¡ã€‚æŠŠæ¯ä¸ªæ ·æœ¬çš„é¢„æŠ¥è¯¯å·®å¹³æ–¹åŠ å’Œï¼Œç§°ä¸º**PRESS(predicted Error Sum of Squares)**ã€‚</p><p>äº¤å‰éªŒè¯çš„åŸºæœ¬æ€æƒ³æ˜¯æŠŠåœ¨æŸç§æ„ä¹‰ä¸‹å°†åŸå§‹<strong>æ•°æ®(dataset)</strong> è¿›è¡Œåˆ†ç»„,ä¸€éƒ¨åˆ†åšä¸º**è®­ç»ƒé›†(train set)<strong>ï¼Œå¦ä¸€éƒ¨åˆ†åšä¸º</strong>éªŒè¯é›†(validation set)<strong>ã€‚é¦–å…ˆç”¨è®­ç»ƒé›†å¯¹åˆ†ç±»å™¨è¿›è¡Œè®­ç»ƒï¼Œå†åˆ©ç”¨éªŒè¯é›†æ¥æµ‹è¯•è®­ç»ƒå¾—åˆ°çš„</strong>æ¨¡å‹(model)**ï¼Œä»¥æ­¤æ¥åšä¸ºè¯„ä»·åˆ†ç±»å™¨çš„æ€§èƒ½æŒ‡æ ‡ã€‚</p><p>æ— è®ºåˆ†ç±»è¿˜æ˜¯å›å½’æ¨¡å‹ï¼Œéƒ½å¯ä»¥åˆ©ç”¨äº¤å‰éªŒè¯è¿›è¡Œæ¨¡å‹è¯„ä¼°ã€‚</p><hr><p><strong>è¡¥å……ï¼š</strong></p><p><strong>æ€§èƒ½è¯„ä»·æŒ‡æ ‡-åˆ†ç±»ä¸¾ä¾‹</strong></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4b80e0d2361846b3b1350ff62dfe689a61c46fa73eb043998d46127eeb064a57" width="600" hegiht="" ></center><p><strong>å‡†ç¡®ç‡(Accuracy)<strong>ï¼šåˆ†ç±»ä»»åŠ¡ä¸­ï¼Œ</strong>åˆ†ç±»æ­£ç¡®</strong>çš„è®°å½•ä¸ªæ•°å <strong>æ€»</strong>è®°å½•ä¸ªæ•°çš„æ¯”ã€‚$$å…¬å¼ï¼š(TP+TN)&#x2F;(TP+TN+FP+FN)$$</p><p><strong>ç²¾ç¡®ç‡(Precision)<strong>ï¼š</strong>åˆ†ç±»æ­£ç¡®</strong>çš„æ­£æ ·æœ¬ä¸ªæ•°å <strong>åˆ†ç±»å™¨(é¢„æµ‹å‡ºæ¥çš„)æ‰€æœ‰</strong>çš„æ­£æ ·æœ¬ä¸ªæ•°çš„æ¯”ä¾‹ã€‚â€”&gt;çŒœå¯¹äº†å¤šå°‘ï¼Ÿ</p><p>$$å…¬å¼ï¼šFP&#x2F;(TP+FP)$$</p><p><strong>å¬å›ç‡(Recall)<strong>ï¼šä¹Ÿå«æŸ¥å…¨ç‡ï¼Œæ˜¯æŒ‡åœ¨åˆ†ç±»ä¸­</strong>æ ·æœ¬æ­£ä¾‹</strong>æœ‰å¤šå°‘è¢«<strong>é¢„æµ‹æ­£ç¡®</strong>äº†ã€‚â€”&gt;æ‰¾å‡ºäº†å¤šå°‘ï¼Ÿ</p><p>$$å…¬å¼ï¼šTP&#x2F;(TP+FN)$$</p><p><strong>F1-Score</strong>ï¼šç²¾ç¡®ç‡ä¸å¬å›ç‡çš„<strong>è°ƒå’Œå¹³å‡å€¼</strong>$$ï¼ˆF1&#x3D;2Â·PrecisionÂ·Recall&#x2F;ï¼ˆPrecision+Recallï¼‰ï¼‰$$ï¼Œå®ƒçš„å€¼æ›´æ¥è¿‘äºPrecisionä¸Recallä¸­è¾ƒå°çš„å€¼ã€‚</p><hr><p><strong>ç²¾ç¡®ç‡å’Œå¬å›ç‡äºŒè€…æ˜¯æ­¤æ¶ˆå½¼é•¿çš„å…³ç³»</strong></p><p>è¿™å¥è¯å¯ä»¥è¿™ä¹ˆç†è§£ï¼šæˆ‘ä»¬åšæ ¸é…¸æ£€æµ‹ï¼Œå¸Œæœ›èƒ½å¤Ÿè¾¾åˆ°æ¯”è¾ƒé«˜çš„å¬å›ç‡ï¼Œä¹Ÿå°±æ˜¯æ ·æœ¬ä¸­çš„æ­£ä¾‹å°½å¯èƒ½é¢„æµ‹å‡ºæ¥ï¼Œæ‰€ä»¥æ­£ä¾‹ä¼šåå¤šï¼Œä¸æƒ³æ”¾è¿‡å¯ç–‘çš„ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ï¼Œä¼šåŠ å¤§é¢„æµ‹å¤±è¯¯çš„é£é™©ï¼Œå› æ­¤åˆ†ç±»æ­£ç¡®çš„æŒ‡æ ‡å°±ä¼šä¸‹é™ã€‚</p><blockquote><p><strong>å®å¯é”™æ€ä¸€ä¸‡ï¼Œä¸å¯æ”¾è¿‡ä¸€äººâ€”â€”&gt; å¬å›ç‡</strong></p><p><strong>å®å¯é”™è¿‡ä¸€ä¸‡ï¼Œä¸å¯è¯¯æ€ä¸€äººâ€”â€”&gt; ç²¾ç¡®ç‡</strong></p></blockquote><hr><p><strong>å‡è®¾æˆ‘ä»¬æ‰‹ä¸Šæœ‰60ä¸ªæ­£æ ·æœ¬ï¼Œ40ä¸ªè´Ÿæ ·æœ¬ï¼Œæˆ‘ä»¬è¦æ‰¾å‡ºæ‰€æœ‰çš„æ­£æ ·æœ¬ã€‚ç³»ç»ŸæŸ¥æ‰¾å‡º50ä¸ªæ­£æ ·æœ¬ï¼Œå…¶ä¸­åªæœ‰40ä¸ªæ˜¯çœŸæ­£çš„æ­£æ ·æœ¬ï¼Œè®¡ç®—ä¸Šè¿°å„æŒ‡æ ‡ã€‚</strong></p><ul><li>TPï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºæ­£ç±»çš„æ ·æœ¬æ•° 40</li><li>FNï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºè´Ÿç±»çš„æ ·æœ¬æ•° 20</li><li>FPï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºæ­£ç±»çš„æ ·æœ¬æ•° 10</li><li>TNï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºè´Ÿç±»çš„æ ·æœ¬æ•° 30</li></ul><p><strong>ç”±æ­¤å¯å¾—ï¼š</strong></p><ul><li>å‡†ç¡®ç‡ï¼šï¼ˆ40+30ï¼‰&#x2F;100 &#x3D; 70%</li><li>ç²¾ç¡®ç‡ï¼š40&#x2F;ï¼ˆ40+10ï¼‰ &#x3D; 80%</li><li>å¬å›ç‡ï¼š40&#x2F;ï¼ˆ40+20ï¼‰ &#x3D; 67%</li></ul><p><strong>â‘ é«˜å¬å›ç‡ï¼šå‡è®¾æˆ‘ä»¬æ‰‹ä¸Šæœ‰60ä¸ªæ­£æ ·æœ¬ï¼Œ40ä¸ªè´Ÿæ ·æœ¬ï¼Œæˆ‘ä»¬è¦æ‰¾å‡ºæ‰€æœ‰çš„æ­£æ ·æœ¬ã€‚ç³»ç»ŸæŸ¥æ‰¾å‡º55ä¸ªæ­£æ ·æœ¬ï¼Œå…¶ä¸­åªæœ‰42ä¸ªæ˜¯çœŸæ­£çš„æ­£æ ·æœ¬ï¼Œè®¡ç®—ä¸Šè¿°å„æŒ‡æ ‡ã€‚</strong></p><ul><li>TPï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºæ­£ç±»çš„æ ·æœ¬æ•° ï¼Ÿ42</li><li>FNï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºè´Ÿç±»çš„æ ·æœ¬æ•° ï¼Ÿ18</li><li>FPï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºæ­£ç±»çš„æ ·æœ¬æ•° ï¼Ÿ13</li><li>TNï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºè´Ÿç±»çš„æ ·æœ¬æ•° ï¼Ÿ27</li></ul><p><strong>ç”±æ­¤å¯å¾—ï¼š</strong></p><ul><li>å‡†ç¡®ç‡ï¼šï¼Ÿ69%</li><li>ç²¾ç¡®ç‡ï¼šï¼Ÿ76%</li><li>å¬å›ç‡ï¼šï¼Ÿ70%</li></ul><p><strong>â‘¡é«˜ç²¾ç¡®ç‡ï¼šå‡è®¾æˆ‘ä»¬æ‰‹ä¸Šæœ‰60ä¸ªæ­£æ ·æœ¬ï¼Œ40ä¸ªè´Ÿæ ·æœ¬ï¼Œæˆ‘ä»¬è¦æ‰¾å‡ºæ‰€æœ‰çš„æ­£æ ·æœ¬ã€‚ç³»ç»ŸæŸ¥æ‰¾å‡º30ä¸ªæ­£æ ·æœ¬ï¼Œå…¶ä¸­åªæœ‰25ä¸ªæ˜¯çœŸæ­£çš„æ­£æ ·æœ¬ï¼Œè®¡ç®—ä¸Šè¿°å„æŒ‡æ ‡ã€‚</strong></p><ul><li>TPï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºæ­£ç±»çš„æ ·æœ¬æ•° ï¼Ÿ</li><li>FNï¼šå°†æ­£ç±»é¢„æµ‹ä¸ºè´Ÿç±»çš„æ ·æœ¬æ•° ï¼Ÿ</li><li>FPï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºæ­£ç±»çš„æ ·æœ¬æ•° ï¼Ÿ</li><li>TNï¼šå°†è´Ÿç±»é¢„æµ‹ä¸ºè´Ÿç±»çš„æ ·æœ¬æ•° ï¼Ÿ</li></ul><p><strong>ç”±æ­¤å¯å¾—ï¼š</strong></p><ul><li>å‡†ç¡®ç‡ï¼šï¼Ÿ</li><li>ç²¾ç¡®ç‡ï¼šï¼Ÿ</li><li>å¬å›ç‡ï¼šï¼Ÿ</li></ul><h2 id="æœºå™¨å­¦ä¹ çš„æ–¹æ³•è®º"><a href="#æœºå™¨å­¦ä¹ çš„æ–¹æ³•è®º" class="headerlink" title="æœºå™¨å­¦ä¹ çš„æ–¹æ³•è®º"></a><strong>æœºå™¨å­¦ä¹ çš„æ–¹æ³•è®º</strong></h2><p>æœºå™¨å­¦ä¹ çš„æ–¹æ³•è®ºå’Œäººç±»ç§‘ç ”çš„è¿‡ç¨‹æœ‰ç€å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œä¸‹é¢ä»¥â€œæœºå™¨ä»ç‰›é¡¿ç¬¬äºŒå®šå¾‹å®éªŒä¸­å­¦ä¹ çŸ¥è¯†â€ä¸ºä¾‹ï¼Œæ¥æ›´åŠ æ·±å…¥ç†è§£æœºå™¨å­¦ä¹ ï¼ˆæœ‰ç›‘ç£å­¦ä¹ ï¼‰çš„æ–¹æ³•è®ºæœ¬è´¨ï¼Œå³åœ¨â€œæœºå™¨æ€è€ƒâ€çš„è¿‡ç¨‹ä¸­ç¡®å®šæ¨¡å‹çš„ä¸‰ä¸ªå…³é”®è¦ç´ ï¼šå‡è®¾ã€è¯„ä»·ã€ä¼˜åŒ–ã€‚</p><p><strong>æ¡ˆä¾‹ï¼šæœºå™¨ä»ç‰›é¡¿ç¬¬äºŒå®šå¾‹å®éªŒä¸­å­¦ä¹ çŸ¥è¯†</strong></p><blockquote><p>ç‰›é¡¿ç¬¬äºŒå®šå¾‹æ˜¯è‰¾è¨å…‹Â·ç‰›é¡¿åœ¨1687å¹´äºã€Šè‡ªç„¶å“²å­¦çš„æ•°å­¦åŸç†ã€‹ä¸€ä¹¦ä¸­æå‡ºçš„ï¼Œå…¶å¸¸è§è¡¨è¿°ï¼šç‰©ä½“åŠ é€Ÿåº¦çš„å¤§å°è·Ÿä½œç”¨åŠ›æˆæ­£æ¯”ï¼Œè·Ÿç‰©ä½“çš„è´¨é‡æˆåæ¯”ï¼Œä¸ç‰©ä½“è´¨é‡çš„å€’æ•°æˆæ­£æ¯”ã€‚ç‰›é¡¿ç¬¬äºŒè¿åŠ¨å®šå¾‹å’Œç¬¬ä¸€ã€ç¬¬ä¸‰å®šå¾‹å…±åŒç»„æˆäº†ç‰›é¡¿è¿åŠ¨å®šå¾‹ï¼Œé˜è¿°äº†ç»å…¸åŠ›å­¦ä¸­åŸºæœ¬çš„è¿åŠ¨è§„å¾‹ã€‚</p></blockquote><p>åœ¨ä¸­å­¦è¯¾æœ¬ä¸­ï¼Œç‰›é¡¿ç¬¬äºŒå®šå¾‹æœ‰ä¸¤ç§å®éªŒè®¾è®¡æ–¹æ³•ï¼šå€¾æ–œæ»‘åŠ¨æ³•å’Œæ°´å¹³æ‹‰çº¿æ³•ã€‚é€šè¿‡å®éªŒï¼Œæˆ‘ä»¬å¯ä»¥è·å–å¤§é‡æ•°æ®æ ·æœ¬å’Œè§‚æµ‹ç»“æœã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/afdf03064fd24298954b03072d9db7d2480482aae65744f3894f3dab61abae42" width="600" hegiht="" ></center><center>å›¾21ï¼šç‰›é¡¿ç¬¬äºŒå®šå¾‹å®éªŒ </center><p>è§‚å¯Ÿå®éªŒæ•°æ®ä¸éš¾çŒœæµ‹ï¼Œç‰©ä½“çš„åŠ é€Ÿåº¦$a$å’Œä½œç”¨åŠ›$F$ä¹‹é—´çš„å…³ç³»åº”è¯¥æ˜¯çº¿æ€§å…³ç³»ã€‚å› æ­¤æˆ‘ä»¬æå‡ºå‡è®¾ $a &#x3D; w \cdot F$ï¼Œå…¶ä¸­ï¼Œ$a$ä»£è¡¨åŠ é€Ÿåº¦ï¼Œ$F$ä»£è¡¨ä½œç”¨åŠ›ï¼Œ$w$æ˜¯å¾…ç¡®å®šçš„å‚æ•°ã€‚<br>é€šè¿‡å¤§é‡å®éªŒæ•°æ®çš„è®­ç»ƒï¼Œç¡®å®šå‚æ•°$w$æ˜¯ç‰©ä½“è´¨é‡çš„å€’æ•°$(1&#x2F;m)$ï¼Œå³å¾—åˆ°å®Œæ•´çš„æ¨¡å‹å…¬å¼$a &#x3D; F \cdot (1&#x2F;m)$ã€‚</p><p>è¿™ä¸ªæœ‰è¶£çš„æ¡ˆä¾‹æ¼”ç¤ºäº†æœºå™¨å­¦ä¹ çš„åŸºæœ¬è¿‡ç¨‹ï¼Œä½†å…¶ä¸­æœ‰ä¸€ä¸ªå…³é”®ç‚¹çš„å®ç°å°šä¸æ¸…æ™°ï¼Œå³ï¼š<strong>å¦‚ä½•ç¡®å®šæ¨¡å‹å‚æ•°$ï¼ˆw&#x3D;1&#x2F;mï¼‰$ï¼Ÿ</strong></p><p>åœ¨ç‰›é¡¿ç¬¬äºŒå®šå¾‹çš„æ¡ˆä¾‹ä¸­ï¼ŒåŸºäºå¯¹æ•°æ®çš„è§‚æµ‹ï¼Œæˆ‘ä»¬æå‡ºäº†çº¿æ€§**å‡è®¾(hypothesis)<strong>ï¼Œå³ä½œç”¨åŠ›å’ŒåŠ é€Ÿåº¦æ˜¯çº¿æ€§å…³ç³»ï¼Œç”¨çº¿æ€§æ–¹ç¨‹è¡¨ç¤ºä¹‹åæˆ‘ä»¬ä½¿ç”¨å·²æœ‰çš„æ•°æ®æ¥éªŒè¯å‡è®¾çš„å¯è¡Œæ€§ï¼Œè¡¡é‡æ¨¡å‹é¢„æµ‹å€¼å’ŒçœŸå®å€¼å·®è·çš„è¯„ä»·å‡½æ•°ä¹Ÿè¢«ç§°ä¸º</strong>æŸå¤±å‡½æ•°(loss function)<strong>ã€‚æœ€å°åŒ–æŸå¤±æ˜¯æ¨¡å‹çš„ä¼˜åŒ–ç›®æ ‡ï¼Œå®ç°æŸå¤±æœ€å°åŒ–çš„æ–¹æ³•ç§°ä¸º</strong>ä¼˜åŒ–ç®—æ³•(optimization)**ï¼Œä¹Ÿç§°ä¸ºå¯»è§£ç®—æ³•ï¼ˆæ‰¾åˆ°ä½¿å¾—æŸå¤±å‡½æ•°æœ€å°çš„å‚æ•°è§£ï¼‰ï¼Œç›´åˆ°æ¨¡å‹å­¦ä¹ åˆ°ä¸€ä¸ªå‚æ•°$w4ï¼Œä½¿å¾—æŸå¤±å‡½æ•°çš„å€¼æœ€å°ã€‚</p><p>ç”±æ­¤å¯è§ï¼Œ<strong>æ¨¡å‹å‡è®¾ã€æŸå¤±å‡½æ•°å’Œä¼˜åŒ–ç®—æ³•</strong>æ˜¯æ„æˆæ¨¡å‹çš„ä¸‰ä¸ªå…³é”®è¦ç´ ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/fb15753624dd4f13813391a82dc30210e3abf09f01494b678198bbaf24a17035" width="600" hegiht="" ></center><center>å›¾22ï¼šæ¨¡å‹æ„æˆä¸‰è¦ç´  </center><ul><li>æ¨¡å‹å‡è®¾ï¼šä¸–ç•Œä¸Šçš„å¯èƒ½å…³ç³»åƒåƒä¸‡ï¼Œæ¼«æ— ç›®æ ‡çš„è¯•æ¢$Y$<del>$X$ä¹‹é—´çš„å…³ç³»æ˜¾ç„¶æ˜¯ååˆ†ä½æ•ˆçš„ã€‚å› æ­¤å‡è®¾ç©ºé—´å…ˆåœˆå®šäº†ä¸€ä¸ªæ¨¡å‹èƒ½å¤Ÿè¡¨è¾¾çš„å…³ç³»å¯èƒ½ï¼Œå¦‚è“è‰²åœ†åœˆæ‰€ç¤ºã€‚æœºå™¨è¿˜ä¼šè¿›ä¸€æ­¥åœ¨å‡è®¾åœˆå®šçš„åœ†åœˆå†…å¯»æ‰¾æœ€ä¼˜çš„$Y$</del>$X$å…³ç³»ï¼Œå³ç¡®å®šå‚æ•°$w$ã€‚</li><li>æŸå¤±å‡½æ•°ï¼šå¯»æ‰¾æœ€ä¼˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä»€ä¹ˆæ˜¯æœ€ä¼˜ï¼Œå³è¯„ä»·ä¸€ä¸ª$Y$~$X$å…³ç³»çš„å¥½åçš„æŒ‡æ ‡ã€‚é€šå¸¸è¡¡é‡è¯¥å…³ç³»æ˜¯å¦èƒ½å¾ˆå¥½çš„æ‹Ÿåˆç°æœ‰è§‚æµ‹æ ·æœ¬ï¼Œå°†æ‹Ÿåˆçš„è¯¯å·®æœ€å°ä½œä¸ºä¼˜åŒ–ç›®æ ‡ã€‚</li><li>ä¼˜åŒ–ç®—æ³•ï¼šè®¾ç½®äº†è¯„ä»·æŒ‡æ ‡åï¼Œå°±å¯ä»¥åœ¨å‡è®¾åœˆå®šçš„èŒƒå›´å†…ï¼Œå°†ä½¿å¾—è¯„ä»·æŒ‡æ ‡æœ€ä¼˜ï¼ˆæŸå¤±å‡½æ•°æœ€å°&#x2F;æœ€æ‹Ÿåˆå·²æœ‰è§‚æµ‹æ ·æœ¬ï¼‰çš„$Y$~$X$å…³ç³»æ‰¾å‡ºæ¥ï¼Œè¿™ä¸ªå¯»æ‰¾æœ€ä¼˜è§£çš„æ–¹æ³•å³ä¸ºä¼˜åŒ–ç®—æ³•ã€‚æœ€ç¬¨çš„ä¼˜åŒ–ç®—æ³•å³æŒ‰ç…§å‚æ•°çš„å¯èƒ½ï¼Œç©·ä¸¾æ¯ä¸€ä¸ªå¯èƒ½å–å€¼æ¥è®¡ç®—æŸå¤±å‡½æ•°ï¼Œä¿ç•™ä½¿å¾—æŸå¤±å‡½æ•°æœ€å°çš„å‚æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚</li></ul><p>æœºå™¨æ‰§è¡Œå­¦ä¹ ä»»åŠ¡çš„æ¡†æ¶ä½“ç°äº†å…¶å­¦ä¹ çš„æœ¬è´¨æ˜¯ <strong>â€œå‚æ•°ä¼°è®¡â€ï¼ˆLearning is parameter estimationï¼‰</strong>ã€‚</p><h2 id="ä¼ ç»Ÿæœºå™¨å­¦ä¹ VSæ·±åº¦å­¦ä¹ "><a href="#ä¼ ç»Ÿæœºå™¨å­¦ä¹ VSæ·±åº¦å­¦ä¹ " class="headerlink" title="ä¼ ç»Ÿæœºå™¨å­¦ä¹ VSæ·±åº¦å­¦ä¹ "></a><strong>ä¼ ç»Ÿæœºå™¨å­¦ä¹ VSæ·±åº¦å­¦ä¹ </strong></h2><p>ç›¸æ¯”ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œæ·±åº¦å­¦ä¹ åšå‡ºäº†å“ªäº›æ”¹è¿›å‘¢ï¼Ÿå…¶å®<strong>ä¸¤è€…åœ¨ç†è®ºç»“æ„ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œå³ï¼šæ¨¡å‹å‡è®¾ã€æŸå¤±å‡½æ•°å’Œä¼˜åŒ–ç®—æ³•ï¼Œå…¶æ ¹æœ¬å·®åˆ«åœ¨äºå‡è®¾çš„å¤æ‚åº¦</strong>ã€‚è¿™ç§å˜æ¢å·²ç»æ— æ³•ç”¨æ•°å­¦å…¬å¼è¡¨è¾¾ï¼Œå› æ­¤ç ”ç©¶è€…ä»¬å€Ÿé‰´äº†äººè„‘ç¥ç»å…ƒçš„ç»“æ„ï¼Œè®¾è®¡å‡ºåŸºäº<strong>ç¥ç»ç½‘ç»œçš„æ¨¡å‹</strong>ã€‚</p><p><strong>ä¼ ç»Ÿæ–¹æ³•</strong>ï¼šäººå·¥ç‰¹å¾æå–+åˆ†ç±»å™¨</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/49b9cc4ff48342c790bd31968837a68d2e1ccbb25941437c8f99fe8f42e2a8e5" width="500" hegiht="" ></center><center>å›¾23ï¼šä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸‹çš„é¸¢å°¾èŠ±åˆ†ç±» </center><ol><li>æ”¶é›†å¹¶æ ‡æ³¨å‡ ç™¾å¼ é¸¢å°¾èŠ±çš„å›¾ç‰‡ï¼›</li><li>è§‚å¯Ÿä¸åŒçš„é¸¢å°¾èŠ±å›¾ç‰‡ï¼Œå¹¶ç»å°½è„‘æ±é€‰æ‹©æˆ–è®¾è®¡ä¸€äº›ç‰¹å¾å½¢çŠ¶ï¼Œé¢œè‰²ï¼Œçº¹ç†ï¼›</li><li>æ ¹æ®è®¾è®¡çš„ç‰¹å¾ï¼Œæå–å›¾åƒçš„ç‰¹å¾ï¼Œå¹¶é€‰æ‹©åˆ†ç±»å™¨è¿›è¡Œè®­ç»ƒå’Œæµ‹è¯•ï¼›</li><li>ç»“æœä¸å¥½çš„è¯ï¼Œå›åˆ°ç¬¬äºŒæ­¥ã€‚</li></ol><p><strong>æ·±åº¦å­¦ä¹ æ–¹æ³•</strong>ï¼šæä¾›å›¾åƒå’Œæ ‡ç­¾ï¼Œé€šè¿‡ç½‘ç»œè‡ªå·±å»å­¦ä¹ ç‰¹å¾</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/4972b98ead7d49f9a23058bcbe28043316300e20c8504546a798892b9fe610ac" width="500" hegiht="" ></center><center>å›¾24ï¼šæ·±åº¦å­¦ä¹ ä¸‹çš„é¸¢å°¾èŠ±åˆ†ç±» </center><ol><li>æ”¶é›†å¹¶æ ‡æ³¨å‡ åƒå¼ å›¾åƒ</li><li>ç¡®å®šç½‘ç»œç»“æ„ï¼Œäº¤ç»™æœºå™¨ç»å°½è„‘æ±å®Œæˆä»»åŠ¡</li></ol><h2 id="æ·±åº¦å­¦ä¹ ç»“æ„ä¸‰è¦ç´ "><a href="#æ·±åº¦å­¦ä¹ ç»“æ„ä¸‰è¦ç´ " class="headerlink" title="æ·±åº¦å­¦ä¹ ç»“æ„ä¸‰è¦ç´ "></a><strong>æ·±åº¦å­¦ä¹ ç»“æ„ä¸‰è¦ç´ </strong></h2><p>æ•°å­—è¯†åˆ«æ˜¯è®¡ç®—æœºä»çº¸è´¨æ–‡æ¡£ã€ç…§ç‰‡æˆ–å…¶ä»–æ¥æºæ¥æ”¶ã€ç†è§£å¹¶è¯†åˆ«å¯è¯»çš„æ•°å­—çš„èƒ½åŠ›ï¼Œç›®å‰æ¯”è¾ƒå—å…³æ³¨çš„æ˜¯æ‰‹å†™æ•°å­—è¯†åˆ«ã€‚æ‰‹å†™æ•°å­—è¯†åˆ«æ˜¯ä¸€ä¸ªå…¸å‹çš„å›¾åƒåˆ†ç±»é—®é¢˜ï¼Œå·²ç»è¢«å¹¿æ³›åº”ç”¨äºæ±‡æ¬¾å•å·è¯†åˆ«ã€æ‰‹å†™é‚®æ”¿ç¼–ç è¯†åˆ«ç­‰é¢†åŸŸï¼Œå¤§å¤§ç¼©çŸ­äº†ä¸šåŠ¡å¤„ç†æ—¶é—´ï¼Œæå‡äº†å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/04e594dbf02d4c18af3622292e303b3f96720fba0c8b43899c9580f52c51d843" width="500" hegiht="" ></center><center>å›¾25ï¼šæ‰‹å†™æ•°å­—è¯†åˆ«æµç¨‹ </center><ol><li>å»ºç«‹æ¨¡å‹ï¼šé€‰æ‹©ä»€ä¹ˆæ ·çš„ç½‘ç»œç»“æ„&#x2F;é€‰æ‹©å¤šå°‘å±‚æ•°ï¼Œæ¯å±‚é€‰æ‹©å¤šå°‘ç¥ç»å…ƒ</li><li>æŸå¤±å‡½æ•°ï¼šé€‰æ‹©å¸¸ç”¨æŸå¤±å‡½æ•°ï¼Œå¹³æ–¹è¯¯å·®ï¼Œäº¤å‰ç†µï¼Œâ€¦</li><li>ä¼˜åŒ–å­¦ä¹ ï¼šæ¢¯åº¦ä¸‹é™&#x2F;åå‘ä¼ æ’­ç®—æ³•</li></ol><h3 id="ã€å»ºç«‹æ¨¡å‹ã€‘"><a href="#ã€å»ºç«‹æ¨¡å‹ã€‘" class="headerlink" title="ã€å»ºç«‹æ¨¡å‹ã€‘"></a><strong>ã€å»ºç«‹æ¨¡å‹ã€‘</strong></h3><p>å€Ÿé‰´äº†äººè„‘ç¥ç»å…ƒçš„ç»“æ„ï¼Œè®¾è®¡å‡ºçš„ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥æ›´å¥½çš„æ‹Ÿåˆå¤æ‚çš„æ•°æ®ã€‚</p><p><strong>ç”Ÿç‰©ç¥ç»å…ƒ</strong></p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e01411e04291412d8a38d0a11bd71652846ec038ed8c4c9f8bd2946c05a9e15d" width="500" hegiht="" ></center><center>å›¾26ï¼šç”Ÿç‰©ç¥ç»å…ƒ </center><ul><li>æ¯ä¸ªç¥ç»å…ƒéƒ½æ˜¯ä¸€ä¸ªå¤šè¾“å…¥å•è¾“å‡ºçš„ä¿¡æ¯å¤„ç†å•å…ƒï¼›</li><li>ç¥ç»å…ƒå…·æœ‰ç©ºé—´æ•´åˆç‰¹æ€§å’Œé˜ˆå€¼ç‰¹æ€§ï¼ˆå…´å¥‹å’ŒæŠ‘åˆ¶ï¼Œè¶…è¿‡é˜ˆå€¼ä¸ºå…´å¥‹ï¼Œä½äºæ˜¯æŠ‘åˆ¶ï¼‰ï¼›</li><li>ç¥ç»å…ƒè¾“å…¥åˆ†å…´å¥‹æ€§è¾“å…¥å’ŒæŠ‘åˆ¶æ€§è¾“å…¥ä¸¤ç§ç±»å‹ï¼›</li><li>ç¥ç»å…ƒè¾“å…¥ä¸è¾“å‡ºé—´æœ‰å›ºå®šçš„æ—¶æ»ï¼Œä¸»è¦å–å†³äºçªè§¦å»¶æï¼ˆè®¡ç®—è€—æ—¶ï¼‰ã€‚</li></ul><p><strong>M-Pç¥ç»å…ƒ</strong></p><p>æŒ‰ç…§ç”Ÿç‰©ç¥ç»å…ƒï¼Œæˆ‘ä»¬å»ºç«‹M-Pæ¨¡å‹ã€‚ä¸ºäº†ä½¿å¾—å»ºæ¨¡æ›´åŠ ç®€å•ï¼Œä»¥ä¾¿äºè¿›è¡Œå½¢å¼åŒ–è¡¨è¾¾ï¼Œæˆ‘ä»¬å¿½ç•¥æ—¶é—´æ•´åˆä½œç”¨ã€ä¸åº”æœŸç­‰å¤æ‚å› ç´ ï¼Œå¹¶æŠŠç¥ç»å…ƒçš„çªè§¦æ—¶å»¶å’Œå¼ºåº¦å½“æˆå¸¸æ•°ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/7ba722dcc4e14db3a722f67613edfb218d00269d6d754a0897c2f7895b3e9caf" width="600" hegiht="" ></center><center>å›¾27ï¼šM-Pç¥ç»å…ƒ </center><p>ç¥ç»ç½‘ç»œä¸­æ¯ä¸ªèŠ‚ç‚¹ç§°ä¸ºç¥ç»å…ƒï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>åŠ æƒå’Œï¼šå°†æ‰€æœ‰è¾“å…¥åŠ æƒæ±‚å’Œã€‚</li><li>éçº¿æ€§å˜æ¢ï¼ˆæ¿€æ´»å‡½æ•°ï¼‰ï¼šåŠ æƒå’Œçš„ç»“æœç»è¿‡ä¸€ä¸ªéçº¿æ€§å‡½æ•°å˜æ¢ï¼Œè®©ç¥ç»å…ƒè®¡ç®—å…·å¤‡éçº¿æ€§çš„èƒ½åŠ›ã€‚</li></ul><p>å¤§é‡è¿™æ ·çš„èŠ‚ç‚¹æŒ‰ç…§ä¸åŒçš„å±‚æ¬¡æ’å¸ƒï¼Œå½¢æˆå¤šå±‚çš„ç»“æ„è¿æ¥èµ·æ¥ï¼Œå³ç§°ä¸ºç¥ç»ç½‘ç»œï¼Œç¥ç»å…ƒä¸åŒçš„è¿æ¥æ–¹å¼æ„æˆä¸åŒçš„ç½‘ç»œç»“æ„ã€‚æ¯ä¸ªç¥ç»å…ƒéƒ½æœ‰è‡ªå·±çš„æƒé‡å’Œåç½®å‚æ•°ã€‚</p><h3 id="ã€æŸå¤±å‡½æ•°ã€‘"><a href="#ã€æŸå¤±å‡½æ•°ã€‘" class="headerlink" title="ã€æŸå¤±å‡½æ•°ã€‘"></a><strong>ã€æŸå¤±å‡½æ•°ã€‘</strong></h3><p>æŸå¤±å‡½æ•°æ˜¯æ¨¡å‹ä¼˜åŒ–çš„ç›®æ ‡ï¼Œç”¨äºåœ¨ä¼—å¤šçš„å‚æ•°å–å€¼ä¸­è¯†åˆ«æœ€ç†æƒ³çš„å–å€¼ï¼Œ<strong>æŸå¤±å‡½æ•°çš„è®¡ç®—åœ¨è®­ç»ƒè¿‡ç¨‹çš„ä»£ç ä¸­ï¼Œæ¯ä¸€è½®æ¨¡å‹è®­ç»ƒçš„è¿‡ç¨‹éƒ½ç›¸åŒ</strong>ï¼Œåˆ†å¦‚ä¸‹ä¸‰æ­¥ï¼š</p><ol><li>å…ˆæ ¹æ®è¾“å…¥æ•°æ®æ­£å‘è®¡ç®—é¢„æµ‹è¾“å‡ºï¼›</li><li>å†æ ¹æ®é¢„æµ‹å€¼å’ŒçœŸå®å€¼è®¡ç®—æŸå¤±ï¼›</li><li>æœ€åæ ¹æ®æŸå¤±åå‘ä¼ æ’­æ¢¯åº¦å¹¶æ›´æ–°å‚æ•°ã€‚</li></ol><h3 id="ã€ä¼˜åŒ–å­¦ä¹ ã€‘"><a href="#ã€ä¼˜åŒ–å­¦ä¹ ã€‘" class="headerlink" title="ã€ä¼˜åŒ–å­¦ä¹ ã€‘"></a><strong>ã€ä¼˜åŒ–å­¦ä¹ ã€‘</strong></h3><p>å€Ÿç”¨å¤ä»£ç‚¼ä¸¹çš„ä¸€äº›åè¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè®­ç»ƒæ¨¡å‹ä¸­çš„æ•°æ®æ¯”åšç‚¼ä¸¹è¯æï¼Œæ¨¡å‹æ¯”åšç‚¼ä¸¹ç‚‰ï¼Œç«å€™æ¯”åšä¼˜åŒ–å™¨ã€‚é‚£ä¹ˆæˆ‘ä»¬çŸ¥é“ï¼ŒåŒæ ·çš„è¯æåŒæ ·çš„ç‚¼ä¸¹ç‚‰ï¼Œä½†æ˜¯ç«å€™ä¸ä¸€æ ·çš„è¯ï¼Œç‚¼å‡ºæ¥çš„ä¸¹è¯åƒå·®ä¸‡åˆ«ï¼ŒåŒæ ·çš„å¯¹äºæ·±åº¦å­¦ä¹ ä¸­è®­ç»ƒæ¨¡å‹è€Œè¨€ï¼Œæœ‰æ—¶å€™æ¨¡å‹æ€§èƒ½ä¸å¥½ï¼Œä¹Ÿè®¸ä¸æ˜¯æ•°æ®æˆ–è€…æ¨¡å‹æœ¬èº«çš„åŸå› ï¼Œè€Œæ˜¯ä¼˜åŒ–å™¨çš„åŸå› ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/e3a02a4a011f4e7db14336c5b5808d0bc20f632d5efb46d1b72e858a79852d9b" width="500" hegiht="" ></center><center>å›¾28ï¼šä¼˜åŒ–å­¦ä¹  </center><p>æ·±åº¦å­¦ä¹ ä¸­çš„ä¼˜åŒ–é—®é¢˜é€šå¸¸æŒ‡çš„æ˜¯ï¼šå¯»æ‰¾ç¥ç»ç½‘ç»œä¸Šçš„ä¸€ç»„å‚æ•°ï¼Œå®ƒèƒ½æ˜¾è‘—åœ°é™ä½ç›®æ ‡å‡½æ•°ã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œå¸¸è§çš„ä¼˜åŒ–ç®—æ³•åŒ…æ‹¬ä¼ ç»Ÿçš„ SGDï¼ŒMomentum SGDï¼ŒAdaGradï¼ŒRMSProp å’Œ Adam ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€å¼ å›¾æ¥ç®€å•çœ‹ä¸€ä¸‹è¿™äº›ä¼˜åŒ–ç®—æ³•å„è‡ªçš„æ€§è´¨ï¼Œåé¢æˆ‘ä»¬ä¼šåœ¨ä¼˜åŒ–ç®—æ³•ä¸€ç« ä¸­å±•å¼€è®²è§£ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/335feff01a2346fd897d18139294eeb5dc447180f3a9491da461c12db1ae7e52" width="500" hegiht="" ></center><center>å›¾29ï¼šä¼˜åŒ–ç®—æ³• </center>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹ åŸºç¡€_æ·±åº¦å­¦ä¹ æ€»è§ˆä¸æ¨¡å‹æ­å»º </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
            <tag> paddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸˆå¦‚ä½•ä½¿ç”¨nvmç®¡ç†nodeï¼Ÿ</title>
      <link href="/2022/12/17/nvm/"/>
      <url>/2022/12/17/nvm/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨nvmç®¡ç†node-js"><a href="#ä½¿ç”¨nvmç®¡ç†node-js" class="headerlink" title="ä½¿ç”¨nvmç®¡ç†node.js"></a>ä½¿ç”¨nvmç®¡ç†node.js</h1><h3 id="1ã€nvmæ˜¯ä»€ä¹ˆ"><a href="#1ã€nvmæ˜¯ä»€ä¹ˆ" class="headerlink" title="1ã€nvmæ˜¯ä»€ä¹ˆ"></a>1ã€nvmæ˜¯ä»€ä¹ˆ</h3><p>ï¼ˆ1ï¼‰nvm(Node.js version manager) æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨ï¼Œå¯ä»¥ååŠ©æ‚¨å¿«é€Ÿåœ° æ›´æ–°ã€å®‰è£…ã€ä½¿ç”¨ã€å¸è½½ æœ¬æœºçš„å…¨å±€ node.js ç‰ˆæœ¬ã€‚<br>ï¼ˆ2ï¼‰æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½åŒæ—¶åœ¨è¿›è¡Œå¤šä¸ªé¡¹ç›®å¼€å‘ï¼Œè€Œå¤šä¸ªé¡¹ç›®æ‰€ä½¿ç”¨çš„nodeç‰ˆæœ¬åˆæ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ–è€…æ˜¯è¦ç”¨æœ€æ–°çš„nodeç‰ˆæœ¬è¿›è¡Œè¯•éªŒå’Œå­¦ä¹ ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºç»´æŠ¤å¤šä¸ªç‰ˆæœ¬çš„nodeå°†ä¼šæ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ï¼Œè€Œnvmå°±æ˜¯ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜è€Œäº§ç”Ÿçš„ï¼Œä»–å¯ä»¥åœ¨åŒä¸€å°ç”µè„‘ä¸Šè¿›è¡Œå¤šä¸ªnodeç‰ˆæœ¬ä¹‹é—´çš„åˆ‡æ¢ï¼Œè€Œè¿™æ­£æ˜¯nvmçš„ä»·å€¼æ‰€åœ¨ã€‚</p><h3 id="2ã€ä½¿ç”¨-nvm-ç®¡ç†ç‰ˆæœ¬ï¼ˆnvmå¸¸ç”¨å‘½ä»¤ï¼‰"><a href="#2ã€ä½¿ç”¨-nvm-ç®¡ç†ç‰ˆæœ¬ï¼ˆnvmå¸¸ç”¨å‘½ä»¤ï¼‰" class="headerlink" title="2ã€ä½¿ç”¨ nvm ç®¡ç†ç‰ˆæœ¬ï¼ˆnvmå¸¸ç”¨å‘½ä»¤ï¼‰"></a>2ã€ä½¿ç”¨ nvm ç®¡ç†ç‰ˆæœ¬ï¼ˆnvmå¸¸ç”¨å‘½ä»¤ï¼‰</h3><h5 id="æœ€å¸¸ç”¨çš„å‘½ä»¤"><a href="#æœ€å¸¸ç”¨çš„å‘½ä»¤" class="headerlink" title="æœ€å¸¸ç”¨çš„å‘½ä»¤"></a>æœ€å¸¸ç”¨çš„å‘½ä»¤</h5><ul><li><strong>nvm install [nodeç‰ˆæœ¬å·]</strong>   &#x2F;&#x2F;å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„node</li><li><strong>nvm ls</strong> &#x2F;&#x2F; æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬</li><li><strong>nvm use [nodeç‰ˆæœ¬å·]</strong>   &#x2F;&#x2F;åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬çš„node</li></ul><blockquote><p><strong>nvm install latest</strong> å®‰è£…æœ€æ–°ç‰ˆæœ¬node.js<br><strong>nvm use ç‰ˆæœ¬å·</strong> ä½¿ç”¨æŸä¸€å…·ä½“ç‰ˆæœ¬ï¼Œä¾‹å¦‚ ï¼šnvm use 14.3.0<br><strong>nvm list</strong> åˆ—å‡ºå½“å‰å·²å®‰è£…çš„æ‰€æœ‰ç‰ˆæœ¬<br><strong>nvm ls</strong> åˆ—å‡ºå½“å‰å·²å®‰è£…çš„æ‰€æœ‰ç‰ˆæœ¬<br><strong>nvm uninstall ç‰ˆæœ¬å·</strong> å¸è½½æŸä¸€å…·ä½“ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼šnvm use 14.3.0<br><strong>nvm ls-remote</strong> Macç‰ˆæœ¬ä¸­,åˆ—å‡ºå…¨éƒ¨å¯ä»¥å®‰è£…çš„nodeç‰ˆæœ¬<br><strong>nvm ls available</strong> windowsç‰ˆæœ¬,åˆ—å‡ºå…¨éƒ¨å¯ä»¥å®‰è£…çš„nodeç‰ˆæœ¬<br><strong>nvm current</strong> æ˜¾ç¤ºå½“å‰çš„ç‰ˆæœ¬<br><strong>nvm alias</strong> ç»™ä¸åŒçš„ç‰ˆæœ¬å·æ·»åŠ åˆ«å<br><strong>nvm unalias</strong> åˆ é™¤å·²å®šä¹‰çš„åˆ«å<br><strong>nvm reinstall-packages</strong> åœ¨å½“å‰ç‰ˆæœ¬nodeç¯å¢ƒä¸‹ï¼Œé‡æ–°å…¨å±€å®‰è£…æŒ‡å®šç‰ˆæœ¬å·çš„npmåŒ…</p><p>nvm arch [32|64]ï¼š æ˜¾ç¤ºnodeæ˜¯è¿è¡Œåœ¨32ä½è¿˜æ˜¯64ä½æ¨¡å¼ã€‚æŒ‡å®š32æˆ–64æ¥è¦†ç›–é»˜è®¤ä½“ç³»ç»“æ„ã€‚<br>-nvm install [arch]ï¼šè¯¥å¯ä»¥æ˜¯node.jsç‰ˆæœ¬æˆ–æœ€æ–°ç¨³å®šç‰ˆæœ¬latestã€‚ï¼ˆå¯é€‰[arch]ï¼‰æŒ‡å®šå®‰è£…32ä½æˆ–64ä½ç‰ˆæœ¬ï¼ˆé»˜è®¤ä¸ºç³»ç»Ÿarchï¼‰ã€‚è®¾ç½®[arch]ä¸ºallä»¥å®‰è£…32å’Œ64ä½ç‰ˆæœ¬ã€‚åœ¨å‘½ä»¤åé¢æ·»åŠ â€“insecureï¼Œå¯ä»¥ç»•è¿‡è¿œç«¯ä¸‹è½½æœåŠ¡å™¨çš„SSLéªŒè¯ã€‚<br>nvm list [available]ï¼šåˆ—å‡ºå·²ç»å®‰è£…çš„node.jsç‰ˆæœ¬ã€‚å¯é€‰çš„availableï¼Œæ˜¾ç¤ºå¯ä¸‹è½½ç‰ˆæœ¬çš„éƒ¨åˆ†åˆ—è¡¨ã€‚è¿™ä¸ªå‘½ä»¤å¯ä»¥ç®€å†™ä¸ºnvm ls [available]ã€‚<br>nvm onï¼š å¯ç”¨node.jsç‰ˆæœ¬ç®¡ç†ã€‚<br>nvm offï¼š ç¦ç”¨node.jsç‰ˆæœ¬ç®¡ç†(ä¸å¸è½½ä»»ä½•ä¸œè¥¿)<br>nvm proxy [url]ï¼š è®¾ç½®ç”¨äºä¸‹è½½çš„ä»£ç†ã€‚ç•™[url]ç©ºç™½ï¼Œä»¥æŸ¥çœ‹å½“å‰çš„ä»£ç†ã€‚è®¾ç½®[url]ä¸ºnoneåˆ é™¤ä»£ç†ã€‚<br>nvm node_mirror [url]ï¼šè®¾ç½®nodeé•œåƒï¼Œé»˜è®¤ä¸º<a href="https://nodejs.org/dist/.%E3%80%82%E5%8F%AF%E4%BB%A5%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%B7%98%E5%AE%9D%E7%9A%84%E9%95%9C%E5%83%8Fhttps://npm.taobao.org/mirrors/node/">https://nodejs.org/dist/.ã€‚å¯ä»¥è®¾ç½®ä¸ºæ·˜å®çš„é•œåƒhttps://npm.taobao.org/mirrors/node/</a><br>nvm npm_mirror [url]ï¼šè®¾ç½®npmé•œåƒï¼Œé»˜è®¤ä¸º<a href="https://github.com/npm/npm/archive/%E3%80%82%E5%8F%AF%E4%BB%A5%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%B7%98%E5%AE%9D%E7%9A%84%E9%95%9C%E5%83%8Fhttps://npm.taobao.org/mirrors/npm/">https://github.com/npm/npm/archive/ã€‚å¯ä»¥è®¾ç½®ä¸ºæ·˜å®çš„é•œåƒhttps://npm.taobao.org/mirrors/npm/</a><br>nvm uninstall ï¼š å¸è½½æŒ‡å®šç‰ˆæœ¬çš„nodejsã€‚<br>nvm use [version] [arch]ï¼š åˆ‡æ¢åˆ°ä½¿ç”¨æŒ‡å®šçš„nodejsç‰ˆæœ¬ã€‚å¯ä»¥æŒ‡å®š32&#x2F;64ä½[arch]ã€‚<br>-nvm use ï¼šå°†ç»§ç»­ä½¿ç”¨æ‰€é€‰ç‰ˆæœ¬ï¼Œä½†æ ¹æ®æä¾›çš„å€¼åˆ‡æ¢åˆ°32&#x2F;64ä½æ¨¡å¼<br>nvm root [path]ï¼š è®¾ç½® nvm å­˜å‚¨node.jsä¸åŒç‰ˆæœ¬çš„ç›®å½• ,å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨å½“å‰ç›®å½•ã€‚<br>-nvm versionï¼š æ˜¾ç¤ºå½“å‰è¿è¡Œçš„nvmç‰ˆæœ¬ï¼Œå¯ä»¥ç®€å†™ä¸ºnvm v</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nvm </tag>
            
            <tag> node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸŒåšå®¢æ­å»ºå­¦ä¹ ç¬”è®°</title>
      <link href="/2022/12/17/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/12/17/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="snowman-vscodeä¸­å¯¹åšå®¢é¡¹ç›®çš„æ“ä½œ"><a href="#snowman-vscodeä¸­å¯¹åšå®¢é¡¹ç›®çš„æ“ä½œ" class="headerlink" title=":snowman:vscodeä¸­å¯¹åšå®¢é¡¹ç›®çš„æ“ä½œ"></a>:snowman:vscodeä¸­å¯¹åšå®¢é¡¹ç›®çš„æ“ä½œ</h1><p><code>hexo cl;hexo s</code>è·‘åšå®¢é¡¹ç›®ã€‚</p><hr><h2 id="1ã€å°†æœ¬åœ°åšå®¢éƒ¨ç½²åˆ°github"><a href="#1ã€å°†æœ¬åœ°åšå®¢éƒ¨ç½²åˆ°github" class="headerlink" title="1ã€å°†æœ¬åœ°åšå®¢éƒ¨ç½²åˆ°github"></a>1ã€å°†æœ¬åœ°åšå®¢éƒ¨ç½²åˆ°github</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy  // Git BASHç»ˆç«¯</span><br><span class="line">hexo clean; hexo generate; hexo deploy  // VSCODEç»ˆç«¯</span><br><span class="line">æ³¨æ„ï¼šéœ€è¦è¾“å…¥å¯†ç ã€‚</span><br></pre></td></tr></table></figure><blockquote><ul><li>hexo cleanï¼šåˆ é™¤ä¹‹å‰ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè‹¥æœªç”Ÿæˆè¿‡é™æ€æ–‡ä»¶ï¼Œå¯å¿½ç•¥æ­¤å‘½ä»¤ã€‚</li><li>hexo generateï¼šç”Ÿæˆé™æ€æ–‡ç« ï¼Œå¯ä»¥ç”¨<code>hexo g</code>ç¼©å†™</li><li>hexo deployï¼šéƒ¨ç½²æ–‡ç« ï¼Œå¯ä»¥ç”¨<code>hexo d</code>ç¼©å†™</li></ul></blockquote><hr>              </div>            </details><h2 id="2ã€Nunjucks-Errorçš„é”™è¯¯è§£å†³æ–¹æ¡ˆ"><a href="#2ã€Nunjucks-Errorçš„é”™è¯¯è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2ã€Nunjucks Errorçš„é”™è¯¯è§£å†³æ–¹æ¡ˆ"></a>2ã€<code>Nunjucks Error</code>çš„é”™è¯¯è§£å†³æ–¹æ¡ˆ</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <p>[å‚è€ƒåšå®¢](<a href="http://sixiwenwu.com/86/">Nunjucks Erroré”™è¯¯å¤„ç† â€“ è½¯ä»¶å­¦ä¹ ç¬”è®° (sixiwenwu.com)</a>)</p><p>æˆ‘ä»¬MarkDownè®°å½•ä¸€äº›ç¬”è®°æˆ–è€…å•¥çš„éš¾å…ä¼šç”¨åˆ°å…¬å¼ï¼Œå½“æˆ‘ä»¬ä¸Šä¼ åˆ°åšå®¢æ—¶å¯èƒ½ä¼šå‡ºç°<code>Nunjucks Error</code>çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™æ—¶éœ€è¦ä»æŠ¥é”™ä¿¡æ¯ä¸Šå¯»æ‰¾è§£å†³æ–¹æ³•ã€‚</p><h4 id="æŠ¥é”™ä¿¡æ¯"><a href="#æŠ¥é”™ä¿¡æ¯" class="headerlink" title="æŠ¥é”™ä¿¡æ¯"></a>æŠ¥é”™ä¿¡æ¯</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Nunjucks Error: _posts/æ·±åº¦å­¦ä¹ 3.2-æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜ç­–ç•¥ï¼ˆä¸‹ï¼‰.md [Line 469, Column 85] expected variable end</span><br></pre></td></tr></table></figure><h4 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h4><p>å®˜ç½‘å¯¹äºNunjucksçš„æè¿°ï¼š<a href="https://hexo.io/docs/troubleshooting.html">https://hexo.io/docs/troubleshooting.html</a></p><p><img src="https://s1.ax1x.com/2020/07/13/UYla2q.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hexoä½¿ç”¨Nunjucksæ¥æ¸²æŸ“å¸–å­ï¼ˆSwigåœ¨æ—§ç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼Œå®ƒä»¬å…±äº«ç±»ä¼¼çš„è¯­æ³•ï¼‰ã€‚å†…å®¹è¢«åŒ…è£…æˆ–å°†è¢«è§£æï¼Œå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨åŸå§‹æ ‡ç­¾æ’ä»¶ã€å•åå¼•å·æˆ–ä¸‰åå¼•å·åŒ…è£…å®ƒæ¥è·³è¿‡è§£æã€‚</span><br><span class="line">æˆ–è€…ï¼Œå¯ä»¥é€šè¿‡æ¸²æŸ“å™¨çš„é€‰é¡¹ï¼ˆå¦‚æœæ”¯æŒï¼‰ã€API æˆ–å‰è¨€ç¦ç”¨ Nunjucks æ ‡ç­¾ã€‚&#123;&#123; &#125;&#125;&#123;% %&#125;`&#123;&#123; &#125;&#125;`</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">Hello &#123;&#123; world &#125;&#125;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>å¯¹äºæ­£æ–‡ä¸­é™¤äº†ä»£ç å—ï¼ˆå•è¡Œä»£ç ä¹Ÿä¸è¡Œï¼‰ä»¥å¤–çš„æ‰€æœ‰åœ°æ–¹ï¼Œåœ¨<code>%ä¸{}</code>ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¦‚ï¼š<code>{ % % } æˆ– { { } }</code>æˆ–è€…ä½¿ç”¨ä»£ç å—è¡¨ç¤ºã€‚</p>              </div>            </details><h1 id="snowman-Hexoåšå®¢"><a href="#snowman-Hexoåšå®¢" class="headerlink" title=":snowman:Hexoåšå®¢"></a>:snowman:Hexoåšå®¢</h1><p>Hexoæ¡†æ¶é»˜è®¤çš„æ ¹ç›®å½•å°±æ˜¯sourceæ–‡ä»¶å¤¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">menu:   //åšå®¢çš„èœå•æ </span><br><span class="line">  é¦–é¡µ: / || fas fa-home</span><br><span class="line">  å½’æ¡£: /archives/ || fas fa-archive</span><br><span class="line">  æ ‡ç­¾: /tags/ || fas fa-tags</span><br><span class="line">  åˆ†è£‚: /categories/ || fas fa-folder-open</span><br><span class="line">  åˆ—è¡¨||fas fa-list:</span><br><span class="line">    éŸ³ä¹: /music/ || fas fa-music</span><br><span class="line">    ç”µå½±: /movies/ || fas fa-video</span><br><span class="line">  å‹é“¾: /link/ || fas fa-link</span><br><span class="line">  å…³äº: /about/ || fas fa-heart</span><br></pre></td></tr></table></figure><p>å½’æ¡£ã€æ ‡ç­¾ã€åˆ†ç±»é¡µæ¡†æ¶ä¼šè‡ªåŠ¨æ¸²æŸ“å‡ºæ¥ï¼Œä½†æˆ‘ä»¬éœ€è¦æ·»åŠ è‡ªå®šä¹‰é¡µï¼šéŸ³ä¹ã€ç”µå½±ã€å‹é“¾ã€å…³äºã€‚</p><hr><p><code>_config.butterfly.ymlqw</code>æ–‡ä»¶ä¸­<code>inject</code>æ¨¡å—ä¸­å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„<code>css</code>æ–‡ä»¶å’Œ<code>js</code>æ–‡ä»¶</p><hr><h2 id="1ã€å…³äºåšå®¢ä¸­çš„å›¾æ ‡ï¼š"><a href="#1ã€å…³äºåšå®¢ä¸­çš„å›¾æ ‡ï¼š" class="headerlink" title="1ã€å…³äºåšå®¢ä¸­çš„å›¾æ ‡ï¼š"></a>1ã€å…³äºåšå®¢ä¸­çš„å›¾æ ‡ï¼š</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <p><strong>1ã€iconfonté˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡</strong></p><details class="folding-tag" red><summary> ç¬¬ä¸€ç§æ–¹æ³• </summary>              <div class='content'>              <p>ç›´æ¥åœ¨é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡ç½‘ç«™é€‰æ‹©æƒ³è¦içš„å›¾æ ‡æ·»åŠ åˆ°è´­ç‰©è½¦ï¼Œç„¶ååœ¨æ·»åŠ åˆ°<code>my_blog</code>é¡¹ç›®ä¸­ï¼Œå°†æ­¤é¡¹ç›®çš„cssæ–‡ä»¶å¼•ç”¨åˆ°bolgæºä»£ç çš„injectä¸­å³å¯ã€‚</p><p>å¼•ç”¨å›¾æ ‡ç”¨*<code>iconfont icon-å›¾æ ‡å</code>*ï¼Œåœ¨é¡¹ç›®ä¸­å¯è§</p>              </div>            </details><details class="folding-tag" red><summary> ç¬¬äºŒç§æ–¹æ³• </summary>              <div class='content'>              <div class="tabs" id="iconå›¾æ ‡"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#iconå›¾æ ‡-1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#iconå›¾æ ‡-2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#iconå›¾æ ‡-3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#iconå›¾æ ‡-4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="iconå›¾æ ‡-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="iconå›¾æ ‡-2"><ol><li><code>icon-xxxx</code>ï¼šè¡¨ç¤ºå›¾æ ‡<code>font-class</code>,å¯ä»¥åœ¨è‡ªå·±çš„é˜¿é‡ŒçŸ¢é‡å›¾æ ‡åº“é¡¹ç›®çš„<code>font-class</code>å¼•ç”¨æ–¹æ¡ˆå†…æŸ¥è¯¢å¹¶å¤åˆ¶ã€‚</li><li><code>font-size</code>ï¼šè¡¨ç¤ºå›¾æ ‡å¤§å°ï¼Œç›´æ¥å¡«å†™æ•°å­—å³å¯ï¼Œå•ä½ä¸º<code>em</code>ã€‚å›¾æ ‡å¤§å°é»˜è®¤å€¼ä¸º<code>1em</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="iconå›¾æ ‡-3"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-ox_chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="iconå›¾æ ‡-4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><p><strong>2ã€ä½¿ç”¨ç”µè„‘è‡ªå¸¦å›¾æ ‡è¡¨æƒ…</strong></p><p>*<code>å¼€å§‹é”®+ï¼›</code>*å³å¯</p><p><strong>3ã€Font Awesomeå›¾æ ‡</strong></p><p>æˆ‘ä»¬å¯ä»¥ä¸Š <a href="http://fontawesome.dashgame.com/">http://fontawesome.dashgame.com/</a> ç½‘ç«™ä¸Šé€‰è‡ªå·±å–œæ¬¢çš„å›¾æ ‡ï¼Œåœ¨ font-awesome.css ä¸­æŸ¥çœ‹å¼•ç”¨idï¼Œç„¶ååœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨ã€‚ã€font-awesome.cssæ–‡ä»¶å·²ç»ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¹¶åœ¨injectä¸­å¼•ç”¨ã€‘<br>æ¯”å¦‚æˆ‘æƒ³å°†ä¾§è¾¹æ æ–‡ç« æ—¥æœŸå‰çš„å°æ—¶é’Ÿå›¾æ ‡æ¢ä¸ºæ—¥å†å›¾æ ‡ï¼Œåœ¨ç½‘ç«™ä¸Šæœä¸€ä¸‹<code>calendar</code>ï¼Œæ‰¾åˆ°å›¾æ ‡<code>calendar</code>ï¼Œå»font-awesome.cssä¸­æŸ¥æ‰¾å…¶idä¸º<code>fa-calendar</code>ï¼Œåœ¨ejsä¸­æ›¿æ¢é»˜è®¤çš„<code>fa-clock-o</code>ã€‚</p><p>[ç‚¹å‡»ç›´æ¥æŸ¥çœ‹å›¾æ ‡å¼•ç”¨çš„æ ¼å¼]ï¼ˆ<a href="https://wpmore.cn/resources/font-awesome/%EF%BC%89">https://wpmore.cn/resources/font-awesome/ï¼‰</a></p><p><strong>4ã€åŠ¨æ€å›¾æ ‡</strong></p><p>ä½¿ç”¨<code>fa-spin</code>ç±»æ¥ä½¿ä»»æ„å›¾æ ‡æ—‹è½¬ï¼Œ&#96;&#96;å³å¯ä½¿fa-tagså›¾æ ‡æ—‹è½¬ã€‚</p><p>å…·ä½“åˆ°æˆ‘çš„åšå®¢ï¼Œæˆ‘å°†ä¸»é¡µä¾§è¾¹æ çš„â€œå‹æƒ…é“¾æ¥â€œä¸­â€œæˆ‘çš„CSDNåšå®¢â€å‰çš„å°è¶³çƒæ”¹ä¸ºæ—‹è½¬çš„äº†ã€‚<br>åœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶_config.ymlä¸­ï¼Œåœ¨å›¾æ ‡å¼•ç”¨ä¸­åŠ ä¸Š<code>fa-spin</code>ç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">links:</span><br><span class="line">  - title: &quot;æˆ‘çš„CSDNåšå®¢&quot;</span><br><span class="line">    url: http://blog.csdn.net/masikkk</span><br><span class="line">    intro: &quot;æˆ‘çš„CSDNåšå®¢&quot;</span><br><span class="line">    icon: &quot;fa fa-soccer-ball-o fa-spin&quot;</span><br></pre></td></tr></table></figure><hr>              </div>            </details><h2 id="2ã€åšå®¢å†…å®¹å†™ä½œ"><a href="#2ã€åšå®¢å†…å®¹å†™ä½œ" class="headerlink" title="2ã€åšå®¢å†…å®¹å†™ä½œ"></a>2ã€åšå®¢å†…å®¹å†™ä½œ</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <h3 id="æ ‡ç­¾å¤–æŒ‚"><a href="#æ ‡ç­¾å¤–æŒ‚" class="headerlink" title="æ ‡ç­¾å¤–æŒ‚"></a>æ ‡ç­¾å¤–æŒ‚</h3><p>:yum:<a href="https://www.fomal.cc/posts/2013454d.html">æŸ¥é˜…é“¾æ¥ç‚¹è¿™é‡Œ | FomalhautğŸ¥</a></p><blockquote><p>é™¤äº†æ ‡å‡†çš„mackdownè¯­æ³•ä»¥å¤–ï¼Œbutterflyè¿˜æä¾›äº†é¢å¤–çš„ä¸€äº›ç»„ä»¶æ ‡ç­¾ï¼ˆéæ ‡å‡†mackdownè¯­æ³•ï¼Œbutterflyä»¥å¤–çš„åœ°æ–¹ä½¿ç”¨å¯èƒ½ä¸ç”Ÿæ•ˆä¸”ä¼šæŠ¥é”™ï¼‰</p></blockquote><h3 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h3><blockquote><p>markdownå…è®¸åœ¨é¡µé¢ä¸­å®šä¹‰ä¸€äº›é¢å¤–å±æ€§ï¼ˆç›¸å½“äºå˜é‡ï¼‰ï¼ŒHexoæ¡†æ¶ä¼šè¯»å–æ¯ä¸ªmdæ–‡ä»¶çš„front-matterä¼ ç»™butterflyä¸»é¢˜æ¡†æ¶ä½¿ç”¨ã€‚æ¯ä¸ªé¡µé¢æˆ–æ–‡ç« çš„ä¸€äº›ç›¸å…³ä¿¡æ¯è®¾ç½®éœ€è¦ç”¨åˆ°ã€‚å¦‚æ–‡ç« åˆ†ç±»ï¼Œåˆ›å»ºæ—¶é—´ä»¥åŠæ–‡ç« é¡¶éƒ¨æ ‡é¢˜éƒ½éœ€è¦åœ¨ front-matterä¸­é…ç½®ã€‚</p><p>front-matter å®šä¹‰åœ¨mdæ–‡ä»¶é¡¶éƒ¨ï¼Œç”± â€” ç¬¦å·åŒ…æ‹¬ã€‚ã€</p></blockquote><h3 id="page-matter"><a href="#page-matter" class="headerlink" title="page matter"></a>page matter</h3><p>ç”± <code>hexo new page [é¡µé¢åç§°]</code> å‘½ä»¤åˆ›å»ºçš„é¡µé¢ä¸­çš„front-matteréƒ½å±äº page matter,</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top_img:</span><br><span class="line">mathjax:</span><br><span class="line">katex:</span><br><span class="line">aside:</span><br><span class="line">aplayer:</span><br><span class="line">highlight_shrink:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/2.png" alt="2"></p><p><strong>post matter</strong></p><p>ä½¿ç”¨ <code>hexo new post [æ–‡ç« åç§°]</code> åˆ›å»ºçš„mdæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top_img:</span><br><span class="line">comments:</span><br><span class="line">cover:</span><br><span class="line">toc:</span><br><span class="line">toc_number:</span><br><span class="line">toc_style_simple:</span><br><span class="line">copyright:</span><br><span class="line">copyright_author:</span><br><span class="line">copyright_author_href:</span><br><span class="line">copyright_url:</span><br><span class="line">copyright_info:</span><br><span class="line">mathjax:</span><br><span class="line">katex:</span><br><span class="line">aplayer:</span><br><span class="line">highlight_shrink:</span><br><span class="line">aside:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p><img src="https://picbed.dai2yutou.space/article_img/3.png" alt="3"></p>              </div>            </details><h2 id="3ã€æ‰¾å›¾ç‰‡"><a href="#3ã€æ‰¾å›¾ç‰‡" class="headerlink" title="3ã€æ‰¾å›¾ç‰‡"></a>3ã€æ‰¾å›¾ç‰‡</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <p>ä¸‹é¢è¿™ç¯‡åšå®¢çš„å›¾ç‰‡å°±å¾ˆç¾å˜¿å˜¿ğŸ˜</p><p><a href="https://www.fomal.cc/box/gallery/">ä¸€äº›å¥½çœ‹çš„å›¾ç‰‡ | FomalhautğŸ¥</a></p>              </div>            </details><h2 id="4ã€åšå®¢ä¸­æ·»åŠ è‡ªå®šä¹‰htmlé¡µé¢"><a href="#4ã€åšå®¢ä¸­æ·»åŠ è‡ªå®šä¹‰htmlé¡µé¢" class="headerlink" title="4ã€åšå®¢ä¸­æ·»åŠ è‡ªå®šä¹‰htmlé¡µé¢"></a>4ã€åšå®¢ä¸­æ·»åŠ è‡ªå®šä¹‰htmlé¡µé¢</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <ol><li><p><strong>åœ¨åšå®¢çš„æ ¹ç›®å½•çš„<code>source</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾è¦éƒ¨ç½²çš„<code>html</code>æ–‡ä»¶</strong></p></li><li><p><strong>ç„¶ååœ¨åšå®¢æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶<code>_config.yml</code>æ–‡ä»¶é‡Œï¼Œè®¾ç½®è·³è¿‡æ¸²æŸ“ï¼š</strong></p><ul><li><p>å•ä¸ªæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># è·³è¿‡æ¸²æŸ“</span><br><span class="line">skip_render: </span><br><span class="line">  - &quot;xxxx.html&quot;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœåªåˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¦è·³è¿‡å®ƒç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„æ¸²æŸ“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># è·³è¿‡æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶</span><br><span class="line">skip_render: </span><br><span class="line">  - &quot;æ–‡ä»¶å¤¹å/*&quot;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœçˆ¶æ–‡ä»¶å¤¹ä¸‹è¿˜æœ‰å­æ–‡ä»¶å¤¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># è·³è¿‡å­æ–‡ä»¶å¤¹</span><br><span class="line">skip_render: </span><br><span class="line">  - &quot;æ–‡ä»¶å¤¹å/å­æ–‡ä»¶å¤¹å/*&quot;</span><br></pre></td></tr></table></figure></li><li><p>æˆ–æ›´ç®€å•ç²—æš´çš„æ–¹å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># è·³è¿‡æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰å­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</span><br><span class="line">skip_render: </span><br><span class="line">  - &quot;æ–‡ä»¶å¤¹å/**&quot;   </span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>å¦‚ä½•å¼•ç”¨æ­¤é¡µé¢å±•ç¤º</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å¯¼èˆªæ ä¸­å¼•ç”¨æ–¹æ³•:</span><br><span class="line">ç›´æ¥æ·»åŠ htmlæ–‡ä»¶çš„è·¯å¾„å³å¯</span><br><span class="line">ğŸ”é¡¹ç›®: /HTML/æ–°å¹´å€’è®¡æ—¶/index.html</span><br></pre></td></tr></table></figure></li><li><p><strong>å•ä¸ªç‰¹æ®Šæ–‡ä»¶æ·»åŠ ä¸åº”ç”¨ä¸»é¢˜æ¨¡æ¿æ¸²æŸ“çš„æ ‡è®°</strong></p><p>ä¾‹å¦‚æˆ‘ä»¬çš„ç½‘ç«™å¦‚æœè¦ä½¿ç”¨ç™¾åº¦ç»Ÿè®¡ï¼Œå¾€å¾€éœ€è¦åœ¨æ ¹ç›®å½•æ”¾ä¸€ä¸ªhtmlæ ¼å¼çš„éªŒè¯æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é»˜è®¤ä¹Ÿä¼šç»è¿‡ç”¨ä¸»é¢˜æ¨¡æ¿æ¸²æŸ“ï¼Œé¿å…æ¸²æŸ“çš„åŠæ³•å°±æ˜¯åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li></ol>              </div>            </details><h2 id="5ã€Hexoä¸­ä½¿ç”¨emojiè¡¨æƒ…"><a href="#5ã€Hexoä¸­ä½¿ç”¨emojiè¡¨æƒ…" class="headerlink" title="5ã€Hexoä¸­ä½¿ç”¨emojiè¡¨æƒ…"></a>5ã€Hexoä¸­ä½¿ç”¨emojiè¡¨æƒ…</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <p>åœ¨åšå®¢å†™æ–‡ç« æ—¶ä¸å…ç”¨åˆ°è¡¨æƒ…ï¼Œå› ä¸ºæˆ‘ç»å¸¸æ˜¯ç”¨markdownå†™å¥½åï¼Œç²˜è´´å¤åˆ¶åˆ°è¿™é‡Œçš„ï¼Œé‚£ä¹ˆåšå®¢å°±éœ€è¦æ”¯æŒmarkdownä¸­è¾“å…¥çš„è¡¨æƒ…ï¼Œæœ¬åšå®¢å¯¹æ­¤å·²è¿›è¡Œé­”æ”¹ï¼Œ<br>å½“ä½¿ç”¨åˆ°è¡¨æƒ…æ—¶ï¼Œå¯åˆ°å¦‚ä¸‹å¤§ä½¬é“¾æ¥æŸ¥è¯¢ï¼š</p><div class="tag link"><a class="link-card" title="é“¶æ²³å°å¾" href="https://blog.xaoxu.cn/archives/hexo-use-emoji"><div class="left"><img src="https://blog-cos.xaoxu.cn/images/site-img/avatar.png"/></div><div class="right"><p class="text">é“¶æ²³å°å¾</p><p class="url">https://blog.xaoxu.cn/archives/hexo-use-emoji</p></div></a></div><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><p>è¾“å…¥å¯¹åº”çš„emojiç¼–ç å°±è¡Œäº†<br>ä¾‹å¦‚ï¼šè¾“å…¥ç¬‘è„¸å¯¹åº”çš„ emoji ç¼–ç  :smile: å°±å¯ä»¥å¾—åˆ° ğŸ˜„</p>              </div>            </details><h2 id="6ã€æ–‡ç« ç½®é¡¶æ»šåŠ¨æ çš„æ–‡ç« æ·»åŠ "><a href="#6ã€æ–‡ç« ç½®é¡¶æ»šåŠ¨æ çš„æ–‡ç« æ·»åŠ " class="headerlink" title="6ã€æ–‡ç« ç½®é¡¶æ»šåŠ¨æ çš„æ–‡ç« æ·»åŠ "></a>6ã€æ–‡ç« ç½®é¡¶æ»šåŠ¨æ çš„æ–‡ç« æ·»åŠ </h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <p>åœ¨æ–‡ç« çš„front_matterä¸­æ·»åŠ swiper_indexé…ç½®é¡¹å³å¯ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ–‡ç« æ ‡é¢˜</span><br><span class="line">date: åˆ›å»ºæ—¥æœŸ</span><br><span class="line">updated: æ›´æ–°æ—¥æœŸ</span><br><span class="line">cover: æ–‡ç« å°é¢</span><br><span class="line">description: æ–‡ç« æè¿°</span><br><span class="line"><span class="section">swiper<span class="emphasis">_index: 1 #ç½®é¡¶è½®æ’­å›¾é¡ºåºï¼Œéè´Ÿæ•´æ•°ï¼Œæ•°å­—è¶Šå¤§è¶Šé å‰</span></span></span><br><span class="line"><span class="emphasis"><span class="section">---</span></span></span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="7ã€æ–‡ç« é¡µå±€éƒ¨-html-ä»£ç ä¸æ¸²æŸ“"><a href="#7ã€æ–‡ç« é¡µå±€éƒ¨-html-ä»£ç ä¸æ¸²æŸ“" class="headerlink" title="7ã€æ–‡ç« é¡µå±€éƒ¨ html ä»£ç ä¸æ¸²æŸ“"></a>7ã€æ–‡ç« é¡µå±€éƒ¨ html ä»£ç ä¸æ¸²æŸ“</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <p>åœ¨ä½ çš„ md æ–‡ç« é¡µä¸­ï¼Œéƒ¨åˆ†å†…å®¹ä¸æƒ³ç»è¿‡ Hexo æ¸²æŸ“ï¼Œåˆ™åŒ…ä¸€å±‚ raw æ ‡ç­¾ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span>ä½ çš„ä¸€äº›ä»£ç ...<span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span>ä½ çš„ä¸€äº›ä»£ç ...<span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ ‡ç­¾å†…çš„ä»£ç å°±ä¸ä¼šè¢«æ¡†æ¶æ¸²æŸ“äº†~</p>              </div>            </details><h1 id="snowman-GitHub"><a href="#snowman-GitHub" class="headerlink" title=":snowman:GitHub"></a>:snowman:GitHub</h1><h2 id="1-å›¾åºŠæ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#1-å›¾åºŠæ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="1.å›¾åºŠæ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>1.å›¾åºŠæ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“</h2><details class="folding-tag" blue><summary> ç‚¹å‡»æŸ¥çœ‹ </summary>              <div class='content'>              <p><a href="https://www.fomal.cc/posts/d7fb1ba1.html">å¦‚ä½•å»ºç«‹åŸºäºGithubçš„ä»“åº“çš„å›¾åºŠï¼Ÿï¼Ÿï¼Ÿ</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># å°†æ›´æ”¹æäº¤</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;æ›´æ–°å›¾ç‰‡&quot;</span><br><span class="line"># æ¨é€è‡³githubä»“åº“</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>å·²ç»å°†å›¾åºŠéƒ¨ç½²åˆ°<code>Vercel</code>æ€»ï¼Œå½“åœ¨å¼•ç”¨å›¾åºŠä¸­çš„å›¾ç‰‡æ—¶ï¼Œåªéœ€è¦<code>https://picbed.dai2yutou.space/å›¾ç‰‡æ‰€åœ¨æ–‡ä»¶å¤¹/å›¾ç‰‡</code>å³å¯ã€‚</p><p>ä¾‹å¦‚ï¼š<a href="https://picbed.dai2yutou.space/web_img/web_background1.jpg">https://picbed.dai2yutou.space/web_img/web_background1.jpg</a></p>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸€ç¯‡æ–‡ç« </title>
      <link href="/2022/12/09/hello-world/"/>
      <url>/2022/12/09/hello-world/</url>
      
        <content type="html"><![CDATA[<h2 id="è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "><a href="#è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« " class="headerlink" title="è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "></a>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </h2><p>æœ¬æ–‡ç« æ˜¯ç”¨æ¥æµ‹è¯•çš„ï¼Œé¡ºä¾¿çºªå¿µä¸€ä¸‹ç¬¬ä¸€æ¬¡åŸºäºhexoæ­å»ºçš„åšå®¢å§ï¼</p>]]></content>
      
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>å…³äº</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/card_author.css"/>
      <url>/css/card_author.css</url>
      
        <content type="html"><![CDATA[/************************************************* ä¸ªäººèµ„æ–™å¡ç‰‡ *************************************************/#aside-content>.card-widget:first-child {  background: #fff url(https://image.anzhiy.cn/adminuploads/1/2022/10/26/6358a07bf21fc.webp) top -1% center no-repeat !important;  background-size: 100% 64% !important;  position: relative;}[data-theme=dark] #aside-content>.card-widget:first-child {  background: #121212 !important}#aside-content>.card-widget.card-info>#card-info-btn {  border-radius: 10px;}.card-widget .author-info-top {  margin: 15px auto 0;  display: flex;  justify-content: center;}.card-widget .card-info-avatar {  display: inline-block;  position: relative;}.card-info-avatar .avatar-img {  width: 100px;  height: 100px;  display: block;}.avatar-img img {  border: 4px solid #f7f9fe;  border-radius: 50%;}.card-info-avatar .author-status-box {  position: absolute;  bottom: 0;  left: calc(100% - 28px);  width: 28px;  height: 28px;  border: 1px solid #d0d7de;  border-radius: 2em;  background-color: #fff;  transition: .3s;  overflow: hidden;}.card-info-avatar .author-status-box .author-status {  display: flex;  align-items: center;  justify-content: center;  height: 28px;  padding: 0 5px;}.card-info-avatar .author-status-box:hover {  width: 105px}.card-info-avatar .author-status-box:hover .author-status span {  width: 105px;  margin-left: 4px;}.card-info-avatar .author-status-box .author-status span {  width: 0;  font-size: 12px;  height: 100%;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  transition: .3s;}div#author-info__sayhi {  text-align: left;  background: rgba(255, 255, 255, 0.2);  color: var(--font-color);  border: 1px solid #e3e8f7;  font-size: 12px;  margin-right: auto;  padding: 5px 8px;  border-radius: 12px;  width: fit-content;  display: inline;  margin-left: -1px;}.card-widget .author-info__name {  line-height: 1.5em;  margin: 10px 0 4px;}#aside-content .card-info .author-info__description {  margin-top: -.42em;}.card-widget.card-info .banner-button-group {  margin: 15px 0 0;  display: flex;}#aside-content .card-info .banner-button {  height: 40px;  width: 100%;  margin-right: unset !important;  border-radius: 20px;  justify-content: center;}.card-widget.card-info .banner-button-group .banner-button {  padding: 20px 12px;  background: #3b70fc;  border-radius: 12px;  color: #fff;  display: flex;  align-items: center;  z-index: 1;  transition: all .3s ease 0s;  cursor: pointer;}#aside-content>div.animate__fadeIn.card-info.card-widget.wow>h1 {  font-weight: bold;  font-size: 1.57em;}#aside-content>div.animate__fadeIn.card-info.card-widget.wow>div.banner-button-group>a>span {  color: #fff;  font-weight: unset;}.card-widget.card-info .banner-button-group .banner-button .fa-solid.fa-circle-chevron-right {  font-size: 1.3rem;  margin-right: 10px;}.card-widget.card-info .banner-button-group .banner-button:hover {  background: #1856fb;  color: #fff;}@media screen and (max-width: 900px) {  #aside-content>.card-widget:first-child {    margin-top: 20px;  }}/************************************************* ä¸ªäººèµ„æ–™å¡ç‰‡ *************************************************/]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/archives/index.html"/>
      <url>/archives/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†ç±»</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/color.css"/>
      <url>/css/color.css</url>
      
        <content type="html"><![CDATA[/* é¢œè‰² */:root {    --xiaoyutou-theme-op: #4259ef23;    --xiaoyutou-white: #fff;    --xiaoyutou-black: #000;    --xiaoyutou-none: rgba(0, 0, 0, 0);    --xiaoyutou-gray: #999999;    --xiaoyutou-yellow: #ffc93e;    --xiaoyutou-border-radius: 8px;    --xiaoyutou-main: var(--xiaoyutou-theme);    --xiaoyutou-main-op: var(--xiaoyutou-theme-op);    --xiaoyutou-shadow-theme: 0 8px 12px -3px var(--xiaoyutou-theme-op);    --xiaoyutou-shadow-main: 0 8px 12px -3px var(--xiaoyutou-main-op);    --xiaoyutou-shadow-blue: 0 8px 12px -3px rgba(40, 109, 234, 0.2);    --xiaoyutou-shadow-white: 0 8px 12px -3px rgba(255, 255, 255, 0.2);    --xiaoyutou-shadow-black: 0 0 12px 4px rgba(0, 0, 0, 0.05);    --xiaoyutou-shadow-yellow: 0px 38px 77px -26px rgba(255, 201, 62, 0.12);    --xiaoyutou-shadow-red: 0 8px 12px -3px #ee7d7936;    --xiaoyutou-shadow-green: 0 8px 12px -3px #87ee7936;    --xiaoyutou-shadow-border: 0 8px 16px -4px #2c2d300c;    --xiaoyutou-logo-color: linear-gradient(215deg, #4584ff 30%, #ff7676 70%);    --style-border: 1px solid var(--xiaoyutou-card-border);    --xiaoyutou-blue-main: #3b70fc;    --style-border-hover: 1px solid var(--xiaoyutou-main);    --style-border-dashed: 1px dashed var(--xiaoyutou-theme-op);    --style-border-avatar: 4px solid var(--xiaoyutou-background);    --style-border-always: 1px solid var(--xiaoyutou-card-border);    --xiaoyutou-white-acrylic1: #fefeff !important;    --xiaoyutou-white-acrylic2: #fcfdff !important;    --xiaoyutou-black-acrylic2: #08080a !important;    --xiaoyutou-black-acrylic1: #0b0b0e !important;  }    [data-theme="light"] {    --xiaoyutou-theme: #3b70fc;    --xiaoyutou-theme-op: #4259ef23;    --xiaoyutou-blue: #3b70fc;    --xiaoyutou-red: #d8213c;    --xiaoyutou-pink: #ff7c7c;    --xiaoyutou-green: #57bd6a;    --xiaoyutou-fontcolor: #363636;    --xiaoyutou-background: #f7f9fe;    --xiaoyutou-reverse: #000;    --xiaoyutou-maskbg: rgba(255, 255, 255, 0.6);    --xiaoyutou-maskbgdeep: rgba(255, 255, 255, 0.85);    --xiaoyutou-hovertext: var(--xiaoyutou-theme);    --xiaoyutou-ahoverbg: #f7f7fa;    --xiaoyutou-lighttext: var(--xiaoyutou-main);    --xiaoyutou-secondtext: rgba(60, 60, 67, 0.6);    --xiaoyutou-scrollbar: rgba(60, 60, 67, 0.4);    --xiaoyutou-card-btn-bg: #edf0f7;    --xiaoyutou-post-blockquote-bg: #fafcff;    --xiaoyutou-post-tabs-bg: #f2f5f8;    --xiaoyutou-secondbg: #edf0f7;    --xiaoyutou-shadow-nav: 0 5px 12px -5px rgba(102, 68, 68, 0.05);    --xiaoyutou-card-bg: #fff;    --xiaoyutou-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);    --xiaoyutou-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);    --xiaoyutou-card-border: #c0c6d8;  }    [data-theme="dark"] {    --xiaoyutou-theme: #3eb8be;    --xiaoyutou-theme-op: #0084ff23;    --xiaoyutou-blue: #0084ff;    --xiaoyutou-red: #ff3842;    --xiaoyutou-pink: #ff7c7c;    --xiaoyutou-green: #57bd6a;    --xiaoyutou-fontcolor: #f7f7fa;    --xiaoyutou-background: #18171d;    --xiaoyutou-reverse: #fff;    --xiaoyutou-maskbg: rgba(0, 0, 0, 0.6);    --xiaoyutou-maskbgdeep: rgba(0, 0, 0, 0.85);    --xiaoyutou-hovertext: #0a84ff;    --xiaoyutou-ahoverbg: #fff;    --xiaoyutou-lighttext: #f2b94b;    --xiaoyutou-secondtext: #a1a2b8;    --xiaoyutou-scrollbar: rgba(200, 200, 223, 0.4);    --xiaoyutou-card-btn-bg: #30343f;    --xiaoyutou-post-blockquote-bg: #000;    --xiaoyutou-post-tabs-bg: #121212;    --xiaoyutou-secondbg: #30343f;    --xiaoyutou-shadow-nav: 0 5px 20px 0px rgba(28, 28, 28, 0.4);    --xiaoyutou-card-bg: #1d1b26;    --xiaoyutou-shadow-lightblack: 0 5px 12px -5px rgba(102, 68, 68, 0);    --xiaoyutou-shadow-light2black: 0 5px 12px -5px rgba(102, 68, 68, 0);    --xiaoyutou-card-border: #42444a;  }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/css.css"/>
      <url>/css/css.css</url>
      
        <content type="html"><![CDATA[/* _config.butterfly.ymlä¸­çš„injectä¸­å¼•ç”¨ *//*    1.æ­¤éƒ¨åˆ†ä¿®æ”¹çš„æ˜¯é¡µé¢çš„é¡µå¤´å’Œé¡µè„šæ˜¾ç¤ºé€æ˜ï¼Œæ›´ç¾è§‚*//* é¡µè„šä¸å¤´å›¾é€æ˜ */#footer {    background: transparent !important;}#page-header {  background: transparent !important;}/* ç™½å¤©æ¨¡å¼é®ç½©é€æ˜ */#footer::before {background: transparent !important;}#page-header::before {background: transparent !important;}/* å¤œé—´æ¨¡å¼é®ç½©é€æ˜ */[data-theme="dark"] #footer::before {background: transparent !important;}[data-theme="dark"] #page-header::before {background: transparent !important;}/*    2.æ­¤éƒ¨åˆ†ä»£ç æ˜¯å¯¹é¦–å…ˆåˆ†ç±»ç£è´´1.0åœ¨å¤œé—´æ¨¡å¼ä¸‹çš„å¤–è§‚çš„ä¿®æ”¹*//* å°å†°åˆ†ç±»åˆ†ç±»ç£é“é»‘å¤œæ¨¡å¼é€‚é… *//* ä¸€èˆ¬çŠ¶æ€ */[data-theme="dark"] .magnet_link_context {    background: #1e1e1e;    color: antiquewhite;}/* é¼ æ ‡æ‚¬æµ®çŠ¶æ€ */[data-theme="dark"] .magnet_link_context:hover {    background: #3ecdf1;    color: #f2f2f2;}/*    3.è®¾ç½®å­—ä½“*/@font-face {    font-family: "ä»“è€³æ¸”é˜³ä½“ W05";font-weight: 400;src: url("//at.alicdn.com/wf/webfont/SE6Q2VLzYKil/roZwi8MDONv1PXqk_XQPA.woff2") format("woff2"),    url("//at.alicdn.com/wf/webfont/SE6Q2VLzYKil/gLjn4lJ4jMiKoKfSC3atz.woff") format("woff");    font-display: swap;}/*    4.å¯¼èˆªæ çš„é­”æ”¹*//* ä¸€çº§èœå•å±…ä¸­ */#nav .menus_items {    position: absolute !important;    width: fit-content !important;    left: 50% !important;    transform: translateX(-50%) !important;  }  /* å­èœå•æ¨ªå‘å±•ç¤º */  #nav .menus_items .menus_item:hover .menus_item_child {    display: flex !important;  }  /* è°ƒæ•´å­èœå•æ çš„èœå•çš„å±…ä¸­ï¼Œè¿™é‡Œçš„2æ˜¯ä»£è¡¨å¯¼èˆªæ çš„ç¬¬2ä¸ªå…ƒç´ ï¼Œå³æœ‰å­èœå•çš„å…ƒç´ ï¼Œå¯ä»¥æŒ‰è‡ªå·±éœ€æ±‚ä¿®æ”¹ */  .menus_items .menus_item:nth-child(2) .menus_item_child {    left: -80px;  }/*  5.æ­¤éƒ¨åˆ†ä»£ç ä½œç”¨ä¸ºå¤œé—´æ¨¡å¼èœå•æ çš„å°å­—çš„å‘å…‰æ•ˆæœã€    é¢œè‰²å¯ä»¥è‡ªå·±æŒ‡å®šï¼Œåœ¨ä¸‹é¢rgbå¤„ä¿®æ”¹å³å¯*/[data-theme="dark"] #nav .site-page,[data-theme="dark"] #nav .menus_items .menus_item .menus_item_child li a {  text-shadow: 0 0 2px rgb(179, 71, 241) !important;}/* æ‰‹æœºç«¯é€‚é… */[data-theme="dark"] #sidebar #sidebar-menus .menus_items .site-page {  text-shadow: 0 0 2px rgb(179, 71, 241) !important;}/*  6.æ­¤éƒ¨åˆ†ä»£ç ä¸ºæ˜Ÿç©ºçš„cssä»£ç *//* èƒŒæ™¯å®‡å®™æ˜Ÿå…‰  */#universe{  display: block;  position: fixed;  margin: 0;  padding: 0;  border: 0;  outline: 0;  left: 0;  top: 0;  width: 100%;  height: 100%;  pointer-events: none;  /* è¿™ä¸ªæ˜¯è°ƒç½®é¡¶çš„ä¼˜å…ˆçº§çš„ï¼Œ-1åœ¨æ–‡ç« é¡µä¸‹é¢ï¼ŒèƒŒæ™¯ä¸Šé¢ï¼Œä¸ªäººæ¨èè¿™ç§ */  z-index: -1;}/*   7.ä¾§è¾¹æ ä¸ªäººä¿¡æ¯å¡ç‰‡åŠ¨æ€æ¸å˜è‰²*/#aside-content > .card-widget.card-info {  background: linear-gradient(    -45deg,    #e8d8b9,    #eccec5,    #a3e9eb,    #bdbdf0,    #eec1ea  );  box-shadow: 0 0 5px rgb(66, 68, 68);  position: relative;  background-size: 400% 400%;  -webkit-animation: Gradient 10s ease infinite;  -moz-animation: Gradient 10s ease infinite;  animation: Gradient 10s ease infinite !important;}@-webkit-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@-moz-keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}@keyframes Gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}/* é»‘å¤œæ¨¡å¼é€‚é… */[data-theme="dark"] #aside-content > .card-widget.card-info {  background: #191919ee;}/* ä¸ªäººä¿¡æ¯Follow meæŒ‰é’® */#aside-content > .card-widget.card-info > #card-info-btn {  background-color: #3eb8be;  border-radius: 8px;}/*\   8.åšå®¢å®½å±é€‚é…*//* å…¨å±€å®½åº¦ */.layout {  max-width: 1400px !important;}/* ä¾§è¾¹å¡ç‰‡æ å®½åº¦ */.aside-content {  max-width: 318px;  min-width: 300px;}/* å¹³æ¿å°ºå¯¸è‡ªé€‚åº”(ä¸å¯ç”¨ä¾§è¾¹æ å®½åº¦é™åˆ¶) */@media screen and (max-width: 900px) {  .aside-content {    max-width: none !important;    padding: 0 5px 0 5px;  }}/*   9.ä¸ªäººä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾ *//* [data-theme="light"] #aside-content > .card-widget.card-info {  background-image: url(https://picbed.dai2yutou.space/web_img/6.png);  background-repeat: no-repeat;  background-attachment: inherit;  background-size: 100%;}[data-theme="dark"] #aside-content > .card-widget.card-info {  background-image: url(https://picbed.dai2yutou.space/web_img/6.png);  background-repeat: no-repeat;  background-attachment: inherit;  background-size: 100%;} *//*   10.é¡µé¢æ ·å¼è°ƒèŠ‚ */:root {  --trans-light: rgba(255, 255, 255, 1);  --trans-dark: rgba(25, 25, 25, 1);  --border-style: 1px solid black;  /* --backdrop-filter: blur(5px) saturate(150%); */}/* é¦–é¡µæ–‡ç« å¡ç‰‡ */#recent-posts > .recent-post-item {  background: var(--trans-light);  /* backdrop-filter: var(--backdrop-filter); */  border-radius: 25px;  border: var(--border-style);}/* é¦–é¡µä¾§æ å¡ç‰‡ */#aside-content .card-widget {  background: var(--trans-light);  /* backdrop-filter: var(--backdrop-filter); */  border-radius: 18px;  border: var(--border-style);}/* æ–‡ç« é¡µã€å½’æ¡£é¡µã€æ™®é€šé¡µé¢ */div#post,div#page,div#archive {  background: var(--trans-light);  /* backdrop-filter: var(--backdrop-filter); */  border: var(--border-style);  border-radius: 20px;}/* å¯¼èˆªæ  */#page-header.nav-fixed #nav {  background: rgba(255, 255, 255, 0.75);  /* backdrop-filter: var(--backdrop-filter); */}[data-theme="dark"] #page-header.nav-fixed #nav {  background: rgba(0, 0, 0, 0.7) !important;}/* å¤œé—´æ¨¡å¼é®ç½© */[data-theme="dark"] #recent-posts > .recent-post-item,[data-theme="dark"] #aside-content .card-widget,[data-theme="dark"] div#post,[data-theme="dark"] div#archive,[data-theme="dark"] div#page {  background: var(--trans-dark);}/* å¤œé—´æ¨¡å¼é¡µè„šé¡µå¤´é®ç½©é€æ˜ */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* é˜…è¯»æ¨¡å¼ */.read-mode #aside-content .card-widget {  background: rgba(158, 204, 171, 0.5) !important;}.read-mode div#post {  background: rgba(158, 204, 171, 0.5) !important;}/* å¤œé—´æ¨¡å¼ä¸‹çš„é˜…è¯»æ¨¡å¼ */[data-theme="dark"] .read-mode #aside-content .card-widget {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}[data-theme="dark"] .read-mode div#post {  background: rgba(25, 25, 25, 0.9) !important;  color: #ffffff;}/* æ›´æ”¹é¦–é¡µè½®æ’­å›¾æ ·å¼ */@media screen and (min-width:600px) {  .blog-slider {      height: 250px !important;  }  .blog-slider__img {      height: 240px !important;      width: 240px !important;  }}/*  å®šä¹‰åŠ è½½åŠ¨ç”»å¤´åƒ*/.loading-img {  background: url(https://www.dai2yutou.space/img/avatar.jpg) no-repeat center center;  background-size: cover;}/* ä¾§è¾¹æ å¡ç‰‡å…¬å‘Šæ æ¬¢è¿ä¿¡æ¯ */#welcome-info {  background-color: #3eb8be;  border-radius: 18px;  padding: 8px;}[data-theme="dark"] #welcome-info {  background: #212121;}/* æ ‡ç­¾é¡µé¢ */#aside-content .card-tag-cloud a {  border: 1px solid;  line-height: 1.5;  border-radius: 6px;  margin: 3px;  padding: 0 5px;}.tag-cloud-list a {  border: 1px solid;  line-height: 1.5;  border-radius: 6px;  padding: 5px 15px;  font-size: 1.2rem;  margin: 5px;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/font-awesome.css"/>
      <url>/css/font-awesome.css</url>
      
        <content type="html"><![CDATA[/*! *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License) *//* FONT PATH * -------------------------- */@font-face {  font-family: 'FontAwesome';  src: url('../fonts/fontawesome-webfont.eot?v=4.7.0');  src: url('../fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('../fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('../fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('../fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('../fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');  font-weight: normal;  font-style: normal;}.fa {  display: inline-block;  font: normal normal normal 14px/1 FontAwesome;  font-size: inherit;  text-rendering: auto;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}/* makes the font 33% larger relative to the icon container */.fa-lg {  font-size: 1.33333333em;  line-height: 0.75em;  vertical-align: -15%;}.fa-2x {  font-size: 2em;}.fa-3x {  font-size: 3em;}.fa-4x {  font-size: 4em;}.fa-5x {  font-size: 5em;}.fa-fw {  width: 1.28571429em;  text-align: center;}.fa-ul {  padding-left: 0;  margin-left: 2.14285714em;  list-style-type: none;}.fa-ul > li {  position: relative;}.fa-li {  position: absolute;  left: -2.14285714em;  width: 2.14285714em;  top: 0.14285714em;  text-align: center;}.fa-li.fa-lg {  left: -1.85714286em;}.fa-border {  padding: .2em .25em .15em;  border: solid 0.08em #eeeeee;  border-radius: .1em;}.fa-pull-left {  float: left;}.fa-pull-right {  float: right;}.fa.fa-pull-left {  margin-right: .3em;}.fa.fa-pull-right {  margin-left: .3em;}/* Deprecated as of 4.4.0 */.pull-right {  float: right;}.pull-left {  float: left;}.fa.pull-left {  margin-right: .3em;}.fa.pull-right {  margin-left: .3em;}.fa-spin {  -webkit-animation: fa-spin 2s infinite linear;  animation: fa-spin 2s infinite linear;}.fa-pulse {  -webkit-animation: fa-spin 1s infinite steps(8);  animation: fa-spin 1s infinite steps(8);}@-webkit-keyframes fa-spin {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  100% {    -webkit-transform: rotate(359deg);    transform: rotate(359deg);  }}@keyframes fa-spin {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  100% {    -webkit-transform: rotate(359deg);    transform: rotate(359deg);  }}.fa-rotate-90 {  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";  -webkit-transform: rotate(90deg);  -ms-transform: rotate(90deg);  transform: rotate(90deg);}.fa-rotate-180 {  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";  -webkit-transform: rotate(180deg);  -ms-transform: rotate(180deg);  transform: rotate(180deg);}.fa-rotate-270 {  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";  -webkit-transform: rotate(270deg);  -ms-transform: rotate(270deg);  transform: rotate(270deg);}.fa-flip-horizontal {  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";  -webkit-transform: scale(-1, 1);  -ms-transform: scale(-1, 1);  transform: scale(-1, 1);}.fa-flip-vertical {  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";  -webkit-transform: scale(1, -1);  -ms-transform: scale(1, -1);  transform: scale(1, -1);}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical {  filter: none;}.fa-stack {  position: relative;  display: inline-block;  width: 2em;  height: 2em;  line-height: 2em;  vertical-align: middle;}.fa-stack-1x,.fa-stack-2x {  position: absolute;  left: 0;  width: 100%;  text-align: center;}.fa-stack-1x {  line-height: inherit;}.fa-stack-2x {  font-size: 2em;}.fa-inverse {  color: #ffffff;}/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen   readers do not read off random characters that represent icons */.fa-glass:before {  content: "\f000";}.fa-music:before {  content: "\f001";}.fa-search:before {  content: "\f002";}.fa-envelope-o:before {  content: "\f003";}.fa-heart:before {  content: "\f004";}.fa-star:before {  content: "\f005";}.fa-star-o:before {  content: "\f006";}.fa-user:before {  content: "\f007";}.fa-film:before {  content: "\f008";}.fa-th-large:before {  content: "\f009";}.fa-th:before {  content: "\f00a";}.fa-th-list:before {  content: "\f00b";}.fa-check:before {  content: "\f00c";}.fa-remove:before,.fa-close:before,.fa-times:before {  content: "\f00d";}.fa-search-plus:before {  content: "\f00e";}.fa-search-minus:before {  content: "\f010";}.fa-power-off:before {  content: "\f011";}.fa-signal:before {  content: "\f012";}.fa-gear:before,.fa-cog:before {  content: "\f013";}.fa-trash-o:before {  content: "\f014";}.fa-home:before {  content: "\f015";}.fa-file-o:before {  content: "\f016";}.fa-clock-o:before {  content: "\f017";}.fa-road:before {  content: "\f018";}.fa-download:before {  content: "\f019";}.fa-arrow-circle-o-down:before {  content: "\f01a";}.fa-arrow-circle-o-up:before {  content: "\f01b";}.fa-inbox:before {  content: "\f01c";}.fa-play-circle-o:before {  content: "\f01d";}.fa-rotate-right:before,.fa-repeat:before {  content: "\f01e";}.fa-refresh:before {  content: "\f021";}.fa-list-alt:before {  content: "\f022";}.fa-lock:before {  content: "\f023";}.fa-flag:before {  content: "\f024";}.fa-headphones:before {  content: "\f025";}.fa-volume-off:before {  content: "\f026";}.fa-volume-down:before {  content: "\f027";}.fa-volume-up:before {  content: "\f028";}.fa-qrcode:before {  content: "\f029";}.fa-barcode:before {  content: "\f02a";}.fa-tag:before {  content: "\f02b";}.fa-tags:before {  content: "\f02c";}.fa-book:before {  content: "\f02d";}.fa-bookmark:before {  content: "\f02e";}.fa-print:before {  content: "\f02f";}.fa-camera:before {  content: "\f030";}.fa-font:before {  content: "\f031";}.fa-bold:before {  content: "\f032";}.fa-italic:before {  content: "\f033";}.fa-text-height:before {  content: "\f034";}.fa-text-width:before {  content: "\f035";}.fa-align-left:before {  content: "\f036";}.fa-align-center:before {  content: "\f037";}.fa-align-right:before {  content: "\f038";}.fa-align-justify:before {  content: "\f039";}.fa-list:before {  content: "\f03a";}.fa-dedent:before,.fa-outdent:before {  content: "\f03b";}.fa-indent:before {  content: "\f03c";}.fa-video-camera:before {  content: "\f03d";}.fa-photo:before,.fa-image:before,.fa-picture-o:before {  content: "\f03e";}.fa-pencil:before {  content: "\f040";}.fa-map-marker:before {  content: "\f041";}.fa-adjust:before {  content: "\f042";}.fa-tint:before {  content: "\f043";}.fa-edit:before,.fa-pencil-square-o:before {  content: "\f044";}.fa-share-square-o:before {  content: "\f045";}.fa-check-square-o:before {  content: "\f046";}.fa-arrows:before {  content: "\f047";}.fa-step-backward:before {  content: "\f048";}.fa-fast-backward:before {  content: "\f049";}.fa-backward:before {  content: "\f04a";}.fa-play:before {  content: "\f04b";}.fa-pause:before {  content: "\f04c";}.fa-stop:before {  content: "\f04d";}.fa-forward:before {  content: "\f04e";}.fa-fast-forward:before {  content: "\f050";}.fa-step-forward:before {  content: "\f051";}.fa-eject:before {  content: "\f052";}.fa-chevron-left:before {  content: "\f053";}.fa-chevron-right:before {  content: "\f054";}.fa-plus-circle:before {  content: "\f055";}.fa-minus-circle:before {  content: "\f056";}.fa-times-circle:before {  content: "\f057";}.fa-check-circle:before {  content: "\f058";}.fa-question-circle:before {  content: "\f059";}.fa-info-circle:before {  content: "\f05a";}.fa-crosshairs:before {  content: "\f05b";}.fa-times-circle-o:before {  content: "\f05c";}.fa-check-circle-o:before {  content: "\f05d";}.fa-ban:before {  content: "\f05e";}.fa-arrow-left:before {  content: "\f060";}.fa-arrow-right:before {  content: "\f061";}.fa-arrow-up:before {  content: "\f062";}.fa-arrow-down:before {  content: "\f063";}.fa-mail-forward:before,.fa-share:before {  content: "\f064";}.fa-expand:before {  content: "\f065";}.fa-compress:before {  content: "\f066";}.fa-plus:before {  content: "\f067";}.fa-minus:before {  content: "\f068";}.fa-asterisk:before {  content: "\f069";}.fa-exclamation-circle:before {  content: "\f06a";}.fa-gift:before {  content: "\f06b";}.fa-leaf:before {  content: "\f06c";}.fa-fire:before {  content: "\f06d";}.fa-eye:before {  content: "\f06e";}.fa-eye-slash:before {  content: "\f070";}.fa-warning:before,.fa-exclamation-triangle:before {  content: "\f071";}.fa-plane:before {  content: "\f072";}.fa-calendar:before {  content: "\f073";}.fa-random:before {  content: "\f074";}.fa-comment:before {  content: "\f075";}.fa-magnet:before {  content: "\f076";}.fa-chevron-up:before {  content: "\f077";}.fa-chevron-down:before {  content: "\f078";}.fa-retweet:before {  content: "\f079";}.fa-shopping-cart:before {  content: "\f07a";}.fa-folder:before {  content: "\f07b";}.fa-folder-open:before {  content: "\f07c";}.fa-arrows-v:before {  content: "\f07d";}.fa-arrows-h:before {  content: "\f07e";}.fa-bar-chart-o:before,.fa-bar-chart:before {  content: "\f080";}.fa-twitter-square:before {  content: "\f081";}.fa-facebook-square:before {  content: "\f082";}.fa-camera-retro:before {  content: "\f083";}.fa-key:before {  content: "\f084";}.fa-gears:before,.fa-cogs:before {  content: "\f085";}.fa-comments:before {  content: "\f086";}.fa-thumbs-o-up:before {  content: "\f087";}.fa-thumbs-o-down:before {  content: "\f088";}.fa-star-half:before {  content: "\f089";}.fa-heart-o:before {  content: "\f08a";}.fa-sign-out:before {  content: "\f08b";}.fa-linkedin-square:before {  content: "\f08c";}.fa-thumb-tack:before {  content: "\f08d";}.fa-external-link:before {  content: "\f08e";}.fa-sign-in:before {  content: "\f090";}.fa-trophy:before {  content: "\f091";}.fa-github-square:before {  content: "\f092";}.fa-upload:before {  content: "\f093";}.fa-lemon-o:before {  content: "\f094";}.fa-phone:before {  content: "\f095";}.fa-square-o:before {  content: "\f096";}.fa-bookmark-o:before {  content: "\f097";}.fa-phone-square:before {  content: "\f098";}.fa-twitter:before {  content: "\f099";}.fa-facebook-f:before,.fa-facebook:before {  content: "\f09a";}.fa-github:before {  content: "\f09b";}.fa-unlock:before {  content: "\f09c";}.fa-credit-card:before {  content: "\f09d";}.fa-feed:before,.fa-rss:before {  content: "\f09e";}.fa-hdd-o:before {  content: "\f0a0";}.fa-bullhorn:before {  content: "\f0a1";}.fa-bell:before {  content: "\f0f3";}.fa-certificate:before {  content: "\f0a3";}.fa-hand-o-right:before {  content: "\f0a4";}.fa-hand-o-left:before {  content: "\f0a5";}.fa-hand-o-up:before {  content: "\f0a6";}.fa-hand-o-down:before {  content: "\f0a7";}.fa-arrow-circle-left:before {  content: "\f0a8";}.fa-arrow-circle-right:before {  content: "\f0a9";}.fa-arrow-circle-up:before {  content: "\f0aa";}.fa-arrow-circle-down:before {  content: "\f0ab";}.fa-globe:before {  content: "\f0ac";}.fa-wrench:before {  content: "\f0ad";}.fa-tasks:before {  content: "\f0ae";}.fa-filter:before {  content: "\f0b0";}.fa-briefcase:before {  content: "\f0b1";}.fa-arrows-alt:before {  content: "\f0b2";}.fa-group:before,.fa-users:before {  content: "\f0c0";}.fa-chain:before,.fa-link:before {  content: "\f0c1";}.fa-cloud:before {  content: "\f0c2";}.fa-flask:before {  content: "\f0c3";}.fa-cut:before,.fa-scissors:before {  content: "\f0c4";}.fa-copy:before,.fa-files-o:before {  content: "\f0c5";}.fa-paperclip:before {  content: "\f0c6";}.fa-save:before,.fa-floppy-o:before {  content: "\f0c7";}.fa-square:before {  content: "\f0c8";}.fa-navicon:before,.fa-reorder:before,.fa-bars:before {  content: "\f0c9";}.fa-list-ul:before {  content: "\f0ca";}.fa-list-ol:before {  content: "\f0cb";}.fa-strikethrough:before {  content: "\f0cc";}.fa-underline:before {  content: "\f0cd";}.fa-table:before {  content: "\f0ce";}.fa-magic:before {  content: "\f0d0";}.fa-truck:before {  content: "\f0d1";}.fa-pinterest:before {  content: "\f0d2";}.fa-pinterest-square:before {  content: "\f0d3";}.fa-google-plus-square:before {  content: "\f0d4";}.fa-google-plus:before {  content: "\f0d5";}.fa-money:before {  content: "\f0d6";}.fa-caret-down:before {  content: "\f0d7";}.fa-caret-up:before {  content: "\f0d8";}.fa-caret-left:before {  content: "\f0d9";}.fa-caret-right:before {  content: "\f0da";}.fa-columns:before {  content: "\f0db";}.fa-unsorted:before,.fa-sort:before {  content: "\f0dc";}.fa-sort-down:before,.fa-sort-desc:before {  content: "\f0dd";}.fa-sort-up:before,.fa-sort-asc:before {  content: "\f0de";}.fa-envelope:before {  content: "\f0e0";}.fa-linkedin:before {  content: "\f0e1";}.fa-rotate-left:before,.fa-undo:before {  content: "\f0e2";}.fa-legal:before,.fa-gavel:before {  content: "\f0e3";}.fa-dashboard:before,.fa-tachometer:before {  content: "\f0e4";}.fa-comment-o:before {  content: "\f0e5";}.fa-comments-o:before {  content: "\f0e6";}.fa-flash:before,.fa-bolt:before {  content: "\f0e7";}.fa-sitemap:before {  content: "\f0e8";}.fa-umbrella:before {  content: "\f0e9";}.fa-paste:before,.fa-clipboard:before {  content: "\f0ea";}.fa-lightbulb-o:before {  content: "\f0eb";}.fa-exchange:before {  content: "\f0ec";}.fa-cloud-download:before {  content: "\f0ed";}.fa-cloud-upload:before {  content: "\f0ee";}.fa-user-md:before {  content: "\f0f0";}.fa-stethoscope:before {  content: "\f0f1";}.fa-suitcase:before {  content: "\f0f2";}.fa-bell-o:before {  content: "\f0a2";}.fa-coffee:before {  content: "\f0f4";}.fa-cutlery:before {  content: "\f0f5";}.fa-file-text-o:before {  content: "\f0f6";}.fa-building-o:before {  content: "\f0f7";}.fa-hospital-o:before {  content: "\f0f8";}.fa-ambulance:before {  content: "\f0f9";}.fa-medkit:before {  content: "\f0fa";}.fa-fighter-jet:before {  content: "\f0fb";}.fa-beer:before {  content: "\f0fc";}.fa-h-square:before {  content: "\f0fd";}.fa-plus-square:before {  content: "\f0fe";}.fa-angle-double-left:before {  content: "\f100";}.fa-angle-double-right:before {  content: "\f101";}.fa-angle-double-up:before {  content: "\f102";}.fa-angle-double-down:before {  content: "\f103";}.fa-angle-left:before {  content: "\f104";}.fa-angle-right:before {  content: "\f105";}.fa-angle-up:before {  content: "\f106";}.fa-angle-down:before {  content: "\f107";}.fa-desktop:before {  content: "\f108";}.fa-laptop:before {  content: "\f109";}.fa-tablet:before {  content: "\f10a";}.fa-mobile-phone:before,.fa-mobile:before {  content: "\f10b";}.fa-circle-o:before {  content: "\f10c";}.fa-quote-left:before {  content: "\f10d";}.fa-quote-right:before {  content: "\f10e";}.fa-spinner:before {  content: "\f110";}.fa-circle:before {  content: "\f111";}.fa-mail-reply:before,.fa-reply:before {  content: "\f112";}.fa-github-alt:before {  content: "\f113";}.fa-folder-o:before {  content: "\f114";}.fa-folder-open-o:before {  content: "\f115";}.fa-smile-o:before {  content: "\f118";}.fa-frown-o:before {  content: "\f119";}.fa-meh-o:before {  content: "\f11a";}.fa-gamepad:before {  content: "\f11b";}.fa-keyboard-o:before {  content: "\f11c";}.fa-flag-o:before {  content: "\f11d";}.fa-flag-checkered:before {  content: "\f11e";}.fa-terminal:before {  content: "\f120";}.fa-code:before {  content: "\f121";}.fa-mail-reply-all:before,.fa-reply-all:before {  content: "\f122";}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before {  content: "\f123";}.fa-location-arrow:before {  content: "\f124";}.fa-crop:before {  content: "\f125";}.fa-code-fork:before {  content: "\f126";}.fa-unlink:before,.fa-chain-broken:before {  content: "\f127";}.fa-question:before {  content: "\f128";}.fa-info:before {  content: "\f129";}.fa-exclamation:before {  content: "\f12a";}.fa-superscript:before {  content: "\f12b";}.fa-subscript:before {  content: "\f12c";}.fa-eraser:before {  content: "\f12d";}.fa-puzzle-piece:before {  content: "\f12e";}.fa-microphone:before {  content: "\f130";}.fa-microphone-slash:before {  content: "\f131";}.fa-shield:before {  content: "\f132";}.fa-calendar-o:before {  content: "\f133";}.fa-fire-extinguisher:before {  content: "\f134";}.fa-rocket:before {  content: "\f135";}.fa-maxcdn:before {  content: "\f136";}.fa-chevron-circle-left:before {  content: "\f137";}.fa-chevron-circle-right:before {  content: "\f138";}.fa-chevron-circle-up:before {  content: "\f139";}.fa-chevron-circle-down:before {  content: "\f13a";}.fa-html5:before {  content: "\f13b";}.fa-css3:before {  content: "\f13c";}.fa-anchor:before {  content: "\f13d";}.fa-unlock-alt:before {  content: "\f13e";}.fa-bullseye:before {  content: "\f140";}.fa-ellipsis-h:before {  content: "\f141";}.fa-ellipsis-v:before {  content: "\f142";}.fa-rss-square:before {  content: "\f143";}.fa-play-circle:before {  content: "\f144";}.fa-ticket:before {  content: "\f145";}.fa-minus-square:before {  content: "\f146";}.fa-minus-square-o:before {  content: "\f147";}.fa-level-up:before {  content: "\f148";}.fa-level-down:before {  content: "\f149";}.fa-check-square:before {  content: "\f14a";}.fa-pencil-square:before {  content: "\f14b";}.fa-external-link-square:before {  content: "\f14c";}.fa-share-square:before {  content: "\f14d";}.fa-compass:before {  content: "\f14e";}.fa-toggle-down:before,.fa-caret-square-o-down:before {  content: "\f150";}.fa-toggle-up:before,.fa-caret-square-o-up:before {  content: "\f151";}.fa-toggle-right:before,.fa-caret-square-o-right:before {  content: "\f152";}.fa-euro:before,.fa-eur:before {  content: "\f153";}.fa-gbp:before {  content: "\f154";}.fa-dollar:before,.fa-usd:before {  content: "\f155";}.fa-rupee:before,.fa-inr:before {  content: "\f156";}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before {  content: "\f157";}.fa-ruble:before,.fa-rouble:before,.fa-rub:before {  content: "\f158";}.fa-won:before,.fa-krw:before {  content: "\f159";}.fa-bitcoin:before,.fa-btc:before {  content: "\f15a";}.fa-file:before {  content: "\f15b";}.fa-file-text:before {  content: "\f15c";}.fa-sort-alpha-asc:before {  content: "\f15d";}.fa-sort-alpha-desc:before {  content: "\f15e";}.fa-sort-amount-asc:before {  content: "\f160";}.fa-sort-amount-desc:before {  content: "\f161";}.fa-sort-numeric-asc:before {  content: "\f162";}.fa-sort-numeric-desc:before {  content: "\f163";}.fa-thumbs-up:before {  content: "\f164";}.fa-thumbs-down:before {  content: "\f165";}.fa-youtube-square:before {  content: "\f166";}.fa-youtube:before {  content: "\f167";}.fa-xing:before {  content: "\f168";}.fa-xing-square:before {  content: "\f169";}.fa-youtube-play:before {  content: "\f16a";}.fa-dropbox:before {  content: "\f16b";}.fa-stack-overflow:before {  content: "\f16c";}.fa-instagram:before {  content: "\f16d";}.fa-flickr:before {  content: "\f16e";}.fa-adn:before {  content: "\f170";}.fa-bitbucket:before {  content: "\f171";}.fa-bitbucket-square:before {  content: "\f172";}.fa-tumblr:before {  content: "\f173";}.fa-tumblr-square:before {  content: "\f174";}.fa-long-arrow-down:before {  content: "\f175";}.fa-long-arrow-up:before {  content: "\f176";}.fa-long-arrow-left:before {  content: "\f177";}.fa-long-arrow-right:before {  content: "\f178";}.fa-apple:before {  content: "\f179";}.fa-windows:before {  content: "\f17a";}.fa-android:before {  content: "\f17b";}.fa-linux:before {  content: "\f17c";}.fa-dribbble:before {  content: "\f17d";}.fa-skype:before {  content: "\f17e";}.fa-foursquare:before {  content: "\f180";}.fa-trello:before {  content: "\f181";}.fa-female:before {  content: "\f182";}.fa-male:before {  content: "\f183";}.fa-gittip:before,.fa-gratipay:before {  content: "\f184";}.fa-sun-o:before {  content: "\f185";}.fa-moon-o:before {  content: "\f186";}.fa-archive:before {  content: "\f187";}.fa-bug:before {  content: "\f188";}.fa-vk:before {  content: "\f189";}.fa-weibo:before {  content: "\f18a";}.fa-renren:before {  content: "\f18b";}.fa-pagelines:before {  content: "\f18c";}.fa-stack-exchange:before {  content: "\f18d";}.fa-arrow-circle-o-right:before {  content: "\f18e";}.fa-arrow-circle-o-left:before {  content: "\f190";}.fa-toggle-left:before,.fa-caret-square-o-left:before {  content: "\f191";}.fa-dot-circle-o:before {  content: "\f192";}.fa-wheelchair:before {  content: "\f193";}.fa-vimeo-square:before {  content: "\f194";}.fa-turkish-lira:before,.fa-try:before {  content: "\f195";}.fa-plus-square-o:before {  content: "\f196";}.fa-space-shuttle:before {  content: "\f197";}.fa-slack:before {  content: "\f198";}.fa-envelope-square:before {  content: "\f199";}.fa-wordpress:before {  content: "\f19a";}.fa-openid:before {  content: "\f19b";}.fa-institution:before,.fa-bank:before,.fa-university:before {  content: "\f19c";}.fa-mortar-board:before,.fa-graduation-cap:before {  content: "\f19d";}.fa-yahoo:before {  content: "\f19e";}.fa-google:before {  content: "\f1a0";}.fa-reddit:before {  content: "\f1a1";}.fa-reddit-square:before {  content: "\f1a2";}.fa-stumbleupon-circle:before {  content: "\f1a3";}.fa-stumbleupon:before {  content: "\f1a4";}.fa-delicious:before {  content: "\f1a5";}.fa-digg:before {  content: "\f1a6";}.fa-pied-piper-pp:before {  content: "\f1a7";}.fa-pied-piper-alt:before {  content: "\f1a8";}.fa-drupal:before {  content: "\f1a9";}.fa-joomla:before {  content: "\f1aa";}.fa-language:before {  content: "\f1ab";}.fa-fax:before {  content: "\f1ac";}.fa-building:before {  content: "\f1ad";}.fa-child:before {  content: "\f1ae";}.fa-paw:before {  content: "\f1b0";}.fa-spoon:before {  content: "\f1b1";}.fa-cube:before {  content: "\f1b2";}.fa-cubes:before {  content: "\f1b3";}.fa-behance:before {  content: "\f1b4";}.fa-behance-square:before {  content: "\f1b5";}.fa-steam:before {  content: "\f1b6";}.fa-steam-square:before {  content: "\f1b7";}.fa-recycle:before {  content: "\f1b8";}.fa-automobile:before,.fa-car:before {  content: "\f1b9";}.fa-cab:before,.fa-taxi:before {  content: "\f1ba";}.fa-tree:before {  content: "\f1bb";}.fa-spotify:before {  content: "\f1bc";}.fa-deviantart:before {  content: "\f1bd";}.fa-soundcloud:before {  content: "\f1be";}.fa-database:before {  content: "\f1c0";}.fa-file-pdf-o:before {  content: "\f1c1";}.fa-file-word-o:before {  content: "\f1c2";}.fa-file-excel-o:before {  content: "\f1c3";}.fa-file-powerpoint-o:before {  content: "\f1c4";}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before {  content: "\f1c5";}.fa-file-zip-o:before,.fa-file-archive-o:before {  content: "\f1c6";}.fa-file-sound-o:before,.fa-file-audio-o:before {  content: "\f1c7";}.fa-file-movie-o:before,.fa-file-video-o:before {  content: "\f1c8";}.fa-file-code-o:before {  content: "\f1c9";}.fa-vine:before {  content: "\f1ca";}.fa-codepen:before {  content: "\f1cb";}.fa-jsfiddle:before {  content: "\f1cc";}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before {  content: "\f1cd";}.fa-circle-o-notch:before {  content: "\f1ce";}.fa-ra:before,.fa-resistance:before,.fa-rebel:before {  content: "\f1d0";}.fa-ge:before,.fa-empire:before {  content: "\f1d1";}.fa-git-square:before {  content: "\f1d2";}.fa-git:before {  content: "\f1d3";}.fa-y-combinator-square:before,.fa-yc-square:before,.fa-hacker-news:before {  content: "\f1d4";}.fa-tencent-weibo:before {  content: "\f1d5";}.fa-qq:before {  content: "\f1d6";}.fa-wechat:before,.fa-weixin:before {  content: "\f1d7";}.fa-send:before,.fa-paper-plane:before {  content: "\f1d8";}.fa-send-o:before,.fa-paper-plane-o:before {  content: "\f1d9";}.fa-history:before {  content: "\f1da";}.fa-circle-thin:before {  content: "\f1db";}.fa-header:before {  content: "\f1dc";}.fa-paragraph:before {  content: "\f1dd";}.fa-sliders:before {  content: "\f1de";}.fa-share-alt:before {  content: "\f1e0";}.fa-share-alt-square:before {  content: "\f1e1";}.fa-bomb:before {  content: "\f1e2";}.fa-soccer-ball-o:before,.fa-futbol-o:before {  content: "\f1e3";}.fa-tty:before {  content: "\f1e4";}.fa-binoculars:before {  content: "\f1e5";}.fa-plug:before {  content: "\f1e6";}.fa-slideshare:before {  content: "\f1e7";}.fa-twitch:before {  content: "\f1e8";}.fa-yelp:before {  content: "\f1e9";}.fa-newspaper-o:before {  content: "\f1ea";}.fa-wifi:before {  content: "\f1eb";}.fa-calculator:before {  content: "\f1ec";}.fa-paypal:before {  content: "\f1ed";}.fa-google-wallet:before {  content: "\f1ee";}.fa-cc-visa:before {  content: "\f1f0";}.fa-cc-mastercard:before {  content: "\f1f1";}.fa-cc-discover:before {  content: "\f1f2";}.fa-cc-amex:before {  content: "\f1f3";}.fa-cc-paypal:before {  content: "\f1f4";}.fa-cc-stripe:before {  content: "\f1f5";}.fa-bell-slash:before {  content: "\f1f6";}.fa-bell-slash-o:before {  content: "\f1f7";}.fa-trash:before {  content: "\f1f8";}.fa-copyright:before {  content: "\f1f9";}.fa-at:before {  content: "\f1fa";}.fa-eyedropper:before {  content: "\f1fb";}.fa-paint-brush:before {  content: "\f1fc";}.fa-birthday-cake:before {  content: "\f1fd";}.fa-area-chart:before {  content: "\f1fe";}.fa-pie-chart:before {  content: "\f200";}.fa-line-chart:before {  content: "\f201";}.fa-lastfm:before {  content: "\f202";}.fa-lastfm-square:before {  content: "\f203";}.fa-toggle-off:before {  content: "\f204";}.fa-toggle-on:before {  content: "\f205";}.fa-bicycle:before {  content: "\f206";}.fa-bus:before {  content: "\f207";}.fa-ioxhost:before {  content: "\f208";}.fa-angellist:before {  content: "\f209";}.fa-cc:before {  content: "\f20a";}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before {  content: "\f20b";}.fa-meanpath:before {  content: "\f20c";}.fa-buysellads:before {  content: "\f20d";}.fa-connectdevelop:before {  content: "\f20e";}.fa-dashcube:before {  content: "\f210";}.fa-forumbee:before {  content: "\f211";}.fa-leanpub:before {  content: "\f212";}.fa-sellsy:before {  content: "\f213";}.fa-shirtsinbulk:before {  content: "\f214";}.fa-simplybuilt:before {  content: "\f215";}.fa-skyatlas:before {  content: "\f216";}.fa-cart-plus:before {  content: "\f217";}.fa-cart-arrow-down:before {  content: "\f218";}.fa-diamond:before {  content: "\f219";}.fa-ship:before {  content: "\f21a";}.fa-user-secret:before {  content: "\f21b";}.fa-motorcycle:before {  content: "\f21c";}.fa-street-view:before {  content: "\f21d";}.fa-heartbeat:before {  content: "\f21e";}.fa-venus:before {  content: "\f221";}.fa-mars:before {  content: "\f222";}.fa-mercury:before {  content: "\f223";}.fa-intersex:before,.fa-transgender:before {  content: "\f224";}.fa-transgender-alt:before {  content: "\f225";}.fa-venus-double:before {  content: "\f226";}.fa-mars-double:before {  content: "\f227";}.fa-venus-mars:before {  content: "\f228";}.fa-mars-stroke:before {  content: "\f229";}.fa-mars-stroke-v:before {  content: "\f22a";}.fa-mars-stroke-h:before {  content: "\f22b";}.fa-neuter:before {  content: "\f22c";}.fa-genderless:before {  content: "\f22d";}.fa-facebook-official:before {  content: "\f230";}.fa-pinterest-p:before {  content: "\f231";}.fa-whatsapp:before {  content: "\f232";}.fa-server:before {  content: "\f233";}.fa-user-plus:before {  content: "\f234";}.fa-user-times:before {  content: "\f235";}.fa-hotel:before,.fa-bed:before {  content: "\f236";}.fa-viacoin:before {  content: "\f237";}.fa-train:before {  content: "\f238";}.fa-subway:before {  content: "\f239";}.fa-medium:before {  content: "\f23a";}.fa-yc:before,.fa-y-combinator:before {  content: "\f23b";}.fa-optin-monster:before {  content: "\f23c";}.fa-opencart:before {  content: "\f23d";}.fa-expeditedssl:before {  content: "\f23e";}.fa-battery-4:before,.fa-battery:before,.fa-battery-full:before {  content: "\f240";}.fa-battery-3:before,.fa-battery-three-quarters:before {  content: "\f241";}.fa-battery-2:before,.fa-battery-half:before {  content: "\f242";}.fa-battery-1:before,.fa-battery-quarter:before {  content: "\f243";}.fa-battery-0:before,.fa-battery-empty:before {  content: "\f244";}.fa-mouse-pointer:before {  content: "\f245";}.fa-i-cursor:before {  content: "\f246";}.fa-object-group:before {  content: "\f247";}.fa-object-ungroup:before {  content: "\f248";}.fa-sticky-note:before {  content: "\f249";}.fa-sticky-note-o:before {  content: "\f24a";}.fa-cc-jcb:before {  content: "\f24b";}.fa-cc-diners-club:before {  content: "\f24c";}.fa-clone:before {  content: "\f24d";}.fa-balance-scale:before {  content: "\f24e";}.fa-hourglass-o:before {  content: "\f250";}.fa-hourglass-1:before,.fa-hourglass-start:before {  content: "\f251";}.fa-hourglass-2:before,.fa-hourglass-half:before {  content: "\f252";}.fa-hourglass-3:before,.fa-hourglass-end:before {  content: "\f253";}.fa-hourglass:before {  content: "\f254";}.fa-hand-grab-o:before,.fa-hand-rock-o:before {  content: "\f255";}.fa-hand-stop-o:before,.fa-hand-paper-o:before {  content: "\f256";}.fa-hand-scissors-o:before {  content: "\f257";}.fa-hand-lizard-o:before {  content: "\f258";}.fa-hand-spock-o:before {  content: "\f259";}.fa-hand-pointer-o:before {  content: "\f25a";}.fa-hand-peace-o:before {  content: "\f25b";}.fa-trademark:before {  content: "\f25c";}.fa-registered:before {  content: "\f25d";}.fa-creative-commons:before {  content: "\f25e";}.fa-gg:before {  content: "\f260";}.fa-gg-circle:before {  content: "\f261";}.fa-tripadvisor:before {  content: "\f262";}.fa-odnoklassniki:before {  content: "\f263";}.fa-odnoklassniki-square:before {  content: "\f264";}.fa-get-pocket:before {  content: "\f265";}.fa-wikipedia-w:before {  content: "\f266";}.fa-safari:before {  content: "\f267";}.fa-chrome:before {  content: "\f268";}.fa-firefox:before {  content: "\f269";}.fa-opera:before {  content: "\f26a";}.fa-internet-explorer:before {  content: "\f26b";}.fa-tv:before,.fa-television:before {  content: "\f26c";}.fa-contao:before {  content: "\f26d";}.fa-500px:before {  content: "\f26e";}.fa-amazon:before {  content: "\f270";}.fa-calendar-plus-o:before {  content: "\f271";}.fa-calendar-minus-o:before {  content: "\f272";}.fa-calendar-times-o:before {  content: "\f273";}.fa-calendar-check-o:before {  content: "\f274";}.fa-industry:before {  content: "\f275";}.fa-map-pin:before {  content: "\f276";}.fa-map-signs:before {  content: "\f277";}.fa-map-o:before {  content: "\f278";}.fa-map:before {  content: "\f279";}.fa-commenting:before {  content: "\f27a";}.fa-commenting-o:before {  content: "\f27b";}.fa-houzz:before {  content: "\f27c";}.fa-vimeo:before {  content: "\f27d";}.fa-black-tie:before {  content: "\f27e";}.fa-fonticons:before {  content: "\f280";}.fa-reddit-alien:before {  content: "\f281";}.fa-edge:before {  content: "\f282";}.fa-credit-card-alt:before {  content: "\f283";}.fa-codiepie:before {  content: "\f284";}.fa-modx:before {  content: "\f285";}.fa-fort-awesome:before {  content: "\f286";}.fa-usb:before {  content: "\f287";}.fa-product-hunt:before {  content: "\f288";}.fa-mixcloud:before {  content: "\f289";}.fa-scribd:before {  content: "\f28a";}.fa-pause-circle:before {  content: "\f28b";}.fa-pause-circle-o:before {  content: "\f28c";}.fa-stop-circle:before {  content: "\f28d";}.fa-stop-circle-o:before {  content: "\f28e";}.fa-shopping-bag:before {  content: "\f290";}.fa-shopping-basket:before {  content: "\f291";}.fa-hashtag:before {  content: "\f292";}.fa-bluetooth:before {  content: "\f293";}.fa-bluetooth-b:before {  content: "\f294";}.fa-percent:before {  content: "\f295";}.fa-gitlab:before {  content: "\f296";}.fa-wpbeginner:before {  content: "\f297";}.fa-wpforms:before {  content: "\f298";}.fa-envira:before {  content: "\f299";}.fa-universal-access:before {  content: "\f29a";}.fa-wheelchair-alt:before {  content: "\f29b";}.fa-question-circle-o:before {  content: "\f29c";}.fa-blind:before {  content: "\f29d";}.fa-audio-description:before {  content: "\f29e";}.fa-volume-control-phone:before {  content: "\f2a0";}.fa-braille:before {  content: "\f2a1";}.fa-assistive-listening-systems:before {  content: "\f2a2";}.fa-asl-interpreting:before,.fa-american-sign-language-interpreting:before {  content: "\f2a3";}.fa-deafness:before,.fa-hard-of-hearing:before,.fa-deaf:before {  content: "\f2a4";}.fa-glide:before {  content: "\f2a5";}.fa-glide-g:before {  content: "\f2a6";}.fa-signing:before,.fa-sign-language:before {  content: "\f2a7";}.fa-low-vision:before {  content: "\f2a8";}.fa-viadeo:before {  content: "\f2a9";}.fa-viadeo-square:before {  content: "\f2aa";}.fa-snapchat:before {  content: "\f2ab";}.fa-snapchat-ghost:before {  content: "\f2ac";}.fa-snapchat-square:before {  content: "\f2ad";}.fa-pied-piper:before {  content: "\f2ae";}.fa-first-order:before {  content: "\f2b0";}.fa-yoast:before {  content: "\f2b1";}.fa-themeisle:before {  content: "\f2b2";}.fa-google-plus-circle:before,.fa-google-plus-official:before {  content: "\f2b3";}.fa-fa:before,.fa-font-awesome:before {  content: "\f2b4";}.fa-handshake-o:before {  content: "\f2b5";}.fa-envelope-open:before {  content: "\f2b6";}.fa-envelope-open-o:before {  content: "\f2b7";}.fa-linode:before {  content: "\f2b8";}.fa-address-book:before {  content: "\f2b9";}.fa-address-book-o:before {  content: "\f2ba";}.fa-vcard:before,.fa-address-card:before {  content: "\f2bb";}.fa-vcard-o:before,.fa-address-card-o:before {  content: "\f2bc";}.fa-user-circle:before {  content: "\f2bd";}.fa-user-circle-o:before {  content: "\f2be";}.fa-user-o:before {  content: "\f2c0";}.fa-id-badge:before {  content: "\f2c1";}.fa-drivers-license:before,.fa-id-card:before {  content: "\f2c2";}.fa-drivers-license-o:before,.fa-id-card-o:before {  content: "\f2c3";}.fa-quora:before {  content: "\f2c4";}.fa-free-code-camp:before {  content: "\f2c5";}.fa-telegram:before {  content: "\f2c6";}.fa-thermometer-4:before,.fa-thermometer:before,.fa-thermometer-full:before {  content: "\f2c7";}.fa-thermometer-3:before,.fa-thermometer-three-quarters:before {  content: "\f2c8";}.fa-thermometer-2:before,.fa-thermometer-half:before {  content: "\f2c9";}.fa-thermometer-1:before,.fa-thermometer-quarter:before {  content: "\f2ca";}.fa-thermometer-0:before,.fa-thermometer-empty:before {  content: "\f2cb";}.fa-shower:before {  content: "\f2cc";}.fa-bathtub:before,.fa-s15:before,.fa-bath:before {  content: "\f2cd";}.fa-podcast:before {  content: "\f2ce";}.fa-window-maximize:before {  content: "\f2d0";}.fa-window-minimize:before {  content: "\f2d1";}.fa-window-restore:before {  content: "\f2d2";}.fa-times-rectangle:before,.fa-window-close:before {  content: "\f2d3";}.fa-times-rectangle-o:before,.fa-window-close-o:before {  content: "\f2d4";}.fa-bandcamp:before {  content: "\f2d5";}.fa-grav:before {  content: "\f2d6";}.fa-etsy:before {  content: "\f2d7";}.fa-imdb:before {  content: "\f2d8";}.fa-ravelry:before {  content: "\f2d9";}.fa-eercast:before {  content: "\f2da";}.fa-microchip:before {  content: "\f2db";}.fa-snowflake-o:before {  content: "\f2dc";}.fa-superpowers:before {  content: "\f2dd";}.fa-wpexplorer:before {  content: "\f2de";}.fa-meetup:before {  content: "\f2e0";}.sr-only {  position: absolute;  width: 1px;  height: 1px;  padding: 0;  margin: -1px;  overflow: hidden;  clip: rect(0, 0, 0, 0);  border: 0;}.sr-only-focusable:active,.sr-only-focusable:focus {  position: static;  width: auto;  height: auto;  margin: 0;  overflow: visible;  clip: auto;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/nav_menu.css"/>
      <url>/css/nav_menu.css</url>
      
        <content type="html"><![CDATA[#nav a:hover {  background: var(--xiaoyutou-main);  transition: 0.3s;}#nav-totop:hover .totopbtn i {  opacity: 1;}#nav-totop #percent {  font-size: 12px;  background: var(--xiaoyutou-white);  color: var(--xiaoyutou-main);  width: 25px;  height: 25px;  border-radius: 35px;  display: flex;  justify-content: center;  align-items: center;  transition: 0.3s;}.nav-fixed #nav-totop #percent,.page #nav-totop #percent {  background: var(--font-color);  color: var(--card-bg);  font-size: 13px;}#nav-totop {  width: 35px;}#page-header:not(.is-top-bar) #percent {  transition: 0.3s;}#page-header:not(.is-top-bar) #nav-totop {  width: 0;  opacity: 0;  transition: width 0.3s, opacity 0.2s;  margin-left: 0 !important;}#nav-totop #percent {  font-weight: 700;}#nav-totop:hover #percent {  opacity: 0;  transform: scale(1.5);  font-weight: 700;}#page-header #nav #nav-right div {  margin-left: 0.5rem;  padding: 0;}#nav-totop {  display: flex;  align-items: center;  justify-content: center;  transition: 0.3s;}.nav-button {  cursor: pointer;}div#menus {  display: flex;  align-items: center;}#page-header #nav .nav-button a {  height: 35px;  width: 35px;  display: flex;  align-items: center;  justify-content: center;}#nav .site-page {  padding-bottom: 0px;}#nav *::after {  background-color: transparent !important;}/* é¡¶æ ä¿®æ”¹ */#nav .menus_items .menus_item .menus_item_child li a {  padding: 2px 16px;}#nav .menus_items .menus_item .menus_item_child li:hover a {  color: white !important;}#nav .menus_items .menus_item .menus_item_child li {  margin: 6px;  border-radius: 5px;  transition: all 0.3s;  display: inline-block;  margin: 0 3px;}#nav .menus_items .menus_item .menus_item_child:before {  top: -19px;}#site-name,.shuoshuo {  white-space: nowrap;  overflow: hidden;}#site-name {  padding: 0 8px;  position: relative;  display: flex;  align-items: center;  justify-content: center;  transition: 0.3s;}#blog_name #site-name i {  opacity: 0;  position: absolute;}#blog_name #site-name:hover .title {  opacity: 0;}#blog_name #site-name:hover i {  opacity: 1;  transform: scale(1.01);  color: white;}/* åœ†è§’éšè— */ul.menus_item_child {  border-radius: 5px;}/* ä¸€çº§èœå•å±…ä¸­ */#nav .menus_items {  position: absolute;  width: fit-content;  left: 50%;  transform: translateX(-50%);  display: flex;  flex-direction: row;  justify-content: center;  align-items: center;  height: 60px;}#nav .menus_items .menus_item:hover .menus_item_child {  display: block;  transform: translateX(-50%);  right: auto;  left: auto !important;  padding: 6px 4px;  box-sizing: content-box;  line-height: 35px;}#nav .menus_items .menus_item:hover {  padding: 0 5px 27px 5px !important;  margin-bottom: -14.5px !important;}#nav .menus_items .menus_item .menus_item_child {  top: 44px;}@media screen and (min-width: 768px) {  .page .menus_item:hover>a.site-page {    color: var(--xiaoyutou-white) !important;    background: var(--xiaoyutou-main);    transition: 0.3s;    box-shadow: var(--xiaoyutou-shadow-main);  }}#nav a {  border-radius: 8px;}.page #nav a:hover {  color: var(--xiaoyutou-white) !important;  background: var(--xiaoyutou-main);  transition: 0.3s;  box-shadow: var(--xiaoyutou-shadow-main);}#menus>div.menus_items>div>a {  letter-spacing: 0.3rem;  font-weight: 700;  padding: 0em 0.3em 0em 0.5em;  height: 35px;  line-height: 35px;}#nav .menus_items .menus_item {  padding: 0 5px;  display: flex;  flex-direction: column;  margin: auto;  align-items: center;}#nav div#toggle-menu {  padding: 2px 0 4px 6px;}#nav-totop .totopbtn i {  position: absolute;  display: flex;  opacity: 0;}#page-name::before {  font-size: 18px;  position: absolute;  width: 100%;  height: 100%;  border-radius: 8px;  color: white !important;  top: 0;  left: 0;  content: "å›åˆ°é¡¶éƒ¨";  background-color: var(--xiaoyutou-theme);  transition: all 0.3s;  -webkit-transition: all 0.3s;  -moz-transition: all 0.3s;  -ms-transition: all 0.3s;  -o-transition: all 0.3s;  opacity: 0;  box-shadow: 0 0 3px var(--xiaoyutou-theme);  line-height: 45px;  /*å¦‚æœå‚ç›´ä½ç½®ä¸å±…ä¸­å¯ä»¥å¾®è°ƒæ­¤å€¼ï¼Œä¹Ÿå¯ä»¥åˆ äº†*/}#page-name:hover:before {  opacity: 1;}#name-container {  transition: all 0.3s;  -webkit-transition: all 0.3s;  -moz-transition: all 0.3s;  -ms-transition: all 0.3s;  -o-transition: all 0.3s;}#name-container:hover {  transform: translateX(-50%) scale(1.03);}#page-name {  position: relative;  padding: 10px 30px;}center#name-container {  position: absolute;  width: 100%;  left: 50%;  transform: translateX(-50%);  font-family: "ZhuZiAYuanJWD";}.nav-fixed.nav-visible #name-container {  transition: 0.3s;  transform: translate(-50%, 60px);}.nav-fixed.nav-visible #menus .menus_items {  transform: translate(-50%);  transition: 0.3s;  line-height: 60px;}.nav-fixed #menus .menus_items {  transform: translate(-50%, -60px);  transition: 0.3s;}.nav-fixed #name-container {  top: 15%;  transition: 0.3s;}#name-container {  bottom: 60px;}.mask-name-container {  max-width: 1200px;  width: 50%;  height: 100%;  position: absolute;  overflow: hidden;  left: 50%;  transform: translateX(-50%);}@media screen and (max-width: 992px) {  .mask-name-container {    width: 65%;  }}@media screen and (max-width: 768px) {  .mask-name-container {    display: none;  }}#sidebar #sidebar-menus .menus_items .site-page:hover {  color: var(--xiaoyutou-white);  border-radius: var(--xiaoyutou-border-radius);}#nav .menus_items .menus_item>a>i:last-child {  display: none;}#nav #search-button {  font-size: 1.3em;}@media screen and (min-width: 900px) {  #nav .back-home-button:hover {    box-shadow: var(--xiaoyutou-shadow-main);  }}.back-home-button:hover {  background: var(--xiaoyutou-main);  color: var(--xiaoyutou-white) !important;}.back-home-button {  display: flex;  width: 35px;  height: 35px;  padding: 0 !important;  align-items: center;  justify-content: center;  margin-right: 4px;  transition: 0.3s;  border-radius: 8px;}.back-home-button:hover .back-menu-list-groups {  display: flex;  opacity: 1;  transition: 0.3s;  top: 55px;  pointer-events: auto;  left: 0;}.back-home-button .back-menu-list-groups {  position: absolute;  top: 65px;  left: 0;  background: var(--xiaoyutou-card-bg);  border-radius: 12px;  border: var(--style-border);  flex-direction: column;  font-size: 12px;  color: var(--xiaoyutou-secondtext);  box-shadow: var(--xiaoyutou-shadow-border);  transition: 0s;  opacity: 0;  pointer-events: none;}.back-home-button .back-menu-list-group {  display: flex;  flex-direction: column;}.back-home-button .back-menu-list-group .back-menu-list-title {  margin: 8px 0 0 16px;  transition: 0.3s;}.back-home-button .back-menu-list {  display: flex;  flex-direction: column;}.back-home-button .back-menu-list::before {  position: absolute;  top: -22px;  left: 0px;  width: 100%;  height: 25px;  content: "";}.back-home-button .back-menu-list-group:hover .back-menu-list-title {  color: var(--xiaoyutou-main);}.back-home-button .back-menu-list-groups:hover {  border: var(--style-border-hover);}.back-home-button .back-menu-list .back-menu-item {  display: flex;  align-items: center;  margin: 4px 8px;  padding: 4px 8px !important;  transition: 0.3s;  border-radius: 8px;}.back-home-button .back-menu-list .back-menu-item .back-menu-item-text {  font-size: var(--global-font-size);  margin-left: 0.5rem;  color: var(--xiaoyutou-fontcolor);  white-space: nowrap;}#nav #blog_name {  flex-wrap: nowrap;  height: 60px;  display: flex;  align-items: center;  /* z-index: 102; */  transition: 0.3s;}/* #nav.show{  background: rgba(255, 255, 255, 0.75);  backdrop-filter: var(--backdrop-filter);} */.back-home-button .back-menu-list .back-menu-item .back-menu-item-icon {  width: 24px;  height: 24px;  border-radius: 24px;  background: var(--xiaoyutou-secondbg);}#page-header #nav .back-home-button {  cursor: pointer;  position: relative;}@media screen and (min-width: 1300px) {  #nav a:hover {    transform: scale(1.03);  }}.back-home-button .back-menu-list .back-menu-item:hover .back-menu-item-text {  color: var(--xiaoyutou-white);}.back-menu-item-icon.loading img {  width: 25px;}#page-header #nav #menus .nav-button.long a.totopbtn,#page-header #nav #menus .nav-button.long,#page-header #nav #menus .nav-button.long a.totopbtn span {  width: 70px;}#page-header #nav #menus .nav-button.long a.totopbtn span {  border-radius: 35px;  display: flex;  justify-content: center;  align-items: center;  transition: 0.3s;  white-space: nowrap;}#page-header #nav #menus .nav-button.long a.totopbtn:hover {  border-radius: 35px;  height: 30px;}#nav #search-button {  padding-left: 0;}#page-header #nav .nav-button {  margin-left: 0.5rem;  padding: 0;}#page-header:not(.is-top-bar) #nav-totop a {  display: none;}#search-button a.site-page.social-icon.search span {  display: none;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/progress_bar.css"/>
      <url>/css/progress_bar.css</url>
      
        <content type="html"><![CDATA[/* æ­¤cssæ–‡ä»¶ä¸ºåšå®¢é¡¶éƒ¨æ¸å˜åŠ è½½æ¡çš„cssæ–‡ä»¶ï¼Œå·²åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlçš„injectä¸­å¼•å…¥ï¼Œéœ€è¦å¾—åˆ°æ¸å˜åŠ è½½æ¡çš„æ•ˆæœï¼Œè¿˜éœ€è¦jsä¾èµ–ï¼Œå·²åœ¨_config.butterfly.ymlçš„injectä¸­å¼•å…¥ï¼Œjsæ–‡ä»¶æ˜¯åˆ«äººçš„ç›´æ¥æ‹¿æ¥ç”¨ã€‚ */.pace {  -webkit-pointer-events: none;  pointer-events: none;  -webkit-user-select: none;  -moz-user-select: none;  user-select: none;  z-index: 2000;  position: fixed;  margin: auto;  top: 10px;  left: 0;  right: 0;  height: 8px;  border-radius: 8px;  width: 4rem;  background: #eaecf2;  border: 1px #e3e8f7;  overflow: hidden;}.pace-inactive .pace-progress {  opacity: 0;  transition: 0.3s ease-in;}.pace .pace-progress {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  -ms-box-sizing: border-box;  -o-box-sizing: border-box;  box-sizing: border-box;  -webkit-transform: translate3d(0, 0, 0);  -moz-transform: translate3d(0, 0, 0);  -ms-transform: translate3d(0, 0, 0);  -o-transform: translate3d(0, 0, 0);  transform: translate3d(0, 0, 0);  max-width: 200px;  position: absolute;  z-index: 2000;  display: block;  top: 0;  right: 100%;  height: 100%;  width: 100%;  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);  animation: gradient 1.5s ease infinite;  background-size: 200%;}.pace.pace-inactive {  opacity: 0;  transition: 0.3s;  top: -8px;}@keyframes gradient {  0% {    background-position: 0% 50%;  }  50% {    background-position: 100% 50%;  }  100% {    background-position: 0% 50%;  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/countup.js"/>
      <url>/js/countup.js</url>
      
        <content type="html"><![CDATA[// å…³äºé¡µé¢countup.jsvar CountUp = function (target, startVal, endVal, decimals, duration, options) {    var self = this;    self.version = function () {      return "1.9.2";    };    self.options = {      useEasing: true,      useGrouping: true,      separator: ",",      decimal: ".",      easingFn: easeOutExpo,      formattingFn: formatNumber,      prefix: "",      suffix: "",      numerals: [],    };    if (options && typeof options === "object") {      for (var key in self.options) {        if (options.hasOwnProperty(key) && options[key] !== null) {          self.options[key] = options[key];        }      }    }    if (self.options.separator === "") {      self.options.useGrouping = false;    } else {      self.options.separator = "" + self.options.separator;    }    var lastTime = 0;    var vendors = ["webkit", "moz", "ms", "o"];    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {      window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"];      window.cancelAnimationFrame =        window[vendors[x] + "CancelAnimationFrame"] || window[vendors[x] + "CancelRequestAnimationFrame"];    }    if (!window.requestAnimationFrame) {      window.requestAnimationFrame = function (callback, element) {        var currTime = new Date().getTime();        var timeToCall = Math.max(0, 16 - (currTime - lastTime));        var id = window.setTimeout(function () {          callback(currTime + timeToCall);        }, timeToCall);        lastTime = currTime + timeToCall;        return id;      };    }    if (!window.cancelAnimationFrame) {      window.cancelAnimationFrame = function (id) {        clearTimeout(id);      };    }    function formatNumber(num) {      num = num.toFixed(self.decimals);      num += "";      var x, x1, x2, x3, i, l;      x = num.split(".");      x1 = x[0];      x2 = x.length > 1 ? self.options.decimal + x[1] : "";      if (self.options.useGrouping) {        x3 = "";        for (i = 0, l = x1.length; i < l; ++i) {          if (i !== 0 && i % 3 === 0) {            x3 = self.options.separator + x3;          }          x3 = x1[l - i - 1] + x3;        }        x1 = x3;      }      if (self.options.numerals.length) {        x1 = x1.replace(/[0-9]/g, function (w) {          return self.options.numerals[+w];        });        x2 = x2.replace(/[0-9]/g, function (w) {          return self.options.numerals[+w];        });      }      return self.options.prefix + x1 + x2 + self.options.suffix;    }    function easeOutExpo(t, b, c, d) {      return (c * (-Math.pow(2, (-10 * t) / d) + 1) * 1024) / 1023 + b;    }    function ensureNumber(n) {      return typeof n === "number" && !isNaN(n);    }    self.initialize = function () {      if (self.initialized) {        return true;      }      self.error = "";      self.d = typeof target === "string" ? document.getElementById(target) : target;      if (!self.d) {        self.error = "[CountUp] target is null or undefined";        return false;      }      self.startVal = Number(startVal);      self.endVal = Number(endVal);      if (ensureNumber(self.startVal) && ensureNumber(self.endVal)) {        self.decimals = Math.max(0, decimals || 0);        self.dec = Math.pow(10, self.decimals);        self.duration = Number(duration) * 1000 || 2000;        self.countDown = self.startVal > self.endVal;        self.frameVal = self.startVal;        self.initialized = true;        return true;      } else {        self.error = "[CountUp] startVal (" + startVal + ") or endVal (" + endVal + ") is not a number";        return false;      }    };    self.printValue = function (value) {      var result = self.options.formattingFn(value);      if (self.d.tagName === "INPUT") {        this.d.value = result;      } else {        if (self.d.tagName === "text" || self.d.tagName === "tspan") {          this.d.textContent = result;        } else {          this.d.innerHTML = result;        }      }    };    self.count = function (timestamp) {      if (!self.startTime) {        self.startTime = timestamp;      }      self.timestamp = timestamp;      var progress = timestamp - self.startTime;      self.remaining = self.duration - progress;      if (self.options.useEasing) {        if (self.countDown) {          self.frameVal = self.startVal - self.options.easingFn(progress, 0, self.startVal - self.endVal, self.duration);        } else {          self.frameVal = self.options.easingFn(progress, self.startVal, self.endVal - self.startVal, self.duration);        }      } else {        if (self.countDown) {          self.frameVal = self.startVal - (self.startVal - self.endVal) * (progress / self.duration);        } else {          self.frameVal = self.startVal + (self.endVal - self.startVal) * (progress / self.duration);        }      }      if (self.countDown) {        self.frameVal = self.frameVal < self.endVal ? self.endVal : self.frameVal;      } else {        self.frameVal = self.frameVal > self.endVal ? self.endVal : self.frameVal;      }      self.frameVal = Math.round(self.frameVal * self.dec) / self.dec;      self.printValue(self.frameVal);      if (progress < self.duration) {        self.rAF = requestAnimationFrame(self.count);      } else {        if (self.callback) {          self.callback();        }      }    };    self.start = function (callback) {      if (!self.initialize()) {        return;      }      self.callback = callback;      self.rAF = requestAnimationFrame(self.count);    };    self.pauseResume = function () {      if (!self.paused) {        self.paused = true;        cancelAnimationFrame(self.rAF);      } else {        self.paused = false;        delete self.startTime;        self.duration = self.remaining;        self.startVal = self.frameVal;        requestAnimationFrame(self.count);      }    };    self.reset = function () {      self.paused = false;      delete self.startTime;      self.initialized = false;      if (self.initialize()) {        cancelAnimationFrame(self.rAF);        self.printValue(self.startVal);      }    };    self.update = function (newEndVal) {      if (!self.initialize()) {        return;      }      newEndVal = Number(newEndVal);      if (!ensureNumber(newEndVal)) {        self.error = "[CountUp] update() - new endVal is not a number: " + newEndVal;        return;      }      self.error = "";      if (newEndVal === self.frameVal) {        return;      }      cancelAnimationFrame(self.rAF);      self.paused = false;      delete self.startTime;      self.startVal = self.frameVal;      self.endVal = newEndVal;      self.countDown = self.startVal > self.endVal;      self.rAF = requestAnimationFrame(self.count);    };    if (self.initialize()) {      self.printValue(self.startVal);    }  };]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/card_author.js"/>
      <url>/js/card_author.js</url>
      
        <content type="html"><![CDATA[// è¿™é‡Œæ˜¯ä¿¡æ¯å¡ç‰‡ç¾åŒ–jsçš„ä»£ç var card_author = {    getTimeState: function() {        var e = (new Date).getHours()          , t = "";        return 0 <= e && e <= 5 ? t = "æ™šå®‰ğŸ˜´" : 5 < e && e <= 10 ? t = "æ—©ä¸Šå¥½ğŸ‘‹" : 10 < e && e <= 14 ? t = "ä¸­åˆå¥½ğŸ‘‹" : 14 < e && e <= 18 ? t = "ä¸‹åˆå¥½ğŸ‘‹" : 18 < e && e <= 24 && (t = "æ™šä¸Šå¥½ğŸ‘‹"),        t    },    sayhi: function() {        var e = document.getElementById("author-info__sayhi");        e && (e.innerHTML = card_author.getTimeState() + "ï¼æˆ‘æ˜¯")    },}card_author.sayhi();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/light.js"/>
      <url>/js/light.js</url>
      
        <content type="html"><![CDATA[/*    æ­¤éƒ¨åˆ†ä»£ç æ˜¯é»‘å¤œéœ“è™¹ç¯çš„ä»£ç ã€å¤§æ ‡é¢˜å’Œä¸ªäººä¿¡æ¯çš„åŠ¨æ€éœ“è™¹ç¯ã€‘    _config.butterfly.ymlä¸­çš„injectä¸­å¼•ç”¨*/// éœ“è™¹ç¯æ•ˆæœ// é¢œè‰²æ•°ç»„var arr = ["#39c5bb", "#f14747", "#f1a247", "#f1ee47", "#b347f1", "#1edbff", "#ed709b", "#5636ed"];// é¢œè‰²ç´¢å¼•var idx = 0;// åˆ‡æ¢é¢œè‰²function changeColor() {    // ä»…å¤œé—´æ¨¡å¼æ‰å¯ç”¨    if (document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark') {        if (document.getElementById("site-name"))            document.getElementById("site-name").style.textShadow = arr[idx] + " 0 0 15px";        if (document.getElementById("site-title"))            document.getElementById("site-title").style.textShadow = arr[idx] + " 0 0 15px";        if (document.getElementById("site-subtitle"))            document.getElementById("site-subtitle").style.textShadow = arr[idx] + " 0 0 10px";        if (document.getElementById("post-info"))            document.getElementById("post-info").style.textShadow = arr[idx] + " 0 0 5px";        try {            document.getElementsByClassName("author-info__name")[0].style.textShadow = arr[idx] + " 0 0 12px";            document.getElementsByClassName("author-info__description")[0].style.textShadow = arr[idx] + " 0 0 12px";        } catch {                    }        idx++;        if (idx == 8) {            idx = 0;        }    } else {        // ç™½å¤©æ¨¡å¼æ¢å¤é»˜è®¤        if (document.getElementById("site-name"))            document.getElementById("site-name").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("site-title"))            document.getElementById("site-title").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("site-subtitle"))            document.getElementById("site-subtitle").style.textShadow = "#1e1e1ee0 1px 1px 1px";        if (document.getElementById("post-info"))            document.getElementById("post-info").style.textShadow = "#1e1e1ee0 1px 1px 1px";        try {            document.getElementsByClassName("author-info__name")[0].style.textShadow = "";            document.getElementsByClassName("author-info__description")[0].style.textShadow = "";        } catch {                    }    }}// å¼€å¯è®¡æ—¶å™¨window.onload = setInterval(changeColor, 1200);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/console.js"/>
      <url>/js/console.js</url>
      
        <content type="html"><![CDATA[var now1 = new Date();function createtime1() {    var grt = new Date("12/03/2022 00:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´    now1.setTime(now1.getTime() + 250);    var days = (now1 - grt) / 1000 / 60 / 60 / 24;    var dnum = Math.floor(days);    var ascll = [        `æ¬¢è¿æ¥åˆ°å°æ¼å¤´|å°æˆ´ã®å°å®¶`,        `æ¥æ—¥æ–¹é•¿ï¼Œä½•æƒ§è½¦é¥é©¬æ…¢ğŸ’‘`,        `                â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—        â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘         â•šâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•        â•šâ•â•  â•šâ•â•â•šâ•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•    â•šâ•â•    â•šâ•â•â•â•â•â•    â•šâ•â•    â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â•                                                                                                                                `,        "å°ç«™å·²ç»è‹Ÿæ´»",        dnum,        "å¤©å•¦!",        "Â©2022 By å°æ¼å¤´|å°æˆ´",    ];    setTimeout(        console.log.bind(            console,            `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,            "color:#39c5bb",            "",            "color:#39c5bb",            "color:#39c5bb",            "",            "color:#39c5bb",            ""        )    );}createtime1();function createtime2() {    var ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€Œå°ç¬¨è›‹ã€`, `Photo captured: `, ` ğŸ¤ª `];    setTimeout(        console.log.bind(            console,            `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}`,            "color:white; background-color:#10bcc0",            "",            "",            'background:url("https://unpkg.zhimg.com/anzhiyu-assets@latest/image/common/tinggge.gif") no-repeat;font-size:450%'        )    );    setTimeout(console.log.bind(console, "%c WELCOME %c æ¬¢è¿å…‰ä¸´ï¼Œå°ç¬¨è›‹", "color:white; background-color:#23c682", ""));    setTimeout(        console.warn.bind(            console,            "%c âš¡ Powered by xiaoyutou %c ä½ æ­£åœ¨è®¿é—®å°æ¼å¤´|å°æˆ´ã®å°å®¶",            "color:white; background-color:#f0ad4e",            ""        )    );    setTimeout(console.log.bind(console, "%c W23-12 %c ç³»ç»Ÿç›‘æµ‹åˆ°ä½ å·²æ‰“å¼€æ§åˆ¶å°", "color:white; background-color:#4f90d9", ""));    setTimeout(        console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­", "color:white; background-color:#d9534f", "")    );}createtime2();console.clear();    //æ¸…æ¥šæ§åˆ¶å°// é‡å†™éƒ¨åˆ†consoleæ–¹æ³•console.log = function () { };console.error = function () { };console.warn = function () { };]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/reward.js"/>
      <url>/js/reward.js</url>
      
        <content type="html"><![CDATA[// å…³äºé¡µé¢çš„èµèµåå•jsæ–‡ä»¶function reward(){    Swal.fire({      title: '<strong>æ‚¨æ­£åœ¨ä¸º <u>Peach</u> å……ç”µ</strong>',      html: '<b>è¯·é€‰æ‹©æ‚¨çš„ä»˜æ¬¾æ–¹å¼</b>',      icon: 'info',      showCancelButton: true,      confirmButtonText:        '<i class="fa-brands fa-alipay"></i> æ”¯ä»˜å®',      cancelButtonText:        '<i class="fa-brands fa-weixin"></i> å¾®ä¿¡æ”¯ä»˜',      confirmButtonColor: '#1677FF',      cancelButtonColor: '#2AAE67',    }).then((result) => {      if (result.isConfirmed) {        Swal.fire({          title: 'æ„Ÿè°¢æ‚¨',          html: 'è¯·æ‰“å¼€æ”¯ä»˜å® <b>[æ‰«ä¸€æ‰«]</b> ä»¥å……ç”µ',          imageUrl: '/img/alipay.jpg',          imageWidth: 175,          imageHeight: 225,          imageAlt: 'Custom image'        }).then((result) => {          Swal.fire(            'å……ç”µæˆåŠŸ',            'æ„Ÿè°¢æ‚¨çš„æ”¯æŒ',            'success'          )        })      } else if (        result.dismiss === Swal.DismissReason.cancel      ) {        Swal.fire({          title: 'æ„Ÿè°¢æ‚¨',          html: 'è¯·æ‰“å¼€å¾®ä¿¡ <b>[æ‰«ä¸€æ‰«]</b> ä»¥å……ç”µ',          imageUrl: '/img/wechat.jpg',          imageWidth: 175,          imageHeight: 225,          imageAlt: 'Custom image'        }).then((result) => {          Swal.fire(            'å……ç”µæˆåŠŸ',            'æ„Ÿè°¢æ‚¨çš„æ”¯æŒ',            'success'          )        })      }    })  }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime.js"/>
      <url>/js/runtime.js</url>
      
        <content type="html"><![CDATA[/*    æ­¤éƒ¨åˆ†ä»£ç äº‹ç”¨æ¥è®¡ç®—æœ¬åšå®¢å½“å‰è¿è¡Œäº†å¤šä¹ˆé•¿æ—¶é—´ï¼Œ    ä»¥åŠåšå®¢footerçš„ä¸€äº›ä¸œè¥¿    åœ¨_config.ymlä¸­çš„footer_beautifä¸­å¼•ç”¨*/var now = new Date;function createtime() {     now.setTime(now.getTime() + 1e3);     var e = new Date("12/03/2022 00:00:00");    var t = Math.trunc(234e8 + (now - e) / 1e3 * 17);    var a = (t / 1496e5).toFixed(6);    var o = new Date("12/03/2022 00:00:00");    var r = (now - o) / 1e3 / 60 / 60 / 24;    var i = Math.floor(r);    var n = (now - o) / 1e3 / 60 / 60 - 24 * i;    var s = Math.floor(n); 1 == String(s).length && (s = "0" + s);     var l = (now - o) / 1e3 / 60 - 1440 * i - 60 * s, g = Math.floor(l); 1 == String(g).length && (g = "0" + g);     var d = (now - o) / 1e3 - 86400 * i - 3600 * s - 60 * g, b = Math.round(d); 1 == String(b).length && (b = "0" + b);     let c = "";     // c = s < 18 && s >= 9 ? `<img class='boardsign' src='https://img.shields.io/badge/F%E5%B0%8F%E5%B1%8B-%E7%A7%91%E7%A0%94%E6%91%B8%E9%B1%BC%E4%B8%AD%F0%9F%90%9F-1ade23?style=social&logo=Buy%20Me%20A%20Coffee' title='åŠªåŠ›å­¦ä¹ ä¸­~'><br> æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${i} å¤© ${s} å°æ—¶ ${g} åˆ† ${b} ç§’ <i id="heartbeat" class='fas fa-heartbeat'></i> <br> æ—…è¡Œè€… 1 å·å½“å‰è·ç¦»åœ°çƒ ${t} åƒç±³ï¼Œçº¦ä¸º ${a} ä¸ªå¤©æ–‡å•ä½ ğŸš€ <br> I wish you to become your own sun, no need to rely on who's light.âœ¨ ` : `<img class='boardsign' src='https://img.shields.io/badge/F%E5%B0%8F%E5%B1%8B-%E4%B8%8B%E7%8F%AD%E4%BC%91%E6%81%AF%E5%95%A6%F0%9F%8C%99-6adea8?style=social&logo=coffeescript' title='æ­£åœ¨å¼€å¼€å¿ƒå¿ƒåœ°ç©è€~'><br> æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${i} å¤© ${s} å°æ—¶ ${g} åˆ† ${b} ç§’ <i id="heartbeat" class='fas fa-heartbeat'></i> <br> æ—…è¡Œè€… 1 å·å½“å‰è·ç¦»åœ°çƒ ${t} åƒç±³ï¼Œçº¦ä¸º ${a} ä¸ªå¤©æ–‡å•ä½ ğŸš€ <br> I wish you to become your own sun, no need to rely on who's light.âœ¨ `, document.getElementById("workboard") && (document.getElementById("workboard").innerHTML = c) } setInterval((() => { createtime() }), 1e3);    c = s < 18 && s >= 9 ? `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${i} å¤© ${s} å°æ—¶ ${g} åˆ† ${b} ç§’ <i id="heartbeat" class='fas fa-heartbeat'></i> <br> æ—…è¡Œè€… 1 å·å½“å‰è·ç¦»åœ°çƒ ${t} åƒç±³ï¼Œçº¦ä¸º ${a} ä¸ªå¤©æ–‡å•ä½ ğŸš€ <br> I wish you to become your own sun, no need to rely on who's light.âœ¨ ` : `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${i} å¤© ${s} å°æ—¶ ${g} åˆ† ${b} ç§’ <i id="heartbeat" class='fas fa-heartbeat'></i> <br> æ—…è¡Œè€… 1 å·å½“å‰è·ç¦»åœ°çƒ ${t} åƒç±³ï¼Œçº¦ä¸º ${a} ä¸ªå¤©æ–‡å•ä½ ğŸš€ <br> I wish you to become your own sun, no need to rely on who's light.âœ¨ `, document.getElementById("workboard") && (document.getElementById("workboard").innerHTML = c) } setInterval((() => { createtime() }), 1e3);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/starry_sky.js"/>
      <url>/js/starry_sky.js</url>
      
        <content type="html"><![CDATA[/*    æ­¤ä»£ç ä¸ºæ˜Ÿç©ºçš„jsä»£ç ï¼Œ    ä»£ç ç”¨æ¥æè¿°æ˜Ÿæ˜Ÿåœ¨ç”»å¸ƒä¸Šçš„è¿åŠ¨è½¨è¿¹    _config.butterfly.ymlä¸­çš„injectä¸­å¼•ç”¨*/function dark() {    window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;    var n, e, i, h, t = .05, s = document.getElementById("universe"), o = !0, a = "180,184,240", r = "226,225,142", d = "226,225,224", c = [];    function f() {        n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute("width", n), s.setAttribute("height", e)    }    function u() {        h.clearRect(0, 0, n, e);        for (var t = c.length, i = 0; i < t; i++) {            var s = c[i]; s.move(), s.fadeIn(), s.fadeOut(), s.draw()        }    }    function y() {        this.reset = function () {            this.giant = m(3),                this.comet = !this.giant && !o && m(10),                this.x = l(0, n - 10), this.y = l(0, e),                this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t,                this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120),                this.fadingOut = null,                this.fadingIn = !0, this.opacity = 0,                this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)),                this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1)        },            this.fadeIn = function () {                this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh),                    this.opacity += this.do)            },            this.fadeOut = function () {                this.fadingOut && (this.fadingOut = !(this.opacity < 0),                    this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset()))            },            this.draw = function () {                if (h.beginPath(), this.giant) {                    h.fillStyle = "rgba(" + a + "," + this.opacity + ")", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1)                }                else if (this.comet) {                    h.fillStyle = "rgba(" + d + "," + this.opacity + ")",                        h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1);                    for (var t = 0; t < 30; t++)h.fillStyle = "rgba(" + d + "," + (this.opacity - this.opacity / 20 * t) + ")", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill()                } else h.fillStyle = "rgba(" + r + "," + this.opacity + ")", h.rect(this.x, this.y, this.r, this.r); h.closePath(), h.fill()            },            this.move = function () {                this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0)            }, setTimeout(function () { o = !1 }, 50)    }    function m(t) {        return Math.floor(1e3 * Math.random()) + 1 < 10 * t    }    function l(t, i) {        return Math.random() * (i - t) + t    }    f(), window.addEventListener("resize", f, !1), function () {        h = s.getContext("2d"); for (var t = 0; t < i; t++)c[t] = new y, c[t].reset(); u()    }(),        function t() {            document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t)        }()};dark()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/txmap.js"/>
      <url>/js/txmap.js</url>
      
        <content type="html"><![CDATA[//getè¯·æ±‚$.ajax({    type: 'get',    url: 'https://apis.map.qq.com/ws/location/v1/ip',    data: {        key: 'GKLBZ-SMFWQ-57F5E-4OCX5-OAUX7-IABAI',        output: 'jsonp',    },    dataType: 'jsonp',    success: function (res) {        ipLoacation = res;    }})function getDistance(e1, n1, e2, n2) {    const R = 6371    const { sin, cos, asin, PI, hypot } = Math    let getPoint = (e, n) => {        e *= PI / 180        n *= PI / 180        return { x: cos(n) * cos(e), y: cos(n) * sin(e), z: sin(n) }    }    let a = getPoint(e1, n1)    let b = getPoint(e2, n2)    let c = hypot(a.x - b.x, a.y - b.y, a.z - b.z)    let r = asin(c / 2) * 2 * R    return Math.round(r);}function showWelcome() {    // æ·„åšå¼ åº—å±±ä¸œç†å·¥å¤§å­¦ç»çº¬åº¦ä¸º 36.811771(ç»´åº¦), 118.039688(ç»åº¦)    // æ—¥ç…§å²šå±±åŒºç§¦æµ·å®¶å›­ç»çº¬åº¦ä¸º 35.12561(ç»´åº¦),119.371948(ç»åº¦)    //å‚æ•°è¯·çœ‹æ–‡æ¡£ï¼šhttps://lbs.qq.com/service/webService/webServiceGuide/webServiceIp    let dist = getDistance(118.039688,36.811771,ipLoacation.result.location.lng, ipLoacation.result.location.lat); //è¿™é‡Œæ¢æˆè‡ªå·±çš„ç»çº¬åº¦    let pos = ipLoacation.result.ad_info.nation;    let ip;    let posdesc;    //æ ¹æ®å›½å®¶ã€çœä»½ã€åŸå¸‚ä¿¡æ¯è‡ªå®šä¹‰æ¬¢è¿è¯­    switch (ipLoacation.result.ad_info.nation) {        case "æ—¥æœ¬":            posdesc = "ã‚ˆã‚ã—ãï¼Œä¸€èµ·å»çœ‹æ¨±èŠ±å—";            break;        case "ç¾å›½":            posdesc = "Let us live in peace!";            break;        case "è‹±å›½":            posdesc = "æƒ³åŒä½ ä¸€èµ·å¤œä¹˜ä¼¦æ•¦çœ¼";            break;        case "ä¿„ç½—æ–¯":            posdesc = "å¹²äº†è¿™ç“¶ä¼ç‰¹åŠ ï¼";            break;        case "æ³•å›½":            posdesc = "C'est La Vie";            break;        case "å¾·å›½":            posdesc = "Die Zeit verging im Fluge.";            break;        case "æ¾³å¤§åˆ©äºš":            posdesc = "ä¸€èµ·å»å¤§å ¡ç¤å§ï¼";            break;        case "åŠ æ‹¿å¤§":            posdesc = "æ‹¾èµ·ä¸€ç‰‡æ«å¶èµ äºˆä½ ";            break;        case "ä¸­å›½":            pos = ipLoacation.result.ad_info.province + " " + ipLoacation.result.ad_info.city + " " + ipLoacation.result.ad_info.district;            ip = ipLoacation.result.ip;            switch (ipLoacation.result.ad_info.province) {                case "åŒ—äº¬å¸‚":                    posdesc = "åŒ—â€”â€”äº¬â€”â€”æ¬¢è¿ä½ ~~~";                    break;                case "å¤©æ´¥å¸‚":                    posdesc = "è®²æ®µç›¸å£°å§ã€‚";                    break;                case "æ²³åŒ—çœ":                    posdesc = "å±±åŠ¿å·å·æˆå£å’ï¼Œå¤©ä¸‹é›„å…³ã€‚é“é©¬é‡‘æˆˆç”±æ­¤å‘ï¼Œæ— é™æ±Ÿå±±ã€‚";                    break;                case "å±±è¥¿çœ":                    posdesc = "å±•å¼€åå…·é•¿ä¸‰å°ºï¼Œå·²å å±±æ²³äº”ç™¾ä½™ã€‚";                    break;                case "å†…è’™å¤è‡ªæ²»åŒº":                    posdesc = "å¤©è‹è‹ï¼Œé‡èŒ«èŒ«ï¼Œé£å¹è‰ä½è§ç‰›ç¾Šã€‚";                    break;                case "è¾½å®çœ":                    posdesc = "æˆ‘æƒ³åƒçƒ¤é¸¡æ¶ï¼";                    break;                case "å‰æ—çœ":                    posdesc = "çŠ¶å…ƒé˜å°±æ˜¯ä¸œåŒ—çƒ§çƒ¤ä¹‹ç‹ã€‚";                    break;                case "é»‘é¾™æ±Ÿçœ":                    posdesc = "å¾ˆå–œæ¬¢å“ˆå°”æ»¨å¤§å‰§é™¢ã€‚";                    break;                case "ä¸Šæµ·å¸‚":                    posdesc = "ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸­å›½åªæœ‰ä¸¤ä¸ªåŸå¸‚ã€‚";                    break;                case "æ±Ÿè‹çœ":                    switch (ipLoacation.result.ad_info.city) {                        case "å—äº¬å¸‚":                            posdesc = "è¿™æ˜¯æˆ‘æŒºæƒ³å»çš„åŸå¸‚å•¦ã€‚";                            break;                        case "è‹å·å¸‚":                            posdesc = "ä¸Šæœ‰å¤©å ‚ï¼Œä¸‹æœ‰è‹æ­ã€‚";                            break;                        default:                            posdesc = "æ•£è£…æ˜¯å¿…é¡»è¦æ•£è£…çš„ã€‚";                            break;                    }                    break;                case "æµ™æ±Ÿçœ":                    posdesc = "ä¸œé£æ¸ç»¿è¥¿æ¹–æŸ³ï¼Œé›å·²è¿˜äººæœªå—å½’ã€‚";                    break;                case "æ²³å—çœ":                    switch (ipLoacation.result.ad_info.city) {                        case "éƒ‘å·å¸‚":                            posdesc = "è±«å·ä¹‹åŸŸï¼Œå¤©åœ°ä¹‹ä¸­ã€‚";                            break;                        case "å—é˜³å¸‚":                            posdesc = "è‡£æœ¬å¸ƒè¡£ï¼Œèº¬è€•äºå—é˜³ã€‚æ­¤å—é˜³éå½¼å—é˜³ï¼";                            break;                        case "é©»é©¬åº—å¸‚":                            posdesc = "å³°å³°æœ‰å¥‡çŸ³ï¼ŒçŸ³çŸ³æŒŸä»™æ°”ã€‚åµ–å²ˆå±±çš„èŠ±å¾ˆç¾å“¦ï¼";                            break;                        case "å¼€å°å¸‚":                            posdesc = "åˆšæ­£ä¸é˜¿åŒ…é’å¤©ã€‚";                            break;                        case "æ´›é˜³å¸‚":                            posdesc = "æ´›é˜³ç‰¡ä¸¹ç”²å¤©ä¸‹ã€‚";                            break;                        default:                            posdesc = "å¯å¦å¸¦æˆ‘å“å°æ²³å—çƒ©é¢å•¦ï¼Ÿ";                            break;                    }                    break;                case "å®‰å¾½çœ":                    posdesc = "èšŒåŸ ä½äº†ï¼ŒèŠœæ¹–èµ·é£ã€‚";                    break;                case "ç¦å»ºçœ":                    posdesc = "äº•é‚‘ç™½äº‘é—´ï¼Œå²©åŸè¿œå¸¦å±±ã€‚";                    break;                case "æ±Ÿè¥¿çœ":                    posdesc = "è½éœä¸å­¤é¹œé½é£ï¼Œç§‹æ°´å…±é•¿å¤©ä¸€è‰²ã€‚";                    break;                case "å±±ä¸œçœ":                    posdesc = "é¥æœ›é½å·ä¹ç‚¹çƒŸï¼Œä¸€æ³“æµ·æ°´æ¯ä¸­æ³»ã€‚";                    break;                case "æ¹–åŒ—çœ":                    posdesc = "æ¥ç¢—çƒ­å¹²é¢ï¼";                    break;                case "æ¹–å—çœ":                    posdesc = "74751ï¼Œé•¿æ²™æ–¯å¡”å…‹ã€‚";                    break;                case "å¹¿ä¸œçœ":                    posdesc = "è€æ¿æ¥ä¸¤æ–¤ç¦å»ºäººã€‚";                    break;                case "å¹¿è¥¿å£®æ—è‡ªæ²»åŒº":                    posdesc = "æ¡‚æ—å±±æ°´ç”²å¤©ä¸‹ã€‚";                    break;                case "æµ·å—çœ":                    posdesc = "æœè§‚æ—¥å‡ºé€ç™½æµªï¼Œå¤•çœ‹äº‘èµ·æ”¶éœå…‰ã€‚";                    break;                case "å››å·çœ":                    posdesc = "åº·åº·å·å¦¹å­ã€‚";                    break;                case "è´µå·çœ":                    posdesc = "èŒ…å°ï¼Œå­¦ç”Ÿï¼Œå†å¡200ã€‚";                    break;                case "äº‘å—çœ":                    posdesc = "ç‰é¾™é£èˆäº‘ç¼ ç»•ï¼Œä¸‡ä»å†°å·ç›´è€¸å¤©ã€‚";                    break;                case "è¥¿è—è‡ªæ²»åŒº":                    posdesc = "èººåœ¨èŒ«èŒ«è‰åŸä¸Šï¼Œä»°æœ›è“å¤©ã€‚";                    break;                case "é™•è¥¿çœ":                    posdesc = "æ¥ä»½è‡Šå­é¢åŠ é¦ã€‚";                    break;                case "ç”˜è‚ƒçœ":                    posdesc = "ç¾Œç¬›ä½•é¡»æ€¨æ¨æŸ³ï¼Œæ˜¥é£ä¸åº¦ç‰é—¨å…³ã€‚";                    break;                case "é’æµ·çœ":                    posdesc = "ç‰›è‚‰å¹²å’Œè€é…¸å¥¶éƒ½å¥½å¥½åƒã€‚";                    break;                case "å®å¤å›æ—è‡ªæ²»åŒº":                    posdesc = "å¤§æ¼ å­¤çƒŸç›´ï¼Œé•¿æ²³è½æ—¥åœ†ã€‚";                    break;                case "æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº":                    posdesc = "é©¼é“ƒå¤é“ä¸ç»¸è·¯ï¼Œèƒ¡é©¬çŠ¹é—»å”æ±‰é£ã€‚";                    break;                case "å°æ¹¾çœ":                    posdesc = "æˆ‘åœ¨è¿™å¤´ï¼Œå¤§é™†åœ¨é‚£å¤´ã€‚";                    break;                case "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº":                    posdesc = "æ°¸å®šè´¼æœ‰æ®‹ç•™åœ°é¬¼åšï¼Œè¿å‡»å…‰éå²ç‰ã€‚";                    break;                case "æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº":                    posdesc = "æ€§æ„Ÿè·å®˜ï¼Œåœ¨çº¿å‘ç‰Œã€‚";                    break;                default:                    posdesc = "å¸¦æˆ‘å»ä½ çš„åŸå¸‚é€›é€›å§ï¼";                    break;            }            break;        default:            posdesc = "å¸¦æˆ‘å»ä½ çš„å›½å®¶é€›é€›å§ã€‚";            break;    }    //æ ¹æ®æœ¬åœ°æ—¶é—´åˆ‡æ¢æ¬¢è¿è¯­    let timeChange;    let date = new Date();    if (date.getHours() >= 5 && date.getHours() < 11) timeChange = "<span>ä¸Šåˆå¥½</span>ï¼Œä¸€æ—¥ä¹‹è®¡åœ¨äºæ™¨ï¼";    else if (date.getHours() >= 11 && date.getHours() < 13) timeChange = "<span>ä¸­åˆå¥½</span>ï¼Œè¯¥æ‘¸é±¼åƒåˆé¥­äº†ã€‚";    else if (date.getHours() >= 13 && date.getHours() < 15) timeChange = "<span>ä¸‹åˆå¥½</span>ï¼Œæ‡’æ‡’åœ°ç¡ä¸ªåˆè§‰å§ï¼";    else if (date.getHours() >= 15 && date.getHours() < 16) timeChange = "<span>ä¸‰ç‚¹å‡ å•¦</span>ï¼Œä¸€èµ·é¥®èŒ¶å‘€ï¼";    else if (date.getHours() >= 16 && date.getHours() < 19) timeChange = "<span>å¤•é˜³æ— é™å¥½ï¼</span>";    else if (date.getHours() >= 19 && date.getHours() < 24) timeChange = "<span>æ™šä¸Šå¥½</span>ï¼Œå¤œç”Ÿæ´»å—¨èµ·æ¥ï¼";    else timeChange = "å¤œæ·±äº†ï¼Œæ—©ç‚¹ä¼‘æ¯ï¼Œå°‘ç†¬å¤œã€‚";    try {        //è‡ªå®šä¹‰æ–‡æœ¬å’Œéœ€è¦æ”¾çš„ä½ç½®        document.getElementById("welcome-info").innerHTML =            `<b><center>ğŸ‰ æ¬¢è¿ä¿¡æ¯ ğŸ‰</center>&emsp;&emsp;æ¬¢è¿æ¥è‡ª <span style="color:white">${pos}</span> çš„å°ä¼™ä¼´ï¼Œ${timeChange}æ‚¨ç°åœ¨è·ç¦»ç«™é•¿çº¦ <span style="color:white">${dist}</span> å…¬é‡Œï¼Œå½“å‰çš„IPåœ°å€ä¸ºï¼š <span style="color:white">${ip}</span>ï¼Œ ${posdesc}</b>`;    } catch (err) {        console.log("Pjaxæ— æ³•è·å–#welcome-infoå…ƒç´ ğŸ™„ğŸ™„ğŸ™„")    }}window.onload = showWelcome;// å¦‚æœä½¿ç”¨äº†pjaxåœ¨åŠ ä¸Šä¸‹é¢è¿™è¡Œä»£ç document.addEventListener('pjax:complete', showWelcome);// äºŒå‰æ’åºæ ‘ç®—æ³•]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å‹é“¾</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[<style>    .not-home-page{        /*height: 100px!important;*/    }    #page-site-info{        /*display: none;*/    }    #page{        /*background-color: rgba(255, 255, 255, 0.2)!important;*/        /*border: none!important;*/    }    .flink-list-item{        /*!*box-shadow: 0 0 10px #eeeeee; /\* è®¾ç½®æ°´å¹³é˜´å½± \*!  *!*/        /*!*box-shadow: 0 -10px 10px #eeeeee; /\* è®¾ç½®å‚ç›´é˜´å½± \*!*!*/        /*background-color: rgba(255, 255, 255, 1)!important;*/        /*border: none!important;*/    }</style>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ‹çˆ±å°å±‹ğŸ’•</title>
      <link href="/love/index.html"/>
      <url>/love/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>é¡¹ç›®</title>
      <link href="/my_project/index.html"/>
      <url>/my_project/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºæœ¬ç«™</title>
      <link href="/web_site/index.html"/>
      <url>/web_site/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å” å—‘</title>
      <link href="/%E5%94%A0%E5%97%91/index.html"/>
      <url>/%E5%94%A0%E5%97%91/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢è£…ä¿®æ—¥å¿—</title>
      <link href="/%E8%A3%85%E4%BF%AE%E6%97%A5%E5%BF%97/index.html"/>
      <url>/%E8%A3%85%E4%BF%AE%E6%97%A5%E5%BF%97/index.html</url>
      
        <content type="html"><![CDATA[<div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>åšå®¢è£…ä¿®æ—¥å¿—â° </p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-5-10</p></div></div><div class='timeline-item-content'><ol><li><p>iosæ·»åŠ åˆ°ä¸»å±å¹•webapp</p><p>å‚è€ƒï¼š<a href="https://blog.zhheo.com/p/b737e93d.html">è®©ç½‘é¡µæ”¯æŒiOSæ·»åŠ åˆ°ä¸»å±å¹•å…¨å±åº”ç”¨ï¼Œwebappå¯åŠ¨å›¾ç”Ÿæˆå·¥å…·</a></p><p>ä¿®æ”¹ä»£ç ä½ç½®ï¼š</p><p><code>themes/butterfly/layout/includes/head.pug</code></p><p><code>themes/butterfly/source/manifest.json</code></p><p>å›¾ç‰‡å­˜å‚¨ä½ç½®ï¼š<code>/themes/butterfly/source/img/pwa/</code></p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-4-3</p></div></div><div class='timeline-item-content'><ol><li><p>å¯¹æ ‡ç­¾é¡µè¿›è¡Œé­”æ”¹</p><p>å‚è€ƒï¼š<a href="https://blog.leonus.cn/2022/tags.html">Hexoåšå®¢æ ‡ç­¾çš„é­”æ”¹</a></p><p>ä¿®æ”¹ä»£ç ï¼š<code>[blogroot]/source/css/css.css</code>çš„347è¡Œï¼›**<code>butterfly\scripts\helpers\page.js</code>**çš„52è¡Œ</p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-3-20</p></div></div><div class='timeline-item-content'><ol><li><strong>å…³é—­æ—§ç‰ˆé¦–é¡µåˆ†ç±»ç£é“</strong></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-3-20</p></div></div><div class='timeline-item-content'><ol><li><p><strong>å…³é—­æ—§ç‰ˆé¦–é¡µåˆ†ç±»ç£é“</strong></p></li><li><p><strong>æ¬¢è¿ä¿¡æ¯æ˜¾ç¤ºåœ°ç†ä½ç½®</strong></p><p>å‚è€ƒï¼š<a href="https://www.fomal.cc/posts/d739261b.html">https://www.fomal.cc/posts/d739261b.html</a></p><p>ä½¿ç”¨äº†è…¾è®¯çš„<a href="https://lbs.qq.com/dev/console/application/mine">è…¾è®¯ä½ç½®æœåŠ¡</a></p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-3-2</p></div></div><div class='timeline-item-content'><ol><li><p>å…³äºé¡µé¢ç¾åŒ–</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://opeach.cn/posts/dab4.html">Peach</a>ã€<a href="https://anzhiy.cn/posts/e62b.html">å®‰çŸ¥é±¼</a></p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-2-9</p></div></div><div class='timeline-item-content'><ol><li><p>ä¸ªäººä¿¡æ¯å¡ç‰‡ç¾åŒ–</p><p>å‚è€ƒï¼š<a href="https://blog.shineyu.cn/card-author-tutorial.html">Shine</a></p><p>åˆ é™¤äº†ä¹‹å‰çš„èƒŒæ™¯å›¾ï¼Œåœ¨<code>BLOG/source/css.css</code> ä¸­ 215 è¡Œ</p><p>ä¿®æ”¹äº†ä¸»é¢˜æ–‡ä»¶<code>card_author.pug</code></p><p>æ–°å»ºäº†<code>source/js/card_author.js</code>æ–‡ä»¶å’Œ<code>source/css/card_author.css</code></p></li><li><p>å¼€å¯äº†pjax</p><p>åœ¨<code>_config.butterfly.yml</code>æ–‡ä»¶çš„843è¡Œ</p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-2-6</p></div></div><div class='timeline-item-content'><ol><li><strong>å¸è½½äº†Live2D</strong></li><li><strong>å…³é—­è‡ªåŠ¨å¤œé—´æ¨¡å¼</strong></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-2-3</p></div></div><div class='timeline-item-content'><ol><li><p><strong>å¯¼èˆªæ æ ·å¼ä¿®æ”¹</strong></p><p>å¦‚æœéœ€è¦ä¿®æ”¹ï¼›</p><p>ä¿®æ”¹æ–¹æ³•ï¼šåœ¨åšå®¢æ ¹ç›®å½•ä¸‹çš„cssæ–‡ä»¶ä¸­æ–°å»ºäº†nav_menuæ–‡ä»¶å¤¹ï¼Œå¯¹å¯¼èˆªæ æ ·å¼é­”æ”¹</p><p>é­”æ”¹å‰ï¼š</p><p><a href="https://picbed.dai2yutou.space/web_img/11.png">é­”æ”¹å‰æ ·å¼</a></p><p>é­”æ”¹åï¼š</p><p><a href="ttps://picbed.dai2yutou.space/web_img/12.png">é­”æ”¹åæ ·å¼</a></p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-1-20</p></div></div><div class='timeline-item-content'><ol><li><p><strong>å¯¹æ§åˆ¶å°æ ·å¼è‡ªå®šä¹‰</strong></p><p><strong>å‚è€ƒåšå®¢</strong>ï¼š<a href="https://anzhiy.cn/posts/3444.html">â™ª(^âˆ‡^*)æ¬¢è¿è‚¥æ¥ï¼consoleçš„é«˜çº§ç”¨æ³• | å®‰çŸ¥é±¼ (anzhiy.cn)</a></p><p><strong>æ–¹æ³•</strong>ï¼šæ–°å»ºç«‹äº†ä¸€ä¸ª<code>console.js</code>æ–‡ä»¶æ”¾åœ¨äº†åšå®¢æ ¹ç›®å½•ä¸‹çš„<code>js</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶åœ¨ç«™ç‚¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>inject</code>ä¸­å¼•å…¥ï¼Œå…·ä½“å¯è§<code>_config.butterfly.yml</code>ä¸­ç¬¬920è¡Œ</p></li><li><p><strong>é¡¶éƒ¨æ¸å˜åŠ è½½æ¡</strong></p><p><strong>å‚è€ƒåšå®¢</strong>ï¼š<a href="https://www.chuckle.top/article/13d6481a.html">ç»™ButterflyåŠ ä¸Šé¡¶éƒ¨åŠ è½½æ¡ | è½»ç¬‘Chuckle</a></p><p><strong>æ–¹æ³•</strong>ï¼šæ–°å»ºäº†ä¸€ä¸ªprogress_bar.cssæ–‡ä»¶æ”¾åœ¨äº†åšå®¢æ ¹ç›®å½•ä¸‹çš„cssæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶åœ¨ç«™ç‚¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>inject</code>ä¸­å¼•å…¥ï¼Œç„¶åéœ€è¦injectä¸­å¼•å…¥å¿…è¦çš„jsä¾èµ–ã€‚</p></li><li><p><strong>HeoåŒæ¬¾åŠ è½½åŠ¨ç”»</strong></p><p><strong>å‚è€ƒåšå®¢</strong>ï¼š<a href="https://anzhiy.cn/posts/52d8.html">HeoåŒæ¬¾loadingåŠ¨ç”» | å®‰çŸ¥é±¼ (anzhiy.cn)</a></p><p><strong>æ–¹æ³•</strong>ï¼šå‚è€ƒåšå®¢ï¼Œæ³¨æ„å®šä¹‰æ»¡å±åŠ è½½çš„å¤´åƒçš„cssä»£ç åœ¨[BlogRoot]&#x2F;source&#x2F;css&#x2F;css.cssæ–‡ä»¶çš„ç¬¬329è¡Œï¼Œéœ€è¦ä¿®æ”¹å¤´åƒæ—¶æ”¹å˜backgroundçš„åœ°å€å³å¯ã€‚</p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-1-7</p></div></div><div class='timeline-item-content'><ol><li><p><strong>å®‰è£…äº†PDFæ’ä»¶</strong></p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.fomal.cc/posts/2d7ac914.html">åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(å››) | FomalhautğŸ¥</a></p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶</span></span><br><span class="line">&#123;% pdf ./æ–‡ä»¶å/xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.åœ¨çº¿é“¾æ¥(æ¨èç¬¬äºŒç§)</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf %&#125;</span><br></pre></td></tr></table></figure></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-1-5</p></div></div><div class='timeline-item-content'><ol><li><p><strong>åšå®¢å®½å±é€‚é…</strong></p><p>é…ç½®ä¿¡æ¯æ”¾åœ¨äº†<code>BLOG/source/css.css</code>ä¸­188è¡Œ</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.fomal.cc/posts/d739261b.html">åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(å››) | FomalhautğŸ¥</a></p></li><li><p><strong>æ–‡ç« ä¸‰æ </strong>ã€æš‚æ—¶æ”¹å›æ¥äº†ã€‘</p><p>é…ç½®ä¿¡æ¯æ”¾åœ¨äº†<code>_config.butterfly.yml</code>ä¸­1047è¡Œï¼Œæ³¨æ„çœ‹é­”æ”¹æ–¹æ³•ï¼Œæ”¹äº†è®¸å¤šå¤šåœ°æ–¹</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.fomal.cc/posts/d739261b.html">åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(å››) | FomalhautğŸ¥</a></p></li><li><p><strong>ä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾</strong></p><p>é…ç½®ä¿¡æ¯æ”¾åœ¨äº†<code>BLOG/source/css.css</code>ä¸­215è¡Œ</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.fomal.cc/posts/d739261b.html">åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(å››) | FomalhautğŸ¥</a></p></li><li><p><strong>é¡µé¢æ ·å¼è°ƒèŠ‚</strong>ã€</p><p>é…ç½®ä¿¡æ¯æ”¾åœ¨äº†<code>BLOG/source/css.css</code>ä¸­233è¡Œ</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.fomal.cc/posts/5389e93f.html">åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(äº”) | FomalhautğŸ¥</a></p></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-1-4</p></div></div><div class='timeline-item-content'><ul><li><p>å¤–æŒ‚æ ‡ç­¾å¼•å…¥</p><p>é…ç½®ä¿¡æ¯æ”¾åœ¨äº†<code>_config.yml</code>ä¸­340è¡Œã€‚</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.fomal.cc/posts/5389e93f.html">åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(äºŒ) | FomalhautğŸ¥</a></p></li><li><p>æ–‡ç« ç½®é¡¶æ»šåŠ¨æ </p><p>é…ç½®ä¿¡æ¯æ”¾åœ¨äº†_config.butterfly.ymlä¸­1027è¡Œ</p><p>å‚è€ƒåšå®¢ï¼š<a href="https://www.fomal.cc/posts/eec9786.html">åšå®¢é­”æ”¹æ•™ç¨‹æ€»ç»“(ä¸€) | FomalhautğŸ¥</a></p></li></ul></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-12-30</p></div></div><div class='timeline-item-content'><ol><li><p>[Hexoä¸­ä½¿ç”¨emojiè¡¨æƒ…]</p><blockquote><p>Hexoå¯¹åšå®¢å®æ–½äº†Github emoji æ¸²æŸ“åˆ°é™æ€çš„ html é¡µé¢ä¸­</p><p>å…·ä½“å‚è€ƒåšå®¢ï¼š<a href="https://blog.xaoxu.cn/archives/hexo-use-emoji">https://blog.xaoxu.cn/archives/hexo-use-emoji</a></p></blockquote></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-12-3 [åšå®¢è¯ç”Ÿ]</p></div></div><div class='timeline-item-content'><ol><li>å®‰è£…Hexoåšå®¢ï¼Œé…ç½®node.js</li><li>åšå®¢ä¸Šä¼ åˆ°Githubï¼Œåšå®¢éƒ¨ç½²åˆ°Vercel</li><li>æ›´æ¢ä¸»é¢˜ä¸ºbutterfly</li><li>å®Œæˆbutterflyçš„åŸºç¡€é…ç½®</li><li>å®‰è£…æ’ä»¶ä¾§æ ç”µå­æ—¶é’Ÿã€Live2D çœ‹æ¿å¨˜</li><li>è£…ä¿®ä¸»èœå•æ </li><li>è£…ä¿®åšå®¢çš„footer<blockquote><p>å‚è€ƒåšå®¢ï¼š<br><a href="https://www.fomal.cc/">FomalhautğŸ¥</a></p></blockquote></li></ol></div></div></div>]]></content>
      
    </entry>
    
    
  
</search>
